// Generated by Construct 3, the game and app creator :: https://www.construct.net
'use strict';(function(e,d){"object"===typeof exports&&"undefined"!==typeof module?d(exports):"function"===typeof define&&define.amd?define(["exports"],d):(e=e||self,d(e.glMatrix={}))})(this,function(e){function d(n,q,v){var z=q[0],C=q[1],D=q[2];q=q[3];var G=v[0],J=v[1],K=v[2];v=v[3];n[0]=z*G+D*J;n[1]=C*G+q*J;n[2]=z*K+D*v;n[3]=C*K+q*v;return n}function c(n,q,v){n[0]=q[0]-v[0];n[1]=q[1]-v[1];n[2]=q[2]-v[2];n[3]=q[3]-v[3];return n}function f(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=q[4];q=q[5];var K=
v[0],M=v[1],Q=v[2],T=v[3],X=v[4];v=v[5];n[0]=z*K+D*M;n[1]=C*K+G*M;n[2]=z*Q+D*T;n[3]=C*Q+G*T;n[4]=z*X+D*v+J;n[5]=C*X+G*v+q;return n}function g(n,q,v){n[0]=q[0]-v[0];n[1]=q[1]-v[1];n[2]=q[2]-v[2];n[3]=q[3]-v[3];n[4]=q[4]-v[4];n[5]=q[5]-v[5];return n}function h(){var n=new ma(9);ma!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0);n[0]=1;n[4]=1;n[8]=1;return n}function m(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7];q=q[8];var T=v[0],X=v[1],U=v[2],ca=v[3],ba=v[4],Z=v[5],
ra=v[6],la=v[7];v=v[8];n[0]=T*z+X*G+U*M;n[1]=T*C+X*J+U*Q;n[2]=T*D+X*K+U*q;n[3]=ca*z+ba*G+Z*M;n[4]=ca*C+ba*J+Z*Q;n[5]=ca*D+ba*K+Z*q;n[6]=ra*z+la*G+v*M;n[7]=ra*C+la*J+v*Q;n[8]=ra*D+la*K+v*q;return n}function k(n,q,v){n[0]=q[0]-v[0];n[1]=q[1]-v[1];n[2]=q[2]-v[2];n[3]=q[3]-v[3];n[4]=q[4]-v[4];n[5]=q[5]-v[5];n[6]=q[6]-v[6];n[7]=q[7]-v[7];n[8]=q[8]-v[8];return n}function a(n){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function b(n,
q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7],T=q[8],X=q[9],U=q[10],ca=q[11],ba=q[12],Z=q[13],ra=q[14];q=q[15];var la=v[0],pa=v[1],qa=v[2],oa=v[3];n[0]=la*z+pa*J+qa*T+oa*ba;n[1]=la*C+pa*K+qa*X+oa*Z;n[2]=la*D+pa*M+qa*U+oa*ra;n[3]=la*G+pa*Q+qa*ca+oa*q;la=v[4];pa=v[5];qa=v[6];oa=v[7];n[4]=la*z+pa*J+qa*T+oa*ba;n[5]=la*C+pa*K+qa*X+oa*Z;n[6]=la*D+pa*M+qa*U+oa*ra;n[7]=la*G+pa*Q+qa*ca+oa*q;la=v[8];pa=v[9];qa=v[10];oa=v[11];n[8]=la*z+pa*J+qa*T+oa*ba;n[9]=la*C+pa*K+qa*X+oa*Z;n[10]=la*D+pa*
M+qa*U+oa*ra;n[11]=la*G+pa*Q+qa*ca+oa*q;la=v[12];pa=v[13];qa=v[14];oa=v[15];n[12]=la*z+pa*J+qa*T+oa*ba;n[13]=la*C+pa*K+qa*X+oa*Z;n[14]=la*D+pa*M+qa*U+oa*ra;n[15]=la*G+pa*Q+qa*ca+oa*q;return n}function l(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=z+z,K=C+C,M=D+D;q=z*J;var Q=z*K;z*=M;var T=C*K;C*=M;D*=M;J*=G;K*=G;G*=M;n[0]=1-(T+D);n[1]=Q+G;n[2]=z-K;n[3]=0;n[4]=Q-G;n[5]=1-(q+D);n[6]=C+J;n[7]=0;n[8]=z+K;n[9]=C-J;n[10]=1-(q+T);n[11]=0;n[12]=v[0];n[13]=v[1];n[14]=v[2];n[15]=1;return n}function p(n,q){n[0]=
q[12];n[1]=q[13];n[2]=q[14];return n}function r(n,q){var v=q[4],z=q[5],C=q[6],D=q[8],G=q[9],J=q[10];n[0]=Math.hypot(q[0],q[1],q[2]);n[1]=Math.hypot(v,z,C);n[2]=Math.hypot(D,G,J);return n}function t(n,q){var v=new ma(3);r(v,q);var z=1/v[0],C=1/v[1],D=1/v[2],G=q[0]*z;v=q[1]*C;var J=q[2]*D,K=q[4]*z,M=q[5]*C,Q=q[6]*D;z*=q[8];C*=q[9];q=q[10]*D;D=G+M+q;0<D?(G=2*Math.sqrt(D+1),n[3]=.25*G,n[0]=(Q-C)/G,n[1]=(z-J)/G,n[2]=(v-K)/G):G>M&&G>q?(G=2*Math.sqrt(1+G-M-q),n[3]=(Q-C)/G,n[0]=.25*G,n[1]=(v+K)/G,n[2]=(z+
J)/G):M>q?(G=2*Math.sqrt(1+M-G-q),n[3]=(z-J)/G,n[0]=(v+K)/G,n[1]=.25*G,n[2]=(Q+C)/G):(G=2*Math.sqrt(1+q-G-M),n[3]=(v-K)/G,n[0]=(z+J)/G,n[1]=(Q+C)/G,n[2]=.25*G);return n}function u(n,q,v){n[0]=q[0]-v[0];n[1]=q[1]-v[1];n[2]=q[2]-v[2];n[3]=q[3]-v[3];n[4]=q[4]-v[4];n[5]=q[5]-v[5];n[6]=q[6]-v[6];n[7]=q[7]-v[7];n[8]=q[8]-v[8];n[9]=q[9]-v[9];n[10]=q[10]-v[10];n[11]=q[11]-v[11];n[12]=q[12]-v[12];n[13]=q[13]-v[13];n[14]=q[14]-v[14];n[15]=q[15]-v[15];return n}function w(){var n=new ma(3);ma!=Float32Array&&
(n[0]=0,n[1]=0,n[2]=0);return n}function x(n){return Math.hypot(n[0],n[1],n[2])}function A(n,q,v){var z=new ma(3);z[0]=n;z[1]=q;z[2]=v;return z}function E(n,q,v){n[0]=q[0]-v[0];n[1]=q[1]-v[1];n[2]=q[2]-v[2];return n}function y(n,q,v){n[0]=q[0]*v[0];n[1]=q[1]*v[1];n[2]=q[2]*v[2];return n}function B(n,q,v){n[0]=q[0]/v[0];n[1]=q[1]/v[1];n[2]=q[2]/v[2];return n}function H(n,q){return Math.hypot(q[0]-n[0],q[1]-n[1],q[2]-n[2])}function P(n,q){var v=q[0]-n[0],z=q[1]-n[1];n=q[2]-n[2];return v*v+z*z+n*n}function F(n){var q=
n[0],v=n[1];n=n[2];return q*q+v*v+n*n}function I(n,q){var v=q[0],z=q[1],C=q[2];v=v*v+z*z+C*C;0<v&&(v=1/Math.sqrt(v));n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;return n}function N(n,q){return n[0]*q[0]+n[1]*q[1]+n[2]*q[2]}function R(n,q,v){var z=q[0],C=q[1];q=q[2];var D=v[0],G=v[1];v=v[2];n[0]=C*v-q*G;n[1]=q*D-z*v;n[2]=z*G-C*D;return n}function S(){var n=new ma(4);ma!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0);return n}function Y(n){var q=new ma(4);q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];return q}function W(n,
q,v,z){var C=new ma(4);C[0]=n;C[1]=q;C[2]=v;C[3]=z;return C}function ea(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];return n}function na(n,q,v,z,C){n[0]=q;n[1]=v;n[2]=z;n[3]=C;return n}function ja(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+v[1];n[2]=q[2]+v[2];n[3]=q[3]+v[3];return n}function wa(n,q,v){n[0]=q[0]-v[0];n[1]=q[1]-v[1];n[2]=q[2]-v[2];n[3]=q[3]-v[3];return n}function sa(n,q,v){n[0]=q[0]*v[0];n[1]=q[1]*v[1];n[2]=q[2]*v[2];n[3]=q[3]*v[3];return n}function Da(n,q,v){n[0]=q[0]/v[0];n[1]=q[1]/v[1];n[2]=
q[2]/v[2];n[3]=q[3]/v[3];return n}function Ea(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;n[3]=q[3]*v;return n}function Aa(n,q){return Math.hypot(q[0]-n[0],q[1]-n[1],q[2]-n[2],q[3]-n[3])}function za(n,q){var v=q[0]-n[0],z=q[1]-n[1],C=q[2]-n[2];n=q[3]-n[3];return v*v+z*z+C*C+n*n}function ia(n){return Math.hypot(n[0],n[1],n[2],n[3])}function Fa(n){var q=n[0],v=n[1],z=n[2];n=n[3];return q*q+v*v+z*z+n*n}function xa(n,q){var v=q[0],z=q[1],C=q[2];q=q[3];var D=v*v+z*z+C*C+q*q;0<D&&(D=1/Math.sqrt(D));n[0]=
v*D;n[1]=z*D;n[2]=C*D;n[3]=q*D;return n}function Ca(n,q){return n[0]*q[0]+n[1]*q[1]+n[2]*q[2]+n[3]*q[3]}function Pa(n,q,v,z){var C=q[0],D=q[1],G=q[2];q=q[3];n[0]=C+z*(v[0]-C);n[1]=D+z*(v[1]-D);n[2]=G+z*(v[2]-G);n[3]=q+z*(v[3]-q);return n}function Qa(n,q){return n[0]===q[0]&&n[1]===q[1]&&n[2]===q[2]&&n[3]===q[3]}function Ra(n,q){var v=n[0],z=n[1],C=n[2];n=n[3];var D=q[0],G=q[1],J=q[2];q=q[3];return Math.abs(v-D)<=.000001*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(z-G)<=.000001*Math.max(1,Math.abs(z),
Math.abs(G))&&Math.abs(C-J)<=.000001*Math.max(1,Math.abs(C),Math.abs(J))&&Math.abs(n-q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))}function Ja(){var n=new ma(4);ma!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0);n[3]=1;return n}function Sa(n,q,v){v*=.5;var z=Math.sin(v);n[0]=z*q[0];n[1]=z*q[1];n[2]=z*q[2];n[3]=Math.cos(v);return n}function Ta(n,q,v){var z=q[0],C=q[1],D=q[2];q=q[3];var G=v[0],J=v[1],K=v[2];v=v[3];n[0]=z*v+q*G+C*K-D*J;n[1]=C*v+q*J+D*G-z*K;n[2]=D*v+q*K+z*J-C*G;n[3]=q*v-z*G-C*J-D*K;return n}
function Ua(n,q,v){v*=.5;var z=q[0],C=q[1],D=q[2];q=q[3];var G=Math.sin(v);v=Math.cos(v);n[0]=z*v+q*G;n[1]=C*v+D*G;n[2]=D*v-C*G;n[3]=q*v-z*G;return n}function Va(n,q,v){v*=.5;var z=q[0],C=q[1],D=q[2];q=q[3];var G=Math.sin(v);v=Math.cos(v);n[0]=z*v-D*G;n[1]=C*v+q*G;n[2]=D*v+z*G;n[3]=q*v-C*G;return n}function Wa(n,q,v){v*=.5;var z=q[0],C=q[1],D=q[2];q=q[3];var G=Math.sin(v);v=Math.cos(v);n[0]=z*v+C*G;n[1]=C*v-z*G;n[2]=D*v+q*G;n[3]=q*v-D*G;return n}function Xa(n,q){var v=q[0],z=q[1],C=q[2],D=Math.sqrt(v*
v+z*z+C*C);q=Math.exp(q[3]);var G=0<D?q*Math.sin(D)/D:0;n[0]=v*G;n[1]=z*G;n[2]=C*G;n[3]=q*Math.cos(D);return n}function Ya(n,q){var v=q[0],z=q[1],C=q[2];q=q[3];var D=Math.sqrt(v*v+z*z+C*C);D=0<D?Math.atan2(D,q)/D:0;n[0]=v*D;n[1]=z*D;n[2]=C*D;n[3]=.5*Math.log(v*v+z*z+C*C+q*q);return n}function Ka(n,q,v,z){var C=q[0],D=q[1],G=q[2];q=q[3];var J=v[0],K=v[1],M=v[2];v=v[3];var Q=C*J+D*K+G*M+q*v;0>Q&&(Q=-Q,J=-J,K=-K,M=-M,v=-v);if(.000001<1-Q){var T=Math.acos(Q);var X=Math.sin(T);Q=Math.sin((1-z)*T)/X;z=
Math.sin(z*T)/X}else Q=1-z;n[0]=Q*C+z*J;n[1]=Q*D+z*K;n[2]=Q*G+z*M;n[3]=Q*q+z*v;return n}function Za(n,q){var v=q[0]+q[4]+q[8];if(0<v)v=Math.sqrt(v+1),n[3]=.5*v,v=.5/v,n[0]=(q[5]-q[7])*v,n[1]=(q[6]-q[2])*v,n[2]=(q[1]-q[3])*v;else{var z=0;q[4]>q[0]&&(z=1);q[8]>q[3*z+z]&&(z=2);var C=(z+1)%3,D=(z+2)%3;v=Math.sqrt(q[3*z+z]-q[3*C+C]-q[3*D+D]+1);n[z]=.5*v;v=.5/v;n[3]=(q[3*C+D]-q[3*D+C])*v;n[C]=(q[3*C+z]+q[3*z+C])*v;n[D]=(q[3*D+z]+q[3*z+D])*v}return n}function $a(n,q,v){var z=.5*v[0],C=.5*v[1];v=.5*v[2];
var D=q[0],G=q[1],J=q[2];q=q[3];n[0]=D;n[1]=G;n[2]=J;n[3]=q;n[4]=z*q+C*J-v*G;n[5]=C*q+v*D-z*J;n[6]=v*q+z*G-C*D;n[7]=-z*D-C*G-v*J;return n}function ab(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];n[4]=q[4];n[5]=q[5];n[6]=q[6];n[7]=q[7];return n}function bb(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=v[4],K=v[5],M=v[6],Q=v[7],T=q[4],X=q[5],U=q[6];q=q[7];var ca=v[0],ba=v[1],Z=v[2];v=v[3];n[0]=z*v+G*ca+C*Z-D*ba;n[1]=C*v+G*ba+D*ca-z*Z;n[2]=D*v+G*Z+z*ba-C*ca;n[3]=G*v-z*ca-C*ba-D*Z;n[4]=z*Q+G*J+C*M-D*K+T*v+
q*ca+X*Z-U*ba;n[5]=C*Q+G*K+D*J-z*M+X*v+q*ba+U*ca-T*Z;n[6]=D*Q+G*M+z*K-C*J+U*v+q*Z+T*ba-X*ca;n[7]=G*Q-z*J-C*K-D*M+q*v-T*ca-X*ba-U*Z;return n}function cb(){var n=new ma(2);ma!=Float32Array&&(n[0]=0,n[1]=0);return n}function db(n,q,v){n[0]=q[0]-v[0];n[1]=q[1]-v[1];return n}function eb(n,q,v){n[0]=q[0]*v[0];n[1]=q[1]*v[1];return n}function fb(n,q,v){n[0]=q[0]/v[0];n[1]=q[1]/v[1];return n}function gb(n,q){return Math.hypot(q[0]-n[0],q[1]-n[1])}function hb(n,q){var v=q[0]-n[0];n=q[1]-n[1];return v*v+n*
n}function ib(n){return Math.hypot(n[0],n[1])}function jb(n){var q=n[0];n=n[1];return q*q+n*n}var ma="undefined"!==typeof Float32Array?Float32Array:Array,Ga=Math.random,kb=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var n=0,q=arguments.length;q--;)n+=arguments[q]*arguments[q];return Math.sqrt(n)});var lb=Object.freeze({__proto__:null,EPSILON:.000001,get ARRAY_TYPE(){return ma},RANDOM:Ga,setMatrixArrayType:function(n){ma=n},toRadian:function(n){return n*kb},equals:function(n,q){return Math.abs(n-
q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))}}),mb=Object.freeze({__proto__:null,create:function(){var n=new ma(4);ma!=Float32Array&&(n[1]=0,n[2]=0);n[0]=1;n[3]=1;return n},clone:function(n){var q=new ma(4);q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];return q},copy:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];return n},identity:function(n){n[0]=1;n[1]=0;n[2]=0;n[3]=1;return n},fromValues:function(n,q,v,z){var C=new ma(4);C[0]=n;C[1]=q;C[2]=v;C[3]=z;return C},set:function(n,q,v,z,C){n[0]=q;
n[1]=v;n[2]=z;n[3]=C;return n},transpose:function(n,q){if(n===q){var v=q[1];n[1]=q[2];n[2]=v}else n[0]=q[0],n[1]=q[2],n[2]=q[1],n[3]=q[3];return n},invert:function(n,q){var v=q[0],z=q[1],C=q[2];q=q[3];var D=v*q-C*z;if(!D)return null;D=1/D;n[0]=q*D;n[1]=-z*D;n[2]=-C*D;n[3]=v*D;return n},adjoint:function(n,q){var v=q[0];n[0]=q[3];n[1]=-q[1];n[2]=-q[2];n[3]=v;return n},determinant:function(n){return n[0]*n[3]-n[2]*n[1]},multiply:d,rotate:function(n,q,v){var z=q[0],C=q[1],D=q[2];q=q[3];var G=Math.sin(v);
v=Math.cos(v);n[0]=z*v+D*G;n[1]=C*v+q*G;n[2]=z*-G+D*v;n[3]=C*-G+q*v;return n},scale:function(n,q,v){var z=q[1],C=q[2],D=q[3],G=v[0];v=v[1];n[0]=q[0]*G;n[1]=z*G;n[2]=C*v;n[3]=D*v;return n},fromRotation:function(n,q){var v=Math.sin(q);q=Math.cos(q);n[0]=q;n[1]=v;n[2]=-v;n[3]=q;return n},fromScaling:function(n,q){n[0]=q[0];n[1]=0;n[2]=0;n[3]=q[1];return n},str:function(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},frob:function(n){return Math.hypot(n[0],n[1],n[2],n[3])},LDU:function(n,q,v,
z){n[2]=z[2]/z[0];v[0]=z[0];v[1]=z[1];v[3]=z[3]-n[2]*v[1];return[n,q,v]},add:function(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+v[1];n[2]=q[2]+v[2];n[3]=q[3]+v[3];return n},subtract:c,exactEquals:function(n,q){return n[0]===q[0]&&n[1]===q[1]&&n[2]===q[2]&&n[3]===q[3]},equals:function(n,q){var v=n[0],z=n[1],C=n[2];n=n[3];var D=q[0],G=q[1],J=q[2];q=q[3];return Math.abs(v-D)<=.000001*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(z-G)<=.000001*Math.max(1,Math.abs(z),Math.abs(G))&&Math.abs(C-J)<=.000001*Math.max(1,
Math.abs(C),Math.abs(J))&&Math.abs(n-q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))},multiplyScalar:function(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;n[3]=q[3]*v;return n},multiplyScalarAndAdd:function(n,q,v,z){n[0]=q[0]+v[0]*z;n[1]=q[1]+v[1]*z;n[2]=q[2]+v[2]*z;n[3]=q[3]+v[3]*z;return n},mul:d,sub:c}),nb=Object.freeze({__proto__:null,create:function(){var n=new ma(6);ma!=Float32Array&&(n[1]=0,n[2]=0,n[4]=0,n[5]=0);n[0]=1;n[3]=1;return n},clone:function(n){var q=new ma(6);q[0]=n[0];q[1]=n[1];q[2]=
n[2];q[3]=n[3];q[4]=n[4];q[5]=n[5];return q},copy:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];n[4]=q[4];n[5]=q[5];return n},identity:function(n){n[0]=1;n[1]=0;n[2]=0;n[3]=1;n[4]=0;n[5]=0;return n},fromValues:function(n,q,v,z,C,D){var G=new ma(6);G[0]=n;G[1]=q;G[2]=v;G[3]=z;G[4]=C;G[5]=D;return G},set:function(n,q,v,z,C,D,G){n[0]=q;n[1]=v;n[2]=z;n[3]=C;n[4]=D;n[5]=G;return n},invert:function(n,q){var v=q[0],z=q[1],C=q[2],D=q[3],G=q[4];q=q[5];var J=v*D-z*C;if(!J)return null;J=1/J;n[0]=D*J;
n[1]=-z*J;n[2]=-C*J;n[3]=v*J;n[4]=(C*q-D*G)*J;n[5]=(z*G-v*q)*J;return n},determinant:function(n){return n[0]*n[3]-n[1]*n[2]},multiply:f,rotate:function(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=q[4];q=q[5];var K=Math.sin(v);v=Math.cos(v);n[0]=z*v+D*K;n[1]=C*v+G*K;n[2]=z*-K+D*v;n[3]=C*-K+G*v;n[4]=J;n[5]=q;return n},scale:function(n,q,v){var z=q[1],C=q[2],D=q[3],G=q[4],J=q[5],K=v[0];v=v[1];n[0]=q[0]*K;n[1]=z*K;n[2]=C*v;n[3]=D*v;n[4]=G;n[5]=J;return n},translate:function(n,q,v){var z=q[0],C=q[1],D=q[2],
G=q[3],J=q[4];q=q[5];var K=v[0];v=v[1];n[0]=z;n[1]=C;n[2]=D;n[3]=G;n[4]=z*K+D*v+J;n[5]=C*K+G*v+q;return n},fromRotation:function(n,q){var v=Math.sin(q);q=Math.cos(q);n[0]=q;n[1]=v;n[2]=-v;n[3]=q;n[4]=0;n[5]=0;return n},fromScaling:function(n,q){n[0]=q[0];n[1]=0;n[2]=0;n[3]=q[1];n[4]=0;n[5]=0;return n},fromTranslation:function(n,q){n[0]=1;n[1]=0;n[2]=0;n[3]=1;n[4]=q[0];n[5]=q[1];return n},str:function(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"},frob:function(n){return Math.hypot(n[0],
n[1],n[2],n[3],n[4],n[5],1)},add:function(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+v[1];n[2]=q[2]+v[2];n[3]=q[3]+v[3];n[4]=q[4]+v[4];n[5]=q[5]+v[5];return n},subtract:g,multiplyScalar:function(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;n[3]=q[3]*v;n[4]=q[4]*v;n[5]=q[5]*v;return n},multiplyScalarAndAdd:function(n,q,v,z){n[0]=q[0]+v[0]*z;n[1]=q[1]+v[1]*z;n[2]=q[2]+v[2]*z;n[3]=q[3]+v[3]*z;n[4]=q[4]+v[4]*z;n[5]=q[5]+v[5]*z;return n},exactEquals:function(n,q){return n[0]===q[0]&&n[1]===q[1]&&n[2]===q[2]&&n[3]===
q[3]&&n[4]===q[4]&&n[5]===q[5]},equals:function(n,q){var v=n[0],z=n[1],C=n[2],D=n[3],G=n[4];n=n[5];var J=q[0],K=q[1],M=q[2],Q=q[3],T=q[4];q=q[5];return Math.abs(v-J)<=.000001*Math.max(1,Math.abs(v),Math.abs(J))&&Math.abs(z-K)<=.000001*Math.max(1,Math.abs(z),Math.abs(K))&&Math.abs(C-M)<=.000001*Math.max(1,Math.abs(C),Math.abs(M))&&Math.abs(D-Q)<=.000001*Math.max(1,Math.abs(D),Math.abs(Q))&&Math.abs(G-T)<=.000001*Math.max(1,Math.abs(G),Math.abs(T))&&Math.abs(n-q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))},
mul:f,sub:g}),ob=Object.freeze({__proto__:null,create:h,fromMat4:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[4];n[4]=q[5];n[5]=q[6];n[6]=q[8];n[7]=q[9];n[8]=q[10];return n},clone:function(n){var q=new ma(9);q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];q[4]=n[4];q[5]=n[5];q[6]=n[6];q[7]=n[7];q[8]=n[8];return q},copy:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];n[4]=q[4];n[5]=q[5];n[6]=q[6];n[7]=q[7];n[8]=q[8];return n},fromValues:function(n,q,v,z,C,D,G,J,K){var M=new ma(9);M[0]=n;M[1]=q;
M[2]=v;M[3]=z;M[4]=C;M[5]=D;M[6]=G;M[7]=J;M[8]=K;return M},set:function(n,q,v,z,C,D,G,J,K,M){n[0]=q;n[1]=v;n[2]=z;n[3]=C;n[4]=D;n[5]=G;n[6]=J;n[7]=K;n[8]=M;return n},identity:function(n){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=1;n[5]=0;n[6]=0;n[7]=0;n[8]=1;return n},transpose:function(n,q){if(n===q){var v=q[1],z=q[2],C=q[5];n[1]=q[3];n[2]=q[6];n[3]=v;n[5]=q[7];n[6]=z;n[7]=C}else n[0]=q[0],n[1]=q[3],n[2]=q[6],n[3]=q[1],n[4]=q[4],n[5]=q[7],n[6]=q[2],n[7]=q[5],n[8]=q[8];return n},invert:function(n,q){var v=
q[0],z=q[1],C=q[2],D=q[3],G=q[4],J=q[5],K=q[6],M=q[7];q=q[8];var Q=q*G-J*M,T=-q*D+J*K,X=M*D-G*K,U=v*Q+z*T+C*X;if(!U)return null;U=1/U;n[0]=Q*U;n[1]=(-q*z+C*M)*U;n[2]=(J*z-C*G)*U;n[3]=T*U;n[4]=(q*v-C*K)*U;n[5]=(-J*v+C*D)*U;n[6]=X*U;n[7]=(-M*v+z*K)*U;n[8]=(G*v-z*D)*U;return n},adjoint:function(n,q){var v=q[0],z=q[1],C=q[2],D=q[3],G=q[4],J=q[5],K=q[6],M=q[7];q=q[8];n[0]=G*q-J*M;n[1]=C*M-z*q;n[2]=z*J-C*G;n[3]=J*K-D*q;n[4]=v*q-C*K;n[5]=C*D-v*J;n[6]=D*M-G*K;n[7]=z*K-v*M;n[8]=v*G-z*D;return n},determinant:function(n){var q=
n[3],v=n[4],z=n[5],C=n[6],D=n[7],G=n[8];return n[0]*(G*v-z*D)+n[1]*(-G*q+z*C)+n[2]*(D*q-v*C)},multiply:m,translate:function(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7];q=q[8];var T=v[0];v=v[1];n[0]=z;n[1]=C;n[2]=D;n[3]=G;n[4]=J;n[5]=K;n[6]=T*z+v*G+M;n[7]=T*C+v*J+Q;n[8]=T*D+v*K+q;return n},rotate:function(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7];q=q[8];var T=Math.sin(v);v=Math.cos(v);n[0]=v*z+T*G;n[1]=v*C+T*J;n[2]=v*D+T*K;n[3]=v*G-T*z;n[4]=v*J-T*C;n[5]=
v*K-T*D;n[6]=M;n[7]=Q;n[8]=q;return n},scale:function(n,q,v){var z=v[0];v=v[1];n[0]=z*q[0];n[1]=z*q[1];n[2]=z*q[2];n[3]=v*q[3];n[4]=v*q[4];n[5]=v*q[5];n[6]=q[6];n[7]=q[7];n[8]=q[8];return n},fromTranslation:function(n,q){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=1;n[5]=0;n[6]=q[0];n[7]=q[1];n[8]=1;return n},fromRotation:function(n,q){var v=Math.sin(q);q=Math.cos(q);n[0]=q;n[1]=v;n[2]=0;n[3]=-v;n[4]=q;n[5]=0;n[6]=0;n[7]=0;n[8]=1;return n},fromScaling:function(n,q){n[0]=q[0];n[1]=0;n[2]=0;n[3]=0;n[4]=q[1];n[5]=
0;n[6]=0;n[7]=0;n[8]=1;return n},fromMat2d:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=0;n[3]=q[2];n[4]=q[3];n[5]=0;n[6]=q[4];n[7]=q[5];n[8]=1;return n},fromQuat:function(n,q){var v=q[0],z=q[1],C=q[2];q=q[3];var D=v+v,G=z+z,J=C+C;v*=D;var K=z*D;z*=G;var M=C*D,Q=C*G;C*=J;D*=q;G*=q;q*=J;n[0]=1-z-C;n[3]=K-q;n[6]=M+G;n[1]=K+q;n[4]=1-v-C;n[7]=Q-D;n[2]=M-G;n[5]=Q+D;n[8]=1-v-z;return n},normalFromMat4:function(n,q){var v=q[0],z=q[1],C=q[2],D=q[3],G=q[4],J=q[5],K=q[6],M=q[7],Q=q[8],T=q[9],X=q[10],U=q[11],ca=q[12],
ba=q[13],Z=q[14];q=q[15];var ra=v*J-z*G,la=v*K-C*G,pa=v*M-D*G,qa=z*K-C*J,oa=z*M-D*J,Ba=C*M-D*K,L=Q*ba-T*ca,O=Q*Z-X*ca;Q=Q*q-U*ca;var V=T*Z-X*ba;T=T*q-U*ba;X=X*q-U*Z;U=ra*X-la*T+pa*V+qa*Q-oa*O+Ba*L;if(!U)return null;U=1/U;n[0]=(J*X-K*T+M*V)*U;n[1]=(K*Q-G*X-M*O)*U;n[2]=(G*T-J*Q+M*L)*U;n[3]=(C*T-z*X-D*V)*U;n[4]=(v*X-C*Q+D*O)*U;n[5]=(z*Q-v*T-D*L)*U;n[6]=(ba*Ba-Z*oa+q*qa)*U;n[7]=(Z*pa-ca*Ba-q*la)*U;n[8]=(ca*oa-ba*pa+q*ra)*U;return n},projection:function(n,q,v){n[0]=2/q;n[1]=0;n[2]=0;n[3]=0;n[4]=-2/v;n[5]=
0;n[6]=-1;n[7]=1;n[8]=1;return n},str:function(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"},frob:function(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},add:function(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+v[1];n[2]=q[2]+v[2];n[3]=q[3]+v[3];n[4]=q[4]+v[4];n[5]=q[5]+v[5];n[6]=q[6]+v[6];n[7]=q[7]+v[7];n[8]=q[8]+v[8];return n},subtract:k,multiplyScalar:function(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;n[3]=q[3]*v;n[4]=q[4]*
v;n[5]=q[5]*v;n[6]=q[6]*v;n[7]=q[7]*v;n[8]=q[8]*v;return n},multiplyScalarAndAdd:function(n,q,v,z){n[0]=q[0]+v[0]*z;n[1]=q[1]+v[1]*z;n[2]=q[2]+v[2]*z;n[3]=q[3]+v[3]*z;n[4]=q[4]+v[4]*z;n[5]=q[5]+v[5]*z;n[6]=q[6]+v[6]*z;n[7]=q[7]+v[7]*z;n[8]=q[8]+v[8]*z;return n},exactEquals:function(n,q){return n[0]===q[0]&&n[1]===q[1]&&n[2]===q[2]&&n[3]===q[3]&&n[4]===q[4]&&n[5]===q[5]&&n[6]===q[6]&&n[7]===q[7]&&n[8]===q[8]},equals:function(n,q){var v=n[0],z=n[1],C=n[2],D=n[3],G=n[4],J=n[5],K=n[6],M=n[7];n=n[8];var Q=
q[0],T=q[1],X=q[2],U=q[3],ca=q[4],ba=q[5],Z=q[6],ra=q[7];q=q[8];return Math.abs(v-Q)<=.000001*Math.max(1,Math.abs(v),Math.abs(Q))&&Math.abs(z-T)<=.000001*Math.max(1,Math.abs(z),Math.abs(T))&&Math.abs(C-X)<=.000001*Math.max(1,Math.abs(C),Math.abs(X))&&Math.abs(D-U)<=.000001*Math.max(1,Math.abs(D),Math.abs(U))&&Math.abs(G-ca)<=.000001*Math.max(1,Math.abs(G),Math.abs(ca))&&Math.abs(J-ba)<=.000001*Math.max(1,Math.abs(J),Math.abs(ba))&&Math.abs(K-Z)<=.000001*Math.max(1,Math.abs(K),Math.abs(Z))&&Math.abs(M-
ra)<=.000001*Math.max(1,Math.abs(M),Math.abs(ra))&&Math.abs(n-q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))},mul:m,sub:k}),pb=Object.freeze({__proto__:null,create:function(){var n=new ma(16);ma!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0);n[0]=1;n[5]=1;n[10]=1;n[15]=1;return n},clone:function(n){var q=new ma(16);q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];q[4]=n[4];q[5]=n[5];q[6]=n[6];q[7]=n[7];q[8]=n[8];q[9]=n[9];q[10]=n[10];q[11]=n[11];q[12]=
n[12];q[13]=n[13];q[14]=n[14];q[15]=n[15];return q},copy:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];n[4]=q[4];n[5]=q[5];n[6]=q[6];n[7]=q[7];n[8]=q[8];n[9]=q[9];n[10]=q[10];n[11]=q[11];n[12]=q[12];n[13]=q[13];n[14]=q[14];n[15]=q[15];return n},fromValues:function(n,q,v,z,C,D,G,J,K,M,Q,T,X,U,ca,ba){var Z=new ma(16);Z[0]=n;Z[1]=q;Z[2]=v;Z[3]=z;Z[4]=C;Z[5]=D;Z[6]=G;Z[7]=J;Z[8]=K;Z[9]=M;Z[10]=Q;Z[11]=T;Z[12]=X;Z[13]=U;Z[14]=ca;Z[15]=ba;return Z},set:function(n,q,v,z,C,D,G,J,K,M,Q,T,X,U,ca,ba,
Z){n[0]=q;n[1]=v;n[2]=z;n[3]=C;n[4]=D;n[5]=G;n[6]=J;n[7]=K;n[8]=M;n[9]=Q;n[10]=T;n[11]=X;n[12]=U;n[13]=ca;n[14]=ba;n[15]=Z;return n},identity:a,transpose:function(n,q){if(n===q){var v=q[1],z=q[2],C=q[3],D=q[6],G=q[7],J=q[11];n[1]=q[4];n[2]=q[8];n[3]=q[12];n[4]=v;n[6]=q[9];n[7]=q[13];n[8]=z;n[9]=D;n[11]=q[14];n[12]=C;n[13]=G;n[14]=J}else n[0]=q[0],n[1]=q[4],n[2]=q[8],n[3]=q[12],n[4]=q[1],n[5]=q[5],n[6]=q[9],n[7]=q[13],n[8]=q[2],n[9]=q[6],n[10]=q[10],n[11]=q[14],n[12]=q[3],n[13]=q[7],n[14]=q[11],n[15]=
q[15];return n},invert:function(n,q){var v=q[0],z=q[1],C=q[2],D=q[3],G=q[4],J=q[5],K=q[6],M=q[7],Q=q[8],T=q[9],X=q[10],U=q[11],ca=q[12],ba=q[13],Z=q[14];q=q[15];var ra=v*J-z*G,la=v*K-C*G,pa=v*M-D*G,qa=z*K-C*J,oa=z*M-D*J,Ba=C*M-D*K,L=Q*ba-T*ca,O=Q*Z-X*ca,V=Q*q-U*ca,aa=T*Z-X*ba,fa=T*q-U*ba,ha=X*q-U*Z,da=ra*ha-la*fa+pa*aa+qa*V-oa*O+Ba*L;if(!da)return null;da=1/da;n[0]=(J*ha-K*fa+M*aa)*da;n[1]=(C*fa-z*ha-D*aa)*da;n[2]=(ba*Ba-Z*oa+q*qa)*da;n[3]=(X*oa-T*Ba-U*qa)*da;n[4]=(K*V-G*ha-M*O)*da;n[5]=(v*ha-C*V+
D*O)*da;n[6]=(Z*pa-ca*Ba-q*la)*da;n[7]=(Q*Ba-X*pa+U*la)*da;n[8]=(G*fa-J*V+M*L)*da;n[9]=(z*V-v*fa-D*L)*da;n[10]=(ca*oa-ba*pa+q*ra)*da;n[11]=(T*pa-Q*oa-U*ra)*da;n[12]=(J*O-G*aa-K*L)*da;n[13]=(v*aa-z*O+C*L)*da;n[14]=(ba*la-ca*qa-Z*ra)*da;n[15]=(Q*qa-T*la+X*ra)*da;return n},adjoint:function(n,q){var v=q[0],z=q[1],C=q[2],D=q[3],G=q[4],J=q[5],K=q[6],M=q[7],Q=q[8],T=q[9],X=q[10],U=q[11],ca=q[12],ba=q[13],Z=q[14];q=q[15];n[0]=J*(X*q-U*Z)-T*(K*q-M*Z)+ba*(K*U-M*X);n[1]=-(z*(X*q-U*Z)-T*(C*q-D*Z)+ba*(C*U-D*X));
n[2]=z*(K*q-M*Z)-J*(C*q-D*Z)+ba*(C*M-D*K);n[3]=-(z*(K*U-M*X)-J*(C*U-D*X)+T*(C*M-D*K));n[4]=-(G*(X*q-U*Z)-Q*(K*q-M*Z)+ca*(K*U-M*X));n[5]=v*(X*q-U*Z)-Q*(C*q-D*Z)+ca*(C*U-D*X);n[6]=-(v*(K*q-M*Z)-G*(C*q-D*Z)+ca*(C*M-D*K));n[7]=v*(K*U-M*X)-G*(C*U-D*X)+Q*(C*M-D*K);n[8]=G*(T*q-U*ba)-Q*(J*q-M*ba)+ca*(J*U-M*T);n[9]=-(v*(T*q-U*ba)-Q*(z*q-D*ba)+ca*(z*U-D*T));n[10]=v*(J*q-M*ba)-G*(z*q-D*ba)+ca*(z*M-D*J);n[11]=-(v*(J*U-M*T)-G*(z*U-D*T)+Q*(z*M-D*J));n[12]=-(G*(T*Z-X*ba)-Q*(J*Z-K*ba)+ca*(J*X-K*T));n[13]=v*(T*Z-
X*ba)-Q*(z*Z-C*ba)+ca*(z*X-C*T);n[14]=-(v*(J*Z-K*ba)-G*(z*Z-C*ba)+ca*(z*K-C*J));n[15]=v*(J*X-K*T)-G*(z*X-C*T)+Q*(z*K-C*J);return n},determinant:function(n){var q=n[0],v=n[1],z=n[2],C=n[3],D=n[4],G=n[5],J=n[6],K=n[7],M=n[8],Q=n[9],T=n[10],X=n[11],U=n[12],ca=n[13],ba=n[14];n=n[15];return(q*G-v*D)*(T*n-X*ba)-(q*J-z*D)*(Q*n-X*ca)+(q*K-C*D)*(Q*ba-T*ca)+(v*J-z*G)*(M*n-X*U)-(v*K-C*G)*(M*ba-T*U)+(z*K-C*J)*(M*ca-Q*U)},multiply:b,translate:function(n,q,v){var z=v[0],C=v[1];v=v[2];if(q===n)n[12]=q[0]*z+q[4]*
C+q[8]*v+q[12],n[13]=q[1]*z+q[5]*C+q[9]*v+q[13],n[14]=q[2]*z+q[6]*C+q[10]*v+q[14],n[15]=q[3]*z+q[7]*C+q[11]*v+q[15];else{var D=q[0];var G=q[1];var J=q[2];var K=q[3];var M=q[4];var Q=q[5];var T=q[6];var X=q[7];var U=q[8];var ca=q[9];var ba=q[10];var Z=q[11];n[0]=D;n[1]=G;n[2]=J;n[3]=K;n[4]=M;n[5]=Q;n[6]=T;n[7]=X;n[8]=U;n[9]=ca;n[10]=ba;n[11]=Z;n[12]=D*z+M*C+U*v+q[12];n[13]=G*z+Q*C+ca*v+q[13];n[14]=J*z+T*C+ba*v+q[14];n[15]=K*z+X*C+Z*v+q[15]}return n},scale:function(n,q,v){var z=v[0],C=v[1];v=v[2];n[0]=
q[0]*z;n[1]=q[1]*z;n[2]=q[2]*z;n[3]=q[3]*z;n[4]=q[4]*C;n[5]=q[5]*C;n[6]=q[6]*C;n[7]=q[7]*C;n[8]=q[8]*v;n[9]=q[9]*v;n[10]=q[10]*v;n[11]=q[11]*v;n[12]=q[12];n[13]=q[13];n[14]=q[14];n[15]=q[15];return n},rotate:function(n,q,v,z){var C=z[0],D=z[1];z=z[2];var G=Math.hypot(C,D,z);if(.000001>G)return null;G=1/G;C*=G;D*=G;z*=G;var J=Math.sin(v);var K=Math.cos(v);var M=1-K;v=q[0];G=q[1];var Q=q[2];var T=q[3];var X=q[4];var U=q[5];var ca=q[6];var ba=q[7];var Z=q[8];var ra=q[9];var la=q[10];var pa=q[11];var qa=
C*C*M+K;var oa=D*C*M+z*J;var Ba=z*C*M-D*J;var L=C*D*M-z*J;var O=D*D*M+K;var V=z*D*M+C*J;var aa=C*z*M+D*J;C=D*z*M-C*J;D=z*z*M+K;n[0]=v*qa+X*oa+Z*Ba;n[1]=G*qa+U*oa+ra*Ba;n[2]=Q*qa+ca*oa+la*Ba;n[3]=T*qa+ba*oa+pa*Ba;n[4]=v*L+X*O+Z*V;n[5]=G*L+U*O+ra*V;n[6]=Q*L+ca*O+la*V;n[7]=T*L+ba*O+pa*V;n[8]=v*aa+X*C+Z*D;n[9]=G*aa+U*C+ra*D;n[10]=Q*aa+ca*C+la*D;n[11]=T*aa+ba*C+pa*D;q!==n&&(n[12]=q[12],n[13]=q[13],n[14]=q[14],n[15]=q[15]);return n},rotateX:function(n,q,v){var z=Math.sin(v);v=Math.cos(v);var C=q[4],D=q[5],
G=q[6],J=q[7],K=q[8],M=q[9],Q=q[10],T=q[11];q!==n&&(n[0]=q[0],n[1]=q[1],n[2]=q[2],n[3]=q[3],n[12]=q[12],n[13]=q[13],n[14]=q[14],n[15]=q[15]);n[4]=C*v+K*z;n[5]=D*v+M*z;n[6]=G*v+Q*z;n[7]=J*v+T*z;n[8]=K*v-C*z;n[9]=M*v-D*z;n[10]=Q*v-G*z;n[11]=T*v-J*z;return n},rotateY:function(n,q,v){var z=Math.sin(v);v=Math.cos(v);var C=q[0],D=q[1],G=q[2],J=q[3],K=q[8],M=q[9],Q=q[10],T=q[11];q!==n&&(n[4]=q[4],n[5]=q[5],n[6]=q[6],n[7]=q[7],n[12]=q[12],n[13]=q[13],n[14]=q[14],n[15]=q[15]);n[0]=C*v-K*z;n[1]=D*v-M*z;n[2]=
G*v-Q*z;n[3]=J*v-T*z;n[8]=C*z+K*v;n[9]=D*z+M*v;n[10]=G*z+Q*v;n[11]=J*z+T*v;return n},rotateZ:function(n,q,v){var z=Math.sin(v);v=Math.cos(v);var C=q[0],D=q[1],G=q[2],J=q[3],K=q[4],M=q[5],Q=q[6],T=q[7];q!==n&&(n[8]=q[8],n[9]=q[9],n[10]=q[10],n[11]=q[11],n[12]=q[12],n[13]=q[13],n[14]=q[14],n[15]=q[15]);n[0]=C*v+K*z;n[1]=D*v+M*z;n[2]=G*v+Q*z;n[3]=J*v+T*z;n[4]=K*v-C*z;n[5]=M*v-D*z;n[6]=Q*v-G*z;n[7]=T*v-J*z;return n},fromTranslation:function(n,q){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;
n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=q[0];n[13]=q[1];n[14]=q[2];n[15]=1;return n},fromScaling:function(n,q){n[0]=q[0];n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=q[1];n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=q[2];n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n},fromRotation:function(n,q,v){var z=v[0],C=v[1];v=v[2];var D=Math.hypot(z,C,v);if(.000001>D)return null;D=1/D;z*=D;C*=D;v*=D;D=Math.sin(q);q=Math.cos(q);var G=1-q;n[0]=z*z*G+q;n[1]=C*z*G+v*D;n[2]=v*z*G-C*D;n[3]=0;n[4]=z*C*G-v*D;n[5]=C*C*G+q;n[6]=v*C*G+z*D;n[7]=
0;n[8]=z*v*G+C*D;n[9]=C*v*G-z*D;n[10]=v*v*G+q;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n},fromXRotation:function(n,q){var v=Math.sin(q);q=Math.cos(q);n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=q;n[6]=v;n[7]=0;n[8]=0;n[9]=-v;n[10]=q;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n},fromYRotation:function(n,q){var v=Math.sin(q);q=Math.cos(q);n[0]=q;n[1]=0;n[2]=-v;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=v;n[9]=0;n[10]=q;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n},fromZRotation:function(n,q){var v=
Math.sin(q);q=Math.cos(q);n[0]=q;n[1]=v;n[2]=0;n[3]=0;n[4]=-v;n[5]=q;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n},fromRotationTranslation:l,fromQuat2:function(n,q){var v=new ma(3),z=-q[0],C=-q[1],D=-q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7],T=z*z+C*C+D*D+G*G;0<T?(v[0]=2*(J*G+Q*z+K*D-M*C)/T,v[1]=2*(K*G+Q*C+M*z-J*D)/T,v[2]=2*(M*G+Q*D+J*C-K*z)/T):(v[0]=2*(J*G+Q*z+K*D-M*C),v[1]=2*(K*G+Q*C+M*z-J*D),v[2]=2*(M*G+Q*D+J*C-K*z));l(n,q,v);return n},getTranslation:p,getScaling:r,
getRotation:t,fromRotationTranslationScale:function(n,q,v,z){var C=q[0],D=q[1],G=q[2],J=q[3],K=C+C,M=D+D,Q=G+G;q=C*K;var T=C*M;C*=Q;var X=D*M;D*=Q;G*=Q;K*=J;M*=J;J*=Q;Q=z[0];var U=z[1];z=z[2];n[0]=(1-(X+G))*Q;n[1]=(T+J)*Q;n[2]=(C-M)*Q;n[3]=0;n[4]=(T-J)*U;n[5]=(1-(q+G))*U;n[6]=(D+K)*U;n[7]=0;n[8]=(C+M)*z;n[9]=(D-K)*z;n[10]=(1-(q+X))*z;n[11]=0;n[12]=v[0];n[13]=v[1];n[14]=v[2];n[15]=1;return n},fromRotationTranslationScaleOrigin:function(n,q,v,z,C){var D=q[0],G=q[1],J=q[2],K=q[3],M=D+D,Q=G+G,T=J+J;q=
D*M;var X=D*Q,U=D*T;D=G*Q;G*=T;var ca=J*T;J=K*M;Q*=K;var ba=K*T,Z=z[0],ra=z[1];T=z[2];z=C[0];K=C[1];C=C[2];M=(1-(D+ca))*Z;var la=(X+ba)*Z;Z*=U-Q;X=(X-ba)*ra;ca=(1-(q+ca))*ra;ra*=G+J;U=(U+Q)*T;G=(G-J)*T;q=(1-(q+D))*T;n[0]=M;n[1]=la;n[2]=Z;n[3]=0;n[4]=X;n[5]=ca;n[6]=ra;n[7]=0;n[8]=U;n[9]=G;n[10]=q;n[11]=0;n[12]=v[0]+z-(M*z+X*K+U*C);n[13]=v[1]+K-(la*z+ca*K+G*C);n[14]=v[2]+C-(Z*z+ra*K+q*C);n[15]=1;return n},fromQuat:function(n,q){var v=q[0],z=q[1],C=q[2];q=q[3];var D=v+v,G=z+z,J=C+C;v*=D;var K=z*D;z*=
G;var M=C*D,Q=C*G;C*=J;D*=q;G*=q;q*=J;n[0]=1-z-C;n[1]=K+q;n[2]=M-G;n[3]=0;n[4]=K-q;n[5]=1-v-C;n[6]=Q+D;n[7]=0;n[8]=M+G;n[9]=Q-D;n[10]=1-v-z;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n},frustum:function(n,q,v,z,C,D,G){var J=1/(v-q),K=1/(C-z),M=1/(D-G);n[0]=2*D*J;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=2*D*K;n[6]=0;n[7]=0;n[8]=(v+q)*J;n[9]=(C+z)*K;n[10]=(G+D)*M;n[11]=-1;n[12]=0;n[13]=0;n[14]=G*D*2*M;n[15]=0;return n},perspective:function(n,q,v,z,C){q=1/Math.tan(q/2);n[0]=q/v;n[1]=0;n[2]=0;n[3]=0;n[4]=
0;n[5]=q;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[11]=-1;n[12]=0;n[13]=0;n[15]=0;null!=C&&Infinity!==C?(v=1/(z-C),n[10]=(C+z)*v,n[14]=2*C*z*v):(n[10]=-1,n[14]=-2*z);return n},perspectiveFromFieldOfView:function(n,q,v,z){var C=Math.tan(q.upDegrees*Math.PI/180),D=Math.tan(q.downDegrees*Math.PI/180),G=Math.tan(q.leftDegrees*Math.PI/180);q=Math.tan(q.rightDegrees*Math.PI/180);var J=2/(G+q),K=2/(C+D);n[0]=J;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=K;n[6]=0;n[7]=0;n[8]=-((G-q)*J*.5);n[9]=(C-D)*K*.5;n[10]=z/(v-z);n[11]=-1;
n[12]=0;n[13]=0;n[14]=z*v/(v-z);n[15]=0;return n},ortho:function(n,q,v,z,C,D,G){var J=1/(q-v),K=1/(z-C),M=1/(D-G);n[0]=-2*J;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=-2*K;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=2*M;n[11]=0;n[12]=(q+v)*J;n[13]=(C+z)*K;n[14]=(G+D)*M;n[15]=1;return n},lookAt:function(n,q,v,z){var C=q[0],D=q[1];q=q[2];var G=z[0];var J=z[1];var K=z[2];var M=v[0];z=v[1];var Q=v[2];if(.000001>Math.abs(C-M)&&.000001>Math.abs(D-z)&&.000001>Math.abs(q-Q))return a(n);v=C-M;z=D-z;M=q-Q;var T=1/Math.hypot(v,
z,M);v*=T;z*=T;M*=T;Q=J*M-K*z;K=K*v-G*M;G=G*z-J*v;(T=Math.hypot(Q,K,G))?(T=1/T,Q*=T,K*=T,G*=T):G=K=Q=0;J=z*G-M*K;var X=M*Q-v*G;var U=v*K-z*Q;(T=Math.hypot(J,X,U))?(T=1/T,J*=T,X*=T,U*=T):U=X=J=0;n[0]=Q;n[1]=J;n[2]=v;n[3]=0;n[4]=K;n[5]=X;n[6]=z;n[7]=0;n[8]=G;n[9]=U;n[10]=M;n[11]=0;n[12]=-(Q*C+K*D+G*q);n[13]=-(J*C+X*D+U*q);n[14]=-(v*C+z*D+M*q);n[15]=1;return n},targetTo:function(n,q,v,z){var C=q[0],D=q[1];q=q[2];var G=z[0],J=z[1],K=z[2];z=C-v[0];var M=D-v[1];v=q-v[2];var Q=z*z+M*M+v*v;0<Q&&(Q=1/Math.sqrt(Q),
z*=Q,M*=Q,v*=Q);var T=J*v-K*M;K=K*z-G*v;G=G*M-J*z;Q=T*T+K*K+G*G;0<Q&&(Q=1/Math.sqrt(Q),T*=Q,K*=Q,G*=Q);n[0]=T;n[1]=K;n[2]=G;n[3]=0;n[4]=M*G-v*K;n[5]=v*T-z*G;n[6]=z*K-M*T;n[7]=0;n[8]=z;n[9]=M;n[10]=v;n[11]=0;n[12]=C;n[13]=D;n[14]=q;n[15]=1;return n},str:function(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"},frob:function(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],
n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])},add:function(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+v[1];n[2]=q[2]+v[2];n[3]=q[3]+v[3];n[4]=q[4]+v[4];n[5]=q[5]+v[5];n[6]=q[6]+v[6];n[7]=q[7]+v[7];n[8]=q[8]+v[8];n[9]=q[9]+v[9];n[10]=q[10]+v[10];n[11]=q[11]+v[11];n[12]=q[12]+v[12];n[13]=q[13]+v[13];n[14]=q[14]+v[14];n[15]=q[15]+v[15];return n},subtract:u,multiplyScalar:function(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;n[3]=q[3]*v;n[4]=q[4]*v;n[5]=q[5]*v;n[6]=q[6]*v;n[7]=q[7]*v;n[8]=q[8]*v;
n[9]=q[9]*v;n[10]=q[10]*v;n[11]=q[11]*v;n[12]=q[12]*v;n[13]=q[13]*v;n[14]=q[14]*v;n[15]=q[15]*v;return n},multiplyScalarAndAdd:function(n,q,v,z){n[0]=q[0]+v[0]*z;n[1]=q[1]+v[1]*z;n[2]=q[2]+v[2]*z;n[3]=q[3]+v[3]*z;n[4]=q[4]+v[4]*z;n[5]=q[5]+v[5]*z;n[6]=q[6]+v[6]*z;n[7]=q[7]+v[7]*z;n[8]=q[8]+v[8]*z;n[9]=q[9]+v[9]*z;n[10]=q[10]+v[10]*z;n[11]=q[11]+v[11]*z;n[12]=q[12]+v[12]*z;n[13]=q[13]+v[13]*z;n[14]=q[14]+v[14]*z;n[15]=q[15]+v[15]*z;return n},exactEquals:function(n,q){return n[0]===q[0]&&n[1]===q[1]&&
n[2]===q[2]&&n[3]===q[3]&&n[4]===q[4]&&n[5]===q[5]&&n[6]===q[6]&&n[7]===q[7]&&n[8]===q[8]&&n[9]===q[9]&&n[10]===q[10]&&n[11]===q[11]&&n[12]===q[12]&&n[13]===q[13]&&n[14]===q[14]&&n[15]===q[15]},equals:function(n,q){var v=n[0],z=n[1],C=n[2],D=n[3],G=n[4],J=n[5],K=n[6],M=n[7],Q=n[8],T=n[9],X=n[10],U=n[11],ca=n[12],ba=n[13],Z=n[14];n=n[15];var ra=q[0],la=q[1],pa=q[2],qa=q[3],oa=q[4],Ba=q[5],L=q[6],O=q[7],V=q[8],aa=q[9],fa=q[10],ha=q[11],da=q[12],ta=q[13],ua=q[14];q=q[15];return Math.abs(v-ra)<=.000001*
Math.max(1,Math.abs(v),Math.abs(ra))&&Math.abs(z-la)<=.000001*Math.max(1,Math.abs(z),Math.abs(la))&&Math.abs(C-pa)<=.000001*Math.max(1,Math.abs(C),Math.abs(pa))&&Math.abs(D-qa)<=.000001*Math.max(1,Math.abs(D),Math.abs(qa))&&Math.abs(G-oa)<=.000001*Math.max(1,Math.abs(G),Math.abs(oa))&&Math.abs(J-Ba)<=.000001*Math.max(1,Math.abs(J),Math.abs(Ba))&&Math.abs(K-L)<=.000001*Math.max(1,Math.abs(K),Math.abs(L))&&Math.abs(M-O)<=.000001*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(Q-V)<=.000001*Math.max(1,
Math.abs(Q),Math.abs(V))&&Math.abs(T-aa)<=.000001*Math.max(1,Math.abs(T),Math.abs(aa))&&Math.abs(X-fa)<=.000001*Math.max(1,Math.abs(X),Math.abs(fa))&&Math.abs(U-ha)<=.000001*Math.max(1,Math.abs(U),Math.abs(ha))&&Math.abs(ca-da)<=.000001*Math.max(1,Math.abs(ca),Math.abs(da))&&Math.abs(ba-ta)<=.000001*Math.max(1,Math.abs(ba),Math.abs(ta))&&Math.abs(Z-ua)<=.000001*Math.max(1,Math.abs(Z),Math.abs(ua))&&Math.abs(n-q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))},mul:b,sub:u}),La=function(){var n=w();return function(q,
v,z,C,D,G){v||(v=3);z||(z=0);for(C=C?Math.min(C*v+z,q.length):q.length;z<C;z+=v)n[0]=q[z],n[1]=q[z+1],n[2]=q[z+2],D(n,n,G),q[z]=n[0],q[z+1]=n[1],q[z+2]=n[2];return q}}();La=Object.freeze({__proto__:null,create:w,clone:function(n){var q=new ma(3);q[0]=n[0];q[1]=n[1];q[2]=n[2];return q},length:x,fromValues:A,copy:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];return n},set:function(n,q,v,z){n[0]=q;n[1]=v;n[2]=z;return n},add:function(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+v[1];n[2]=q[2]+v[2];return n},subtract:E,
multiply:y,divide:B,ceil:function(n,q){n[0]=Math.ceil(q[0]);n[1]=Math.ceil(q[1]);n[2]=Math.ceil(q[2]);return n},floor:function(n,q){n[0]=Math.floor(q[0]);n[1]=Math.floor(q[1]);n[2]=Math.floor(q[2]);return n},min:function(n,q,v){n[0]=Math.min(q[0],v[0]);n[1]=Math.min(q[1],v[1]);n[2]=Math.min(q[2],v[2]);return n},max:function(n,q,v){n[0]=Math.max(q[0],v[0]);n[1]=Math.max(q[1],v[1]);n[2]=Math.max(q[2],v[2]);return n},round:function(n,q){n[0]=Math.round(q[0]);n[1]=Math.round(q[1]);n[2]=Math.round(q[2]);
return n},scale:function(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;return n},scaleAndAdd:function(n,q,v,z){n[0]=q[0]+v[0]*z;n[1]=q[1]+v[1]*z;n[2]=q[2]+v[2]*z;return n},distance:H,squaredDistance:P,squaredLength:F,negate:function(n,q){n[0]=-q[0];n[1]=-q[1];n[2]=-q[2];return n},inverse:function(n,q){n[0]=1/q[0];n[1]=1/q[1];n[2]=1/q[2];return n},normalize:I,dot:N,cross:R,lerp:function(n,q,v,z){var C=q[0],D=q[1];q=q[2];n[0]=C+z*(v[0]-C);n[1]=D+z*(v[1]-D);n[2]=q+z*(v[2]-q);return n},hermite:function(n,
q,v,z,C,D){var G=D*D,J=G*(2*D-3)+1,K=G*(D-2)+D,M=G*(D-1);D=G*(3-2*D);n[0]=q[0]*J+v[0]*K+z[0]*M+C[0]*D;n[1]=q[1]*J+v[1]*K+z[1]*M+C[1]*D;n[2]=q[2]*J+v[2]*K+z[2]*M+C[2]*D;return n},bezier:function(n,q,v,z,C,D){var G=1-D,J=G*G,K=D*D,M=J*G;J*=3*D;G*=3*K;D*=K;n[0]=q[0]*M+v[0]*J+z[0]*G+C[0]*D;n[1]=q[1]*M+v[1]*J+z[1]*G+C[1]*D;n[2]=q[2]*M+v[2]*J+z[2]*G+C[2]*D;return n},random:function(n,q){q=q||1;var v=2*Ga()*Math.PI,z=2*Ga()-1,C=Math.sqrt(1-z*z)*q;n[0]=Math.cos(v)*C;n[1]=Math.sin(v)*C;n[2]=z*q;return n},
transformMat4:function(n,q,v){var z=q[0],C=q[1];q=q[2];var D=v[3]*z+v[7]*C+v[11]*q+v[15];D=D||1;n[0]=(v[0]*z+v[4]*C+v[8]*q+v[12])/D;n[1]=(v[1]*z+v[5]*C+v[9]*q+v[13])/D;n[2]=(v[2]*z+v[6]*C+v[10]*q+v[14])/D;return n},transformMat3:function(n,q,v){var z=q[0],C=q[1];q=q[2];n[0]=z*v[0]+C*v[3]+q*v[6];n[1]=z*v[1]+C*v[4]+q*v[7];n[2]=z*v[2]+C*v[5]+q*v[8];return n},transformQuat:function(n,q,v){var z=v[0],C=v[1],D=v[2],G=q[0],J=q[1];q=q[2];var K=C*q-D*J,M=D*G-z*q,Q=z*J-C*G;v=2*v[3];n[0]=G+K*v+2*(C*Q-D*M);n[1]=
J+M*v+2*(D*K-z*Q);n[2]=q+Q*v+2*(z*M-C*K);return n},rotateX:function(n,q,v,z){var C=[],D=[];C[0]=q[0]-v[0];C[1]=q[1]-v[1];C[2]=q[2]-v[2];D[0]=C[0];D[1]=C[1]*Math.cos(z)-C[2]*Math.sin(z);D[2]=C[1]*Math.sin(z)+C[2]*Math.cos(z);n[0]=D[0]+v[0];n[1]=D[1]+v[1];n[2]=D[2]+v[2];return n},rotateY:function(n,q,v,z){var C=[],D=[];C[0]=q[0]-v[0];C[1]=q[1]-v[1];C[2]=q[2]-v[2];D[0]=C[2]*Math.sin(z)+C[0]*Math.cos(z);D[1]=C[1];D[2]=C[2]*Math.cos(z)-C[0]*Math.sin(z);n[0]=D[0]+v[0];n[1]=D[1]+v[1];n[2]=D[2]+v[2];return n},
rotateZ:function(n,q,v,z){var C=[],D=[];C[0]=q[0]-v[0];C[1]=q[1]-v[1];C[2]=q[2]-v[2];D[0]=C[0]*Math.cos(z)-C[1]*Math.sin(z);D[1]=C[0]*Math.sin(z)+C[1]*Math.cos(z);D[2]=C[2];n[0]=D[0]+v[0];n[1]=D[1]+v[1];n[2]=D[2]+v[2];return n},angle:function(n,q){var v=n[0],z=n[1],C=n[2],D=q[0],G=q[1],J=q[2];n=(v=Math.sqrt(v*v+z*z+C*C)*Math.sqrt(D*D+G*G+J*J))&&N(n,q)/v;return Math.acos(Math.min(Math.max(n,-1),1))},zero:function(n){n[0]=0;n[1]=0;n[2]=0;return n},str:function(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+
")"},exactEquals:function(n,q){return n[0]===q[0]&&n[1]===q[1]&&n[2]===q[2]},equals:function(n,q){var v=n[0],z=n[1];n=n[2];var C=q[0],D=q[1];q=q[2];return Math.abs(v-C)<=.000001*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(z-D)<=.000001*Math.max(1,Math.abs(z),Math.abs(D))&&Math.abs(n-q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))},sub:E,mul:y,div:B,dist:H,sqrDist:P,len:x,sqrLen:F,forEach:La});var Ma=function(){var n=S();return function(q,v,z,C,D,G){v||(v=4);z||(z=0);for(C=C?Math.min(C*v+z,q.length):
q.length;z<C;z+=v)n[0]=q[z],n[1]=q[z+1],n[2]=q[z+2],n[3]=q[z+3],D(n,n,G),q[z]=n[0],q[z+1]=n[1],q[z+2]=n[2],q[z+3]=n[3];return q}}();Ma=Object.freeze({__proto__:null,create:S,clone:Y,fromValues:W,copy:ea,set:na,add:ja,subtract:wa,multiply:sa,divide:Da,ceil:function(n,q){n[0]=Math.ceil(q[0]);n[1]=Math.ceil(q[1]);n[2]=Math.ceil(q[2]);n[3]=Math.ceil(q[3]);return n},floor:function(n,q){n[0]=Math.floor(q[0]);n[1]=Math.floor(q[1]);n[2]=Math.floor(q[2]);n[3]=Math.floor(q[3]);return n},min:function(n,q,v){n[0]=
Math.min(q[0],v[0]);n[1]=Math.min(q[1],v[1]);n[2]=Math.min(q[2],v[2]);n[3]=Math.min(q[3],v[3]);return n},max:function(n,q,v){n[0]=Math.max(q[0],v[0]);n[1]=Math.max(q[1],v[1]);n[2]=Math.max(q[2],v[2]);n[3]=Math.max(q[3],v[3]);return n},round:function(n,q){n[0]=Math.round(q[0]);n[1]=Math.round(q[1]);n[2]=Math.round(q[2]);n[3]=Math.round(q[3]);return n},scale:Ea,scaleAndAdd:function(n,q,v,z){n[0]=q[0]+v[0]*z;n[1]=q[1]+v[1]*z;n[2]=q[2]+v[2]*z;n[3]=q[3]+v[3]*z;return n},distance:Aa,squaredDistance:za,
length:ia,squaredLength:Fa,negate:function(n,q){n[0]=-q[0];n[1]=-q[1];n[2]=-q[2];n[3]=-q[3];return n},inverse:function(n,q){n[0]=1/q[0];n[1]=1/q[1];n[2]=1/q[2];n[3]=1/q[3];return n},normalize:xa,dot:Ca,cross:function(n,q,v,z){var C=v[0]*z[1]-v[1]*z[0],D=v[0]*z[2]-v[2]*z[0],G=v[0]*z[3]-v[3]*z[0],J=v[1]*z[2]-v[2]*z[1],K=v[1]*z[3]-v[3]*z[1];v=v[2]*z[3]-v[3]*z[2];z=q[0];var M=q[1],Q=q[2];q=q[3];n[0]=M*v-Q*K+q*J;n[1]=-(z*v)+Q*G-q*D;n[2]=z*K-M*G+q*C;n[3]=-(z*J)+M*D-Q*C;return n},lerp:Pa,random:function(n,
q){q=q||1;do{var v=2*Ga()-1;var z=2*Ga()-1;var C=v*v+z*z}while(1<=C);do{var D=2*Ga()-1;var G=2*Ga()-1;var J=D*D+G*G}while(1<=J);C=Math.sqrt((1-C)/J);n[0]=q*v;n[1]=q*z;n[2]=q*D*C;n[3]=q*G*C;return n},transformMat4:function(n,q,v){var z=q[0],C=q[1],D=q[2];q=q[3];n[0]=v[0]*z+v[4]*C+v[8]*D+v[12]*q;n[1]=v[1]*z+v[5]*C+v[9]*D+v[13]*q;n[2]=v[2]*z+v[6]*C+v[10]*D+v[14]*q;n[3]=v[3]*z+v[7]*C+v[11]*D+v[15]*q;return n},transformQuat:function(n,q,v){var z=q[0],C=q[1],D=q[2],G=v[0],J=v[1],K=v[2];v=v[3];var M=v*z+
J*D-K*C,Q=v*C+K*z-G*D,T=v*D+G*C-J*z;z=-G*z-J*C-K*D;n[0]=M*v+z*-G+Q*-K-T*-J;n[1]=Q*v+z*-J+T*-G-M*-K;n[2]=T*v+z*-K+M*-J-Q*-G;n[3]=q[3];return n},zero:function(n){n[0]=0;n[1]=0;n[2]=0;n[3]=0;return n},str:function(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},exactEquals:Qa,equals:Ra,sub:wa,mul:sa,div:Da,dist:Aa,sqrDist:za,len:ia,sqrLen:Fa,forEach:Ma});var Na=function(){var n=w(),q=A(1,0,0),v=A(0,1,0);return function(z,C,D){var G=N(C,D);if(-.999999>G)return R(n,q,C),.000001>x(n)&&R(n,v,C),
I(n,n),Sa(z,n,Math.PI),z;if(.999999<G)return z[0]=0,z[1]=0,z[2]=0,z[3]=1,z;R(n,C,D);z[0]=n[0];z[1]=n[1];z[2]=n[2];z[3]=1+G;return xa(z,z)}}(),Oa=function(){var n=Ja(),q=Ja();return function(v,z,C,D,G,J){Ka(n,z,G,J);Ka(q,C,D,J);Ka(v,n,q,2*J*(1-J));return v}}(),Ia=function(){var n=h();return function(q,v,z,C){n[0]=z[0];n[3]=z[1];n[6]=z[2];n[1]=C[0];n[4]=C[1];n[7]=C[2];n[2]=-v[0];n[5]=-v[1];n[8]=-v[2];return xa(q,Za(q,n))}}();Na=Object.freeze({__proto__:null,create:Ja,identity:function(n){n[0]=0;n[1]=
0;n[2]=0;n[3]=1;return n},setAxisAngle:Sa,getAxisAngle:function(n,q){var v=2*Math.acos(q[3]),z=Math.sin(v/2);.000001<z?(n[0]=q[0]/z,n[1]=q[1]/z,n[2]=q[2]/z):(n[0]=1,n[1]=0,n[2]=0);return v},getAngle:function(n,q){n=Ca(n,q);return Math.acos(2*n*n-1)},multiply:Ta,rotateX:Ua,rotateY:Va,rotateZ:Wa,calculateW:function(n,q){var v=q[0],z=q[1];q=q[2];n[0]=v;n[1]=z;n[2]=q;n[3]=Math.sqrt(Math.abs(1-v*v-z*z-q*q));return n},exp:Xa,ln:Ya,pow:function(n,q,v){Ya(n,q);Ea(n,n,v);Xa(n,n);return n},slerp:Ka,random:function(n){var q=
Ga(),v=Ga(),z=Ga(),C=Math.sqrt(1-q);q=Math.sqrt(q);n[0]=C*Math.sin(2*Math.PI*v);n[1]=C*Math.cos(2*Math.PI*v);n[2]=q*Math.sin(2*Math.PI*z);n[3]=q*Math.cos(2*Math.PI*z);return n},invert:function(n,q){var v=q[0],z=q[1],C=q[2];q=q[3];var D=v*v+z*z+C*C+q*q;D=D?1/D:0;n[0]=-v*D;n[1]=-z*D;n[2]=-C*D;n[3]=q*D;return n},conjugate:function(n,q){n[0]=-q[0];n[1]=-q[1];n[2]=-q[2];n[3]=q[3];return n},fromMat3:Za,fromEuler:function(n,q,v,z){var C=.5*Math.PI/180;q*=C;v*=C;z*=C;C=Math.sin(q);q=Math.cos(q);var D=Math.sin(v);
v=Math.cos(v);var G=Math.sin(z);z=Math.cos(z);n[0]=C*v*z-q*D*G;n[1]=q*D*z+C*v*G;n[2]=q*v*G-C*D*z;n[3]=q*v*z+C*D*G;return n},str:function(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},clone:Y,fromValues:W,copy:ea,set:na,add:ja,mul:Ta,scale:Ea,dot:Ca,lerp:Pa,length:ia,len:ia,squaredLength:Fa,sqrLen:Fa,normalize:xa,exactEquals:Qa,equals:Ra,rotationTo:Na,sqlerp:Oa,setAxes:Ia});Oa=Object.freeze({__proto__:null,create:function(){var n=new ma(8);ma!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[4]=0,
n[5]=0,n[6]=0,n[7]=0);n[3]=1;return n},clone:function(n){var q=new ma(8);q[0]=n[0];q[1]=n[1];q[2]=n[2];q[3]=n[3];q[4]=n[4];q[5]=n[5];q[6]=n[6];q[7]=n[7];return q},fromValues:function(n,q,v,z,C,D,G,J){var K=new ma(8);K[0]=n;K[1]=q;K[2]=v;K[3]=z;K[4]=C;K[5]=D;K[6]=G;K[7]=J;return K},fromRotationTranslationValues:function(n,q,v,z,C,D,G){var J=new ma(8);J[0]=n;J[1]=q;J[2]=v;J[3]=z;C*=.5;D*=.5;G*=.5;J[4]=C*z+D*v-G*q;J[5]=D*z+G*n-C*v;J[6]=G*z+C*q-D*n;J[7]=-C*n-D*q-G*v;return J},fromRotationTranslation:$a,
fromTranslation:function(n,q){n[0]=0;n[1]=0;n[2]=0;n[3]=1;n[4]=.5*q[0];n[5]=.5*q[1];n[6]=.5*q[2];n[7]=0;return n},fromRotation:function(n,q){n[0]=q[0];n[1]=q[1];n[2]=q[2];n[3]=q[3];n[4]=0;n[5]=0;n[6]=0;n[7]=0;return n},fromMat4:function(n,q){var v=Ja();t(v,q);var z=new ma(3);p(z,q);$a(n,v,z);return n},copy:ab,identity:function(n){n[0]=0;n[1]=0;n[2]=0;n[3]=1;n[4]=0;n[5]=0;n[6]=0;n[7]=0;return n},set:function(n,q,v,z,C,D,G,J,K){n[0]=q;n[1]=v;n[2]=z;n[3]=C;n[4]=D;n[5]=G;n[6]=J;n[7]=K;return n},getReal:ea,
getDual:function(n,q){n[0]=q[4];n[1]=q[5];n[2]=q[6];n[3]=q[7];return n},setReal:ea,setDual:function(n,q){n[4]=q[0];n[5]=q[1];n[6]=q[2];n[7]=q[3];return n},getTranslation:function(n,q){var v=q[4],z=q[5],C=q[6],D=q[7],G=-q[0],J=-q[1],K=-q[2];q=q[3];n[0]=2*(v*q+D*G+z*K-C*J);n[1]=2*(z*q+D*J+C*G-v*K);n[2]=2*(C*q+D*K+v*J-z*G);return n},translate:function(n,q,v){var z=q[0],C=q[1],D=q[2],G=q[3],J=.5*v[0],K=.5*v[1];v=.5*v[2];var M=q[4],Q=q[5],T=q[6];q=q[7];n[0]=z;n[1]=C;n[2]=D;n[3]=G;n[4]=G*J+C*v-D*K+M;n[5]=
G*K+D*J-z*v+Q;n[6]=G*v+z*K-C*J+T;n[7]=-z*J-C*K-D*v+q;return n},rotateX:function(n,q,v){var z=-q[0],C=-q[1],D=-q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7],T=J*G+Q*z+K*D-M*C,X=K*G+Q*C+M*z-J*D,U=M*G+Q*D+J*C-K*z;J=Q*G-J*z-K*C-M*D;Ua(n,q,v);z=n[0];C=n[1];D=n[2];G=n[3];n[4]=T*G+J*z+X*D-U*C;n[5]=X*G+J*C+U*z-T*D;n[6]=U*G+J*D+T*C-X*z;n[7]=J*G-T*z-X*C-U*D;return n},rotateY:function(n,q,v){var z=-q[0],C=-q[1],D=-q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7],T=J*G+Q*z+K*D-M*C,X=K*G+Q*C+M*z-J*D,U=M*G+Q*D+J*C-K*z;J=Q*G-
J*z-K*C-M*D;Va(n,q,v);z=n[0];C=n[1];D=n[2];G=n[3];n[4]=T*G+J*z+X*D-U*C;n[5]=X*G+J*C+U*z-T*D;n[6]=U*G+J*D+T*C-X*z;n[7]=J*G-T*z-X*C-U*D;return n},rotateZ:function(n,q,v){var z=-q[0],C=-q[1],D=-q[2],G=q[3],J=q[4],K=q[5],M=q[6],Q=q[7],T=J*G+Q*z+K*D-M*C,X=K*G+Q*C+M*z-J*D,U=M*G+Q*D+J*C-K*z;J=Q*G-J*z-K*C-M*D;Wa(n,q,v);z=n[0];C=n[1];D=n[2];G=n[3];n[4]=T*G+J*z+X*D-U*C;n[5]=X*G+J*C+U*z-T*D;n[6]=U*G+J*D+T*C-X*z;n[7]=J*G-T*z-X*C-U*D;return n},rotateByQuatAppend:function(n,q,v){var z=v[0],C=v[1],D=v[2];v=v[3];
var G=q[0],J=q[1],K=q[2],M=q[3];n[0]=G*v+M*z+J*D-K*C;n[1]=J*v+M*C+K*z-G*D;n[2]=K*v+M*D+G*C-J*z;n[3]=M*v-G*z-J*C-K*D;G=q[4];J=q[5];K=q[6];M=q[7];n[4]=G*v+M*z+J*D-K*C;n[5]=J*v+M*C+K*z-G*D;n[6]=K*v+M*D+G*C-J*z;n[7]=M*v-G*z-J*C-K*D;return n},rotateByQuatPrepend:function(n,q,v){var z=q[0],C=q[1],D=q[2];q=q[3];var G=v[0],J=v[1],K=v[2],M=v[3];n[0]=z*M+q*G+C*K-D*J;n[1]=C*M+q*J+D*G-z*K;n[2]=D*M+q*K+z*J-C*G;n[3]=q*M-z*G-C*J-D*K;G=v[4];J=v[5];K=v[6];M=v[7];n[4]=z*M+q*G+C*K-D*J;n[5]=C*M+q*J+D*G-z*K;n[6]=D*M+
q*K+z*J-C*G;n[7]=q*M-z*G-C*J-D*K;return n},rotateAroundAxis:function(n,q,v,z){if(.000001>Math.abs(z))return ab(n,q);var C=Math.hypot(v[0],v[1],v[2]);z*=.5;var D=Math.sin(z),G=D*v[0]/C,J=D*v[1]/C;v=D*v[2]/C;z=Math.cos(z);C=q[0];D=q[1];var K=q[2],M=q[3];n[0]=C*z+M*G+D*v-K*J;n[1]=D*z+M*J+K*G-C*v;n[2]=K*z+M*v+C*J-D*G;n[3]=M*z-C*G-D*J-K*v;C=q[4];D=q[5];K=q[6];q=q[7];n[4]=C*z+q*G+D*v-K*J;n[5]=D*z+q*J+K*G-C*v;n[6]=K*z+q*v+C*J-D*G;n[7]=q*z-C*G-D*J-K*v;return n},add:function(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+
v[1];n[2]=q[2]+v[2];n[3]=q[3]+v[3];n[4]=q[4]+v[4];n[5]=q[5]+v[5];n[6]=q[6]+v[6];n[7]=q[7]+v[7];return n},multiply:bb,mul:bb,scale:function(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;n[2]=q[2]*v;n[3]=q[3]*v;n[4]=q[4]*v;n[5]=q[5]*v;n[6]=q[6]*v;n[7]=q[7]*v;return n},dot:Ca,lerp:function(n,q,v,z){var C=1-z;0>Ca(q,v)&&(z=-z);n[0]=q[0]*C+v[0]*z;n[1]=q[1]*C+v[1]*z;n[2]=q[2]*C+v[2]*z;n[3]=q[3]*C+v[3]*z;n[4]=q[4]*C+v[4]*z;n[5]=q[5]*C+v[5]*z;n[6]=q[6]*C+v[6]*z;n[7]=q[7]*C+v[7]*z;return n},invert:function(n,q){var v=Fa(q);
n[0]=-q[0]/v;n[1]=-q[1]/v;n[2]=-q[2]/v;n[3]=q[3]/v;n[4]=-q[4]/v;n[5]=-q[5]/v;n[6]=-q[6]/v;n[7]=q[7]/v;return n},conjugate:function(n,q){n[0]=-q[0];n[1]=-q[1];n[2]=-q[2];n[3]=q[3];n[4]=-q[4];n[5]=-q[5];n[6]=-q[6];n[7]=q[7];return n},length:ia,len:ia,squaredLength:Fa,sqrLen:Fa,normalize:function(n,q){var v=Fa(q);if(0<v){v=Math.sqrt(v);var z=q[0]/v,C=q[1]/v,D=q[2]/v,G=q[3]/v,J=q[4],K=q[5],M=q[6];q=q[7];var Q=z*J+C*K+D*M+G*q;n[0]=z;n[1]=C;n[2]=D;n[3]=G;n[4]=(J-z*Q)/v;n[5]=(K-C*Q)/v;n[6]=(M-D*Q)/v;n[7]=
(q-G*Q)/v}return n},str:function(n){return"quat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+")"},exactEquals:function(n,q){return n[0]===q[0]&&n[1]===q[1]&&n[2]===q[2]&&n[3]===q[3]&&n[4]===q[4]&&n[5]===q[5]&&n[6]===q[6]&&n[7]===q[7]},equals:function(n,q){var v=n[0],z=n[1],C=n[2],D=n[3],G=n[4],J=n[5],K=n[6];n=n[7];var M=q[0],Q=q[1],T=q[2],X=q[3],U=q[4],ca=q[5],ba=q[6];q=q[7];return Math.abs(v-M)<=.000001*Math.max(1,Math.abs(v),Math.abs(M))&&Math.abs(z-Q)<=.000001*
Math.max(1,Math.abs(z),Math.abs(Q))&&Math.abs(C-T)<=.000001*Math.max(1,Math.abs(C),Math.abs(T))&&Math.abs(D-X)<=.000001*Math.max(1,Math.abs(D),Math.abs(X))&&Math.abs(G-U)<=.000001*Math.max(1,Math.abs(G),Math.abs(U))&&Math.abs(J-ca)<=.000001*Math.max(1,Math.abs(J),Math.abs(ca))&&Math.abs(K-ba)<=.000001*Math.max(1,Math.abs(K),Math.abs(ba))&&Math.abs(n-q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))}});Ia=function(){var n=cb();return function(q,v,z,C,D,G){v||(v=2);z||(z=0);for(C=C?Math.min(C*v+z,q.length):
q.length;z<C;z+=v)n[0]=q[z],n[1]=q[z+1],D(n,n,G),q[z]=n[0],q[z+1]=n[1];return q}}();Ia=Object.freeze({__proto__:null,create:cb,clone:function(n){var q=new ma(2);q[0]=n[0];q[1]=n[1];return q},fromValues:function(n,q){var v=new ma(2);v[0]=n;v[1]=q;return v},copy:function(n,q){n[0]=q[0];n[1]=q[1];return n},set:function(n,q,v){n[0]=q;n[1]=v;return n},add:function(n,q,v){n[0]=q[0]+v[0];n[1]=q[1]+v[1];return n},subtract:db,multiply:eb,divide:fb,ceil:function(n,q){n[0]=Math.ceil(q[0]);n[1]=Math.ceil(q[1]);
return n},floor:function(n,q){n[0]=Math.floor(q[0]);n[1]=Math.floor(q[1]);return n},min:function(n,q,v){n[0]=Math.min(q[0],v[0]);n[1]=Math.min(q[1],v[1]);return n},max:function(n,q,v){n[0]=Math.max(q[0],v[0]);n[1]=Math.max(q[1],v[1]);return n},round:function(n,q){n[0]=Math.round(q[0]);n[1]=Math.round(q[1]);return n},scale:function(n,q,v){n[0]=q[0]*v;n[1]=q[1]*v;return n},scaleAndAdd:function(n,q,v,z){n[0]=q[0]+v[0]*z;n[1]=q[1]+v[1]*z;return n},distance:gb,squaredDistance:hb,length:ib,squaredLength:jb,
negate:function(n,q){n[0]=-q[0];n[1]=-q[1];return n},inverse:function(n,q){n[0]=1/q[0];n[1]=1/q[1];return n},normalize:function(n,q){var v=q[0],z=q[1];v=v*v+z*z;0<v&&(v=1/Math.sqrt(v));n[0]=q[0]*v;n[1]=q[1]*v;return n},dot:function(n,q){return n[0]*q[0]+n[1]*q[1]},cross:function(n,q,v){q=q[0]*v[1]-q[1]*v[0];n[0]=n[1]=0;n[2]=q;return n},lerp:function(n,q,v,z){var C=q[0];q=q[1];n[0]=C+z*(v[0]-C);n[1]=q+z*(v[1]-q);return n},random:function(n,q){q=q||1;var v=2*Ga()*Math.PI;n[0]=Math.cos(v)*q;n[1]=Math.sin(v)*
q;return n},transformMat2:function(n,q,v){var z=q[0];q=q[1];n[0]=v[0]*z+v[2]*q;n[1]=v[1]*z+v[3]*q;return n},transformMat2d:function(n,q,v){var z=q[0];q=q[1];n[0]=v[0]*z+v[2]*q+v[4];n[1]=v[1]*z+v[3]*q+v[5];return n},transformMat3:function(n,q,v){var z=q[0];q=q[1];n[0]=v[0]*z+v[3]*q+v[6];n[1]=v[1]*z+v[4]*q+v[7];return n},transformMat4:function(n,q,v){var z=q[0];q=q[1];n[0]=v[0]*z+v[4]*q+v[12];n[1]=v[1]*z+v[5]*q+v[13];return n},rotate:function(n,q,v,z){var C=q[0]-v[0];q=q[1]-v[1];var D=Math.sin(z);z=
Math.cos(z);n[0]=C*z-q*D+v[0];n[1]=C*D+q*z+v[1];return n},angle:function(n,q){var v=n[0];n=n[1];var z=q[0];q=q[1];var C=Math.sqrt(v*v+n*n)*Math.sqrt(z*z+q*q);return Math.acos(Math.min(Math.max(C&&(v*z+n*q)/C,-1),1))},zero:function(n){n[0]=0;n[1]=0;return n},str:function(n){return"vec2("+n[0]+", "+n[1]+")"},exactEquals:function(n,q){return n[0]===q[0]&&n[1]===q[1]},equals:function(n,q){var v=n[0];n=n[1];var z=q[0];q=q[1];return Math.abs(v-z)<=.000001*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(n-
q)<=.000001*Math.max(1,Math.abs(n),Math.abs(q))},len:ib,sub:db,mul:eb,div:fb,dist:gb,sqrDist:hb,sqrLen:jb,forEach:Ia});e.glMatrix=lb;e.mat2=mb;e.mat2d=nb;e.mat3=ob;e.mat4=pb;e.quat=Na;e.quat2=Oa;e.vec2=Ia;e.vec3=La;e.vec4=Ma;Object.defineProperty(e,"__esModule",{value:!0})});"use strict";
{function e(F,I,N){var R=[0,0];var S=F[1][1]-F[0][1];var Y=F[0][0]-F[1][0];F=S*F[0][0]+Y*F[0][1];var W=I[1][1]-I[0][1];var ea=I[0][0]-I[1][0];I=W*I[0][0]+ea*I[0][1];var na=S*ea-W*Y;H(na,0,N||0)||(R[0]=(ea*F-Y*I)/na,R[1]=(S*I-W*F)/na);return R}function d(F,I,N,R){var S=I[0]-F[0];I=I[1]-F[1];var Y=R[0]-N[0],W=R[1]-N[1];if(0===Y*I-W*S)return!1;R=(S*(N[1]-F[1])+I*(F[0]-N[0]))/(Y*I-W*S);F=(Y*(F[1]-N[1])+W*(N[0]-F[0]))/(W*S-Y*I);return 0<=R&&1>=R&&0<=F&&1>=F}function c(F,I,N){return(I[0]-F[0])*(N[1]-F[1])-
(N[0]-F[0])*(I[1]-F[1])}function f(F,I,N){return 0<c(F,I,N)}function g(F,I,N){return 0<=c(F,I,N)}function h(F,I,N){return 0>c(F,I,N)}function m(F,I,N){return 0>=c(F,I,N)}var tmpPoint1=[],tmpPoint2=[];function k(F,I,N,R){if(R){var S=tmpPoint1,Y=tmpPoint2;S[0]=I[0]-F[0];S[1]=I[1]-F[1];Y[0]=N[0]-I[0];Y[1]=N[1]-I[1];return Math.acos((S[0]*Y[0]+S[1]*Y[1])/(Math.sqrt(S[0]*S[0]+S[1]*S[1])*Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1])))<R}return 0===c(F,I,N)}function a(F,I){var N=I[0]-F[0];F=I[1]-F[1];return N*N+F*F}function b(F,
I){var N=F.length;return F[0>I?I%N+N:I%N]}function l(F){F.length=0}function p(F,I,N,R){for(;N<R;N++)F.push(I[N])}function r(F){for(var I=[],N=F.length,R=0;R!==N;R++)I.push(F.pop());for(R=0;R!==N;R++)F[R]=I[R]}function t(F,I){return h(b(F,I-1),b(F,I),b(F,I+1))}var tmpLine1=[],tmpLine2=[];function u(F,I,N){var R=tmpLine1,S=tmpLine2;if(g(b(F,I+1),b(F,I),b(F,N))&&m(b(F,I-1),b(F,I),b(F,N)))return!1;var Y=a(b(F,I),b(F,N));for(var W=0;W!==F.length;++W)if((W+1)%F.length!==I&&W!==I&&g(b(F,I),b(F,N),b(F,W+
1))&&m(b(F,I),b(F,N),b(F,W))){R[0]=b(F,I);R[1]=b(F,N);S[0]=b(F,W);S[1]=b(F,W+1);var ea=e(R,S);if(a(b(F,I),ea)<Y)return!1}return!0}function w(F,I,N){for(var R=0;R!==F.length;++R)if(R!==I&&R!==N&&(R+1)%F.length!==I&&(R+1)%F.length!==N&&d(b(F,I),b(F,N),b(F,R),b(F,R+1)))return!1;return!0}function x(F,I,N,R){R=R||[];l(R);if(I<N)for(var S=I;S<=N;S++)R.push(F[S]);else{for(S=0;S<=N;S++)R.push(F[S]);for(S=I;S<F.length;S++)R.push(F[S])}return R}function A(F){for(var I=[],N,R,S=[],Y=Number.MAX_VALUE,W=0;W<F.length;++W)if(t(F,
W))for(var ea=0;ea<F.length;++ea)if(u(F,W,ea)){N=A(x(F,W,ea,S));R=A(x(F,ea,W,S));for(var na=0;na<R.length;na++)N.push(R[na]);N.length<Y&&(I=N,Y=N.length,I.push([b(F,W),b(F,ea)]))}return I}function E(F,I){if(0===I.length)return[F];if(I instanceof Array&&I.length&&I[0]instanceof Array&&2===I[0].length&&I[0][0]instanceof Array){F=[F];for(var N=0;N<I.length;N++)for(var R=I[N],S=0;S<F.length;S++){var Y=E(F[S],R);if(Y){F.splice(S,1);F.push(Y[0],Y[1]);break}}return F}R=I;N=F.indexOf(R[0]);S=F.indexOf(R[1]);
return-1!==N&&-1!==S?[x(F,N,S),x(F,S,N)]:!1}function y(F,I,N,R,S){var Y=I[1]-F[1];I=F[0]-I[0];F=Y*F[0]+I*F[1];var W=R[1]-N[1];R=N[0]-R[0];N=W*N[0]+R*N[1];var ea=Y*R-W*I;return H(ea,0,S||0)?[0,0]:[(R*F-I*N)/ea,(Y*N-W*F)/ea]}function B(F,I,N,R,S,Y,W){Y=Y||100;W=W||0;S=S||25;I="undefined"!==typeof I?I:[];N=N||[];R=R||[];var ea=[0,0],na=[0,0],ja=[0,0],wa,sa=0,Da=0,Ea=0,Aa=[],za=[];if(3>F.length)return I;W++;if(W>Y)return console.warn("quickDecomp: max level ("+Y+") reached."),I;for(var ia=0;ia<F.length;++ia)if(t(F,
ia)){N.push(F[ia]);var Fa=wa=Number.MAX_VALUE;for(var xa=0;xa<F.length;++xa){if(f(b(F,ia-1),b(F,ia),b(F,xa))&&m(b(F,ia-1),b(F,ia),b(F,xa-1))&&(ja=y(b(F,ia-1),b(F,ia),b(F,xa),b(F,xa-1)),h(b(F,ia+1),b(F,ia),ja))){var Ca=a(F[ia],ja);Ca<wa&&(wa=Ca,na=ja,Da=xa)}f(b(F,ia+1),b(F,ia),b(F,xa+1))&&m(b(F,ia+1),b(F,ia),b(F,xa))&&(ja=y(b(F,ia+1),b(F,ia),b(F,xa),b(F,xa+1)),f(b(F,ia-1),b(F,ia),ja)&&(Ca=a(F[ia],ja),Ca<Fa&&(Fa=Ca,ea=ja,sa=xa)))}if(Da===(sa+1)%F.length)ja[0]=(na[0]+ea[0])/2,ja[1]=(na[1]+ea[1])/2,R.push(ja),
ia<sa?(p(Aa,F,ia,sa+1),Aa.push(ja),za.push(ja),0!==Da&&p(za,F,Da,F.length),p(za,F,0,ia+1)):(0!==ia&&p(Aa,F,ia,F.length),p(Aa,F,0,sa+1),Aa.push(ja),za.push(ja),p(za,F,Da,ia+1));else{Da>sa&&(sa+=F.length);ea=Number.MAX_VALUE;if(sa<Da)return I;for(xa=Da;xa<=sa;++xa)g(b(F,ia-1),b(F,ia),b(F,xa))&&m(b(F,ia+1),b(F,ia),b(F,xa))&&(Ca=a(b(F,ia),b(F,xa)),Ca<ea&&w(F,ia,xa)&&(ea=Ca,Ea=xa%F.length));ia<Ea?(p(Aa,F,ia,Ea+1),0!==Ea&&p(za,F,Ea,F.length),p(za,F,0,ia+1)):(0!==ia&&p(Aa,F,ia,F.length),p(Aa,F,0,Ea+1),p(za,
F,Ea,ia+1))}Aa.length<za.length?(B(Aa,I,N,R,S,Y,W),B(za,I,N,R,S,Y,W)):(B(za,I,N,R,S,Y,W),B(Aa,I,N,R,S,Y,W));return I}I.push(F);return I}function H(F,I,N){return Math.abs(F-I)<=(N||0)}function P(F,I,N){return H(F[0],I[0],N)&&H(F[1],I[1],N)}self.polyDecomp={decomp:function(F){var I=A(F);return 0<I.length?E(F,I):[F]},quickDecomp:B,isSimple:function(F){var I;for(I=0;I<F.length-1;I++)for(var N=0;N<I-1;N++)if(d(F[I],F[I+1],F[N],F[N+1]))return!1;for(I=1;I<F.length-2;I++)if(d(F[0],F[F.length-1],F[I],F[I+
1]))return!1;return!0},removeCollinearPoints:function(F,I){for(var N=0,R=F.length-1;3<F.length&&0<=R;--R)k(b(F,R-1),b(F,R),b(F,R+1),I)&&(F.splice(R%F.length,1),N++);return N},removeDuplicatePoints:function(F,I){for(var N=F.length-1;1<=N;--N)for(var R=F[N],S=N-1;0<=S;--S)P(R,F[S],I)&&F.splice(N,1)},makeCCW:function(F){for(var I=0,N=1;N<F.length;++N)if(F[N][1]<F[I][1]||F[N][1]===F[I][1]&&F[N][0]>F[I][0])I=N;if(f(b(F,I-1),b(F,I),b(F,I+1)))return!1;r(F);return!0}}}"use strict";
{let e=!1,d=!1,c="dev";const f=self.C3=class{constructor(){throw TypeError("static class can't be instantiated");}static SetReady(){e=!0}static IsReady(){return e}static SetAppStarted(){d=!0}static HasAppStarted(){return d}static SetBuildMode(g){c=g}static GetBuildMode(){return c}static IsReleaseBuild(){return"final"===c}};f.isDebug=!1;f.isDebugDefend=!1;f.hardwareConcurrency=navigator.hardwareConcurrency||2}"use strict";
{const e=self.C3;e.QueryParser=class{constructor(d){this._queryString=d;this._parameters=new Map;this._Parse()}_Parse(){var d=this._queryString;if(d.startsWith("?")||d.startsWith("#"))d=d.substr(1);d=d.split("&");for(const c of d)this._ParseParameter(c)}_ParseParameter(d){if(d)if(d.includes("=")){var c=d.indexOf("="),f=decodeURIComponent(d.substring(0,c));d=decodeURIComponent(d.substring(c+1));this._parameters.set(f,d)}else this._parameters.set(d,null)}LogAll(){for(const d of this._parameters)console.log("[QueryParser] Parameter '"+
d[0]+"' = "+(null===d[1]?"null":"'"+d[1]+"'"))}Has(d){return this._parameters.has(d)}Get(d){d=this._parameters.get(d);return"undefined"===typeof d?null:d}ClearHash(){history.replaceState("",document.title,location.pathname+location.search)}Reparse(d){this._queryString=d;this._parameters.clear();this._Parse()}};e.QueryString=new e.QueryParser(location.search);e.LocationHashString=new e.QueryParser(location.hash);"dev"!==e.QueryString.Get("mode")&&e.SetBuildMode("final")}"use strict";
{const e=self.C3,d=navigator.userAgent;let c={linux:/linux|openbsd|freebsd|netbsd/i.test(d),chromeOS:/CrOS/.test(d),windowsTizen:/trident|iemobile|msie|tizen/i.test(d),genericMS:/trident|iemobile|msie|edge\//i.test(d),opera:/OPR\//.test(d),blackberry:/bb10/i.test(d),edge:/edge\//i.test(d),trident:/trident/i.test(d),webkit:/webkit/i.test(d),safari:/safari\//i.test(d),chrome:/chrome\//i.test(d),chromium:/chromium\//i.test(d),crosswalk:/crosswalk|xwalk/i.test(d),nwjs:/nwjs/i.test(d),amazonwebapp:/amazonwebappplatform/i.test(d),
webview:/wv\)/.test(d),android:/android/i.test(d),nokia:/nokiabrowser\/[0-9.]+/i.test(d)};var JSCompiler_object_inline_windows_0=/windows\s+nt\s+\d+\.\d+/i.exec(d),JSCompiler_object_inline_OSX_1=/mac\s+os\s+x\s+[0-9_]+/i.exec(d),JSCompiler_object_inline_android_2=/android\s+[0-9.]+/i.exec(d),JSCompiler_object_inline_opera_3=/OPR\/[0-9.]+/.exec(d),JSCompiler_object_inline_tizen_4=/tizen\s+[0-9.]+/i.exec(d),JSCompiler_object_inline_iphone_5=/iphone\s+os\s+[0-9_]+/i.exec(d),JSCompiler_object_inline_ipad_6=
/ipad[^)]*os\s+[0-9_]+/i.exec(d),JSCompiler_object_inline_winPhone_7=/windows\s+phone\s+[0-9.]+/i.exec(d),JSCompiler_object_inline_winPhoneOS_8=/windows\s+phone\s+os\s+[0-9.]+/i.exec(d),JSCompiler_object_inline_chrome_9=/chrome\/[0-9.]+/i.exec(d),JSCompiler_object_inline_chromium_10=/chromium\/[0-9.]+/i.exec(d),JSCompiler_object_inline_nwjs_11=/nwjs\/[0-9.]+/i.exec(d),JSCompiler_object_inline_firefox_12=/firefox\/[0-9.]+/i.exec(d),JSCompiler_object_inline_ie_13=/msie\s+[0-9.]+/i.exec(d),JSCompiler_object_inline_edge_14=
/edge\/[0-9.]+/i.exec(d),JSCompiler_object_inline_edgeChromium_15=/edg\/[0-9.]+/i.exec(d),JSCompiler_object_inline_silk_16=/silk\/[0-9.]+/i.exec(d);let f="(unknown)",g="(unknown)",h="(unknown)",m="(unknown)",k="(unknown)",a="(unknown)",b="(unknown)",l="browser",p=!1,r=!1,t=new Map;function u(x,A,E){!0===A?(E(),t.set(x,!0)):A&&A.length&&(E(A[0]),t.set(x,!0))}u("isWindows",JSCompiler_object_inline_windows_0,x=>{f="Windows";if(x=x.split(" ")[2])switch(x){case "5.0":g="2000";break;case "5.1":g="XP";break;
case "5.2":g="XP";break;case "6.0":g="Vista";break;case "6.1":g="7";break;case "6.2":g="8";break;case "6.3":g="8.1";break;case "10.0":g="10"}});u("isOSX",JSCompiler_object_inline_OSX_1,x=>{f="Mac OS X";(x=x.split(" ")[3])&&(g=x.replace("_","."))});u("isLinux",c.linux,()=>{f="Linux"});u("isChromeOS",c.chromeOS,()=>{f="Chrome OS"});u("isAndroid",!c.windowsTizen&&JSCompiler_object_inline_android_2,x=>{f="Android";(x=x.split(" ")[1])&&(g=x)});u("isTizen",JSCompiler_object_inline_tizen_4,x=>{f="Tizen";
(x=x.split(" ")[1])&&(g=x)});u("isIPhone",!c.windowsTizen&&JSCompiler_object_inline_iphone_5,x=>{f="iOS";(x=x.split(" ")[2])&&(g=x.replace("_","."))});u("isIPad",!c.windowsTizen&&JSCompiler_object_inline_ipad_6,x=>{f="iOS";(x=x.split(" ")[3])&&(g=x.replace("_","."))});u("isWindowsPhone",JSCompiler_object_inline_winPhone_7,x=>{f="Windows Phone";(x=x.split(" ")[2])&&(g=x)});u("isWindowsPhoneOS",JSCompiler_object_inline_winPhoneOS_8,x=>{f="Windows Phone";(x=x.split(" ")[3])&&(g=x)});u("isBlackberry",
c.blackberry,()=>{f="Blackberry";g="10";m="stock";b="webkit"});u("isChrome",!c.edge&&!c.opera&&JSCompiler_object_inline_chrome_9,x=>{m="Chrome";b="Chromium";(x=x.split("/")[1])&&(k=x)});u("isOpera",JSCompiler_object_inline_opera_3,x=>{m="Opera";b="Chromium";(x=x.split("/")[1])&&(k=x)});u("isChromium",JSCompiler_object_inline_chromium_10,x=>{b=m="Chromium";(x=x.split("/")[1])&&(k=x)});u("isFirefox",JSCompiler_object_inline_firefox_12,x=>{m="Firefox";b="Gecko";(x=x.split("/")[1])&&(k=x)});u("isInternetExplorer",
JSCompiler_object_inline_ie_13,x=>{m="Internet Explorer";b="Trident";(x=x.split(" ")[1])&&(k=x)});u("isTrident","Internet Explorer"!==m&&c.trident,()=>{b="Trident";var x=/rv:[0-9.]+/i.exec(d);x&&x.length&&(m="Internet Explorer",(x=x[0].split(":")[1])&&(k=x))});u("isEdge",JSCompiler_object_inline_edge_14,x=>{b=m="Edge";(x=x.split("/")[1])&&(k=x)});u("isEdgeChromium",JSCompiler_object_inline_edgeChromium_15,x=>{m="Edge";b="Chromium";(x=x.split("/")[1])&&(k=x)});u("isSafari",c.safari&&!c.nokia&&!c.chrome&&
!c.chromium&&!c.genericIE&&!c.blackberry,()=>{m="Safari";b="WebKit";var x=/version\/[0-9.]+/i.exec(d),A=/crios\/[0-9.]+/i.exec(d),E=/fxios\/[0-9.]+/i.exec(d);x&&x.length&&(x=x[0].split("/")[1])&&(k=x);A&&A.length&&(m="Chrome for iOS",(A=A[0].split("/")[1])&&(k=A));E&&E.length&&(m="Firefox for iOS",(E=E[0].split("/")[1])&&(k=E))});u("isSilk",JSCompiler_object_inline_silk_16,x=>{m="Silk";(x=x.split("/")[1])&&(k=x)});u("isCrosswalk",c.crosswalk,()=>l="crosswalk");u("isCordova",self.device&&(self.device.cordova||
self.device.phonegap),()=>l="cordova");u("isNWJS",JSCompiler_object_inline_nwjs_11,x=>{l="nwjs";m="NW.js";b="Chromium";(x=x.split("/")[1])&&(k=x)});u("isAmazonWebApp",c.amazonwebapp,()=>l="webapp");u("isHomeScreenWebApp","nwjs"!==l&&"undefined"!==typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone),()=>l="webapp");u("isFalseSafari","Safari"===m&&("Android"===f||"Tizen"===f||"Blackberry"===f),()=>m="stock");u("isAndroidWebview","Chrome"===
m&&"browser"===l&&c.webview,()=>l="webview");u("isFirefoxOS","Firefox"===m&&"(unknown)"===f,()=>f="Firefox OS");u("isAndroidFallback","(unknown)"===f&&!c.windowsTizen&&c.android,()=>f="Android");u("isTridentFallback","(unknown)"===f&&c.trident,()=>b="Trident");u("isWebkitFallback","(unknown)"===f&&c.webkit,()=>b="WebKit");u("is64Bit",(x=>x.test(d)||x.test(navigator.platform)||"x64"===navigator.cpuClass)(/x86_64|x86-64|win64|x64;|x64\)|x64_|amd64|wow64|ia64|arm64|arch64|sparc64|ppc64|irix64/i),()=>
h="64-bit");u("is32Bit",(x=>x.test(d)||x.test(navigator.platform)||"x86"===navigator.cpuClass)(/x86;|x86\)|i86|i386|i486|i586|i686|armv1|armv2|armv3|armv4|armv5|armv6|armv7/i),()=>h="32-bit");u("is64BitFallback","(unknown)"===h&&"Mac OS X"===f&&10.7<=parseFloat(g),()=>h="64-bit");u("is32BitFallback","(unknown)"===h&&"Windows"===f||"Android"===f&&5>parseFloat(g),()=>h="32-bit");u("is32BitBrowser","32-bit"===h||/wow64/i.test(d),()=>a="32-bit");u("is64BitBrowser",/win64/i.test(d),()=>a="64-bit");u("isDesktop",
(()=>"Windows"===f||"Mac OS X"===f||"Linux"===f||"Chrome OS"===f||"nwjs"===l)(),()=>p=!0);"Edge"===b&&"undefined"!==typeof Windows&&"undefined"!==typeof Windows.System&&(l="windows-store");r="nwjs"===l;const w="Mac OS X"===f&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;w&&(f="iOS",g=k,r=p=!1);e.Platform={OS:f,OSVersion:g,OSArchitecture:h,Browser:m,BrowserVersion:k,BrowserVersionNumber:parseFloat(k),BrowserArchitecture:a,BrowserEngine:b,Context:l,IsDesktop:p,IsMobile:!p,IsDesktopApp:r,IsChromeWebStore:!!(self.chrome&&
self.chrome.runtime&&self.chrome.runtime.id),IsAppleOS:"Mac OS X"===f||"iOS"===f,IsIpadOS:w}}"use strict";
{const e=new Map,d="undefined"!==typeof IDBObjectStore&&"function"===typeof IDBObjectStore.prototype.getAll,c="undefined"!==typeof IDBObjectStore&&"function"===typeof IDBObjectStore.prototype.getAllKeys;function f(t){return new Promise((u,w)=>{t.onsuccess=()=>u(t.result);t.onerror=()=>w(t.error)})}function g(t){return new Promise((u,w)=>{t.oncomplete=()=>u();t.onerror=()=>w(t.error);t.onabort=()=>w(t.error)})}function h(t,u){return k(t,u)}function m(t,u){return k(t,u,!0)}async function k(t,u,w=!1,
x=!0){const A=await a(t);try{const E=A.transaction(["keyvaluepairs"],w?"readwrite":"readonly");return u(E)}catch(E){if(x&&"InvalidStateError"===E.name)return e.delete(t),k(t,u,w,!1);throw E;}}function a(t){l(t);let u=e.get(t);u instanceof Promise||(u=b(t),e.set(t,u),u.catch(w=>e.delete(t)));return u}async function b(t){l(t);const u=indexedDB.open(t,2);u.addEventListener("upgradeneeded",w=>{try{w.target.result.createObjectStore("keyvaluepairs")}catch(x){console.error(`Failed to create objectstore for database ${t}`,
x)}});return f(u)}function l(t){if("string"!==typeof t)throw new TypeError("expected string");}function p(t,u){const w=t.objectStore("keyvaluepairs").openCursor();return new Promise(x=>{const A=[];w.onsuccess=E=>{if(E=E.target.result){switch(u){case "entries":A.push([E.key,E.value]);break;case "keys":A.push(E.key);break;case "values":A.push(E.value)}E.continue()}else x(A)}})}class r{constructor(t){l(t);this.name=t}async ready(){await a(this.name)}set(t,u){l(t);return m(this.name,async w=>{var x=w.objectStore("keyvaluepairs").put(u,
t);x=f(x);w=g(w);await Promise.all([w,x])})}get(t){l(t);return h(this.name,async u=>{var w=u.objectStore("keyvaluepairs").get(t);w=f(w);u=g(u);[,u]=await Promise.all([u,w]);return u})}delete(t){l(t);return m(this.name,async u=>{var w=u.objectStore("keyvaluepairs").delete(t);w=f(w);u=g(u);await Promise.all([u,w])})}clear(){return m(this.name,async t=>{var u=t.objectStore("keyvaluepairs").clear();u=f(u);t=g(t);await Promise.all([t,u])})}keys(){return h(this.name,async t=>{if(c){var u=t.objectStore("keyvaluepairs").getAllKeys();
u=f(u)}else u=p(t,"keys");t=g(t);[,t]=await Promise.all([t,u]);return t})}values(){return h(this.name,async t=>{if(d){var u=t.objectStore("keyvaluepairs").getAll();u=f(u)}else u=p(t,"values");t=g(t);[,t]=await Promise.all([t,u]);return t})}entries(){return h(this.name,async t=>{var u=p(t,"entries");t=g(t);[,u]=await Promise.all([t,u]);return u})}}self.KVStorageContainer=r}"use strict";
{const e=self.KVStorageContainer,d=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i],c=new WeakMap;let f=!1;"undefined"===typeof indexedDB&&(f=!0,console.warn("Unable to use local storage because indexedDB is not defined"));function g(a){throw Error(`"${a}" is not implemented`);
}function h(a){if("function"===typeof a)throw Error("localforage callback API is not implemented; please use the promise API instead");}function m(a){return"object"===typeof a?new Promise(b=>{const {port1:l,port2:p}=new MessageChannel;p.onmessage=r=>b(r.data);l.postMessage(a)}):Promise.resolve(a)}class k{constructor(a){this._inst=a;c.set(this,new Map)}_MaybeSwitchToMemoryFallback(a){if(!f)for(const b of d)if(a&&b.test(a.message)){console.error("Unable to use local storage, reverting to in-memory store: ",
a,a.message);f=!0;break}}async _getItemFallback(a){a=c.get(this).get(a);a=await m(a);return"undefined"===typeof a?null:a}async _setItemFallback(a,b){b=await m(b);c.get(this).set(a,b)}_removeItemFallback(a){c.get(this).delete(a)}_clearFallback(){c.get(this).clear()}_keysFallback(){return Array.from(c.get(this).keys())}IsUsingFallback(){return f}async getItem(a,b){h(b);if(f)return await this._getItemFallback(a);let l;try{l=await this._inst.get(a)}catch(p){this._MaybeSwitchToMemoryFallback(p);if(f)return await this._getItemFallback(a);
console.error(`Error reading '${a}' from storage, returning null: `,p);return null}return"undefined"===typeof l?null:l}async setItem(a,b,l){h(l);"undefined"===typeof b&&(b=null);if(f)await this._setItemFallback(a,b);else try{await this._inst.set(a,b)}catch(p){if(this._MaybeSwitchToMemoryFallback(p),f)await this._setItemFallback(a,b);else throw p;}}async removeItem(a,b){h(b);if(f)this._removeItemFallback(a);else try{await this._inst.delete(a)}catch(l){this._MaybeSwitchToMemoryFallback(l),f?this._removeItemFallback(a):
console.error(`Error removing '${a}' from storage: `,l)}}async clear(a){h(a);if(f)this._clearFallback();else try{await this._inst.clear()}catch(b){this._MaybeSwitchToMemoryFallback(b),f?this._clearFallback():console.error("Error clearing storage: ",b)}}async keys(a){h(a);if(f)return this._keysFallback();a=[];try{a=await this._inst.keys()}catch(b){this._MaybeSwitchToMemoryFallback(b);if(f)return this._keysFallback();console.error("Error getting storage keys: ",b)}return a}ready(a){h(a);return f?Promise.resolve(!0):
this._inst.ready()}createInstance(a){if("object"!==typeof a)throw new TypeError("invalid options object");a=a.name;if("string"!==typeof a)throw new TypeError("invalid store name");a=new e(a);return new k(a)}length(a){g("localforage.length()")}key(a,b){g("localforage.key()")}iterate(a,b){g("localforage.iterate()")}setDriver(a){g("localforage.setDriver()")}config(a){g("localforage.config()")}defineDriver(a){g("localforage.defineDriver()")}driver(){g("localforage.driver()")}supports(a){g("localforage.supports()")}dropInstance(){g("localforage.dropInstance()")}disableMemoryMode(){f=
!1}}self.localforage=new k(new e("localforage"))}"use strict";
{const e=self.C3;e.Supports={};e.Supports.WebAnimations=(()=>{try{if("Safari"===e.Platform.Browser||"undefined"===typeof document)return!1;const d=document.createElement("div");return"undefined"===typeof d.animate?!1:"undefined"!==typeof d.animate([{opacity:"0"},{opacity:"1"}],1E3).reverse}catch(d){return!1}})();e.Supports.DialogElement="undefined"!==typeof HTMLDialogElement;e.Supports.RequestIdleCallback=!!self.requestIdleCallback;e.Supports.ImageBitmap=!!self.createImageBitmap;e.Supports.ImageBitmapOptions=
!1;if(e.Supports.ImageBitmap)try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(d=>{e.Supports.ImageBitmapOptions=!0}).catch(d=>{e.Supports.ImageBitmapOptions=!1})}catch(d){e.Supports.ImageBitmapOptions=!1}e.Supports.ClipboardReadText=!(!navigator.clipboard||!navigator.clipboard.readText||"Firefox"===e.Platform.Browser);e.Supports.PermissionsQuery=!(!navigator.permissions||!navigator.permissions.query);e.Supports.Proxies="undefined"!==typeof Proxy;e.Supports.DownloadAttribute=
(()=>"undefined"===typeof document?!1:"undefined"!==typeof document.createElement("a").download)();e.Supports.CanvasToBlob=(()=>"undefined"!==typeof HTMLCanvasElement&&HTMLCanvasElement.prototype.toBlob)();e.Supports.Fetch="function"===typeof fetch;e.Supports.PersistentStorage=!!(self.isSecureContext&&"Opera"!==e.Platform.Browser&&navigator.storage&&navigator.storage.persist);e.Supports.StorageQuotaEstimate=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate);e.Supports.Fullscreen=
(()=>{if("undefined"===typeof document||"iOS"===e.Platform.OS)return!1;const d=document.documentElement;return!!(d.requestFullscreen||d.msRequestFullscreen||d.mozRequestFullScreen||d.webkitRequestFullscreen)})();e.Supports.ImageDecoder="undefined"!==typeof self.ImageDecoder;e.Supports.NativeFileSystemAPI=!!self.showOpenFilePicker;e.Supports.NavigatorFontsQuery=!(!navigator.fonts||!navigator.fonts.query)}"use strict";
{const e=self.C3;if(!String.prototype.trimStart){const d=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(d,"")}}if(!String.prototype.trimEnd){const d=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(d,
"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(d,c){return this.replace(new RegExp(e.EscapeRegex(d),"g"),c)});Array.prototype.values||(Array.prototype.values=function*(){for(const d of this)yield d});if(!Array.prototype.flat){function d(c,f){return c.reduce((g,h)=>{0<f&&Array.isArray(h)?Array.prototype.push.apply(g,d(h,f-1)):g.push(h);return g},[])}Array.prototype.flat=function(c=1){return d(this,c)}}RegExp.escape||(RegExp.escape=function(d){return String(d).replace(/[\\^$*+?.()|[\]{}]/g,
"\\$&")});navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((d,c)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((f,g)=>d({usage:f,quota:g}),c))});"undefined"===typeof HTMLCollection||HTMLCollection.prototype[Symbol.iterator]||(HTMLCollection.prototype[Symbol.iterator]=function(){let d=0;return{next:()=>d>=this.length?{done:!0}:{value:this.item(d++),
done:!1}}});"undefined"===typeof NodeList||NodeList.prototype[Symbol.iterator]||(NodeList.prototype[Symbol.iterator]=function(){let d=0;return{next:()=>d>=this.length?{done:!0}:{value:this.item(d++),done:!1}}});"undefined"===typeof DOMTokenList||DOMTokenList.prototype[Symbol.iterator]||(DOMTokenList.prototype[Symbol.iterator]=function(){let d=0;return{next:()=>d>=this.length?{done:!0}:{value:this.item(d++),done:!1}}});"undefined"===typeof FileList||FileList.prototype[Symbol.iterator]||(FileList.prototype[Symbol.iterator]=
function(){let d=0;return{next:()=>d>=this.length?{done:!0}:{value:this.item(d++),done:!1}}});"undefined"===typeof TextEncoder&&(self.TextEncoder=class{constructor(){Object.defineProperty(this,"encoding",{value:"utf-8",writable:!1})}encode(d){for(var c=d.length,f=-1,g=new Uint8Array(3*c),h,m,k=0;k!==c;){h=d.charCodeAt(k);k+=1;if(55296<=h&&56319>=h){if(k===c){g[f+=1]=239;g[f+=1]=191;g[f+=1]=189;break}m=d.charCodeAt(k);if(56320<=m&&57343>=m){if(h=1024*(h-55296)+m-56320+65536,k+=1,65535<h){g[f+=1]=240|
h>>>18;g[f+=1]=128|h>>>12&63;g[f+=1]=128|h>>>6&63;g[f+=1]=128|h&63;continue}}else{g[f+=1]=239;g[f+=1]=191;g[f+=1]=189;continue}}127>=h?g[f+=1]=0|h:(2047>=h?g[f+=1]=192|h>>>6:(g[f+=1]=224|h>>>12,g[f+=1]=128|h>>>6&63),g[f+=1]=128|h&63)}return new Uint8Array(g.buffer.slice(0,f+1))}toString(){return"[object TextEncoder]"}},TextEncoder[Symbol.toStringTag]="TextEncoder");if("undefined"===typeof TextDecoder){function d(g){const h=g[Symbol.iterator]();return{next:m=>h.next(),[Symbol.iterator](){return this}}}
function c(g){g=g.next();if(g.done)throw Error("unexpected end of input");if(0!=(g.value&192^128))throw Error("invalid byte");return g.value&63}const f=new Map;f.set("utf-8",(g,h)=>{if(g.buffer)var m=new Uint8Array(g.buffer,g.byteOffset,g.byteLength);else if(m instanceof ArrayBuffer)m=new Uint8Array(g);else throw Error("Invalid parameter");g=d(m);m=[];try{for(const k of g){let a;if(127>k)a=k&127;else if(223>k)a=(k&31)<<6|c(g);else if(239>k)a=(k&15)<<12|c(g)<<6|c(g);else if(247>k)a=(k&7)<<18|c(g)<<
12|c(g)<<6|c(g);else throw Error("Invalid character");m.push(String.fromCodePoint(a))}}catch(k){if(h)throw k;m.push("\ufffd")}return m.join("")});f.set("utf8",f.get("utf-8"));f.set("utf-16le",(g,h)=>{throw Error("utf-16le decoder not implemented");});self.TextDecoder=class{constructor(g="utf-8",h={}){const m=f.get(g);if(!m)throw Error(`TextDecoder polyfill does not support "${g}"`);Object.defineProperty(this,"fatal",{value:!0===h.fatal,writable:!1});Object.defineProperty(this,"_decoder",{value:m,
writable:!1});Object.defineProperty(this,"encoding",{value:g,writable:!1})}decode(g){return this._decoder(g,this.fatal)}toString(){return"[object TextDecoder]"}};TextDecoder[Symbol.toStringTag]="TextDecoder"}"undefined"===typeof self.isSecureContext&&(self.isSecureContext="https:"===location.protocol);"undefined"===typeof self.globalThis&&(self.globalThis=self)}"use strict";
{const e=self.C3;function d(c){let f=e.GetCallStack();console.error("Assertion failure: "+c+"\n\nStack trace:\n"+f)}self.assert=function(c,f){c||d(f)}}"use strict";
{const e=self.C3;e.IsNumber=function(c){return"number"===typeof c};e.IsFiniteNumber=function(c){return e.IsNumber(c)&&isFinite(c)};e.RequireNumber=function(c){if(!e.IsNumber(c))throw new TypeError("expected number");};e.RequireOptionalNumber=function(c){e.IsNullOrUndefined(c)};e.RequireNumberInRange=function(c,f,g){if(!e.IsNumber(c)||isNaN(c)||f>c||g<c)throw new RangeError("number outside of range");};e.RequireAllNumber=function(...c){for(let f of c);};e.RequireFiniteNumber=function(c){if(!e.IsFiniteNumber(c))throw new TypeError("expected finite number");
};e.RequireOptionalFiniteNumber=function(c){e.IsNullOrUndefined(c)};e.RequireAllFiniteNumber=function(...c){for(let f of c);};e.IsString=function(c){return"string"===typeof c};e.RequireString=function(c){if(!e.IsString(c))throw new TypeError("expected string");};e.RequireOptionalString=function(c){e.IsNullOrUndefined(c)};e.RequireAllString=function(...c){for(let f of c);};e.IsSimpleObject=function(c){return"object"!==typeof c||null===c?!1:(c=Object.getPrototypeOf(c))?c.constructor===Object:null===
c};e.RequireSimpleObject=function(c){if(!e.IsSimpleObject(c))throw new TypeError("expected simple object");};e.RequireOptionalSimpleObject=function(c){if(!e.IsNullOrUndefined(c)&&!e.IsSimpleObject(c))throw new TypeError("expected simple object");};e.IsObject=function(c){return"object"===typeof c&&null!==c&&!Array.isArray(c)};e.RequireObject=function(c){if(!e.IsObject(c))throw new TypeError("expected object");};e.RequireOptionalObject=function(c){e.IsNullOrUndefined(c)};e.RequireAllObject=function(...c){for(let f of c);
};e.IsFileLike=function(c){return e.IsInstanceOf(c,Blob)&&"string"===typeof c.name};e.RequireFileLike=function(c){if(!e.IsFileLike(c))throw new TypeError("expected file");};e.RequireOptionalFileLike=function(c){e.IsNullOrUndefined(c)};e.IsArray=function(c){return Array.isArray(c)};e.RequireArray=function(c){if(!e.IsArray(c))throw new TypeError("expected array");};e.RequireOptionalArray=function(c){e.IsNullOrUndefined(c)};e.RequireAllArray=function(...c){for(let f of c);};e.Is2DArray=function(c){return e.IsArray(c)?
c.length?e.IsArray(c[0])?!0:!1:!0:!1};e.Require2DArray=function(c){if(!e.Is2DArray(c))throw new TypeError("expected 2d array");for(let f of c)if(!e.IsArray(f))throw new TypeError("expected 2d array");};e.RequireOptional2DArray=function(c){e.IsNullOrUndefined(c)};e.IsFunction=function(c){return"function"===typeof c};e.RequireFunction=function(c,f){if(!e.IsFunction(c))throw new TypeError("expected function");if(!e.IsNullOrUndefined(f)&&c!==f)throw new TypeError("expected same function reference");};
e.RequireOptionalFunction=function(c){e.IsNullOrUndefined(c)};e.RequireAllFunction=function(...c){for(let f of c);};e.RequireAnyFunction=function(c,...f){if(!e.IsFunction(c))throw new TypeError("expected function");if(!f.length)throw Error("missing comparison functions");for(let g of f)if(!e.IsNullOrUndefined(g)&&c===g)return;throw new TypeError("expected same function reference");};e.RequireOptionalAllFunction=function(...c){if(!e.IsNullOrUndefined(c))for(let f of c);};e.IsInstanceOf=function(c,
f){return c instanceof f};e.IsInstanceOfAny=function(c,...f){for(let g of f)if(e.IsInstanceOf(c,g))return!0;return!1};e.RequireInstanceOf=function(c,f){if(!e.IsInstanceOf(c,f))throw new TypeError("unexpected type");};e.RequireOptionalInstanceOf=function(c,f){e.IsNullOrUndefined(c)};e.RequireAllInstanceOf=function(c,...f){for(let g of f);};e.RequireAnyInstanceOf=function(c,...f){if(!e.IsInstanceOfAny(c,...f))throw new TypeError("unexpected type");};e.RequireAnyOptionalInstanceOf=function(c,...f){if(!e.IsNullOrUndefined(c)&&
!e.IsInstanceOfAny(c,...f))throw new TypeError("unexpected type");};e.IsArrayOf=function(c,f){for(let g of c)if(!e.IsInstanceOf(g,f))return!1;return!0};e.IsArrayOfFiniteNumbers=function(c){for(let f of c)if(!e.IsFiniteNumber(f))return!1;return!0};e.RequireArrayOf=function(c,f){for(let g of c);};e.RequireOptionalArrayOf=function(c,f){if(!e.IsNullOrUndefined(c))for(let g of c);};e.RequireArrayOfAny=function(c,...f){for(let g of c);};e.RequireOptionalArrayOfAny=function(c,...f){if(!e.IsNullOrUndefined(c))for(let g of c);
};e.IsDOMNode=function(c,f){return e.IsNullOrUndefined(c)||!e.IsString(c.nodeName)?!1:!f||e.equalsNoCase(c.nodeName,f)};e.RequireDOMNode=function(c,f){if(e.IsNullOrUndefined(c)||!e.IsString(c.nodeName))throw new TypeError("expected DOM node");if(f&&!e.equalsNoCase(c.nodeName,f))throw new TypeError(`expected DOM '${f}' node`);};e.RequireOptionalDOMNode=function(c,f){e.IsNullOrUndefined(c)};e.IsHTMLElement=function(c,f){return e.IsNullOrUndefined(c)||!e.IsString(c.tagName)?!1:!f||e.equalsNoCase(c.tagName,
f)};e.RequireHTMLElement=function(c,f){if(e.IsNullOrUndefined(c)||!e.IsString(c.tagName))throw new TypeError("expected HTML element");if(f&&!e.equalsNoCase(c.tagName,f))throw new TypeError(`expected HTML '${f}' element`);};e.RequireOptionalHTMLElement=function(c,f){e.IsNullOrUndefined(c)};e.IsDrawable=function(c){return e.IsHTMLElement(c,"img")||e.IsHTMLElement(c,"canvas")||e.IsHTMLElement(c,"video")||"undefined"!==typeof OffscreenCanvas&&c instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&
c instanceof ImageBitmap};e.RequireDrawable=function(c){if(!e.IsDrawable(c))throw new TypeError("expected drawable");};e.RequireOptionalDrawable=function(c){e.IsNullOrUndefined(c)};e.IsDrawableOrImageData=function(c){return c instanceof ImageData?!0:e.IsDrawable(c)};e.RequireDrawableOrImageData=function(c){if(!e.IsDrawableOrImageData(c))throw new TypeError("expected drawable or image data");};e.RequireOptionalDrawableOrImageData=function(c){if(!e.IsNullOrUndefined(c)&&!e.IsDrawableOrImageData(c))throw new TypeError("expected drawable or image data");
};e.IsStringLike=function(c){return"string"===typeof c||c instanceof e.HtmlString||c instanceof e.BBString};e.RequireStringLike=function(c){if(!e.IsStringLike(c))throw new TypeError("expected string-like");};e.RequireOptionalStringLike=function(c){e.IsNullOrUndefined(c)};e.RequireAllStringLike=function(...c){for(let f of c);};e.RequireOverride=function(){throw Error("must be overridden");};e.NotYetImplemented=function(){throw Error("not yet implemented");};e.IsDefined=function(c,...f){if("undefined"===
typeof c)return!1;for(let g of f){if("undefined"===typeof c[g])return!1;c=c[g]}return!0};e.IsNullOrUndefined=function(c){return"undefined"===typeof c||null===c};e.AreArrayElementsOfSameType=function(c){let f=c[0].constructor;for(let g of c)if(g.constructor!==f)return!1;return f};e.AreArrayElementsOfType=function(c,f){for(let g of c)if(!(g instanceof f))return!1;return!0};const d=Object.getPrototypeOf(Uint8Array);e.IsTypedArray=function(c){return e.IsInstanceOf(c,d)};e.RequireTypedArray=function(c){};
e.WeakRequireTypedArray=function(c){e.WeakRequireInstanceOf(c,d)};e.WeakRequireAnyInstanceOf=function(c,...f){if(!e.WeakIsAnyInstanceOf(c,...f))throw new TypeError("unexpected type");};e.WeakIsAnyInstanceOf=function(c,...f){for(const g of f)if(e.WeakIsInstanceOf(c,g))return!0;return!1};e.WeakRequireInstanceOf=function(c,f){if(!e.WeakIsInstanceOf(c,f))throw new TypeError("unexpected type");};e.WeakIsInstanceOf=function(c,f){for(;c=Object.getPrototypeOf(c);)if(c.constructor.name===f.name)return!0;return!1}}"use strict";
{const e=self.C3;e.GetCallStack=function(){return Error().stack};e.Debugger=function(){debugger};e.cast=function(t,u){return t&&t instanceof u?t:null};e.getName=function(t){return"undefined"===typeof t?"undefined":null===t?"null":"boolean"===typeof t?"<boolean>":e.IsNumber(t)?"<number>":e.IsString(t)?"<string>":e.IsArray(t)?"<array>":"symbol"===typeof t?"<"+t.toString()+">":e.IsFunction(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"===typeof t?t.constructor&&t.constructor.name&&
"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"};e.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t};e.range=function*(t,u){if(!isFinite(Math.abs(t-u)))throw Error("Invalid parameters");if(t>u)for(--t;t>=u;t--)yield t;else for(;t<u;t++)yield t};function d(t,u){t=e.getType(t);u=e.getType(u);return"null"===t||"null"===u?!0:"undefined"===t||"undefined"===u?!1:t===u}let c=new Map,f=new Map,g=new WeakMap,h=new WeakMap;e.DefendHandler={};const m=
new Set(["then","splice"]);function k(t){console.warn("[Defence] "+t+" @",e.GetCallStack())}e.DefendHandler.get=function(t,u){u in t||"symbol"===typeof u||m.has(u)||k(`Accessed missing property '${u}' from defended object '${e.getName(t)}', returning undefined`);h.has(t)&&"symbol"!==typeof u&&!m.has(u)&&k(`Accessed property '${u}' on a released object '${e.getName(t)}'\nObject was originally released at: ${h.get(t)})\nCall stack at access: `);return t[u]};e.DefendHandler.set=function(t,u,w){u in t||
c.has(t)||k(`Set non-existent property '${u}' to '${w}' on defended object '${e.getName(t)}'`);d(t[u],w)||c.has(t)||k(`Set '${e.getType(t[u])}' property '${u}' to type '${e.getType(w)}' on defended object '${e.getName(t)}'`);h.has(t)&&k(`Set property '${u}' on a released object '${e.getName(t)}'\nObject was originally released at: ${h.get(t)})\nCall stack at access: `);t[u]=w;return!0};e.DefendHandler.deleteProperty=function(t,u){throw new ReferenceError(`Cannot delete property '${u}' from defended object '${e.getName(t)}'`);
};e.DefendHandler.defineProperty=function(t,u,w){throw new ReferenceError(`Cannot define property '${u}' on defended object '${e.getName(t)}'`);};e.DefendHandler.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${e.getName(t)}'`);};let a=-1;function b(){a=-1;if(0<c.size||0<f.size){let t=[...new Set([...c.keys()].map(u=>e.getName(u)))].join();console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`);
c.clear();f.clear()}}e.DefendedBase=class{constructor(){if(e.isDebugDefend&&e.Supports.Proxies){var t=new.target;t=Object.create(t.prototype);var u=new Proxy(t,e.DefendHandler);c.set(t,u);f.set(u,t);g.set(u,t);-1===a&&(a=requestAnimationFrame(b));return u}}};e.debugDefend=function(t){if(e.isDebugDefend&&e.Supports.Proxies&&t instanceof e.DefendedBase){if(!f.has(t))return t;let u=f.get(t);f.delete(t);c.delete(u);return t}return e.isDebug?Object.seal(t):t};e.New=function(t,...u){let w;try{w=new t(...u)}catch(x){throw f.clear(),
c.clear(),x;}e.isDebugDefend&&r(t,w);return e.debugDefend(w)};e.Release=function(t){(t=g.get(t))&&h.set(t,e.GetCallStack())};e.WasReleased=function(t){return(t=g.get(t))?!!h.get(t):!1};let l=new Map;function p(t){let u=new Set;for(let w in t)u.add(w);return u}function r(t,u){u=p(u);let w=l.get(t);if(w){let x=[];for(let A of w.values())u.has(A)?u.delete(A):x.push(A);e.appendArray(x,[...u]);x.length&&console.warn(`[Defence] '${e.getName(t)}' constructor creates inconsistent properties: ${x.join(", ")}`)}else l.set(t,
u)}e.PerfMark=class{constructor(t){this._name="";t&&this.start(t)}start(t){this._name=t;performance.mark(this._name+"-Start")}end(){performance.mark(this._name+"-End");performance.measure(this._name,this._name+"-Start",this._name+"-End")}next(t){this.end();this._name=t;performance.mark(this._name+"-Start")}}}"use strict";
{const e=self.C3,d=2*Math.PI,c=Math.PI/180,f=180/Math.PI;e.wrap=function(m,k,a){m=Math.floor(m);k=Math.floor(k);a=Math.floor(a);return m<k?(m=a-(k-m)%(a-k),m===a?0:m):k+(m-k)%(a-k)};e.mapToRange=function(m,k,a,b,l){return(m-k)*(l-b)/(a-k)+b};e.normalize=function(m,k,a){return(m-k)/(a-k)};e.clamp=function(m,k,a){return m<k?k:m>a?a:m};e.clampAngle=function(m){m%=d;0>m&&(m+=d);return m};e.toRadians=function(m){return m*c};e.toDegrees=function(m){return m*f};e.distanceTo=function(m,k,a,b){return Math.hypot(a-
m,b-k)};e.distanceSquared=function(m,k,a,b){m=a-m;k=b-k;return m*m+k*k};e.angleTo=function(m,k,a,b){return Math.atan2(b-k,a-m)};e.angleDiff=function(m,k){if(m===k)return 0;m=Math.sin(m)*Math.sin(k)+Math.cos(m)*Math.cos(k);return 1<=m?0:-1>=m?Math.PI:Math.acos(m)};e.angleRotate=function(m,k,a){let b=Math.sin(m),l=Math.cos(m),p=Math.sin(k),r=Math.cos(k);return Math.acos(b*p+l*r)>a?0<l*p-b*r?e.clampAngle(m+a):e.clampAngle(m-a):e.clampAngle(k)};e.angleClockwise=function(m,k){return 0>=Math.cos(m)*Math.sin(k)-
Math.sin(m)*Math.cos(k)};e.angleLerp=function(m,k,a,b=0){let l=e.angleDiff(m,k);b*=d;return e.angleClockwise(k,m)?e.clampAngle(m+(l+b)*a):e.clampAngle(m-(l+b)*a)};e.angleLerpClockwise=function(m,k,a,b=0){const l=e.angleDiff(m,k);b*=d;return e.angleClockwise(k,m)?e.clampAngle(m+(l+b)*a):e.clampAngle((d-l+b)*a)};e.angleLerpAntiClockwise=function(m,k,a,b=0){const l=e.angleDiff(m,k);b*=d;return e.angleClockwise(k,m)?e.clampAngle((-d+l-b)*a):e.clampAngle(m-(l+b)*a)};e.lerp=function(m,k,a){return m+a*(k-
m)};e.unlerp=function(m,k,a){return m===k?0:(a-m)/(k-m)};e.relerp=function(m,k,a,b,l){return e.lerp(b,l,e.unlerp(m,k,a))};e.qarp=function(m,k,a,b){return e.lerp(e.lerp(m,k,b),e.lerp(k,a,b),b)};e.cubic=function(m,k,a,b,l){return e.lerp(e.qarp(m,k,a,l),e.qarp(k,a,b,l),l)};e.cosp=function(m,k,a){return(m+k+(m-k)*Math.cos(a*Math.PI))/2};e.isPOT=function(m){return 0<m&&0===(m-1&m)};e.nextHighestPowerOfTwo=function(m){--m;for(let k=1;32>k;k<<=1)m|=m>>k;return m+1};e.roundToNearestFraction=function(m,k){return Math.round(m*
k)/k};e.floorToNearestFraction=function(m,k){return Math.floor(m*k)/k};e.round6dp=function(m){return Math.round(1E6*m)/1E6};e.toFixed=function(m,k){m=m.toFixed(k);for(k=m.length-1;0<=k&&"0"===m.charAt(k);--k);0<=k&&"."===m.charAt(k)&&--k;return 0>k?m:m.substr(0,k+1)};e.PackRGB=function(m,k,a){return e.clamp(m,0,255)|e.clamp(k,0,255)<<8|e.clamp(a,0,255)<<16};e.PackRGBAEx=function(m,k,a,b){m=e.clamp(Math.floor(1024*m),-8192,8191);k=e.clamp(Math.floor(1024*k),-8192,8191);a=e.clamp(Math.floor(1024*a),
-8192,8191);b=e.clamp(Math.floor(1023*b),0,1023);0>m&&(m+=16384);0>k&&(k+=16384);0>a&&(a+=16384);return-(274877906944*m+16777216*k+1024*a+b)};e.PackRGBEx=function(m,k,a){return e.PackRGBAEx(m,k,a,1)};function g(m){return 0===m&&0>1/m}e.GetRValue=function(m){if(0<=m)return(m&255)/255;m=Math.floor(-m/274877906944);8191<m&&(m-=16384);return m/1024};e.GetGValue=function(m){if(0<=m)return((m&65280)>>8)/255;m=Math.floor(-m%274877906944/16777216);8191<m&&(m-=16384);return m/1024};e.GetBValue=function(m){if(0<=
m)return((m&16711680)>>16)/255;m=Math.floor(-m%16777216/1024);8191<m&&(m-=16384);return m/1024};e.GetAValue=function(m){return g(m)?0:0<=m?1:Math.floor(-m%1024)/1023};e.greatestCommonDivisor=function(m,k){m=Math.floor(m);for(k=Math.floor(k);0!==k;){let a=k;k=m%k;m=a}return m};const h=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];e.getAspectRatio=function(m,k){m=Math.floor(m);k=Math.floor(k);if(m===k)return[1,1];for(var a of h){let b=m/a[0]*a[1];if(1>Math.abs(k-b))return a.slice(0);
b=m/a[1]*a[0];if(1>Math.abs(k-b))return[a[1],a[0]]}a=e.greatestCommonDivisor(m,k);return[m/a,k/a]};e.segmentsIntersect=function(m,k,a,b,l,p,r,t){var u=Math.min(m,a),w=Math.max(l,r);if(Math.max(m,a)<Math.min(l,r)||u>w)return!1;u=Math.min(k,b);w=Math.max(p,t);if(Math.max(k,b)<Math.min(p,t)||u>w)return!1;u=l-m+r-a;w=p-k+t-b;m=a-m;k=b-k;l=r-l;p=t-p;t=Math.abs(k*l-p*m);return Math.abs(l*w-p*u)>t?!1:Math.abs(m*w-k*u)<=t};e.segmentsIntersectPreCalc=function(m,k,a,b,l,p,r,t,u,w,x,A){const E=Math.max(u,x);
if(p<Math.min(u,x)||l>E)return!1;l=Math.max(w,A);if(t<Math.min(w,A)||r>l)return!1;r=u-m+x-a;t=w-k+A-b;m=a-m;k=b-k;u=x-u;w=A-w;A=Math.abs(k*u-w*m);return Math.abs(u*t-w*r)>A?!1:Math.abs(m*t-k*r)<=A};e.segmentIntersectsQuad=function(m,k,a,b,l){const p=Math.min(m,a),r=Math.max(m,a),t=Math.min(k,b),u=Math.max(k,b),w=l.getTlx(),x=l.getTly(),A=l.getTrx(),E=l.getTry(),y=l.getBrx(),B=l.getBry(),H=l.getBlx();l=l.getBly();return e.segmentsIntersectPreCalc(m,k,a,b,p,r,t,u,w,x,A,E)||e.segmentsIntersectPreCalc(m,
k,a,b,p,r,t,u,A,E,y,B)||e.segmentsIntersectPreCalc(m,k,a,b,p,r,t,u,y,B,H,l)||e.segmentsIntersectPreCalc(m,k,a,b,p,r,t,u,H,l,w,x)};e.segmentIntersectsAnyN=function(m,k,a,b,l){const p=Math.min(m,a),r=Math.max(m,a),t=Math.min(k,b),u=Math.max(k,b);let w=0;for(let x=l.length-4;w<=x;w+=2)if(e.segmentsIntersectPreCalc(m,k,a,b,p,r,t,u,l[w],l[w+1],l[w+2],l[w+3]))return!0;return e.segmentsIntersectPreCalc(m,k,a,b,p,r,t,u,l[w],l[w+1],l[0],l[1])};e.rayIntersect=function(m,k,a,b,l,p,r,t){a-=m;p=t-p;const u=a*
p-(b-k)*(r-l);if(0===u)return 2;b=((k-b)*(r-m)+a*(t-k))/u;return 0<b&&1.000001>b?(p*(r-m)+(l-r)*(t-k))/u:2};e.rayIntersectExtended=function(m,k,a,b,l,p,r,t,u){const w=(r-l)*u;u*=t-p;return e.rayIntersect(m,k,a,b,l-w,p-u,r+w,t+u)};e.isPointInTriangleInclusive=function(m,k,a,b,l,p,r,t){l-=a;p-=b;r-=a;t-=b;m-=a;a=k-b;k=l*l+p*p;b=l*r+p*t;l=l*m+p*a;p=r*r+t*t;r=r*m+t*a;t=1/(k*p-b*b);p=(p*l-b*r)*t;l=(k*r-b*l)*t;return 0<=p&&0<=l&&1>=p+l};e.triangleCartesianToBarycentric=function(m,k,a,b,l,p,r,t){l-=a;p-=
b;r-=a;t-=b;m-=a;const u=k-b;k=l*l+p*p;b=l*r+p*t;a=r*r+t*t;l=m*l+u*p;p=m*r+u*t;r=k*a-b*b;t=(a*l-b*p)/r;l=(k*p-b*l)/r;return[1-t-l,t,l]};e.triangleBarycentricToCartesian=function(m,k,a,b,l,p,r,t,u){return[m*b+k*p+a*t,m*l+k*r+a*u]}}"use strict";
{const e=self.C3;let d=null,c="";if("undefined"!==typeof document){d=document;const a=document.querySelector("base");if(c=a&&a.hasAttribute("href")?a.getAttribute("href"):"")c.startsWith("/")&&(c=c.substr(1)),c.endsWith("/")||(c+="/")}e.GetBaseHref=function(){return c};e.GetBaseURL=function(){if(!d)return"";const a=d.location;return e.GetPathFromURL(a.origin+a.pathname)+c};e.GetPathFromURL=function(a){if(!a.length||a.endsWith("/")||a.endsWith("\\"))return a;const b=Math.max(a.lastIndexOf("/"),a.lastIndexOf("\\"));
return-1===b?"":a.substr(0,b+1)};e.GetFilenameFromURL=function(a){if(!a.length)return a;if(a.endsWith("/")||a.endsWith("\\"))return"";const b=Math.max(a.lastIndexOf("/"),a.lastIndexOf("\\"));return-1===b?a:a.substr(b+1)};e.DataTransferHasFiles=function(a){if(a.types)for(let b=0;b<a.types.length;b++)if("Files"===a.types[b]||"application/x-c3-file"===a.types[b])return!0;return!1};e.DataTransferFilterFiles=async function(a,b){a=Array.from(a.files).filter(l=>0!==l.size).filter(l=>b(l)).map(async l=>{try{return await e.CloneFile(l)}catch(p){return null}});
return(await Promise.all(a)).filter(l=>l)};e.IsFileAnImage=function(a){return a.type?-1!==a.type.search(/image\/.*/):-1!==e.MimeType.GetForFileExtension(e.GetFileExtension(a.name)).GetString().search(/image\/.*/)};e.IsFileAnSVG=function(a){return"image/svg+xml"===a.type};e.IsFileAMultiImageContainer=function(a){return a.type?e.MimeType.Get(a.type).IsAnimatedImage():e.MimeType.GetForFileExtension(e.GetFileExtension(a.name)).IsAnimatedImage()};e.GetFileExtension=function(a){let b=a.lastIndexOf(".");
return 1>b?"":a.substr(b)};e.GetFileNamePart=function(a){let b=a.lastIndexOf(".");return 1>b?a:a.substr(0,b)};e.NormalizeFileSeparator=function(a){return a.replace(/\\/g,"/")};e.ParseFilePath=function(a){a=e.NormalizeFileSeparator(a);let b=/^\w:\//.exec(a);b?(b=b[0],a=a.slice(3),"/"!==a[0]&&(a="/"+a)):b="";a=a.replace(/\/{2,}/g,"/");1<a.length&&"/"===a.slice(-1)&&(a=a.slice(0,-1));var l=a.lastIndexOf("/")+1;let p="",r=a,t="";0<l&&(p=a.slice(0,l),r=a.slice(l));a=r;l=r.lastIndexOf(".");0<l&&(t=r.slice(l),
a=r.slice(0,-t.length));return{dir:p,base:r,name:a,root:b,ext:t,full:b+p+r}};e.Wait=function(a,b){return new Promise((l,p)=>{self.setTimeout(l,a,b)})};e.swallowException=function(a){try{a()}catch(b){e.isDebug&&console.warn("Swallowed exception: ",b)}};e.noop=function(){};e.equalsNoCase=function(a,b){if("string"!==typeof a||"string"!==typeof b)return!1;if(a===b)return!0;a=a.normalize();b=b.normalize();return a.length!==b.length?!1:a.toLowerCase()===b.toLowerCase()};e.equalsCase=function(a,b){return"string"!==
typeof a||"string"!==typeof b?!1:a===b?!0:a.normalize()===b.normalize()};e.typedArraySet16=function(a,b,l){a[l++]=b[0];a[l++]=b[1];a[l++]=b[2];a[l++]=b[3];a[l++]=b[4];a[l++]=b[5];a[l++]=b[6];a[l++]=b[7];a[l++]=b[8];a[l++]=b[9];a[l++]=b[10];a[l++]=b[11];a[l++]=b[12];a[l++]=b[13];a[l++]=b[14];a[l]=b[15]};e.truncateArray=function(a,b){a.length=b};e.clearArray=function(a){a&&0!==a.length&&e.truncateArray(a,0)};e.clear2DArray=function(a){if(a){for(let b=0;b<a.length;b++)e.truncateArray(a[b],0);e.truncateArray(a,
0)}};e.extendArray=function(a,b,l){b|=0;var p=a.length;if(!(b<=p))for(;p<b;++p)a.push(l)};e.resizeArray=function(a,b,l){b|=0;const p=a.length;b<p?e.truncateArray(a,b):b>p&&e.extendArray(a,b,l)};e.shallowAssignArray=function(a,b){e.clearArray(a);e.appendArray(a,b)};e.appendArray=function(a,b){if(1E4>b.length)a.push(...b);else for(let l=0,p=b.length;l<p;++l)a.push(b[l])};e.arrayRemove=function(a,b){b=Math.floor(b);if(!(0>b||b>=a.length)){for(var l=a.length-1;b<l;++b)a[b]=a[b+1];e.truncateArray(a,l)}};
e.arrayFindRemove=function(a,b){b=a.indexOf(b);0<=b&&a.splice(b,1)};e.arraysEqual=function(a,b){let l=a.length;if(b.length!==l)return!1;for(let p=0;p<l;++p)if(a[p]!==b[p])return!1;return!0};e.arrayFilterOut=function(a,b){let l=[],p=0;for(let r=0,t=a.length;r<t;++r){let u=a[r];b(u)?l.push(u):(a[p]=u,++p)}e.truncateArray(a,p);return l};e.arrayRemoveAllInSet=function(a,b){const l=a.length;let p=0;for(let r=0,t=a.length;r<t;++r){let u=a[r];b.has(u)||(a[p++]=u)}e.truncateArray(a,p);return l-p};e.isArrayIndexInBounds=
function(a,b){return a!==Math.floor(a)?!1:0<=a&&a<b.length};e.validateArrayIndex=function(a,b){if(!e.isArrayIndexInBounds(a,b))throw new RangeError("array index out of bounds");};e.cloneArray=function(a){return a.slice()};e.deepCloneArray=function(a,b){let l=[];for(let p of a)if(e.IsObject(p)){a=b(p);if(!a)throw Error("missing clone");if(a.constructor!==p.constructor)throw Error("object is not a clone");l.push(a)}else e.IsArray(p)?l.push(e.deepCloneArray(p,b)):l.push(p);return l};e.clone2DArray=function(a){let b=
[];for(let l of a)b.push(l.slice());return b};e.mergeSets=function(a,b){return new Set([...a,...b])};e.mergeSetsInPlace=function(a,b){for(const l of b)a.add(l);return a};e.first=function(a){for(let b of a)return b;return null};e.xor=function(a,b){return!a!==!b};e.compare=function(a,b,l){switch(b){case 0:return a===l;case 1:return a!==l;case 2:return a<l;case 3:return a<=l;case 4:return a>l;case 5:return a>=l;default:return!1}};e.hasAnyOwnProperty=function(a){for(let b in a)if(a.hasOwnProperty(b))return!0;
return!1};e.PromiseAllWithProgress=function(a,b){return a.length?new Promise((l,p)=>{const r=[];let t=0,u=!1;for(let w=0,x=a.length;w<x;++w)r.push(void 0),a[w].then(A=>{u||(r[w]=A,++t,t===a.length?l(r):b(t,a.length))}).catch(A=>{u=!0;p(A)})}):Promise.resolve([])};let f=[];e.AddLibraryMemoryCallback=function(a){f.push(a)};e.GetEstimatedLibraryMemoryUsage=function(){let a=0;for(let b of f){let l=b();a+=l}return Math.floor(a)};let g=1;const h=new Map,m=new MessageChannel;m.port2.onmessage=function(a){const b=
a.data,l=h.get(b);h.delete(b);l&&l(a.timeStamp)};e.RequestUnlimitedAnimationFrame=function(a){const b=g++;h.set(b,a);m.port1.postMessage(b);return b};e.CancelUnlimitedAnimationFrame=function(a){h.delete(a)};e.PostTask=e.RequestUnlimitedAnimationFrame;e.WaitForNextTask=function(){return new Promise(a=>e.PostTask(a))};const k=new Set;e.RequestPostAnimationFrame=function(a){const b=self.requestAnimationFrame(async l=>{await e.WaitForNextTask();k.has(b)&&(k.delete(b),a(l))});k.add(b);return b};e.CancelPostAnimationFrame=
function(a){k.has(a)&&(self.cancelAnimationFrame(a),k.delete(a))}}"use strict";
{const e=self.C3;e.IsAbsoluteURL=function(d){return/^(?:[a-z]+:)?\/\//.test(d)||"data:"===d.substr(0,5)||"blob:"===d.substr(0,5)};e.IsRelativeURL=function(d){return!e.IsAbsoluteURL(d)};e.ThrowIfNotOk=function(d){if(!d.ok)throw Error(`fetch '${d.url}' response returned ${d.status} ${d.statusText}`);};e.FetchOk=function(d,c){return fetch(d,c).then(f=>{e.ThrowIfNotOk(f);return f})};e.FetchText=function(d){return e.FetchOk(d).then(c=>c.text())};e.FetchJson=function(d){return e.FetchOk(d).then(c=>c.json())};
e.FetchBlob=function(d){return e.FetchOk(d).then(c=>c.blob())};e.FetchArrayBuffer=function(d){return e.FetchOk(d).then(c=>c.arrayBuffer())};e.FetchImage=function(d){return new Promise((c,f)=>{const g=new Image;g.onload=()=>c(g);g.onerror=h=>f(h);g.src=d})};e.BlobToArrayBuffer=function(d){return"function"===typeof d.arrayBuffer?d.arrayBuffer():new Promise((c,f)=>{const g=new FileReader;g.onload=()=>c(g.result);g.onerror=()=>f(g.error);g.readAsArrayBuffer(d)})};e.BlobToString=function(d){return"function"===
typeof d.text?d.text():new Promise((c,f)=>{const g=new FileReader;g.onload=()=>c(g.result);g.onerror=()=>f(g.error);g.readAsText(d)})};e.BlobToJson=function(d){return e.BlobToString(d).then(c=>JSON.parse(c))};e.BlobToImage=async function(d,c){d=URL.createObjectURL(d);try{const f=await e.FetchImage(d);URL.revokeObjectURL(d);d="";c&&"function"===typeof f.decode&&await f.decode();return f}finally{d&&URL.revokeObjectURL(d)}};e.CreateCanvas=function(d,c){if("undefined"!==typeof document&&"function"===
typeof document.createElement){const f=document.createElement("canvas");f.width=d;f.height=c;return f}return new OffscreenCanvas(d,c)};e.CanvasToBlob=function(d,c,f){"number"!==typeof f&&(f=1);c=c||"image/png";f=e.clamp(f,0,1);return d.toBlob?new Promise(g=>d.toBlob(g,c,f)):d.convertToBlob?d.convertToBlob({type:c,quality:f}):e.Asyncify(()=>e.CanvasToBlobSync(d,c,f))};e.CanvasToBlobSync=function(d,c,f){"number"!==typeof f&&(f=1);c=c||"image/png";f=e.clamp(f,0,1);return e.DataURIToBinaryBlobSync(d.toDataURL(c,
f))};e.DataURIToBinaryBlobSync=function(d){d=e.ParseDataURI(d);return e.BinaryStringToBlob(d.data,d.mime_type)};e.ParseDataURI=function(d){if("data:"!==d.substr(0,5))throw new URIError("expected data: uri");var c=d.indexOf(",");if(0>c)throw new URIError("expected comma in data: uri");var f=d.substring(5,c);d=d.substring(c+1);c=f.split(";");f=c[0]||"";let g=c[2];d="base64"===c[1]||"base64"===g?atob(d):decodeURIComponent(d);return{mime_type:f,data:d}};e.BinaryStringToBlob=function(d,c){var f=d.length;
let g=f>>2,h=new Uint8Array(f),m=new Uint32Array(h.buffer,0,g),k,a;for(a=k=0;k<g;++k)m[k]=d.charCodeAt(a++)|d.charCodeAt(a++)<<8|d.charCodeAt(a++)<<16|d.charCodeAt(a++)<<24;for(f&=3;f--;)h[a]=d.charCodeAt(a),++a;return c?new Blob([h],{type:c}):new Blob([h])};e.DrawableToBlob=function(d,c,f){const g=e.CreateCanvas(d.width,d.height);g.getContext("2d").drawImage(d,0,0);return e.CanvasToBlob(g,c,f)};e.ImageDataToBlobSync=function(d,c,f){const g=e.CreateCanvas(d.width,d.height);g.getContext("2d").putImageData(d,
0,0);return e.CanvasToBlobSync(g,c,f)};e.ImageDataToBlob=function(d,c,f){if(e.Supports.ImageBitmapOptions)return createImageBitmap(d,{premultiplyAlpha:"none"}).then(g=>e.DrawableToBlob(g,c,f));if(e.Supports.ImageBitmap)return createImageBitmap(d).then(g=>e.DrawableToBlob(g,c,f));{const g=e.CreateCanvas(d.width,d.height);g.getContext("2d").putImageData(d,0,0);return e.CanvasToBlob(g,c,f)}};e.CopySet=function(d,c){d.clear();for(const f of c)d.add(f)};e.MapToObject=function(d){const c=Object.create(null);
for(const [f,g]of d.entries())c[f]=g;return c};e.ObjectToMap=function(d,c){c.clear();for(const [f,g]of Object.entries(d))c.set(f,g)};e.ToSuperJSON=function f(c){if("object"===typeof c&&null!==c){if(c instanceof Set)return{_c3type_:"set",data:[...c].map(g=>f(g))};if(c instanceof Map)return{_c3type_:"map",data:[...c].map(g=>[g[0],f(g[1])])};{const g=Object.create(null);for(const [h,m]of Object.entries(c))g[h]=f(m);return g}}return c};e.FromSuperJSON=function g(f){if("object"===typeof f&null!==f){if("set"===
f._c3type_)return new Set(f.data.map(h=>g(h)));if("map"===f._c3type_)return new Map(f.data.map(h=>[h[0],g(h[1])]));{const h=Object.create(null);for(const [m,k]of Object.entries(f))h[m]=g(k);return h}}return f};e.CSSToCamelCase=function(f){let g="",h=!1;for(const m of f)"-"===m?h=!0:h?(g+=m.toUpperCase(),h=!1):g+=m;return g};e.IsIterator=function(f){return"object"===typeof f&&"function"===typeof f.next};e.MakeFilledArray=function(f,g){const h=[];if("function"===typeof g)for(var m=0;m<f;++m)h.push(g());
else for(m=0;m<f;++m)h.push(g);return h}}"use strict";
{const e=self.C3,d=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?/i,c=/([0-9.]+),([0-9.]+)%?,([0-9.]+)%?,([0-9.])/i;function f(h){return 0===h.length?"00":1===h.length?"0"+h:h}function g(h,m,k){0>k&&(k+=1);1<k&&--k;return k<1/6?h+6*(m-h)*k:.5>k?m:k<2/3?h+(m-h)*(2/3-k)*6:h}e.Color=class{constructor(h,m,k,a){this._a=this._b=this._g=this._r=0;h instanceof e.Color?this.set(h):this.setRgba(h||0,m||0,k||0,a||0)}setRgb(h,m,k){this._r=+h;this._g=+m;this._b=+k;this.clamp();return this}setRgba(h,m,k,a){this._r=+h;this._g=
+m;this._b=+k;this._a=+a;this.clamp();return this}set(h){this._r=h._r;this._g=h._g;this._b=h._b;this._a=h._a;return this}copy(h){return this.set(h)}add(h){this._r+=h._r;this._g+=h._g;this._b+=h._b;this._a+=h._a;this.clamp()}addRgb(h,m,k,a=0){this._r+=+h;this._g+=+m;this._b+=+k;this._a+=+a;this.clamp()}diff(h){this.setR(Math.max(this._r,h._r)-Math.min(this._r,h._r));this.setG(Math.max(this._g,h._g)-Math.min(this._g,h._g));this.setB(Math.max(this._b,h._b)-Math.min(this._b,h._b));this.setA(Math.max(this._a,
h._a)-Math.min(this._a,h._a));this.clamp()}copyRgb(h){this._r=h._r;this._g=h._g;this._b=h._b}setR(h){this._r=e.clamp(+h,0,1)}getR(){return this._r}setG(h){this._g=e.clamp(+h,0,1)}getG(){return this._g}setB(h){this._b=e.clamp(+h,0,1)}getB(){return this._b}setA(h){this._a=e.clamp(+h,0,1)}getA(){return this._a}clone(){return e.New(e.Color,this._r,this._g,this._b,this._a)}toArray(){return[this._r,this._g,this._b,this._a]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(h,m){h[m++]=
this._r;h[m++]=this._g;h[m++]=this._b;h[m]=this._a}equals(h){return this._r===h._r&&this._g===h._g&&this._b===h._b&&this._a===h._a}equalsIgnoringAlpha(h){return this._r===h._r&&this._g===h._g&&this._b===h._b}equalsRgb(h,m,k){return this._r===h&&this._g===m&&this._b===k}equalsRgba(h,m,k,a){return this._r===h&&this._g===m&&this._b===k&&this._a===a}multiply(h){this._r*=h._r;this._g*=h._g;this._b*=h._b;this._a*=h._a}multiplyAlpha(h){this._r*=h;this._g*=h;this._b*=h;this._a*=h}premultiply(){this._r*=this._a;
this._g*=this._a;this._b*=this._a;return this}unpremultiply(){this._r/=this._a;this._g/=this._a;this._b/=this._a;return this}clamp(){this._r=e.clamp(this._r,0,1);this._g=e.clamp(this._g,0,1);this._b=e.clamp(this._b,0,1);this._a=e.clamp(this._a,0,1);return this}setFromRgbValue(h){this._r=e.GetRValue(h);this._g=e.GetGValue(h);this._b=e.GetBValue(h);this._a=e.GetAValue(h)}getCssRgb(h,m,k){h=e.IsFiniteNumber(h)?h:this.getR();m=e.IsFiniteNumber(m)?m:this.getG();k=e.IsFiniteNumber(k)?k:this.getB();return`rgb(${100*
h}%, ${100*m}%, ${100*k}%)`}getCssRgba(h,m,k,a){h=e.IsFiniteNumber(h)?h:this.getR();m=e.IsFiniteNumber(m)?m:this.getG();k=e.IsFiniteNumber(k)?k:this.getB();a=e.IsFiniteNumber(a)?a:this.getA();return`rgba(${100*h}%, ${100*m}%, ${100*k}%, ${a})`}toHexString(){const h=Math.round(255*this.getR()),m=Math.round(255*this.getG()),k=Math.round(255*this.getB());return"#"+f(h.toString(16))+f(m.toString(16))+f(k.toString(16))}parseHexString(h){if("string"!==typeof h)return!1;h=h.trim();"#"===h.charAt(0)&&(h=
h.substr(1));let m,k;if(3===h.length)m=parseInt(h[0],16)/15,k=parseInt(h[1],16)/15,h=parseInt(h[2],16)/15;else if(6===h.length)m=parseInt(h.substr(0,2),16)/255,k=parseInt(h.substr(2,2),16)/255,h=parseInt(h.substr(4,2),16)/255;else return!1;isFinite(m)&&this.setR(m);isFinite(k)&&this.setG(k);isFinite(h)&&this.setB(h);this.setA(1);return!0}toCommaSeparatedRgb(){const h=Math.round(255*this.getR()),m=Math.round(255*this.getG()),k=Math.round(255*this.getB());return`${h}, ${m}, ${k}`}toRgbArray(){const h=
Math.round(255*this.getR()),m=Math.round(255*this.getG()),k=Math.round(255*this.getB());return[h,m,k]}parseCommaSeparatedRgb(h){if("string"!==typeof h)return!1;h=h.replace(/^rgb\(|\)|%/,"");var m=h.split(",");if(3>m.length)return!1;h=parseInt(m[0].trim(),10)/255;const k=parseInt(m[1].trim(),10)/255;m=parseInt(m[2].trim(),10)/255;isFinite(h)&&this.setR(h);isFinite(k)&&this.setG(k);isFinite(m)&&this.setB(m);this.setA(1);return!0}parseCommaSeparatedPercentageRgb(h){if("string"!==typeof h)return!1;h=
h.replace(/^rgb\(|\)|%/,"");var m=h.split(",");if(3>m.length)return!1;h=parseInt(m[0].trim(),10)/100;const k=parseInt(m[1].trim(),10)/100;m=parseInt(m[2].trim(),10)/100;isFinite(h)&&this.setR(h);isFinite(k)&&this.setG(k);isFinite(m)&&this.setB(m);this.setA(1);return!0}parseCommaSeparatedRgba(h){if("string"!==typeof h)return!1;h=h.replace(/^rgba\(|\)|%/,"");var m=h.split(",");if(4>m.length)return!1;h=parseInt(m[0].trim(),10)/255;const k=parseInt(m[1].trim(),10)/255,a=parseInt(m[2].trim(),10)/255;m=
parseFloat(m[3].trim());isFinite(h)&&this.setR(h);isFinite(k)&&this.setG(k);isFinite(a)&&this.setB(a);isFinite(m)&&this.setA(m);return!0}parseCommaSeparatedPercentageRgba(h){if("string"!==typeof h)return!1;h=h.replace(/^rgba\(|\)|%/,"");var m=h.split(",");if(4>m.length)return!1;h=parseInt(m[0].trim(),10)/100;const k=parseInt(m[1].trim(),10)/100,a=parseInt(m[2].trim(),10)/100;m=parseFloat(m[3].trim());isFinite(h)&&this.setR(h);isFinite(k)&&this.setG(k);isFinite(a)&&this.setB(a);isFinite(m)&&this.setA(m);
return!0}parseString(h){if("string"!==typeof h)return!1;h=h.replace(/\s+/,"");if(h.includes(",")){if(h.startsWith("rgb("))return h.includes("%")?this.parseCommaSeparatedPercentageRgb(h):this.parseCommaSeparatedRgb(h);if(h.startsWith("rgba("))return h.includes("%")?this.parseCommaSeparatedPercentageRgba(h):this.parseCommaSeparatedRgba(h);if(h.startsWith("hsl(")||h.startsWith("hsla("))return this.parseHSLString(h);{const m=h.split(",");if(h.includes("%")){if(3===m.length)return this.parseCommaSeparatedPercentageRgb(h);
if(4===m.length)return this.parseCommaSeparatedPercentageRgba(h)}else{if(3===m.length)return this.parseCommaSeparatedRgb(h);if(4===m.length)return this.parseCommaSeparatedRgba(h)}return!1}}return this.parseHexString(h)}toJSON(){return[this._r,this._g,this._b,this._a]}setFromHSLA(h,m,k,a){h%=360;m=e.clamp(m,0,100);k=e.clamp(k,0,100);a=e.clamp(a,0,1);h/=360;m/=100;k/=100;if(0===m)k=m=h=k;else{const b=.5>k?k*(1+m):k+m-k*m,l=2*k-b;k=g(l,b,h+1/3);m=g(l,b,h);h=g(l,b,h-1/3)}this.setR(k);this.setG(m);this.setB(h);
this.setA(a);return this}parseHSLString(h){var m=h.replace(/ |hsl|hsla|\(|\)|;/gi,"");h=d.exec(m);m=c.exec(m);return h&&4===h.length?(this.setFromHSLA(+h[1],+h[2],+h[3],1),!0):m&&5===m.length?(this.setFromHSLA(+h[1],+h[2],+h[3],+h[4]),!0):!1}toHSLAString(){var h=this._r;const m=this._g,k=this._b,a=this._a,b=e.Color.GetHue(h,m,k),l=e.Color.GetSaturation(h,m,k);h=e.Color.GetLuminosity(h,m,k);return`hsla(${b}, ${l}%, ${h}%, ${a})`}toHSLAArray(){const h=this._r,m=this._g,k=this._b;return[e.Color.GetHue(h,
m,k),e.Color.GetSaturation(h,m,k),e.Color.GetLuminosity(h,m,k),this._a]}setFromJSON(h){!Array.isArray(h)||3>h.length||(this._r=h[0],this._g=h[1],this._b=h[2],this._a=4<=h.length?h[3]:1)}set r(h){this.setR(h)}get r(){return this.getR()}set g(h){this.setG(h)}get g(){return this.getG()}set b(h){this.setB(h)}get b(){return this.getB()}set a(h){this.setA(h)}get a(){return this.getA()}setAtIndex(h,m){switch(h){case 0:this.setR(m);break;case 1:this.setG(m);break;case 2:this.setB(m);break;case 3:this.setA(m);
break;default:throw new RangeError("invalid color index");}}getAtIndex(h){switch(h){case 0:return this.getR();case 1:return this.getG();case 2:return this.getB();case 3:return this.getA();default:throw new RangeError("invalid color index");}}static DiffChannel(h,m){return e.clamp(Math.max(h,m)-Math.min(h,m),0,1)}static Diff(h,m){const k=new e.Color;k.setR(Math.max(h._r,m._r)-Math.min(h._r,m._r));k.setG(Math.max(h._g,m._g)-Math.min(h._g,m._g));k.setB(Math.max(h._b,m._b)-Math.min(h._b,m._b));k.setA(Math.max(h._a,
m._a)-Math.min(h._a,m._a));return k}static DiffNoAlpha(h,m){const k=new e.Color(0,0,0,1);k.setR(Math.max(h._r,m._r)-Math.min(h._r,m._r));k.setG(Math.max(h._g,m._g)-Math.min(h._g,m._g));k.setB(Math.max(h._b,m._b)-Math.min(h._b,m._b));return k}static GetHue(h,m,k){const a=Math.max(h,m,k),b=Math.min(h,m,k);if(a===b)return 0;let l=0;switch(a){case h:l=(m-k)/(a-b)+(m<k?6:0);break;case m:l=(k-h)/(a-b)+2;break;case k:l=(h-m)/(a-b)+4}return Math.round(l/6*360)}static GetSaturation(h,m,k){const a=Math.max(h,
m,k);h=Math.min(h,m,k);if(a===h)return 0;m=a-h;return Math.round(100*(.5<(a+h)/2?m/(2-a-h):m/(a+h)))}static GetLuminosity(h,m,k){const a=Math.max(h,m,k);return a?Math.round((a+Math.min(h,m,k))/2*100):0}};e.Color.White=Object.freeze(e.New(e.Color,1,1,1,1));e.Color.Black=Object.freeze(e.New(e.Color,0,0,0,1));e.Color.TransparentBlack=Object.freeze(e.New(e.Color,0,0,0,0))}"use strict";
{const e=self.C3;e.Vector2=class{constructor(d,c){this._y=this._x=0;d instanceof e.Vector2?this.copy(d):this.set(d||0,c||0)}set(d,c){this._x=+d;this._y=+c}copy(d){this._x=d._x;this._y=d._y}equals(d){return this._x===d._x&&this._y===d._y}setX(d){this._x=+d}getX(){return this._x}setY(d){this._y=+d}getY(){return this._y}toArray(){return[this._x,this._y]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(d,c){d[c++]=this._x;d[c]=this._y}offset(d,c){this._x+=+d;this._y+=+c}scale(d,
c){this._x*=d;this._y*=c}round(){this._x=Math.round(this._x);this._y=Math.round(this._y)}floor(){this._x=Math.floor(this._x);this._y=Math.floor(this._y)}ceil(){this._x=Math.ceil(this._x);this._y=Math.ceil(this._y)}angle(){return e.angleTo(0,0,this._x,this._y)}lengthSquared(){return this._x*this._x+this._y*this._y}length(){return Math.sqrt(this.lengthSquared())}rotatePrecalc(d,c){const f=this._x*c-this._y*d;this._y=this._y*c+this._x*d;this._x=f}rotate(d){0!==d&&this.rotatePrecalc(Math.sin(d),Math.cos(d))}rotateAbout(d,
c,f){0===d||c===this._x&&f===this._y||(this._x-=c,this._y-=f,this.rotatePrecalc(Math.sin(d),Math.cos(d)),this._x+=+c,this._y+=+f)}move(d,c){0!==c&&(this._x+=Math.cos(d)*c,this._y+=Math.sin(d)*c)}normalize(){const d=this.length();0!==d&&1!==d&&(this._x/=d,this._y/=d)}clamp(d,c){this._x=e.clamp(this._x,d,c);this._y=e.clamp(this._y,d,c)}}}"use strict";
{const e=self.C3;e.Rect=class{constructor(d,c,f,g){this._bottom=this._right=this._top=this._left=0;d instanceof e.Rect?this.copy(d):this.set(d||0,c||0,f||0,g||0)}set(d,c,f,g){this._left=+d;this._top=+c;this._right=+f;this._bottom=+g}setWH(d,c,f,g){d=+d;c=+c;this._left=d;this._top=c;this._right=d+ +f;this._bottom=c+ +g}copy(d){this._left=+d._left;this._top=+d._top;this._right=+d._right;this._bottom=+d._bottom}clone(){return new e.Rect(this._left,this._top,this._right,this._bottom)}static Merge(d,c){const f=
new e.Rect;f.setLeft(Math.min(d._left,c._left));f.setTop(Math.min(d._top,c._top));f.setRight(Math.max(d._right,c._right));f.setBottom(Math.max(d._bottom,c._bottom));return f}static FromObject(d){return new e.Rect(d.left,d.top,d.right,d.bottom)}equals(d){return this._left===d._left&&this._top===d._top&&this._right===d._right&&this._bottom===d._bottom}setLeft(d){this._left=+d}getLeft(){return this._left}setTop(d){this._top=+d}getTop(){return this._top}setRight(d){this._right=+d}getRight(){return this._right}setBottom(d){this._bottom=
+d}getBottom(){return this._bottom}toArray(){return[this._left,this._top,this._right,this._bottom]}toTypedArray(){return new Float64Array(this.toArray())}toDOMRect(){return new DOMRect(this._left,this._top,this.width(),this.height())}writeToTypedArray(d,c){d[c++]=this._left;d[c++]=this._top;d[c++]=this._right;d[c]=this._bottom}writeAsQuadToTypedArray(d,c){d[c++]=this._left;d[c++]=this._top;d[c++]=this._right;d[c++]=this._top;d[c++]=this._right;d[c++]=this._bottom;d[c++]=this._left;d[c]=this._bottom}width(){return this._right-
this._left}height(){return this._bottom-this._top}midX(){return(this._left+this._right)/2}midY(){return(this._top+this._bottom)/2}offset(d,c){d=+d;c=+c;this._left+=d;this._top+=c;this._right+=d;this._bottom+=c}offsetLeft(d){this._left+=+d}offsetTop(d){this._top+=+d}offsetRight(d){this._right+=+d}offsetBottom(d){this._bottom+=+d}toSquare(d){if("x"!==d)throw Error("invalid axis, only 'x' supported");this._bottom=this._top<this._bottom?this._left<this._right?this._top+this.width():this._top-this.width():
this._left<this._right?this._top-this.width():this._top+this.width()}inflate(d,c){d=+d;c=+c;this._left-=d;this._top-=c;this._right+=d;this._bottom+=c}deflate(d,c){d=+d;c=+c;this._left+=d;this._top+=c;this._right-=d;this._bottom-=c}multiply(d,c){this._left*=d;this._top*=c;this._right*=d;this._bottom*=c}divide(d,c){this._left/=d;this._top/=c;this._right/=d;this._bottom/=c}mirrorAround(d){this._left=+d-this._left;this._right=+d-this._right}flipAround(d){this._top=+d-this._top;this._bottom=+d-this._bottom}swapLeftRight(){const d=
this._left;this._left=this._right;this._right=d}swapTopBottom(){const d=this._top;this._top=this._bottom;this._bottom=d}shuntY(d){const c=this._top;this._top=+d-this._bottom;this._bottom=+d-c}round(){this._left=Math.round(this._left);this._top=Math.round(this._top);this._right=Math.round(this._right);this._bottom=Math.round(this._bottom)}roundInner(){this._left=Math.ceil(this._left);this._top=Math.ceil(this._top);this._right=Math.floor(this._right);this._bottom=Math.floor(this._bottom)}roundOuter(){this._left=
Math.floor(this._left);this._top=Math.floor(this._top);this._right=Math.ceil(this._right);this._bottom=Math.ceil(this._bottom)}floor(){this._left=Math.floor(this._left);this._top=Math.floor(this._top);this._right=Math.floor(this._right);this._bottom=Math.floor(this._bottom)}ceil(){this._left=Math.ceil(this._left);this._top=Math.ceil(this._top);this._right=Math.ceil(this._right);this._bottom=Math.ceil(this._bottom)}clamp(d,c,f,g){this._left<d&&(this._left=+d);this._top<c&&(this._top=+c);this._right>
f&&(this._right=+f);this._bottom>g&&(this._bottom=+g)}clampFlipped(d,c,f,g){this._left<d&&(this._left=+d);this._top>c&&(this._top=+c);this._right>f&&(this._right=+f);this._bottom<g&&(this._bottom=+g)}normalize(){this._left>this._right&&this.swapLeftRight();this._top>this._bottom&&this.swapTopBottom()}intersectsRect(d){return!(d._right<this._left||d._bottom<this._top||d._left>this._right||d._top>this._bottom)}intersectsRectOffset(d,c,f){return!(d._right+c<this._left||d._bottom+f<this._top||d._left+
c>this._right||d._top+f>this._bottom)}containsPoint(d,c){return d>=this._left&&d<=this._right&&c>=this._top&&c<=this._bottom}containsRect(d){return d._left>=this._left&&d._top>=this._top&&d._right<=this._right&&d._bottom<=this._bottom}expandToContain(d){d._left<this._left&&(this._left=+d._left);d._top<this._top&&(this._top=+d._top);d._right>this._right&&(this._right=+d._right);d._bottom>this._bottom&&(this._bottom=+d._bottom)}lerpInto(d){this._left=e.lerp(d._left,d._right,this._left);this._top=e.lerp(d._top,
d._bottom,this._top);this._right=e.lerp(d._left,d._right,this._right);this._bottom=e.lerp(d._top,d._bottom,this._bottom)}}}"use strict";
{const e=self.C3;e.Quad=class{constructor(d,c,f,g,h,m,k,a){this._bly=this._blx=this._bry=this._brx=this._try=this._trx=this._tly=this._tlx=0;d instanceof e.Quad?this.copy(d):this.set(d||0,c||0,f||0,g||0,h||0,m||0,k||0,a||0)}set(d,c,f,g,h,m,k,a){this._tlx=+d;this._tly=+c;this._trx=+f;this._try=+g;this._brx=+h;this._bry=+m;this._blx=+k;this._bly=+a}setRect(d,c,f,g){this.set(d,c,f,c,f,g,d,g)}copy(d){this._tlx=d._tlx;this._tly=d._tly;this._trx=d._trx;this._try=d._try;this._brx=d._brx;this._bry=d._bry;
this._blx=d._blx;this._bly=d._bly}equals(d){return this._tlx===d._tlx&&this._tly===d._tly&&this._trx===d._trx&&this._try===d._try&&this._brx===d._brx&&this._bry===d._bry&&this._blx===d._blx&&this._bly===d._bly}setTlx(d){this._tlx=+d}getTlx(){return this._tlx}setTly(d){this._tly=+d}getTly(){return this._tly}setTrx(d){this._trx=+d}getTrx(){return this._trx}setTry(d){this._try=+d}getTry(){return this._try}setBrx(d){this._brx=+d}getBrx(){return this._brx}setBry(d){this._bry=+d}getBry(){return this._bry}setBlx(d){this._blx=
+d}getBlx(){return this._blx}setBly(d){this._bly=+d}getBly(){return this._bly}toDOMQuad(){return new DOMQuad(new DOMPoint(this._tlx,this._tly),new DOMPoint(this._trx,this._try),new DOMPoint(this._brx,this._bry),new DOMPoint(this._blx,this._bly))}toArray(){return[this._tlx,this._tly,this._trx,this._try,this._brx,this._bry,this._blx,this._bly]}toTypedArray(){return new Float64Array(this.toArray())}writeToTypedArray(d,c){d[c++]=this._tlx;d[c++]=this._tly;d[c++]=this._trx;d[c++]=this._try;d[c++]=this._brx;
d[c++]=this._bry;d[c++]=this._blx;d[c]=this._bly}writeToTypedArray3D(d,c,f){d[c++]=this._tlx;d[c++]=this._tly;d[c++]=f;d[c++]=this._trx;d[c++]=this._try;d[c++]=f;d[c++]=this._brx;d[c++]=this._bry;d[c++]=f;d[c++]=this._blx;d[c++]=this._bly;d[c]=f}offset(d,c){d=+d;c=+c;this._tlx+=d;this._tly+=c;this._trx+=d;this._try+=c;this._brx+=d;this._bry+=c;this._blx+=d;this._bly+=c}round(){this._tlx=Math.round(this._tlx);this._tly=Math.round(this._tly);this._trx=Math.round(this._trx);this._try=Math.round(this._try);
this._brx=Math.round(this._brx);this._bry=Math.round(this._bry);this._blx=Math.round(this._blx);this._bly=Math.round(this._bly)}floor(){this._tlx=Math.floor(this._tlx);this._tly=Math.floor(this._tly);this._trx=Math.floor(this._trx);this._try=Math.floor(this._try);this._brx=Math.floor(this._brx);this._bry=Math.floor(this._bry);this._blx=Math.floor(this._blx);this._bly=Math.floor(this._bly)}ceil(){this._tlx=Math.ceil(this._tlx);this._tly=Math.ceil(this._tly);this._trx=Math.ceil(this._trx);this._try=
Math.ceil(this._try);this._brx=Math.ceil(this._brx);this._bry=Math.ceil(this._bry);this._blx=Math.ceil(this._blx);this._bly=Math.ceil(this._bly)}setFromRect(d){this._tlx=d._left;this._tly=d._top;this._trx=d._right;this._try=d._top;this._brx=d._right;this._bry=d._bottom;this._blx=d._left;this._bly=d._bottom}setFromRotatedRect(d,c){0===c?this.setFromRect(d):this.setFromRotatedRectPrecalc(d,Math.sin(c),Math.cos(c))}setFromRotatedRectPrecalc(d,c,f){const g=d._left*c,h=d._top*c,m=d._right*c;c*=d._bottom;
const k=d._left*f,a=d._top*f,b=d._right*f;d=d._bottom*f;this._tlx=k-h;this._tly=a+g;this._trx=b-h;this._try=a+m;this._brx=b-c;this._bry=d+m;this._blx=k-c;this._bly=d+g}getBoundingBox(d){d.set(Math.min(this._tlx,this._trx,this._brx,this._blx),Math.min(this._tly,this._try,this._bry,this._bly),Math.max(this._tlx,this._trx,this._brx,this._blx),Math.max(this._tly,this._try,this._bry,this._bly))}containsPoint(d,c){var f=this._trx-this._tlx,g=this._try-this._tly;const h=this._brx-this._tlx,m=this._bry-this._tly;
d-=this._tlx;c-=this._tly;var k=f*f+g*g;let a=f*h+g*m;g=f*d+g*c;const b=h*h+m*m,l=h*d+m*c;let p=1/(k*b-a*a);f=(b*g-a*l)*p;k=(k*l-a*g)*p;if(0<=f&&0<k&&1>f+k)return!0;f=this._blx-this._tlx;g=this._bly-this._tly;k=f*f+g*g;a=f*h+g*m;g=f*d+g*c;p=1/(k*b-a*a);f=(b*g-a*l)*p;k=(k*l-a*g)*p;return 0<=f&&0<k&&1>f+k}midX(){return(this._tlx+this._trx+this._brx+this._blx)/4}midY(){return(this._tly+this._try+this._bry+this._bly)/4}intersectsSegment(d,c,f,g){return this.containsPoint(d,c)||this.containsPoint(f,g)?
!0:e.segmentIntersectsQuad(d,c,f,g,this)}intersectsQuad(d){var c=d.midX(),f=d.midY();if(this.containsPoint(c,f))return!0;c=this.midX();f=this.midY();if(d.containsPoint(c,f))return!0;c=this._tlx;f=this._tly;const g=this._trx,h=this._try,m=this._brx,k=this._bry,a=this._blx,b=this._bly;return e.segmentIntersectsQuad(c,f,g,h,d)||e.segmentIntersectsQuad(g,h,m,k,d)||e.segmentIntersectsQuad(m,k,a,b,d)||e.segmentIntersectsQuad(a,b,c,f,d)}mirror(){this._swap(0,2);this._swap(1,3);this._swap(6,4);this._swap(7,
5)}flip(){this._swap(0,6);this._swap(1,7);this._swap(2,4);this._swap(3,5)}diag(){this._swap(2,6);this._swap(3,7)}_swap(d,c){const f=this._getAtIndex(d);this._setAtIndex(d,this._getAtIndex(c));this._setAtIndex(c,f)}_getAtIndex(d){switch(d){case 0:return this._tlx;case 1:return this._tly;case 2:return this._trx;case 3:return this._try;case 4:return this._brx;case 5:return this._bry;case 6:return this._blx;case 7:return this._bly;default:throw new RangeError("invalid quad point index");}}_setAtIndex(d,
c){c=+c;switch(d){case 0:this._tlx=c;break;case 1:this._tly=c;break;case 2:this._trx=c;break;case 3:this._try=c;break;case 4:this._brx=c;break;case 5:this._bry=c;break;case 6:this._blx=c;break;case 7:this._bly=c;break;default:throw new RangeError("invalid quad point index");}}}}"use strict";
{const e=self.C3,d=[0,0,1,0,1,1,0,1],c=e.New(e.Quad);e.CollisionPoly=class extends e.DefendedBase{constructor(f,g=!0){super();f||(f=d);this._ptsArr=Float64Array.from(f);this._bbox=new e.Rect;this._isBboxChanged=!0;this._enabled=g}Release(){}pointsArr(){return this._ptsArr}pointCount(){return this._ptsArr.length/2}setPoints(f){this._ptsArr.length===f.length?this._ptsArr.set(f):this._ptsArr=Float64Array.from(f);this._isBboxChanged=!0}setDefaultPoints(){this.setPoints(d)}copy(f){this.setPoints(f._ptsArr)}setBboxChanged(){this._isBboxChanged=
!0}_updateBbox(){if(this._isBboxChanged){var f=this._ptsArr,g=f[0],h=f[1],m=g,k=h;for(let a=0,b=f.length;a<b;a+=2){const l=f[a],p=f[a+1];l<g&&(g=l);l>m&&(m=l);p<h&&(h=p);p>k&&(k=p)}this._bbox.set(g,h,m,k);this._isBboxChanged=!1}}setFromRect(f,g,h){let m=this._ptsArr;8!==m.length&&(this._ptsArr=m=new Float64Array(8));m[0]=f.getLeft()-g;m[1]=f.getTop()-h;m[2]=f.getRight()-g;m[3]=f.getTop()-h;m[4]=f.getRight()-g;m[5]=f.getBottom()-h;m[6]=f.getLeft()-g;m[7]=f.getBottom()-h;this._bbox.copy(f);0===g&&0===
h||this._bbox.offset(-g,-h);this._isBboxChanged=!1}setFromQuad(f,g,h){c.copy(f);c.offset(g,h);this.setPoints(c.toArray());this._isBboxChanged=!0}transform(f,g,h){let m=0,k=1;0!==h&&(m=Math.sin(h),k=Math.cos(h));this.transformPrecalc(f,g,m,k)}transformPrecalc(f,g,h,m){const k=this._ptsArr;for(let a=0,b=k.length;a<b;a+=2){const l=a+1,p=k[a]*f,r=k[l]*g;k[a]=p*m-r*h;k[l]=r*m+p*h}this._isBboxChanged=!0}offset(f,g){const h=this._ptsArr;for(let m=0,k=h.length;m<k;m+=2)h[m]+=f,h[m+1]+=g}containsPoint(f,g){const h=
this._ptsArr;if(f===h[0]&&g===h[1])return!0;this._updateBbox();var m=this._bbox;const k=m.getLeft()-110,a=m.getTop()-101,b=m.getRight()+131;m=m.getBottom()+120;let l,p,r,t,u,w,x,A;k<f?(l=k,r=f):(l=f,r=k);a<g?(p=a,t=g):(p=g,t=a);b<f?(u=b,x=f):(u=f,x=b);m<g?(w=m,A=g):(w=g,A=m);let E=0,y=0;for(let H=0,P=h.length;H<P;H+=2){var B=(H+2)%P;const F=h[H],I=h[H+1],N=h[B];B=h[B+1];e.segmentsIntersectPreCalc(k,a,f,g,l,r,p,t,F,I,N,B)&&++E;e.segmentsIntersectPreCalc(b,m,f,g,u,x,w,A,F,I,N,B)&&++y}return 1===E%2||
1===y%2}intersectsPoly(f,g,h){const m=f._ptsArr,k=this._ptsArr;if(this.containsPoint(m[0]+g,m[1]+h)||f.containsPoint(k[0]-g,k[1]-h))return!0;for(let b=0,l=k.length;b<l;b+=2){var a=(b+2)%l;f=k[b];const p=k[b+1],r=k[a];a=k[a+1];let t,u,w,x;f<r?(t=f,w=r):(t=r,w=f);p<a?(u=p,x=a):(u=a,x=p);for(let A=0,E=m.length;A<E;A+=2){const y=(A+2)%E;if(e.segmentsIntersectPreCalc(f,p,r,a,t,w,u,x,m[A]+g,m[A+1]+h,m[y]+g,m[y+1]+h))return!0}}return!1}intersectsSegment(f,g,h,m,k,a){if(this.containsPoint(h-f,m-g)||this.containsPoint(k-
f,a-g))return!0;let b,l,p,r;h<k?(b=h,p=k):(b=k,p=h);m<a?(l=m,r=a):(l=a,r=m);const t=this._ptsArr;for(let u=0,w=t.length;u<w;u+=2){const x=(u+2)%w;if(e.segmentsIntersectPreCalc(h,m,k,a,b,p,l,r,t[u]+f,t[u+1]+g,t[x]+f,t[x+1]+g))return!0}return!1}mirror(f){const g=this._ptsArr;for(let h=0,m=g.length;h<m;h+=2)g[h]=2*f-g[h];this._isBboxChanged=!0}flip(f){const g=this._ptsArr;for(let h=0,m=g.length;h<m;h+=2){const k=h+1;g[k]=2*f-g[k]}this._isBboxChanged=!0}diag(){const f=this._ptsArr;for(let g=0,h=f.length;g<
h;g+=2){const m=g+1,k=f[g];f[g]=f[m];f[m]=k}this._isBboxChanged=!0}GetMidX(){const f=this._ptsArr;let g=0;for(let h=0,m=f.length;h<m;h+=2)g+=f[h];return g/this.pointCount()}GetMidY(){const f=this._ptsArr;let g=0;for(let h=0,m=f.length;h<m;h+=2)g+=f[h+1];return g/this.pointCount()}GetPointsArray(){return this._ptsArr}GetPointCount(){return this.pointCount()}IsEnabled(){return this._enabled}}}"use strict";
{const e=self.C3;e.PairMap=class extends e.DefendedBase{constructor(d){super();this._firstMap=new Map;if(d)for(const [c,f,g]of d)this.Set(c,f,g)}Release(){this.Clear();this._firstMap=null}Clear(){const d=this._firstMap;for(const c of d.values())c.clear();d.clear()}Set(d,c,f){const g=this._firstMap;let h=g.get(d);h||(h=new Map,g.set(d,h));h.set(c,f)}Get(d,c){return(d=this._firstMap.get(d))?d.get(c):d}Has(d,c){return(d=this._firstMap.get(d))?d.has(c):!1}Delete(d,c){const f=this._firstMap,g=f.get(d);
if(!g)return!1;(c=g.delete(c))&&0===g.size&&f.delete(d);return c}DeleteEither(d){const c=this._firstMap,f=c.get(d);f&&(f.clear(),c.delete(d));for(const [g,h]of c.entries())h.delete(d)&&0===h.size&&c.delete(g)}GetSize(){let d=0;for(const c of this._firstMap.values())d+=c.size;return d}*values(){for(const d of this._firstMap.values())yield*d.values()}*keyPairs(){for(const [d,c]of this._firstMap.entries())for(const f of c.keys())yield[d,f]}*entries(){for(const [d,c]of this._firstMap.entries())for(const [f,
g]of c.entries())yield[d,f,g]}}}"use strict";
{const e=self.C3;e.ArraySet=class extends e.DefendedBase{constructor(){super();this._set=new Set;this._arr=[];this._needToRebuildArray=!1}Release(){this.Clear()}Clear(){this._set.clear();e.clearArray(this._arr);this._needToRebuildArray=!1}Add(d){this._set.has(d)||(this._set.add(d),this._needToRebuildArray||this._arr.push(d))}Has(d){return this._set.has(d)}Delete(d){this._set.delete(d)&&(this._needToRebuildArray=!0)}GetSize(){return this._set.size}IsEmpty(){return 0===this._set.size}GetArray(){this._needToRebuildArray&&
(this._RebuildArray(),this._needToRebuildArray=!1);return this._arr}_RebuildArray(){const d=this._arr;e.clearArray(d);for(const c of this._set)d.push(c)}}}"use strict";
{const e=new Map,d=new Map,c=new Map,f=new Map,g=new Map,h=new Map;h.set("linear","noease");h.set("default","noease");self.Ease=class r{constructor(){}static InheritEase(){return"default"}static DefaultEase(){return"noease"}static GetEditorEaseNames(t,...u){this._CreateEaseMap();c.has(t)||c.set(t,new Map);t=c.get(t);return[...d.keys()].concat([...t.keys()]).filter(w=>!u.includes(w))}static GetRuntimeEaseNames(){this._CreateEaseMap();return[...d.keys()].concat([...f.keys()])}static IsNamePredefined(t){this._CreateEaseMap();
return[...d.keys()].includes(t)}static _GetEase(t){const u=h.get(t);if(u)return e.get(u);if(r.IsNamePredefined(t))return e.get(t);if(g.has(t))return g.get(t)}static GetEditorEase(t,u){this._CreateEaseMap();const w=r._GetEase(t);return w?w:c.get(u).get(t)}static GetRuntimeEase(t){this._CreateEaseMap();const u=r._GetEase(t);return u?u:f.get(t)}static GetEaseFromIndex(t){this._CreateEaseMap();return this.GetRuntimeEaseNames()[t]}static GetIndexForEase(t,u){this._CreateEaseMap();return this.GetEditorEaseNames(u).indexOf(t)}static _CreateEaseMap(){0===
e.size&&(this._AddPredifinedEase("default",()=>{}),this._AddPredifinedEase("noease",this.NoEase),this._AddPredifinedEase("easeinsine",this.EaseInSine),this._AddPredifinedEase("easeoutsine",this.EaseOutSine),this._AddPredifinedEase("easeinoutsine",this.EaseInOutSine),this._AddPredifinedEase("easeinelastic",this.EaseInElastic),this._AddPredifinedEase("easeoutelastic",this.EaseOutElastic),this._AddPredifinedEase("easeinoutelastic",this.EaseInOutElastic),this._AddPredifinedEase("easeinback",this.EaseInBack),
this._AddPredifinedEase("easeoutback",this.EaseOutBack),this._AddPredifinedEase("easeinoutback",this.EaseInOutBack),this._AddPredifinedEase("easeinbounce",this.EaseInBounce),this._AddPredifinedEase("easeoutbounce",this.EaseOutBounce),this._AddPredifinedEase("easeinoutbounce",this.EaseInOutBounce),this._AddPredifinedEase("easeincubic",this.EaseInCubic),this._AddPredifinedEase("easeoutcubic",this.EaseOutCubic),this._AddPredifinedEase("easeinoutcubic",this.EaseInOutCubic),this._AddPredifinedEase("easeinquad",
this.EaseInQuad),this._AddPredifinedEase("easeoutquad",this.EaseOutQuad),this._AddPredifinedEase("easeinoutquad",this.EaseInOutQuad),this._AddPredifinedEase("easeinquart",this.EaseInQuart),this._AddPredifinedEase("easeoutquart",this.EaseOutQuart),this._AddPredifinedEase("easeinoutquart",this.EaseInOutQuart),this._AddPredifinedEase("easeinquint",this.EaseInQuint),this._AddPredifinedEase("easeoutquint",this.EaseOutQuint),this._AddPredifinedEase("easeinoutquint",this.EaseInOutQuint),this._AddPredifinedEase("easeincirc",
this.EaseInCirc),this._AddPredifinedEase("easeoutcirc",this.EaseOutCirc),this._AddPredifinedEase("easeinoutcirc",this.EaseInOutCirc),this._AddPredifinedEase("easeinexpo",this.EaseInExpo),this._AddPredifinedEase("easeoutexpo",this.EaseOutExpo),this._AddPredifinedEase("easeinoutexpo",this.EaseInOutExpo),this._AddPrivateCustomEase("cubicbezier",this.EaseCubicBezier),this._AddPrivateCustomEase("spline",this.EaseSpline))}static _AddPredifinedEase(t,u){r._AddEase(t,u,"predefined")}static _AddPrivateCustomEase(t,
u){r._AddEase(t,u,"private")}static AddCustomEase(t,u,w){this._CreateEaseMap();r._AddEase(t,u,"custom",w)}static RemoveCustomEase(t,u){this.IsNamePredefined(t)||[...g.keys()].includes(t)||(u=c.get(u))&&u.delete(t)}static _AddEase(t,u,w,x){switch(w){case "predefined":e.set(t,u);d.set(t,u);break;case "custom":x?(c.has(x)||c.set(x,new Map),c.get(x).set(t,u)):f.set(t,u);break;case "private":e.set(t,u);g.set(t,u);break;default:throw Error("unexpected ease mode");}}static NoEase(t,u,w,x){return w*t/x+u}static EaseInQuad(t,
u,w,x){return w*(t/=x)*t+u}static EaseOutQuad(t,u,w,x){return-w*(t/=x)*(t-2)+u}static EaseInOutQuad(t,u,w,x){return 1>(t/=x/2)?w/2*t*t+u:-w/2*(--t*(t-2)-1)+u}static EaseInCubic(t,u,w,x){return w*(t/=x)*t*t+u}static EaseOutCubic(t,u,w,x){return w*((t=t/x-1)*t*t+1)+u}static EaseInOutCubic(t,u,w,x){return 1>(t/=x/2)?w/2*t*t*t+u:w/2*((t-=2)*t*t+2)+u}static EaseInQuart(t,u,w,x){return w*(t/=x)*t*t*t+u}static EaseOutQuart(t,u,w,x){return-w*((t=t/x-1)*t*t*t-1)+u}static EaseInOutQuart(t,u,w,x){return 1>(t/=
x/2)?w/2*t*t*t*t+u:-w/2*((t-=2)*t*t*t-2)+u}static EaseInQuint(t,u,w,x){return w*(t/=x)*t*t*t*t+u}static EaseOutQuint(t,u,w,x){return w*((t=t/x-1)*t*t*t*t+1)+u}static EaseInOutQuint(t,u,w,x){return 1>(t/=x/2)?w/2*t*t*t*t*t+u:w/2*((t-=2)*t*t*t*t+2)+u}static EaseInSine(t,u,w,x){return-w*Math.cos(t/x*(Math.PI/2))+w+u}static EaseOutSine(t,u,w,x){return w*Math.sin(t/x*(Math.PI/2))+u}static EaseInOutSine(t,u,w,x){return-w/2*(Math.cos(Math.PI*t/x)-1)+u}static EaseInExpo(t,u,w,x){return 0===t?u:w*Math.pow(2,
10*(t/x-1))+u}static EaseOutExpo(t,u,w,x){return t===x?u+w:w*(-Math.pow(2,-10*t/x)+1)+u}static EaseInOutExpo(t,u,w,x){return 0===t?u:t===x?u+w:1>(t/=x/2)?w/2*Math.pow(2,10*(t-1))+u:w/2*(-Math.pow(2,-10*--t)+2)+u}static EaseInCirc(t,u,w,x){return-w*(Math.sqrt(1-(t/=x)*t)-1)+u}static EaseOutCirc(t,u,w,x){return w*Math.sqrt(1-(t=t/x-1)*t)+u}static EaseInOutCirc(t,u,w,x){return 1>(t/=x/2)?-w/2*(Math.sqrt(1-t*t)-1)+u:w/2*(Math.sqrt(1-(t-=2)*t)+1)+u}static EaseInElastic(t,u,w,x){let A=0,E=w;if(0===t)return u;
if(1===(t/=x))return u+w;A||(A=.3*x);E<Math.abs(w)?(E=w,w=A/4):w=A/(2*Math.PI)*Math.asin(w/E);return-(E*Math.pow(2,10*--t)*Math.sin(2*(t*x-w)*Math.PI/A))+u}static EaseOutElastic(t,u,w,x){let A,E=0,y=w;if(0===t)return u;if(1===(t/=x))return u+w;E||(E=.3*x);y<Math.abs(w)?(y=w,A=E/4):A=E/(2*Math.PI)*Math.asin(w/y);return y*Math.pow(2,-10*t)*Math.sin(2*(t*x-A)*Math.PI/E)+w+u}static EaseInOutElastic(t,u,w,x){let A,E=0,y=w;if(0===t)return u;if(2===(t/=x/2))return u+w;E||(E=.3*x*1.5);y<Math.abs(w)?(y=w,
A=E/4):A=E/(2*Math.PI)*Math.asin(w/y);return 1>t?-.5*y*Math.pow(2,10*--t)*Math.sin(2*(t*x-A)*Math.PI/E)+u:y*Math.pow(2,-10*--t)*Math.sin(2*(t*x-A)*Math.PI/E)*.5+w+u}static EaseInBack(t,u,w,x,A){void 0===A&&(A=1.70158);return w*(t/=x)*t*((A+1)*t-A)+u}static EaseOutBack(t,u,w,x,A){void 0===A&&(A=1.70158);return w*((t=t/x-1)*t*((A+1)*t+A)+1)+u}static EaseInOutBack(t,u,w,x,A){void 0===A&&(A=1.70158);return 1>(t/=x/2)?w/2*t*t*(((A*=1.525)+1)*t-A)+u:w/2*((t-=2)*t*(((A*=1.525)+1)*t+A)+2)+u}static EaseInBounce(t,
u,w,x){return w-r.EaseOutBounce(x-t,0,w,x)+u}static EaseOutBounce(t,u,w,x){return(t/=x)<1/2.75?7.5625*w*t*t+u:t<2/2.75?w*(7.5625*(t-=1.5/2.75)*t+.75)+u:t<2.5/2.75?w*(7.5625*(t-=2.25/2.75)*t+.9375)+u:w*(7.5625*(t-=2.625/2.75)*t+.984375)+u}static EaseInOutBounce(t,u,w,x){return t<x/2?.5*r.EaseInBounce(2*t,0,w,x)+u:.5*r.EaseOutBounce(2*t-x,0,w,x)+.5*w+u}static EaseCubicBezier(t,u,w,x,A){return u+3*t*(w-u)+3*t**2*(u+x-2*w)+t**3*(A-u+3*w-3*x)}static EaseSpline(t,u,w,x,A,E,y,B,H,P){if(x===A&&E===y)return t;
t=p(t,u,x,E,B,P);u=m(w,A,y,H);x=k(w,A,y,H);w=a(w,A,y,H);return b(t,u,x,w)}static GetBezierSamples(t,u,w,x){const A=[],E=m(t,u,w,x),y=k(t,u,w,x);t=a(t,u,w,x);for(u=0;11>u;++u)w=b(.1*u,E,y,t),A.push(w);return A}};const m=(r,t,u,w)=>w-3*u+3*t-r,k=(r,t,u,w)=>3*u-6*t+3*r,a=(r,t,u,w)=>3*(t-r),b=(r,t,u,w)=>((t*r+u)*r+w)*r,l=(r,t,u,w)=>3*t*r*r+2*u*r+w,p=(r,t,u,w,x,A)=>{if(1==r)return 1;for(var E=0,y=1,B=A[y];10!=y&&B<=r;)y++,B=A[y],E+=.1;y--;B=A[y];A=E+(r-B)/(A[y+1]-B)*.1;y=m(t,u,w,x);B=k(t,u,w,x);t=a(t,
u,w,x);u=l(A,y,B,t);if(0!==u)if(.02<=u)for(E=0;4>E;++E)u=b(A,y,B,t)-r,w=l(A,y,B,t),A-=u/w;else{u=E;E+=.1;w=0;let H;do A=u+(E-u)/2,x=b(A,y,B,t)-r,0<x?E=A:u=A,x=1e-7<Math.abs(x),H=10>++w;while(x&&H)}return A}}"use strict";
{const e=self.C3;function d(c){e.IsString(c)}e.ProbabilityTable=class{constructor(){this._items=[];this._totalWeight=0}Release(){this.Clear();this._items=null}Clear(){e.clear2DArray(this._items);this._totalWeight=0}GetTotalWeight(){return this._totalWeight}Sample(c=Math.random()*this.GetTotalWeight()){let f=0;for(const [g,h]of this._items)if(f+=g,c<f)return h;return 0}AddItem(c,f){d(f);this._totalWeight+=c;this._items.push([c,f])}RemoveItem(c,f){d(f);const g=0===c;for(let h=0;h<this._items.length;h++){const m=
this._items[h],k=m[1]===f;if((g||m[0]===c)&&k){this._items.splice(h,1);this._totalWeight-=m[0];break}}}asJSON(){return JSON.stringify(this._items)}static fromJSON(c){const f=new e.ProbabilityTable;c=JSON.parse(c);for(const g of c)f.AddItem(g[0],g[1]);return f}}}"use strict";
self.C3.Event=class{constructor(e,d){this.type=e;this.cancelable=!!d;this.isAsync=this.propagationStopped=this.defaultPrevented=!1}preventDefault(){if(!this.cancelable)throw Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw Error(`event '${this.type}' cannot be stopped`);if(this.isAsync)throw Error(`cannot stop async event '${this.type}' propagation`);this.propagationStopped=!0}};"use strict";
{const e=self.C3;e.Event.Handler=class extends e.DefendedBase{constructor(d){super();this._type=d;this._captureListeners=[];this._captureListenersSet=new Set;this._listeners=[];this._listenersSet=new Set;this._fireDepth=0;this._queueAddListeners=[];this._queueRemoveCaptureListeners=[];this._queueRemoveListeners=[]}Release(){0<this._fireDepth||(e.clearArray(this._captureListeners),this._captureListenersSet.clear(),e.clearArray(this._listeners),this._listenersSet.clear(),e.clearArray(this._queueAddListeners),
e.clearArray(this._queueRemoveCaptureListeners),e.clearArray(this._queueRemoveListeners),e.Release(this))}_AddListener(d,c){this._IsFiring()?this._queueAddListeners.push([d,c]):c?this._captureListenersSet.has(d)||(this._captureListeners.push(d),this._captureListenersSet.add(d)):this._listenersSet.has(d)||(this._listeners.push(d),this._listenersSet.add(d))}_RemoveListener(d,c){this._IsFiring()?c?this._queueRemoveCaptureListeners.push(d):this._queueRemoveListeners.push(d):c?this._captureListenersSet.has(d)&&
(this._captureListenersSet.delete(d),e.arrayFindRemove(this._captureListeners,d)):this._listenersSet.has(d)&&(this._listenersSet.delete(d),e.arrayFindRemove(this._listeners,d))}_IsEmpty(){return!this._captureListeners.length&&!this._listeners.length}_IsFiring(){return 0<this._fireDepth}_ProcessQueuedListeners(){for(var d of this._queueAddListeners)this._AddListener(...d);e.clearArray(this._queueAddListeners);for(var c of this._queueRemoveListeners)this._listenersSet.delete(c);for(const f of this._queueRemoveCaptureListeners)this._captureListenersSet.delete(f);
d=new Set(this._queueRemoveListeners);c=new Set(this._queueRemoveCaptureListeners);e.arrayRemoveAllInSet(this._listeners,d);e.arrayRemoveAllInSet(this._captureListeners,c);e.clearArray(this._queueRemoveCaptureListeners);e.clearArray(this._queueRemoveListeners)}_FireCancellable(d){this._IncreaseFireDepth();let c=!1;for(let f=0,g=this._captureListeners.length;f<g;++f)if(this._captureListeners[f](d),d.propagationStopped){c=!0;break}if(!c)for(let f=0,g=this._listeners.length;f<g&&(this._listeners[f](d),
!d.propagationStopped);++f);this._DecreaseFireDepth();return!d.defaultPrevented}_FireNonCancellable(d){this._IncreaseFireDepth();for(let c=0,f=this._captureListeners.length;c<f;++c)this._captureListeners[c](d);for(let c=0,f=this._listeners.length;c<f;++c)this._listeners[c](d);this._DecreaseFireDepth();return!0}_IncreaseFireDepth(){this._fireDepth++}_DecreaseFireDepth(){this._fireDepth--;0===this._fireDepth&&(this._queueAddListeners.length||this._queueRemoveCaptureListeners.length||this._queueRemoveListeners.length)&&
this._ProcessQueuedListeners()}SetDelayRemoveEventsEnabled(d){d?this._IncreaseFireDepth():this._DecreaseFireDepth()}_FireAsync(d){let c=[];for(let f=0,g=this._captureListeners.length;f<g;++f){let h=this._captureListeners[f];c.push(e.Asyncify(()=>h(d)))}for(let f=0,g=this._listeners.length;f<g;++f){let h=this._listeners[f];c.push(e.Asyncify(()=>h(d)))}return Promise.all(c).then(()=>!d.defaultPrevented)}_FireAndWait_AsyncOptional(d){const c=[];this._IncreaseFireDepth();for(let g=0,h=this._captureListeners.length;g<
h;++g){var f=this._captureListeners[g](d);f instanceof Promise&&c.push(f)}for(let g=0,h=this._listeners.length;g<h;++g)f=this._listeners[g](d),f instanceof Promise&&c.push(f);this._DecreaseFireDepth();return c.length?Promise.all(c).then(()=>!d.defaultPrevented):!d.defaultPrevented}async _FireAndWaitAsync(d){return await this._FireAndWait_AsyncOptional(d)}async _FireAndWaitAsyncSequential(d){this._IncreaseFireDepth();for(let f=0,g=this._captureListeners.length;f<g;++f){var c=this._captureListeners[f](d);
c instanceof Promise&&await c}for(let f=0,g=this._listeners.length;f<g;++f)c=this._listeners[f](d),c instanceof Promise&&await c;this._DecreaseFireDepth();return!d.defaultPrevented}*_FireAsGenerator(d){this._IncreaseFireDepth();for(let f=0,g=this._captureListeners.length;f<g;++f){var c=this._captureListeners[f](d);e.IsIterator(c)&&(yield*c)}for(let f=0,g=this._listeners.length;f<g;++f)c=this._listeners[f](d),e.IsIterator(c)&&(yield*c);this._DecreaseFireDepth()}}}"use strict";
{const e=self.C3;e.Event.Dispatcher=class extends e.DefendedBase{constructor(){super();this._eventHandlers=new Map;this._dispatcherWasReleased=!1}Release(){if(this._dispatcherWasReleased)throw Error("already released");this.ClearEvents();this._dispatcherWasReleased=!0;e.Release(this)}WasReleased(){return this._dispatcherWasReleased}ClearEvents(){for(let d of this._eventHandlers.values())d.Release();this._eventHandlers.clear()}_GetHandlerByType(d,c){let f=this._eventHandlers.get(d);return f?f:c?(f=
e.New(e.Event.Handler,d),this._eventHandlers.set(d,f),f):null}HasAnyHandlerFor(d){return this._eventHandlers.has(d)}addEventListener(d,c,f){this._GetHandlerByType(d,!0)._AddListener(c,!!f)}removeEventListener(d,c,f){let g=this._GetHandlerByType(d,!1);g&&(g._RemoveListener(c,!!f),g._IsEmpty()&&this._eventHandlers.delete(d))}dispatchEvent(d){const c=this._GetHandlerByType(d.type,!1);return c?d.cancelable?c._FireCancellable(d):c._FireNonCancellable(d):!0}dispatchEventAsync(d){const c=this._GetHandlerByType(d.type,
!1);if(!c)return Promise.resolve(!0);d.isAsync=!0;return c._FireAsync(d)}async dispatchEventAndClearAsync(d){const c=this._GetHandlerByType(d.type,!1);if(!c)return!0;this._eventHandlers.delete(d.type);d.isAsync=!0;d=await c._FireAsync(d);c.Release();return d}async dispatchEventAndWaitAsync(d){const c=this._GetHandlerByType(d.type,!1);return c?await c._FireAndWaitAsync(d):!0}dispatchEventAndWait_AsyncOptional(d){const c=this._GetHandlerByType(d.type,!1);return c?c._FireAndWait_AsyncOptional(d):!0}async dispatchEventAndWaitAsyncSequential(d){const c=
this._GetHandlerByType(d.type,!1);return c?await c._FireAndWaitAsyncSequential(d):!0}dispatchGeneratorEvent(d){const c=this._GetHandlerByType(d.type,!1);if(!c)return null;if(d.cancelable)throw Error("not supported");return c._FireAsGenerator(d)}SetDelayRemoveEventsEnabled(d){for(const c of this._eventHandlers.values())c.SetDelayRemoveEventsEnabled(d)}}}"use strict";
{const e=self.C3,d="undefined"!==typeof requestIdleCallback;let c=[],f=-1,g=0;function h(b){f=d&&0===g?requestIdleCallback(m,{timeout:35}):setTimeout(m,0<g?1:b)}function m(b){f=-1;if(c.length){var l=performance.now(),p=0;do{k(c.shift());var r=performance.now();++p;var t=(r-l)/p*1.1}while(c.length&&(d&&0===g&&"undefined"!==typeof b?t<b.timeRemaining():12>r-l+t));-1===f&&c.length&&h(Math.max(16-(r-l),4))}}function k(b){let l;try{l=b.func()}catch(p){b.reject(p);return}b.resolve(l)}let a=e.QueryString.Has("disable-asyncify");
a&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously.");e.Asyncify=function(b){let l=null;e.isDebug&&(l=e.GetCallStack());return new Promise((p,r)=>{c.push({func:b,resolve:p,reject:r,stack:l});a?k(c.pop()):-1===f&&h(16)})};e.Asyncify.SetHighThroughputMode=function(b){if(b)++g;else if(--g,0>g)throw Error("already turned off high throughput mode");}}"use strict";
{const e=self.C3;let d=-1;function c(){d=-1}e.FastGetDateNow=function(){-1===d&&(d=Date.now(),self.setTimeout(c,16));return d};let f=-1,g=-1,h=new Set;function m(){g=f=-1;let k=Date.now();for(let a of h)if(a._CheckTimeout(k)){let b=a._GetDeadline();if(-1===g||b<g)g=b}else h.delete(a);-1!==g&&(f=self.setTimeout(m,Math.max(g-k+100,1E3)))}e.IdleTimeout=class{constructor(k,a){this._callback=k;this._timeout=1E3*a;this._deadline=0;this._isActive=!1}Reset(){let k=e.FastGetDateNow();this._deadline=k+this._timeout;
this._isActive||(h.add(this),this._isActive=!0);-1===f?(g=this._deadline,f=self.setTimeout(m,this._timeout+100)):this._deadline<g&&g>k+1E3&&(self.clearTimeout(f),g=this._deadline,f=self.setTimeout(m,this._timeout+100))}_CheckTimeout(k){return k>=this._deadline?this._callback()?(this._deadline=k+this._timeout,!0):this._isActive=!1:!0}_GetDeadline(){return this._deadline}Cancel(){this._isActive&&(h.delete(this),this._isActive=!1,0===h.size&&-1!==f&&(self.clearTimeout(f),g=f=-1))}Release(){this.Cancel();
this._callback=null}}}"use strict";
{const e=self.C3;e.Disposable=class d{constructor(c){this._disposed=!1;this._disposeAction=c}Dispose(){this._disposed||(this._disposed=!0,this._disposeAction&&(this._disposeAction(),this._disposeAction=null))}IsDisposed(){return this._disposed}Release(){this.Dispose()}static Release(c){return new d(()=>c.Release())}static From(c,f,g,h,m){if("undefined"===typeof h||null===h)h=!1;else if("boolean"!==typeof h&&"object"!==typeof h)throw new TypeError("invalid event listener options");m&&(g=g.bind(m));
if(f.includes(" ")){f=f.split(" ");m=new e.CompositeDisposable;for(let k of f)c.addEventListener(k,g,h),m.Add(e.New(e.Disposable,()=>c.removeEventListener(k,g,h)));return m}c.addEventListener(f,g,h);return e.New(e.Disposable,()=>c.removeEventListener(f,g,h))}};e.StubDisposable=class extends e.Disposable{SetAction(d){this._disposeAction=d}};e.CompositeDisposable=class extends e.Disposable{constructor(...d){super();this._disposables=new Set;for(let c of d)this.Add(c)}Add(...d){if(this._disposed)throw Error("already disposed");
for(let c of d)this._disposables.add(c)}Remove(d){if(this._disposed)throw Error("already disposed");this._disposables.delete(d)}RemoveAll(){if(this._disposed)throw Error("already disposed");if(this._disposables){for(let d of this._disposables)d.Dispose();this._disposables.clear()}}IsDisposed(){return this._disposed}Dispose(){if(this._disposed)throw Error("already disposed");this._disposed=!0;for(let d of this._disposables)d.Dispose();this._disposables.clear();this._disposables=null}Release(){this.Dispose()}}}"use strict";
{const e=self.C3;e.KahanSum=class extends e.DefendedBase{constructor(){super();this._sum=this._t=this._y=this._c=0}Add(d){this._y=+d-this._c;this._t=this._sum+this._y;this._c=this._t-this._sum-this._y;this._sum=this._t}Subtract(d){this._sum-=+d}Get(){return this._sum}Reset(){this._sum=this._t=this._y=this._c=0}Set(d){this._t=this._y=this._c=0;this._sum=+d}Release(){}}}"use strict";
{const e=self.C3,d={RBnode:function(c){this.tree=c;this.left=this.right=this.tree.sentinel;this.parent=null;this.color=!1;this.key=null},RedBlackSet:function(c){this.size=0;this.sentinel=new d.RBnode(this);this.sentinel.color=!1;this.root=this.sentinel;this.root.parent=this.sentinel;this.compare=c||this.default_compare}};d.RedBlackSet.prototype.default_compare=function(c,f){return c<f?-1:f<c?1:0};d.RedBlackSet.prototype.clone=function(){var c=new d.RedBlackSet(this.compare);c.insertAll(this);return c};
d.RedBlackSet.prototype.clear=function(){this.size=0;this.sentinel=new d.RBnode(this);this.sentinel.color=!1;this.root=this.sentinel;this.root.parent=this.sentinel};d.RedBlackSet.prototype.leftRotate=function(c){var f=c.right;c.right=f.left;f.left!=this.sentinel&&(f.left.parent=c);f.parent=c.parent;c.parent==this.sentinel?this.root=f:c==c.parent.left?c.parent.left=f:c.parent.right=f;f.left=c;c.parent=f};d.RedBlackSet.prototype.rightRotate=function(c){var f=c.left;c.left=f.right;f.right!=this.sentinel&&
(f.right.parent=c);f.parent=c.parent;c.parent==this.sentinel?this.root=f:c==c.parent.right?c.parent.right=f:c.parent.left=f;f.right=c;c.parent=f};d.RedBlackSet.prototype.insert=function(c){if(this.contains(c))this.get_(c).key=c;else{var f=new d.RBnode(this);f.key=c;c=this.sentinel;for(var g=this.root;g!=this.sentinel;)c=g,g=0>this.compare(f.key,g.key)?g.left:g.right;f.parent=c;c==this.sentinel?this.root=f:0>this.compare(f.key,c.key)?c.left=f:c.right=f;f.left=this.sentinel;f.right=this.sentinel;f.color=
!0;this.insertFixup(f);this.size++}};d.RedBlackSet.prototype.insertFixup=function(c){for(;c!=this.sentinel&&c!=this.root&&1==c.parent.color;)if(c.parent==c.parent.parent.left){var f=c.parent.parent.right;1==f.color?(c.parent.color=!1,f.color=!1,c.parent.parent.color=!0,c=c.parent.parent):(c==c.parent.right&&(c=c.parent,this.leftRotate(c)),c.parent.color=!1,c.parent.parent.color=!0,c.parent.parent!=this.sentinel&&this.rightRotate(c.parent.parent))}else f=c.parent.parent.left,1==f.color?(c.parent.color=
!1,f.color=!1,c.parent.parent.color=!0,c=c.parent.parent):(c==c.parent.left&&(c=c.parent,this.rightRotate(c)),c.parent.color=!1,c.parent.parent.color=!0,c.parent.parent!=this.sentinel&&this.leftRotate(c.parent.parent));this.root.color=!1};d.RedBlackSet.prototype.delete_=function(c){var f=c.left==this.sentinel||c.right==this.sentinel?c:this.successor_(c);var g=f.left!=this.sentinel?f.left:f.right;g.parent=f.parent;f.parent==this.sentinel?this.root=g:f==f.parent.left?f.parent.left=g:f.parent.right=
g;f!=c&&(c.key=f.key);0==f.color&&this.deleteFixup(g);this.size--};d.RedBlackSet.prototype.deleteFixup=function(c){for(;c!=this.root&&0==c.color;)if(c==c.parent.left){var f=c.parent.right;1==f.color&&(f.color=!1,c.parent.color=!0,this.leftRotate(c.parent),f=c.parent.right);0==f.left.color&&0==f.right.color?(f.color=!0,c=c.parent):(0==f.right.color&&(f.left.color=!1,f.color=!0,this.rightRotate(f),f=c.parent.right),f.color=c.parent.color,c.parent.color=!1,f.right.color=!1,this.leftRotate(c.parent),
c=this.root)}else f=c.parent.left,1==f.color&&(f.color=!1,c.parent.color=!0,this.rightRotate(c.parent),f=c.parent.left),0==f.right.color&&0==f.left.color?(f.color=!0,c=c.parent):(0==f.left.color&&(f.right.color=!1,f.color=!0,this.leftRotate(f),f=c.parent.left),f.color=c.parent.color,c.parent.color=!1,f.left.color=!1,this.rightRotate(c.parent),c=this.root);c.color=!1};d.RedBlackSet.prototype.remove=function(c){c=this.get_(c);if(c!=this.sentinel){var f=c.key;this.delete_(c);return f}return null};d.RedBlackSet.prototype.removeSwapped=
function(c,f){this.remove(f)};d.RedBlackSet.prototype.min=function(c){for(;c.left!=this.sentinel;)c=c.left;return c};d.RedBlackSet.prototype.max=function(c){for(;c.right!=this.sentinel;)c=c.right;return c};d.RedBlackSet.prototype.successor_=function(c){if(c.right!=this.sentinel)return this.min(c.right);for(var f=c.parent;f!=this.sentinel&&c==f.right;)c=f,f=f.parent;return f};d.RedBlackSet.prototype.predeccessor_=function(c){if(c.left!=this.sentinel)return this.max(c.left);for(var f=c.parent;f!=this.sentinel&&
c==f.left;)c=f,f=f.parent;return f};d.RedBlackSet.prototype.successor=function(c){if(0<this.size){c=this.get_(c);if(c==this.sentinel)return null;if(c.right!=this.sentinel)return this.min(c.right).key;for(var f=c.parent;f!=this.sentinel&&c==f.right;)c=f,f=f.parent;return f!=this.sentinel?f.key:null}return null};d.RedBlackSet.prototype.predecessor=function(c){if(0<this.size){c=this.get_(c);if(c==this.sentinel)return null;if(c.left!=this.sentinel)return this.max(c.left).key;for(var f=c.parent;f!=this.sentinel&&
c==f.left;)c=f,f=f.parent;return f!=this.sentinel?f.key:null}return null};d.RedBlackSet.prototype.getMin=function(){return this.min(this.root).key};d.RedBlackSet.prototype.getMax=function(){return this.max(this.root).key};d.RedBlackSet.prototype.get_=function(c){for(var f=this.root;f!=this.sentinel&&0!=this.compare(f.key,c);)f=0>this.compare(c,f.key)?f.left:f.right;return f};d.RedBlackSet.prototype.contains=function(c){return null!=this.get_(c).key};d.RedBlackSet.prototype.getValues=function(){var c=
[];this.forEach(function(f){c.push(f)});return c};d.RedBlackSet.prototype.insertAll=function(c){if("array"==d.typeOf(c))for(var f=0;f<c.length;f++)this.insert(c[f]);else if("function"==d.typeOf(c.forEach))c.forEach(this.insert,this);else if("function"==d.typeOf(c.getValues))for(c=c.getValues(),f=0;f<c.length;f++)this.insert(c[f]);else if("object"==d.typeOf(c))for(f in c)this.insert(c[f])};d.RedBlackSet.prototype.removeAll=function(c){if("array"==d.typeOf(c))for(var f=0;f<c.length;f++)this.remove(c[f]);
else if("function"==d.typeOf(c.forEach))c.forEach(this.removeSwapped,this);else if("function"==d.typeOf(c.getValues))for(c=c.getValues(),f=0;f<c.length;f++)this.remove(c[f]);else if("object"==d.typeOf(c))for(f in c)this.remove(c[f])};d.RedBlackSet.prototype.containsAll=function(c){if("array"==d.typeOf(c)){for(var f=0;f<c.length;f++)if(!this.contains(c[f]))return!1;return!0}if("function"==d.typeOf(c.forEach))return c.every(this.contains,this);if("function"==d.typeOf(c.getValues)){c=c.getValues();for(f=
0;f<c.length;f++)if(!this.contains(c[f]))return!1;return!0}if("object"==d.typeOf(c)){for(f in c)if(!this.contains(c[f]))return!1;return!0}};d.RedBlackSet.prototype.range=function(c,f){var g=[];this.traverseFromTo(function(h){g.push(h)},c,f);return g};d.RedBlackSet.prototype.traverse=function(c,f){if(!this.isEmpty())for(var g=this.min(this.root);g!=this.sentinel&&!c.call(f,g.key,this);)g=this.successor_(g)};d.RedBlackSet.prototype.traverseFrom=function(c,f,g){if(!this.isEmpty())for(f=this.get_(f);f!=
this.sentinel&&!c.call(g,f.key,this);)f=this.successor_(f)};d.RedBlackSet.prototype.traverseTo=function(c,f,g){if(!this.isEmpty()){var h=this.min(this.root);for(f=this.get_(f);h!=f&&!c.call(g,h.key,this);)h=this.successor_(h)}};d.RedBlackSet.prototype.traverseFromTo=function(c,f,g,h){if(!this.isEmpty())for(f=this.get_(f),g=this.get_(g);f!=g&&!c.call(h,f.key,this);)f=this.successor_(f)};d.RedBlackSet.prototype.traverseBackwards=function(c,f){if(!this.isEmpty())for(var g=this.max(this.root);g!=this.sentinel&&
!c.call(f,g.key,this);)g=this.predeccessor_(g)};d.RedBlackSet.prototype.forEach=function(c,f){if(!this.isEmpty())for(var g=this.min(this.root);g!=this.sentinel;g=this.successor_(g))c.call(f,g.key,g.key,this)};d.RedBlackSet.prototype.some=function(c,f){if(this.isEmpty())return!1;for(var g=this.min(this.root);g!=this.sentinel;g=this.successor_(g))if(c.call(f,g.key,g.key,this))return!0;return!1};d.RedBlackSet.prototype.every=function(c,f){if(this.isEmpty())return!1;for(var g=this.min(this.root);g!=this.sentinel;g=
this.successor_(g))if(!c.call(f,g.key,g.key,this))return!1;return!0};d.RedBlackSet.prototype.map=function(c,f){var g=[];if(this.isEmpty())return g;for(var h=this.min(this.root);h!=this.sentinel;h=this.successor_(h))g.push(c.call(f,h.key,h.key,this));return g};d.RedBlackSet.prototype.filter=function(c,f){var g=[];if(this.isEmpty())return g;for(var h=this.min(this.root);h!=this.sentinel;h=this.successor_(h))c.call(f,h.key,h.key,this)&&g.push(h.key);return g};d.RedBlackSet.prototype.getCount=function(){return this.size};
d.RedBlackSet.prototype.isEmpty=function(){return 0==this.size};d.RedBlackSet.prototype.isSubsetOf=function(c){var f=d.getCount(c);if(this.getCount()>f)return!1;f=0;if(this.isEmpty())return!0;for(var g=this.min(this.root);g!=this.sentinel;g=this.successor_(g))d.contains.call(c,c,g.key)&&f++;return f==this.getCount()};d.RedBlackSet.prototype.intersection=function(c){var f=new d.RedBlackSet(this.compare);if(this.isEmpty())return f;for(var g=this.min(this.root);g!=this.sentinel;g=this.successor_(g))c.contains.call(c,
g.key,g.key,this)&&f.insert(g.key);return f};e.RedBlackSet=class extends e.DefendedBase{constructor(c){super();this._rbSet=new d.RedBlackSet(c);this._enableQueue=!1;this._queueInsert=new Set;this._queueRemove=new Set}Add(c){this._enableQueue?this._rbSet.contains(c)?this._queueRemove.delete(c):this._queueInsert.add(c):this._rbSet.insert(c)}Remove(c){this._enableQueue?this._rbSet.contains(c)?this._queueRemove.add(c):this._queueInsert.delete(c):this._rbSet.remove(c)}Has(c){return this._enableQueue?this._queueInsert.has(c)?
!0:!this._queueRemove.has(c)&&this._rbSet.contains(c):this._rbSet.contains(c)}Clear(){this._rbSet.clear();this._queueInsert.clear();this._queueRemove.clear()}toArray(){if(this._enableQueue)throw Error("cannot be used in queueing mode");return this._rbSet.getValues()}GetSize(){return this._rbSet.getCount()+this._queueInsert.size-this._queueRemove.size}IsEmpty(){return 0===this.GetSize()}Front(){if(this.IsEmpty())throw Error("empty set");if(this._enableQueue)throw Error("cannot be used in queueing mode");
const c=this._rbSet;return c.min(c.root).key}Shift(){if(this.IsEmpty())throw Error("empty set");if(this._enableQueue)throw Error("cannot be used in queueing mode");const c=this.Front();this.Remove(c);return c}SetQueueingEnabled(c){c=!!c;if(this._enableQueue!==c&&(this._enableQueue=c,!c)){for(const f of this._queueRemove)this._rbSet.remove(f);this._queueRemove.clear();for(const f of this._queueInsert)this._rbSet.insert(f);this._queueInsert.clear()}}ForEach(c){this._rbSet.forEach(c)}*values(){if(!this.IsEmpty()){var c=
this._rbSet;for(let f=c.min(c.root);f!=c.sentinel;f=c.successor_(f))yield f.key}}[Symbol.iterator](){return this.values()}}}"use strict";
{const e=self.C3;e.PromiseThrottle=class{constructor(d=e.hardwareConcurrency){this._maxParallel=d;this._queue=[];this._activeCount=0}Add(d){return new Promise((c,f)=>{this._queue.push({func:d,resolve:c,reject:f});this._MaybeStartNext()})}_FindInQueue(d){for(let c=0,f=this._queue.length;c<f;++c)if(this._queue[c].func===d)return c;return-1}RemoveAndResolve(d,c){d=this._FindInQueue(d);if(-1===d)throw Error("cannot find promise to resolve");this._queue[d].resolve(c);this._queue.splice(d,1)}RemoveAndReject(d,
c){d=this._FindInQueue(d);if(-1===d)throw Error("cannot find promise to reject");this._queue[d].reject(c);this._queue.splice(d,1)}async _MaybeStartNext(){if(this._queue.length&&!(this._activeCount>=this._maxParallel)){this._activeCount++;var d=this._queue.shift();try{const c=await d.func();d.resolve(c)}catch(c){d.reject(c)}this._activeCount--;this._MaybeStartNext()}}static async Batch(d,c){const f=[];let g=!1;const h=async k=>{for(;(k=c.pop())&&!g;)try{f.push(await k())}catch(a){throw g=!0,a;}},m=
[];for(;d--;)m.push(h());await Promise.all(m);return f}}}"use strict";
{const e=self.C3;e.RateLimiter=class{constructor(d,c,f){this._callback=d;this._interval=c;this._intervalOnBattery=f||2*c;this._timerId=-1;this._lastCallTime=-Infinity;this._timerCallFunc=()=>this._OnTimer();this._canRunImmediate=this._ignoreReset=!1;this._callbackArguments=null}SetCanRunImmediate(d){this._canRunImmediate=!!d}_GetInterval(){return"undefined"!==typeof e.Battery&&e.Battery.IsOnBatteryPower()?this._intervalOnBattery:this._interval}Call(...d){if(-1===this._timerId){this._callbackArguments=
d;d=e.FastGetDateNow();var c=d-this._lastCallTime,f=this._GetInterval();c>=f&&this._canRunImmediate?(this._lastCallTime=d,this._RunCallback()):this._timerId=self.setTimeout(this._timerCallFunc,Math.max(f-c,4))}}_RunCallback(){this._ignoreReset=!0;const d=this._callbackArguments;this._callbackArguments=null;d?this._callback(...d):this._callback();this._ignoreReset=!1}Reset(){this._ignoreReset||(this._CancelTimer(),this._callbackArguments=null,this._lastCallTime=e.FastGetDateNow())}_OnTimer(){this._timerId=
-1;this._lastCallTime=e.FastGetDateNow();this._RunCallback()}_CancelTimer(){-1!==this._timerId&&(self.clearTimeout(this._timerId),this._timerId=-1)}Release(){this._CancelTimer();this._timerCallFunc=this._callbackArguments=this._callback=null}}}"use strict";
{const e=self.C3;e.SVGRasterManager=class{constructor(){this._images=new Map;this._allowNpotSurfaces=!1;this._redrawCallback=this._releaseResultCallback=this._rasterAtSizeCallback=this._getBaseSizeCallback=null}SetNpotSurfaceAllowed(d){this._allowNpotSurfaces=!!d}IsNpotSurfaceAllowed(){return this._allowNpotSurfaces}SetGetBaseSizeCallback(d){this._getBaseSizeCallback=d}GetBaseSize(d){if(!this._getBaseSizeCallback)throw Error("no get base size callback set");return this._getBaseSizeCallback(d)}SetRasterAtSizeCallback(d){this._rasterAtSizeCallback=
d}RasterAtSize(d,c,f,g,h,m){if(!this._rasterAtSizeCallback)throw Error("no raster at size callback set");return this._rasterAtSizeCallback(d,c,f,g,h,m)}SetReleaseResultCallback(d){this._releaseResultCallback=d}ReleaseResult(d){if(!this._releaseResultCallback)throw Error("no release result callback set");this._releaseResultCallback(d)}SetRedrawCallback(d){this._redrawCallback=d}Redraw(){if(!this._redrawCallback)throw Error("no redraw callback set");this._redrawCallback()}AddImage(d){let c=this._images.get(d);
c||(c=e.New(e.SVGRasterImage,this,d),this._images.set(d,c));c.IncReference();return c}_RemoveImage(d){this._images.delete(d.GetDataSource())}}}"use strict";
{const e=self.C3;e.SVGRasterImage=class{constructor(d,c){this._manager=d;this._dataSource=c;this._baseHeight=this._baseWidth=this._refCount=0;this._getBaseSizePromise=this._manager.GetBaseSize(c).then(f=>{this._baseWidth=f[0];this._baseHeight=f[1];this._manager.Redraw()}).catch(f=>{console.error("[SVG] Error loading SVG: ",f);this._hadError=!0;this._manager.Redraw()});this._rasterImageHeight=this._rasterImageWidth=this._rasterSurfaceHeight=this._rasterSurfaceWidth=0;this._isRasterizing=!1;this._rasterizedResult=
null;this._hadError=this._forceRaster=!1}Release(){if(0>=this._refCount)throw Error("already released");this._refCount--;0===this._refCount&&this._Release()}_Release(){this._rasterizedResult&&(this._manager.ReleaseResult(this._rasterizedResult),this._rasterizedResult=null);this._manager._RemoveImage(this);this._manager=null}GetDataSource(){return this._dataSource}IncReference(){this._refCount++}HasReferences(){return 0<this._refCount}GetRasterizedResult(){return this._rasterizedResult}ForceRasterAgain(){this._forceRaster=
!0}async StartRasterForSize(d,c,f){if(0!==c&&0!==f&&!this._hadError&&!this._isRasterizing){var g=e.nextHighestPowerOfTwo(Math.ceil(c)),h=e.nextHighestPowerOfTwo(Math.ceil(f)),m=Math.max(g,h);2048<m&&(m=2048/m,c*=m,f*=m,g=Math.min(Math.ceil(g*m),2048),h=Math.min(Math.ceil(h*m),2048));c<g&&f<h&&(f=c/f,g/h>f?(c=h*f,f=h):(c=g,f=g/f));this._manager.IsNpotSurfaceAllowed()&&(g=Math.ceil(c),h=Math.ceil(f));g<=this._rasterSurfaceWidth&&h<=this._rasterSurfaceHeight&&!this._forceRaster||(this._isRasterizing=
!0,this._rasterSurfaceWidth=g,this._rasterSurfaceHeight=h,d=await this._manager.RasterAtSize(this._dataSource,d,this._rasterSurfaceWidth,this._rasterSurfaceHeight,c,f),this._rasterizedResult&&this._manager.ReleaseResult(this._rasterizedResult),this._rasterizedResult=d,this._rasterImageWidth=c,this._rasterImageHeight=f,this._forceRaster=this._isRasterizing=!1,this._manager.Redraw())}}WhenBaseSizeReady(){return this._getBaseSizePromise}GetBaseWidth(){return this._baseWidth}GetBaseHeight(){return this._baseHeight}GetRasterWidth(){return this._rasterImageWidth}GetRasterHeight(){return this._rasterImageHeight}HadError(){return this._hadError}}}"use strict";
{const e=self.C3;e.UTF8_BOM="\ufeff";const d=new Set([..."0123456789"]);e.IsNumericChar=function(b){return d.has(b)};const c=new Set([..." \t\n\r\u00a0\u0085\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u202f\u205f\u3000"]);e.IsWhitespaceChar=function(b){return c.has(b)};e.FilterWhitespace=function(b){return[...b].filter(l=>!e.IsWhitespaceChar(l)).join("")};e.IsStringAllWhitespace=function(b){for(const l of b)if(!e.IsWhitespaceChar(l))return!1;return!0};e.IsUnprintableChar=
function(b){return 1===b.length&&32>b.charCodeAt(0)};e.FilterUnprintableChars=function(b){return[...b].filter(l=>!e.IsUnprintableChar(l)).join("")};const f=new Set([..."0123456789.+-e"]);e.IsStringNumber=function(b){b=b.trim();if(!b.length)return!1;let l=b.charAt(0);if("-"!==l&&!d.has(l))return!1;for(let p of b)if(!f.has(p))return!1;return!0};e.RemoveTrailingDigits=function(b){let l=b.length;for(;0<l;){let p=b.charAt(l-1);if(!e.IsNumericChar(p))break;--l}return b.substr(0,l)};e.IncrementNumberAtEndOf=
function(b){let l=e.RemoveTrailingDigits(b);b=(b=b.substr(l.length))?(parseInt(b,10)+1).toString():"2";return l+b};const g=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]);function h(b){return g.get(b)}const m=/[&<>"']/g;e.EscapeHTML=function(b){return b.replace(m,h)};e.EscapeJS=function(b){b=e.ReplaceAll(b,"\\","\\\\");b=e.ReplaceAll(b,'"','\\"');b=e.ReplaceAll(b,"\t","\\t");b=e.ReplaceAll(b,"\r","");return e.ReplaceAll(b,"\n","\\n")};e.EscapeXML=function(b){b=e.ReplaceAll(b,
"&","&amp;");b=e.ReplaceAll(b,"<","&lt;");b=e.ReplaceAll(b,">","&gt;");return e.ReplaceAll(b,'"',"&quot;")};const k=/[-[\]{}()*+?.,\\^$|#\s]/g;e.EscapeRegex=function(b){return b.replace(k,"\\$&")};e.FindAll=function(b,l,p=!1){if(!l)return[];p||(b=b.toLowerCase(),l=l.toLowerCase());p=l.length;var r=0;let t=[];for(;-1<(r=b.indexOf(l,r));)t.push(r),r+=p;return t};e.ReplaceAll=function(b,l,p){return b.replaceAll(l,()=>p)};e.ReplaceAllCaseInsensitive=function(b,l,p){return b.replace(new RegExp(e.EscapeRegex(l),
"gi"),()=>p)};e.SetElementContent=function(b,l){"string"===typeof l?b.textContent=l:l.isPlainText()?b.textContent=l.toString():(b.innerHTML=l.toHTML(),l instanceof e.BBString&&l.attachLinkHandlers(b))};e.StringLikeEquals=function(b,l){return b instanceof e.HtmlString||b instanceof e.BBString?b.equals(l):l instanceof e.HtmlString||l instanceof e.BBString?l.equals(b):b===l};e.StringSubstitute=function(b,...l){let p=b;for(let r=0,t=l.length;r<t;++r){const u=`{${r}}`;if(!b.includes(u))throw Error(`missing placeholder '${u}' in string substitution`);
p=p.replace(u,l[r].toString())}return p};e.StringSubstituteAllowMissing=function(b,...l){let p=b,r=-1,t=-1;for(let u=0,w=l.length;u<w;++u){const x=`{${u}}`;b.includes(x)?(t=u,p=p.replace(x,l[u].toString())):-1===r&&(r=u)}if(0<=r&&0<=t&&r<t)throw Error(`missing placeholder '${r}' in string substitution`);return p};e.StringSubstituteMap=function(b,l){for(let [p,r]of Object.entries(l))b=b.replaceAll(p,r.toString());return b};e.SortAZCaseInsensitive=function(b,l){b=b.toLowerCase();l=l.toLowerCase();return b>
l?1:b<l?-1:0};e.FormatDataSize=function(b,l){l="common."+(l?"dataRates":"dataSizes")+".";const p=self.langSub;if(1024>b)return p(l+"bytes",b);if(1048576>b)return b/=1024,b=10>b?Math.round(10*b)/10:Math.round(b),p(l+"kilobytes",b);if(1073741824>b)return b/=1048576,b=10>b?Math.round(10*b)/10:Math.round(b),p(l+"megabytes",b);if(1099511627776>b)return b/=1073741824,b=10>b?Math.round(10*b)/10:Math.round(b),p(l+"gigabytes",b);b/=1099511627776;b=10>b?Math.round(10*b)/10:Math.round(b);return p(l+"terabytes",
b)};const a={approximate:!1,days:!0,hours:!0,minutes:!0,seconds:!0};e.FormatTime=function(b,l){l=Object.assign({},a,l);e.Lang.PushContext("common.time");const p=[],r=self.lang,t=self.langPluralSub;if(l.days){var u=Math.floor(b/86400);0<u&&(b-=86400*u,p.push(t(".days",null,u)))}l.hours&&(u=Math.floor(b/3600),0<u||p.length)&&(b-=3600*u,p.push(t(".hours",null,u)));l.minutes&&(u=Math.floor(b/60),0<u||p.length||!l.seconds)&&(b-=60*u,p.push(t(".minutes",null,u)));l.seconds&&p.push(t(".seconds",null,Math.floor(b%
60)));b=(l.approximate?r(".approx-prefix"):"")+p.join(r(".separator"));e.Lang.PopContext();return b};e.ZeroPad=function(b,l){let p=0>b?"-":"";b=Math.abs(b);b=b.toString();l-=b.length;for(let r=0;r<l;++r)p+="0";return p+b};e.StringToTitleCase=function(b){return b.toLowerCase().replace(/\b\w/g,l=>l.toUpperCase())};e.CompareVersionStrings=function(b,l){b=b.split(".").map(p=>p.trim());l=l.split(".").map(p=>p.trim());e.resizeArray(b,4,"0");e.resizeArray(l,4,"0");b=b.map(p=>parseInt(p,10));l=l.map(p=>parseInt(p,
10));for(let p=0;4>p;++p){const r=b[p]-l[p];if(0!==r)return 0>r?-1:1}return 0};e.CreateGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,b=>{const l=Math.floor(16*Math.random());return("x"===b?l:l&3|8).toString(16)})};e.StringHammingDistance=function(b,l){if(b.length!==l.length)throw Error("strings must be same length");let p=0;for(let r=0,t=b.length;r<t;++r)b.charAt(r)!==l.charAt(r)&&++p;return p};e.StringLevenshteinDistance=function(b,l){if(0===b.length)return l.length;
if(0===l.length)return b.length;let p,r,t,u;if(b.length>l.length){var w=b;b=l;l=w}u=Array(b.length+1);for(w=0;w<=b.length;w++)u[w]=w;for(w=1;w<=l.length;w++){r=w;for(p=1;p<=b.length;p++)t=l[w-1]===b[p-1]?u[p-1]:Math.min(u[p-1]+1,Math.min(r+1,u[p]+1)),u[p-1]=r,r=t;u[b.length]=r}return u[b.length]}}"use strict";
{const e=self.C3,d=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),c=/\[(\/?)([a-zA-Z0-9]+)\]/g,f=/\[(\/?)([^\[]*?)\]/g;
let g=null,h=0;function m(a,b,l){var p=d.get(l);if(p){if("string"===typeof p){if("a"!==p||b)return"<"+b+p+">";b=parseInt(l.substring(1),10)-1;if(0>b||b>=g.length)throw Error("invalid bbcode link substitution");p=g[b];if("string"===typeof p)return`<a href="${g[b]}">`;if("function"===typeof p)return`<a class="bblink${b}">`;throw new TypeError("invalid bbcode link action");}if(Array.isArray(p))return a=p[0],p=p[1],b?"</"+a+">":`<${a} class="${p}">`}else return"class"===l?b?"</span>":`<span class="bbclass${h++}">`:
a}const k=/\n/g;e.BBString=class{constructor(a,b){this._bbstr=b&&b.noEscape?a:e.EscapeHTML(a);this._htmlstr="";this._convertLineBreaks=!1;this._linkActions=[];if(b&&(this._convertLineBreaks=!!b.convertLineBreaks,b.links)){if(9<b.links.length)throw Error("too many links");this._linkActions=b.links}this._hasAnyBBtags=this._bbstr.includes("[");this._needsLineBreakConversion=this._convertLineBreaks&&this._bbstr.includes("\n");this._isPlain=!this._hasAnyBBtags&&!this._needsLineBreakConversion&&!this._bbstr.includes("&");
this._hasParsedFragments=!1;this._fragments=[]}toString(){return this._bbstr}valueOf(){return this._bbstr}isPlainText(){return this._isPlain}toPlainText(){return this._hasAnyBBtags?this._bbstr.replace(c,""):this._bbstr}toHTML(){if(this._isPlain)return this._bbstr;if(!this._htmlstr&&this._bbstr){let a=this._bbstr;this._hasAnyBBtags&&(h=0,g=this._linkActions,a=a.replace(c,m),g=null);this._needsLineBreakConversion&&(a=a.replace(k,"<br>"));this._htmlstr=a}return this._htmlstr}attachLinkHandlers(a){if(this._linkActions.length)for(let b=
0,l=this._linkActions.length;b<l;++b){const p=this._linkActions[b];if("function"!==typeof p)continue;const r=a.querySelector(".bblink"+b);if(!r)throw Error("unable to attach BBString link handler");r.onclick=p}}equals(a){return a instanceof e.HtmlString?this.toHTML()===a.toHTML():a instanceof e.BBString?this._bbstr===a._bbstr:this._bbstr===a}toFragmentList(){if(this._hasParsedFragments)return this._fragments;const a=this._bbstr,b=[];let l=f.lastIndex=0;for(var p;null!==(p=f.exec(a));){var r=p.index;
if(0<r&&"\\"===a.charAt(r-1))continue;var t=p[0],u=p[1];p=p[2];const w=a.substring(l,r);l=r+t.length;w&&this._fragments.push({text:w,styles:b.slice(0)});if(p)if(u)for(p=p.toLowerCase(),r=b.length-1;0<=r;--r){if(b[r].tag===p){b.splice(r,1);break}}else r=p,t=null,u=p.indexOf("="),-1!==u?(r=p.substring(0,u).toLowerCase(),t=p.substring(u+1)):r=r.toLowerCase(),b.push({tag:r,param:t})}l<a.length&&this._fragments.push({text:a.substring(l),styles:b.slice(0)});for(const w of this._fragments)w.text=this._ProcessBBCodeEscapeSequences(w.text);
this._hasParsedFragments=!0;return this._fragments}_ProcessBBCodeEscapeSequences(a){a=e.ReplaceAll(a,"\\[","[");return e.ReplaceAll(a,"\\\\","\\")}static StripTags(a){return e.New(e.BBString,a,{noEscape:!0}).toPlainText()}static StripAnyTags(a){return a.replace(f,"")}}}"use strict";
{const e=self.C3;e.WordWrap=class{constructor(){this._lines=[]}GetLines(){return this._lines}GetLineCount(){return this._lines.length}_MeasureLine(d,c){let f=0,g=0;for(const h of d)-1===h.width&&(d=c(h.text,h.styles),h.width=d.width,h.height=d.height),f+=h.width,g=Math.max(g,h.height);return{width:f,height:g}}_AddLine(d,c,f){this._lines.push({fragments:d,width:c,height:f})}WordWrap(d,c,f,g,h){"string"===typeof d&&(d=[{text:d,styles:[]}]);e.clearArray(this._lines);if(!(!d.length||1===d.length&&!d[0].text.length||
2>f)){if(1===d.length){var m=d[0];const k=m.text;m=m.styles;if(100>=k.length&&!k.includes("\n")){let {width:a,height:b}=c(k,m);a+=h;if(a<=f){this._AddLine([{text:k,styles:m,width:a,height:b}],a,b);return}}}if("word"===g)g=this._TokeniseWords(d);else{g=[];for(const k of d)e.appendArray(g,[...k.text].map(a=>[{text:a,styles:k.styles}]))}this._WrapText(g,c,f,h)}}_TokeniseWords(d){const c=[];let f=[],g=!1;for(const m of d){var h=m.text;d=m.styles;for(const k of h)"\n"===k?(0<f.length&&c.push(f),c.push([{text:"\n",
styles:d}]),f=[]):0===f.length?(f.push({text:k,styles:d}),g=e.IsWhitespaceChar(k)):(h=e.IsWhitespaceChar(k),h===g?(h=f[f.length-1],h.styles===d?h.text+=k:f.push({text:k,styles:d})):(c.push(f),f=[],f.push({text:k,styles:d}),g=h))}0<f.length&&c.push(f);return c}_CopyLine(d){return d.map(c=>({text:c.text,styles:c.styles,width:c.width,height:c.height}))}_AddWordToLine(d,c){var f=d.length?d[d.length-1]:null;let g=0;f&&c[0].styles===f.styles&&(f.text+=c[0].text,f.width=-1,f.height=-1,g=1);for(f=c.length;g<
f;++g){const h=c[g];d.push({text:h.text,styles:h.styles,width:-1,height:-1})}}_WrapText(d,c,f,g){let h=[],m=0;var k=0;for(const b of d){if(1===b.length&&"\n"===b[0].text){0===k&&(k=c(" ",b[0].styles).height);this._AddLine(h,m,k);h=[];k=m=0;continue}d=this._CopyLine(h);this._AddWordToLine(d,b);var a=this._MeasureLine(d,c);const l=a.width;a=a.height;l>=f?(0<h.length&&this._AddLine(h,m,k),h=[],e.IsStringAllWhitespace(b[0].text)?k=m=0:(this._AddWordToLine(h,b),k=this._MeasureLine(h,c),m=k.width,k=k.height)):
(h=d,m=l,k=a)}0<h.length&&this._AddLine(h,m,k);this._TrimLinesTrailingWhitespace(c,g)}_TrimLinesTrailingWhitespace(d,c){for(const g of this._lines){const h=g.fragments;if(!h.length)continue;let m=h[h.length-1];var f=m.text;const k=f.trimEnd();if(!k)g.width-=m.width,h.pop();else if(k.length<f.length){f=d(k,m.styles).width;const a=m.width-f;m.width=f;m.text=k;g.width-=a}0!==c&&0<h.length&&(m=h[h.length-1],m.width+=c,g.width+=c)}}Clear(){e.clearArray(this._lines)}GetMaxLineWidth(){return this._lines.reduce((d,
c)=>Math.max(d,c.width),0)}GetTotalLineHeight(){return this._lines.reduce((d,c)=>d+c.height,0)}}}"use strict";self.C3.Gfx={};"use strict";
{const e=self.C3,d=[0,0,0,0,0,0,0,0],c=self.glMatrix,f=c.vec3,g=c.mat4,h=f.fromValues(0,0,0);e.Gfx.RendererBase=class{constructor(){this._height=this._width=0;this._cam=f.fromValues(0,0,100);this._look=f.fromValues(0,0,0);this._up=f.fromValues(0,1,0);this._worldScale=f.fromValues(1,1,1);this._matP=g.create();this._matMV=g.create();this._lastMV=g.create();this._allShaderPrograms=[];this._shaderProgramsByName=new Map;this._spTextureFill=null;this._stateGroups=new Map;this._currentStateGroup=null;this._blendModeTable=
[];this._namedBlendModeMap=new Map;this._frameNumber=0;this._enableMipmaps=!0}FillIndexBufferData(m){let k=0,a=m.length,b=0;for(;k<a;)m[k++]=b,m[k++]=b+1,m[k++]=b+2,m[k++]=b,m[k++]=b+2,m[k++]=b+3,b+=4}Project(m,k,a,b,l){const p=this._matMV,r=this._matP;for(let t=0,u=d.length;t<u;++t)d[t]=0;d[0]=p[0]*m+p[4]*k+p[12];d[1]=p[1]*m+p[5]*k+p[13];d[2]=p[2]*m+p[6]*k+p[14];d[3]=p[3]*m+p[7]*k+p[15];d[4]=r[0]*d[0]+r[4]*d[1]+r[8]*d[2]+r[12]*d[3];d[5]=r[1]*d[0]+r[5]*d[1]+r[9]*d[2]+r[13]*d[3];d[6]=r[2]*d[0]+r[6]*
d[1]+r[10]*d[2]+r[14]*d[3];d[7]=-d[2];0!==d[7]&&(d[7]=1/d[7],d[4]*=d[7],d[5]*=d[7],d[6]*=d[7],l[0]=(.5*d[4]+.5)*a,l[1]=(.5*d[5]+.5)*b)}GetWidth(){return this._width}GetHeight(){return this._height}GetNearZ(){return 1}GetFarZ(){return 1E4}SetCameraXYZ(m,k,a){this._cam[0]=m*this._worldScale[0];this._cam[1]=k*this._worldScale[1];this._cam[2]=a}SetLookXYZ(m,k,a){this._look[0]=m*this._worldScale[0];this._look[1]=k*this._worldScale[1];this._look[2]=a}ResetModelView(m){g.lookAt(this._matMV,this._cam,this._look,
m||this._up);g.scale(this._matMV,this._matMV,this._worldScale)}Translate(m,k){if(0!==m||0!==k)h[0]=m,h[1]=k,h[2]=0,g.translate(this._matMV,this._matMV,h)}Scale(m,k){if(1!==m||1!==k)h[0]=m,h[1]=k,h[2]=1,g.scale(this._matMV,this._matMV,h)}RotateZ(m){0!==m&&g.rotateZ(this._matMV,this._matMV,m)}_AddShaderProgram(m){this._allShaderPrograms.push(m);this._shaderProgramsByName.set(m.GetName(),m)}_RemoveShaderProgram(m){const k=this._allShaderPrograms.indexOf(m);-1!==k&&this._allShaderPrograms.splice(k,1);
this._shaderProgramsByName.delete(m.GetName())}_ClearAllShaderPrograms(){e.clearArray(this._allShaderPrograms);this._shaderProgramsByName.clear()}GetShaderProgramByName(m){return this._shaderProgramsByName.get(m)||null}GetTextureFillShaderProgram(){return this._spTextureFill}_SetCurrentStateGroup(m){this._currentStateGroup=m}GetCurrentStateGroup(){return this._currentStateGroup}AcquireStateGroup(m,k,a,b){const l=e.Gfx.StateGroup.MakeKey(m,k,a,b);let p=this._stateGroups.get(l);p||(p=e.New(e.Gfx.StateGroup,
this,m,k,a,b),this._stateGroups.set(l,p));p.AddRef();return p}ReleaseStateGroup(m){m.DecRef();0===m._GetRefCount()&&(this._currentStateGroup===m&&(this._currentStateGroup=null),this._stateGroups.delete(m.GetKey()),m.Release())}_InitBlendModeData(m){e.clearArray(this._blendModeTable);this._namedBlendModeMap.clear();for(const k of m){m=k[0];const a=k[1],b=k[2];this._blendModeTable.push([a,b]);this._namedBlendModeMap.set(m,{srcBlend:a,destBlend:b})}}_GetBlendByIndex(m){return this._blendModeTable[m]}GetSrcBlendByIndex(m){return this._GetBlendByIndex(m)[0]}GetDestBlendByIndex(m){return this._GetBlendByIndex(m)[1]}GetNamedBlend(m){m=
this._namedBlendModeMap.get(m);if("undefined"===typeof m)throw Error("invalid blend name");return m}Finish(){this.EndBatch();this._frameNumber++}GetFrameNumber(){return this._frameNumber}IncrementFrameNumber(){this._frameNumber++}SetMipmapsEnabled(m){this._enableMipmaps=!!m}AreMipmapsEnabled(){return this._enableMipmaps}}}"use strict";
{const e=self.C3;e.Gfx.StateGroup=class{constructor(d,c,f,g,h){this._renderer=d;this._refCount=0;this._shaderProgram=null;this._shaderProgramName="";this._blendMode=f;this._color=e.New(e.Color);this._color.set(g);this._zElevation=h;"string"===typeof c?this._shaderProgramName=c:(this._shaderProgram=c,this._shaderProgramName=this._shaderProgram.GetName())}Release(){if(0<this._refCount)throw Error("releasing state group still in use");this._shaderProgram=this._renderer=null;this._shaderProgramName=""}Apply(){const d=
this._renderer;d.SetProgram(this._shaderProgram);d.SetBlendMode(this._blendMode);d.SetColor(this._color);d.SetCurrentZ(this._zElevation);d._SetCurrentStateGroup(this)}GetKey(){return e.Gfx.StateGroup.MakeKey(this._shaderProgramName,this._blendMode,this._color,this._zElevation)}AddRef(){++this._refCount}DecRef(){--this._refCount}_GetRefCount(){return this._refCount}OnContextLost(){this._shaderProgram=null}OnContextRestored(d){this._shaderProgram=d.GetShaderProgramByName(this._shaderProgramName);if(!this._shaderProgram)throw Error("failed to restore shader program");
}static MakeKey(d,c,f,g){return("string"===typeof d?d:d.GetName())+","+c+","+f.getR()+","+f.getG()+","+f.getB()+","+f.getA()+","+g}}}"use strict";
{const e=self.C3,d=e.New(e.Quad),c=e.New(e.Quad);function f(h,m,k){const a=k.getTlx(),b=k.getTly(),l=k.getTrx()-a,p=k.getTry()-b,r=k.getBlx()-a;k=k.getBly()-b;return[a+l*h+r*m,b+p*h+k*m]}class g{constructor(h){this._mesh=h;this._v=this._u=this._y=this._x=0}_Init(h,m,k,a){this._x=h;this._y=m;this._u=k;this._v=a}GetX(){return this._x}SetX(h){this._x!==h&&(this._x=h,this._mesh._SetPointsChanged())}GetY(){return this._y}SetY(h){this._y!==h&&(this._y=h,this._mesh._SetPointsChanged())}GetU(){return this._u}SetU(h){this._u=
h}GetV(){return this._v}SetV(h){this._v=h}_Interpolate_TexRect(h,m,k){[this._x,this._y]=f(h._x,h._y,m);this._u=e.lerp(k.getLeft(),k.getRight(),h._u);this._v=e.lerp(k.getTop(),k.getBottom(),h._v)}_Interpolate_TexQuad(h,m,k){[this._x,this._y]=f(h._x,h._y,m);[this._u,this._v]=f(h._u,h._v,k)}}e.Gfx.Mesh=class{constructor(h,m){if(2>h||2>m)throw Error("invalid mesh size");this._hsize=h;this._vsize=m;this._pts=[];this._minY=this._minX=0;this._maxY=this._maxX=1;this._pointsChanged=!1;const k=h-1,a=m-1;for(let b=
0;b<m;++b){const l=[];for(let p=0;p<h;++p){const r=e.New(g,this),t=p/k,u=b/a;r._Init(t,u,t,u);l.push(r)}this._pts.push(l)}}Release(){e.clearArray(this._pts)}GetHSize(){return this._hsize}GetVSize(){return this._vsize}_SetPointsChanged(){this._pointsChanged=!0}_MaybeComputeBounds(){if(this._pointsChanged){var h=Infinity,m=Infinity,k=-Infinity,a=-Infinity;for(const b of this._pts)for(const l of b){const p=l.GetX(),r=l.GetY();h=Math.min(h,p);m=Math.min(m,r);k=Math.max(k,p);a=Math.max(a,r)}this._minX=
h;this._minY=m;this._maxX=k;this._maxY=a;this._pointsChanged=!1}}GetMinX(){this._MaybeComputeBounds();return this._minX}GetMinY(){this._MaybeComputeBounds();return this._minY}GetMaxX(){this._MaybeComputeBounds();return this._maxX}GetMaxY(){this._MaybeComputeBounds();return this._maxY}GetMeshPointAt(h,m){h=Math.floor(h);m=Math.floor(m);return 0>h||h>=this._hsize||0>m||m>=this._vsize?null:this._pts[m][h]}CalculateTransformedMesh(h,m,k){const a=k instanceof e.Rect;if(h.GetHSize()!==this.GetHSize()||
h.GetVSize()!==this.GetVSize())throw Error("source mesh wrong size");h=h._pts;const b=this._pts;for(let l=0,p=b.length;l<p;++l){const r=h[l],t=b[l];for(let u=0,w=t.length;u<w;++u){const x=r[u],A=t[u];a?A._Interpolate_TexRect(x,m,k):A._Interpolate_TexQuad(x,m,k)}}}Draw(h){const m=this._pts;let k=m[0];for(let a=1,b=m.length;a<b;++a){const l=m[a];let p=k[0],r=l[0];for(let t=1,u=l.length;t<u;++t){const w=k[t],x=l[t];d.set(p.GetX(),p.GetY(),w.GetX(),w.GetY(),x.GetX(),x.GetY(),r.GetX(),r.GetY());c.set(p.GetU(),
p.GetV(),w.GetU(),w.GetV(),x.GetU(),x.GetV(),r.GetU(),r.GetV());h.Quad4(d,c);p=w;r=x}k=l}}Outline(h){const m=this._pts;let k=m[0];for(let l=1,p=m.length;l<p;++l){const r=m[l];var a=k[0],b=r[0];for(let t=1,u=r.length;t<u;++t){const w=k[t],x=r[t],A=a.GetX();a=a.GetY();const E=w.GetX(),y=w.GetY(),B=x.GetX(),H=x.GetY(),P=b.GetX();b=b.GetY();h.Line(A,a,E,y);h.Line(A,a,B,H);h.Line(A,a,P,b);t===u-1&&h.Line(E,y,B,H);l===p-1&&h.Line(P,b,B,H);a=w;b=x}k=r}}InsertPolyMeshVertices(h){h=h.pointsArr();const m=[],
k=this.GetHSize()-1,a=this.GetVSize()-1,b=1/k,l=1/a,p=k-1,r=a-1;let t=h[0],u=h[1],w=e.clamp(Math.floor(t*k),0,p),x=e.clamp(Math.floor(u*a),0,r),A=0,E=0,y=0;var B=-1;const H=()=>{t=e.clamp(e.lerp(t,A,y),0,1);u=e.clamp(e.lerp(u,E,y),0,1);m.push(t,u)};for(let P=0,F=h.length;P<F;P+=2)for(t=h[P],u=h[P+1],m.push(t,u),w=e.clamp(Math.floor(t*k),0,p),x=e.clamp(Math.floor(u*a),0,r),B=(P+2)%F,A=h[B],E=h[B+1],B=-1;;){if(1E6<m.length)throw Error("Too many mesh poly points");const I=w*b,N=x*l,R=(w+1)*b,S=(x+1)*
l;e.isPointInTriangleInclusive(t,u,I,N,R,N,R,S);if(0!==B&&(y=e.rayIntersectExtended(t,u,A,E,I,N,R,S,-.001),0<=y&&.99999999>=y)){H();B=0;continue}if(0<x&&2!==B&&(y=e.rayIntersectExtended(t,u,A,E,I,N,R,N,.001),0<=y&&.99999999>=y)){H();x--;B=4;continue}if(w<p&&3!==B&&(y=e.rayIntersectExtended(t,u,A,E,R,N,R,S,.001),0<=y&&.99999999>=y)){H();w++;B=1;continue}if(0<w&&1!==B&&(y=e.rayIntersectExtended(t,u,A,E,I,N,I,S,.001),0<=y&&.99999999>=y)){H();w--;B=3;continue}if(x<r&&4!==B&&(y=e.rayIntersectExtended(t,
u,A,E,I,S,R,S,.001),0<=y&&.99999999>=y)){H();x++;B=2;continue}break}return e.New(e.CollisionPoly,m)}TransformCollisionPoly(h,m){h=this._TransformPolyPoints(h);this._SimplifyPoly(h);m.setPoints(h)}_TransformPolyPoints(h){const m=[];h=h.pointsArr();for(let k=0,a=h.length;k<a;k+=2){const [b,l]=this.TransformPoint(h[k],h[k+1]);m.push(b,l)}return m}TransformPoint(h,m){var k=this.GetHSize()-1,a=this.GetVSize()-1,b=1/k,l=1/a;k=e.clamp(Math.floor(h*k),0,k-1);const p=e.clamp(Math.floor(m*a),0,a-1);a=k*b;const r=
p*l,t=(k+1)*b,u=(p+1)*l,w=this.GetMeshPointAt(k,p),x=this.GetMeshPointAt(k+1,p+1),A=e.isPointInTriangleInclusive(h,m,a,r,t,r,t,u);b=A?a+b:a;l=A?r:r+l;k=this.GetMeshPointAt(k+(A?1:0),p+(A?0:1));const [E,y,B]=e.triangleCartesianToBarycentric(h,m,a,r,b,l,t,u);return e.triangleBarycentricToCartesian(E,y,B,w.GetX(),w.GetY(),k.GetX(),k.GetY(),x.GetX(),x.GetY())}_SimplifyPoly(h){const m=[];let k=h[0],a=h[1],b=k-h[h.length-2],l=a-h[h.length-1];for(let r=0,t=h.length;r<t;r+=2){var p=(r+2)%t;const u=h[p];p=
h[p+1];const w=u-k,x=p-a,A=1e-7>Math.abs(x)&&1e-7>Math.abs(l)&&Math.sign(w)===Math.sign(b);(!(1e-7>Math.abs(w)&&1e-7>Math.abs(b)&&Math.sign(x)===Math.sign(l)||A)&&1e-7<Math.abs(w/b-x/l)||0==w&&0===x)&&m.push(k,a);k=u;a=p;b=w;l=x}m.length<h.length&&e.shallowAssignArray(h,m)}}}"use strict";
{const e=self.C3,d=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),c=new Set(["nearest","bilinear","trilinear"]),f=new Set(["default","low","high"]),g=new Set(["clamp-to-edge","repeat","mirror-repeat"]);function h(b,l){let p,r;switch(b){case "rgba8":b=l.RGBA8;r=p=l.RGBA;l=l.UNSIGNED_BYTE;break;case "rgb8":b=l.RGB8;r=p=l.RGB;l=l.UNSIGNED_BYTE;break;case "rgba4":b=l.RGBA4;r=p=l.RGBA;l=l.UNSIGNED_SHORT_4_4_4_4;break;case "rgb5_a1":b=l.RGB5_A1;r=p=l.RGBA;l=l.UNSIGNED_SHORT_5_5_5_1;break;case "rgb565":b=
l.RGB565;r=p=l.RGB;l=l.UNSIGNED_SHORT_5_6_5;break;default:throw Error("invalid pixel format");}return{sizedinternalformat:b,internalformat:p,format:r,type:l}}const m={wrapX:"clamp-to-edge",wrapY:"clamp-to-edge",sampling:"trilinear",pixelFormat:"rgba8",mipMap:!0,mipMapQuality:"default",premultiplyAlpha:!0,isSvg:!1,width:-1,height:-1},k={premultiplyAlpha:!0,flipY:!1},a=new Set;e.Gfx.WebGLRendererTexture=class{constructor(b){this._renderer=b;this._texture=null;this._height=this._width=0;this._isStatic=
!0;this._wrapY=this._wrapX="clamp-to-edge";this._sampling="trilinear";this._pixelFormat="rgba8";this._isMipMapped=!1;this._mipMapQuality="default";this._refCount=0}_CreateStatic(b,l){if(!("undefined"!==typeof HTMLImageElement&&b instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&b instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&b instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&b instanceof OffscreenCanvas||b instanceof ImageData||b instanceof ArrayBuffer)&&
null!==b)throw Error("invalid texture source");l=Object.assign({},m,l);if(this._texture)throw Error("already created texture");this._wrapX=l.wrapX;this._wrapY=l.wrapY;this._sampling=l.sampling;this._pixelFormat=l.pixelFormat;this._isMipMapped=!!l.mipMap&&this._renderer.AreMipmapsEnabled();this._mipMapQuality=l.mipMapQuality;if(!g.has(this._wrapX)||!g.has(this._wrapY))throw Error("invalid wrap mode");if(!c.has(this._sampling))throw Error("invalid sampling");if(!d.has(this._pixelFormat))throw Error("invalid pixel format");
if(!f.has(this._mipMapQuality))throw Error("invalid mipmap quality");this._isStatic=!0;if(b instanceof ArrayBuffer||null===b||l.isSvg){if(this._width=l.width,this._height=l.height,b instanceof ArrayBuffer&&b.byteLength!==this._width*this._height*4)throw Error("ArrayBuffer wrong size");}else this._width=b.width,this._height=b.height;if(0>=this._width||0>=this._height)throw Error("invalid texture data size");if(l.isSvg){var p=e.CreateCanvas(this._width,this._height);p.getContext("2d").drawImage(b,0,
0,this._width,this._height);b=p}var r=e.isPOT(this._width)&&e.isPOT(this._height);p=this._renderer.GetMaxTextureSize();if(this._width>p||this._height>p)throw Error("texture data exceeds maximum texture size");p=this._renderer.GetContext();var t=this._renderer.GetWebGLVersionNumber();this._texture=p.createTexture();p.bindTexture(p.TEXTURE_2D,this._texture);p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha);l=h(this._pixelFormat,p);if(this._renderer.SupportsNPOTTextures()||r||!this._IsTiled())2<=
t?(p.texStorage2D(p.TEXTURE_2D,this._isMipMapped?Math.floor(Math.log2(Math.max(this._width,this._height))+1):1,l.sizedinternalformat,this._width,this._height),b instanceof ArrayBuffer?p.texSubImage2D(p.TEXTURE_2D,0,0,0,this._width,this._height,l.format,l.type,new Uint8Array(b)):null!==b&&p.texSubImage2D(p.TEXTURE_2D,0,0,0,l.format,l.type,b)):b instanceof ArrayBuffer?p.texImage2D(p.TEXTURE_2D,0,l.internalformat,this._width,this._height,0,l.format,l.type,new Uint8Array(b)):null===b?p.texImage2D(p.TEXTURE_2D,
0,l.internalformat,this._width,this._height,0,l.format,l.type,null):p.texImage2D(p.TEXTURE_2D,0,l.internalformat,l.format,l.type,b);else{if(null===b)throw Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");b instanceof ArrayBuffer&&(b=new ImageData(new Uint8ClampedArray(b),this._width,this._height));b instanceof ImageData&&(r=e.CreateCanvas(this._width,this._height),r.getContext("2d").putImageData(b,0,0),b=r);r=e.CreateCanvas(e.nextHighestPowerOfTwo(this._width),
e.nextHighestPowerOfTwo(this._height));t=r.getContext("2d");t.imageSmoothingEnabled="nearest"!==this._sampling;t.drawImage(b,0,0,this._width,this._height,0,0,r.width,r.height);p.texImage2D(p.TEXTURE_2D,0,l.internalformat,l.format,l.type,r)}null!==b&&this._SetTextureParameters(p);p.bindTexture(p.TEXTURE_2D,null);this._renderer._ResetLastTexture();this._refCount=1;a.add(this)}_CreateDynamic(b,l,p){p=Object.assign({},m,p);if(this._texture)throw Error("already created texture");this._wrapX=p.wrapX;this._wrapY=
p.wrapY;this._sampling=p.sampling;this._pixelFormat=p.pixelFormat;this._isMipMapped=!!p.mipMap&&this._renderer.AreMipmapsEnabled();this._mipMapQuality=p.mipMapQuality;if(!g.has(this._wrapX)||!g.has(this._wrapY))throw Error("invalid wrap mode");if(!c.has(this._sampling))throw Error("invalid sampling");if(!d.has(this._pixelFormat))throw Error("invalid pixel format");if(!f.has(this._mipMapQuality))throw Error("invalid mipmap quality");this._isStatic=!1;this._width=Math.floor(b);this._height=Math.floor(l);
b=e.isPOT(this._width)&&e.isPOT(this._height);l=this._renderer.GetMaxTextureSize();if(0>=this._width||0>=this._height)throw Error("invalid texture size");if(this._width>l||this._height>l)throw Error("texture exceeds maximum texture size");if(!this._renderer.SupportsNPOTTextures()&&this._IsTiled()&&!b)throw Error("non-power-of-two tiled textures not supported");b=this._renderer.GetContext();l=this._renderer.GetWebGLVersionNumber();this._texture=b.createTexture();b.bindTexture(b.TEXTURE_2D,this._texture);
b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p.premultiplyAlpha);p=h(this._pixelFormat,b);b.texImage2D(b.TEXTURE_2D,0,2<=l?p.sizedinternalformat:p.internalformat,this._width,this._height,0,p.format,p.type,null);this._SetTextureParameters(b);b.bindTexture(b.TEXTURE_2D,null);this._renderer._ResetLastTexture();this._refCount=1;a.add(this)}_GetMipMapHint(b){if("default"===this._mipMapQuality)return this._isStatic?b.NICEST:b.FASTEST;if("low"===this._mipMapQuality)return b.FASTEST;if("high"===this._mipMapQuality)return b.NICEST;
throw Error("invalid mipmap quality");}_IsTiled(){return"clamp-to-edge"!==this._wrapX||"clamp-to-edge"!==this._wrapY}_GetTextureWrapMode(b,l){if("clamp-to-edge"===l)return b.CLAMP_TO_EDGE;if("repeat"===l)return b.REPEAT;if("mirror-repeat"===l)return b.MIRRORED_REPEAT;throw Error("invalid wrap mode");}_SetTextureParameters(b){var l=e.isPOT(this._width)&&e.isPOT(this._height);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,this._GetTextureWrapMode(b,this._wrapX));b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,
this._GetTextureWrapMode(b,this._wrapY));"nearest"===this._sampling?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),this._isMipMapped=!1):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),(l||this._renderer.SupportsNPOTTextures())&&this._isMipMapped?(b.hint(b.GENERATE_MIPMAP_HINT,this._GetMipMapHint(b)),b.generateMipmap(b.TEXTURE_2D),l="trilinear"===this._sampling&&!this._renderer.HasMajorPerformanceCaveat(),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MIN_FILTER,l?b.LINEAR_MIPMAP_LINEAR:b.LINEAR_MIPMAP_NEAREST)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),this._isMipMapped=!1))}_Update(b,l){if(!("undefined"!==typeof HTMLImageElement&&b instanceof HTMLImageElement||"undefined"!==typeof HTMLVideoElement&&b instanceof HTMLVideoElement||"undefined"!==typeof HTMLCanvasElement&&b instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&b instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&b instanceof OffscreenCanvas||
b instanceof ImageData))throw Error("invalid texture source");if(!this._texture||0>=this._refCount)throw Error("texture not created");if(this._isStatic)throw Error("cannot update static texture");l=Object.assign({},k,l);const p=b.width||b.videoWidth,r=b.height||b.videoHeight;var t=this._renderer.GetWebGLVersionNumber();const u=this._renderer.GetContext();u.bindTexture(u.TEXTURE_2D,this._texture);u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha);u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,
!!l.flipY);l=h(this._pixelFormat,u);t=2<=t?l.sizedinternalformat:l.internalformat;try{if(this._width===p&&this._height===r){const w=e.isPOT(this._width)&&e.isPOT(this._height);u.texSubImage2D(u.TEXTURE_2D,0,0,0,l.format,l.type,b);(w||this._renderer.SupportsNPOTTextures())&&this._isMipMapped&&(u.hint(u.GENERATE_MIPMAP_HINT,this._GetMipMapHint(u)),u.generateMipmap(u.TEXTURE_2D))}else{this._width=p;this._height=r;const w=e.isPOT(this._width)&&e.isPOT(this._height);if(!this._renderer.SupportsNPOTTextures()&&
this._IsTiled()&&!w)throw Error("non-power-of-two tiled textures not supported");u.texImage2D(u.TEXTURE_2D,0,t,l.format,l.type,b);(w||this._renderer.SupportsNPOTTextures())&&this._isMipMapped&&(u.hint(u.GENERATE_MIPMAP_HINT,this._GetMipMapHint(u)),u.generateMipmap(u.TEXTURE_2D))}}catch(w){console.error("Error updating WebGL texture: ",w)}u.bindTexture(u.TEXTURE_2D,null);this._renderer._ResetLastTexture()}_Delete(){if(0<this._refCount)throw Error("texture still has references");if(!this._texture)throw Error("already deleted texture");
a.delete(this);this._renderer.GetContext().deleteTexture(this._texture);this._texture=null}IsValid(){return!!this._texture}_GetTexture(){return this._texture}GetRenderer(){return this._renderer}AddReference(){this._refCount++}SubtractReference(){if(0>=this._refCount)throw Error("no more references");this._refCount--}GetReferenceCount(){return this._refCount}GetWidth(){return this._width}GetHeight(){return this._height}IsStatic(){return this._isStatic}GetEstimatedMemoryUsage(){let b=this._width*this._height;
switch(this._pixelFormat){case "rgba8":b*=4;break;case "rgb8":b*=3;break;case "rgba4":case "rgb5_a1":case "rgb565":b*=2}this._isMipMapped&&(b+=Math.floor(b/3));return b}static OnContextLost(){a.clear()}static allTextures(){return a.values()}}}"use strict";
{const e=self.C3,d=new Set(["nearest","bilinear","trilinear"]),c={sampling:"trilinear",alpha:!0,readback:!0,isDefaultSize:!0,multisampling:0},f=new Set;e.Gfx.WebGLRenderTarget=class{constructor(g){this._renderer=g;this._renderBuffer=this._texture=this._frameBuffer=null;this._height=this._width=0;this._isDefaultSize=!0;this._sampling="trilinear";this._readback=this._alpha=!0;this._multisampling=0}_Create(g,h,m){m=Object.assign({},c,m);const k=this._renderer.GetWebGLVersionNumber();if(this._texture||
this._renderBuffer)throw Error("already created render target");this._sampling=m.sampling;this._alpha=!!m.alpha;this._readback=!!m.readback;this._isDefaultSize=!!m.isDefaultSize;this._multisampling=m.multisampling;if(!d.has(this._sampling))throw Error("invalid sampling");if(0<this._multisampling&&(2>k||this._readback))throw Error("invalid use of multisampling");2>k&&(this._readback=!0);this._width=g;this._height=h;if(0>=this._width||0>=this._height)throw Error("invalid render target size");g=this._renderer.GetContext();
this._frameBuffer=g.createFramebuffer();g.bindFramebuffer(g.FRAMEBUFFER,this._frameBuffer);this._readback?(this._texture=this._renderer.CreateDynamicTexture(this._width,this._height,{sampling:this._sampling,pixelFormat:this._alpha?"rgba8":"rgb8",mipMap:!1}),h=this._texture._GetTexture(),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,h,0)):(this._renderBuffer=g.createRenderbuffer(),g.bindRenderbuffer(g.RENDERBUFFER,this._renderBuffer),h=this._alpha?g.RGBA8:g.RGB8,0<this._multisampling&&
((m=g.getInternalformatParameter(g.RENDERBUFFER,h,g.SAMPLES))&&m[0]?(m=m[0],this._multisampling>m&&(this._multisampling=m)):this._multisampling=0),0===this._multisampling?g.renderbufferStorage(g.RENDERBUFFER,h,this._width,this._height):g.renderbufferStorageMultisample(g.RENDERBUFFER,this._multisampling,h,this._width,this._height),g.framebufferRenderbuffer(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.RENDERBUFFER,this._renderBuffer),g.bindRenderbuffer(g.RENDERBUFFER,null));g.bindFramebuffer(g.FRAMEBUFFER,null);
f.add(this)}_Resize(g,h){if(this._width!==g||this._height!==h)this._width=g,this._height=h,g=this._renderer.GetContext(),g.bindFramebuffer(g.FRAMEBUFFER,this._frameBuffer),this._texture?this._texture._Update(new ImageData(this._width,this._height)):(g.bindRenderbuffer(g.RENDERBUFFER,this._renderBuffer),g.renderbufferStorage(g.RENDERBUFFER,this._alpha?g.RGBA8:g.RGB8,this._width,this._height),g.bindRenderbuffer(g.RENDERBUFFER,null)),g.bindFramebuffer(g.FRAMEBUFFER,null)}_Delete(){if(!this._texture&&
!this._renderBuffer)throw Error("already deleted render target");f.delete(this);const g=this._renderer.GetContext();g.bindFramebuffer(g.FRAMEBUFFER,this._frameBuffer);this._texture?(g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,null,0),this._renderer.DeleteTexture(this._texture),this._texture=null):this._renderBuffer&&(g.framebufferRenderbuffer(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.RENDERBUFFER,null),g.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null);g.bindFramebuffer(g.FRAMEBUFFER,
null);2<=this._renderer.GetWebGLVersionNumber()&&(g.bindFramebuffer(g.READ_FRAMEBUFFER,null),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null));g.deleteFramebuffer(this._frameBuffer);this._frameBuffer=this._renderer.GetBatchState().currentFramebuffer=null}_GetFramebuffer(){return this._frameBuffer}GetWebGLRenderer(){return this._renderer}GetTexture(){return this._texture}IsLinearSampling(){return"nearest"!==this._sampling}HasAlpha(){return this._alpha}IsReadback(){return this._readback}GetWidth(){return this._width}GetHeight(){return this._height}IsDefaultSize(){return this._isDefaultSize}GetMultisampling(){return this._multisampling}GetOptions(){const g=
{sampling:this._sampling,alpha:this._alpha,readback:this._readback};this._isDefaultSize||(g.width=this._width,g.height=this._height);return g}IsCompatibleWithOptions(g){g=Object.assign({},c,g);return"nearest"!==g.sampling!==this.IsLinearSampling()||!!g.alpha!==this.HasAlpha()||2<=this._renderer.GetWebGLVersionNumber()&&!!g.readback!==this.IsReadback()?!1:"number"===typeof g.width||"number"===typeof g.height?!this.IsDefaultSize()&&this.GetWidth()===g.width&&this.GetHeight()===g.height:this.IsDefaultSize()}_GetWebGLTexture(){return this._texture?
this._texture._GetTexture():null}GetEstimatedMemoryUsage(){return this._texture?this._texture.GetEstimatedMemoryUsage():this._width*this._height*(this._alpha?4:3)}static async DebugReadPixelsToBlob(g,h){g=await g.ReadBackRenderTargetToImageData(h,!0);return await e.ImageDataToBlob(g)}static OnContextLost(){f.clear()}static allRenderTargets(){return f.values()}static ResizeAll(g,h){for(const m of f)m.IsDefaultSize()&&m._Resize(g,h)}}}"use strict";
{const e=self.C3,d=self.glMatrix,c=d.vec3,f=d.mat4,g=new Set("aPos aTex aPoints matP matMV samplerFront samplerBack destStart destEnd srcStart srcEnd srcOriginStart srcOriginEnd pixelSize seconds layerScale layerAngle layoutStart layoutEnd color color2_ pointTexStart pointTexEnd zElevation tileSize tileSpacing outlineThickness".split(" "));e.Gfx.WebGLShaderProgram=class{static async Compile(h,m,k,a){const b=h.GetContext(),l=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(l,m);b.compileShader(l);
m=b.createShader(b.VERTEX_SHADER);b.shaderSource(m,k);b.compileShader(m);const p=b.createProgram();b.attachShader(p,l);b.attachShader(p,m);b.bindAttribLocation(p,0,"aPos");b.bindAttribLocation(p,1,"aTex");b.bindAttribLocation(p,2,"aPoints");b.linkProgram(p);const r=h._GetParallelShaderCompileExtension();r?await h._WaitForObjectReady(()=>b.getProgramParameter(p,r.COMPLETION_STATUS_KHR)):await e.Wait(5);if(!b.getShaderParameter(l,b.COMPILE_STATUS))throw a=b.getShaderInfoLog(l),b.deleteShader(l),b.deleteShader(m),
b.deleteProgram(p),Error("Error compiling fragment shader: "+a);if(!b.getShaderParameter(m,b.COMPILE_STATUS))throw a=b.getShaderInfoLog(m),b.deleteShader(l),b.deleteShader(m),b.deleteProgram(p),Error("Error compiling vertex shader: "+a);if(!b.getProgramParameter(p,b.LINK_STATUS))throw a=b.getProgramInfoLog(p),b.deleteShader(l),b.deleteShader(m),b.deleteProgram(p),Error("Error linking shader program: "+a);(h=e.FilterUnprintableChars(b.getProgramInfoLog(p)||"").trim())&&!e.IsStringAllWhitespace(h)&&
console.info(`[WebGL] Shader program '${a}' compilation log: `,h);b.deleteShader(l);b.deleteShader(m);return p}static async Create(h,m,k,a){k=await e.Gfx.WebGLShaderProgram.Compile(h,m.src,k,a);return new e.Gfx.WebGLShaderProgram(h,k,m,a)}constructor(h,m,k,a){const b=h.GetContext();var l=h.GetBatchState();h.EndBatch();b.useProgram(m);this._gl=b;this._renderer=h;this._name=a;this._shaderProgram=m;this._isDeviceTransform="<default-device-transform>"===a;a=b.getAttribLocation(m,"aPos");const p=b.getAttribLocation(m,
"aTex");m=b.getAttribLocation(m,"aPoints");-1!==a&&(b.bindBuffer(b.ARRAY_BUFFER,h._vertexBuffer),b.vertexAttribPointer(a,h.GetNumVertexComponents(),b.FLOAT,!1,0,0),b.enableVertexAttribArray(a));-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,h._texcoordBuffer),b.vertexAttribPointer(p,2,b.FLOAT,!1,0,0),b.enableVertexAttribArray(p));-1!==m&&(b.bindBuffer(b.ARRAY_BUFFER,h._pointBuffer),b.vertexAttribPointer(m,4,b.FLOAT,!1,0,0),b.enableVertexAttribArray(m));b.bindBuffer(b.ARRAY_BUFFER,null);this._uMatP=new e.Gfx.WebGLShaderUniform(this,
"matP","mat4");this._uMatMV=new e.Gfx.WebGLShaderUniform(this,"matMV","mat4");this._uColor=new e.Gfx.WebGLShaderUniform(this,"color","vec4");this._uSamplerFront=new e.Gfx.WebGLShaderUniform(this,"samplerFront","sampler");this._uPointTexStart=new e.Gfx.WebGLShaderUniform(this,"pointTexStart","vec2");this._uPointTexEnd=new e.Gfx.WebGLShaderUniform(this,"pointTexEnd","vec2");this._uZElevation=new e.Gfx.WebGLShaderUniform(this,"zElevation","float");this._uTileSize=new e.Gfx.WebGLShaderUniform(this,"tileSize",
"vec2");this._uTileSpacing=new e.Gfx.WebGLShaderUniform(this,"tileSpacing","vec2");this._uColor2=new e.Gfx.WebGLShaderUniform(this,"color2_","vec4");this._uOutlineThickness=new e.Gfx.WebGLShaderUniform(this,"outlineThickness","float");this._uSamplerBack=new e.Gfx.WebGLShaderUniform(this,"samplerBack","sampler");this._uDestStart=new e.Gfx.WebGLShaderUniform(this,"destStart","vec2");this._uDestEnd=new e.Gfx.WebGLShaderUniform(this,"destEnd","vec2");this._uSrcStart=new e.Gfx.WebGLShaderUniform(this,
"srcStart","vec2");this._uSrcEnd=new e.Gfx.WebGLShaderUniform(this,"srcEnd","vec2");this._uSrcOriginStart=new e.Gfx.WebGLShaderUniform(this,"srcOriginStart","vec2");this._uSrcOriginEnd=new e.Gfx.WebGLShaderUniform(this,"srcOriginEnd","vec2");this._uPixelSize=new e.Gfx.WebGLShaderUniform(this,"pixelSize","vec2");this._uSeconds=new e.Gfx.WebGLShaderUniform(this,"seconds","float");this._uLayerScale=new e.Gfx.WebGLShaderUniform(this,"layerScale","float");this._uLayerAngle=new e.Gfx.WebGLShaderUniform(this,
"layerAngle","float");this._uLayoutStart=new e.Gfx.WebGLShaderUniform(this,"layoutStart","vec2");this._uLayoutEnd=new e.Gfx.WebGLShaderUniform(this,"layoutEnd","vec2");this._hasAnyOptionalUniforms=!!(this._uPixelSize.IsUsed()||this._uSeconds.IsUsed()||this._uSamplerBack.IsUsed()||this._uDestStart.IsUsed()||this._uDestEnd.IsUsed()||this._uSrcStart.IsUsed()||this._uSrcEnd.IsUsed()||this._uSrcOriginStart.IsUsed()||this._uSrcOriginEnd.IsUsed()||this._uLayerScale.IsUsed()||this._uLayerAngle.IsUsed()||
this._uLayoutStart.IsUsed()||this._uLayoutEnd.IsUsed());this._extendBoxHorizontal=k.extendBoxHorizontal||0;this._extendBoxVertical=k.extendBoxVertical||0;this._crossSampling=!!k.crossSampling;this._mustPreDraw=!!k.mustPreDraw;this._preservesOpaqueness=!!k.preservesOpaqueness;this._animated=!!k.animated;h=k.parameters||[];this._uCustomParameters=[];this._usesDest=this._uDestStart.IsUsed()||this._uDestEnd.IsUsed();this._usesAnySrcRectOrPixelSize=this._uPixelSize.IsUsed()||this._uSrcStart.IsUsed()||
this._uSrcEnd.IsUsed()||this._uSrcOriginStart.IsUsed()||this._uSrcOriginEnd.IsUsed();this._needsPostDrawOrExtendBox=this._crossSampling||this._usesDest||0!==this._extendBoxHorizontal||0!==this._extendBoxVertical;this._hasCurrentMatMV=this._hasCurrentMatP=!1;this._uColor.Init4f(1,1,1,1);this._uColor2.Init4f(1,1,1,1);this._uSamplerFront.Init1i(0);this._uSamplerBack.Init1i(1);this._uPointTexStart.Init2f(0,0);this._uPointTexEnd.Init2f(1,1);this._uZElevation.Init1f(0);this._uTileSize.Init2f(0,0);this._uTileSpacing.Init2f(0,
0);this._uDestStart.Init2f(0,0);this._uDestEnd.Init2f(1,1);this._uSrcStart.Init2f(0,0);this._uSrcEnd.Init2f(0,0);this._uSrcOriginStart.Init2f(0,0);this._uSrcOriginEnd.Init2f(0,0);this._uPixelSize.Init2f(0,0);this._uLayerScale.Init1f(1);this._uLayerAngle.Init1f(0);this._uSeconds.Init1f(0);this._uLayoutStart.Init2f(0,0);this._uLayoutEnd.Init2f(0,0);this._uOutlineThickness.Init1f(1);for(const r of h)h=r[2],k=new e.Gfx.WebGLShaderUniform(this,r[0],h),"color"===h?k.Init3f(0,0,0):k.Init1f(0),this._uCustomParameters.push(k);
this._isDeviceTransform?this._UpdateDeviceTransformUniforms(l.currentMatP):(this.UpdateMatP(l.currentMatP,!0),this.UpdateMatMV(l.currentMV,!0));l=l.currentShader;b.useProgram(l?l._shaderProgram:null)}Release(){this._gl.deleteProgram(this._shaderProgram);this._shaderProgram=null;this._renderer._RemoveShaderProgram(this);this._renderer=this._gl=null}GetName(){return this._name}GetWebGLContext(){return this._gl}GetShaderProgram(){return this._shaderProgram}UsesDest(){return this._usesDest}UsesCrossSampling(){return this._crossSampling}MustPreDraw(){return this._mustPreDraw}PreservesOpaqueness(){return this._preservesOpaqueness}ExtendsBox(){return 0!==
this._extendBoxHorizontal||0!==this._extendBoxVertical}GetBoxExtendHorizontal(){return this._extendBoxHorizontal}GetBoxExtendVertical(){return this._extendBoxVertical}UsesAnySrcRectOrPixelSize(){return this._usesAnySrcRectOrPixelSize}NeedsPostDrawOrExtendsBox(){return this._needsPostDrawOrExtendBox}GetParameterCount(){return this._uCustomParameters.length}GetParameterType(h){return this._uCustomParameters[h].GetType()}AreCustomParametersAlreadySetInBatch(h){for(let m=0,k=h.length;m<k;++m)if(!this._uCustomParameters[m].IsSetToCustomInBatch(h[m]))return!1;
return!0}SetCustomParametersInBatch(h){for(let m=0,k=h.length;m<k;++m)this._uCustomParameters[m].SetBatchValueCustom(h[m])}AreOptionalUniformsAlreadySetInBatch(h,m,k,a,b,l,p,r,t){return this._uSamplerBack.IsUsed()||this._uPixelSize.IsUsed()&&!this._uPixelSize.IsSetTo2InBatch(b,l)||this._uDestStart.IsUsed()&&!this._uDestStart.IsSetTo2InBatch(h.getLeft(),h.getTop())||this._uDestEnd.IsUsed()&&!this._uDestEnd.IsSetTo2InBatch(h.getRight(),h.getBottom())||this._uLayerScale.IsUsed()&&!this._uLayerScale.IsSetTo1InBatch(p)||
this._uLayerAngle.IsUsed()&&!this._uLayerAngle.IsSetTo1InBatch(r)||this._uSrcStart.IsUsed()&&!this._uSrcStart.IsSetTo2InBatch(m.getLeft(),m.getTop())||this._uSrcEnd.IsUsed()&&!this._uSrcEnd.IsSetTo2InBatch(m.getRight(),m.getBottom())||this._uSrcOriginStart.IsUsed()&&!this._uSrcOriginStart.IsSetTo2InBatch(k.getLeft(),k.getTop())||this._uSrcOriginEnd.IsUsed()&&!this._uSrcOriginEnd.IsSetTo2InBatch(k.getRight(),k.getBottom())||this._uLayoutStart.IsUsed()&&!this._uLayoutStart.IsSetTo2InBatch(a.getLeft(),
a.getTop())||this._uLayoutEnd.IsUsed()&&!this._uLayoutEnd.IsSetTo2InBatch(a.getTop(),a.getBottom())||this._uSeconds.IsUsed()&&!this._uSeconds.IsSetTo1InBatch(t)?!1:!0}SetOptionalUniformsInBatch(h,m,k,a,b,l,p,r,t){this._uSamplerBack.IsUsed()||(this._uPixelSize.IsUsed()&&this._uPixelSize.SetBatch2(b,l),this._uDestStart.IsUsed()&&this._uDestStart.SetBatch2(h.getLeft(),h.getTop()),this._uDestEnd.IsUsed()&&this._uDestEnd.SetBatch2(h.getRight(),h.getBottom()),this._uLayerScale.IsUsed()&&this._uLayerScale.SetBatch1(p),
this._uLayerAngle.IsUsed()&&this._uLayerAngle.SetBatch1(r),this._uSrcStart.IsUsed()&&this._uSrcStart.SetBatch2(m.getLeft(),m.getTop()),this._uSrcEnd.IsUsed()&&this._uSrcEnd.SetBatch2(m.getRight(),m.getBottom()),this._uSrcOriginStart.IsUsed()&&this._uSrcOriginStart.SetBatch2(k.getLeft(),k.getTop()),this._uSrcOriginEnd.IsUsed()&&this._uSrcOriginEnd.SetBatch2(k.getRight(),k.getBottom()),this._uLayoutStart.IsUsed()&&this._uLayoutStart.SetBatch2(a.getLeft(),a.getTop()),this._uLayoutEnd.IsUsed()&&this._uLayoutEnd.SetBatch2(a.getTop(),
a.getBottom()),this._uSeconds.IsUsed()&&this._uSeconds.SetBatch1(t))}IsAnimated(){return this._animated}UpdateMatP(h,m){this._hasCurrentMatP&&!m||this._isDeviceTransform||(this._uMatP.IsUsed()&&this._uMatP.UpdateMatrix4fv(h),this._hasCurrentMatP=!0)}SetMatPStale(){this._hasCurrentMatP=!1}UpdateMatMV(h,m){this._hasCurrentMatMV&&!m||this._isDeviceTransform||(this._uMatMV.IsUsed()&&this._uMatMV.UpdateMatrix4fv(h),this._hasCurrentMatMV=!0)}SetMatMVStale(){this._hasCurrentMatMV=!1}_UpdateDeviceTransformUniforms(h){if(!this._isDeviceTransform)throw Error("not device transform shader");
this._uMatP.UpdateMatrix4fv(h);h=this._renderer;var m=h.GetWidth()/2,k=h.GetHeight()/2;const a=h._worldScale,b=c.fromValues(m*a[0],k*a[1],100*self.devicePixelRatio);m=c.fromValues(m*a[0],k*a[1],0);k=f.create();f.lookAt(k,b,m,h._up);f.scale(k,k,a);this._uMatMV.UpdateMatrix4fv(k)}UpdateColor(h){this._uColor.IsUsed()&&this._uColor.Update4f(h[0],h[1],h[2],h[3])}static GetReservedUniformNames(){return g}static GetDefaultVertexShaderSource(h,m){m=m?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif",
`attribute highp ${h?"vec3":"vec2"} aPos;`,`attribute ${m} vec2 aTex;`,`varying ${m} vec2 vTex;`,"uniform highp mat4 matP;\nuniform highp mat4 matMV;\nvoid main(void) {",`	gl_Position = matP * matMV * vec4(aPos, ${h?"":"0.0,"} 1.0);`,"\tvTex = aTex;\n}"].join("\n")}static GetTextureFillFragmentShaderSource(){return"varying mediump vec2 vTex;\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nvoid main(void) {\n\tgl_FragColor = texture2D(samplerFront, vTex) * color;\n}"}static GetTilemapFragmentShaderSource(){return"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nvarying highmedp vec2 vTex;\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nuniform highmedp vec2 srcStart;\nuniform highmedp vec2 pixelSize;\nuniform highmedp vec2 tileSize;\nuniform highmedp vec2 tileSpacing;\nvoid main(void) {\n\thighmedp vec2 tile = floor(vTex);\n\thighmedp vec2 tex = fract(vTex);\n\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);\n\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;\n\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;\n\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;\n}"}static GetPointVertexShaderSource(){return"attribute vec4 aPoints;\nvarying float pointOpacity;\nuniform float zElevation;\nuniform mat4 matP;\nuniform mat4 matMV;\nvoid main(void) {\n\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);\n\tgl_PointSize = aPoints.z;\n\tpointOpacity = aPoints.w;\n}"}static GetPointFragmentShaderSource(){return"uniform lowp sampler2D samplerFront;\nvarying lowp float pointOpacity;\nuniform mediump vec2 pointTexStart;\nuniform mediump vec2 pointTexEnd;\nuniform lowp vec4 color;\nvoid main(void) {\n\tgl_FragColor = texture2D(samplerFront, mix(pointTexStart, pointTexEnd, gl_PointCoord)) * color * pointOpacity;\n}"}static GetColorFillFragmentShaderSource(){return"uniform lowp vec4 color;\nvoid main(void) {\n\tgl_FragColor = color;\n}"}static GetLinearGradientFillFragmentShaderSource(){return"precision lowp float;\nvarying mediump vec2 vTex;\nuniform vec4 color;\nuniform vec4 color2_;\nvec3 fromLinear(vec3 linearRGB)\n{\n\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));\n\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);\n\tvec3 lower = linearRGB * vec3(12.92);\n\treturn mix(higher, lower, vec3(cutoff));\n}\nvec3 toLinear(vec3 sRGB)\n{\n\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));\n\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));\n\tvec3 lower = sRGB/vec3(12.92);\n\treturn mix(higher, lower, vec3(cutoff));\n}\nvoid main(void) {\n\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);\n\tfloat a = mix(color.a, color2_.a, vTex.x);\n\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);\n}"}static GetSmoothLineFillFragmentShaderSource(){return"varying mediump vec2 vTex;\nuniform lowp vec4 color;\nvoid main(void) {\n\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;\n\tgl_FragColor = color * f;\n}"}static GetHardEllipseFillFragmentShaderSource(){return"varying mediump vec2 vTex;\nuniform lowp vec4 color;\nvoid main(void) {\n\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\n\tmediump vec2 diffSq = diff * diff;\n\tmediump float f = step(diffSq.x + diffSq.y, 0.25);\n\tgl_FragColor = color * f;\n}"}static GetHardEllipseOutlineFragmentShaderSource(){return"varying mediump vec2 vTex;\nuniform lowp vec4 color;\nuniform mediump vec2 pixelSize;\nuniform mediump float outlineThickness;\nvoid main(void) {\n\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\n\tmediump vec2 diffSq = diff * diff;\n\tmediump float distSq = diffSq.x + diffSq.y;\n\tmediump vec2 norm = normalize(diff);\n\tmediump vec2 halfNorm = norm * 0.5;\n\tmediump float innerF = step(distSq, 0.25);\n\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;\n\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;\n\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\tgl_FragColor = color * innerF * outerF;\n}"}static GetSmoothEllipseFillFragmentShaderSource(){return"varying mediump vec2 vTex;\nuniform lowp vec4 color;\nuniform mediump vec2 pixelSize;\nvoid main(void) {\n\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\n\tmediump vec2 diffSq = diff * diff;\n\tmediump vec2 norm = normalize(diff);\n\tmediump vec2 halfNorm = norm * 0.5;\n\tmediump vec2 halfNormSq = halfNorm * halfNorm;\n\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;\n\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;\n\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\tgl_FragColor = color * f;\n}"}static GetSmoothEllipseOutlineFragmentShaderSource(){return"varying mediump vec2 vTex;\nuniform lowp vec4 color;\nuniform mediump vec2 pixelSize;\nuniform mediump float outlineThickness;\nvoid main(void) {\n\tmediump vec2 diff = vTex - vec2(0.5, 0.5);\n\tmediump vec2 diffSq = diff * diff;\n\tmediump float distSq = diffSq.x + diffSq.y;\n\tmediump vec2 norm = normalize(diff);\n\tmediump vec2 halfNorm = norm * 0.5;\n\tmediump vec2 halfNormSq = halfNorm * halfNorm;\n\tmediump vec2 pxNorm = pixelSize * norm;\n\tmediump vec2 innerEdge1 = halfNorm - pxNorm;\n\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;\n\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;\n\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;\n\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);\n\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;\n\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\tgl_FragColor = color * innerF * outerF;\n}"}}}"use strict";
{const e=self.C3,d=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);function c(f,g){return f[0]===g[0]&&f[1]===g[1]&&f[2]===g[2]&&f[3]===g[3]&&f[4]===g[4]&&f[5]===g[5]&&f[6]===g[6]&&f[7]===g[7]&&f[8]===g[8]&&f[9]===g[9]&&f[10]===g[10]&&f[11]===g[11]&&f[12]===g[12]&&f[13]===g[13]&&f[14]===g[14]&&f[15]===g[15]}e.Gfx.WebGLShaderUniform=class{constructor(f,g,h){if(!d.has(h))throw Error("invalid uniform type");this._owner=f;this._gl=this._owner.GetWebGLContext();
this._name=g;this._type=h;this._isColorType="color"===this._type;this._location=this._gl.getUniformLocation(this._owner.GetShaderProgram(),g);this._isUsed=!!this._location;f=d.get(h);this._lastValue=new Float32Array(f);this._lastBatchValue=new Float32Array(f)}Release(){this._location=this._gl=this._owner=null}IsUsed(){return this._isUsed}GetType(){return this._type}IsColorType(){return this._isColorType}Init1f(f){this.IsUsed()&&(this._lastValue[0]=f,this._lastBatchValue.set(this._lastValue),this._gl.uniform1f(this._location,
f))}Init1i(f){this.IsUsed()&&(this._lastValue[0]=f,this._lastBatchValue.set(this._lastValue),this._gl.uniform1i(this._location,f))}Init2f(f,g){this.IsUsed()&&(this._lastValue[0]=f,this._lastValue[1]=g,this._lastBatchValue.set(this._lastValue),this._gl.uniform2f(this._location,f,g))}Init3f(f,g,h){this.IsUsed()&&(this._lastValue[0]=f,this._lastValue[1]=g,this._lastValue[2]=h,this._lastBatchValue.set(this._lastValue),this._gl.uniform3f(this._location,f,g,h))}Init4f(f,g,h,m){this.IsUsed()&&(this._lastValue[0]=
f,this._lastValue[1]=g,this._lastValue[2]=h,this._lastValue[3]=m,this._lastBatchValue.set(this._lastValue),this._gl.uniform4f(this._location,f,g,h,m))}Update1f(f){f=Math.fround(f);const g=this._lastValue;g[0]!==f&&(g[0]=f,this._gl.uniform1f(this._location,f))}Update1i(f){const g=this._lastValue;g[0]!==f&&(g[0]=f,this._gl.uniform1i(this._location,f))}Update2f(f,g){f=Math.fround(f);g=Math.fround(g);const h=this._lastValue;if(h[0]!==f||h[1]!==g)h[0]=f,h[1]=g,this._gl.uniform2f(this._location,f,g)}Update3f(f,
g,h){f=Math.fround(f);g=Math.fround(g);h=Math.fround(h);const m=this._lastValue;if(m[0]!==f||m[1]!==g||m[2]!==h)m[0]=f,m[1]=g,m[2]=h,this._gl.uniform3f(this._location,f,g,h)}Update4f(f,g,h,m){f=Math.fround(f);g=Math.fround(g);h=Math.fround(h);m=Math.fround(m);const k=this._lastValue;if(k[0]!==f||k[1]!==g||k[2]!==h||k[3]!==m)k[0]=f,k[1]=g,k[2]=h,k[3]=m,this._gl.uniform4f(this._location,f,g,h,m)}UpdateMatrix4fv(f){const g=this._lastValue;c(g,f)||(e.typedArraySet16(g,f,0),this._gl.uniformMatrix4fv(this._location,
!1,f))}IsSetToCustomInBatch(f){const g=this._lastBatchValue;return this.IsColorType()?g[0]===Math.fround(f.getR())&&g[1]===Math.fround(f.getG())&&g[2]===Math.fround(f.getB()):g[0]===Math.fround(f)}SetBatchValueCustom(f){const g=this._lastBatchValue;this.IsColorType()?(g[0]=f.getR(),g[1]=f.getG(),g[2]=f.getB()):g[0]=f}IsSetTo1InBatch(f){return this._lastBatchValue[0]===Math.fround(f)}IsSetTo2InBatch(f,g){const h=this._lastBatchValue;return h[0]===Math.fround(f)&&h[1]===Math.fround(g)}SetBatch1(f){this._lastBatchValue[0]=
f}SetBatch2(f,g){const h=this._lastBatchValue;h[0]=f;h[1]=g}}}"use strict";
{const e=self.C3,d=self.glMatrix,c=d.vec4,f=d.mat4;e.Gfx.BatchState=class{constructor(g){this.renderer=g;this.currentMV=f.create();this.currentMatP=f.create();this.currentFramebuffer=null;this.currentColor=c.fromValues(1,1,1,1);this.currentShader=null;this.pointTexCoords=new e.Rect;this.clearColor=e.New(e.Color,0,0,0,0)}};e.Gfx.WebGLBatchJob=class{constructor(g){const h=new ArrayBuffer(96);this._type=0;this._batchState=g;this._gl=g.renderer.GetContext();this._indexCount=this._startIndex=0;this._texParam=
null;this._mat4param=new Float32Array(h,0,16);this._colorParam=new Float32Array(h,64,4);this._srcOriginRect=new Float32Array(h,80,4);this._shaderParams=[]}InitQuad(g,h){this._type=1;this._startIndex=g;this._indexCount=h}DoQuad(){const g=this._gl;g.drawElements(g.TRIANGLES,this._indexCount,g.UNSIGNED_SHORT,this._startIndex)}InitSetTexture(g){this._type=2;this._texParam=g}DoSetTexture(){const g=this._gl,h=this._texParam;g.bindTexture(g.TEXTURE_2D,h?h._GetTexture():null)}InitSetColor(g){this._type=3;
g.writeToTypedArray(this._colorParam,0)}DoSetColor(){const g=this._colorParam,h=this._batchState;c.copy(h.currentColor,g);h.currentShader.UpdateColor(g)}InitSetGradientColor(g){this._type=19;g.writeToTypedArray(this._colorParam,0)}DoSetGradientColor(){const g=this._colorParam,h=this._batchState.currentShader;h._uColor2.IsUsed()&&h._uColor2.Update4f(g[0],g[1],g[2],g[3])}InitSetBlend(g,h){this._type=4;this._startIndex=g;this._indexCount=h}DoSetBlend(){this._gl.blendFunc(this._startIndex,this._indexCount)}InitUpdateModelView(g){this._type=
5;f.copy(this._mat4param,g)}DoUpdateModelView(){const g=this._batchState,h=g.renderer._allShaderPrograms,m=g.currentShader,k=this._mat4param;for(let a=0,b=h.length;a<b;++a){const l=h[a];l===m?l.UpdateMatMV(k,!0):l.SetMatMVStale()}f.copy(g.currentMV,k)}InitSetRenderTarget(g,h,m){this._type=6;this._texParam=g;this._startIndex=h?1:0;h&&f.copy(this._mat4param,m)}DoSetRenderTarget(){var g=this._gl,h=this._texParam;const m=0!==this._startIndex,k=this._mat4param,a=this._batchState,b=a.renderer;if(h){const l=
h._GetFramebuffer();a.currentFramebuffer=l;g.bindFramebuffer(g.FRAMEBUFFER,l);g=h.GetWidth();h=h.GetHeight()}else a.currentFramebuffer=null,g.bindFramebuffer(g.FRAMEBUFFER,null),g=b.GetScissoredViewportWidth(),h=b.GetScissoredViewportHeight();m&&b._UpdateViewportBatch(g,h,k)}InitClearSurface(g){this._type=7;g.writeToTypedArray(this._mat4param,0)}InitClearSurface2(g,h,m,k){this._type=7;const a=this._mat4param;a[0]=g;a[1]=h;a[2]=m;a[3]=k}DoClearSurface(){const g=this._gl;var h=this._mat4param,m=this._batchState;
const k=m.clearColor;(m=m.renderer._isScissorViewport&&e.isDebug)&&g.disable(g.SCISSOR_TEST);const a=h[0],b=h[1],l=h[2];h=h[3];k.equalsRgba(a,b,l,h)||(g.clearColor(a,b,l,h),k.setRgba(a,b,l,h));g.clear(g.COLOR_BUFFER_BIT);m&&g.enable(g.SCISSOR_TEST)}InitClearRect(g,h,m,k,a,b,l,p){this._type=8;const r=this._mat4param;r[0]=g;r[1]=h;r[2]=m;r[3]=k;r[4]=a;r[5]=b;r[6]=l;r[7]=p}DoClearRectangle(){const g=this._gl;var h=this._mat4param,m=this._batchState;const k=m.renderer;m=m.clearColor;k._isScissorViewport||
g.enable(g.SCISSOR_TEST);g.scissor(h[0],h[1],h[2],h[3]);const a=h[4],b=h[5],l=h[6];h=h[7];m.equalsRgba(a,b,l,h)||(g.clearColor(a,b,l,h),m.setRgba(a,b,l,h));g.clear(g.COLOR_BUFFER_BIT);k._isScissorViewport?g.scissor(0,0,k._viewportScissorWidth,k._viewportScissorHeight):g.disable(g.SCISSOR_TEST)}InitSetPointTexCoords(g){this._type=13;g.writeToTypedArray(this._mat4param,0)}DoSetPointTextureCoords(){const g=this._mat4param;this._batchState.pointTexCoords.set(g[0],g[1],g[2],g[3])}InitPoints(g,h){this._type=
9;this._startIndex=g;this._indexCount=1;this._mat4param[0]=h}DoPoints(){const g=this._gl,h=this._batchState,m=h.renderer._spPoints;g.useProgram(m._shaderProgram);m.UpdateMatP(h.currentMatP,!1);m.UpdateMatMV(h.currentMV,!1);var k=h.pointTexCoords;m._uPointTexStart.IsUsed()&&m._uPointTexStart.Update2f(k.getLeft(),k.getTop());m._uPointTexEnd.IsUsed()&&m._uPointTexEnd.Update2f(k.getRight(),k.getBottom());k=this._mat4param[0];m._uZElevation.IsUsed()&&m._uZElevation.Update1f(k);m._uColor.IsUsed()&&(k=h.currentColor,
m._uColor.Update4f(k[0],k[1],k[2],k[3]));g.drawArrays(g.POINTS,this._startIndex/4,this._indexCount);g.useProgram(h.currentShader._shaderProgram)}InitSetProgram(g){this._type=10;this._texParam=g}DoSetProgram(){var g=this._gl;const h=this._batchState,m=this._texParam;h.currentShader=m;g.useProgram(m._shaderProgram);m.UpdateMatP(h.currentMatP,!1);m.UpdateMatMV(h.currentMV,!1);m._uColor.IsUsed()&&(g=h.currentColor,m._uColor.Update4f(g[0],g[1],g[2],g[3]))}InitSetProgramParameters(){this._type=11}DoSetProgramParameters(){const g=
this._batchState.currentShader;g._hasAnyOptionalUniforms&&this._DoSetOptionalUniformProgramParameters(g);g._uCustomParameters.length&&this._DoUpdateCustomProgramParameters(g)}_DoSetOptionalUniformProgramParameters(g){const h=this._gl,m=this._mat4param,k=this._colorParam,a=this._srcOriginRect;if(g._uSamplerBack.IsUsed()){const b=this._batchState.renderer,l=this._texParam;b._lastTexture1!==l&&(h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,l?l._GetTexture():null),b._lastTexture1=l,h.activeTexture(h.TEXTURE0))}g._uPixelSize.IsUsed()&&
g._uPixelSize.Update2f(m[0],m[1]);g._uDestStart.IsUsed()&&g._uDestStart.Update2f(m[2],m[3]);g._uDestEnd.IsUsed()&&g._uDestEnd.Update2f(m[4],m[5]);g._uLayerScale.IsUsed()&&g._uLayerScale.Update1f(m[6]);g._uLayerAngle.IsUsed()&&g._uLayerAngle.Update1f(m[7]);g._uSrcStart.IsUsed()&&g._uSrcStart.Update2f(m[12],m[13]);g._uSrcEnd.IsUsed()&&g._uSrcEnd.Update2f(m[14],m[15]);g._uSrcOriginStart.IsUsed()&&g._uSrcOriginStart.Update2f(a[0],a[1]);g._uSrcOriginEnd.IsUsed()&&g._uSrcOriginEnd.Update2f(a[2],a[3]);g._uLayoutStart.IsUsed()&&
g._uLayoutStart.Update2f(k[0],k[1]);g._uLayoutEnd.IsUsed()&&g._uLayoutEnd.Update2f(k[2],k[3]);g._uSeconds.IsUsed()&&g._uSeconds.Update1f(this._startIndex)}_DoUpdateCustomProgramParameters(g){g=g._uCustomParameters;const h=this._shaderParams;for(let m=0,k=g.length;m<k;++m){const a=g[m],b=h[m];a.IsColorType()?a.Update3f(b.getR(),b.getG(),b.getB()):a.Update1f(b)}}InitInvalidateFramebuffer(g){this._type=12;this._texParam=g}DoInvalidateFramebuffer(){const g=this._gl,h=this._texParam,m=this._batchState.currentFramebuffer;
h!==m&&g.bindFramebuffer(g.FRAMEBUFFER,h);g.invalidateFramebuffer(g.FRAMEBUFFER,[g.COLOR_ATTACHMENT0]);h!==m&&g.bindFramebuffer(g.FRAMEBUFFER,m)}InitBlitFramebuffer(g,h,m){this._type=15;const k=this._mat4param,a=this._batchState.renderer;k[0]=g.GetWidth();k[1]=g.GetHeight();k[2]=h?h.GetWidth():a.GetWidth();k[3]=h?h.GetHeight():a.GetHeight();k[4]=g.IsLinearSampling()?1:0;k[5]="stretch"===m;m=this._shaderParams;e.clearArray(m);m.push(g._GetFramebuffer());m.push(h?h._GetFramebuffer():null)}DoBlitFramebuffer(){var g=
this._mat4param,h=this._shaderParams;const m=this._gl;var k=g[0],a=g[1],b=g[2];const l=g[3],p=0!==g[4];g=0!==g[5];const r=h[1];m.bindFramebuffer(m.READ_FRAMEBUFFER,h[0]);m.bindFramebuffer(m.DRAW_FRAMEBUFFER,r);g?m.blitFramebuffer(0,0,k,a,0,0,b,l,m.COLOR_BUFFER_BIT,p?m.LINEAR:m.NEAREST):(h=Math.min(k,b),k=Math.min(a,l),b=Math.max(a-l,0),a=Math.max(l-a,0),m.blitFramebuffer(0,b,h,k+b,0,a,h,k+a,m.COLOR_BUFFER_BIT,m.NEAREST))}InitStartQuery(g){this._type=16;this._texParam=g}DoStartQuery(){this._texParam.BeginTimeElapsed();
this._texParam=null}InitEndQuery(g){this._type=17;this._texParam=g}DoEndQuery(){this._texParam.EndTimeElapsed();this._texParam=null}InitSetEllipseParams(g,h,m){this._type=18;const k=this._mat4param;k[0]=g;k[1]=h;k[2]=m}DoSetEllipseParams(){const g=this._batchState.currentShader,h=this._mat4param;g._uPixelSize.IsUsed()&&g._uPixelSize.Update2f(h[0],h[1]);g._uOutlineThickness.IsUsed()&&g._uOutlineThickness.Update1f(h[2])}InitSetTilemapInfo(g,h,m,k,a,b,l){this._type=14;const p=this._mat4param;g.writeToTypedArray(p,
0);p[4]=1/h;p[5]=1/m;p[6]=k/h;p[7]=a/m;p[8]=b/h;p[9]=l/m}DoSetTilemapInfo(){const g=this._batchState.currentShader,h=this._mat4param;g._uSrcStart.IsUsed()&&g._uSrcStart.Update2f(h[0],h[1]);g._uPixelSize.IsUsed()&&g._uPixelSize.Update2f(h[4],h[5]);g._uTileSize.IsUsed()&&g._uTileSize.Update2f(h[6],h[7]);g._uTileSpacing.IsUsed()&&g._uTileSpacing.Update2f(h[8],h[9])}Run(){switch(this._type){case 1:this.DoQuad();break;case 2:this.DoSetTexture();break;case 3:this.DoSetColor();break;case 4:this.DoSetBlend();
break;case 5:this.DoUpdateModelView();break;case 6:this.DoSetRenderTarget();break;case 7:this.DoClearSurface();break;case 8:this.DoClearRectangle();break;case 9:this.DoPoints();break;case 10:this.DoSetProgram();break;case 11:this.DoSetProgramParameters();break;case 12:this.DoInvalidateFramebuffer();break;case 13:this.DoSetPointTextureCoords();break;case 14:this.DoSetTilemapInfo();break;case 15:this.DoBlitFramebuffer();break;case 16:this.DoStartQuery();break;case 17:this.DoEndQuery();break;case 18:this.DoSetEllipseParams();
break;case 19:this.DoSetGradientColor()}}}}"use strict";
{const e=self.C3,d={timeout:60},c=new e.Color(0,0,0,1),f=new Set(["left","center","right"]),g=new Set(["top","center","bottom"]),h=new Set(["word","character"]),m=new Set;e.FontManager&&e.FontManager.addEventListener("fontload",l=>{l=l.font.GetName();for(const p of m)(p.IsBBCodeEnabled()||e.equalsNoCase(p.GetFontName(),l))&&p._SetTextChanged()});function k(l,p,r,t,u,w){p?"Gecko"===e.Platform.BrowserEngine?l.strokeText(r,t,u,w):l.strokeText(r,t,u):"Gecko"===e.Platform.BrowserEngine?l.fillText(r,t,
u,w):l.fillText(r,t,u)}function a(l,p,r,t,u,w){p?l.strokeRect(r,t,u,w):l.fillRect(r,t,u,w)}function b(l){return 4/3*l}e.Gfx.RendererText=class{constructor(l,p){p=Object.assign({},d,p);this._renderer=l;this._fontName="Arial";this._fontSize=16;this._lineHeight=0;this._isItalic=this._isBold=!1;this._colorStr="black";this._isBBcodeEnabled=!1;this.onloadfont=null;this._alreadyLoadedFonts=new Set;this._horizontalAlign="left";this._verticalAlign="top";this._text="";this._bbString=null;this._wrappedText=
e.New(e.WordWrap);this._wrapMode="word";this._isUpdating=this._textChanged=!1;this._isAsync=!0;this._drawMaxCharCount=-1;this._height=this._width=this._cssHeight=this._cssWidth=this._drawCharCount=0;this._zoom=1;this._changed=!1;this._measureContext=this._textContext=this._textCanvas=null;this._lastCanvasHeight=this._lastCanvasWidth=-1;this._lastTextCanvasFillStyle=this._lastMeasureCanvasFont=this._lastTextCanvasFont="";this._lastTextCanvasLineWidth=this._lastTextCanvasOpacity=1;this._measureTextCallback=
(r,t)=>this._MeasureText(r,t);this._texture=null;this._textureHeight=this._textureWidth=0;this._rcTex=new e.Rect;this._scaleFactor=1;this._needToRecreateTexture=!1;this._textureTimeout=new e.IdleTimeout(()=>{this.ReleaseTexture();this._SetTextCanvasSize(8,8)},p.timeout);this.ontextureupdate=null;this._wasReleased=!1;m.add(this)}Release(){this.onloadfont=null;this._alreadyLoadedFonts.clear();this._measureTextCallback=this._measureContext=this._textContext=this._textCanvas=this._bbString=null;this._textureTimeout.Release();
this.ontextureupdate=null;this.ReleaseTexture();this._wrappedText.Clear();this._renderer=this._wrappedText=null;this._wasReleased=!0;m.delete(this)}_SetChanged(){this._changed=!0}_SetTextChanged(){this._SetChanged();this._wrappedText.Clear();this._textChanged=!0}SetIsAsync(l){this._isAsync=!!l}IsAsync(){return this._isAsync}SetBBCodeEnabled(l){l=!!l;this._isBBcodeEnabled!==l&&(this._isBBcodeEnabled=l,this._textContext&&(this._textContext.textBaseline=this._isBBcodeEnabled?"alphabetic":"top"),this._SetTextChanged())}IsBBCodeEnabled(){return this._isBBcodeEnabled}SetFontName(l){l||
(l="serif");this._fontName!==l&&(this._fontName=l,this._SetTextChanged())}GetFontName(){return this._fontName}SetFontSize(l){.1>l&&(l=.1);this._fontSize!==l&&(this._fontSize=l,this._SetTextChanged())}SetLineHeight(l){this._lineHeight!==l&&(this._lineHeight=l,this._SetChanged())}SetBold(l){l=!!l;this._isBold!==l&&(this._isBold=l,this._SetTextChanged())}SetItalic(l){l=!!l;this._isItalic!==l&&(this._isItalic=l,this._SetTextChanged())}SetDrawMaxCharacterCount(l){l=Math.floor(l);this._drawMaxCharCount!==
l&&(this._drawMaxCharCount=l,this._SetChanged())}GetDrawMaxCharacterCount(){return this._drawMaxCharCount}_GetStyleTag(l,p){for(let r=l.length-1;0<=r;--r){const t=l[r];if(t.tag===p)return t}return null}_HasStyleTag(l,p){return!!this._GetStyleTag(l,p)}_GetFontString(l,p){let r="";if(this._isBold||this._HasStyleTag(p,"b"))r+="bold";if(this._isItalic||this._HasStyleTag(p,"i"))r+=" italic";var t=this._GetStyleTag(p,"size");t=t?parseFloat(t.param):this._fontSize;r=l?r+(" "+t+"pt"):r+(" "+t*this._scaleFactor*
this._zoom*self.devicePixelRatio+"pt");l=this._fontName;(p=this._GetStyleTag(p,"font"))&&p.param&&(l=p.param,this.onloadfont&&!this._alreadyLoadedFonts.has(l)&&(this.onloadfont(l),this._alreadyLoadedFonts.add(l)));l&&(r+=' "'+l+'"');return r}SetColor(l){l instanceof e.Color&&(l=l.getCssRgb());this._colorStr!==l&&(this._colorStr=l,this._SetChanged())}SetColorRgb(l,p,r){c.setRgb(l,p,r);this.SetColor(c)}SetHorizontalAlignment(l){if(!f.has(l))throw Error("invalid horizontal alignment");this._horizontalAlign!==
l&&(this._horizontalAlign=l,this._SetChanged())}SetVerticalAlignment(l){if(!g.has(l))throw Error("invalid vertical alignment");this._verticalAlign!==l&&(this._verticalAlign=l,this._SetChanged())}SetWordWrapMode(l){if(!h.has(l))throw Error("invalid word wrap mode");this._wrapMode!==l&&(this._wrapMode=l,this._SetTextChanged())}SetText(l){this._text!==l&&(this._text=l,this._SetTextChanged())}SetSize(l,p,r){"undefined"===typeof r&&(r=1);if(!(0>=l||0>=l||this._cssWidth===l&&this._cssHeight===p&&this._zoom===
r)){1===this._zoom!==(1===r)&&(this._needToRecreateTexture=!0);var t=this._cssWidth,u=this._zoom;this._cssWidth=l;this._cssHeight=p;this._zoom=r;l=self.devicePixelRatio;this._width=this._cssWidth*this._zoom*l;this._height=this._cssHeight*this._zoom*l;l=Math.max(this._width,this._height);p=Math.min(this._renderer.GetMaxTextureSize(),2048);r=1;l>p&&(r=p/l,this._width=Math.min(this._width*r,p),this._height=Math.min(this._height*r,p));this._scaleFactor=r;0<this._textureWidth&&0<this._textureHeight&&this._zoom===
u&&this._rcTex.set(0,0,this._width/this._textureWidth,this._height/this._textureHeight);this._cssWidth!==t?this._SetTextChanged():this._SetChanged()}}GetWidth(){return this._width}GetHeight(){return this._height}GetTextWidth(){this._MaybeWrapText();return this._wrappedText.GetMaxLineWidth()}GetTextHeight(){this._MaybeWrapText();return this._wrappedText.GetTotalLineHeight()+this._wrappedText.GetLineCount()*(this._lineHeight+4)-this._lineHeight}GetTexture(){this._textureTimeout.Reset();this._MaybeUpdate();
return this._texture}_MaybeUpdate(){this._texture&&!this._changed&&!this._textChanged||this._isUpdating||0>=this._width||0>=this._height||(this._changed=!1,this._isUpdating=!0,this._isAsync?e.Asyncify(()=>this._DoUpdate()):this._DoUpdate())}_DoUpdate(){this._wasReleased||(this._SetTextCanvasSize(Math.ceil(this._width),Math.ceil(this._height)),this._MaybeWrapText(),this._DrawTextToCanvas(),this._UpdateTexture(),this._textureTimeout.Reset(),this._isUpdating=!1)}_SetTextCanvasSize(l,p){this._textCanvas||
(this._textCanvas=e.CreateCanvas(16,16));let r=!1;if(this._lastCanvasWidth!==l||this._lastCanvasHeight!==p)this._lastCanvasWidth=l,this._lastCanvasHeight=p,this._textCanvas.width=l,this._textCanvas.height=p,r=!0;this._textContext||(this._textContext=this._textCanvas.getContext("2d"),r=!0);r?(this._textContext.textBaseline=this._isBBcodeEnabled?"alphabetic":"top",this._textContext.font=this._lastTextCanvasFont,this._textContext.fillStyle=this._lastTextCanvasFillStyle,this._textContext.strokeStyle=
this._lastTextCanvasFillStyle,this._textContext.globalAlpha=this._lastTextCanvasOpacity,this._textContext.lineWidth=this._lastTextCanvasLineWidth):this._textContext.clearRect(0,0,l,p)}_MaybeCreateMeasureContext(){this._measureContext||(this._measureContext=e.CreateCanvas(16,16).getContext("2d"))}_SetMeasureFontString(l){this._lastMeasureCanvasFont!==l&&(this._lastMeasureCanvasFont=l,this._measureContext.font=l)}_MaybeWrapText(){this._textChanged&&(this._MaybeCreateMeasureContext(),!this._isBBcodeEnabled||
this._bbString&&this._bbString.toString()===this._text||(this._bbString=new e.BBString(this._text,{noEscape:!0})),this._wrappedText.WordWrap(this._isBBcodeEnabled?this._bbString.toFragmentList():this._text,this._measureTextCallback,this._cssWidth,this._wrapMode,0),this._textChanged=!1)}_MeasureText(l,p){this._SetMeasureFontString(this._GetFontString(!0,p));p=(p=this._GetStyleTag(p,"size"))?parseFloat(p.param):this._fontSize;return{width:this._measureContext.measureText(l).width,height:b(p)}}_SetDrawFontString(l){this._lastTextCanvasFont!==
l&&(this._lastTextCanvasFont=l,this._textContext.font=l)}_SetDrawCanvasColor(l){this._lastTextCanvasFillStyle!==l&&(this._lastTextCanvasFillStyle=l,this._textContext.fillStyle=l,this._textContext.strokeStyle=l)}_SetDrawCanvasOpacity(l){this._lastTextCanvasOpacity!==l&&(this._lastTextCanvasOpacity=l,this._textContext.globalAlpha=l)}_SetDrawCanvasLineWith(l){this._lastTextCanvasLineWidth!==l&&(this._lastTextCanvasLineWidth=l,this._textContext.lineWidth=l)}_DrawTextToCanvas(){this._drawCharCount=0;const l=
this._scaleFactor*this._zoom*self.devicePixelRatio,p=(4+this._lineHeight)*l;let r=0;const t=this._wrappedText.GetLines();var u=t.reduce((w,x)=>w+x.height*l+p,0)-this._lineHeight*l;"center"===this._verticalAlign?r=Math.max(this._height/2-u/2,0):"bottom"===this._verticalAlign&&(r=this._height-u-2);for(let w=0,x=t.length;w<x;++w){u=t[w];const A=u.height*l,E=r;if(this._isBBcodeEnabled){if(r+=A,0<w&&r>this._height-4*l)break}else if(0<w&&r>=this._height-A)break;0<=E&&this._DrawTextLine(u,r,l);this._isBBcodeEnabled||
(r+=A);r+=p}}_DrawTextLine(l,p,r){let t=0;"center"===this._horizontalAlign?t=(this._width-l.width*r)/2:"right"===this._horizontalAlign&&(t=this._width-l.width*r);for(const u of l.fragments)this._DrawTextFragment(u,t,p,r,l.height),t+=u.width*r}_DrawTextFragment(l,p,r,t,u){const w=this._textContext,x=u/16;u=l.width*t;const A=l.height*t,E=l.height/16;var y=(4+this._lineHeight)*t;const B=l.styles;l=l.text;if(-1!==this._drawMaxCharCount){if(this._drawCharCount>=this._drawMaxCharCount)return;this._drawCharCount+
l.length>this._drawMaxCharCount&&(l=l.substr(0,this._drawMaxCharCount-this._drawCharCount),u=this._MeasureText(l,B).width*t);this._drawCharCount+=l.length}const H=this._GetStyleTag(B,"background"),P=this._HasStyleTag(B,"u"),F=this._HasStyleTag(B,"s");if((!e.IsStringAllWhitespace(l)||H||P||F)&&!this._HasStyleTag(B,"hide")){var I=this._GetStyleTag(B,"offsetx");p+=I?parseFloat(I.param)*t:0;I=this._GetStyleTag(B,"offsety");r+=I?parseFloat(I.param)*t:0;H&&(this._SetDrawCanvasColor(H.param),w.fillRect(p,
r-A,u,A+y));y=this._GetStyleTag(B,"color");this._SetDrawCanvasColor(y?y.param:this._colorStr);y=this._GetStyleTag(B,"opacity");this._SetDrawCanvasOpacity(y?parseFloat(y.param)/100:1);(y=this._HasStyleTag(B,"stroke"))&&this._SetDrawCanvasLineWith(E*this._scaleFactor*this._zoom);P&&a(w,y,p,r+t*x,u,t*x);F&&a(w,y,p,r-A/4,u,t*E);this._SetDrawFontString(this._GetFontString(!1,B));k(w,y,l,p,r,u);!y&&(this._SetDrawCanvasLineWith(E*this._scaleFactor*this._zoom),t=this._GetStyleTag(B,"outline"))&&(this._SetDrawCanvasColor(t.param),
k(w,!0,l,p,r,u))}}_UpdateTexture(){if(!this._renderer.IsContextLost()&&(this._textureWidth=Math.ceil(this._width),this._textureHeight=Math.ceil(this._height),this._rcTex.set(0,0,this._width/this._textureWidth,this._height/this._textureHeight),this._needToRecreateTexture&&(this.ReleaseTexture(),this._needToRecreateTexture=!1),this._texture||(this._texture=this._renderer.CreateDynamicTexture(this._textureWidth,this._textureHeight,{mipMap:1===this._zoom,mipMapQuality:"high"})),this._renderer.UpdateTexture(this._textCanvas,
this._texture),this.ontextureupdate))this.ontextureupdate()}GetTexRect(){return this._rcTex}ReleaseTexture(){this._texture&&(this._renderer.IsContextLost()||this._renderer.DeleteTexture(this._texture),this._texture=null)}static OnContextLost(){for(const l of m)l.ReleaseTexture()}static GetAll(){return m.values()}}}"use strict";
{const e=self.C3;class d{constructor(c){this._gl=c.GetContext();this._version=c.GetWebGLVersionNumber();this._timerExt=c._GetDisjointTimerQueryExtension();this._query=null;this._hasResult=this._isActive=!1;this._result=0;this._query=1===this._version?this._timerExt.createQueryEXT():this._gl.createQuery()}Release(){this._DeleteQueryObject();this._timerExt=this._gl=null;this._hasResult=!1}_DeleteQueryObject(){this._query&&(1===this._version?this._timerExt.deleteQueryEXT(this._query):this._gl.deleteQuery(this._query),
this._query=null)}BeginTimeElapsed(){if(this._isActive)throw Error("query already active");1===this._version?this._timerExt.beginQueryEXT(this._timerExt.TIME_ELAPSED_EXT,this._query):this._gl.beginQuery(this._timerExt.TIME_ELAPSED_EXT,this._query);this._isActive=!0}EndTimeElapsed(){if(!this._isActive)throw Error("query not active");1===this._version?this._timerExt.endQueryEXT(this._timerExt.TIME_ELAPSED_EXT):this._gl.endQuery(this._timerExt.TIME_ELAPSED_EXT);this._isActive=!1}CheckForResult(){if(this._query&&
!this._hasResult&&!this._isActive){var c=1===this._version?this._timerExt.getQueryObjectEXT(this._query,this._timerExt.QUERY_RESULT_AVAILABLE_EXT):this._gl.getQueryParameter(this._query,this._gl.QUERY_RESULT_AVAILABLE);var f=this._gl.getParameter(this._timerExt.GPU_DISJOINT_EXT);c&&!f&&(this._result=1===this._version?this._timerExt.getQueryObjectEXT(this._query,this._timerExt.QUERY_RESULT_EXT):this._gl.getQueryParameter(this._query,this._gl.QUERY_RESULT),this._result/=1E9,this._hasResult=!0);(c||
f)&&this._DeleteQueryObject()}}HasResult(){return this._hasResult}GetResult(){if(!this._hasResult)throw Error("no result available");return this._result}}e.Gfx.WebGLTimeElapsedQuery=class{constructor(c){this._renderer=c;this._frameNumber=c.GetFrameNumber();this._isActive=!1;this._parentQuery=null;this._isNested=!1;this._realQuery=null;this._queries=[]}Release(){for(const c of this._queries)c instanceof d&&c.Release();e.clearArray(this._queries);this._renderer=this._realQuery=this._parentQuery=null}BeginTimeElapsed(){if(this._isActive)throw Error("query already active");
const c=this._renderer._GetTimeQueryStack();0<c.length?(this._isNested=!0,this._parentQuery=c[c.length-1],this._parentQuery._EndReal(),this._parentQuery._queries.push(this)):(this._isNested=!1,this._parentQuery=null);this._isActive=!0;c.push(this);this._StartReal()}EndTimeElapsed(){if(!this._isActive)throw Error("query not active");if(this._renderer._GetTimeQueryStack().pop()!==this)throw Error("can only end most nested query");this._isActive=!1;this._EndReal();this._parentQuery&&(this._parentQuery._StartReal(),
this._parentQuery=null)}_StartReal(){this._realQuery=e.New(d,this._renderer);this._queries.push(this._realQuery);this._realQuery.BeginTimeElapsed()}_EndReal(){this._realQuery.EndTimeElapsed();this._realQuery=null}CheckForResult(){for(const c of this._queries)c.CheckForResult()}IsNested(){return this._isNested}HasResult(){return this._queries.every(c=>c.HasResult())}GetResult(){return this._queries.reduce((c,f)=>c+f.GetResult(),0)}GetFrameNumber(){return this._frameNumber}}}"use strict";
{const e=self.C3;e.Gfx.WebGLQueryResultBuffer=class{constructor(d,c=1E3){this._renderer=d;this._maxQueries=c;this._buffer=[];this._renderer._AddQueryResultBuffer(this)}Release(){this.Clear();this._renderer._RemoveQueryResultBuffer(this);this._renderer=null}Clear(){for(const d of this._buffer)d.Release();e.clearArray(this._buffer)}AddTimeElapsedQuery(){const d=new e.Gfx.WebGLTimeElapsedQuery(this._renderer);this._buffer.push(d);this._buffer.length>this._maxQueries&&this._buffer.shift().Release();return d}CheckForResults(d){for(const c of this._buffer){if(c.GetFrameNumber()>=
d)break;if(c.IsNested())break;c.CheckForResult()}}GetFrameRangeResultSum(d,c){if(c<=d)return NaN;let f=0;for(const g of this._buffer){if(g.GetFrameNumber()>=c)break;if(!(g.GetFrameNumber()<d))if(g.HasResult())f+=g.GetResult();else return NaN}return f}DeleteAllBeforeFrameNumber(d){for(let c=0,f=this._buffer.length;c<f;++c){const g=this._buffer[c];if(g.GetFrameNumber()<d)g.Release();else{0<c&&this._buffer.splice(0,c);break}}}}}"use strict";
{const e=self.C3,d=self.glMatrix,c=d.vec3,f=d.vec4,g=d.mat4,h={powerPreference:"default",enableGpuProfiling:!0,alpha:!1,lowLatency:!1,maxWebGLVersion:2},m=new Set(["default","low-power","high-performance"]);function k(y,B){return y[0]===B[0]&&y[1]===B[1]&&y[2]===B[2]&&y[3]===B[3]&&y[4]===B[4]&&y[5]===B[5]&&y[6]===B[6]&&y[7]===B[7]&&y[8]===B[8]&&y[9]===B[9]&&y[10]===B[10]&&y[11]===B[11]&&y[12]===B[12]&&y[13]===B[13]&&y[14]===B[14]&&y[15]===B[15]}const a=new e.Quad(0,0,1,0,1,1,0,1),b=c.fromValues(0,
0,0),l=c.fromValues(0,0,0),p=g.create(),r=new e.Quad,t=new e.Rect;let u=null;e.isDebug&&(self.debug_lose_context=function(){u?u.loseContext():console.warn("WEBGL_lose_context not supported")},self.debug_restore_context=function(){u?u.restoreContext():console.warn("WEBGL_lose_context not supported")});const w=new Set;let x=-1;function A(){x=-1;for(const y of w)y.checkFunc()&&(y.resolve(),w.delete(y));0<w.size&&(x=self.requestAnimationFrame(A))}function E(y,B,H){if(2<=H&&(H=y.getContext("webgl2",B)))return{gl:H,
version:2};H=y.getContext("webgl",B);if(!H)try{H=y.getContext("experimental-webgl",B)}catch(P){console.warn("Error requesting 'experimental-webgl' context: ",P)}return{gl:H,version:1}}e.Gfx.WebGLRenderer=class extends e.Gfx.RendererBase{constructor(y,B){super();B=Object.assign({},h,B);if(!m.has(B.powerPreference))throw Error("invalid power preference");let H=!1;const P={alpha:!!B.alpha,depth:!1,antialias:!1,powerPreference:B.powerPreference,failIfMajorPerformanceCaveat:!0};B.lowLatency&&(P.desynchronized=
!0,P.preserveDrawingBuffer=!0);let F=E(y,P,B.maxWebGLVersion);F.gl||(H=!0,P.failIfMajorPerformanceCaveat=!1,F=E(y,P,B.maxWebGLVersion));if(!F.gl)throw Error("failed to initialise WebGL context");this._gl=y=F.gl;this._attribs=y.getContextAttributes();B.lowLatency&&!this._attribs.desynchronized&&console.info("[WebGLRenderer] Low-latency mode specified but is not supported here");this._versionString=y.getParameter(y.VERSION);this._version=F.version;this._is3d=!0;this._lastBackbufferHeight=this._lastBackbufferWidth=
0;this._pointBuffer=this._indexBuffer=this._texcoordBuffer=this._vertexBuffer=null;this._vertexData=new Float32Array(8E3*this.GetNumVertexComponents());this._indexData=new Uint16Array(12E3);this._texcoordData=new Float32Array(16E3);this._pointData=new Float32Array(32E3);this._lastVertexPtr=this._pointPtr=this._texPtr=this._vertexPtr=0;this._spTilemapFill=this._spPoints=this._spSmoothLineFill=this._spSmoothEllipseOutline=this._spSmoothEllipseFill=this._spHardEllipseOutline=this._spHardEllipseFill=
this._spLinearGradientFill=this._spColorFill=this._spDeviceTransformTextureFill=this._lastProgram=null;this._batch=[];this._topOfBatch=this._batchPtr=0;this._currentRenderTarget=null;this._lastPointZ=this._currentZ=this._baseZ=0;this._batchState=e.New(e.Gfx.BatchState,this);this._lastColor=e.New(e.Color,1,1,1,1);this._lastTexture1=this._lastTexture0=null;this._lastDestBlend=this._lastSrcBlend=0;this._lineWidth=1;this._lineWidthStack=[this._lineWidth];this._lineCap=1;this._lineCapStack=[this._lineCap];
this._lineOffset=.5;this._lineOffsetStack=[this._lineOffset];this._isScissorViewport=!1;this._viewportScissorHeight=this._viewportScissorWidth=-1;this._lastPointTexCoords=new e.Rect;this._maxTextureSize=-1;this._highpPrecision=this._maxPointSize=this._minPointSize=0;this._unmaskedRenderer=this._unmaskedVendor="(unavailable)";this._extensions=[];this._hasMajorPerformanceCaveat=H;this._isInitialisingAfterContextRestored=!1;this._parallelShaderCompileExt=null;this._isGpuProfilingEnabled=!!B.enableGpuProfiling;
this._timerExt=null;this._allQueryResultBuffers=new Set;this._timeQueryStack=[];this.FillIndexBufferData(this._indexData)}async InitState(){var y=this._gl,B=this.GetNumVertexComponents();this._lastColor.setRgba(1,1,1,1);this._lastTexture1=this._lastTexture0=null;this._pointPtr=this._vertexPtr=0;this._lastVertexPtr=8E3*B-4*B;e.clearArray(this._batch);this._topOfBatch=this._batchPtr=0;this._currentRenderTarget=this._lastProgram=null;this._lastPointTexCoords.set(0,0,1,1);this._lastPointZ=this._currentZ=
this._baseZ=0;B=this._batchState;B.currentShader=null;B.currentFramebuffer=null;f.set(B.currentColor,1,1,1,1);B.clearColor.setRgba(0,0,0,0);B.pointTexCoords.set(0,0,1,1);y.clearColor(0,0,0,0);y.clear(y.COLOR_BUFFER_BIT);y.enable(y.BLEND);y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA);this._lastSrcBlend=y.ONE;this._lastDestBlend=y.ONE_MINUS_SRC_ALPHA;this._InitBlendModes(y);y.disable(y.CULL_FACE);y.disable(y.STENCIL_TEST);y.disable(y.DITHER);y.disable(y.DEPTH_TEST);this._pointBuffer=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,
this._pointBuffer);y.bufferData(y.ARRAY_BUFFER,this._pointData.byteLength,y.DYNAMIC_DRAW);this._vertexBuffer=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,this._vertexBuffer);y.bufferData(y.ARRAY_BUFFER,this._vertexData.byteLength,y.DYNAMIC_DRAW);this._texcoordBuffer=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,this._texcoordBuffer);y.bufferData(y.ARRAY_BUFFER,this._texcoordData.byteLength,y.DYNAMIC_DRAW);this._indexBuffer=y.createBuffer();y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,this._indexBuffer);y.bufferData(y.ELEMENT_ARRAY_BUFFER,
this._indexData,y.STATIC_DRAW);y.activeTexture(y.TEXTURE0);y.bindTexture(y.TEXTURE_2D,null);this._maxTextureSize=y.getParameter(y.MAX_TEXTURE_SIZE);B=y.getParameter(y.ALIASED_POINT_SIZE_RANGE);this._minPointSize=B[0];this._maxPointSize=B[1];B=y.getShaderPrecisionFormat(y.VERTEX_SHADER,y.HIGH_FLOAT);const H=y.getShaderPrecisionFormat(y.FRAGMENT_SHADER,y.HIGH_FLOAT);this._highpPrecision=B&&H?Math.min(B.precision,H.precision):0;2048<this._maxPointSize&&(this._maxPointSize=2048);this._extensions=y.getSupportedExtensions();
if(B=y.getExtension("WEBGL_debug_renderer_info"))this._unmaskedVendor=y.getParameter(B.UNMASKED_VENDOR_WEBGL),this._unmaskedRenderer=y.getParameter(B.UNMASKED_RENDERER_WEBGL);this._parallelShaderCompileExt=y.getExtension("KHR_parallel_shader_compile");e.isDebug&&(u=y.getExtension("WEBGL_lose_context"));if(this._isGpuProfilingEnabled)if(1===this.GetWebGLVersionNumber()){if("Chromium"!==e.Platform.BrowserEngine||81<=e.Platform.BrowserVersionNumber||"undefined"!==typeof document)this._timerExt=y.getExtension("EXT_disjoint_timer_query")}else this._timerExt=
y.getExtension("EXT_disjoint_timer_query_webgl2")||y.getExtension("EXT_disjoint_timer_query");this._ClearAllShaderPrograms();y=e.Gfx.WebGLShaderProgram;B=y.GetDefaultVertexShaderSource(this._is3d,!1);y=[[y.GetTextureFillFragmentShaderSource(),B,"<default>"],[y.GetTextureFillFragmentShaderSource(),B,"<default-device-transform>"],[y.GetPointFragmentShaderSource(),y.GetPointVertexShaderSource(),"<point>"],[y.GetColorFillFragmentShaderSource(),B,"<fill>"],[y.GetLinearGradientFillFragmentShaderSource(),
B,"<lineargradient>"],[y.GetHardEllipseFillFragmentShaderSource(),B,"<hardellipse>"],[y.GetHardEllipseOutlineFragmentShaderSource(),B,"<hardellipseoutline>"],[y.GetSmoothEllipseFillFragmentShaderSource(),B,"<smoothellipse>"],[y.GetSmoothEllipseOutlineFragmentShaderSource(),B,"<smoothellipseoutline>"],[y.GetSmoothLineFillFragmentShaderSource(),B,"<smoothline>"],[y.GetTilemapFragmentShaderSource(),y.GetDefaultVertexShaderSource(this._is3d,!0),"<tilemap>"]];y=await Promise.all(y.map(P=>this.CreateShaderProgram({src:P[0]},
P[1],P[2])));this._spTextureFill=y[0];this._spDeviceTransformTextureFill=y[1];this._spPoints=y[2];this._spColorFill=y[3];this._spLinearGradientFill=y[4];this._spHardEllipseFill=y[5];this._spHardEllipseOutline=y[6];this._spSmoothEllipseFill=y[7];this._spSmoothEllipseOutline=y[8];this._spSmoothLineFill=y[9];this._spTilemapFill=y[10];this._currentStateGroup=null;this.SetTextureFillMode()}Is3D(){return this._is3d}GetNumVertexComponents(){return this._is3d?3:2}SetBaseZ(y){this._baseZ=y}GetBaseZ(){return this._baseZ}SetCurrentZ(y){this._currentZ=
y;this._currentStateGroup=null}GetCurrentZ(){return this._currentZ}async CreateShaderProgram(y,B,H){y=await e.Gfx.WebGLShaderProgram.Create(this,y,B,H);this._AddShaderProgram(y);return y}ResetLastProgram(){this._lastProgram=null}SetSize(y,B,H){if(this._width!==y||this._height!==B||H){this.EndBatch();H=this._gl;var P=this._batchState;this._width=y;this._height=B;y=this.GetScissoredViewportWidth();B=this.GetScissoredViewportHeight();this._UpdateViewportRenderer(y,B,this._width,this._height);this._UpdateViewportBatch(y,
B,this._matP);this._spDeviceTransformTextureFill&&(H.useProgram(this._spDeviceTransformTextureFill.GetShaderProgram()),this._spDeviceTransformTextureFill._UpdateDeviceTransformUniforms(this._matP),this._lastProgram=this._spDeviceTransformTextureFill,this._batchState.currentShader=this._spDeviceTransformTextureFill);H.bindTexture(H.TEXTURE_2D,null);H.activeTexture(H.TEXTURE1);H.bindTexture(H.TEXTURE_2D,null);H.activeTexture(H.TEXTURE0);this._lastTexture1=this._lastTexture0=null;this._currentRenderTarget&&
this._currentRenderTarget._Resize(this._width,this._height);H.bindFramebuffer(H.FRAMEBUFFER,null);this._currentRenderTarget=null;P.currentFramebuffer=null}}_UpdateViewportRenderer(y,B,H,P){this._cam[2]=100;g.lookAt(this._matMV,this._cam,this._look,this._up);g.perspective(this._matP,45,y/B,this.GetNearZ(),this.GetFarZ());const F=[0,0],I=[0,0],N=self.devicePixelRatio;this.Project(0,0,y,B,F);this.Project(1,1,y,B,I);this._worldScale[0]=N/(I[0]-F[0]);this._worldScale[1]=-N/(I[1]-F[1]);this._lastBackbufferWidth=
H;this._lastBackbufferHeight=P}_UpdateViewportBatch(y,B,H){const P=this._batchState;this._gl.viewport(0,0,y,B);y=this._allShaderPrograms;B=P.currentShader;for(let F=0,I=y.length;F<I;++F){const N=y[F];N===B?N.UpdateMatP(H,!0):N.SetMatPStale()}g.copy(P.currentMatP,H)}SetViewportScissor(y,B){const H=this._gl;if(this._width===y&&this._height===B)this._isScissorViewport&&(this.EndBatch(),H.disable(H.SCISSOR_TEST),this._isScissorViewport=!1,this._viewportScissorHeight=this._viewportScissorWidth=-1,this.SetSize(this._width,
this._height,!0));else if(this._isScissorViewport||(this.EndBatch(),H.enable(H.SCISSOR_TEST),this._isScissorViewport=!0),this._viewportScissorWidth!==y||this._viewportScissorHeight!==B)this.EndBatch(),H.scissor(0,0,y,B),this._viewportScissorWidth=y,this._viewportScissorHeight=B,this.SetSize(this._width,this._height,!0)}RemoveViewportScissor(){const y=this._gl;this._isScissorViewport&&(this.EndBatch(),y.disable(y.SCISSOR_TEST),this._isScissorViewport=!1);this._viewportScissorHeight=this._viewportScissorWidth=
-1}GetScissoredViewportWidth(){return this._isScissorViewport?this._viewportScissorWidth:this.GetWidth()}GetScissoredViewportHeight(){return this._isScissorViewport?this._viewportScissorHeight:this.GetHeight()}UpdateModelView(){k(this._lastMV,this._matMV)||(this.PushBatch().InitUpdateModelView(this._matMV),g.copy(this._lastMV,this._matMV),this._topOfBatch=0)}GetBatchState(){return this._batchState}PushBatch(){const y=this._batch;this._batchPtr===y.length&&y.push(new e.Gfx.WebGLBatchJob(this._batchState));
return y[this._batchPtr++]}EndBatch(){0===this._batchPtr||this.IsContextLost()||(this._WriteBuffers(),this._ExecuteBatch(),this._topOfBatch=this._pointPtr=this._texPtr=this._vertexPtr=this._batchPtr=0)}_WriteBuffers(){const y=this._gl;0<this._pointPtr&&(y.bindBuffer(y.ARRAY_BUFFER,this._pointBuffer),y.bufferSubData(y.ARRAY_BUFFER,0,this._pointData.subarray(0,this._pointPtr)));0<this._vertexPtr&&(y.bindBuffer(y.ARRAY_BUFFER,this._vertexBuffer),y.bufferSubData(y.ARRAY_BUFFER,0,this._vertexData.subarray(0,
this._vertexPtr)),y.bindBuffer(y.ARRAY_BUFFER,this._texcoordBuffer),y.bufferSubData(y.ARRAY_BUFFER,0,this._texcoordData.subarray(0,this._texPtr)))}_ExecuteBatch(){const y=this._batch;for(let B=0,H=this._batchPtr;B<H;++B)y[B].Run()}GetOpacity(){return this._lastColor.getA()}SetColorRgba(y,B,H,P){const F=this._lastColor;F.equalsRgba(y,B,H,P)||(F.setRgba(y,B,H,P),this.PushBatch().InitSetColor(F),this._topOfBatch=0,this._currentStateGroup=null)}SetOpacity(y){const B=this._lastColor;B.getA()!==y&&(B.setA(y),
this.PushBatch().InitSetColor(B),this._topOfBatch=0,this._currentStateGroup=null)}SetColor(y){const B=this._lastColor;B.equals(y)||(B.set(y),this.PushBatch().InitSetColor(B),this._topOfBatch=0,this._currentStateGroup=null)}ResetColor(){this.SetColorRgba(1,1,1,1)}GetColor(){return this._lastColor}SetTexture(y){y!==this._lastTexture0&&(this.PushBatch().InitSetTexture(y),this._lastTexture0=y,this._topOfBatch=0)}_ResetLastTexture(){this._lastTexture0=null}SetBlendMode(y){y=this._GetBlendByIndex(y);this._SetBlend(y[0],
y[1])}SetNamedBlendMode(y){y=this.GetNamedBlend(y);this._SetBlend(y.srcBlend,y.destBlend)}_SetBlend(y,B){if(y!==this._lastSrcBlend||B!==this._lastDestBlend)this.PushBatch().InitSetBlend(y,B),this._lastSrcBlend=y,this._lastDestBlend=B,this._topOfBatch=0,this._currentStateGroup=null}IsPremultipliedAlphaBlend(){return this._lastSrcBlend===this._gl.ONE&&this._lastDestBlend===this._gl.ONE_MINUS_SRC_ALPHA}SetAlphaBlend(){this._SetBlend(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)}SetNoPremultiplyAlphaBlend(){this._SetBlend(this._gl.SRC_ALPHA,
this._gl.ONE_MINUS_SRC_ALPHA)}SetCopyBlend(){this._SetBlend(this._gl.ONE,this._gl.ZERO)}Rect(y){this.Rect2(y.getLeft(),y.getTop(),y.getRight(),y.getBottom())}Rect2(y,B,H,P){this.Quad2(y,B,H,B,H,P,y,P)}_ExtendQuadBatch(){let y=this._vertexPtr;y>=this._lastVertexPtr&&(this.EndBatch(),y=0);1===this._topOfBatch?this._batch[this._batchPtr-1]._indexCount+=6:(this.PushBatch().InitQuad(this._is3d?y:y/2*3,6),this._topOfBatch=1)}_WriteQuadToVertexBuffer(y){y.writeToTypedArray3D(this._vertexData,this._vertexPtr,
this._baseZ+this._currentZ);this._vertexPtr+=12}Quad(y){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(y);a.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad2(y,B,H,P,F,I,N,R){this._ExtendQuadBatch();const S=this._vertexData;let Y=this._vertexPtr;const W=this._baseZ+this._currentZ;this._is3d?(S[Y++]=y,S[Y++]=B,S[Y++]=W,S[Y++]=H,S[Y++]=P,S[Y++]=W,S[Y++]=F,S[Y++]=I,S[Y++]=W,S[Y++]=N,S[Y++]=R,S[Y++]=W):(S[Y++]=y,S[Y++]=B,S[Y++]=H,S[Y++]=P,S[Y++]=F,S[Y++]=I,S[Y++]=N,S[Y++]=
R);this._vertexPtr=Y;a.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad3(y,B){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(y);B.writeAsQuadToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}Quad4(y,B){this._ExtendQuadBatch();this._WriteQuadToVertexBuffer(y);B.writeToTypedArray(this._texcoordData,this._texPtr);this._texPtr+=8}FullscreenQuad(y,B){g.copy(p,this._lastMV);c.copy(b,this._cam);c.copy(l,this._look);this._cam[0]=0;this._cam[1]=0;this._cam[2]=100*
self.devicePixelRatio;this._look[0]=0;this._look[1]=0;this._look[2]=0;this.ResetModelView();this.UpdateModelView();if(this._isScissorViewport){y=this._viewportScissorWidth/2;var H=this._viewportScissorHeight/2;t.set(-y,H,-y+this._viewportScissorWidth,H-this._viewportScissorHeight);r.setFromRect(t);t.set(0,0,this._viewportScissorWidth/this._width,this._viewportScissorHeight/this._height);this.Quad3(r,t)}else if("crop"===y&&this._currentRenderTarget&&B){y=this._width/2;H=this._height/2;const I=B.GetWidth();
B=B.GetHeight();var P=this._currentRenderTarget.GetWidth(),F=this._currentRenderTarget.GetHeight();P=Math.min(P,I);const N=Math.min(F,B),R=Math.max(B-F,0);F=Math.max(F-B,0);t.set(-y,H-F,-y+P,H-N-F);r.setFromRect(t);t.set(0,R,P,N+R);t.divide(I,B);this.Quad3(r,t)}else{let [I,N]=this.GetRenderTargetSize(this._currentRenderTarget);y=I/2;H=N/2;this.Rect2(-y,H,y,-H)}g.copy(this._matMV,p);c.copy(this._cam,b);c.copy(this._look,l);this.UpdateModelView()}ConvexPoly(y){var B=y.length/2;if(3>B)throw Error("need at least 3 points");
B-=2;const H=B-1,P=y[0],F=y[1];for(let I=0;I<B;I+=2){const N=2*I,R=y[N+2],S=y[N+3],Y=y[N+4],W=y[N+5];I===H?this.Quad2(P,F,R,S,Y,W,Y,W):this.Quad2(P,F,R,S,Y,W,y[N+6],y[N+7])}}Line(y,B,H,P){var F=e.angleTo(y,B,H,P),I=.5*this._lineWidth;const N=Math.sin(F)*I;F=Math.cos(F)*I;I=this._lineCap;2===I?this.LinePreCalc_LineCap2(y,B,H,P,N,F):1===I?this.LinePreCalc_LineCap1(y,B,H,P,N,F):this.LinePreCalc_LineCap0(y,B,H,P,N,F)}LinePreCalc_LineCap2(y,B,H,P,F,I){var N=this._lineOffset;y=y+N-I;B=B+N-F;H=H+N+I;P=P+
N+F;N=2*I;const R=2*F;this.Quad2(y+F,B-I,H+F,P-I,H-F-N,P+I-R,y-F+N,B+I+R)}LinePreCalc_LineCap1(y,B,H,P,F,I){const N=this._lineOffset;y=y+N-I;B=B+N-F;H=H+N+I;P=P+N+F;this.Quad2(y+F,B-I,H+F,P-I,H-F,P+I,y-F,B+I)}LinePreCalc_LineCap0(y,B,H,P,F,I){const N=this._lineOffset;y+=N;B+=N;H+=N;P+=N;this.Quad2(y+F,B-I,H+F,P-I,H-F,P+I,y-F,B+I)}TexturedLine(y,B,H,P,F,I){var N=e.angleTo(y,B,H,P),R=.5*this._lineWidth;const S=Math.sin(N)*R;N=Math.cos(N)*R;R=this._lineCap;2===R?this.TexturedLinePreCalc_LineCap2(y,B,
H,P,S,N,F,I):1===R?this.TexturedLinePreCalc_LineCap1(y,B,H,P,S,N,F,I):this.TexturedLinePreCalc_LineCap0(y,B,H,P,S,N,F,I)}TexturedLinePreCalc_LineCap2(y,B,H,P,F,I,N,R){var S=this._lineOffset;y=y+S-I;B=B+S-F;H=H+S+I;P=P+S+F;S=2*I;const Y=2*F;r.set(y+F,B-I,H+F,P-I,H-F-S,P+I-Y,y-F+S,B+I+Y);t.set(N,0,R,0);this.Quad3(r,t)}TexturedLinePreCalc_LineCap1(y,B,H,P,F,I,N,R){const S=this._lineOffset;y=y+S-I;B=B+S-F;H=H+S+I;P=P+S+F;r.set(y+F,B-I,H+F,P-I,H-F,P+I,y-F,B+I);t.set(N,0,R,0);this.Quad3(r,t)}TexturedLinePreCalc_LineCap0(y,
B,H,P,F,I,N,R){const S=this._lineOffset;y+=S;B+=S;H+=S;P+=S;r.set(y+F,B-I,H+F,P-I,H-F,P+I,y-F,B+I);t.set(N,0,R,0);this.Quad3(r,t)}LineRect(y,B,H,P){const F=.5*this._lineWidth,I=this._lineCap;2===I?this._LineRectPreCalc_LineCap2(y,B,H,P,F):1===I?this._LineRectPreCalc_LineCap1(y,B,H,P,F):this._LineRectPreCalc_LineCap0(y,B,H,P,F)}_LineRectPreCalc_LineCap2(y,B,H,P,F){this.LinePreCalc_LineCap2(y,B,H,B,0,F);this.LinePreCalc_LineCap2(H,B,H,P,F,0);this.LinePreCalc_LineCap2(H,P,y,P,0,-F);this.LinePreCalc_LineCap2(y,
P,y,B,-F,0)}_LineRectPreCalc_LineCap1(y,B,H,P,F){this.LinePreCalc_LineCap1(y,B,H,B,0,F);this.LinePreCalc_LineCap1(H,B,H,P,F,0);this.LinePreCalc_LineCap1(H,P,y,P,0,-F);this.LinePreCalc_LineCap1(y,P,y,B,-F,0)}_LineRectPreCalc_LineCap0(y,B,H,P,F){this.LinePreCalc_LineCap0(y,B,H,B,0,F);this.LinePreCalc_LineCap0(H,B,H,P,F,0);this.LinePreCalc_LineCap0(H,P,y,P,0,-F);this.LinePreCalc_LineCap0(y,P,y,B,-F,0)}LineRect2(y){this.LineRect(y.getLeft(),y.getTop(),y.getRight(),y.getBottom())}LineQuad(y){var B=e.angleTo(y.getTlx(),
y.getTly(),y.getTrx(),y.getTry()),H=.5*this._lineWidth;const P=Math.sin(B)*H;B=Math.cos(B)*H;H=this._lineCap;2===H?this._LineQuadPreCalc_LineCap2(y,P,B):1===H?this._LineQuadPreCalc_LineCap1(y,P,B):this._LineQuadPreCalc_LineCap0(y,P,B)}_LineQuadPreCalc_LineCap2(y,B,H){this.LinePreCalc_LineCap2(y.getTlx(),y.getTly(),y.getTrx(),y.getTry(),B,H);this.LinePreCalc_LineCap2(y.getTrx(),y.getTry(),y.getBrx(),y.getBry(),H,-B);this.LinePreCalc_LineCap2(y.getBrx(),y.getBry(),y.getBlx(),y.getBly(),-B,-H);this.LinePreCalc_LineCap2(y.getBlx(),
y.getBly(),y.getTlx(),y.getTly(),-H,B)}_LineQuadPreCalc_LineCap1(y,B,H){this.LinePreCalc_LineCap1(y.getTlx(),y.getTly(),y.getTrx(),y.getTry(),B,H);this.LinePreCalc_LineCap1(y.getTrx(),y.getTry(),y.getBrx(),y.getBry(),H,-B);this.LinePreCalc_LineCap1(y.getBrx(),y.getBry(),y.getBlx(),y.getBly(),-B,-H);this.LinePreCalc_LineCap1(y.getBlx(),y.getBly(),y.getTlx(),y.getTly(),-H,B)}_LineQuadPreCalc_LineCap0(y,B,H){this.LinePreCalc_LineCap0(y.getTlx(),y.getTly(),y.getTrx(),y.getTry(),B,H);this.LinePreCalc_LineCap0(y.getTrx(),
y.getTry(),y.getBrx(),y.getBry(),H,-B);this.LinePreCalc_LineCap0(y.getBrx(),y.getBry(),y.getBlx(),y.getBly(),-B,-H);this.LinePreCalc_LineCap0(y.getBlx(),y.getBly(),y.getTlx(),y.getTly(),-H,B)}SetLineWidth(y){this._lineWidth=y;this._lineWidthStack[this._lineWidthStack.length-1]=y}GetLineWidth(){return this._lineWidth}PushLineWidth(y){if(100<=this._lineWidthStack.length)throw Error("pushed too many line widths - check push/pop pairs");this._lineWidthStack.push(y);this._lineWidth=y}PopLineWidth(){if(1>=
this._lineWidthStack.length)throw Error("cannot pop last line width - check push/pop pairs");this._lineWidthStack.pop();this._lineWidth=this._lineWidthStack[this._lineWidthStack.length-1]}SetLineCapButt(){this._lineCap=0;this._lineCapStack[this._lineCapStack.length-1]=0}SetLineCapSquare(){this._lineCap=1;this._lineCapStack[this._lineCapStack.length-1]=0}SetLineCapZag(){this._lineCap=2;this._lineCapStack[this._lineCapStack.length-1]=0}PushLineCap(y){if("butt"===y)this.PushLineCapButt();else if("square"===
y)this.PushLineCapSquare();else if("zag"===y)this.PushLineCapZag();else throw Error("invalid line cap");}PushLineCapButt(){if(100<=this._lineCapStack.length)throw Error("pushed too many line caps - check push/pop pairs");this._lineCapStack.push(0);this._lineCap=0}PushLineCapSquare(){if(100<=this._lineCapStack.length)throw Error("pushed too many line caps - check push/pop pairs");this._lineCapStack.push(1);this._lineCap=1}PushLineCapZag(){if(100<=this._lineCapStack.length)throw Error("pushed too many line caps - check push/pop pairs");
this._lineCapStack.push(2);this._lineCap=2}PopLineCap(){if(1>=this._lineCapStack.length)throw Error("cannot pop last line cap - check push/pop pairs");this._lineCapStack.pop();this._lineCap=this._lineCapStack[this._lineCapStack.length-1]}SetLineOffset(y){this._lineOffset=y;this._lineOffsetStack[this._lineOffsetStack.length-1]=y}GetLineOffset(){return this._lineOffset}PushLineOffset(y){if(100<=this._lineOffsetStack.length)throw Error("pushed too many line offsets - check push/pop pairs");this._lineOffsetStack.push(y);
this._lineOffset=y}PopLineOffset(){if(1>=this._lineOffsetStack.length)throw Error("cannot pop last line offset - check push/pop pairs");this._lineOffsetStack.pop();this._lineOffset=this._lineOffsetStack[this._lineOffsetStack.length-1]}SetPointTextureCoords(y){this._lastPointTexCoords.equals(y)||(this._lastPointTexCoords.copy(y),this.PushBatch().InitSetPointTexCoords(y),this._topOfBatch=0)}Point(y,B,H,P){7996<=this._pointPtr&&this.EndBatch();let F=this._pointPtr;var I=this._baseZ+this._currentZ;2===
this._topOfBatch&&this._lastPointZ===I?this._batch[this._batchPtr-1]._indexCount++:(this.PushBatch().InitPoints(F,I),this._topOfBatch=2,this._lastPointZ=I);I=this._pointData;I[F++]=y;I[F++]=B;I[F++]=H;I[F++]=P;this._pointPtr=F}SetProgram(y){this._lastProgram!==y&&(this.PushBatch().InitSetProgram(y),this._lastProgram=y,this._topOfBatch=0,this._currentStateGroup=null)}SetTextureFillMode(){this.SetProgram(this._spTextureFill)}SetDeviceTransformTextureFillMode(){this.SetProgram(this._spDeviceTransformTextureFill)}SetColorFillMode(){this.SetProgram(this._spColorFill)}SetLinearGradientFillMode(){this.SetProgram(this._spLinearGradientFill)}SetGradientColor(y){this.PushBatch().InitSetGradientColor(y);
this._topOfBatch=0}SetHardEllipseFillMode(){this.SetProgram(this._spHardEllipseFill)}SetHardEllipseOutlineMode(){this.SetProgram(this._spHardEllipseOutline)}SetSmoothEllipseFillMode(){this.SetProgram(this._spSmoothEllipseFill)}SetSmoothEllipseOutlineMode(){this.SetProgram(this._spSmoothEllipseOutline)}SetEllipseParams(y,B,H=1){this.PushBatch().InitSetEllipseParams(y,B,H);this._topOfBatch=0}SetSmoothLineFillMode(){this.SetProgram(this._spSmoothLineFill)}SetTilemapFillMode(){this.SetProgram(this._spTilemapFill)}SetTilemapInfo(y,
B,H,P,F,I,N){if(this._lastProgram!==this._spTilemapFill)throw Error("must set tilemap fill mode first");this.PushBatch().InitSetTilemapInfo(y,B,H,P,F,I,N);this._topOfBatch=0}SetProgramParameters(y,B,H,P,F,I,N,R,S,Y,W){const ea=this._lastProgram;var na=ea._hasAnyOptionalUniforms;const ja=!!W.length;if(na&&!ea.AreOptionalUniformsAlreadySetInBatch(B,H,P,F,I,N,R,S,Y)||ja&&!ea.AreCustomParametersAlreadySetInBatch(W)){var wa=this.PushBatch();wa.InitSetProgramParameters();na&&(ea.SetOptionalUniformsInBatch(B,
H,P,F,I,N,R,S,Y),na=wa._mat4param,na[0]=I,na[1]=N,B.writeToTypedArray(na,2),na[6]=R,na[7]=S,H.writeToTypedArray(na,12),B=wa._colorParam,F.writeToTypedArray(B,0),F=B[1],B[1]=B[3],B[3]=F,P.writeToTypedArray(wa._srcOriginRect,0),wa._startIndex=Y,ea._uSamplerBack.IsUsed()?wa._texParam=y?y.GetTexture():null:wa._texParam=null);ja&&(ea.SetCustomParametersInBatch(W),e.shallowAssignArray(wa._shaderParams,W));this._topOfBatch=0}}ClearRgba(y,B,H,P){this.PushBatch().InitClearSurface2(y,B,H,P);this._topOfBatch=
0}Clear(y){this.PushBatch().InitClearSurface(y);this._topOfBatch=0}ClearRect(y,B,H,P){this.ClearRect4(y,B,H,P,0,0,0,0)}ClearRect2(y){this.ClearRect4(y.getLeft(),y.getTop(),y.width(),y.height(),0,0,0,0)}ClearRect3(y,B){this.ClearRect4(y.getLeft(),y.getTop(),y.width(),y.height(),B.getR(),B.getG(),B.getB(),B.getA())}ClearRect4(y,B,H,P,F,I,N,R){0>H||0>P||(this.PushBatch().InitClearRect(y,B,H,P,F,I,N,R),this._topOfBatch=0)}Start(){}Finish(){super.Finish();this._gl.flush()}CheckForQueryResults(){for(const y of this._allQueryResultBuffers)y.CheckForResults(this._frameNumber)}IsContextLost(){return!this._gl||
this._gl.isContextLost()||this._isInitialisingAfterContextRestored}OnContextLost(){e.Gfx.WebGLRendererTexture.OnContextLost();e.Gfx.WebGLRenderTarget.OnContextLost();e.Gfx.RendererText.OnContextLost();for(const y of this._allQueryResultBuffers)y.Clear();this._extensions=[];this._parallelShaderCompileExt=this._timerExt=null;this._unmaskedRenderer=this._unmaskedVendor="(unavailable)";this._spTilemapFill=this._spPoints=this._spSmoothLineFill=this._spSmoothEllipseOutline=this._spSmoothEllipseFill=this._spHardEllipseOutline=
this._spHardEllipseFill=this._spLinearGradientFill=this._spColorFill=this._spDeviceTransformTextureFill=this._spTextureFill=this._lastProgram=null;for(const y of this._stateGroups.values())y.OnContextLost();for(const y of this._allShaderPrograms)y.Release();this._ClearAllShaderPrograms()}async OnContextRestored(){this._isInitialisingAfterContextRestored=!0;await this.InitState();this._isInitialisingAfterContextRestored=!1;for(const y of this._stateGroups.values())y.OnContextRestored(this);this.SetSize(this._width,
this._height,!0)}CreateStaticTexture(y,B){if(this.IsContextLost())throw Error("context lost");this.EndBatch();const H=e.New(e.Gfx.WebGLRendererTexture,this);H._CreateStatic(y,B);return H}CreateStaticTextureAsync(y,B){if(this.IsContextLost())return Promise.reject("context lost");B=Object.assign({},B);const H=B.wrapX&&"clamp-to-edge"!==B.wrapX||B.wrapY&&"clamp-to-edge"!==B.wrapY;if(!e.Supports.ImageBitmapOptions||!this.SupportsNPOTTextures()&&H)return e.Supports.ImageBitmap?createImageBitmap(y).then(P=>
e.Asyncify(()=>this.CreateStaticTexture(P,B))):y instanceof Blob?e.BlobToImage(y,!0).then(P=>this.CreateStaticTextureAsync(P,B)):"undefined"!==typeof HTMLImageElement&&y instanceof HTMLImageElement&&"function"===typeof y.decode?y.decode().then(()=>e.Asyncify(()=>this.CreateStaticTexture(y,B))):e.Asyncify(()=>this.CreateStaticTexture(y,B));B.premultiplyAlpha=!1;return createImageBitmap(y,{premultiplyAlpha:"premultiply"}).then(P=>e.Asyncify(()=>this.CreateStaticTexture(P,B)))}CreateDynamicTexture(y,
B,H){this.EndBatch();const P=e.New(e.Gfx.WebGLRendererTexture,this);P._CreateDynamic(y,B,H);return P}UpdateTexture(y,B,H){this.EndBatch();B._Update(y,H)}DeleteTexture(y){y&&(y.SubtractReference(),0<y.GetReferenceCount()||(this.EndBatch(),y===this._lastTexture0&&(this._gl.bindTexture(this._gl.TEXTURE_2D,null),this._lastTexture0=null),y===this._lastTexture1&&(this._gl.activeTexture(this._gl.TEXTURE1),this._gl.bindTexture(this._gl.TEXTURE_2D,null),this._gl.activeTexture(this._gl.TEXTURE0),this._lastTexture1=
null),y._Delete()))}CreateRenderTarget(y){let B=this._width,H=this._height,P=!0;y&&("number"===typeof y.width&&(B=y.width,P=!1),"number"===typeof y.height&&(H=y.height,P=!1));if(0>=B||0>=H)throw Error("invalid size");this.EndBatch();const F=e.New(e.Gfx.WebGLRenderTarget,this);F._Create(B,H,Object.assign({isDefaultSize:P},y));this._currentRenderTarget=null;this._batchState.currentFramebuffer=null;return F}SetRenderTarget(y){if(y!==this._currentRenderTarget){if(y){y.IsDefaultSize()&&y._Resize(this._width,
this._height);var B=y.GetWidth();var H=y.GetHeight();var P=B;var F=H}else B=this._width,H=this._height,P=this.GetScissoredViewportWidth(),F=this.GetScissoredViewportHeight();var I=this._lastBackbufferWidth!==B||this._lastBackbufferHeight!==H;I&&this._UpdateViewportRenderer(P,F,B,H);this.PushBatch().InitSetRenderTarget(y,I,this._matP);this._currentRenderTarget=y;this._topOfBatch=0}}GetRenderTarget(){return this._currentRenderTarget}GetRenderTargetSize(y){return y?[y.GetWidth(),y.GetHeight()]:[this._width,
this._height]}CopyRenderTarget(y,B="stretch"){2>this._version||this._currentRenderTarget&&0<this._currentRenderTarget.GetMultisampling()?(this.SetCopyBlend(),this.ResetColor(),this.DrawRenderTarget(y,B)):(this.PushBatch().InitBlitFramebuffer(y,this._currentRenderTarget,B),this._topOfBatch=0)}DrawRenderTarget(y,B="stretch"){y=y.GetTexture();if(!y)throw Error("not a texture-backed render target");this.SetTexture(y);this.FullscreenQuad(B,y)}InvalidateRenderTarget(y){2>this._version||(this.PushBatch().InitInvalidateFramebuffer(y._GetFramebuffer()),
this._topOfBatch=0)}DeleteRenderTarget(y){this.SetRenderTarget(null);this.EndBatch();const B=y.GetTexture();B===this._lastTexture0&&(this._gl.bindTexture(this._gl.TEXTURE_2D,null),this._lastTexture0=null);B===this._lastTexture1&&(this._gl.activeTexture(this._gl.TEXTURE1),this._gl.bindTexture(this._gl.TEXTURE_2D,null),this._gl.activeTexture(this._gl.TEXTURE0),this._lastTexture1=null);y._Delete()}async ReadBackRenderTargetToImageData(y,B,H){this.EndBatch();const P=this._currentRenderTarget;if(y){var F=
y.GetWidth();var I=y.GetHeight();var N=y._GetFramebuffer()}else F=this.GetWidth(),I=this.GetHeight(),N=null;let R=y=0;var S=F,Y=I;H&&(y=e.clamp(Math.floor(H.getLeft()),0,F-1),R=e.clamp(Math.floor(H.getTop()),0,I-1),S=H.width(),S=0===S?F-y:e.clamp(Math.floor(S),0,F-y),Y=H.height(),Y=0===Y?I-R:e.clamp(Math.floor(Y),0,I-R),R=I-(R+Y));const W=this._gl;W.bindFramebuffer(W.FRAMEBUFFER,N);I=()=>{W.bindFramebuffer(W.FRAMEBUFFER,null);this._currentRenderTarget=null;this._batchState.currentFramebuffer=null;
this.SetRenderTarget(P)};if(!B&&2<=this.GetWebGLVersionNumber()){W.bindFramebuffer(W.READ_FRAMEBUFFER,N);N=W.createBuffer();H=S*Y*4;F=W.PIXEL_PACK_BUFFER;W.bindBuffer(F,N);W.bufferData(F,H,W.STREAM_READ);W.readPixels(y,R,S,Y,W.RGBA,W.UNSIGNED_BYTE,0);W.bindFramebuffer(W.READ_FRAMEBUFFER,null);W.bindBuffer(F,null);I();const ea=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);await this._WaitForObjectReady(()=>W.getSyncParameter(ea,W.SYNC_STATUS)===W.SIGNALED);W.deleteSync(ea);B=new ImageData(S,Y);W.bindBuffer(F,
N);W.getBufferSubData(F,0,new Uint8Array(B.data.buffer),0,H);W.bindBuffer(F,null);W.deleteBuffer(N)}else B=new ImageData(S,Y),W.readPixels(y,R,S,Y,W.RGBA,W.UNSIGNED_BYTE,new Uint8Array(B.data.buffer)),I();return B}StartQuery(y){this.SupportsGPUProfiling()&&(this.PushBatch().InitStartQuery(y),this._topOfBatch=0)}EndQuery(y){this.SupportsGPUProfiling()&&(this.PushBatch().InitEndQuery(y),this._topOfBatch=0)}_WaitForObjectReady(y){const B=new Promise(H=>w.add({resolve:H,checkFunc:y}));-1===x&&(x=self.requestAnimationFrame(A));
return B}IsDesynchronized(){return!!this._attribs.desynchronized}GetEstimatedBackBufferMemoryUsage(){return this._width*this._height*(this._attribs.alpha?4:3)}GetEstimatedRenderBufferMemoryUsage(){let y=0;for(const B of e.Gfx.WebGLRenderTarget.allRenderTargets())B.GetTexture()||(y+=B.GetEstimatedMemoryUsage());return y}GetEstimatedTextureMemoryUsage(){let y=0;for(const B of e.Gfx.WebGLRendererTexture.allTextures())y+=B.GetEstimatedMemoryUsage();return y}GetEstimatedTotalMemoryUsage(){return this.GetEstimatedBackBufferMemoryUsage()+
this.GetEstimatedRenderBufferMemoryUsage()+this.GetEstimatedTextureMemoryUsage()}GetWebGLVersionString(){return this._versionString}GetWebGLVersionNumber(){return this._version}SupportsNPOTTextures(){return 2<=this.GetWebGLVersionNumber()}GetMaxTextureSize(){return this._maxTextureSize}GetMinPointSize(){return this._minPointSize}GetMaxPointSize(){return this._maxPointSize}SupportsHighP(){return 0!==this._highpPrecision}GetHighPPrecision(){return this._highpPrecision}GetUnmaskedVendor(){return this._unmaskedVendor}GetUnmaskedRenderer(){return this._unmaskedRenderer}GetExtensions(){return this._extensions}HasMajorPerformanceCaveat(){return this._hasMajorPerformanceCaveat}SupportsGPUProfiling(){return!!this._timerExt}_GetDisjointTimerQueryExtension(){return this._timerExt}_GetParallelShaderCompileExtension(){return this._parallelShaderCompileExt}_AddQueryResultBuffer(y){this._allQueryResultBuffers.add(y)}_RemoveQueryResultBuffer(y){this._allQueryResultBuffers.delete(y)}_GetTimeQueryStack(){return this._timeQueryStack}GetContext(){return this._gl}_InitBlendModes(y){this._InitBlendModeData([["normal",
y.ONE,y.ONE_MINUS_SRC_ALPHA],["additive",y.ONE,y.ONE],["xor",y.ONE,y.ONE_MINUS_SRC_ALPHA],["copy",y.ONE,y.ZERO],["destination-over",y.ONE_MINUS_DST_ALPHA,y.ONE],["source-in",y.DST_ALPHA,y.ZERO],["destination-in",y.ZERO,y.SRC_ALPHA],["source-out",y.ONE_MINUS_DST_ALPHA,y.ZERO],["destination-out",y.ZERO,y.ONE_MINUS_SRC_ALPHA],["source-atop",y.DST_ALPHA,y.ONE_MINUS_SRC_ALPHA],["destination-atop",y.ONE_MINUS_DST_ALPHA,y.SRC_ALPHA]])}CreateRendererText(){return e.New(e.Gfx.RendererText,this)}CreateWebGLText(){return this.CreateRendererText()}}}"use strict";
{const e=self.C3;let d=null;const c=new Set;function f(k,a){const b=k[0]-a[0];return 0!==b?b:k[1]-a[1]}const g=[],h=[];let m=!1;self.IRuntime=class{constructor(k,a){d=k;Object.defineProperties(this,{assets:{value:d.GetAssetManager().GetIAssetManager(),writable:!1},objects:{value:a,writable:!1},globalVars:{value:{},writable:!1},projectName:{value:d.GetProjectName(),writable:!1},projectVersion:{value:d.GetProjectVersion(),writable:!1},storage:{value:new self.IStorage(d),writable:!1},isInWorker:{value:d.IsInWorker(),
writable:!1}});d.UserScriptDispatcher().addEventListener("keydown",b=>{c.has(b.key)?b.stopPropagation():c.add(b.key)});d.UserScriptDispatcher().addEventListener("keyup",b=>c.delete(b.key));d.Dispatcher().addEventListener("window-blur",()=>c.clear());d.IsInWorker()&&(self.alert=b=>{m||(m=!0,console.warn("[Construct 3] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual."));
return this.alert(b)})}_InitGlobalVars(k){Object.defineProperties(this.globalVars,k)}addEventListener(k,a){d.UserScriptDispatcher().addEventListener(k,a)}removeEventListener(k,a){d.UserScriptDispatcher().removeEventListener(k,a)}callFunction(k,...a){const b=d.GetEventSheetManager(),l=b.GetFunctionBlockByName(k);if(!l)throw Error(`cannot find function name '${k}'`);if(!l.IsEnabled())return l.GetDefaultReturnValue();if(a.length<l.GetFunctionParameterCount())throw Error(`not enough function parameters passed for '${k}' (${a.length} passed, ${l.GetFunctionParameterCount()} expected)`);
const p=l.GetEventBlock();k=null;var r=b.GetCurrentEvent();r&&(r=r.GetSolModifiersIncludingParents(),0<r.length&&(k=r,b.PushCleanSol(r)));a=p.RunAsExpressionFunctionCall(p.GetSolModifiersIncludingParents(),l.GetReturnType(),l.GetDefaultReturnValue(),...a);k&&b.PopSol(k);return a}setReturnValue(k){const a=d.GetEventStack().GetCurrentExpFuncStackFrame();if(!a)throw Error("not in a function which returns a value");switch(a.GetFunctionReturnType()){case 1:"number"===typeof k&&a.SetFunctionReturnValue(k);
break;case 2:"string"===typeof k&&a.SetFunctionReturnValue(k);break;case 3:"number"!==typeof k&&"string"!==typeof k||a.SetFunctionReturnValue(k)}}get dt(){return d.GetDt()}get gameTime(){return d.GetGameTime()}get wallTime(){return d.GetWallTime()}random(){return d.Random()}get layout(){return d.GetMainRunningLayout().GetILayout()}getLayout(k){const a=d.GetLayoutManager();if("number"===typeof k||"string"===typeof k)k=a.GetLayout(k);else throw new TypeError("expected string or number");if(!k)throw Error("invalid layout");
return k.GetILayout()}getAllLayouts(){return d.GetLayoutManager().GetAllLayouts().map(k=>k.GetILayout())}goToLayout(k){const a=d.GetLayoutManager();if("number"===typeof k||"string"===typeof k)k=a.GetLayout(k);else throw new TypeError("expected string or number");if(!k)throw Error("invalid layout");a.IsPendingChangeMainLayout()||a.ChangeMainLayout(k)}get keyboard(){const k=d._GetCommonScriptInterfaces().keyboard;if(!k)throw Error("runtime.keyboard used but Keyboard object missing - add it to your project first");
return k}get mouse(){const k=d._GetCommonScriptInterfaces().mouse;if(!k)throw Error("runtime.mouse used but Mouse object missing - add it to your project first");return k}get touch(){const k=d._GetCommonScriptInterfaces().touch;if(!k)throw Error("runtime.touch used but Touch object missing - add it to your project first");return k}invokeDownload(k,a){d.InvokeDownload(k,a)}getInstanceByUid(k){return(k=d.GetInstanceByUID(k))?k.GetInterfaceClass():null}sortZOrder(k,a){const b=d.GetCurrentLayout();for(var l of k){k=
d._UnwrapScriptInterface(l);if(!k||!k.GetWorldInfo())throw Error("invalid instance");var p=k.GetWorldInfo();g.push([p.GetLayer().GetIndex(),p.GetZIndex()]);h.push(k)}if(0!==g.length){g.sort(f);h.sort((r,t)=>a(r.GetInterfaceClass(),t.GetInterfaceClass()));l=!1;for(let r=0,t=g.length;r<t;++r){k=h[r];p=b.GetLayerByIndex(g[r][0]);const u=g[r][1],w=p._GetInstances();w[u]!==k&&(w[u]=k,k.GetWorldInfo()._SetLayer(p),p.SetZIndicesChanged(),l=!0)}l&&d.UpdateRender();e.clearArray(g);e.clearArray(h)}}alert(k){return d.PostComponentMessageToDOMAsync("runtime",
"alert",{message:k+(d.IsInWorker()?" [via Web Worker]":"")})}}}"use strict";
{const e=self.C3;let d=null;self.IAssetManager=class{constructor(c){d=c;Object.defineProperties(this,{isWebMOpusSupported:{value:d.IsAudioFormatSupported("audio/webm; codecs=opus"),writable:!1}})}fetchText(c){return d.FetchText(c)}fetchJson(c){return d.FetchJson(c)}fetchBlob(c){return d.FetchBlob(c)}fetchArrayBuffer(c){return d.FetchArrayBuffer(c)}getProjectFileUrl(c){return d.GetProjectFileUrl(c)}getMediaFileUrl(c){e.IsRelativeURL(c)&&(c=c.toLowerCase());return d.GetMediaFileUrl(c,d.GetMediaSubfolder())}get mediaFolder(){return d.GetMediaSubfolder()}async decodeWebMOpus(c,
f){if(this.isWebMOpusSupported)throw Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");f=await d.GetRuntime()._WasmDecodeWebMOpus(f);f=new Float32Array(f);c=c.createBuffer(1,f.length,48E3);c.getChannelData(0).set(f);return c}loadScripts(...c){return d.LoadScripts(...c)}compileWebAssembly(c){return d.CompileWebAssembly(c)}loadStyleSheet(c){return d.LoadStyleSheet(c)}}}"use strict";
self.IStorage=class{constructor(e){this._storage=e._GetProjectStorage()}getItem(e){return this._storage.getItem(e)}setItem(e,d){return this._storage.setItem(e,d)}removeItem(e){return this._storage.removeItem(e)}clear(){return this._storage.clear()}keys(){return this._storage.keys()}};"use strict";
{const e=new WeakMap;self.IObjectClass=class{constructor(d){e.set(this,d);Object.defineProperties(this,{name:{value:d.GetName(),writable:!1}});d.GetRuntime()._MapScriptInterface(this,d)}addEventListener(d,c){e.get(this).UserScriptDispatcher().addEventListener(d,c)}removeEventListener(d,c){e.get(this).UserScriptDispatcher().removeEventListener(d,c)}getAllInstances(){return e.get(this).GetInstances().map(d=>d.GetInterfaceClass())}getFirstInstance(){const d=e.get(this).GetInstances();return 0<d.length?
d[0].GetInterfaceClass():null}getPickedInstances(){return e.get(this).GetCurrentSol().GetInstances().map(d=>d.GetInterfaceClass())}getFirstPickedInstance(){const d=e.get(this).GetCurrentSol().GetInstances();return 0<d.length?d[0].GetInterfaceClass():null}*instances(){for(const d of e.get(this).GetInstances())yield d.GetInterfaceClass()}*pickedInstances(){for(const d of e.get(this).GetCurrentSol().GetInstances())yield d.GetInterfaceClass()}setInstanceClass(d){if(0<e.get(this).GetInstanceCount())throw Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");
e.get(this)._SetUserScriptInstanceClass(d)}createInstance(d,c,f){if("number"!==typeof d&&"string"!==typeof d)throw new TypeError("invalid layer parameter");const g=e.get(this);var h=g.GetRuntime();d=h.GetMainRunningLayout().GetLayer(d);if(!d)throw Error("invalid layer");c=h.CreateInstance(g,d,c,f);h=h.GetEventSheetManager();h.BlockFlushingInstances(!0);c._TriggerOnCreated();if(c.IsInContainer())for(const m of c.siblings())m._TriggerOnCreated();h.BlockFlushingInstances(!1);return c.GetInterfaceClass()}}}"use strict";
{const e=new WeakMap;self.ILayout=class{constructor(d){e.set(this,d);const c=[],f=d.GetEffectList(),g=f.GetAllEffectTypes().length;for(let h=0;h<g;++h)c.push(new self.IEffectInstance(f,h));Object.defineProperties(this,{name:{value:d.GetName(),writable:!1},index:{value:d.GetIndex(),writable:!1},effects:{value:c,writable:!1}})}addEventListener(d,c){e.get(this).UserScriptDispatcher().addEventListener(d,c)}removeEventListener(d,c){e.get(this).UserScriptDispatcher().removeEventListener(d,c)}get width(){return e.get(this).GetWidth()}set width(d){e.get(this).SetWidth(d)}get height(){return e.get(this).GetHeight()}set height(d){e.get(this).SetHeight(d)}scrollTo(d,
c){const f=e.get(this);f.SetScrollX(d);f.SetScrollY(c)}getLayer(d){const c=e.get(this);if("number"===typeof d||"string"===typeof d)d=c.GetLayer(d);else throw new TypeError("expected string or number");if(!d)throw Error("invalid layer");return d.GetILayer()}getAllLayers(){return e.get(this).GetLayers().map(d=>d.GetILayer())}}}"use strict";
{const e=self.C3,d=new WeakMap;self.ILayer=class{constructor(c){d.set(this,c);const f=[],g=c.GetEffectList(),h=g.GetAllEffectTypes().length;for(let m=0;m<h;++m)f.push(new self.IEffectInstance(g,m));Object.defineProperties(this,{name:{value:c.GetName(),writable:!1},index:{value:c.GetIndex(),writable:!1},layout:{value:c.GetLayout().GetILayout(),writable:!1},effects:{value:f,writable:!1}})}static _Unwrap(c){return d.get(c)}get isVisible(){return d.get(this).IsVisible()}set isVisible(c){d.get(this).SetVisible(c)}get opacity(){return d.get(this).GetOpacity()}set opacity(c){c=
e.clamp(+c,0,1);isNaN(c)||d.get(this).SetOpacity(c)}getViewport(){return d.get(this).GetViewport().toDOMRect()}cssPxToLayer(c,f,g=0){const h=d.get(this),m=h.GetRuntime();return h.CanvasCssToLayer(c-m.GetCanvasClientX(),f-m.GetCanvasClientY(),g)}layerToCssPx(c,f,g=0){const h=d.get(this),m=h.GetRuntime(),[k,a]=h.LayerToCanvasCss(c,f,g);return[k+m.GetCanvasClientX(),a+m.GetCanvasClientY()]}}}"use strict";
{const e=self.C3,d=new WeakMap,c=new WeakMap;function f(h){let m=c.get(h);if(m)return m;m=e.New(e.Event.Dispatcher);c.set(h,m);return m}let g=null;self.IInstance=class{constructor(){d.set(this,g);const h={runtime:{value:g.GetRuntime().GetIRuntime(),writable:!1},objectType:{value:g.GetObjectClass().GetIObjectClass(),writable:!1},uid:{value:g.GetUID(),writable:!1}};g._GetInstVarsScriptDescriptor(h);g._GetBehaviorsScriptDescriptor(h);Object.defineProperties(this,h);g.GetRuntime()._MapScriptInterface(this,
g)}static _Init(h){g=h}static _GetInitInst(){return g}_Release(){const h=c.get(this);h&&(h.Release(),c.delete(this));d.delete(this)}addEventListener(h,m,k){f(this).addEventListener(h,m,k)}removeEventListener(h,m,k){f(this).removeEventListener(h,m,k)}dispatchEvent(h){f(this).dispatchEvent(h)}destroy(){const h=d.get(this);h.GetRuntime().DestroyInstance(h)}}}"use strict";
{const e=self.C3,d=self.IInstance,c=self.ILayer,f=new WeakMap,g=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),h=new Map([...g.entries()].map(k=>[k[1],k[0]])),m=e.New(e.Color);self.IWorldInstance=class extends d{constructor(){super();var k=d._GetInitInst();f.set(this,k);const a=[];var b=k.GetWorldInfo();if(k=b.GetInstanceEffectList()){b=b.GetObjectClass().GetEffectList().GetAllEffectTypes().length;
for(let l=0;l<b;++l)a.push(new self.IEffectInstance(k,l))}Object.defineProperties(this,{effects:{value:a,writable:!1}})}get layout(){return f.get(this).GetWorldInfo().GetLayout().GetILayout()}get layer(){return f.get(this).GetWorldInfo().GetLayer().GetILayer()}get x(){return f.get(this).GetWorldInfo().GetX()}set x(k){k=+k;const a=f.get(this).GetWorldInfo();isNaN(k)||a.GetX()===k||(a.SetX(k),a.SetBboxChanged())}get y(){return f.get(this).GetWorldInfo().GetY()}set y(k){k=+k;const a=f.get(this).GetWorldInfo();
isNaN(k)||a.GetY()===k||(a.SetY(k),a.SetBboxChanged())}get zElevation(){return f.get(this).GetWorldInfo().GetZElevation()}set zElevation(k){k=+k;const a=f.get(this),b=a.GetWorldInfo();b.GetZElevation()!==k&&(b.SetZElevation(k),a.GetRuntime().UpdateRender())}get totalZElevation(){return f.get(this).GetWorldInfo().GetTotalZElevation()}get width(){return f.get(this).GetWorldInfo().GetWidth()}set width(k){k=+k;const a=f.get(this).GetWorldInfo();isNaN(k)||a.GetWidth()===k||(a.SetWidth(k),a.SetBboxChanged())}get height(){return f.get(this).GetWorldInfo().GetHeight()}set height(k){k=
+k;const a=f.get(this).GetWorldInfo();isNaN(k)||a.GetHeight()===k||(a.SetHeight(k),a.SetBboxChanged())}get angle(){return f.get(this).GetWorldInfo().GetAngle()}set angle(k){k=e.clampAngle(+k);const a=f.get(this).GetWorldInfo();isNaN(k)||a.GetAngle()===k||(a.SetAngle(k),a.SetBboxChanged())}get angleDegrees(){return e.toDegrees(this.angle)}set angleDegrees(k){this.angle=e.toRadians(k)}getBoundingBox(){return f.get(this).GetWorldInfo().GetBoundingBox().toDOMRect()}getBoundingQuad(){return f.get(this).GetWorldInfo().GetBoundingQuad().toDOMQuad()}get isVisible(){return f.get(this).GetWorldInfo().IsVisible()}set isVisible(k){k=
!!k;const a=f.get(this),b=a.GetWorldInfo();b.IsVisible()!==k&&(b.SetVisible(k),a.GetRuntime().UpdateRender())}get opacity(){return f.get(this).GetWorldInfo().GetOpacity()}set opacity(k){k=e.clamp(+k,0,1);const a=f.get(this),b=a.GetWorldInfo();isNaN(k)||b.GetOpacity()===k||(b.SetOpacity(k),a.GetRuntime().UpdateRender())}set colorRgb(k){if(3>k.length)throw Error("expected 3 elements");m.setRgb(k[0],k[1],k[2]);k=f.get(this);const a=k.GetWorldInfo();a.GetUnpremultipliedColor().equalsIgnoringAlpha(m)||
(a.SetUnpremultipliedColor(m),k.GetRuntime().UpdateRender())}get colorRgb(){const k=f.get(this).GetWorldInfo().GetUnpremultipliedColor();return[k.getR(),k.getG(),k.getB()]}set blendMode(k){k=g.get(k);if("number"!==typeof k)throw Error("invalid blend mode");const a=f.get(this);a.GetWorldInfo().SetBlendMode(k);a.GetRuntime().UpdateRender()}get blendMode(){return h.get(f.get(this).GetWorldInfo().GetBlendMode())}moveToTop(){f.get(this).GetWorldInfo().ZOrderMoveToTop()}moveToBottom(){f.get(this).GetWorldInfo().ZOrderMoveToBottom()}moveToLayer(k){k=
c._Unwrap(k);if(!k)throw Error("invalid layer");f.get(this).GetWorldInfo().ZOrderMoveToLayer(k)}moveAdjacentToInstance(k,a){f.get(this).GetWorldInfo().ZOrderMoveAdjacentToInstance(f.get(k),a)}containsPoint(k,a){return f.get(this).GetWorldInfo().ContainsPoint(+k,+a)}testOverlap(k){const a=f.get(this);k=f.get(k);return a.GetRuntime().GetCollisionEngine().TestOverlap(a,k)}testOverlapSolid(){var k=f.get(this);return(k=k.GetRuntime().GetCollisionEngine().TestOverlapSolid(k))?k.GetInterfaceClass():null}getParent(){const k=
f.get(this).GetParent();return k?k.GetInterfaceClass():null}getTopParent(){const k=f.get(this).GetTopParent();return k?k.GetInterfaceClass():null}*parents(){for(const k of f.get(this).parents())yield k.GetInterfaceClass()}getChildCount(){return f.get(this).GetChildCount()}getChildAt(k){return(k=f.get(this).GetChildAt(k))?k.GetInterfaceClass():null}*children(){for(const k of f.get(this).children())yield k.GetInterfaceClass()}*allChildren(){for(const k of f.get(this).allChildren())yield k.GetInterfaceClass()}addChild(k,
a){a||(a={});const b=f.get(this);k=f.get(k);b.AddChild(k,a)}removeChild(k){const a=f.get(this);k=f.get(k);a.RemoveChild(k)}removeFromParent(){const k=f.get(this);k.HasParent()&&k.GetParent().RemoveChild(k)}createMesh(k,a){f.get(this).GetWorldInfo().CreateMesh(k,a)}releaseMesh(){const k=f.get(this).GetWorldInfo();k.ReleaseMesh();k.SetBboxChanged()}setMeshPoint(k,a,b){const l=f.get(this).GetWorldInfo();l.SetMeshPoint(k,a,b)&&l.SetBboxChanged()}}}"use strict";
{const e=new WeakMap;self.IDOMInstance=class extends self.IWorldInstance{constructor(){super();e.set(this,self.IInstance._GetInitInst())}getElement(){return e.get(this).GetSdkInstance()._GetElementInDOMMode()}focus(){e.get(this).GetSdkInstance().FocusElement()}blur(){e.get(this).GetSdkInstance().BlurElement()}setCssStyle(d,c){e.get(this).GetSdkInstance().SetElementCSSStyle(d,c)}}}"use strict";
{const e=self.C3,d=new WeakMap,c=new WeakMap;function f(h){let m=c.get(h);if(m)return m;m=e.New(e.Event.Dispatcher);c.set(h,m);return m}let g=null;self.IBehaviorInstance=class{constructor(){d.set(this,g);const h={runtime:{value:g.GetRuntime().GetIRuntime(),writable:!1},behavior:{value:g.GetBehavior().GetIBehavior(),writable:!1}};Object.defineProperties(this,h)}static _Init(h){g=h}static _GetInitInst(){return g}get instance(){return d.get(this).GetObjectInstance().GetInterfaceClass()}_Release(){const h=
c.get(this);h&&(h.Release(),c.delete(this));d.delete(this)}addEventListener(h,m,k){f(this).addEventListener(h,m,k)}removeEventListener(h,m,k){f(this).removeEventListener(h,m,k)}dispatchEvent(h){f(this).dispatchEvent(h)}}}"use strict";{const e=new WeakMap;self.IBehavior=class{constructor(d){e.set(this,d);d={runtime:{value:d.GetRuntime().GetIRuntime(),writable:!1}};Object.defineProperties(this,d)}getAllInstances(){return e.get(this).GetInstances().map(d=>d.GetInterfaceClass())}}}"use strict";
{const e=self.C3,d=new WeakMap;self.IEffectInstance=class{constructor(c,f){d.set(this,c);Object.defineProperties(this,{index:{value:f,writable:!1}})}get name(){return d.get(this).GetAllEffectTypes()[this.index].GetName()}get isActive(){return d.get(this).IsEffectIndexActive(this.index)}set isActive(c){c=!!c;const f=d.get(this);f.IsEffectIndexActive(this.index)!==c&&(f.SetEffectIndexActive(this.index,c),f.UpdateActiveEffects(),f.GetRuntime().UpdateRender())}setParameter(c,f){c=Math.floor(+c);const g=
d.get(this);var h=g.GetEffectParametersForIndex(this.index);if(0>c||c>=h.length)throw new RangeError("invalid effect parameter index");const m=h[c];if(m instanceof e.Color){if(!Array.isArray(f)||3>f.length)throw new TypeError("expected array with 3 elements");c=f[0];h=f[1];f=f[2];if(m.equalsRgb(c,h,f))return;m.setRgb(c,h,f)}else{if("number"!==typeof f)throw new TypeError("expected number");if(m===f)return;h[c]=f}g.IsEffectIndexActive(this.index)&&g.GetRuntime().UpdateRender()}getParameter(c){c=Math.floor(+c);
const f=d.get(this).GetEffectParametersForIndex(this.index);if(0>c||c>=f.length)throw new RangeError("invalid effect parameter index");c=f[c];return c instanceof e.Color?[c.getR(),c.getG(),c.getB()]:c}}}"use strict";
{const e=self.C3,d=new Set(["local","remote"]),c=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);function f(h){if(!h)return"";h=h.split(".");if(2>h.length)return"";h=h[h.length-1].toLowerCase();return c.get(h)||""}function g(h){return new Promise((m,k)=>{const a=document.createElement("script");a.onload=m;a.onerror=k;a.async=!1;a.src=h;document.head.appendChild(a)})}
e.AssetManager=class extends e.DefendedBase{constructor(h,m){super();if(!d.has(m.defaultLoadPolicy))throw Error("invalid load policy");this._runtime=h;this._localUrlBlobs=new Map;this._localBlobUrlCache=new Map;this._isCordova=!!m.isCordova;this._isiOSCordova=!!m.isiOSCordova;this._isFileProtocol="file:"===location.protocol;this._supportedAudioFormats=m.supportedAudioFormats||{};this._audioFiles=new Map;this._preloadSounds=!1;this._iconsSubfolder=this._fontsSubfolder=this._mediaSubfolder="";this._defaultLoadPolicy=
m.defaultLoadPolicy;this._allAssets=[];this._assetsByUrl=new Map;this._webFonts=[];this._loadPromises=[];this._hasFinishedInitialLoad=!1;this._lastLoadProgress=this._assetSizeLoaded=this._totalAssetSizeToLoad=0;this._hasHadErrorLoading=!1;this._loadingRateLimiter=e.New(e.RateLimiter,()=>this._FireLoadingProgressEvent(),50);this._promiseThrottle=new e.PromiseThrottle(Math.max(e.hardwareConcurrency,8));if(m.localUrlBlobs)for(const [k,a]of Object.entries(m.localUrlBlobs))this._localUrlBlobs.set(k.toLowerCase(),
a);this._iAssetManager=new self.IAssetManager(this)}Release(){this._localUrlBlobs.clear();for(const h of this._localBlobUrlCache.values())URL.revokeObjectURL(h);this._localBlobUrlCache.clear();for(const h of this._allAssets)h.Release();e.clearArray(this._allAssets);this._assetsByUrl.clear();e.clearArray(this._loadPromises);this._runtime=null}GetRuntime(){return this._runtime}_SetMediaSubfolder(h){this._mediaSubfolder=h}GetMediaSubfolder(){return this._mediaSubfolder}_SetFontsSubfolder(h){this._fontsSubfolder=
h}GetFontsSubfolder(){return this._fontsSubfolder}_SetIconsSubfolder(h){this._iconsSubfolder=h}GetIconsSubfolder(){return this._iconsSubfolder}_HasLocalUrlBlob(h){return this._localUrlBlobs.has(h.toLowerCase())}_GetLocalUrlBlob(h){return this._localUrlBlobs.get(h.toLowerCase())||null}GetLocalUrlAsBlobUrl(h){const m=this._GetLocalUrlBlob(h);if(!m)return h;h=this._localBlobUrlCache.get(m);h||(h=URL.createObjectURL(m),this._localBlobUrlCache.set(m,h));return h}FetchBlob(h,m){m=m||this._defaultLoadPolicy;
const k=this._GetLocalUrlBlob(h);if(k)return Promise.resolve(k);if(e.IsRelativeURL(h)){const a=h.toLowerCase();return this._isCordova&&this._isFileProtocol?this.CordovaFetchLocalFileAsBlob(a):"local"===m?this._promiseThrottle.Add(()=>e.FetchBlob(a)):e.FetchBlob(a)}return e.FetchBlob(h)}FetchArrayBuffer(h){const m=this._GetLocalUrlBlob(h);if(m)return e.BlobToArrayBuffer(m);if(e.IsRelativeURL(h)){const k=h.toLowerCase();return this._isCordova&&this._isFileProtocol?this.CordovaFetchLocalFileAsArrayBuffer(k):
"local"===this._defaultLoadPolicy?this._promiseThrottle.Add(()=>e.FetchArrayBuffer(k)):e.FetchArrayBuffer(k)}return e.FetchArrayBuffer(h)}FetchText(h){const m=this._GetLocalUrlBlob(h);if(m)return e.BlobToString(m);if(e.IsRelativeURL(h)){const k=h.toLowerCase();return this._isCordova&&this._isFileProtocol?this.CordovaFetchLocalFileAsText(k):"local"===this._defaultLoadPolicy?this._promiseThrottle.Add(()=>e.FetchText(k)):e.FetchText(k)}return e.FetchText(h)}async FetchJson(h){h=await this.FetchText(h);
return JSON.parse(h)}_CordovaFetchLocalFileAs(h,m){return this._runtime.PostComponentMessageToDOMAsync("runtime","cordova-fetch-local-file",{filename:h,as:m})}CordovaFetchLocalFileAsText(h){return this._CordovaFetchLocalFileAs(h,"text")}async CordovaFetchLocalFileAsBlob(h){const m=await this._CordovaFetchLocalFileAs(h,"buffer");h=f(h);return new Blob([m],{type:h})}async CordovaFetchLocalFileAsBlobURL(h){h=h.toLowerCase();var m=this._localBlobUrlCache.get(h);if(m)return m;m=await this.CordovaFetchLocalFileAsBlob(h);
m=URL.createObjectURL(m);this._localBlobUrlCache.set(h,m);return m}CordovaFetchLocalFileAsArrayBuffer(h){return this._CordovaFetchLocalFileAs(h,"buffer")}GetMediaFileUrl(h){return this._HasLocalUrlBlob(h)?this.GetLocalUrlAsBlobUrl(h):this._mediaSubfolder+h.toLowerCase()}GetProjectFileUrl(h,m=""){if(e.IsAbsoluteURL(h)){if(m)throw Error("cannot specify subfolder with remote URL");return Promise.resolve(h)}return this._HasLocalUrlBlob(h)?Promise.resolve(this.GetLocalUrlAsBlobUrl(h)):this._isCordova&&
this._isFileProtocol?this.CordovaFetchLocalFileAsBlobURL(m+h):Promise.resolve(m+h.toLowerCase())}LoadProjectFileUrl(h){return this.GetProjectFileUrl(h)}LoadImage(h){if(h.loadPolicy&&!d.has(h.loadPolicy))throw Error("invalid load policy");let m=this._assetsByUrl.get(h.url);if(m)return m;m=e.New(e.ImageAsset,this,{url:h.url,size:h.size||0,loadPolicy:h.loadPolicy||this._defaultLoadPolicy});this._allAssets.push(m);this._assetsByUrl.set(m.GetURL(),m);this._hasFinishedInitialLoad||(this._totalAssetSizeToLoad+=
m.GetSize(),this._loadPromises.push(m.Load().then(()=>this._AddLoadedSize(m.GetSize()))));return m}async WaitForAllToLoad(){try{await Promise.all(this._loadPromises),this._lastLoadProgress=1}catch(h){console.error("Error loading: ",h),this._hasHadErrorLoading=!0,this._FireLoadingProgressEvent()}}SetInitialLoadFinished(){this._hasFinishedInitialLoad=!0}HasHadErrorLoading(){return this._hasHadErrorLoading}_AddLoadedSize(h){this._assetSizeLoaded+=h;this._loadingRateLimiter.Call()}_FireLoadingProgressEvent(){const h=
e.New(e.Event,"loadingprogress");this._lastLoadProgress=e.clamp(this._assetSizeLoaded/this._totalAssetSizeToLoad,0,1);h.progress=this._lastLoadProgress;this._runtime.Dispatcher().dispatchEvent(h)}GetLoadProgress(){return this._lastLoadProgress}_SetWebFonts(h){e.shallowAssignArray(this._webFonts,h);this._webFonts.length&&this._loadPromises.push(this._LoadWebFonts())}_LoadWebFonts(){if("undefined"===typeof FontFace)return Promise.resolve();const h=[];for(const [m,k,a]of this._webFonts)this._totalAssetSizeToLoad+=
a,h.push(this._LoadWebFont(m,k).then(()=>this._AddLoadedSize(a)));return Promise.all(h)}async _LoadWebFont(h,m){try{const k=await this.GetProjectFileUrl(m,this._fontsSubfolder),a=new FontFace(h,`url('${k}')`);this._runtime.IsInWorker()?self.fonts.add(a):document.fonts.add(a);await a.load()}catch(k){console.warn(`[C3 runtime] Failed to load web font '${h}': `,k)}}IsAudioFormatSupported(h){return!!this._supportedAudioFormats[h]}_SetAudioFiles(h,m){this._preloadSounds=!!m;for(const [k,a,b]of h)this._audioFiles.set(k,
{fileName:k,formats:a.map(l=>({type:l[0],fileExtension:l[1],fullName:k+l[1],fileSize:l[2]})),isMusic:b})}GetPreferredAudioFile(h){h=this._audioFiles.get(h.toLowerCase());if(!h)return null;let m=null;for(const k of h.formats)if(m||"audio/webm; codecs=opus"!==k.type||(m=k),this.IsAudioFormatSupported(k.type))return k;return m}GetProjectAudioFileUrl(h){return(h=this.GetPreferredAudioFile(h))?{url:this.GetMediaFileUrl(h.fullName),type:h.type}:null}GetAudioToPreload(){if(this._preloadSounds){const h=[];
for(const m of this._audioFiles.values()){if(m.isMusic)continue;const k=this.GetPreferredAudioFile(m.fileName);k&&h.push({originalUrl:m.fileName,url:this.GetMediaFileUrl(k.fullName),type:k.type,fileSize:k.fileSize})}return h}return[]}GetIAssetManager(){return this._iAssetManager}async LoadScripts(...h){h=await Promise.all(h.map(m=>this.GetProjectFileUrl(m)));this._runtime.IsInWorker()?importScripts(...h):await Promise.all(h.map(m=>g(m)))}async CompileWebAssembly(h){if(WebAssembly.compileStreaming)return h=
await this.GetProjectFileUrl(h),await WebAssembly.compileStreaming(fetch(h));h=await e.FetchArrayBuffer(h);return await WebAssembly.compile(h)}async LoadStyleSheet(h){h=await this.GetProjectFileUrl(h);return await this._runtime.PostComponentMessageToDOMAsync("runtime","add-stylesheet",{url:h})}}}"use strict";
{const e=self.C3;e.Asset=class extends e.DefendedBase{constructor(d,c){super();this._assetManager=d;this._runtime=d.GetRuntime();this._url=c.url;this._size=c.size;this._loadPolicy=c.loadPolicy;this._blob=null;this._isLoaded=!1;this._loadPromise=null}Release(){this._blob=this._runtime=this._assetManager=this._loadPromise=null}GetURL(){return this._url}GetSize(){return this._size}Load(){return"local"===this._loadPolicy||this._blob?(this._isLoaded=!0,Promise.resolve()):this._loadPromise?this._loadPromise:
this._loadPromise=this._assetManager.FetchBlob(this._url,this._loadPolicy).then(d=>{this._isLoaded=!0;this._loadPromise=null;this._blob=d}).catch(d=>console.error("Error loading resource: ",d))}IsLoaded(){return this._isLoaded}GetBlob(){return this._blob?Promise.resolve(this._blob):this._assetManager.FetchBlob(this._url,this._loadPolicy)}}}"use strict";
{const e=self.C3,d=new e.PromiseThrottle,c=new Set;e.ImageAsset=class extends e.Asset{constructor(f,g){super(f,g);this._webglTexture=this._texturePromise=null;this._refCount=0;this._imageHeight=this._imageWidth=-1;c.add(this)}Release(){this.ReleaseTexture();if(0!==this._refCount)throw Error("released image asset which still has texture references");this._texturePromise=null;c.delete(this);super.Release()}static OnWebGLContextLost(){for(const f of c)f._texturePromise=null,f._webglTexture=null,f._refCount=
0}LoadStaticTexture(f,g){this._refCount++;return this._webglTexture?Promise.resolve(this._webglTexture):this._texturePromise?this._texturePromise:this._texturePromise=this.GetBlob().then(h=>d.Add(()=>f.CreateStaticTextureAsync(h,g).then(m=>{this._texturePromise=null;if(0===this._refCount)return f.DeleteTexture(m),null;this._webglTexture=m;this._imageWidth=m.GetWidth();this._imageHeight=m.GetHeight();return this._webglTexture}))).catch(h=>{console.error("Failed to load texture: ",h);throw h;})}ReleaseTexture(){if(0>=
this._refCount)throw Error("texture released too many times");this._refCount--;0===this._refCount&&this._webglTexture&&(this._webglTexture.GetRenderer().DeleteTexture(this._webglTexture),this._webglTexture=null)}GetTexture(){return this._webglTexture}GetWidth(){return this._imageWidth}GetHeight(){return this._imageHeight}async LoadToDrawable(){const f=await this.GetBlob();return e.Supports.ImageBitmapOptions?await createImageBitmap(f,{premultiplyAlpha:"none"}):e.Supports.ImageBitmap?await createImageBitmap(f):
await e.BlobToImage(f)}}}"use strict";
{const e=self.C3;function d(c,f){return c.GetWorldInfo()._GetLastCachedZIndex()-f.GetWorldInfo()._GetLastCachedZIndex()}e.RenderCell=class extends e.DefendedBase{constructor(c,f,g){super();this._grid=c;this._x=f;this._y=g;this._instances=[];this._isSorted=!0;this._pendingRemoval=new Set;this._isAnyPendingRemoval=!1}Release(){e.clearArray(this._instances);this._pendingRemoval.clear();this._grid=null}Reset(){e.clearArray(this._instances);this._isSorted=!0;this._pendingRemoval.clear();this._isAnyPendingRemoval=
!1}SetChanged(){this._isSorted=!1}IsEmpty(){if(!this._instances.length)return!0;if(this._instances.length>this._pendingRemoval.size)return!1;this._FlushPending();return!0}Insert(c){this._pendingRemoval.has(c)?(this._pendingRemoval.delete(c),0===this._pendingRemoval.size&&(this._isAnyPendingRemoval=!1)):(this._instances.push(c),this._isSorted=1===this._instances.length)}Remove(c){this._pendingRemoval.add(c);this._isAnyPendingRemoval=!0;50<=this._pendingRemoval.size&&this._FlushPending()}_FlushPending(){this._isAnyPendingRemoval&&
(this._instances.length===this._pendingRemoval.size?this.Reset():(e.arrayRemoveAllInSet(this._instances,this._pendingRemoval),this._pendingRemoval.clear(),this._isAnyPendingRemoval=!1))}_EnsureSorted(){this._isSorted||(this._instances.sort(d),this._isSorted=!0)}Dump(c){this._FlushPending();this._EnsureSorted();this._instances.length&&c.push(this._instances)}}}"use strict";
{const e=self.C3;e.RenderGrid=class extends e.DefendedBase{constructor(d,c){super();this._cellWidth=d;this._cellHeight=c;this._cells=e.New(e.PairMap)}Release(){this._cells.Release();this._cells=null}GetCell(d,c,f){let g=this._cells.Get(d,c);return g?g:f?(g=e.New(e.RenderCell,this,d,c),this._cells.Set(d,c,g),g):null}XToCell(d){return Math.floor(d/this._cellWidth)}YToCell(d){return Math.floor(d/this._cellHeight)}Update(d,c,f){if(c)for(let g=c.getLeft(),h=c.getRight();g<=h;++g)for(let m=c.getTop(),k=
c.getBottom();m<=k;++m){if(f&&f.containsPoint(g,m))continue;const a=this.GetCell(g,m,!1);a&&(a.Remove(d),a.IsEmpty()&&this._cells.Delete(g,m))}if(f)for(let g=f.getLeft(),h=f.getRight();g<=h;++g)for(let m=f.getTop(),k=f.getBottom();m<=k;++m)c&&c.containsPoint(g,m)||this.GetCell(g,m,!0).Insert(d)}QueryRange(d,c){let f=this.XToCell(d.getLeft());const g=this.YToCell(d.getTop()),h=this.XToCell(d.getRight());for(d=this.YToCell(d.getBottom());f<=h;++f)for(let m=g;m<=d;++m){const k=this.GetCell(f,m,!1);k&&
k.Dump(c)}}MarkRangeChanged(d){let c=d.getLeft();const f=d.getTop(),g=d.getRight();for(d=d.getBottom();c<=g;++c)for(let h=f;h<=d;++h){const m=this.GetCell(c,h,!1);m&&m.SetChanged()}}}}"use strict";
{const e=self.C3,d=new e.Rect,c=new e.Quad,f=[],g=new e.Rect,h=new e.Rect,m=self.glMatrix.vec3,k=m.fromValues(0,1,0);function a(l,p){return l.GetWorldInfo()._GetLastCachedZIndex()-p.GetWorldInfo()._GetLastCachedZIndex()}function b(l,p){return l.GetWorldInfo().GetZElevation()-p.GetWorldInfo().GetZElevation()}e.Layer=class extends e.DefendedBase{constructor(l,p,r){super();this._layout=l;this._runtime=l.GetRuntime();this._name=r[0];this._index=p;this._sid=r[2];this._isVisible=!!r[3];this._backgroundColor=
e.New(e.Color);this._backgroundColor.setFromJSON(r[4].map(t=>t/255));this._isTransparent=!!r[5];this._parallaxX=r[6];this._parallaxY=r[7];this._color=e.New(e.Color,1,1,1,r[8]);this._premultipliedColor=e.New(e.Color);this._isForceOwnTexture=r[9];this._useRenderCells=r[10];this._scaleRate=r[11];this._blendMode=r[12];this._curRenderTarget=null;this._scale=1;this._zElevation=r[16];this._angle=0;this._isAngleEnabled=!0;this._viewport=e.New(e.Rect);this._viewportZ0=e.New(e.Rect);this._startupInitialInstances=
[];this._initialInstances=[];this._createdGlobalUids=[];this._instances=[];this._anyInstanceZElevated=this._zIndicesUpToDate=!1;this._effectList=e.New(e.EffectList,this,r[15]);this._renderGrid=null;this._lastRenderList=[];this._isRenderListUpToDate=!1;this._lastRenderCells=e.New(e.Rect,0,0,-1,-1);this._curRenderCells=e.New(e.Rect,0,0,-1,-1);this._iLayer=new self.ILayer(this);this._UpdatePremultipliedColor();this._useRenderCells&&(this._renderGrid=e.New(e.RenderGrid,this._runtime.GetOriginalViewportWidth(),
this._runtime.GetOriginalViewportHeight()));for(const t of r[14])l=this._runtime.GetObjectClassByIndex(t[1]),this._layout._AddInitialObjectClass(l),l.GetDefaultInstanceData()||(l.SetDefaultInstanceData(t),l._SetDefaultLayerIndex(this._index)),this._initialInstances.push(t);e.shallowAssignArray(this._startupInitialInstances,this._initialInstances)}static Create(l,p,r){return e.New(e.Layer,l,p,r)}Release(){this._runtime=this._layout=null}CreateInitialInstances(l){const p=this._layout.IsFirstVisit();
let r=0;const t=this._initialInstances;for(let w=0,x=t.length;w<x;++w){var u=t[w];const A=this._runtime.GetObjectClassByIndex(u[1]);let E=!0;if(!A.HasPersistBehavior()||p)u=this._runtime.CreateInstanceFromData(u,this,!0),l.push(u),A.IsGlobal()&&(E=!1,this._createdGlobalUids.push(u.GetUID()));E&&(t[r]=t[w],++r)}e.truncateArray(t,r);this._runtime.FlushPendingInstances();this.SetZIndicesChanged()}_AddInstance(l,p){const r=l.GetWorldInfo();if(r.GetLayer()!==this)throw Error("instance added to wrong layer");
this._instances.push(l);0!==r.GetZElevation()&&(this._anyInstanceZElevated=!0);p&&this._useRenderCells&&l.GetWorldInfo().SetBboxChanged();this.SetZIndicesChanged()}_MaybeAddInstance(l){this._instances.includes(l)||(this._instances.push(l),0!==l.GetWorldInfo().GetZElevation()&&(this._anyInstanceZElevated=!0),this.SetZIndicesChanged())}_PrependInstance(l,p){const r=l.GetWorldInfo();if(r.GetLayer()!==this)throw Error("instance added to wrong layer");this._instances.unshift(l);0!==r.GetZElevation()&&
(this._anyInstanceZElevated=!0);this.SetZIndicesChanged();p&&this._useRenderCells&&l.GetWorldInfo().SetBboxChanged()}_RemoveInstance(l,p){const r=this._instances.indexOf(l);0>r||(p&&this._useRenderCells&&l.GetWorldInfo()._RemoveFromRenderCells(),this._instances.splice(r,1),this.SetZIndicesChanged(),this._MaybeResetAnyInstanceZElevatedFlag())}_SetAnyInstanceZElevated(){this._anyInstanceZElevated=!0}_MaybeResetAnyInstanceZElevatedFlag(){0===this._instances.length&&(this._anyInstanceZElevated=!1)}_SortInstancesByLastCachedZIndex(l){if(l){l=
new Set;for(var p of this._instances){var r=p.GetWorldInfo()._GetLastCachedZIndex();0<=r&&l.add(r)}p=-1;for(const t of this._instances)if(r=t.GetWorldInfo(),!(0<=r._GetLastCachedZIndex())){for(++p;l.has(p);)++p;r._SetZIndex(p)}}this._instances.sort(a)}_Start(){}_End(){for(const l of this._instances)l.GetObjectClass().IsGlobal()||this._runtime.DestroyInstance(l);this._runtime.FlushPendingInstances();e.clearArray(this._instances);this._anyInstanceZElevated=!1;this.SetZIndicesChanged()}RecreateInitialObjects(l,
p,r,t){const u=this._runtime.GetEventSheetManager(),w=this._runtime.GetAllObjectClasses(),x=l.IsFamily(),A=[];for(const B of this._initialInstances){var E=B[0];if(p.containsPoint(E[0],E[1])){E=w[B[1]];if(E!==l)if(x){if(!l.FamilyHasMember(E))continue}else continue;E=this;var y=this._runtime.GetCurrentLayout();this.GetLayout()!==y&&((E=y.GetLayerByName(this.GetName()))||(E=y.GetLayerByIndex(this.GetIndex())));E=this._runtime.CreateInstanceFromData(B,E,!1);y=E.GetWorldInfo();y.OffsetXY(r,t);y.SetBboxChanged();
u.BlockFlushingInstances(!0);E._TriggerOnCreated();if(E.IsInContainer())for(const H of E.siblings())H._TriggerOnCreated();u.BlockFlushingInstances(!1);A.push(E)}}return A}GetInstanceCount(){return this._instances.length}GetLayout(){return this._layout}GetName(){return this._name}GetIndex(){return this._index}GetSID(){return this._sid}GetRuntime(){return this._runtime}GetDevicePixelRatio(){return this._runtime.GetDevicePixelRatio()}GetEffectList(){return this._effectList}UsesRenderCells(){return this._useRenderCells}GetRenderGrid(){return this._renderGrid}SetRenderListStale(){this._isRenderListUpToDate=
!1}IsVisible(){return this._isVisible}SetVisible(l){l=!!l;this._isVisible!==l&&(this._isVisible=l,this._runtime.UpdateRender())}GetViewport(){return this._viewport}GetViewportForZ(l,p){var r=this._viewportZ0;if(0===l)p.copy(r);else{const t=this.Get2DScaleFactorToZ(l);l=r.midX();const u=r.midY(),w=.5*r.width()/t;r=.5*r.height()/t;p.set(l-w,u-r,l+w,u+r)}}GetOpacity(){return this._color.getA()}SetOpacity(l){l=e.clamp(l,0,1);this._color.getA()!==l&&(this._color.setA(l),this._UpdatePremultipliedColor(),
this._runtime.UpdateRender())}_UpdatePremultipliedColor(){this._premultipliedColor.copy(this._color);this._premultipliedColor.premultiply()}GetPremultipliedColor(){return this._premultipliedColor}HasDefaultColor(){return this._color.equalsRgba(1,1,1,1)}GetScaleRate(){return this._scaleRate}SetScaleRate(l){this._scaleRate!==l&&(this._scaleRate=l,this._runtime.UpdateRender())}GetParallaxX(){return this._parallaxX}GetParallaxY(){return this._parallaxY}SetParallax(l,p){if(this._parallaxX!==l||this._parallaxY!==
p)if(this._parallaxX=l,this._parallaxY=p,this._runtime.UpdateRender(),1!==this._parallaxX||1!==this._parallaxY)for(const r of this._instances)r.GetObjectClass()._SetAnyInstanceParallaxed(!0)}SetParallaxX(l){this.SetParallax(l,this.GetParallaxY())}SetParallaxY(l){this.SetParallax(this.GetParallaxX(),l)}SetZElevation(l){l=+l;this._zElevation!==l&&(this._zElevation=l,this._runtime.UpdateRender())}GetZElevation(){return this._zElevation}SetAngle(l){this._angle=e.clampAngle(l)}GetAngle(){return this._isAngleEnabled?
e.clampAngle(this._layout.GetAngle()+this._angle):0}GetOwnAngle(){return this._angle}HasInstances(){return 0<this._instances.length}_GetInstances(){return this._instances}GetBackgroundColor(){return this._backgroundColor}IsTransparent(){return this._isTransparent}SetTransparent(l){this._isTransparent=!!l}IsForceOwnTexture(){return this._isForceOwnTexture}SetForceOwnTexture(l){this._isForceOwnTexture=!!l}SetBlendMode(l){this._blendMode!==l&&(this._blendMode=l,this._runtime.UpdateRender())}GetBlendMode(){return this._blendMode}IsTransformCompatibleWith(l){return this===
l||this._parallaxX===l._parallaxX&&this._parallaxY===l._parallaxY&&this._scale===l._scale&&this._scaleRate===l._scaleRate&&this._angle===l._angle}_RemoveAllInstancesInSet(l){0!==l.size&&0<e.arrayRemoveAllInSet(this._instances,l)&&(this._MaybeResetAnyInstanceZElevatedFlag(),this.SetZIndicesChanged())}SetZIndicesChanged(){this._isRenderListUpToDate=this._zIndicesUpToDate=!1}_UpdateZIndices(){if(!this._zIndicesUpToDate){this._instances.sort(b);if(this._useRenderCells)for(let l=0,p=this._instances.length;l<
p;++l){const r=this._instances[l].GetWorldInfo();r._SetZIndex(l);this._renderGrid.MarkRangeChanged(r.GetRenderCellRange())}else for(let l=0,p=this._instances.length;l<p;++l)this._instances[l].GetWorldInfo()._SetZIndex(l);this._zIndicesUpToDate=!0}}MoveInstanceAdjacent(l,p,r){var t=l.GetWorldInfo();p=p.GetWorldInfo();if(t.GetLayer()!==this||p.GetLayer()!==this)throw Error("can't arrange Z order unless both objects on this layer");t=t.GetZIndex();p=p.GetZIndex();if(t===p+(r?1:-1))return!1;e.arrayRemove(this._instances,
t);t<p&&p--;r&&p++;p===this._instances.length?this._instances.push(l):this._instances.splice(p,0,l);this.SetZIndicesChanged();return!0}_MergeSortedZArrays(l,p){const r=[];let t=0,u=0,w=l.length,x=p.length;for(;t<w&&u<x;){const A=l[t],E=p[u];A.GetWorldInfo()._GetLastCachedZIndex()<E.GetWorldInfo()._GetLastCachedZIndex()?(r.push(A),++t):(r.push(E),++u)}for(;t<w;++t)r.push(l[t]);for(;u<x;++u)r.push(p[u]);return r}_MergeAllSortedZArrays_pass(l){const p=[],r=l.length;for(let t=0;t<r-1;t+=2)p.push(this._MergeSortedZArrays(l[t],
l[t+1]));1===r%2&&p.push(l[r-1]);return p}_MergeAllSortedZArrays(l){for(;1<l.length;)l=this._MergeAllSortedZArrays_pass(l);return l[0]}_GetRenderCellInstancesToDraw(){this._UpdateZIndices();e.clearArray(f);this._renderGrid.QueryRange(this._viewport,f);return f.length?1===f.length?f[0]:this._MergeAllSortedZArrays(f):[]}_IsOpaque(){return!this.UsesOwnTexture()&&!this.IsTransparent()}ShouldDraw(){return this.IsVisible()&&0<this.GetOpacity()&&(this.HasInstances()||!this.IsTransparent())}UsesOwnTexture(){return this.IsForceOwnTexture()||
!this.HasDefaultColor()||0!==this.GetBlendMode()||this._effectList.HasAnyActiveEffect()}GetRenderTarget(){return this._curRenderTarget}_CanFastPathDrawLayer(l){if(0===l.length)return!0;if(2<=l.length)return!1;l=l[0].GetShaderProgram();return!l.MustPreDraw()&&!l.UsesDest()&&!l.UsesCrossSampling()&&this.HasDefaultColor()}Get2DScaleFactorToZ(l){const p=this.GetCameraZ();return p/(p-l)}GetCameraZ(){return 100/this.GetNormalScale()}_SetTransform(l,p=0,r=0){const t=this._runtime.GetRenderScale();p=(this._viewport.midX()+
p)*t;r=(this._viewport.midY()+r)*t;const u=this.GetCameraZ();l.SetCameraXYZ(p,r,u);l.SetLookXYZ(p,r,u-100);p=this.GetAngle();0===p?m.set(k,0,1,0):m.set(k,Math.sin(p),Math.cos(p),0);l.ResetModelView(k);l.Scale(t,t);l.UpdateModelView()}Draw(l,p,r){const t=this._runtime.GetCanvasManager(),u=this.UsesOwnTexture();var w=null;let x=null;if(this._runtime.IsGPUProfiling()&&l.SupportsGPUProfiling()){const A=t.GetLayerTimingsBuffer(this);A&&(x=A.AddTimeElapsedQuery(),l.StartQuery(x))}u?(w={sampling:this._runtime.GetSampling()},
"low"===t.GetCurrentFullscreenScalingQuality()&&(w.width=t.GetDrawWidth(),w.height=t.GetDrawHeight()),w=this._runtime.GetAdditionalRenderTarget(w),l.SetRenderTarget(w),this.IsTransparent()&&l.ClearRgba(0,0,0,0)):l.SetRenderTarget(p);this.IsTransparent()||l.Clear(this._backgroundColor);this._curRenderTarget=w||p;this._SetTransform(l);l.SetBaseZ(this.GetZElevation());this.GetNormalScale()>Number.EPSILON&&(this._UpdateZIndices(),this._useRenderCells&&0===this.GetZElevation()&&!this._anyInstanceZElevated?
this._DrawInstances_RenderCells(l):this._DrawInstances(l,this._instances));l.SetBaseZ(0);l.SetCurrentZ(0);l.SetCameraXYZ(0,0,100);l.SetLookXYZ(0,0,0);u&&this._DrawLayerOwnTextureToRenderTarget(l,w,p,r);x&&l.EndQuery(x);this._curRenderTarget=null}_DrawInstances(l,p){const r=this._viewport,t=this._curRenderTarget;let u=null;for(let w=0,x=p.length;w<x;++w){const A=p[w];if(A===u)continue;u=A;const E=A.GetWorldInfo();E.IsVisible()&&E.IsInViewport(r)&&(E.HasAnyActiveEffect()?this._DrawInstanceWithEffectsAndRestore(A,
E,l,t):this._DrawInstance(A,E,l))}}_DrawInstances_RenderCells(l){var p=this._renderGrid;const r=this._curRenderCells,t=this._lastRenderCells,u=this._viewport;r.set(p.XToCell(u.getLeft()),p.YToCell(u.getTop()),p.XToCell(u.getRight()),p.YToCell(u.getBottom()));this._isRenderListUpToDate&&r.equals(t)?p=this._lastRenderList:(p=this._GetRenderCellInstancesToDraw(),this._isRenderListUpToDate=!0,t.copy(r));this._DrawInstances(l,p);p!==this._lastRenderList&&e.shallowAssignArray(this._lastRenderList,p)}_DrawInstance(l,
p,r){p=p.GetRendererStateGroup();r.GetCurrentStateGroup()!==p&&p.Apply();l.Draw(r)}_DrawInstanceWithEffectsAndRestore(l,p,r,t){this._DrawInstanceWithEffects(l,p,r,t,null)&&this._SetTransform(r)}_DrawInstanceWithEffects(l,p,r,t,u){const w=p.GetInstanceEffectList().GetActiveEffectTypes();if(1===w.length){const x=w[0],A=x.GetShaderProgram();if(!A.NeedsPostDrawOrExtendsBox()&&p.HasDefaultColor()&&!l.MustPreDraw())return this._DrawInstanceWithEffects_FastPath(l,p,x,A,r),!1}l=e.RenderEffectChain(r,this._runtime,
l,t,w,u);r.SetBaseZ(this.GetZElevation());return l}_DrawInstanceWithEffects_FastPath(l,p,r,t,u){u.SetProgram(t);u.SetBlendMode(p.GetBlendMode());t.IsAnimated()&&this._runtime.UpdateRender();let w=0,x=0;if(t.UsesAnySrcRectOrPixelSize()){const [A,E]=l.GetCurrentSurfaceSize();w=1/A;x=1/E;(t=l.GetCurrentTexRect())?h.copy(t):h.set(0,0,0,0)}r=p.GetInstanceEffectList().GetEffectParametersForIndex(r.GetIndex());u.SetCurrentZ(p.GetZElevation());u.SetProgramParameters(null,g,h,h,p.GetBoundingBox(),w,x,this.GetOwnScale(),
this.GetAngle(),this._runtime.GetGameTime(),r);l.Draw(u)}_DrawLayerOwnTextureToRenderTarget(l,p,r,t){const u=this._effectList.GetActiveEffectTypes(),w=this._runtime;if(this._CanFastPathDrawLayer(u)){l.SetRenderTarget(r);if(1===u.length){var x=u[0];r=x.GetShaderProgram();l.SetProgram(r);h.set(0,0,1,1);x=this._effectList.GetEffectParametersForIndex(x.GetIndex());l.SetProgramParameters(null,g,h,h,this._viewport,1/w.GetDrawWidth(),1/w.GetDrawHeight(),this.GetNormalScale(),this.GetAngle(),w.GetGameTime(),
x);r.IsAnimated()&&w.UpdateRender()}else l.SetTextureFillMode();t&&0===this._blendMode&&this.HasDefaultColor()&&0===u.length?l.CopyRenderTarget(p):(l.SetBlendMode(this._blendMode),l.SetColor(this._premultipliedColor),l.DrawRenderTarget(p));l.InvalidateRenderTarget(p);w.ReleaseAdditionalRenderTarget(p)}else e.RenderEffectChain(l,w,this,r,u)}GetOwnScale(){return this._scale}SetOwnScale(l){this._scale!==l&&(this._scale=l,this._layout.BoundScrolling(),this._runtime.UpdateRender())}GetRenderScale(){return this.GetNormalScale()*
this._runtime.GetRenderScale()}GetDisplayScale(){return this.GetNormalScale()*this._runtime.GetDisplayScale()}GetNormalScale(){return(this._scale*this._layout.GetScale()-1)*this._scaleRate+1}UpdateViewport(){this._isAngleEnabled=!1;let [l,p]=this.CanvasCssToLayer(0,0);this._isAngleEnabled=!0;this._runtime.IsPixelRoundingEnabled()&&(l=Math.round(l),p=Math.round(p));var r=1/this.GetNormalScale();const t=this._viewportZ0;t.set(l,p,l+this._runtime.GetViewportWidth()*r,p+this._runtime.GetViewportHeight()*
r);r=this.GetAngle();0!==r&&(d.copy(t),d.offset(-t.midX(),-t.midY()),c.setFromRotatedRect(d,r),c.getBoundingBox(d),d.offset(t.midX(),t.midY()),t.copy(d));this.GetViewportForZ(this._zElevation,this._viewport)}CanvasCssToLayer(l,p,r=0){return this._CanvasToLayer(l,p,r,this.GetDisplayScale())}DrawSurfaceToLayer(l,p,r=0){return this._CanvasToLayer(l,p,r,this.GetRenderScale()*this.GetDevicePixelRatio())}_CanvasToLayer(l,p,r,t){var u=this._runtime.GetParallaxXOrigin(),w=this._runtime.GetParallaxYOrigin();
u=(this._layout.GetScrollX()-u)*this._parallaxX+u;w=(this._layout.GetScrollY()-w)*this._parallaxY+w;var x=this.GetNormalScale(),A=this._runtime.GetViewportWidth()/x;x=this._runtime.GetViewportHeight()/x;l=u-A/2+l/t;p=w-x/2+p/t;A=this.GetAngle();0!==A&&(l-=u,p-=w,t=Math.cos(A),A=Math.sin(A),x=l*t-p*A,p=p*t+l*A,l=x,l+=u,p+=w);0!==r&&(u=this._viewportZ0.midX(),w=this._viewportZ0.midY(),r=this.Get2DScaleFactorToZ(r),l=(l-u)/r+u,p=(p-w)/r+w);return[l,p]}CanvasCssToLayer_DefaultTransform(l,p){const r=this._scale,
t=this._scaleRate,u=this._parallaxX,w=this._parallaxY,x=this._angle;this._parallaxY=this._parallaxX=this._scaleRate=this._scale=1;this._angle=0;l=this.CanvasCssToLayer(l,p);this._scale=r;this._scaleRate=t;this._parallaxX=u;this._parallaxY=w;this._angle=x;return l}LayerToCanvasCss(l,p,r=0){return this._LayerToCanvas(l,p,r,this.GetDisplayScale())}LayerToDrawSurface(l,p,r=0){return this._LayerToCanvas(l,p,r,this.GetRenderScale()*this.GetDevicePixelRatio())}_LayerToCanvas(l,p,r,t){var u=this._runtime,
w=this._layout;if(0!==r){var x=this._viewportZ0.midX(),A=this._viewportZ0.midY();r=this.Get2DScaleFactorToZ(r);l=(l-x)*r+x;p=(p-A)*r+A}x=u.GetParallaxXOrigin();A=u.GetParallaxYOrigin();x=(w.GetScrollX()-x)*this._parallaxX+x;w=(w.GetScrollY()-A)*this._parallaxY+A;r=this.GetAngle();if(0!==r){l-=x;p-=w;A=Math.cos(-r);r=Math.sin(-r);const E=l*A-p*r;p=p*A+l*r;l=E;l+=x;p+=w}r=this.GetNormalScale();A=u.GetViewportWidth()/r;u=u.GetViewportHeight()/r;return[(l-(x-A/2))*t,(p-(w-u/2))*t]}_GetLayerToDrawSurfaceScale(l,
p){l*=this.GetRenderScale()*this.GetDevicePixelRatio();0!==p&&(l*=this.Get2DScaleFactorToZ(p));return l}_SaveToJson(){return{s:this.GetOwnScale(),a:this.GetOwnAngle(),vl:this._viewport.getLeft(),vt:this._viewport.getTop(),vr:this._viewport.getRight(),vb:this._viewport.getBottom(),v:this.IsVisible(),bc:this._backgroundColor.toJSON(),t:this.IsTransparent(),px:this.GetParallaxX(),py:this.GetParallaxY(),c:this._color.toJSON(),sr:this.GetScaleRate(),fx:this._effectList.SaveToJson(),cg:this._createdGlobalUids}}_LoadFromJson(l){this._scale=
l.s;this._angle=l.a;this._viewport.set(l.vl,l.vt,l.vr,l.vb);this._isVisible=!!l.v;this._backgroundColor.setFromJSON(l.bc);this._isTransparent=!!l.t;this._parallaxX=l.px;this._parallaxY=l.py;this._color.setFromJSON(l.c);this._scaleRate=l.sr;e.shallowAssignArray(this._createdGlobalUids,l.cg);e.shallowAssignArray(this._initialInstances,this._startupInitialInstances);const p=new Set(this._createdGlobalUids);let r=0;for(let t=0,u=this._initialInstances.length;t<u;++t)p.has(this._initialInstances[t][2])||
(this._initialInstances[r]=this._initialInstances[t],++r);e.truncateArray(this._initialInstances,r);this._effectList.LoadFromJson(l.fx);this._SortInstancesByLastCachedZIndex(!1);this.SetZIndicesChanged()}GetILayer(){return this._iLayer}}}"use strict";
{const e=self.C3,d=self.C3Debugger,c=e.New(e.Rect),f=e.New(e.Rect),g=e.New(e.Rect);e.Layout=class extends e.DefendedBase{constructor(h,m,k){super();this._layoutManager=h;this._runtime=h.GetRuntime();this._name=k[0];this._originalWidth=k[1];this._originalHeight=k[2];this._width=k[1];this._height=k[2];this._isUnboundedScrolling=!!k[3];this._eventSheetName=k[4];this._eventSheet=null;this._sid=k[5];this._index=m;this._scrollY=this._scrollX=0;this._scale=1;this._angle=0;this._initialObjectClasses=new Set;
this._textureLoadedTypes=new Set;this._textureLoadPendingPromises=new Set;this._createdInstances=[];this._initialNonWorld=[];this._layers=[];this._layersByName=new Map;this._layersBySid=new Map;this._effectList=e.New(e.EffectList,this,k[8]);this._curRenderTarget=null;this._persistData={};this._isFirstVisit=!0;this._iLayout=new self.ILayout(this);this._userScriptDispatcher=e.New(e.Event.Dispatcher);for(const a of k[6])h=e.Layer.Create(this,this._layers.length,a),this._layers.push(h),this._layersByName.set(h.GetName().toLowerCase(),
h),this._layersBySid.set(h.GetSID(),h);for(const a of k[7]){k=this._runtime.GetObjectClassByIndex(a[1]);if(!k)throw Error("missing nonworld object class");k.GetDefaultInstanceData()||k.SetDefaultInstanceData(a);this._initialNonWorld.push(a);this._AddInitialObjectClass(k)}}Release(){for(const h of this._layers)h.Release();e.clearArray(this._layers);this._textureLoadPendingPromises.clear();this._runtime=this._layoutManager=this._eventSheet=null}GetRuntime(){return this._runtime}GetName(){return this._name}GetSID(){return this._sid}GetIndex(){return this._index}GetEffectList(){return this._effectList}GetMinLayerScale(){let h=
this._layers[0].GetNormalScale();for(let m=1,k=this._layers.length;m<k;++m){const a=this._layers[m];if(0!==a.GetParallaxX()||0!==a.GetParallaxY())h=Math.min(h,a.GetNormalScale())}return h}SetScrollX(h){if(!this._isUnboundedScrolling){const m=this._runtime.GetViewportWidth()*(1/this.GetMinLayerScale())/2;h>this._width-m&&(h=this._width-m);h<m&&(h=m)}this._scrollX!==h&&(this._scrollX=h,this._runtime.UpdateRender())}GetScrollX(){return this._scrollX}SetScrollY(h){if(!this._isUnboundedScrolling){const m=
this._runtime.GetViewportHeight()*(1/this.GetMinLayerScale())/2;h>this._height-m&&(h=this._height-m);h<m&&(h=m)}this._scrollY!==h&&(this._scrollY=h,this._runtime.UpdateRender())}GetScrollY(){return this._scrollY}BoundScrolling(){this.SetScrollX(this.GetScrollX());this.SetScrollY(this.GetScrollY())}GetScale(){return this._scale}SetScale(h){h=+h;this._scale!==h&&(this._scale=h,this.BoundScrolling())}SetAngle(h){this._angle=e.clampAngle(h)}GetAngle(){return this._angle}GetWidth(){return this._width}SetWidth(h){!isFinite(h)||
1>h||(this._width=h)}GetHeight(){return this._height}SetHeight(h){!isFinite(h)||1>h||(this._height=h)}GetEventSheet(){return this._eventSheet}GetLayers(){return this._layers}GetLayerCount(){return this._layers.length}GetLayer(h){return"number"===typeof h?this.GetLayerByIndex(h):this.GetLayerByName(h.toString())}GetLayerByIndex(h){h=e.clamp(Math.floor(h),0,this._layers.length-1);return this._layers[h]}GetLayerByName(h){return this._layersByName.get(h.toLowerCase())||null}GetLayerBySID(h){return this._layersBySid.get(h)||
null}HasOpaqueBottomLayer(){for(const h of this._layers)if(h.ShouldDraw())return h._IsOpaque();return!1}IsFirstVisit(){return this._isFirstVisit}_GetInitialObjectClasses(){return[...this._initialObjectClasses]}_AddInitialObjectClass(h){if(h.IsInContainer())for(const m of h.GetContainer().GetObjectTypes())this._initialObjectClasses.add(m);else this._initialObjectClasses.add(h)}_GetTextureLoadedObjectTypes(){return[...this._textureLoadedTypes]}_Load(h,m){if(h===this||!m)return Promise.resolve();h&&
(e.CopySet(this._textureLoadedTypes,h._textureLoadedTypes),h._textureLoadedTypes.clear());h=[];for(const k of this._initialObjectClasses)this._textureLoadedTypes.has(k)||(h.push(k.LoadTextures(m)),this._textureLoadedTypes.add(k));return Promise.all(h)}async MaybeLoadTexturesFor(h){if(h.IsFamily())throw Error("cannot load textures for family");var m=this._runtime.GetWebGLRenderer();!m||m.IsContextLost()||this._textureLoadedTypes.has(h)||(this._textureLoadedTypes.add(h),m=h.LoadTextures(m),this._AddPendingTextureLoadPromise(m),
await m,h.OnDynamicTextureLoadComplete(),this._runtime.UpdateRender())}_AddPendingTextureLoadPromise(h){this._textureLoadPendingPromises.add(h);h.then(()=>this._textureLoadPendingPromises.delete(h)).catch(()=>this._textureLoadPendingPromises.delete(h))}WaitForPendingTextureLoadsToComplete(){return Promise.all([...this._textureLoadPendingPromises])}MaybeUnloadTexturesFor(h){if(h.IsFamily()||0<h.GetInstanceCount())throw Error("cannot unload textures");const m=this._runtime.GetWebGLRenderer();m&&this._textureLoadedTypes.has(h)&&
(this._textureLoadedTypes.delete(h),h.ReleaseTextures(m))}_Unload(h,m){if(h!==this&&m)for(const k of this._textureLoadedTypes)k.IsGlobal()||h._initialObjectClasses.has(k)||(k.ReleaseTextures(),this._textureLoadedTypes.delete(k))}_OnWebGLContextLost(){this._textureLoadedTypes.clear()}async _StartRunning(h){const m=this._runtime,k=this._layoutManager,a=m.GetEventSheetManager();this._eventSheetName&&(this._eventSheet=a.GetEventSheetByName(this._eventSheetName),this._eventSheet._UpdateDeepIncludes());
k._SetMainRunningLayout(this);this._width=this._originalWidth;this._height=this._originalHeight;this._scrollX=m.GetOriginalViewportWidth()/2;this._scrollY=m.GetOriginalViewportHeight()/2;this.BoundScrolling();this._MoveGlobalObjectsToThisLayout(h);this._runtime.SetUsingCreatePromises(!0);this._CreateInitialInstances();this._isFirstVisit||this._CreatePersistedInstances();this._CreateAndLinkContainerInstances(this._createdInstances);this._CreateInitialNonWorldInstances();k.ClearPendingChangeLayout();
m.FlushPendingInstances();this._runtime.SetUsingCreatePromises(!1);const b=this._runtime.GetCreatePromises();await Promise.all(b);e.clearArray(b);if(m.IsLoadingState())m._TriggerOnCreateAfterLoad(this._createdInstances);else for(const l of this._createdInstances)l._TriggerOnCreated(),l.SetupInitialSceneGraphConnections();e.clearArray(this._createdInstances);await Promise.all([...this._initialObjectClasses].map(l=>l.PreloadTexturesWithInstances(this._runtime.GetWebGLRenderer())));h&&(m.Dispatcher().dispatchEvent(new e.Event("beforefirstlayoutstart")),
await m.DispatchUserScriptEventAsyncWait(new e.Event("beforeprojectstart")));await this.DispatchUserScriptEventAsyncWait(new e.Event("beforelayoutstart"));m.IsLoadingState()||await m.TriggerAsync(e.Plugins.System.Cnds.OnLayoutStart,null,null);await this.DispatchUserScriptEventAsyncWait(new e.Event("afterlayoutstart"));h&&(m.Dispatcher().dispatchEvent(new e.Event("afterfirstlayoutstart")),await m.DispatchUserScriptEventAsyncWait(new e.Event("afterprojectstart")));a._RunQueuedTriggers(k);await this.WaitForPendingTextureLoadsToComplete();
this._isFirstVisit=!1}_MoveGlobalObjectsToThisLayout(h){for(const k of this._runtime.GetAllObjectClasses())if(!k.IsFamily()&&k.IsWorldType())for(const a of k.GetInstances()){const b=a.GetWorldInfo();var m=b.GetLayer();m=e.clamp(m.GetIndex(),0,this._layers.length-1);m=this._layers[m];b._SetLayer(m);m._MaybeAddInstance(a)}if(!h)for(const k of this._layers)k._SortInstancesByLastCachedZIndex(!1)}_CreateInitialInstances(){for(const h of this._layers)h.CreateInitialInstances(this._createdInstances),h.UpdateViewport(),
h._Start()}_CreatePersistedInstances(){let h=!1;for(const [k,a]of Object.entries(this._persistData)){const b=this._runtime.GetObjectClassBySID(parseInt(k,10));if(b&&!b.IsFamily()&&b.HasPersistBehavior()){for(const l of a){var m=null;if(b.IsWorldType()&&(m=this.GetLayerBySID(l.w.l),!m))continue;m=this._runtime.CreateInstanceFromData(b,m,!1,0,0,!0);m.LoadFromJson(l);h=!0;this._createdInstances.push(m)}e.clearArray(a)}}for(const k of this._layers)k._SortInstancesByLastCachedZIndex(!0),k.SetZIndicesChanged();
h&&(this._runtime.FlushPendingInstances(),this._runtime._RefreshUidMap())}_CreateAndLinkContainerInstances(h){for(const k of h){if(!k.IsInContainer())continue;const a=k.GetWorldInfo(),b=k.GetIID();for(const l of k.GetObjectClass().GetContainer().objectTypes())if(l!==k.GetObjectClass()){var m=l.GetInstances();m.length>b?k._AddSibling(m[b]):(m=a?this._runtime.CreateInstanceFromData(l,a.GetLayer(),!0,a.GetX(),a.GetY(),!0):this._runtime.CreateInstanceFromData(l,null,!0,0,0,!0),this._runtime.FlushPendingInstances(),
l._UpdateIIDs(),k._AddSibling(m),h.push(m))}}}_CreateInitialNonWorldInstances(){for(const h of this._initialNonWorld)this._runtime.GetObjectClassByIndex(h[1]).IsInContainer()||this._runtime.CreateInstanceFromData(h,null,!0)}_CreateGlobalNonWorlds(){const h=[],m=this._initialNonWorld;let k=0;for(let a=0,b=m.length;a<b;++a){const l=m[a],p=this._runtime.GetObjectClassByIndex(l[1]);p.IsGlobal()?p.IsInContainer()&&p.GetContainer().HasAnyWorldType()||h.push(this._runtime.CreateInstanceFromData(l,null,!0)):
(m[k]=l,++k)}e.truncateArray(m,k);this._runtime.FlushPendingInstances();this._CreateAndLinkContainerInstances(h)}RecreateInitialObjects(h,m,k,a,b){if(k)return k.RecreateInitialObjects(h,m,a,b);k=[];for(const l of this._layers)k.push(l.RecreateInitialObjects(h,m,a,b));return k.flat()}async _StopRunning(){const h=this._layoutManager;this._runtime.IsLoadingState()||await this._runtime.TriggerAsync(e.Plugins.System.Cnds.OnLayoutEnd,null,null);h.SetIsEndingLayout(!0);this._runtime.GetEventSheetManager().ClearAllScheduledWaits();
this._isFirstVisit||this._SavePersistData();for(const m of this._layers)m._End();for(const m of this._runtime.GetAllObjectClasses())if(!(m.IsGlobal()||m.IsWorldType()||m.GetPlugin().IsSingleGlobal()||m.IsFamily())){for(const k of m.GetInstances())this._runtime.DestroyInstance(k);this._runtime.FlushPendingInstances()}h.SetIsEndingLayout(!1);h.GetMainRunningLayout()===this&&h._SetMainRunningLayout(null)}_SaveInstanceToPersist(h){const m=h.GetObjectClass().GetSID().toString();this._persistData.hasOwnProperty(m)||
(this._persistData[m]=[]);this._persistData[m].push(h.SaveToJson())}_SavePersistData(){for(const h of this._layers){h._UpdateZIndices();for(const m of h._GetInstances()){const k=m.GetObjectClass();!k.IsGlobal()&&k.HasPersistBehavior()&&this._SaveInstanceToPersist(m)}}}ResetPersistData(){this._persistData={};this._isFirstVisit=!0}GetRenderTarget(){return this._curRenderTarget}UsesOwnTexture(){return"low"===this._runtime.GetCanvasManager().GetCurrentFullscreenScalingQuality()||this._runtime.UsesAnyBackgroundBlending()||
"low-latency"===this._runtime.GetCompositingMode()||this._effectList.HasAnyActiveEffect()}_CanFastPathDrawLayout(h){return 0===h.length?!0:2<=h.length?!1:!h[0].GetShaderProgram().MustPreDraw()}Draw(h){var m=this._runtime.GetCanvasManager();const k=this.UsesOwnTexture();var a=null;k?("low-latency"!==this._runtime.GetCompositingMode()&&(h.SetRenderTarget(null),h.ClearRgba(0,0,0,0)),a={sampling:this._runtime.GetSampling(),readback:this._runtime.UsesAnyBackgroundBlending()||this._effectList.HasAnyActiveEffect()},
"low"===m.GetCurrentFullscreenScalingQuality()&&(a.width=m.GetDrawWidth(),a.height=m.GetDrawHeight()),a=this._runtime.GetAdditionalRenderTarget(a),h.SetRenderTarget(a)):h.SetRenderTarget(null);this.HasOpaqueBottomLayer()||h.ClearRgba(0,0,0,0);this._curRenderTarget=a;m=!0;for(const b of this._layers)b.UpdateViewport(),b.ShouldDraw()&&(b.Draw(h,a,m),m=!1);k&&this._DrawLayoutOwnTextureToRenderTarget(h,a);this._curRenderTarget=null}_DrawLayoutOwnTextureToRenderTarget(h,m){const k=this._effectList.GetActiveEffectTypes(),
a=this._runtime;if(this._CanFastPathDrawLayout(k)){h.SetRenderTarget(null);if(1===k.length){var b=k[0];const l=b.GetShaderProgram();h.SetProgram(l);f.set(0,0,1,1);g.set(0,0,a.GetViewportWidth(),a.GetViewportHeight());b=this._effectList.GetEffectParametersForIndex(b.GetIndex());h.SetProgramParameters(null,c,f,f,g,1/a.GetDrawWidth(),1/a.GetDrawHeight(),this.GetScale(),this.GetAngle(),a.GetGameTime(),b);l.IsAnimated()&&a.UpdateRender()}else h.SetTextureFillMode();0===k.length?h.CopyRenderTarget(m):(h.SetAlphaBlend(),
h.ResetColor(),h.DrawRenderTarget(m));h.InvalidateRenderTarget(m);a.ReleaseAdditionalRenderTarget(m)}else e.RenderEffectChain(h,a,this,null,k)}_SaveToJson(){const h={sx:this.GetScrollX(),sy:this.GetScrollY(),s:this.GetScale(),a:this.GetAngle(),w:this.GetWidth(),h:this.GetHeight(),fv:this._isFirstVisit,persist:this._persistData,fx:this._effectList.SaveToJson(),layers:{}};for(const m of this._layers)h.layers[m.GetSID().toString()]=m._SaveToJson();return h}_LoadFromJson(h){this._scrollX=h.sx;this._scrollY=
h.sy;this._scale=h.s;this._angle=h.a;this._width=h.w;this._height=h.h;this._isFirstVisit=!!h.fv;this._persistData=h.persist;this._effectList.LoadFromJson(h.fx);for(const [m,k]of Object.entries(h.layers))h=parseInt(m,10),(h=this.GetLayerBySID(h))&&h._LoadFromJson(k)}GetILayout(){return this._iLayout}UserScriptDispatcher(){return this._userScriptDispatcher}DispatchUserScriptEvent(h){h.layout=this.GetILayout();var m=this._runtime;(m=m.IsDebug()&&!m.GetEventSheetManager().IsInEventEngine())&&d.StartMeasuringScriptTime();
this._userScriptDispatcher.dispatchEvent(h);m&&d.AddScriptTime()}DispatchUserScriptEventAsyncWait(h){h.layout=this.GetILayout();return this._userScriptDispatcher.dispatchEventAndWaitAsync(h)}}}"use strict";
{const e=self.C3;e.LayoutManager=class extends e.DefendedBase{constructor(d){super();this._runtime=d;this._allLayouts=[];this._layoutsByName=new Map;this._layoutsBySid=new Map;this._mainRunningLayout=null;this._runningSubLayouts=[];this._firstLayout=null;this._isEndingLayout=0;this._pendingChangeLayout=null}Release(){this._pendingChangeLayout=this._firstLayout=this._mainRunningLayout=this._runtime=null;e.clearArray(this._allLayouts);this._layoutsByName.clear();this._layoutsBySid.clear();e.clearArray(this._runningSubLayouts)}Create(d){d=
e.New(e.Layout,this,this._allLayouts.length,d);this._allLayouts.push(d);this._layoutsByName.set(d.GetName().toLowerCase(),d);this._layoutsBySid.set(d.GetSID(),d)}GetRuntime(){return this._runtime}SetFirstLayout(d){this._firstLayout=d}GetFirstLayout(){if(this._firstLayout)return this._firstLayout;if(this._allLayouts.length)return this._allLayouts[0];throw Error("no first layout");}GetLayoutByName(d){return this._layoutsByName.get(d.toLowerCase())||null}GetLayoutBySID(d){return this._layoutsBySid.get(d)||
null}GetLayoutByIndex(d){d=e.clamp(Math.floor(d),0,this._allLayouts.length-1);return this._allLayouts[d]}GetLayout(d){return"number"===typeof d?this.GetLayoutByIndex(d):this.GetLayoutByName(d.toString())}GetAllLayouts(){return this._allLayouts}_SetMainRunningLayout(d){this._mainRunningLayout=d}GetMainRunningLayout(){return this._mainRunningLayout}_AddRunningSubLayout(d){if(this._runningSubLayouts.includes(d))throw Error("layout already running");this._runningSubLayouts.push(d)}_RemoveRunningSubLayout(d){d=
this._runningSubLayouts.indexOf(d);if(-1===d)throw Error("layout not running");this._runningSubLayouts.splice(d,1)}*runningLayouts(){this._mainRunningLayout&&(yield this._mainRunningLayout);this._runningSubLayouts.length&&(yield*this._runningSubLayouts)}IsLayoutRunning(d){return this._mainRunningLayout===d||this._runningSubLayouts.includes(d)}SetIsEndingLayout(d){if(d)this._isEndingLayout++;else{if(0>=this._isEndingLayout)throw Error("already unset");this._isEndingLayout--}}IsEndingLayout(){return 0<
this._isEndingLayout}ChangeMainLayout(d){this._pendingChangeLayout=d}ClearPendingChangeLayout(){this._pendingChangeLayout=null}IsPendingChangeMainLayout(){return!!this._pendingChangeLayout}GetPendingChangeMainLayout(){return this._pendingChangeLayout}}}"use strict";
{const e=self.C3;class d{constructor(){this.runtime=this.renderer=null;this.surfaceHeight=this.surfaceWidth=this.drawHeight=this.drawWidth=0;this.layoutRect=new e.Rect;this.rcTexBounce=new e.Rect;this.rcTexDest=new e.Rect;this.rcTexOrigin=new e.Rect;this.screenRect=new e.Rect;this.clearRect=new e.Rect;this.srcRect=new e.Rect;this.fxTex=[null,null];this.fxIndex=0;this.otherFxIndex=1;this.layerAngle=this.layerScale=this.boxExtendVertical=this.boxExtendHorizontal=0;this.renderTarget=this.wi=this.inst=
this.layer=this.layout=null;this.didChangeTransform=this.postDraw=this.preDraw=!1;this.opts=null}Clear(){this.opts=this.renderTarget=this.wi=this.inst=this.layer=this.layout=this.runtime=this.renderer=null}ShouldPreDraw(u){u=u.GetShaderProgram();if(u.MustPreDraw())return!0;if(this.inst)return u.UsesDest()&&(0!==this.wi.GetAngle()||0>this.wi.GetWidth()||0>this.wi.GetHeight())||0!==this.boxExtendHorizontal||0!==this.boxExtendVertical||!this.wi.HasDefaultColor()||this.inst.MustPreDraw();if(this.layer)return!this.layer.HasDefaultColor()}ShouldPostDraw(u){u=
u.GetShaderProgram();return u.UsesDest()||u.UsesCrossSampling()||this.layout&&"low"===this.runtime.GetCanvasManager().GetCurrentFullscreenScalingQuality()}GetEffectRenderTarget(u){if(0!==u&&1!==u)throw Error("invalid effect target");const w=this.fxTex;if(!w[u]){var x=this.runtime;const A=x.GetCanvasManager();x={sampling:x.GetSampling()};"low"===A.GetCurrentFullscreenScalingQuality()&&(x.width=A.GetDrawWidth(),x.height=A.GetDrawHeight());w[u]=A.GetAdditionalRenderTarget(x)}return w[u]}ReleaseEffectRenderTargets(){const u=
this.fxTex,w=this.runtime.GetCanvasManager();u[0]&&(w.ReleaseAdditionalRenderTarget(u[0]),u[0]=null);u[1]&&(w.ReleaseAdditionalRenderTarget(u[1]),u[1]=null)}}const c=[];let f=0;function g(){f===c.length&&c.push(new d);return c[f++]}function h(u){u.ReleaseEffectRenderTargets();u.Clear();f--}const m=new e.Quad;let k=!1;async function a(u,w,x){w=await e.Gfx.WebGLRenderTarget.DebugReadPixelsToBlob(w,x);w=URL.createObjectURL(w);console.log("[FX] "+u+" "+(x?"":" [to display]")+": ",w)}e.RenderEffectChain=
function(u,w,x,A,E,y){const B=g();B.renderer=u;B.runtime=w;if(x instanceof e.Instance)B.inst=x,B.wi=B.inst.GetWorldInfo();else if(x instanceof e.Layer)B.layer=x;else if(x instanceof e.Layout)B.layout=x;else throw Error("invalid effects object");x=w.GetCanvasManager();B.renderTarget=A;B.drawWidth=x.GetDrawWidth();B.drawHeight=x.GetDrawHeight();B.surfaceWidth=B.drawWidth;B.surfaceHeight=B.drawHeight;B.fxIndex=0;B.otherFxIndex=1;B.boxExtendHorizontal=0;B.boxExtendVertical=0;B.screenRect.set(0,0,B.drawWidth,
B.drawHeight);B.clearRect.set(0,0,B.drawWidth,B.drawHeight);B.didChangeTransform=!1;B.opts=y;B.inst?(A=B.wi,B.layerScale=A.GetLayer().GetRenderScale(),B.layerAngle=A.GetLayer().GetAngle(),B.layoutRect.copy(A.GetBoundingBox())):B.layer?(A=B.layer,B.layerScale=A.GetRenderScale(),B.layerAngle=A.GetAngle(),B.layoutRect.copy(A.GetViewport())):(A=B.layout,B.layerScale=A.GetScale(),B.layerAngle=A.GetAngle(),B.layoutRect.set(0,0,B.drawWidth,B.drawHeight));B.inst?b(B,E):(B.rcTexBounce.set(0,0,B.drawWidth/
B.surfaceWidth,B.drawHeight/B.surfaceHeight),B.rcTexDest.copy(B.rcTexBounce),B.rcTexOrigin.copy(B.rcTexBounce),B.rcTexBounce.swapTopBottom(),B.rcTexDest.swapTopBottom(),B.rcTexOrigin.swapTopBottom());u.SetAlphaBlend();u.ResetColor();u.SetBaseZ(0);u.SetCurrentZ(0);B.preDraw=B.ShouldPreDraw(E[0]);B.preDraw&&l(B);u.ResetColor();A=E.length-1;B.postDraw=B.ShouldPostDraw(E[A]);for(let H=0,P=E.length;H<P;++H)y=E[H],x=y.GetShaderProgram(),u.SetProgram(x),x.IsAnimated()&&w.UpdateRender(),0!==H||B.preDraw?
(u.SetCopyBlend(),r(B,y,H===A&&!B.postDraw,H)):p(B,y),0===B.fxIndex?(B.fxIndex=1,B.otherFxIndex=0):(B.fxIndex=0,B.otherFxIndex=1);B.postDraw&&t(B,E);u=B.didChangeTransform;h(B);k=!1;return u};function b(u,w){for(let I=0,N=w.length;I<N;++I){var x=w[I].GetShaderProgram();u.boxExtendHorizontal+=x.GetBoxExtendHorizontal();u.boxExtendVertical+=x.GetBoxExtendVertical()}var A=u.wi;w=A.GetLayer();x=w.GetAngle();var E=A.GetBoundingBox();A=A.GetTotalZElevation();let [y,B]=w.LayerToDrawSurface(E.getLeft(),E.getTop(),
A),[H,P]=w.LayerToDrawSurface(E.getRight(),E.getBottom(),A);if(0!==x){const [I,N]=w.LayerToDrawSurface(E.getRight(),E.getTop(),A),[R,S]=w.LayerToDrawSurface(E.getLeft(),E.getBottom(),A);w=Math.min(y,H,I,R);H=Math.max(y,H,I,R);y=w;w=Math.min(B,P,N,S);P=Math.max(B,P,N,S);B=w}w=u.screenRect;x=u.rcTexOrigin;E=u.rcTexDest;A=u.clearRect;const F=u.rcTexBounce;w.set(y,B,H,P);w.shuntY(u.drawHeight);x.copy(w);x.divide(u.surfaceWidth,u.surfaceHeight);x.swapTopBottom();w.inflate(u.boxExtendHorizontal,u.boxExtendVertical);
E.copy(w);E.divide(u.surfaceWidth,u.surfaceHeight);E.swapTopBottom();A.copy(w);A.roundOuter();A.inflate(u.boxExtendHorizontal+1,u.boxExtendVertical+1);w.clamp(0,0,u.drawWidth,u.drawHeight);A.clamp(0,0,u.drawWidth,u.drawHeight);F.copy(w);F.divide(u.surfaceWidth,u.surfaceHeight);F.swapTopBottom()}function l(u){const w=u.renderer;w.SetTextureFillMode();const x=u.GetEffectRenderTarget(u.fxIndex);w.SetRenderTarget(x);var A=u.opts;A&&A.preTransform&&A.preTransform();w.ClearRect2(u.clearRect);u.inst?(w.SetColor(u.wi.GetPremultipliedColor()),
w.SetCurrentZ(u.wi.GetTotalZElevation()),u.inst.Draw(w),w.SetCurrentZ(0)):(A=(u.layer||u.layout).GetRenderTarget(),u.layer?w.SetColor(u.layer.GetPremultipliedColor()):w.ResetColor(),w.DrawRenderTarget(A),w.InvalidateRenderTarget(A),u.runtime.GetCanvasManager().ReleaseAdditionalRenderTarget(A));u.rcTexDest.clampFlipped(0,1,1,0);u.fxIndex=1;u.otherFxIndex=0;k&&a("Pre-draw",w,x)}function p(u,w){const x=u.renderer,A=u.runtime,E=u.GetEffectRenderTarget(u.fxIndex);x.SetRenderTarget(E);var y=u.opts;y&&y.preTransform&&
y.preTransform();x.ClearRect2(u.clearRect);if(u.inst){const [B,H]=u.inst.GetCurrentSurfaceSize();(y=u.inst.GetCurrentTexRect())?u.srcRect.copy(y):u.srcRect.set(0,0,0,0);w=u.wi.GetInstanceEffectList().GetEffectParametersForIndex(w.GetIndex());x.SetProgramParameters(u.renderTarget,u.rcTexDest,u.srcRect,u.srcRect,u.layoutRect,1/B,1/H,u.layerScale,u.layerAngle,A.GetGameTime(),w);x.SetCurrentZ(u.wi.GetTotalZElevation());u.inst.Draw(x);x.SetCurrentZ(0);u.rcTexDest.clampFlipped(0,1,1,0);u.screenRect.shuntY(u.drawHeight)}else w=
(u.layer||u.layout).GetEffectList().GetEffectParametersForIndex(w.GetIndex()),x.SetProgramParameters(u.renderTarget,u.rcTexDest,u.rcTexBounce,u.rcTexOrigin,u.layoutRect,1/u.drawWidth,1/u.drawHeight,u.layerScale,u.layerAngle,A.GetGameTime(),w),u=(u.layer||u.layout).GetRenderTarget(),k&&a("Layer target",x,u),x.DrawRenderTarget(u),x.InvalidateRenderTarget(u),A.GetCanvasManager().ReleaseAdditionalRenderTarget(u);k&&a("First bounce",x,E)}function r(u,w,x,A){const E=u.renderer,y=u.runtime;0===A&&u.preDraw&&
u.inst&&u.screenRect.shuntY(u.drawHeight);x?(u.inst?E.SetBlendMode(u.wi.GetBlendMode()):u.layer&&E.SetBlendMode(u.layer.GetBlendMode()),x=u.renderTarget,E.SetRenderTarget(x)):(x=u.GetEffectRenderTarget(u.fxIndex),E.SetRenderTarget(x),E.ClearRect2(u.clearRect));w=u.inst?u.wi.GetInstanceEffectList().GetEffectParametersForIndex(w.GetIndex()):(u.layer||u.layout).GetEffectList().GetEffectParametersForIndex(w.GetIndex());E.SetProgramParameters(u.renderTarget,u.rcTexDest,u.rcTexBounce,u.rcTexOrigin,u.layoutRect,
1/u.surfaceWidth,1/u.surfaceHeight,u.layerScale,u.layerAngle,y.GetGameTime(),w);w=u.GetEffectRenderTarget(u.otherFxIndex);E.SetTexture(w.GetTexture());y.GetCanvasManager().SetDeviceTransform(E);u.didChangeTransform=!0;m.setFromRect(u.screenRect);E.Quad3(m,u.rcTexBounce);u.inst||E.InvalidateRenderTarget(w);k&&a("Bounce "+A,E,x)}function t(u,w){w=u.renderer;if(u.layout)w.SetTextureFillMode(),w.SetRenderTarget(u.renderTarget),u=u.GetEffectRenderTarget(u.otherFxIndex),w.CopyRenderTarget(u),w.InvalidateRenderTarget(u);
else{var x=u.runtime.GetCanvasManager();"low"===x.GetCurrentFullscreenScalingQuality()?(w.SetTextureFillMode(),x.SetDeviceTransform(w,x.GetDrawWidth(),x.GetDrawHeight()),u.didChangeTransform=!0):w.SetDeviceTransformTextureFillMode();u.inst?w.SetBlendMode(u.wi.GetBlendMode()):u.layer&&w.SetBlendMode(u.layer.GetBlendMode());w.SetRenderTarget(u.renderTarget);x=u.GetEffectRenderTarget(u.otherFxIndex);w.SetTexture(x.GetTexture());m.setFromRect(u.screenRect);w.Quad3(m,u.rcTexBounce);u.inst||w.InvalidateRenderTarget(x);
k&&a("Post-draw",w,u.renderTarget)}}}"use strict";
{const e=self.C3,d=/<(.+?)>/g;e.TimelineManager=class extends e.DefendedBase{constructor(c){super();this._runtime=c;this._timelineDataManager=e.New(e.TimelineDataManager);this._pluginInstance=null;this._timelines=[];this._timelinesByName=new Map;this._objectClassToTimelineMap=new Map;this._timelinesCreatedByTemplate=new Map;this._scheduledTimelines=[];this._playingTimelines=[];this._isTickingTimelines=this._changingLayout=this._hasRuntimeListeners=!1;this._tickFunc=()=>this._OnTick();this._tick2Func=
()=>this._OnTick2();this._beforeLayoutChange=()=>this._OnBeforeChangeLayout();this._layoutChange=()=>this._OnAfterChangeLayout();this._instanceDestroy=f=>this._OnInstanceDestroy(f.instance);this._afterLoad=f=>this._OnAfterLoad();this._destroyedWhileLoadingState=[]}Release(){this.RemoveRuntimeListeners();this._afterLoad=this._instanceDestroy=this._layoutChange=this._beforeLayoutChange=this._tick2Func=this._tickFunc=null;for(const c of this._timelines)c.Stop(),c.Release();e.clearArray(this._timelines);
this._timelines=null;this._timelineDataManager.Release();this._timelineDataManager=null;e.clearArray(this._scheduledTimelines);this._scheduledTimelines=null;e.clearArray(this._playingTimelines);this._playingTimelines=null;this._timelinesByName.clear();this._timelinesByName=null;this._objectClassToTimelineMap.clear();this._objectClassToTimelineMap=null;this._timelinesCreatedByTemplate.clear();this._timelinesCreatedByTemplate=null;e.clearArray(this._destroyedWhileLoadingState);this._runtime=this._destroyedWhileLoadingState=
null}AddRuntimeListeners(){const c=this._runtime.Dispatcher();c.addEventListener("pretick",this._tickFunc);c.addEventListener("tick2",this._tick2Func);c.addEventListener("beforelayoutchange",this._beforeLayoutChange);c.addEventListener("layoutchange",this._layoutChange);c.addEventListener("instancedestroy",this._instanceDestroy);c.addEventListener("afterload",this._afterLoad)}RemoveRuntimeListeners(){const c=this._runtime.Dispatcher();c.removeEventListener("pretick",this._tickFunc);c.removeEventListener("tick2",
this._tick2Func);c.removeEventListener("beforelayoutchange",this._beforeLayoutChange);c.removeEventListener("layoutchange",this._layoutChange);c.removeEventListener("instancedestroy",this._instanceDestroy);c.removeEventListener("afterload",this._afterLoad)}Create(c){this._timelineDataManager.Add(c);c=e.TimelineState.CreateInitial(c,this);this.Add(c);this.SetTimelineObjectClassesToMap(c);this._timelinesCreatedByTemplate.set(c.GetName(),0)}CreateFromTemplate(c){var f=this.GetTimelineDataManager();c=
c.GetTemplateName();f=f.Get(c);f=e.TimelineState.CreateFromTemplate(`${c}:${this._timelinesCreatedByTemplate.get(c)}`,f,this);this._IncreaseTemplateTimelinesCount(c);this.Add(f);return f}_IncreaseTemplateTimelinesCount(c){this._timelinesCreatedByTemplate.set(c,this._timelinesCreatedByTemplate.get(c)+1)}_SetCreatedTemplateTimelinesCount(){for(const c of this._timelines){if(c.IsTemplate())continue;const f=c.GetTemplateName();this._IncreaseTemplateTimelinesCount(f)}}_ClearCreatedTemplateTimelinesCount(){for(const c of this._timelinesCreatedByTemplate.keys())this._timelinesCreatedByTemplate.set(c,
0)}Add(c){this._timelines.push(c);this._timelinesByName.set(c.GetName().toLowerCase(),c)}Remove(c){c.IsTemplate()||(e.arrayFindRemove(this._timelines,c),e.arrayFindRemove(this._scheduledTimelines,c),e.arrayFindRemove(this._playingTimelines,c),this._timelinesByName.delete(c.GetName().toLowerCase()),this.RemoveTimelineFromObjectClassMap(c),c.IsReleased()||c.Release())}Trigger(c){this._runtime.Trigger(c,this._pluginInstance,null)}GetRuntime(){return this._runtime}GetTimelineDataManager(){return this._timelineDataManager}SetPluginInstance(c){this._pluginInstance=
c}GetPluginInstance(){return this._pluginInstance}*GetTimelines(){for(const c of this._timelines)yield c}SetTimelineObjectClassToMap(c,f){this._objectClassToTimelineMap.has(c)||this._objectClassToTimelineMap.set(c,new Set);this._objectClassToTimelineMap.get(c).add(f)}SetTimelineObjectClassesToMap(c){for(const f of c.GetObjectClasses())this.SetTimelineObjectClassToMap(f,c)}RemoveTimelineFromObjectClassMap(c){for(const [f,g]of this._objectClassToTimelineMap.entries())g.has(c)&&(g.delete(c),0===g.size&&
this._objectClassToTimelineMap.delete(f))}GetTimelinesForObjectClass(c){if(this._objectClassToTimelineMap.has(c))return this._objectClassToTimelineMap.get(c)}GetTimelineOfTemplateForInstances(c,f){if(f)for(const g of this._timelines)if(f.every(h=>g.HasTrackInstance(h.instance,h.trackId))&&g.GetName().includes(c.GetName()))return g}GetTimelineByName(c){return this._timelinesByName.get(c.toLowerCase())||null}GetScheduledOrPlayingTimelineByName(c){for(const f of this._scheduledTimelines)if(f.GetName()===
c)return f;for(const f of this._playingTimelines)if(f.GetName()===c)return f;return null}*GetTimelinesByName(c){if(d.test(c)){d.lastIndex=0;let g;var f=new Set;do if(g=d.exec(c)){const h=g[1].split(",");for(const m of h)f.add(m)}while(g);for(const h of f.values())(c=this.GetTimelineByName(h))&&(yield c);f.clear()}else(f=this.GetTimelineByName(c))&&(yield f)}*GetTimelinesByTags(c){for(const f of this._timelines)f.HasTags(c)&&(yield f)}AddScheduledTimeline(c){this._scheduledTimelines.includes(c)||this._scheduledTimelines.push(c);
this._MaybeEnableRuntimeListeners()}RemovePlayingTimeline(c){e.arrayFindRemove(this._playingTimelines,c);this._MaybeDisableRuntimeListeners()}ScheduleTimeline(c){this._playingTimelines.includes(c)?(c.SetPlaying(!0),c.SetScheduled(!1),c.SetMarkedForRemoval(!1)):(c.SetPlaying(!1),c.SetScheduled(!0),c.SetMarkedForRemoval(!1),this._scheduledTimelines.includes(c)||this._scheduledTimelines.push(c));this._MaybeEnableRuntimeListeners()}DeScheduleTimeline(c){c.SetPlaying(!1);c.SetScheduled(!1);c.ResolvePlayPromise();
e.arrayFindRemove(this._scheduledTimelines,c);this._MaybeDisableRuntimeListeners()}CompleteTimeline(c){c.SetPlaying(!1);c.SetScheduled(!1);c.SetMarkedForRemoval(!0)}CompleteTimelineAndResolve(c){this.CompleteTimeline(c);c.ResolvePlayPromise()}_OnTick(){if(!this.GetRuntime().IsLoadingState()&&this._hasRuntimeListeners&&!this._changingLayout){var c=!1;for(this._isTickingTimelines=!0;this._scheduledTimelines.length;){var f=this._scheduledTimelines.pop();f.SetInitialState();this._playingTimelines.push(f)}f=
this._runtime.GetDt();var g=this._runtime.GetTimeScale();for(const h of this._playingTimelines){if(h.IsMarkedForRemoval())continue;const m=h.Tick(f,g);!c&&m&&(c=!0)}this._isTickingTimelines=!1;c&&this.GetRuntime().UpdateRender()}}_OnTick2(){if(!this.GetRuntime().IsLoadingState()&&this._hasRuntimeListeners&&!this._changingLayout){var c;for(const f of this._playingTimelines)f.IsMarkedForRemoval()&&(c||(c=new Set),this._MaybeExecuteTimelineFinishTriggers(f),c.add(f));c&&e.arrayRemoveAllInSet(this._playingTimelines,
c);this._MaybeDisableRuntimeListeners()}}_MaybeExecuteTimelineFinishTriggers(c){c.IsReleased()||c.HasValidTracks()&&c.IsComplete()&&c.InitialStateSet()&&c.FinishTriggers()}_MaybeEnableRuntimeListeners(){this._hasRuntimeListeners||(this._hasRuntimeListeners=!0)}_MaybeDisableRuntimeListeners(){this._playingTimelines.length||this._scheduledTimelines.length||this._isTickingTimelines||(this._hasRuntimeListeners=!1)}_OnBeforeChangeLayout(){for(this._changingLayout=!0;this._scheduledTimelines.length;)this.DeScheduleTimeline(this._scheduledTimelines.pop());
const c=new Set;for(const f of this._playingTimelines)f._OnBeforeChangeLayout()&&c.add(f);e.arrayRemoveAllInSet(this._playingTimelines,c);this._MaybeDisableRuntimeListeners();for(const f of this._timelines)f.CleanCaches()}_OnAfterChangeLayout(){this._changingLayout=!1}_OnInstanceDestroy(c){var f=c.GetObjectClass();if(f=this.GetTimelinesForObjectClass(f))if(this._runtime.IsLoadingState())this._destroyedWhileLoadingState.push(c);else for(const g of f)g.IsTemplate()||(g.IsReleased()?this.Remove(g):g.HasValidTracks()||
(this._MaybeExecuteTimelineFinishTriggers(g),this.Remove(g)))}_OnAfterLoad(){for(const c of this._destroyedWhileLoadingState)this._OnInstanceDestroy(c);e.clearArray(this._destroyedWhileLoadingState)}_SaveToJson(){return{timelinesJson:this._SaveTimelinesToJson(),scheduledTimelinesJson:this._SaveScheduledTimelinesToJson(),playingTimelinesJson:this._SavePlayingTimelinesToJson(),hasRuntimeListeners:this._hasRuntimeListeners,changingLayout:this._changingLayout,isTickingTimelines:this._isTickingTimelines}}_LoadFromJson(c){c&&
(this._ClearCreatedTemplateTimelinesCount(),this._LoadTimelinesFromJson(c.timelinesJson),this._LoadScheduledTimelinesFromJson(c.scheduledTimelinesJson),this._LoadPlayingTimelinesFromJson(c.playingTimelinesJson),this._hasRuntimeListeners=!c.hasRuntimeListeners,this._changingLayout=!!c.changingLayout,this._isTickingTimelines=!!c.isTickingTimelines,this._SetCreatedTemplateTimelinesCount(),this._MaybeEnableRuntimeListeners(),this._MaybeDisableRuntimeListeners())}_SaveTimelinesToJson(){return this._timelines.map(c=>
c._SaveToJson())}_LoadTimelinesFromJson(c){for(const f of c){c=this.GetTimelineByName(f.name);if(!c){c=this._GetTemplateNameFromJson(f);if(!c)continue;c=this.GetTimelineByName(c);c=this.CreateFromTemplate(c)}c._LoadFromJson(f);c.HasTracks()||this.Remove(c)}}_GetTemplateNameFromJson(c){return(c=c.name.split(":"))&&2===c.length?c[0]:null}_SaveScheduledTimelinesToJson(){return this._SaveTimelines(this._scheduledTimelines)}_LoadScheduledTimelinesFromJson(c){this._LoadTimelines(c,this._scheduledTimelines)}_SavePlayingTimelinesToJson(){return this._SaveTimelines(this._playingTimelines)}_LoadPlayingTimelinesFromJson(c){this._LoadTimelines(c,
this._playingTimelines)}_IsTimelineInJson(c,f){for(const g of f)if(g===c.GetName())return!0;return!1}_SaveTimelines(c){return c.map(f=>f.GetName())}_LoadTimelines(c,f){var g=new Set;for(const h of f)this._IsTimelineInJson(h,c)||g.add(h);e.arrayRemoveAllInSet(f,g);g=h=>m=>m.GetName()===h;for(const h of c)(c=this.GetTimelineByName(h))&&(f.find(g(h))||f.push(c))}}}"use strict";
{const e=self.C3;e.TimelineState=class extends e.DefendedBase{constructor(d,c,f){super();this._runtime=f.GetRuntime();this._timelineManager=f;this._timelineDataItem=c;this._name=d;this._tracks=[];for(const g of this._timelineDataItem.GetTrackData().trackDataItems())this._tracks.push(e.TrackState.Create(this,g));this._playResolve=this._playPromise=null;this._playheadTime=e.New(e.KahanSum);this._playheadTime.Set(0);this._playbackRate=1;this._pingPongState=0;this._currentRepeatCount=1;this._initialStateSet=
this._isScheduled=this._isPlaying=!1;this._complete=!0;this._markedForRemoval=this._released=!1;this._completedTick=-1;this._firstTick=this._finishedTriggers=this._isTemplate=this._implicitPause=!1;this._lastDelta=NaN;this._tags=[""];this._stringTags="";this._tagsChanged=!1}static CreateInitial(d,c){var f=c.GetTimelineDataManager();const g=f.GetNameId();f=f.Get(d[g]);d=e.New(e.TimelineState,d[g],f,c);d.SetIsTemplate(!0);return d}static CreateFromTemplate(d,c,f){return e.New(e.TimelineState,d,c,f)}static get WORLD_INSTANCE_BOX_CHANGE(){return 1}static get LAYOUT_RENDER_CHANGE(){return e.nextHighestPowerOfTwo(1)}Release(){if(!this.IsReleased()){this._timelineManager.DeScheduleTimeline(this);
this._timelineManager.CompleteTimelineAndResolve(this);for(const d of this._tracks)d.Release();e.clearArray(this._tracks);this._tracks=null;this._playheadTime.Release();this._timelineDataItem=this._timelineManager=this._runtime=this._playheadTime=null;this._released=!0;this._playResolve=this._playPromise=null}}GetTimelineManager(){return this._timelineManager}GetRuntime(){return this._runtime}GetTracks(){return this._tracks}GetSimilarPropertyTracks(d,c,f){const g=[];for(const h of this._tracks){if(d!==
h.GetInstance())continue;const m=h.GetPropertyTrack(f);m&&c.constructor===m.GetSourceAdapter().constructor&&g.push(m)}return g}HasTracks(){return!!this._tracks.length}GetTrackById(d){for(const c of this._tracks)if(e.equalsNoCase(c.GetId(),d))return c;return null}SetName(d){this._name=d}GetName(){return this._name}GetTimelineDataItem(){return this._timelineDataItem}GetTemplateName(){return this._timelineDataItem.GetName()}GetTotalTime(){return this._timelineDataItem.GetTotalTime()}SetTotalTime(d){this._timelineDataItem.SetTotalTime(d)}GetStep(){return this._timelineDataItem.GetStep()}SetStep(d){this._timelineDataItem.SetStep(d)}GetInterpolationMode(){return this._timelineDataItem.GetInterpolationMode()}SetInterpolationMode(d){this._timelineDataItem.SetInterpolationMode(d)}GetResultMode(){return this._timelineDataItem.GetResultMode()}SetResultMode(d){this._timelineDataItem.GetResultMode(d)}SetEase(d){for(const c of this.GetTracks())c.SetEase(d)}GetLoop(){return this._timelineDataItem.GetLoop()}SetLoop(d){return this._timelineDataItem.SetLoop(d)}GetPingPong(){return this._timelineDataItem.GetPingPong()}SetPingPong(d){return this._timelineDataItem.SetPingPong(d)}GetRepeatCount(){return this._timelineDataItem.GetRepeatCount()}SetPlaybackRate(d){return this._playbackRate=
d}GetPlaybackRate(){return this._playbackRate}IsForwardPlayBack(){return this.IsPlaying()?0<this._playbackRate:!0}GetPlayPromise(){return this._playPromise?this._playPromise:this._playPromise=new Promise(d=>{this._playResolve=d})}ResolvePlayPromise(){this._playPromise&&(this._playResolve(),this._playResolve=this._playPromise=null)}SetTags(d){this._tags=e.TimelineState._GetTagArray(d);this._tagsChanged=!0}GetTags(){return this._tags}GetStringTags(){this._tagsChanged&&(this._stringTags=this._tags.join(" "));
this._tagsChanged=!1;return this._stringTags}HasTags(d){return this._tags&&this._tags.length?(d=e.TimelineState._GetTagArray(d))&&d.length?d.every(e.TimelineState._HasTag,this):!1:!1}OnStarted(){e.Plugins.Timeline.Cnds.SetTriggerTimeline(this);this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimelineStarted);this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimelineStartedByName);this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimelineStartedByTags);this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnAnyTimelineStarted);
e.Plugins.Timeline.Cnds.SetTriggerTimeline(null)}OnCompleted(){this._completedTick=this._runtime.GetTickCount()}FinishTriggers(){this._finishedTriggers||(this._finishedTriggers=!0,e.Plugins.Timeline.Cnds.SetTriggerTimeline(this),this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimelineFinished),this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimelineFinishedByName),this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimelineFinishedByTags),this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnAnyTimelineFinished),
e.Plugins.Timeline.Cnds.SetTriggerTimeline(null))}SetPlaying(d){this._isPlaying=d}IsCompletedTick(){return this._completedTick===this._runtime.GetTickCount()}IsPlaying(d=!1){return this.IsCompletedTick()||this.IsScheduled()&&!d?!0:this._isPlaying}_IsPlaying(){return this.IsPlaying(!0)}IsPaused(){return this._IsPaused()}_IsPaused(){return this.IsReleased()||this.IsScheduled()||this._IsPlaying()||this.IsComplete()?!1:!0}SetScheduled(d){this._isScheduled=d}IsScheduled(){return this._isScheduled}SetComplete(d){this._complete=
d;d=this.GetTime();if(0>=d||d>=this.GetTotalTime())this._complete=!0}IsComplete(){return this._complete}IsReleased(){return this._released}SetMarkedForRemoval(d){this._markedForRemoval=d}IsMarkedForRemoval(){return this._markedForRemoval}SetImplicitPause(d){this._implicitPause=d}IsImplicitPause(){return this._implicitPause}SetIsTemplate(d){this._isTemplate=!!d}IsTemplate(){return this._isTemplate}InitialStateSet(){return this._initialStateSet}GetTime(){return this._playheadTime.Get()}SetTime(d){const c=
this.GetTime();this._SetTime(d);this.SetComplete(!1);this.IsComplete()||this.SetImplicitPause(!0);if(this._IsPlaying()||this.IsScheduled()||!this._initialStateSet)this._IsPlaying()||this.IsScheduled()||this._initialStateSet?this._IsPlaying()?this.Stop():this.IsScheduled()&&(this._timelineManager.DeScheduleTimeline(this),this.SetInitialStateFromSetTime()):this.SetInitialStateFromSetTime();this._Interpolate(d,!1,!0,!0,c)&&this.GetRuntime().UpdateRender();this._OnSetTime()}_SetTime(d){0>d?this._playheadTime.Set(0):
d>=this.GetTotalTime()?this._playheadTime.Set(this.GetTotalTime()):this._playheadTime.Set(d)}_OnSetTime(){e.Plugins.Timeline&&this.constructor===e.TimelineState&&(e.Plugins.Timeline.Cnds.SetTriggerTimeline(this),this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimeSet),this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimeSetByName),this._timelineManager.Trigger(e.Plugins.Timeline.Cnds.OnTimeSetByTags),e.Plugins.Timeline.Cnds.SetTriggerTimeline(null))}_CanResume(){if(!this.GetLoop())if(this.GetPingPong()&&
1===this._pingPongState)if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())return!1}else{if(0>=this.GetTime())return!1}else if(!this.GetLoop()&&!this.GetPingPong())if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())return!1}else if(0>=this.GetTime())return!1;return!0}Resume(){this.IsReleased()||this._CanResume()&&this.Play(!0)}Play(d=!1){return this.IsReleased()||this.IsScheduled()?!1:this._IsPlaying()&&this.IsCompletedTick()?this._SchedulePlayingTimeline():this._IsPlaying()||
!this.IsComplete()&&!d&&!this.IsImplicitPause()?!1:this._ScheduleStoppedTimeline()}_SchedulePlayingTimeline(){this.SetImplicitPause(!1);this._timelineManager.RemovePlayingTimeline(this);this._timelineManager.ScheduleTimeline(this);this.GetPlayPromise();return!0}_ScheduleStoppedTimeline(){this.SetImplicitPause(!1);this._timelineManager.ScheduleTimeline(this);this.GetPlayPromise();return!0}Stop(d=!1){this.IsReleased()||(this.SetComplete(d),this._timelineManager.CompleteTimeline(this),this.IsComplete()&&
this.ResolvePlayPromise())}Reset(d=!0,c=!1){if(!this.IsReleased()){if(!this._IsPlaying()&&this.IsScheduled())return this._timelineManager.DeScheduleTimeline(this);if(!this.IsComplete()){this.Stop(!0);this.IsForwardPlayBack()?this._SetTime(0):this._SetTime(this.GetTotalTime());var f=this.GetTime();c=c?this._InterpolateBeforeChangeLayout(f):this._Interpolate(f,!1,!1,!0);d&&this._OnSetTime();c&&d&&this.GetRuntime().UpdateRender()}}}ResetBeforeChangeLayout(){this.Reset(!1,!0)}_InterpolateBeforeChangeLayout(d){this._Interpolate(d,
!1,!1,!0,NaN,!1,!0)}_OnBeforeChangeLayout(){if(this.IsReleased())return!0;if(this.HasValidGlobalTracks())return!1;this._timelineManager.CompleteTimeline(this);this.ResetBeforeChangeLayout();return!0}SetInitialStateFromSetTime(){this.SetInitialState(!0)}SetInitialState(d){if(!this.IsMarkedForRemoval())if(d){this._firstTick=this._initialStateSet=!0;for(const c of this._tracks)c.SetInitialState()}else if(this.SetPlaying(!0),this.SetScheduled(!1),this.OnStarted(),this.IsComplete()){this._completedTick=
-1;this._pingPongState=0;this._currentRepeatCount=1;this._finishedTriggers=this._complete=!1;this._firstTick=this._initialStateSet=!0;this.IsForwardPlayBack()?this._SetTime(0):this._SetTime(this.GetTotalTime());for(const c of this._tracks)c.SetInitialState()}else{this._firstTick=!0;for(const c of this._tracks)c.SetResumeState()}}Tick(d,c){if(0!==d||0!==this._lastDelta){this._lastDelta=d;var f=this.GetTime();this._SetTime(f+d*c*this._playbackRate);var g;this.GetLoop()||this.GetPingPong()?this.GetLoop()&&
!this.GetPingPong()?g=this._LoopCompleteCheck():!this.GetLoop()&&this.GetPingPong()?g=this._PingPongCompleteCheck():this.GetLoop()&&this.GetPingPong()&&(g=this._LoopPingPongCompleteCheck()):g=this._SimpleCompleteCheck();if(g){for(const h of this._tracks)h.SetEndState();this.Stop(!0);this.OnCompleted();return!0}return this._Interpolate(this.GetTime(),!0,!1,!1,f,!0)}}_Interpolate(d,c=!1,f=!1,g=!1,h=NaN,m=!1,k=!1){let a=!1;for(var b of this._tracks)b.BeforeInterpolate();for(const l of this._tracks){b=
d;if("number"===typeof h){const p=this.GetTime()-l.GetStartOffset(),r=h-l.GetStartOffset();0>p&&0<r&&(b=l.GetStartOffset(),this._SetTime(b))}b=l.Interpolate(b,c,f,g,this._firstTick,k);!a&&b&&(a=!0)}for(const l of this._tracks)l.AfterInterpolate();this._firstTick&&m&&(this._firstTick=!1);return a}_SimpleCompleteCheck(){if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())if(this._currentRepeatCount<this.GetRepeatCount())this._currentRepeatCount++,this._SetTime(0);else return this._SetTime(this.GetTotalTime()),
!0}else if(0>=this.GetTime())if(this._currentRepeatCount<this.GetRepeatCount())this._currentRepeatCount++,this._SetTime(this.GetTotalTime());else return this._SetTime(0),!0;return!1}_LoopCompleteCheck(){this.IsForwardPlayBack()?this.GetTime()>=this.GetTotalTime()&&this._SetTime(0):0>=this.GetTime()&&this._SetTime(this.GetTotalTime());return!1}_PingPongCompleteCheck(){if(this.IsForwardPlayBack()){if(this.GetTime()>=this.GetTotalTime())if(this._SetTime(this.GetTotalTime()),this.SetPlaybackRate(-1*this.GetPlaybackRate()),
1===this._pingPongState)if(this._currentRepeatCount<this.GetRepeatCount())this._currentRepeatCount++,this._pingPongState=0;else return!0;else 0===this._pingPongState&&(this._pingPongState=1)}else if(0>=this.GetTime())if(this._SetTime(0),this.SetPlaybackRate(-1*this.GetPlaybackRate()),1===this._pingPongState)if(this._currentRepeatCount<this.GetRepeatCount())this._currentRepeatCount++,this._pingPongState=0;else return!0;else 0===this._pingPongState&&(this._pingPongState=1);return!1}_LoopPingPongCompleteCheck(){this.IsForwardPlayBack()?
this.GetTime()>=this.GetTotalTime()&&(this._SetTime(this.GetTotalTime()),this.SetPlaybackRate(-1*this.GetPlaybackRate())):0>=this.GetTime()&&(this._SetTime(0),this.SetPlaybackRate(-1*this.GetPlaybackRate()));return!1}AddTrack(){var d=this._timelineDataItem.GetTrackData().AddEmptyTrackDataItem();d=e.TrackState.Create(this,d);this._tracks.push(d);return d}CleanCaches(){for(const d of this._tracks)d.CleanCaches()}ClearTrackInstances(){for(const d of this._tracks)d.ClearInstance()}SetTrackInstance(d,
c){if(c)for(const f of this._tracks){if(d){if(f.GetId()!==d)continue}else if(f.HasInstance())continue;f.SetInstance(c);this._timelineManager.SetTimelineObjectClassToMap(c.GetObjectClass(),this);break}}HasTrackInstance(d,c){for(const f of this._tracks)if(c){if(c===f.GetId()&&d===f.GetInstance())return!0}else if(d===f.GetInstance())return!0;return!1}HasValidTracks(){return this._tracks.some(d=>d.CanInstanceBeValid())}HasValidGlobalTracks(){return this._tracks.some(d=>d.CanInstanceBeValid()?(d=d.GetObjectClass())?
d.IsGlobal():!1:!1)}GetPropertyTrack(d){for(const c of this.GetTracks())for(const f of c.GetPropertyTracks())if(f.GetPropertyName()===d)return f}GetKeyframeWithTags(d){d=d?d.split(" "):[];d=[...(new Set(d.map(c=>c.toLowerCase().trim()))).values()];for(const c of this.GetTracks())for(const f of c.GetKeyframeDataItems())if(d.every(g=>f.HasTag(g)))return f}GetObjectClasses(){const d=[];for(const c of this.GetTracks())d.push(c.GetObjectClass());return d.filter(c=>c)}_SaveToJson(){return{tracksJson:this._SaveTracksToJson(),
name:this._name,playheadTime:this.GetTime(),playbackRate:this._playbackRate,pingPongState:this._pingPongState,currentRepeatCount:this._currentRepeatCount,isPlaying:this._isPlaying,isScheduled:this._isScheduled,initialStateSet:this._initialStateSet,finishedTriggers:this._finishedTriggers,complete:this._complete,released:this._released,markedForRemoval:this._markedForRemoval,completedTick:this._completedTick,implicitPause:this._implicitPause,isTemplate:this._isTemplate,tags:this._tags.join(" "),stringTags:this._stringTags,
tagsChanged:this._tagsChanged,firstTick:this._firstTick}}_LoadFromJson(d){d&&(this._LoadTracksFromJson(d.tracksJson),this._name=d.name,this._playheadTime.Set(d.playheadTime),this._playbackRate=d.playbackRate,this._pingPongState=d.pingPongState,this._currentRepeatCount=d.currentRepeatCount,this._isPlaying=!!d.isPlaying,this._isScheduled=!!d.isScheduled,this._initialStateSet=!!d.initialStateSet,this._finishedTriggers=d.hasOwnProperty("finishedTriggers")?!!d.finishedTriggers:!1,this._complete=!!d.complete,
this._released=!!d.released,this._markedForRemoval=!!d.markedForRemoval,this._completedTick=d.completedTick,this._implicitPause=!!d.implicitPause,this._isTemplate=!!d.isTemplate,this._tags=d.tags.split(" "),this._stringTags=d.stringTags,this._tagsChanged=!!d.tagsChanged,this._firstTick=!!d.firstTick)}_SaveTracksToJson(){return this._tracks.map(d=>d._SaveToJson())}_LoadTracksFromJson(d){d.forEach((c,f)=>{this._tracks[f]._LoadFromJson(c)});this._tracks.filter(c=>c.CanInstanceBeValid())}static _HasTag(d){const c=
this.GetTags();return""===d?1===c.length&&""===c[0]:c.includes(d)}static _GetTagArray(d){if(e.IsArray(d))return d.slice(0);if(e.IsString(d))return d.split(" ")}}}"use strict";
{const e=self.C3;e.TrackState=class extends e.DefendedBase{constructor(d,c){super();this._timeline=d;this._trackDataItem=c;this._trackData=c.GetTrackData();this._objectClassIndex=this._instanceUid=NaN;this._worldInfo=this._instance=null;this._isNested=0<c.GetStartOffset();this._endStateOfNestedSet=this._initialStateOfNestedSet=!1;this._lastKeyframeDataItem=null;this._keyframeDataItems=this._trackDataItem.GetKeyframeData().GetKeyframeDataItemArray();this._propertyTracks=[];for(const f of this._trackDataItem.GetPropertyTrackData().propertyTrackDataItems())this._propertyTracks.push(e.PropertyTrackState.Create(this,
f))}static Create(d,c){return e.New(e.TrackState,d,c)}Release(){this._keyframeDataItems=null;for(const d of this._propertyTracks)d.Release();e.clearArray(this._propertyTracks);this._lastKeyframeDataItem=this._trackDataItem=this._worldInfo=this._instance=this._timeline=this._propertyTracks=null}CleanCaches(){for(const d of this._propertyTracks)d.CleanCaches();this._worldInfo=this._instance=null}GetTimeline(){return this._timeline}GetRuntime(){return this._timeline.GetRuntime()}GetKeyframeDataItems(){return this._keyframeDataItems?
this._keyframeDataItems:this._keyframeDataItems=this._trackDataItem.GetKeyframeData().GetKeyframeDataItemArray()}GetPropertyTracks(){return this._propertyTracks}GetPropertyTrack(d){for(const c of this._propertyTracks)if(c.GetPropertyName()===d)return c}MaybeGetInstance(){this._instance||this.GetInstance()}IsInstanceValid(){return this._instance?!this._instance.IsDestroyed():!1}CanInstanceBeValid(){var d=this.GetInstanceUID();return(d=this.GetRuntime().GetInstanceByUID(d))?!d.IsDestroyed():!1}GetObjectClass(){const d=
this.GetObjectClassIndex();if(-1!==d)return this.GetRuntime().GetObjectClassByIndex(d)}ClearInstance(){this._instance=null;this._instanceUid=-1;this._worldInfo=null;this._objectClassIndex=-1}HasInstance(){return!!this._instance}GetInstance(){if(this._instance&&this.IsInstanceValid())return this._instance;const d=this.GetInstanceUID();return this._instance=this.GetRuntime().GetInstanceByUID(d)}SetInstance(d){if(this._instance!==d){this.CleanCaches();this._instance=d;this._objectClassIndex=d.GetObjectClass().GetIndex();
this._instanceUid=d.GetUID();this._worldInfo=d.GetWorldInfo();for(const m of this.propertyTrackItems()){const k=m.sourceAdapter;switch(m.propertyTrack.GetSourceAdapterId()){case "instance-variable":k.GetEditorIndex();var c=d.GetObjectClass(),f=c.GetInstanceVariableIndexByName(m.name),g=c.GetInstanceVariableName(f);c=c.GetInstanceVariableType(f);g===m.name&&c===m.type&&k.UpdateInstanceVariableIndex(f);break;case "behavior":var h=m.behaviorType;f=this.GetObjectClass();g=d.GetObjectClass();c=k.GetBehaviorType(g);
h&&c&&(h=h.GetName(),f.GetBehaviorIndexByName(h),g.GetBehaviorIndexByName(h),k.GetEditorIndex(),k.UpdateBehaviorTypeSid(c.GetSID()))}}}}*propertyTrackItems(){for(const f of this._propertyTracks){var d=f.GetSourceAdapter(),c=this.GetObjectClass();const g={propertyTrack:f,sourceAdapter:d};switch(f.GetSourceAdapterId()){case "world-instance":g.property=f.GetPropertyName();break;case "instance-variable":d=d.GetEditorIndex();g.name=c.GetInstanceVariableName(d);g.type=c.GetInstanceVariableType(d);break;
case "effect":c=c.GetEffectList();d=d.GetEffectType(c);g.effectType=d;break;case "behavior":d=d.GetBehaviorType(c);g.behaviorType=d;break;case "plugin":g.plugin=c.GetPlugin()}yield g}}GetWorldInfo(){if(this._worldInfo&&this.IsInstanceValid())return this._worldInfo;const d=this.GetInstance();d&&(this._worldInfo=d.GetWorldInfo());return this._worldInfo}GetTrackDataItem(){return this._trackDataItem}GetInstanceUID(){return this._instanceUid?this._instanceUid:this._trackDataItem.GetInstanceUID()}SetInstanceUID(d){this._trackDataItem.SetInstanceUID(d)}GetInterpolationMode(){return this._trackDataItem.GetInterpolationMode()}SetInterpolationMode(d){this._trackDataItem.SetInterpolationMode(d)}GetResultMode(){return this._trackDataItem.GetResultMode()}GetId(){return this._trackDataItem.GetId()}GetStartOffset(){return this._trackDataItem.GetStartOffset()}GetLocalTotalTime(){return this._trackDataItem.GetLocalTotalTime()}SetResultMode(d){this._trackDataItem.SetResultMode(d)}SetEase(d){for(const c of this.GetKeyframeDataItems())c.SetEase(d);
for(const c of this.GetPropertyTracks())c.SetEase(d)}GetEnable(){return this._trackDataItem.GetEnable()}SetEnable(d){this._trackDataItem.SetEnable(d)}GetObjectClassIndex(){return isNaN(this._objectClassIndex)?this._trackDataItem.GetObjectClassIndex():this._objectClassIndex}SetObjectClassIndex(d){this._trackDataItem.SetObjectClassIndex(d)}SetOriginalWidth(d){this._trackDataItem.SetOriginalWidth(d)}GetOriginalWidth(){return this._trackDataItem.GetOriginalWidth()}SetOriginalHeight(d){this._trackDataItem.SetOriginalHeight(d)}GetOriginalHeight(){return this._trackDataItem.GetOriginalHeight()}SetInitialState(){this.MaybeGetInstance();
if(this.IsInstanceValid()){for(var d of this._propertyTracks)d.SetInitialState();d=this.GetTimeline().IsForwardPlayBack()?0:this.GetLocalTotalTime();this._lastKeyframeDataItem=this.GetLastKeyFrameBeforeTime(d);this._endStateOfNestedSet=this._initialStateOfNestedSet=!1;this.Interpolate(d)}}SetResumeState(){this.MaybeGetInstance();if(this.IsInstanceValid()){this._timeline.IsForwardPlayBack();var d=this._timeline.GetTime()-this.GetStartOffset();this._lastKeyframeDataItem=this.GetLastKeyFrameBeforeTime(d);
for(const c of this._propertyTracks)c.SetResumeState()}}SetEndState(){if(!this.GetTimeline().IsComplete()&&(this.MaybeGetInstance(),this.IsInstanceValid()&&!this._isNested)){const d=this._timeline.GetTime(),c=this.GetStartOffset()+this.GetLocalTotalTime();d>=c?this.Interpolate(this.GetLocalTotalTime(),!0,!1,!0):0>=d&&this.Interpolate(0,!0,!1,!0)}}BeforeInterpolate(){for(const d of this._propertyTracks)d.BeforeInterpolate()}Interpolate(d,c=!1,f=!1,g=!1,h=!1,m=!1){this.MaybeGetInstance();if(!this.IsInstanceValid()||
m&&this.GetObjectClass().IsGlobal())return!1;d-=this.GetStartOffset();if(0>d)return!1;this.MaybeSetInitialStateOfNestedTrack(d,c);this.MaybeTriggerKeyframeReachedConditions(d,c,h);h=m=!1;for(const k of this._propertyTracks){const a=k.Interpolate(d,f,!1,g);m||0===(a&e.TimelineState.WORLD_INSTANCE_BOX_CHANGE)||(m=!0);h||0===(a&e.TimelineState.LAYOUT_RENDER_CHANGE)||(h=!0)}this.MaybeSetEndStateOfNestedTrack(d,c);m&&(d=this.GetWorldInfo())&&d.SetBboxChanged();return h}AfterInterpolate(){for(const d of this._propertyTracks)d.AfterInterpolate()}MaybeSetInitialStateOfNestedTrack(d,
c){if(c&&this._isNested&&!this._initialStateOfNestedSet){if(this.GetTimeline().IsForwardPlayBack()){if(0>d)return;for(const f of this._propertyTracks)f.Interpolate(0,!1,!1,!0)}else{if(d>this.GetLocalTotalTime())return;for(const f of this._propertyTracks)f.Interpolate(this.GetLocalTotalTime(),!1,!1,!0)}for(const f of this._propertyTracks)f.SetInitialState();this._initialStateOfNestedSet=!0}}MaybeSetEndStateOfNestedTrack(d,c){if(c&&this._isNested&&!this._endStateOfNestedSet)if(this.GetTimeline().IsForwardPlayBack()){if(d>=
this.GetLocalTotalTime()){for(const f of this._propertyTracks)f.Interpolate(this.GetLocalTotalTime(),!1,!1,!0);this._endStateOfNestedSet=!0}}else if(0>=d){for(const f of this._propertyTracks)f.Interpolate(0,!1,!1,!0);this._endStateOfNestedSet=!0}}MaybeTriggerKeyframeReachedConditions(d,c,f){if(!f&&c)return d=this.GetLastKeyFrameBeforeTime(d),d!==this._lastKeyframeDataItem&&this.OnKeyframeReached(d),this._lastKeyframeDataItem=d}GetLastKeyFrameBeforeTime(d){const c=this.GetTimeline();let f=this._trackData.GetKeyFrameDataItemAtTime(d,
this._trackDataItem);return f?f:c.IsForwardPlayBack()?this._trackData.GetFirstKeyFrameDataItemLowerOrEqualThan(d,this._trackDataItem):this._trackData.GetFirstKeyFrameDataItemHigherOrEqualThan(d,this._trackDataItem)}OnKeyframeReached(d){if(e.Plugins.Timeline&&this.GetTimeline().constructor===e.TimelineState){var c=this.GetTimeline();e.Plugins.Timeline.Cnds.SetTriggerTimeline(c);e.Plugins.Timeline.Cnds.SetTriggerKeyframe(d);d=c.GetTimelineManager();d.Trigger(e.Plugins.Timeline.Cnds.OnAnyKeyframeReached);
d.Trigger(e.Plugins.Timeline.Cnds.OnKeyframeReached);e.Plugins.Timeline.Cnds.SetTriggerTimeline(null);e.Plugins.Timeline.Cnds.SetTriggerKeyframe(null)}}AddKeyframe(){return this._trackDataItem.GetKeyframeData().AddEmptyKeyframeDataItem()}AddPropertyTrack(){var d=this._trackDataItem.GetPropertyTrackData().AddEmptyPropertyTrackDataItem();d=e.PropertyTrackState.Create(this,d);this._propertyTracks.push(d);return d}DeleteKeyframes(d){this._trackDataItem.GetKeyframeData().DeleteKeyframeDataItems(d)}DeletePropertyKeyframes(d){for(const c of this._propertyTracks)c.DeletePropertyKeyframes(d)}SaveState(){for(const d of this._propertyTracks)d.SaveState()}CompareInitialStateWithCurrent(){this.MaybeGetInstance();
if(this.IsInstanceValid())for(const d of this._propertyTracks)d.CompareInitialStateWithCurrent()}CompareSaveStateWithCurrent(){this.MaybeGetInstance();if(this.IsInstanceValid()){var d=!1;for(const c of this._propertyTracks){const f=c.CompareSaveStateWithCurrent();!d&&f&&(d=!0)}d&&(d=this.AddKeyframe(),d.SetTime(this.GetTimeline().GetTime()),d.SetEase("noease"),d.SetEnable(!0),d.SetTags(""))}}_SaveToJson(){var d=this.GetInstance();d=d?d.GetUID():this.GetInstanceUID();return{propertyTracksJson:this._SavePropertyTracksToJson(),
lastKeyframeDataItemJson:this._SaveLastKeyframeDataItemToJson(),initialStateOfNestedSet:this._initialStateOfNestedSet,endStateOfNestedSet:this._endStateOfNestedSet,instanceUid:d}}_LoadFromJson(d){d&&(this._LoadPropertyTracksFromJson(d.propertyTracksJson),this._LoadLastKeyframeDataItemFromJson(d.lastKeyframeDataItemJson),this._LoadInstanceFromJson(d.instanceUid),this._initialStateOfNestedSet=!1,d.hasOwnProperty.initialStateOfNestedSet&&(this._initialStateOfNestedSet=d.initialStateOfNestedSet),this._endStateOfNestedSet=
!1,d.hasOwnProperty.endStateOfNestedSet&&(this._endStateOfNestedSet=d.endStateOfNestedSet))}_SaveLastKeyframeDataItemToJson(){return this._trackDataItem.GetKeyframeData().GetKeyframeDataItemIndex(this._lastKeyframeDataItem)}_SavePropertyTracksToJson(){return this._propertyTracks.map(d=>d._SaveToJson())}_LoadPropertyTracksFromJson(d){d.forEach((c,f)=>{this._propertyTracks[f]._LoadFromJson(c)})}_LoadInstanceFromJson(d){if(e.IsFiniteNumber(d)&&(d=this.GetRuntime().GetInstanceByUID(d))){var c=this.GetTimeline();
c.ClearTrackInstances();c.SetTrackInstance(this._trackDataItem.GetId(),d)}}_LoadLastKeyframeDataItemFromJson(d){this._lastKeyframeDataItem=this._trackDataItem.GetKeyframeData().GetKeyframeDataItemFromIndex(d)}}}"use strict";
{const e=self.C3;e.PropertyTrackState=class extends e.DefendedBase{constructor(d,c){super();this._track=d;this._propertyTrackDataItem=c;this._propertyTrackData=c.GetPropertyTrackData();this._sourceAdapter=this.GetSourceAdapter();this._propertyKeyframeDataItems=this._propertyTrackDataItem.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray()}static Create(d,c){return e.New(e.PropertyTrackState,d,c)}Release(){this._track=null;this._sourceAdapter&&(this._sourceAdapter.Release(),this._sourceAdapter=
null);this._propertyTrackData=this._propertyTrackDataItem=this._propertyKeyframeDataItems=null}GetTrack(){return this._track}GetPropertyTrackDataItem(){return this._propertyTrackDataItem}GetPropertyTrackData(){return this._propertyTrackData}GetTimeline(){return this._track.GetTimeline()}GetRuntime(){return this._track.GetRuntime()}GetInstance(){return this._track.GetInstance()}GetSourceAdapter(){if(this._sourceAdapter)return this._sourceAdapter;let d;switch(this._propertyTrackDataItem.GetSourceAdapterId()){case "behavior":d=
new e.PropertyTrackState.BehaviorSourceAdapter(this);break;case "effect":d=new e.PropertyTrackState.EffectSourceAdapter(this);break;case "instance-variable":d=new e.PropertyTrackState.InstanceVariableSourceAdapter(this);break;case "plugin":d=new e.PropertyTrackState.PluginSourceAdapter(this);break;case "world-instance":d=new e.PropertyTrackState.WorldInstanceSourceAdapter(this);break;case "value":d=new e.PropertyTrackState.ValueSourceAdapter(this)}return this._sourceAdapter=d}GetSourceAdapterId(){return this._propertyTrackDataItem.GetSourceAdapterId()}SetSourceAdapterId(d){this._propertyTrackDataItem.SetSourceAdapterId(d)}GetSourceAdapterArgs(){return this._propertyTrackDataItem.GetSourceAdapterArguments()}SetSourceAdapterArgs(d){this._propertyTrackDataItem.SetSourceAdapterArguments(d)}GetSourceAdapterValue(){return this.GetSourceAdapter().GetValue()}GetPropertyName(){return this._propertyTrackDataItem.GetProperty()}SetPropertyName(d){this._propertyTrackDataItem.SetProperty(d)}GetPropertyType(){return this._propertyTrackDataItem.GetType()}SetPropertyType(d){this._propertyTrackDataItem.SetType(d)}GetPropertyKeyframeType(){return this.GetPropertyTrackData().GetFirstPropertyKeyframeDataItem(this._propertyTrackDataItem).GetType()}GetMin(){return this._propertyTrackDataItem.GetMin()}SetMin(d){this._propertyTrackDataItem.SetMin(d)}GetMax(){return this._propertyTrackDataItem.GetMax()}SetMax(d){this._propertyTrackDataItem.SetMax(d)}GetEnable(){return this._propertyTrackDataItem.GetEnable()}SetEnable(d){this._propertyTrackDataItem.SetEnable(d)}GetInterpolationMode(){return this._propertyTrackDataItem.GetInterpolationMode()}SetInterpolationMode(d){this._propertyTrackDataItem.SetInterpolationMode(d)}GetResultMode(){return this._propertyTrackDataItem.GetResultMode()}SetResultMode(d){this._propertyTrackDataItem.SetResultMode(d)}SetEase(d){for(const c of this.GetPropertyKeyframeDataItems())c.SetEase(d)}GetPropertyKeyframeDataItems(){return this._propertyKeyframeDataItems?
this._propertyKeyframeDataItems:this._propertyKeyframeDataItems=this._propertyTrackDataItem.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray()}*GetPropertyKeyframeValues(){for(const d of this.GetPropertyKeyframeDataItems())yield d.GetValueWithResultMode()}CleanCaches(){this.GetSourceAdapter().CleanCaches()}GetCurrentState(){return this.GetSourceAdapter().GetCurrentState()}SetInitialState(){this.GetSourceAdapter().SetInitialState()}SetResumeState(){this.GetSourceAdapter().SetResumeState()}BeforeInterpolate(){this.GetSourceAdapter().BeforeInterpolate()}Interpolate(d,
c=!1,f=!1,g=!1){var h=this._propertyTrackDataItem;let m=this._propertyTrackData.GetPropertyKeyFrameDataItemAtTime(d,h);m?h=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherThan(d,h):(m=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(d,h),h=this._propertyTrackData.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(d,h));return this.GetSourceAdapter().Interpolate(d,m,h,c,f,g)}AfterInterpolate(){this.GetSourceAdapter().AfterInterpolate()}static GetStartPropertyKeyframeForTime(d,
c){const f=c.GetPropertyTrackDataItem();c=c._propertyTrackData;let g=c.GetPropertyKeyFrameDataItemAtTime(d,f);g||(g=c.GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(d,f));return g}static GetEndPropertyKeyframeForTime(d,c){const f=c.GetPropertyTrackDataItem();c=c._propertyTrackData;return c.GetPropertyKeyFrameDataItemAtTime(d,f)?c.GetFirstPropertyKeyFrameDataItemHigherThan(d,f):c.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(d,f)}AddPropertyKeyframe(){return this._propertyTrackDataItem.GetPropertyKeyframeData().AddEmptyPropertyKeyframeDataItem()}DeletePropertyKeyframes(d){this._propertyTrackDataItem.GetPropertyKeyframeData().DeletePropertyKeyframeDataItems(d)}SaveState(){this.GetSourceAdapter().SaveState()}CompareInitialStateWithCurrent(){if(this.GetSourceAdapter().CompareInitialStateWithCurrent()){const d=
this._propertyTrackData.GetFirstPropertyKeyframeDataItem(this._propertyTrackDataItem),c=this.GetSourceAdapter().GetCurrentState();d.SetAbsoluteValue(c)}}CompareSaveStateWithCurrent(){const d=this.GetSourceAdapter().CompareSaveStateWithCurrent();d&&this.AddPropertyKeyframeAtCurrentTime();this.GetSourceAdapter().ClearSaveState();return d}AddPropertyKeyframeAtCurrentTime(){const d=this.GetTimeline().GetTime(),c=this.GetSourceAdapter(),f=e.PropertyTrackState.GetStartPropertyKeyframeForTime(d,this),g=
this.AddPropertyKeyframe();g.SetType(f.GetType());g.SetTime(d);g.SetEase(f.GetEase());g.SetEnable(!0);g.SetValue(c.GetValueAtTime());g.SetAbsoluteValue(c.GetCurrentState())}_SaveToJson(){return{sourceAdapterJson:this.GetSourceAdapter()._SaveToJson()}}_LoadFromJson(d){d&&this.GetSourceAdapter()._LoadFromJson(d.sourceAdapterJson)}}}"use strict";
{const e=self.C3.PropertyTrackState;e.PropertySourceAdapter=class{constructor(d){this._propertyTrack=d;this._propertyAdapter=null}Release(){this._propertyAdapter&&(this._propertyAdapter.Release(),this._propertyAdapter=null);this._propertyTrack=null}GetPropertyTrack(){return this._propertyTrack}CleanCaches(){this._propertyAdapter&&this._propertyAdapter.CleanCaches()}GetPropertyAdapter(){return this._propertyAdapter?this._propertyAdapter:this._propertyAdapter=this._CreatePropertyAdapter()}GetEditorIndex(){}GetIndex(){return this.GetEditorIndex()}GetTarget(){}SetInitialState(){this.GetPropertyAdapter().SetInitialState()}SetResumeState(){this.GetPropertyAdapter().SetResumeState()}BeforeInterpolate(){this.GetPropertyAdapter().BeforeChangeProperty()}Interpolate(d,
c,f,g,h,m){const k=e.PropertySourceAdapter.GetInterpolateFunc(this._propertyTrack)(d,c,f,this._propertyTrack);return h?k:this.GetPropertyAdapter().ChangeProperty(d,k,c,f,g,m)}AfterInterpolate(){this.GetPropertyAdapter().AfterChangeProperty()}SaveState(){this.GetPropertyAdapter().SetSaveState()}ClearSaveState(){this.GetPropertyAdapter().ClearSaveState()}GetCurrentState(){return this.GetPropertyAdapter().GetCurrentState()}CompareInitialStateWithCurrent(){return this.GetPropertyAdapter().CompareInitialStateWithCurrent()}CompareSaveStateWithCurrent(){return this.GetPropertyAdapter().CompareSaveStateWithCurrent()}GetValueAtTime(){return e.PropertySourceAdapter.GetValueAtTime(this._propertyTrack)}_CreatePropertyAdapter(){const d=
this._propertyTrack.GetPropertyType();switch(this._propertyTrack.GetPropertyKeyframeType()){case "combo":case "boolean":case "text":case "string":return new e.PropertyInterpolationAdapter.NoInterpolationAdapter(this);case "numeric":case "number":case "angle":return"combo"===d?new e.PropertyInterpolationAdapter.NoInterpolationAdapter(this):new e.PropertyInterpolationAdapter.NumericInterpolationAdapter(this);case "color":case "offsetColor":return new e.PropertyInterpolationAdapter.ColorInterpolationAdapter(this)}}_SaveToJson(){return{propertyAdapterJson:this.GetPropertyAdapter()._SaveToJson()}}_LoadFromJson(d){d&&
this.GetPropertyAdapter()._LoadFromJson(d.propertyAdapterJson)}static GetValueAtTime(d){const c=d.GetTrack().GetTimeline().GetTime(),f=e.GetStartPropertyKeyframeForTime(c,d),g=e.GetEndPropertyKeyframeForTime(c,d);return e.PropertySourceAdapter.GetInterpolateFunc(d)(c,f,g,d)}static GetValue(d,c,f){let g=d.GetResultMode();"combo"===d.GetPropertyType()&&(g="absolute");switch(g){case "relative":return c+f;case "absolute":return f}}static GetInterpolateFunc(d){switch(d.GetPropertyKeyframeType()){case "numeric":return e.NumericTypeAdapter.Interpolate;
case "angle":return e.AngleTypeAdapter.Interpolate;case "boolean":return e.BooleanTypeAdapter.Interpolate;case "color":return e.ColorTypeAdapter.Interpolate;case "text":return e.TextTypeAdapter.Interpolate}}static GetWillChangeFunc(d){switch(d.GetPropertyKeyframeType()){case "numeric":return e.NumericTypeAdapter.WillChange;case "angle":return e.AngleTypeAdapter.WillChange;case "boolean":return e.BooleanTypeAdapter.WillChange;case "color":return e.ColorTypeAdapter.WillChange;case "text":return e.TextTypeAdapter.WillChange}}}}"use strict";
{const e=self.C3;class d extends e.PropertyTrackState.PropertySourceAdapter{constructor(c){super(c)}}e.PropertyTrackState.WorldInstanceSourceAdapter=d}"use strict";
{const e=self.C3;class d extends e.PropertyTrackState.PropertySourceAdapter{constructor(c){super(c);this._updatedIndex=NaN}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[0]}GetIndex(){return this._updatedIndex?this._updatedIndex:super.GetIndex()}GetTarget(){return this._propertyTrack.GetTrack().GetInstance()}UpdateInstanceVariableIndex(c){this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[0]!==c&&(this._updatedIndex=c)}Interpolate(c,
f,g,h,m,k){if(this.GetPropertyAdapter().CanChange(f.GetValue()))return super.Interpolate(c,f,g,h,m,k)}_SaveToJson(){return Object.assign(super._SaveToJson(),{index:this._updatedIndex})}_LoadFromJson(c){c&&(super._LoadFromJson(c),this._updatedIndex=c.index)}}e.PropertyTrackState.InstanceVariableSourceAdapter=d}"use strict";
{const e=self.C3;class d extends e.PropertyTrackState.PropertySourceAdapter{constructor(c){super(c);this._sid=NaN}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[1]}GetTarget(){var c=this._propertyTrack.GetPropertyTrackDataItem(),f=this._propertyTrack.GetTrack();c=this._sid?this._sid:c.GetSourceAdapterArguments()[0];f=f.GetInstance();c=f.GetBehaviorIndexBySID(c);return f.GetBehaviorInstances()[c].GetSdkInstance()}GetBehaviorType(c){const f=this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[2];
return c.GetBehaviorTypeByName(f)}UpdateBehaviorTypeSid(c){this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[0]!==c&&(this._sid=c)}Interpolate(c,f,g,h,m,k){const a=this._propertyTrack.GetTrack().GetInstance();if(this.GetBehaviorType(a.GetObjectClass()))return super.Interpolate(c,f,g,h,m,k)}_SaveToJson(){return Object.assign(super._SaveToJson(),{sid:this._sid})}_LoadFromJson(c){c&&(super._LoadFromJson(c),this._sid=c.sid)}}e.PropertyTrackState.BehaviorSourceAdapter=d}"use strict";
{const e=self.C3;class d extends e.PropertyTrackState.PropertySourceAdapter{constructor(c){super(c)}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[1]}GetTarget(){const c=this._propertyTrack.GetTrack().GetWorldInfo().GetInstanceEffectList();var f=c.GetEffectList();f=this.GetEffectType(f).GetIndex();return c.IsEffectIndexActive(f)?c.GetEffectParametersForIndex(f):null}GetEffectType(c){const f=this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[0];
return c.GetEffectTypeByName(f)}Interpolate(c,f,g,h,m,k){if(this._IsEffectActive())return super.Interpolate(c,f,g,h,m,k)}_IsEffectActive(){const c=this._propertyTrack.GetTrack().GetWorldInfo().GetInstanceEffectList();var f=c.GetEffectList();if(f=this.GetEffectType(f))return f=f.GetIndex(),c.IsEffectIndexActive(f)}}e.PropertyTrackState.EffectSourceAdapter=d}"use strict";
{const e=self.C3;class d extends e.PropertyTrackState.PropertySourceAdapter{constructor(c){super(c)}GetEditorIndex(){return this._propertyTrack.GetPropertyTrackDataItem().GetSourceAdapterArguments()[0]}GetTarget(){return this._propertyTrack.GetTrack().GetInstance().GetSdkInstance()}Interpolate(c,f,g,h,m,k){var a=this._propertyTrack.GetTrack();const b=a.GetObjectClass().GetPlugin();a=a.GetInstance().GetObjectClass().GetPlugin();if(b===a)return super.Interpolate(c,f,g,h,m,k)}}e.PropertyTrackState.PluginSourceAdapter=
d}"use strict";
{const e=self.C3;class d extends e.PropertyTrackState.PropertySourceAdapter{constructor(c){super(c);this._value=0;this._init=!1}SetInitialState(){const c=this._propertyTrack.GetPropertyTrackData();let f=this._propertyTrack.GetPropertyTrackDataItem();f=c.GetFirstPropertyKeyframeDataItem(f);this._value=f.GetValueWithResultMode()}SetResumeState(){}GetValue(){this._init||this._propertyTrack.Interpolate(0);return this._value}Interpolate(c,f,g,h,m,k){h=e.PropertyTrackState.NumericTypeAdapter.Interpolate;this._value=
h(c,f,g,this._propertyTrack);this._init=!0}SaveState(){}ClearSaveState(){}GetCurrentState(){return this._value}CompareInitialStateWithCurrent(){return!1}CompareSaveStateWithCurrent(){return!1}_SaveToJson(){return{value:this._value,init:this._init}}_LoadFromJson(c){c&&(this._value=c.value,this._init=c.hasOwnProperty("init")?c.init:!0)}}e.PropertyTrackState.ValueSourceAdapter=d}"use strict";
self.C3.PropertyTrackState.PropertyInterpolationAdapter=class{constructor(e){this._sourceAdapter=e;this._propertyTrack=e.GetPropertyTrack();this._worldInfo=this._propertyTrack.GetTrack().GetWorldInfo();this._property=this._propertyTrack.GetPropertyName();this._firstAbsoluteUpdate=!1;this._target=this._saveState=null}Release(){this._target=this._saveState=this._worldInfo=this._propertyTrack=this._sourceAdapter=null}CleanCaches(){this._target=this._saveState=this._worldInfo=null}GetPropertyTrack(){return this._propertyTrack}GetWorldInfo(){return this._worldInfo?
this._worldInfo:this._worldInfo=this._propertyTrack.GetTrack().GetWorldInfo()}SetFirstAbsoluteUpdate(e){this._firstAbsoluteUpdate=!!e}GetFirstAbsoluteUpdate(){return this._firstAbsoluteUpdate}SetInitialState(){}SetResumeState(){}SetSaveState(){this._saveState=this.GetCurrentState()}ClearSaveState(){this._saveState=null}GetCurrentState(){}CompareInitialStateWithCurrent(){}CompareSaveStateWithCurrent(){}CanChange(e){return typeof this._Getter()===typeof e}BeforeChangeProperty(){}ChangeProperty(e,d,
c,f,g){}AfterChangeProperty(){}_FirstKeyframeGetter(){return this._PickTimelinePlaybackMode(()=>{const e=this._propertyTrack.GetPropertyTrackDataItem();return this._propertyTrack.GetPropertyTrackData().GetFirstPropertyKeyframeDataItem(e)},()=>{const e=this._propertyTrack.GetPropertyTrackDataItem();return this._propertyTrack.GetPropertyTrackData().GetLastPropertyKeyframeDataItem(e)}).GetAbsoluteValue()}_CurrentKeyframeGetter(){const e=this._propertyTrack.GetTimeline().GetTime()-this._propertyTrack.GetTrack().GetStartOffset();
return this._PickTimelinePlaybackMode(()=>{const d=this._propertyTrack.GetPropertyTrackDataItem();return this._propertyTrack.GetPropertyTrackData().GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(e,d)},()=>{const d=this._propertyTrack.GetPropertyTrackDataItem(),c=this._propertyTrack.GetPropertyTrackData(),f=c.GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(e,d);return f?f:c.GetLastPropertyKeyframeDataItem(d)}).GetAbsoluteValue()}_PickTimelinePlaybackMode(e,d){return this._propertyTrack.GetTimeline().IsForwardPlayBack()?
e():d()}_PickResultMode(e,d){return"relative"===this._propertyTrack.GetResultMode()?e():d()}_PickFirstAbsoluteUpdate(e,d){return this.GetFirstAbsoluteUpdate()?(this.SetFirstAbsoluteUpdate(!1),e()):d()}_GetAbsoluteInitialValue(e){}_GetIndex(){return this._sourceAdapter.GetIndex()}_GetTarget(){return this._target?this._target:this._target=this._sourceAdapter.GetTarget()}_PickSource(e,d,c,f,g){switch(this._propertyTrack.GetSourceAdapterId()){case "behavior":return e();case "effect":return d();case "instance-variable":return c();
case "plugin":return f();case "world-instance":return g()}}_SaveToJson(){return{firstAbsoluteUpdate:this._firstAbsoluteUpdate,saveState:this._saveState}}_LoadFromJson(e){e&&(this._firstAbsoluteUpdate=e.firstAbsoluteUpdate,this._saveState=e.saveState)}_GetPropertyKeyframeStubs(e,d=!1){const c=[];for(const f of e){e=f.GetTrack().GetStartOffset();for(const g of f.GetPropertyKeyframeDataItems())d&&0===g.GetTime()?c.push({time:e+g.GetTime(),value:g.GetAbsoluteValue()}):d||c.push({time:e+g.GetTime(),value:g.GetAbsoluteValue()})}return c.sort((f,
g)=>f.time-g.time)}_GetLastPropertyKeyframeStub(e,d,c){return this._GetPropertyKeyframeStubLowerThanPlayhead(d,c)}_GetPropertyKeyframeStubLowerThanPlayhead(e,d){for(let c=d.length-1;0<=c;c--)if(d[c].time<=e)return d[c];return null}};"use strict";
{const e=self.C3,d=new Map,c=[0,0,0];class f extends e.PropertyTrackState.PropertyInterpolationAdapter{constructor(g){super(g)}SetInitialState(){}SetResumeState(){}GetCurrentState(){const g=this._propertyTrack.GetSourceAdapterId(),h=this._GetTarget(),m=this._GetIndex();switch(g){case "behavior":return this._ToColorArray(h.GetPropertyValueByIndex(m));case "effect":return this._ToColorArray(h[m]);case "plugin":return this._ToColorArray(h.GetPropertyValueByIndex(m));case "world-instance":return this._ToColorArray(this._Getter())}}CompareInitialStateWithCurrent(){const g=
this._FirstKeyframeGetter();return!this._CompareColors(g,this._Getter())}CompareSaveStateWithCurrent(){return e.IsNullOrUndefined(this._saveState)?!1:!this._CompareColors(this._saveState,this._Getter())}_CompareColors(g,h){return g.equalsIgnoringAlpha(h)}_FirstKeyframeGetter(){const g=super._FirstKeyframeGetter();return this._GetColorFromArray(g)}_CurrentKeyframeGetter(){const g=super._CurrentKeyframeGetter();return this._GetColorFromArray(g)}_GetAbsoluteInitialValue(g){}_ToColorArray(g){return e.IsInstanceOf(g,
e.Color)?g.toArray().slice(0,3):g.slice(0,3)}_GetColorFromArray(g){return e.IsInstanceOf(g,e.Color)?g:new e.Color(g[0],g[1],g[2],1)}CanChange(g){return!0}BeforeChangeProperty(){var g=this._propertyTrack.GetInstance();d.has(g)||d.set(g,new Map);g=d.get(g);const h=this._propertyTrack.GetSourceAdapterId();g.has(h)||g.set(h,new Map);g=g.get(h);g.has(this._property)||g.set(this._property,{used:!1,color:new e.Color(0,0,0,1)})}_GetTmpColor(g,h,m){g=d.get(g).get(h).get(m);g.used=!0;return g.color}ChangeProperty(g,
h,m,k,a){a=this._propertyTrack.GetTimeline();k=this._propertyTrack.GetTrack();g=this._propertyTrack.GetInstance();var b=this._propertyTrack.GetSourceAdapter();m=this._propertyTrack.GetSourceAdapterId();b=a.GetSimilarPropertyTracks(g,b,this._property);if(1<b.length){if(b=this._GetPropertyKeyframeStubs(b,!0),a=this._GetLastPropertyKeyframeStub(a,a.GetTime(),b))if(k=k.GetStartOffset(),b=a.time-k,0===b)this._GetTmpColor(g,m,this._property).addRgb(h[0],h[1],h[2]);else{if(0>b)return;a=h[0];k=h[1];h=h[2];
b=this._propertyTrack.Interpolate(b,!1,!0);a=e.Color.DiffChannel(a,b[0]);k=e.Color.DiffChannel(k,b[1]);h=e.Color.DiffChannel(h,b[2]);this._GetTmpColor(g,m,this._property).addRgb(a,k,h)}}else this._Setter(h[0],h[1],h[2]);return e.TimelineState.LAYOUT_RENDER_CHANGE}AfterChangeProperty(){const g=this._propertyTrack.GetInstance();if(d.has(g)){var h=d.get(g),m=this._propertyTrack.GetSourceAdapterId();if(h.has(m)){var k=h.get(m);if(k.has(this._property)){var a=k.get(this._property),b=a.color;a.used&&this._Setter(b.getR(),
b.getG(),b.getB());0===k.size&&h.delete(m);0===h.size&&d.delete(g)}}}}_Getter(){const g=this._propertyTrack.GetSourceAdapterId(),h=this._GetTarget(),m=this._GetIndex();switch(g){case "behavior":return this._GetColorFromArray(h.GetPropertyValueByIndex(m));case "effect":return h[m].clone();case "plugin":return this._GetColorFromArray(h.GetPropertyValueByIndex(m));case "world-instance":return this.GetWorldInfo().GetUnpremultipliedColor().clone()}}_Setter(g,h,m){const k=this._propertyTrack.GetSourceAdapterId(),
a=this._GetTarget(),b=this._GetIndex();switch(k){case "behavior":c[0]=g;c[1]=h;c[2]=m;a.SetPropertyValueByIndex(b,c);break;case "effect":a[b].setRgb(g,h,m);break;case "plugin":c[0]=g;c[1]=h;c[2]=m;a.SetPropertyValueByIndex(b,c);break;case "world-instance":this.GetWorldInfo().SetUnpremultipliedColorRGB(g,h,m)}}_SaveToJson(){}_LoadFromJson(g){}}e.PropertyTrackState.PropertyInterpolationAdapter.ColorInterpolationAdapter=f}"use strict";
{const e=self.C3;class d extends e.PropertyTrackState.PropertyInterpolationAdapter{constructor(c){super(c)}SetInitialState(){}SetResumeState(){}GetCurrentState(){return this._Getter()}CompareInitialStateWithCurrent(){return this._FirstKeyframeGetter()!==this.GetCurrentState()}CompareSaveStateWithCurrent(){return e.IsNullOrUndefined(this._saveState)?!1:this._saveState!==this.GetCurrentState()}ChangeProperty(c,f,g,h,m){g=e.PropertyTrackState.PropertySourceAdapter.GetWillChangeFunc(this._propertyTrack);
var k=this._propertyTrack;const a=k.GetTrack();h=k.GetSourceAdapterId();m=k.GetTimeline();var b=a.GetInstance();k=k.GetSourceAdapter();b=m.GetSimilarPropertyTracks(b,k,this._property);1<b.length&&(b=this._GetPropertyKeyframeStubs(b),c+=a.GetStartOffset(),c=this._GetLastPropertyKeyframeStub(m,c,b))&&(f=c.value);if(g(this._GetIndex(),this._GetTarget(),f,h))switch(this._Setter(f),h){case "plugin":return e.TimelineState.LAYOUT_RENDER_CHANGE}}_Getter(){const c=this._propertyTrack.GetSourceAdapterId(),
f=this._GetTarget(),g=this._GetIndex();switch(c){case "behavior":return f.GetPropertyValueByIndex(g);case "effect":return f[g];case "instance-variable":return f.GetInstanceVariableValue(g);case "plugin":return f.GetPropertyValueByIndex(g)}}_Setter(c){const f=this._propertyTrack.GetSourceAdapterId(),g=this._GetTarget(),h=this._GetIndex();switch(f){case "behavior":g.SetPropertyValueByIndex(h,c);break;case "effect":g[h]=c;break;case "instance-variable":g.SetInstanceVariableValue(h,c);break;case "plugin":g.SetPropertyValueByIndex(h,
c)}}}e.PropertyTrackState.PropertyInterpolationAdapter.NoInterpolationAdapter=d}"use strict";
{const e=self.C3,d=new Map,c=(g,h,m,k,a)=>d.set(g,{setter:h,absolute_setter:m,getter:k,round:a});c("offsetX",(g,h)=>g.OffsetX(h),(g,h)=>g.SetX(h),g=>g.GetX(),!0);c("offsetY",(g,h)=>g.OffsetY(h),(g,h)=>g.SetY(h),g=>g.GetY(),!0);c("offsetWidth",(g,h)=>g.OffsetWidth(h),(g,h)=>g.SetWidth(h),g=>g.GetWidth(),!0);c("offsetHeight",(g,h)=>g.OffsetHeight(h),(g,h)=>g.SetHeight(h),g=>g.GetHeight(),!0);c("offsetAngle",(g,h)=>g.OffsetAngle(h),(g,h)=>g.SetAngle(h),g=>g.GetAngle(),!1);c("offsetOpacity",(g,h)=>g.OffsetOpacity(h),
(g,h)=>g.SetOpacity(h),g=>g.GetOpacity(),!1);c("offsetOriginX",(g,h)=>g.OffsetOriginX(h),(g,h)=>g.SetOriginX(h),g=>g.GetOriginX(),!1);c("offsetOriginY",(g,h)=>g.OffsetOriginY(h),(g,h)=>g.SetOriginY(h),g=>g.GetOriginY(),!1);c("offsetZElevation",(g,h)=>g.OffsetZElevation(h),(g,h)=>g.SetZElevation(h),g=>g.GetZElevation(),!0);c("offsetScaleX",(g,h,m)=>{g.OffsetWidth(m.GetOriginalWidth()*h)},(g,h,m)=>{g.SetWidth(m.GetOriginalWidth()*h)},(g,h)=>g.GetWidth()/h.GetOriginalWidth(),!1);c("offsetScaleY",(g,
h,m)=>{g.OffsetHeight(m.GetOriginalHeight()*h)},(g,h,m)=>{g.SetHeight(m.GetOriginalHeight()*h)},(g,h)=>g.GetHeight()/h.GetOriginalHeight(),!1);class f extends e.PropertyTrackState.PropertyInterpolationAdapter{constructor(g){super(g);this._lastValue=0;this._instance_absolute_setter=this._instance_setter=this._instance_getter=null;this._round=!1;e.IsInstanceOf(this._propertyTrack.GetTimeline(),e.Tween)?this._typeAdapter=new e.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTween(this):
this._typeAdapter=new e.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTimeline(this);g=this._propertyTrack.GetPropertyName();"world-instance"===this._propertyTrack.GetSourceAdapterId()&&(g=d.get(g),this._instance_getter=g.getter,this._instance_setter=g.setter,this._instance_absolute_setter=g.absolute_setter,this._round=g.round)}Release(){this._instance_absolute_setter=this._instance_setter=this._instance_getter=this._typeAdapter=null;super.Release()}GetLastValue(){return this._lastValue}SetLastValue(g){this._lastValue=
g}SetInitialState(){const g=this._typeAdapter.SetInitialState();"number"===typeof g&&(this._lastValue=g)}SetResumeState(){const g=this._typeAdapter.SetResumeState();"number"===typeof g&&(this._lastValue=g)}GetCurrentState(){return this._Getter()}CompareInitialStateWithCurrent(){return this._FirstKeyframeGetter()!==this.GetCurrentState()}CompareSaveStateWithCurrent(){return e.IsNullOrUndefined(this._saveState)?!1:this._saveState!==this.GetCurrentState()}BeforeChangeProperty(){this._typeAdapter.BeforeChangeProperty()}ChangeProperty(g,
h,m,k,a,b){return this._typeAdapter.ChangeProperty(g,h,m,k,a,b)}AfterChangeProperty(){this._typeAdapter.AfterChangeProperty()}_Getter(){const g=this._GetTarget(),h=this._GetIndex(),m=this._propertyTrack.GetTrack(),k=this.GetWorldInfo();return this._PickSource(()=>g.GetPropertyValueByIndex(h),()=>g[h],()=>g.GetInstanceVariableValue(h),()=>g.GetPropertyValueByIndex(h),()=>this._instance_getter(k,m))}_Setter(g,h,m){const k=this._GetTarget(),a=this._GetIndex(),b=this._propertyTrack.GetTrack(),l=this.GetWorldInfo();
this._PickSource(()=>k.OffsetPropertyValueByIndex(a,g),()=>k[a]+=g,()=>k.SetInstanceVariableOffset(a,g),()=>k.OffsetPropertyValueByIndex(a,g),()=>this._instance_setter(l,g,b))}_SetterAbsolute(g,h,m){const k=this._GetTarget(),a=this._GetIndex(),b=this._propertyTrack.GetTrack(),l=this.GetWorldInfo();this._PickSource(()=>k.SetPropertyValueByIndex(a,g),()=>k[a]=g,()=>k.SetInstanceVariableValue(a,g),()=>k.SetPropertyValueByIndex(a,g),()=>this._instance_absolute_setter(l,g,b))}_MaybeEnsureValue(g,h,m,k,
a,b){this._typeAdapter._MaybeEnsureValue(g,h,m,k,a,b)}_AddDelta(g,h,m){var k=(g.toString().split(".")[1]||"").length;g=this._Getter();k=0===k?this._round?Math.round(g):g:e.toFixed(g,k);this._Setter(k-g,h,m)}_SaveToJson(){return Object.assign(super._SaveToJson(),{v:this._lastValue})}_LoadFromJson(g){g&&(super._LoadFromJson(g),this._lastValue=g.v)}}e.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapter=f}"use strict";
{const e=self.C3,d=new Map;class c{constructor(f){this._numericInterpolationAdapter=f}Release(){this._numericInterpolationAdapter=null}SetInitialState(){const f=this._numericInterpolationAdapter,g=this._numericInterpolationAdapter.GetPropertyTrack();return f._PickResultMode(()=>f._PickTimelinePlaybackMode(()=>0,()=>e.PropertyTrackState.PropertySourceAdapter.GetValueAtTime(g)),()=>{})}SetResumeState(){}BeforeChangeProperty(){const f=this._numericInterpolationAdapter,g=this._numericInterpolationAdapter.GetPropertyTrack(),
h=g.GetPropertyName();f._PickResultMode(()=>{},()=>{var m=g.GetInstance();d.has(m)||d.set(m,new Map);m=d.get(m);const k=g.GetSourceAdapterId();m.has(k)||m.set(k,new Map);m=m.get(k);m.has(h)||m.set(h,{used:!1,value:0})})}_GetTmpAbsoluteValueObject(f,g,h){f=d.get(f).get(g).get(h);f.used=!0;return f}ChangeProperty(f,g,h,m,k,a){const b=this._numericInterpolationAdapter,l=this._numericInterpolationAdapter.GetPropertyTrack(),p=l.GetPropertyName();b._PickResultMode(()=>{const r=b.GetLastValue();b._Setter(g-
r,h,m);a&&this._MaybeEnsureValue(f,h,m,k,r,g);b.SetLastValue(g)},()=>{var r=l.GetTimeline(),t=l.GetTrack();const u=l.GetInstance();var w=l.GetSourceAdapter();const x=l.GetSourceAdapterId();w=r.GetSimilarPropertyTracks(u,w,p);if(1<w.length){if(w=b._GetPropertyKeyframeStubs(w,!0),r=b._GetLastPropertyKeyframeStub(r,r.GetTime(),w))t=t.GetStartOffset(),t=r.time-t,0===t?this._GetTmpAbsoluteValueObject(u,x,p).value+=g:0>t||(t=l.Interpolate(t,!1,!0),this._GetTmpAbsoluteValueObject(u,x,p).value+=g-t)}else b._SetterAbsolute(g)});
return b._PickSource(()=>{},()=>e.TimelineState.LAYOUT_RENDER_CHANGE,()=>{},()=>e.TimelineState.LAYOUT_RENDER_CHANGE,()=>e.TimelineState.LAYOUT_RENDER_CHANGE)}AfterChangeProperty(){const f=this._numericInterpolationAdapter,g=this._numericInterpolationAdapter.GetPropertyTrack(),h=g.GetPropertyName();f._PickResultMode(()=>{},()=>{const m=g.GetInstance();if(d.has(m)){var k=d.get(m),a=g.GetSourceAdapterId();if(k.has(a)){var b=k.get(a);if(b.has(h)){var l=b.get(h),p=l.value;l.used&&f._SetterAbsolute(p);
b.delete(h);0===b.size&&k.delete(a);0===k.size&&d.delete(m)}}}})}_MaybeEnsureValue(f,g,h,m,k,a){const b=this._numericInterpolationAdapter;m||(g&&f===g.GetTime()?b._AddDelta(g.GetValueWithResultMode(),g,h):h&&f===h.GetTime()?b._AddDelta(h.GetValueWithResultMode(),g,h):0===a-k&&b._AddDelta(g.GetValueWithResultMode(),g,h))}}e.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTimeline=c}"use strict";
{const e=self.C3;new Map;class d{constructor(c){this._numericInterpolationAdapter=c}Release(){this._numericInterpolationAdapter=null}SetInitialState(){const c=this._numericInterpolationAdapter;c.SetFirstAbsoluteUpdate(!0);return this._GetAbsoluteInitialValue(c._FirstKeyframeGetter())}SetResumeState(){const c=this._numericInterpolationAdapter;if(c._FirstKeyframeGetter()!==c._CurrentKeyframeGetter())return c.SetFirstAbsoluteUpdate(!0),this._GetAbsoluteInitialValue(c._CurrentKeyframeGetter())}BeforeChangeProperty(){}ChangeProperty(c,
f,g,h,m,k){const a=this._numericInterpolationAdapter,b=a.GetLastValue();a._PickResultMode(()=>{a._Setter(f-b,g,h);k&&this._MaybeEnsureValue(c,g,h,m,b,f)},()=>{a._PickFirstAbsoluteUpdate(()=>{a._Setter(b,g,h)},()=>{a._Setter(f-b,g,h);k&&this._MaybeEnsureValue(c,g,h,m,b,f)})});a.SetLastValue(f);return a._PickSource(()=>{},()=>e.TimelineState.LAYOUT_RENDER_CHANGE,()=>{},()=>e.TimelineState.LAYOUT_RENDER_CHANGE,()=>e.TimelineState.LAYOUT_RENDER_CHANGE)}AfterChangeProperty(){}_GetAbsoluteInitialValue(c){return c-
this._numericInterpolationAdapter.GetCurrentState()}_MaybeEnsureValue(c,f,g,h,m,k){const a=this._numericInterpolationAdapter;h?f&&c===f.GetTime()?a._AddDelta(f.GetValueWithResultMode(),f,g):g&&c===g.GetTime()?a._AddDelta(g.GetValueWithResultMode(),f,g):g||a._AddDelta(f.GetValueWithResultMode(),f,g):f&&c===f.GetTime()?a._AddDelta(f.GetValueWithResultMode(),f,g):g&&c===g.GetTime()?a._AddDelta(g.GetValueWithResultMode(),f,g):0===k-m&&a._AddDelta(f.GetValueWithResultMode(),f,g)}}e.PropertyTrackState.PropertyInterpolationAdapter.NumericInterpolationAdapterForTween=
d}"use strict";
{const e=self.C3,d=self.Ease;e.PropertyTrackState.NumericTypeAdapter=class{constructor(){}static WillChange(c,f,g,h){let m;switch(h){case "behavior":m=f.GetPropertyValueByIndex(c);break;case "effect":m=f[c];break;case "instance-variable":m=f.GetInstanceVariableValue(c);break;case "plugin":m=f.GetPropertyValueByIndex(c)}return m===g?!1:!0}static Interpolate(c,f,g,h){if(!g)return g=h.GetPropertyTrackDataItem(),g=h.GetPropertyTrackData().GetLastPropertyKeyframeDataItem(g),g.GetValueWithResultMode();var m=
h.GetInterpolationMode();"default"===m&&(m="continuous");"combo"===h.GetPropertyType()&&(m="discrete");if("discrete"===m)return f.GetValueWithResultMode();if("continuous"===m||"step"===m){"step"===m&&(m=h.GetTimeline().GetStep(),0!==m&&(m=1/m,c=Math.floor(c*m)/m));var k=f.GetTime();const a=g.GetTime();m=f.GetValueWithResultMode();const b=g.GetValueWithResultMode();if(m===b)return m;c=e.normalize(c,k,a);const l=f.GetEase();f=f.GetAddOn("cubic-bezier");g=g.GetAddOn("cubic-bezier");f&&f.GetStartEnable()&&
g&&g.GetEndEnable()?(k=a-k,k=d.GetRuntimeEase(l)(k*c,0,1,k),k=d.GetRuntimeEase("cubicbezier")(k,m,m+f.GetStartAnchor(),b+g.GetEndAnchor(),b)):k=d.GetRuntimeEase(l)((a-k)*c,m,b-m,a-k);return"integer"===h.GetPropertyType()?Math.floor(k):k}}}}"use strict";
{const e=self.C3;e.PropertyTrackState.AngleTypeAdapter=class{constructor(){}static WillChange(d,c,f,g){let h;switch(g){case "behavior":h=c.GetPropertyValueByIndex(d);break;case "effect":h=c[d];break;case "instance-variable":h=c.GetInstanceVariableValue(d);break;case "plugin":h=c.GetPropertyValueByIndex(d)}return h===f?!1:!0}static Interpolate(d,c,f,g){if(!f)return c=g.GetPropertyTrackDataItem(),c=g.GetPropertyTrackData().GetLastPropertyKeyframeDataItem(c),c.GetValueWithResultMode();var h=g.GetInterpolationMode();
"default"===h&&(h="continuous");"combo"===g.GetPropertyType()&&(h="discrete");if("discrete"===h)return c.GetValueWithResultMode();if("continuous"===h||"step"===h){"step"===h&&(g=g.GetTimeline().GetStep(),0!==g&&(g=1/g,d=Math.floor(d*g)/g));const m=c.GetTime(),k=f.GetTime();g=c.GetValueWithResultMode();f=f.GetValueWithResultMode();if(h=c.GetAddOn("angle")){const a=h.GetRevolutions();if(g===f&&0===a)return g;d=e.normalize(d,m,k);c=self.Ease.GetRuntimeEase(c.GetEase())(d,0,1,1);switch(h.GetDirection()){case "closest":return e.angleLerp(g,
f,c,a);case "clockwise":return e.angleLerpClockwise(g,f,c,a);case "anti-clockwise":return e.angleLerpAntiClockwise(g,f,c,a)}}else{if(g===f)return g;d=e.normalize(d,m,k);c=self.Ease.GetRuntimeEase(c.GetEase());return e.angleLerp(g,f,c(d,0,1,1))}}}}}"use strict";
self.C3.PropertyTrackState.BooleanTypeAdapter=class{constructor(){}static WillChange(e,d,c,f){let g;switch(f){case "behavior":g=d.GetPropertyValueByIndex(e);break;case "effect":g=d[e];break;case "instance-variable":g=d.GetInstanceVariableValue(e);break;case "plugin":g=d.GetPropertyValueByIndex(e)}return!!g===!!c?!1:!0}static Interpolate(e,d,c,f){return c?d.GetValueWithResultMode()?1:0:(e=f.GetPropertyTrackDataItem(),e=f.GetPropertyTrackData().GetLastPropertyKeyframeDataItem(e),e.GetValueWithResultMode()?
1:0)}};"use strict";
{const e=self.C3,d=[0,0,0],c=[0,0,0],f=[0,0,0];e.PropertyTrackState.ColorTypeAdapter=class{constructor(){}static WillChange(g,h,m,k){let a;switch(k){case "behavior":a=h.GetPropertyValueByIndex(g);break;case "effect":a=h[g];break;case "instance-variable":a=h.GetInstanceVariableValue(g);break;case "plugin":a=h.GetPropertyValueByIndex(g)}Array.isArray(m)?(d[0]=m[0],d[1]=m[1],d[2]=m[2]):(f.parseCommaSeparatedRgb(m),d[0]=Math.floor(255*f.getR()),d[1]=Math.floor(255*f.getG()),d[2]=Math.floor(255*f.getB()));
Array.isArray(a)?(c[0]=a[0],c[1]=a[1],c[2]=a[2]):(f.parseCommaSeparatedRgb(a),c[0]=Math.floor(255*f.getR()),c[1]=Math.floor(255*f.getG()),c[2]=Math.floor(255*f.getB()));return d[0]!==c[0]||d[1]!==c[1]||d[2]!==c[2]?!0:!1}static Interpolate(g,h,m,k){if(!m){var a=k.GetPropertyTrackDataItem();a=k.GetPropertyTrackData().GetLastPropertyKeyframeDataItem(a);k=a.GetValueWithResultMode();d[0]=k[0];d[1]=k[1];d[2]=k[2];return d}a=k.GetInterpolationMode();"default"===a&&(a="continuous");if("discrete"===a)return k=
h.GetValueWithResultMode(),d[0]=k[0],d[1]=k[1],d[2]=k[2],d;if("continuous"===a||"step"===a){"step"===a&&(k=k.GetTimeline().GetStep(),0!==k&&(k=1/k,g=Math.floor(g*k)/k));k=h.GetTime();a=m.GetTime();var b=h.GetValueWithResultMode(),l=m.GetValueWithResultMode();g=e.normalize(g,k,a);var p=h.GetEase();h=b[0];m=b[1];b=b[2];const r=l[0],t=l[1];l=l[2];p=self.Ease.GetRuntimeEase(p);k=a-k;a=k*g;d[0]=h===r?h:p(a,h,r-h,k);d[1]=m===t?m:p(a,m,t-m,k);d[2]=b===l?b:p(a,b,l-b,k);return d}}}}"use strict";
self.C3.PropertyTrackState.TextTypeAdapter=class{constructor(){}static WillChange(e,d,c,f){let g;switch(f){case "behavior":g=d.GetPropertyValueByIndex(e);break;case "effect":g=d[e];break;case "instance-variable":g=d.GetInstanceVariableValue(e);break;case "plugin":g=d.GetPropertyValueByIndex(e)}return g===c?!1:!0}static Interpolate(e,d,c,f){return c?d.GetValueWithResultMode():(e=f.GetPropertyTrackDataItem(),e=f.GetPropertyTrackData().GetLastPropertyKeyframeDataItem(e),e.GetValueWithResultMode())}};
"use strict";
{const e=self.C3;e.TimelineDataManager=class{constructor(){this._timelineDataItems=new Map}Release(){for(const d of this._timelineDataItems.values())d.Release();this._timelineDataItems.clear();this._timelineDataItems=null}Add(d){d=new e.TimelineDataItem(d);const c=d.GetName();this._timelineDataItems.set(c,d)}Get(d){return this._timelineDataItems.get(d)}GetNameId(){return 0}static _CreateDataItems(d,c,f,g){if(c)for(const h of c)e.TimelineDataManager._CreateDataItem("create",h,d,f,g)}static _LoadDataItemsFromJson(d,c,
f,g){d.length?c.forEach((h,m)=>{d[m]._LoadFromJson(h)}):c.forEach(h=>{e.TimelineDataManager._CreateDataItem("load",h,d,f,g)})}static _CreateDataItem(d,c,f,g,h){let m;if("function"===typeof g)switch(d){case "load":m=new g(null,h);break;case "create":m=new g(c,h)}else if("object"===typeof g)switch(g=g.map.get(c[g.prop]),d){case "load":m=new g(null,h);break;case "create":m=new g(c,h)}switch(d){case "load":m._LoadFromJson(c);f.push(m);break;case "create":if("function"===typeof m.GetEnable&&!m.GetEnable())return m.Release();
f.push(m)}}}}"use strict";
{const e=self.C3;e.TimelineDataItem=class{constructor(d){this._name="";this._totalTime=NaN;this._step=0;this._resultMode=this._interpolationMode="default";this._pingPong=this._loop=!1;this._repeatCount=1;this._trackData=null;d&&(this._name=d[0],this._totalTime=d[1],this._step=d[2],this._interpolationMode=d[3],this._resultMode=d[4],this._loop=!!d[6],this._pingPong=!!d[7],this._repeatCount=d[8],this._trackData=new e.TrackData(d[5],this))}Release(){this._trackData.Release();this._trackData=null}GetTrackData(){this._trackData||
(this._trackData=new e.TrackData(null,this));return this._trackData}GetName(){return this._name}SetName(d){this._name=d}GetTotalTime(){return this._totalTime}SetTotalTime(d){this._totalTime=d}GetStep(){return this._step}SetStep(d){this._step=d}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(d){this._interpolationMode=d}GetResultMode(){return this._resultMode}SetResultMode(d){this._resultMode=d}GetLoop(){return this._loop}SetLoop(d){this._loop=d}GetPingPong(){return this._pingPong}SetPingPong(d){this._pingPong=
d}GetRepeatCount(){return this._repeatCount}_SaveToJson(){return{trackDataJson:this._trackData._SaveToJson(),name:this._name,totalTime:this._totalTime,step:this._step,interpolationMode:this._interpolationMode,resultMode:this._resultMode,loop:this._loop,pingPong:this._pingPong,repeatCount:this._repeatCount}}_LoadFromJson(d){d&&(this.GetTrackData()._LoadFromJson(d.trackDataJson),this._name=d.name,this._totalTime=d.totalTime,this._step=d.step,this._interpolationMode=d.interpolationMode,this._resultMode=
d.resultMode,this._loop=d.loop,this._pingPong=d.pingPong,this._repeatCount=d.repeatCount)}}}"use strict";
{const e=self.C3;class d{constructor(c,f){this._trackData=f;this._additionalInstanceData=this._instanceData=null;this._objectClassIndex=this._instanceUid=NaN;this._resultMode=this._interpolationMode="default";this._enabled=!1;this._propertyTrackData=this._keyframeData=null;this._id="";this._nestedData=null;this._startOffset=0;this._localTotalTime=this._trackData.GetTimelineDataItem().GetTotalTime();c&&(this._instanceData=c[0],this._instanceUid=c[0][2],this._objectClassIndex=c[0][1],this._interpolationMode=
c[1],this._resultMode=c[2],this._enabled=!!c[3],c[6]&&(this._id=c[6]),c[7]&&(this._nestedData=c[7],this._startOffset=c[7][0],this._localTotalTime=c[7][1]),c[8]&&(this._additionalInstanceData=c[8]),this._keyframeData=new e.KeyframeData(c[4],this),this._propertyTrackData=new e.PropertyTrackData(c[5],this))}Release(){this._trackData=this._instanceData=null;this._keyframeData&&(this._keyframeData.Release(),this._keyframeData=null);this._propertyTrackData&&(this._propertyTrackData.Release(),this._propertyTrackData=
null);this._nestedData=null}GetTrackData(){return this._trackData}GetKeyframeData(){this._keyframeData||(this._keyframeData=new e.KeyframeData(null,this));return this._keyframeData}GetPropertyTrackData(){this._propertyTrackData||(this._propertyTrackData=new e.PropertyTrackData(null,this));return this._propertyTrackData}GetInstanceData(){return this._instanceData}GetObjectClassIndex(){return this._objectClassIndex}SetObjectClassIndex(c){this._objectClassIndex=c}GetInstanceUID(){return this._instanceUid}SetInstanceUID(c){this._instanceUid=
c}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(c){this._interpolationMode=c}GetResultMode(){return this._resultMode}SetResultMode(c){this._resultMode=c}GetEnable(){return this._enabled}SetEnable(c){this._enabled=!!c}GetId(){return this._id}GetStartOffset(){return this._startOffset}GetLocalTotalTime(){return this._localTotalTime}GetOriginalWidth(){return this._additionalInstanceData[0]}SetOriginalWidth(c){this._additionalInstanceData||(this._additionalInstanceData=[]);
this._additionalInstanceData[0]=c}GetOriginalHeight(){this._additionalInstanceData||(this._additionalInstanceData=[]);return this._additionalInstanceData[1]}SetOriginalHeight(c){this._additionalInstanceData||(this._additionalInstanceData=[]);this._additionalInstanceData[1]=c}_SaveToJson(){return{keyframeDataJson:this._keyframeData._SaveToJson(),propertyTrackDataJson:this._propertyTrackData._SaveToJson(),instanceData:this._instanceData,additionalInstanceData:this._additionalInstanceData,instanceUid:this._instanceUid,
objectClassIndex:this._objectClassIndex,interpolationMode:this._interpolationMode,resultMode:this._resultMode,enabled:this._enabled,id:this._id,nestedData:this._nestedData}}_LoadFromJson(c){c&&(this._instanceData=c.instanceData,this._instanceUid=c.instanceUid,this._objectClassIndex=c.objectClassIndex,this._interpolationMode=c.interpolationMode,this._resultMode=c.resultMode,this._enabled=c.enabled,this._id=c.id,this._localTotalTime=this._trackData.GetTimelineDataItem().GetTotalTime(),c.nestedData&&
(this._nestedData=c.nestedData,this._startOffset=this._nestedData[0],this._localTotalTime=this._nestedData[1]),c.additionalInstanceData&&(this._additionalInstanceData=c.additionalInstanceData),this.GetKeyframeData()._LoadFromJson(c.keyframeDataJson),this.GetPropertyTrackData()._LoadFromJson(c.propertyTrackDataJson))}}e.TrackData=class{constructor(c,f){this._timelineDataItem=f;this._trackDataItems=[];this._keyframeTimeMap=new Map;e.TimelineDataManager._CreateDataItems(this._trackDataItems,c,d,this)}Release(){this._timelineDataItem=
null;for(const c of this._trackDataItems)c.Release();e.clearArray(this._trackDataItems);this._trackDataItems=null;this._keyframeTimeMap.clear();this._keyframeTimeMap=null}GetTimelineDataItem(){return this._timelineDataItem}AddEmptyTrackDataItem(){const c=new d(null,this);this._trackDataItems.push(c);return c}GetFirstKeyframeDataItem(c){return c.GetKeyframeData().GetKeyframeDataItemArray()[0]}GetLastKeyframeDataItem(c){c=c.GetKeyframeData().GetKeyframeDataItemArray();return c[c.length-1]}GetKeyFrameDataItemAtTime(c,
f){const g=this._keyframeTimeMap.get(f);if(g&&g.has(c))return g.get(c);for(const h of f.GetKeyframeData().keyframeDataItems())if(h.GetTime()===c)return g||this._keyframeTimeMap.set(f,new Map),this._keyframeTimeMap.get(f).set(c,h),h}GetFirstKeyFrameDataItemHigherThan(c,f){for(const g of f.GetKeyframeData().keyframeDataItems())if(g.GetTime()>c)return g}GetFirstKeyFrameDataItemHigherOrEqualThan(c,f){for(const g of f.GetKeyframeData().keyframeDataItems())if(g.GetTime()>=c)return g}GetFirstKeyFrameDataItemLowerOrEqualThan(c,
f){for(const g of f.GetKeyframeData().keyframeDataItemsReverse())if(g.GetTime()<=c)return g}*trackDataItems(){for(const c of this._trackDataItems)yield c}_SaveToJson(){return{trackDataItemsJson:this._trackDataItems.map(c=>c._SaveToJson())}}_LoadFromJson(c){c&&e.TimelineDataManager._LoadDataItemsFromJson(this._trackDataItems,c.trackDataItemsJson,d,this)}}}"use strict";
{const e=self.C3;class d{constructor(c,f){this._propertyTrackData=f;this._sourceAdapterId="";this._type=this._property=this._sourceAdapterArguments=null;this._max=this._min=NaN;this._resultMode=this._interpolationMode="default";this._enabled=!1;this._propertyKeyframeData=null;c&&(this._sourceAdapterId=c[0][0],this._sourceAdapterArguments=c[0].slice(1),this._property=c[1],this._type=c[2],this._min=c[3],this._max=c[4],this._interpolationMode=c[5],this._resultMode=c[6],this._enabled=!!c[7],this._propertyKeyframeData=
new e.PropertyKeyframeData(c[8],this))}Release(){this._propertyKeyframeData.Release();this._sourceAdapterArguments=this._propertyTrackData=this._propertyKeyframeData=null}GetPropertyTrackData(){return this._propertyTrackData}GetPropertyKeyframeData(){this._propertyKeyframeData||(this._propertyKeyframeData=new e.PropertyKeyframeData(null,this));return this._propertyKeyframeData}GetSourceAdapterId(){return this._sourceAdapterId}SetSourceAdapterId(c){this._sourceAdapterId=c}GetSourceAdapterArguments(){return this._sourceAdapterArguments}SetSourceAdapterArguments(c){this._sourceAdapterArguments=
c}GetProperty(){return this._property}SetProperty(c){this._property=c}GetType(){return this._type}SetType(c){this._type=c}GetMin(){return this._min}SetMin(c){this._min=c}GetMax(){return this._max}SetMax(c){this._max=c}GetInterpolationMode(){return this._interpolationMode}SetInterpolationMode(c){this._interpolationMode=c}GetResultMode(){return this._resultMode}SetResultMode(c){this._resultMode=c}GetEnable(){return this._enabled}SetEnable(c){this._enabled=!!c}_SaveToJson(){return{propertyKeyframeDataJson:this._propertyKeyframeData._SaveToJson(),
sourceAdapterId:this._sourceAdapterId,sourceAdapterArguments:this._sourceAdapterArguments,property:this._property,type:this._type,min:this._min,max:this._max,interpolationMode:this._interpolationMode,resultMode:this._resultMode,enabled:this._enabled}}_LoadFromJson(c){c&&(this._sourceAdapterId=c.sourceAdapterId,this._sourceAdapterArguments=c.sourceAdapterArguments,this._property=c.property,this._type=c.type,this._min=c.min,this._max=c.max,this._interpolationMode=c.interpolationMode,this._resultMode=
c.resultMode,this._enabled=c.enabled,this.GetPropertyKeyframeData()._LoadFromJson(c.propertyKeyframeDataJson))}}e.PropertyTrackData=class{constructor(c,f){this._trackDataItem=f;this._propertyTrackDataItems=[];this._propertyKeyframeTimeMap=new Map;e.TimelineDataManager._CreateDataItems(this._propertyTrackDataItems,c,d,this)}Release(){this._trackDataItem=null;for(const c of this._propertyTrackDataItems)c.Release();e.clearArray(this._propertyTrackDataItems);this._propertyTrackDataItems=null;this._propertyKeyframeTimeMap.clear();
this._propertyKeyframeTimeMap=null}GetTrackDataItem(){return this._trackDataItem}AddEmptyPropertyTrackDataItem(){const c=new d(null,this);this._propertyTrackDataItems.push(c);return c}GetFirstPropertyKeyframeDataItem(c){return c.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray()[0]}GetLastPropertyKeyframeDataItem(c){c=c.GetPropertyKeyframeData().GetPropertyKeyframeDataItemArray();return c[c.length-1]}GetPropertyKeyFrameDataItemAtTime(c,f){const g=this._propertyKeyframeTimeMap.get(f);if(g&&
g.has(c))return g.get(c);const h=f.GetPropertyKeyframeData();for(const m of h.propertyKeyframeDataItems())if(m.GetTime()===c)return g||this._propertyKeyframeTimeMap.set(f,new Map),this._propertyKeyframeTimeMap.get(f).set(c,m),m}GetFirstPropertyKeyFrameDataItemHigherThan(c,f){f=f.GetPropertyKeyframeData();for(const g of f.propertyKeyframeDataItems())if(g.GetTime()>c)return g}GetFirstPropertyKeyFrameDataItemHigherOrEqualThan(c,f){f=f.GetPropertyKeyframeData();for(const g of f.propertyKeyframeDataItems())if(g.GetTime()>=
c)return g}GetFirstPropertyKeyFrameDataItemLowerOrEqualThan(c,f){f=f.GetPropertyKeyframeData();for(const g of f.propertyKeyframeDataItemsReverse())if(g.GetTime()<=c)return g}*propertyTrackDataItems(){for(const c of this._propertyTrackDataItems)yield c}_SaveToJson(){return{propertyTrackDataItemsJson:this._propertyTrackDataItems.map(c=>c._SaveToJson())}}_LoadFromJson(c){c&&e.TimelineDataManager._LoadDataItemsFromJson(this._propertyTrackDataItems,c.propertyTrackDataItemsJson,d,this)}}}"use strict";
{const e=self.C3;class d{constructor(c,f){this._keyframeData=f;this._time=-1;this._ease="noease";this._enable=!1;this._lowerTags=this._tags=null;c&&(this._time=c[0],this._ease=c[1],this._enable=!!c[2],this._tags=(c=c[3])?c.split(" "):[],this._lowerTags=new Set(this._tags.map(g=>g.toLowerCase())))}Release(){this._keyframeData=null;e.clearArray(this._tags);this._tags=null;this._lowerTags.clear();this._lowerTags=null}GetKeyframeData(){return this._keyframeData}GetTime(){return this._time}SetTime(c){this._time=
c}GetEase(){return this._ease}SetEase(c){this._ease=c}GetEnable(){return this._enable}SetEnable(c){this._enable=!!c}GetTags(){return this._tags}SetTags(c){this._tags=c?c.split(" "):[];this._lowerTags=new Set(this._tags.map(f=>f.toLowerCase()))}GetLowerTags(){return this._lowerTags}HasTag(c){return this._lowerTags.has(c.toLowerCase())}_SaveToJson(){return{time:this._time,ease:this._ease,enable:this._enable,tags:this._tags}}_LoadFromJson(c){c&&(this._time=c.time,this._ease=c.ease,this._enable=c.enable,
this._tags=c.tags,this._lowerTags=new Set(this._tags.map(f=>f.toLowerCase())))}}e.KeyframeData=class{constructor(c,f){this._trackDataItem=f;this._keyframeDataItems=[];e.TimelineDataManager._CreateDataItems(this._keyframeDataItems,c,d,this)}Release(){this._trackDataItem=null;for(const c of this._keyframeDataItems)c.Release();e.clearArray(this._keyframeDataItems);this._keyframeDataItems=null}GetTrackDataItem(){return this._trackDataItem}GetKeyframeDataItemCount(){return this._keyframeDataItems.length}GetKeyframeDataItemArray(){return this._keyframeDataItems}AddEmptyKeyframeDataItem(){const c=
new d(null,this);this._keyframeDataItems.push(c);return c}DeleteKeyframeDataItems(c){for(const f of this._keyframeDataItems){if(!c(f))continue;const g=this._keyframeDataItems.indexOf(f);-1!==g&&(f.Release(),this._keyframeDataItems.splice(g,1))}this.SortKeyframeDataItems()}SortKeyframeDataItems(){this._keyframeDataItems.sort((c,f)=>c.GetTime()-f.GetTime())}GetKeyframeDataItemIndex(c){return this._keyframeDataItems.indexOf(c)}GetKeyframeDataItemFromIndex(c){return this._keyframeDataItems[c]}*keyframeDataItems(){for(const c of this._keyframeDataItems)yield c}*keyframeDataItemsReverse(){for(let c=
this._keyframeDataItems.length-1;0<=c;c--)yield this._keyframeDataItems[c]}_SaveToJson(){return{keyframeDataItemsJson:this._keyframeDataItems.map(c=>c._SaveToJson())}}_LoadFromJson(c){c&&e.TimelineDataManager._LoadDataItemsFromJson(this._keyframeDataItems,c.keyframeDataItemsJson,d,this)}}}"use strict";
{const e=self.C3;class d{constructor(c,f){this._propertyKeyframeData=f;this._aValue=this._value=null;this._type="";this._time=NaN;this._ease="noease";this._enable=!1;this._addonData=null;c&&(this._value=c[0][0],this._aValue=c[0][1],this._type=c[0][2],this._time=c[1],this._ease=c[2],this._enable=!!c[3],this._addonData=null,c[4]&&(this._addonData=new e.AddonData(c[4],this)))}Release(){this._propertyKeyframeData=null;this._addonData&&(this._addonData.Release(),this._addonData=null)}GetAddonData(){return this._addonData}GetValue(){return this._value}SetValue(c){"color"===
this._type&&e.IsFiniteNumber(c)?(this._value[0]=e.GetRValue(c),this._value[1]=e.GetGValue(c),this._value[2]=e.GetBValue(c)):this._value=c}GetAbsoluteValue(){return this._aValue}SetAbsoluteValue(c){"color"===this._type&&e.IsFiniteNumber(c)?(this._aValue[0]=e.GetRValue(c),this._aValue[1]=e.GetGValue(c),this._aValue[2]=e.GetBValue(c)):this._aValue=c}GetValueWithResultMode(){const c=this._propertyKeyframeData.GetPropertyTrackDataItem().GetResultMode();if("relative"===c)return this.GetValue();if("absolute"===
c)return this.GetAbsoluteValue()}GetType(){return this._type}SetType(c){this._type=c}GetTime(){return this._time}SetTime(c){this._time=c}GetEase(){return this._ease}SetEase(c){this._ease=c}GetEnable(){return this._enable}SetEnable(c){this._enable=!!c}GetAddOn(c){if(this.GetAddonData())for(const f of this.GetAddonData().addonDataItems())if(f.GetId()===c)return f}_SaveToJson(){const c=this._addonData;return{addonDataJson:c?c._SaveToJson():c,value:this._value,aValue:this._aValue,type:this._type,time:this._time,
ease:this._ease,enable:this._enable}}_LoadFromJson(c){c&&(c.addonDataJson&&this._addonData._SetFromJson(c.addonDataJson),this._value=c.value,this._aValue=c.aValue,this._type=c.type,this._time=c.time,this._ease=c.ease,this._enable=c.enable)}}e.PropertyKeyframeData=class{constructor(c,f){this._propertyTrackDataItem=f;this._propertyKeyframeDataItems=[];e.TimelineDataManager._CreateDataItems(this._propertyKeyframeDataItems,c,d,this)}Release(){this._propertyTrackDataItem=null;for(const c of this._propertyKeyframeDataItems)c.Release();
e.clearArray(this._propertyKeyframeDataItems);this._propertyKeyframeDataItems=null}AddEmptyPropertyKeyframeDataItem(){const c=new d(null,this);this._propertyKeyframeDataItems.push(c);return c}DeletePropertyKeyframeDataItems(c){for(const f of this._propertyKeyframeDataItems){if(!c(f))continue;const g=this._propertyKeyframeDataItems.indexOf(f);-1!==g&&(f.Release(),this._propertyKeyframeDataItems.splice(g,1))}this.SortPropertyKeyFrameDataItems()}SortPropertyKeyFrameDataItems(){this._propertyKeyframeDataItems.sort((c,
f)=>c.GetTime()-f.GetTime())}GetPropertyTrackDataItem(){return this._propertyTrackDataItem}GetPropertyKeyframeDataItemCount(){return this._propertyKeyframeDataItems.length}GetPropertyKeyframeDataItemArray(){return this._propertyKeyframeDataItems}*propertyKeyframeDataItems(){for(const c of this._propertyKeyframeDataItems)yield c}*propertyKeyframeDataItemsReverse(){for(let c=this._propertyKeyframeDataItems.length-1;0<=c;c--)yield this._propertyKeyframeDataItems[c]}_SaveToJson(){return{propertyKeyframeDataItemsJson:this._propertyKeyframeDataItems.map(c=>
c._SaveToJson())}}_LoadFromJson(c){c&&e.TimelineDataManager._LoadDataItemsFromJson(this._propertyKeyframeDataItems,c.propertyKeyframeDataItemsJson,d,this)}}}"use strict";
{const e=self.C3;class d{constructor(g,h){this._addonData=h;this._id=g[0];this._data=g[1]}Release(){this._data=this._addonData=null}GetAddonData(){return this._addonData}GetId(){return this._id}_SaveToJson(){return{id:this._id,data:this._data}}_LoadFromJson(g){g&&(this._id=g.id,this._data=g.data)}}class c extends d{constructor(g,h){super(g,h);this._startAnchor=this._data[0];this._startEnable=!!this._data[1];this._endAnchor=this._data[2];this._endEnable=!!this._data[3]}Release(){super.Release()}GetStartAnchor(){return this._startAnchor}GetStartEnable(){return this._startEnable}GetEndAnchor(){return this._endAnchor}GetEndEnable(){return this._endEnable}_SaveToJson(){return Object.assign(super._SaveToJson(),
{startAnchor:this._startAnchor,startEnable:!!this._startEnable,endAnchor:this._endAnchor,endEnable:!!this._endEnable})}_LoadFromJson(g){g&&(super._LoadFromJson(g),this._startAnchor=g.startAnchor,this._startEnable=!!g.startEnable,this._endAnchor=g.endAnchor,this._endEnable=!!g.endEnable)}}class f extends d{constructor(g,h){super(g,h);this._direction=this._data[0];this._revolutions=this._data[1]}Release(){super.Release()}GetDirection(){return this._direction}GetRevolutions(){return this._revolutions}_SaveToJson(){return Object.assign(super._SaveToJson(),
{direction:this._direction,revolutions:this._revolutions})}_LoadFromJson(g){g&&(super._LoadFromJson(g),this._direction=g.direction,this._revolutions=g.revolutions)}}e.AddonData=class{constructor(g,h){this._propertyKeyframeDataItem=h;this._addonDataItems=[];e.TimelineDataManager._CreateDataItems(this._addonDataItems,g,{prop:0,map:new Map([["cubic-bezier",c],["angle",f]])},this)}Release(){this._propertyKeyframeDataItem=null;for(const g of this._addonDataItems)g.Release();e.clearArray(this._addonDataItems);
this._addonDataItems=null}GetPropertyKeyframeDataItem(){return this._propertyKeyframeDataItem}*addonDataItems(){for(const g of this._addonDataItems)yield g}_SaveToJson(){return{addonDataItemsJson:this._addonDataItems.map(g=>g._SaveToJson())}}_LoadFromJson(g){g&&e.TimelineDataManager._LoadDataItemsFromJson(this._addonDataItems,g.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",c],["angle",f]])},this)}}}"use strict";
{const e=self.C3;let d=0;e.Tween=class extends e.TimelineState{constructor(c,f){super(`tween-${d++}`,c,f);this._id="";this._destroyInstanceOnComplete=!1;this._initialValueMode="start-value";this._on_started_callbacks=this._on_completed_callbacks=null}GetInstance(){var c=this.GetTracks();if(c&&c.length&&(c=c[0])){var f=c.GetInstance();return c.IsInstanceValid()?f:null}}AddStartedCallback(c){this._on_started_callbacks||(this._on_started_callbacks=[]);this._on_started_callbacks.push(c)}AddCompletedCallback(c){this._on_completed_callbacks||
(this._on_completed_callbacks=[]);this._on_completed_callbacks.push(c)}RemoveStartedCallback(c){this._on_started_callbacks&&(c=this._on_started_callbacks.indexOf(c),-1!==c&&this._on_started_callbacks.splice(c,1))}RemoveCompletedCallback(c){this._on_completed_callbacks&&(c=this._on_completed_callbacks.indexOf(c),-1!==c&&this._on_completed_callbacks.splice(c,1))}SetStartValue(c,f){for(const h of this._tracks)for(const m of h._propertyTracks){if(m.GetPropertyName()!==f)continue;var g=m.GetPropertyTrackData();
const k=m.GetPropertyTrackDataItem();g=g.GetFirstPropertyKeyframeDataItem(k);g.SetValue(c);g.SetAbsoluteValue(c)}}_GetPropertyTrackState(c){for(const f of this._tracks)for(const g of f._propertyTracks)if(g.GetPropertyName()===c)return g}BeforeSetEndValues(c){for(const f of c)c=this._GetPropertyTrackState(f),this.SetStartValue(c.GetCurrentState(),f);this.IsForwardPlayBack()?(this.SetTotalTime(this.GetTotalTime()-this.GetTime()),this._SetTime(0)):(this.SetTotalTime(this.GetTime()),this._SetTime(this.GetTotalTime()));
this.SetInitialStateFromSetTime()}SetEndValue(c,f){var g=this._GetPropertyTrackState(f);f=g.GetPropertyTrackData();g=g.GetPropertyTrackDataItem();f=f.GetLastPropertyKeyframeDataItem(g);f.SetTime(this.GetTotalTime());f.SetValue(c);f.SetAbsoluteValue(c)}SetId(c){this._id=c}GetId(){return this._id}SetInitialValueMode(c){this._initialValueMode=c}GetInitialValueMode(){return this._initialValueMode}SetDestroyInstanceOnComplete(c){this._destroyInstanceOnComplete=c}GetDestroyInstanceOnComplete(){return this._destroyInstanceOnComplete}OnStarted(){if(this._on_started_callbacks)for(const c of this._on_started_callbacks)c(this);
if(!this.IsComplete())for(const c of this._tracks)c.CompareSaveStateWithCurrent()}OnCompleted(){this._completedTick=this._runtime.GetTickCount()}FinishTriggers(){if(!this._finishedTriggers&&(this._finishedTriggers=!0,this._on_completed_callbacks))for(const c of this._on_completed_callbacks)c(this)}SetTime(c){this._DeleteIntermediateKeyframes();super.SetTime(c)}SetInitialState(c){if(!this.InitialStateSet()&&"current-state"===this.GetInitialValueMode())for(const f of this._tracks)f.CompareInitialStateWithCurrent();
super.SetInitialState(c)}Stop(c=!1){super.Stop(c);if(!this.IsComplete())for(const f of this._tracks)f.SaveState()}Reset(c=!0,f=!1){this._DeleteIntermediateKeyframes();super.Reset(c,f)}_DeleteIntermediateKeyframes(){for(const c of this._tracks){const f=g=>{g=g.GetTime();const h=this.GetTotalTime();return 0!==g&&g!==h};c.DeleteKeyframes(f);c.DeletePropertyKeyframes(f)}}_OnBeforeChangeLayout(){if(this.IsReleased())return!0;const c=this.GetInstance();if(c&&c.GetObjectClass().IsGlobal())return!1;this._timelineManager.CompleteTimeline(this);
this.ResetBeforeChangeLayout();return!0}MaybeTriggerKeyframeReachedConditions(){}Tick(c,f){c=this.GetInstance();c=this.GetRuntime().GetDt(c);super.Tick(c,1)}_SaveToJson(){const c=super._SaveToJson(),f=this.GetTimelineDataItem();return Object.assign(c,{tweenDataItemJson:f._SaveToJson(),id:this._id,destroyInstanceOnComplete:this._destroyInstanceOnComplete,initialValueMode:this._initialValueMode})}_LoadFromJson(c){c&&(this.GetTimelineDataItem()._LoadFromJson(c.tweenDataItemJson),super._LoadFromJson(c),
this._id=c.id,this._destroyInstanceOnComplete=c.destroyInstanceOnComplete,this._initialValueMode=c.initialValueMode)}static IsPlaying(c){return c.IsPlaying()}static IsPaused(c){return c.IsPaused()}static Build(c){var f=c.runtime.GetTimelineManager(),g=new e.TimelineDataItem;if(c.json){g._LoadFromJson(c.json.tweenDataItemJson);var h=new e.Tween(g,f);h._LoadFromJson(c.json);return h}f=new e.Tween(g,f);e.IsArray(c.propertyTracksConfig)||(c.propertyTracksConfig=[c.propertyTracksConfig]);f.SetId(c.id);
f.SetTags(c.tags);f.SetInitialValueMode(c.initialValueMode);f.SetDestroyInstanceOnComplete(c.releaseOnComplete);f.SetLoop(c.loop);f.SetPingPong(c.pingPong);f.SetTotalTime(c.time);f.SetStep(0);f.SetInterpolationMode("default");f.SetResultMode(c.propertyTracksConfig[0].resultMode);g=f.AddTrack();g.SetInstanceUID(c.instance.GetUID());g.SetInterpolationMode("default");g.SetResultMode(c.propertyTracksConfig[0].resultMode);g.SetEnable(!0);g.SetObjectClassIndex(c.instance.GetObjectClass().GetIndex());g.SetOriginalWidth(c.instance.GetWorldInfo().GetWidth());
g.SetOriginalHeight(c.instance.GetWorldInfo().GetHeight());var m=g.AddKeyframe();m.SetTime(0);m.SetEase("noease");m.SetEnable(!0);m.SetTags("");m=g.AddKeyframe();m.SetTime(c.time);m.SetEase("noease");m.SetEnable(!0);m.SetTags("");for(h of c.propertyTracksConfig){m=g.AddPropertyTrack();m.SetSourceAdapterId(h.sourceId);m.SetSourceAdapterArgs(h.sourceArgs);m.SetPropertyName(h.property);m.SetPropertyType(h.type);m.SetMin(NaN);m.SetMax(NaN);m.SetInterpolationMode("default");m.SetResultMode(h.resultMode);
m.SetEnable(!0);const k=m.AddPropertyKeyframe();k.SetType(h.valueType);k.SetTime(0);k.SetEase(h.ease);k.SetEnable(!0);k.SetValue(h.startValue);k.SetAbsoluteValue(h.startValue);m=m.AddPropertyKeyframe();m.SetType(h.valueType);m.SetTime(c.time);m.SetEase(h.ease);m.SetEnable(!0);m.SetValue(h.endValue);m.SetAbsoluteValue(h.endValue)}return f}}}"use strict";
{const e=self.C3,d=self.Ease;e.Transition=class extends e.DefendedBase{constructor(c){super();this._name=c[0];this._transitionKeyframes=[];for(const f of c[1])c=e.TransitionKeyframe.Create(this,f),this._transitionKeyframes.push(c);this._precalculatedSamples=new Map;this._transitionKeyframeCache=new Map;this._PreCalcSamples();d.AddCustomEase(this._name,(f,g,h,m)=>this.Interpolate(f,g,h,m))}static Create(c){return e.New(e.Transition,c)}Release(){for(const c of this._transitionKeyframes)c.Release();
e.clearArray(this._transitionKeyframes);this._transitionKeyframes=null;this._precalculatedSamples.clear();this._precalculatedSamples=null;this._transitionKeyframeCache.clear();this._transitionKeyframeCache=null}GetTransitionKeyFrameAt(c){const f=this._transitionKeyframeCache.get(c);if(f)return f;for(const g of this._transitionKeyframes)if(g.GetValueX()===c)return this._transitionKeyframeCache.set(c,g),g}GetFirstTransitionKeyFrameHigherThan(c){for(const f of this._transitionKeyframes)if(f.GetValueX()>
c)return f}GetFirstTransitionKeyFrameHigherOrEqualThan(c){for(const f of this._transitionKeyframes)if(f.GetValueX()>=c)return f}GetFirstTransitionKeyFrameLowerOrEqualThan(c){for(let f=this._transitionKeyframes.length-1;0<=f;f--){const g=this._transitionKeyframes[f];if(g.GetValueX()<=c)return g}}Interpolate(c,f,g,h){var m=c/h;(c=this.GetTransitionKeyFrameAt(m))?h=this.GetFirstTransitionKeyFrameHigherThan(m):(c=this.GetFirstTransitionKeyFrameLowerOrEqualThan(m),h=this.GetFirstTransitionKeyFrameHigherOrEqualThan(m));
var k=h.GetValueX()-c.GetValueX();m=e.mapToRange(m,c.GetValueX(),h.GetValueX(),0,k);k=c.GetValueX();const a=c.GetValueY(),b=c.GetValueX()+c.GetStartAnchorX(),l=c.GetValueY()+c.GetStartAnchorY(),p=h.GetValueX()+h.GetEndAnchorX(),r=h.GetValueY()+h.GetEndAnchorY(),t=h.GetValueX();h=h.GetValueY();h=d.GetRuntimeEase("spline")(m,k,a,b,l,p,r,t,h,this._precalculatedSamples.get(c));h+=c.GetValueY();return(1-h)*f+h*(f+g)}_PreCalcSamples(){this._precalculatedSamples.clear();for(let g=0;g<this._transitionKeyframes.length-
1;g++){var c=this._transitionKeyframes[g];if(!c.GetStartEnable())continue;var f=this._transitionKeyframes[g+1];const h=c.GetValueX(),m=c.GetValueX()+c.GetStartAnchorX(),k=f.GetValueX()+f.GetEndAnchorX();f=f.GetValueX();this._precalculatedSamples.set(c,d.GetBezierSamples(h,m,k,f))}}}}"use strict";
{const e=self.C3;e.TransitionKeyframe=class extends e.DefendedBase{constructor(d,c){super();this._transition=d;this._valueX=c[0];this._valueY=c[1];this._startAnchorX=c[2];this._startAnchorY=c[3];this._endAnchorX=c[4];this._endAnchorY=c[5];this._startEnable=c[6];this._endEnable=c[7]}Release(){this._transition=null}static Create(d,c){return e.New(e.TransitionKeyframe,d,c)}GetValueX(){return this._valueX}GetValueY(){return this._valueY}GetStartAnchorX(){return this._startAnchorX}GetStartAnchorY(){return this._startAnchorY}GetEndAnchorX(){return this._endAnchorX}GetEndAnchorY(){return this._endAnchorY}GetStartEnable(){return this._startEnable}GetEndEnable(){return this._endEnable}}}"use strict";
{const e=self.C3;e.TransitionManager=class extends e.DefendedBase{constructor(d){super();this._runtime=d;this._transitions=[]}Release(){for(const d of this._transitions)d.Release();e.clearArray(this._transitions);this._transitions=null}Create(d){this._transitions.push(e.Transition.Create(d))}}}"use strict";
{const e=self.C3;e.SolStack=class extends e.DefendedBase{constructor(d){super();this._objectClass=d;this._stack=[];this._stack.push(e.New(e.Sol,this));this._index=0;this._current=this._stack[0]}Release(){for(const d of this._stack)d.Release();e.clearArray(this._stack);this._objectClass=this._current=null}GetObjectClass(){return this._objectClass}GetCurrentSol(){return this._current}Clear(){this.GetCurrentSol().Clear()}PushClean(){var d=this._stack,c=++this._index;c===d.length?(c=e.New(e.Sol,this),
d.push(c),this._current=c):(d=d[c],d.Reset(),this._current=d)}PushCopy(){const d=this._stack,c=++this._index;c===d.length&&d.push(e.New(e.Sol,this));const f=d[c];f.Copy(d[c-1]);this._current=f}Pop(){this._current=this._stack[--this._index]}RemoveInstances(d){const c=this._stack;for(let f=0,g=c.length;f<g;++f)c[f].RemoveInstances(d)}}}"use strict";
{const e=self.C3;e.Sol=class extends e.DefendedBase{constructor(d){super();this._stack=d;this._objectClass=this._stack.GetObjectClass();this._eventStack=this._objectClass.GetRuntime().GetEventStack();this._selectAll=!0;this._instances=[];this._elseInstances=[]}Release(){this.ClearArrays();this._eventStack=this._objectClass=this._stack=null}ClearArrays(){e.clearArray(this._instances);e.clearArray(this._elseInstances)}GetObjectClass(){return this._objectClass}IsSelectAll(){return this._selectAll}HasAnyInstances(){return this._selectAll?
!!this._objectClass.GetInstanceCount():!!this._instances.length}GetInstances(){return this._selectAll?this._objectClass.GetInstances():this._instances}HasAnyElseInstances(){return!!this._elseInstances.length}GetElseInstances(){return this._elseInstances}GetExpressionInstances(){const d=this.GetInstances();return d.length?d:this._elseInstances}Reset(){this._selectAll=!0;e.clearArray(this._elseInstances)}Clear(){this._selectAll=!0}Copy(d){d.IsSelectAll()?this.Reset():(this._selectAll=!1,e.shallowAssignArray(this._instances,
d._instances),e.clearArray(this._elseInstances))}_PushInstance(d){this._instances.push(d)}_PushElseInstance(d){this._elseInstances.push(d)}_SetSelectAll(d){this._selectAll=!!d}_GetOwnInstances(){return this._instances}_GetOwnElseInstances(){return this._elseInstances}SetSinglePicked(d){this._selectAll=!1;e.clearArray(this._instances);this._instances.push(d)}SetArrayPicked(d){this._selectAll=!1;e.shallowAssignArray(this._instances,d)}SetSetPicked(d){this._selectAll=!1;e.clearArray(this._instances);
for(const c of d)this._instances.push(c)}AddElseInstances(d,c){for(const f of c)d.has(f)||this._elseInstances.push(f)}TransferElseInstancesToOwn(d){for(const c of d)this._instances.push(c);e.arrayRemoveAllInSet(this._elseInstances,d)}PickOne(d){d&&(this._eventStack.GetCurrentStackFrame().GetCurrentEvent().IsOrBlock()?(this.IsSelectAll()&&(e.clearArray(this._instances),e.shallowAssignArray(this._elseInstances,d.GetObjectClass().GetInstances()),this._selectAll=!1),d=this._elseInstances.indexOf(d),-1!==
d&&(this._instances.push(this._elseInstances[d]),this._elseInstances.splice(d,1))):this.SetSinglePicked(d))}RemoveInstances(d){e.arrayRemoveAllInSet(this._instances,d);e.arrayRemoveAllInSet(this._elseInstances,d)}}}"use strict";
{const e=self.C3;e.EventStack=class extends e.DefendedBase{constructor(d){super();this._eventSheetManager=d;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._stack.push(e.New(e.EventStackFrame,this,null));this._index=0;this._expFuncStack=[]}Release(){for(const d of this._stack)d.Release();e.clearArray(this._stack);e.clearArray(this._expFuncStack);this._runtime=this._eventSheetManager=null}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetCurrentStackFrame(){return this._stack[this._index]}Push(d){var c=
this._stack;const f=++this._index;if(f===c.length)return d=e.New(e.EventStackFrame,this,d),c.push(d),d;c=c[f];c.Reset(d);return c}Pop(){--this._index}PushExpFunc(d){this._expFuncStack.push(d)}PopExpFunc(){this._expFuncStack.pop()}GetCurrentExpFuncStackFrame(){const d=this._expFuncStack;return 0===d.length?null:d[d.length-1]}}}"use strict";
{const e=self.C3;e.EventStackFrame=class extends e.DefendedBase{constructor(d,c){super();this._stack=d;this._runtime=this._stack.GetRuntime();this._currentEvent=c;this._actIndex=this._cndIndex=0;this._elseBranchRan=this._lastEventTrue=!1;this._expressionObjectClass=null;this._functionReturnValue=this._functionReturnType=0}Release(){this.Reset(null);this._runtime=this._stack=null}Reset(d){this._currentEvent=d;this._actIndex=this._cndIndex=0;this._elseBranchRan=this._lastEventTrue=!1}_Restore(d,c){this._currentEvent=
d;this._cndIndex=0;this._actIndex=c}ResetQuick(){this._actIndex=this._cndIndex=0}GetCurrentEvent(){return this._currentEvent}SetCurrentEvent(d){this._currentEvent=d}GetConditionIndex(){return this._cndIndex}SetConditionIndex(d){this._cndIndex=d}GetActionIndex(){return this._actIndex}SetActionIndex(d){this._actIndex=d}SetLastEventTrue(d){this._lastEventTrue=!!d}GetLastEventTrue(){return this._lastEventTrue}SetElseBranchRan(d){this._elseBranchRan=!!d}GetElseBranchRan(){return this._elseBranchRan}SetExpressionObjectClass(d){this._expressionObjectClass=
d}GetExpressionObjectClass(){return this._expressionObjectClass}InitCallFunctionExpression(d,c){this._functionReturnType=d;this._functionReturnValue=c}GetFunctionReturnType(){return this._functionReturnType}SetFunctionReturnValue(d){this._functionReturnValue=d}GetFunctionReturnValue(){return this._functionReturnValue}IsSolModifierAfterCnds(){const d=this._currentEvent;return d.IsSolWriterAfterCnds()?!0:this._cndIndex<d.GetConditionCount()-1?!!d.GetSolModifiers().length:!1}}}"use strict";
{const e=self.C3;e.LocalVarStack=class extends e.DefendedBase{constructor(d){super();this._eventSheetManager=d;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._index=-1;this._current=null;this._initialValues=[]}Release(){e.clearArray(this._stack);this._runtime=this._eventSheetManager=null}_SetInitialValues(d){this._initialValues=d;d=this._initialValues.slice(0);this._stack.push(d);this._index=0;this._current=d}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetCurrent(){return this._current}Push(){const d=
++this._index,c=this._stack;d===c.length?c.push(this._initialValues.slice(0)):e.shallowAssignArray(c[d],this._initialValues);this._current=c[d]}Pop(){this._current=this._stack[--this._index]}}}"use strict";
{const e=self.C3;e.LoopStack=class extends e.DefendedBase{constructor(d){super();this._eventSheetManager=d;this._runtime=this._eventSheetManager.GetRuntime();this._stack=[];this._index=-1}Release(){e.clearArray(this._stack);this._runtime=this._eventSheetManager=null}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}IsInLoop(){return 0<=this._index}GetCurrent(){return this._stack[this._index]}Push(){++this._index;if(this._index===this._stack.length){var d=e.New(e.Loop,
this);this._stack.push(d);return d}d=this._stack[this._index];d.Reset();return d}Pop(){--this._index}FindByName(d){const c=this._stack;for(let f=this._index;0<=f;--f){const g=c[f];if(g.GetName()===d)return g}return null}_GetStack(){return this._stack.slice(0,this._index+1)}}}"use strict";
{const e=self.C3;e.Loop=class extends e.DefendedBase{constructor(d){super();this._loopStack=d;this._name="";this._index=0;this._isStopped=!1;this._end=NaN}Reset(){this._name="";this._index=0;this._isStopped=!1;this._end=NaN}SetName(d){this._name=d}GetName(){return this._name}SetIndex(d){this._index=d}GetIndex(){return this._index}Stop(){this._isStopped=!0}IsStopped(){return this._isStopped}SetEnd(d){this._end=d}GetEnd(){return this._end}}}"use strict";
{const e=self.C3;e.ArrayStack=class extends e.DefendedBase{constructor(){super();this._stack=[];this._index=-1}Release(){e.clearArray(this._stack)}GetCurrent(){return this._stack[this._index]}Push(){++this._index;if(this._index===this._stack.length){const d=[];this._stack.push(d);return d}return this._stack[this._index]}Pop(){--this._index}}}"use strict";
{const e=self.C3;function d(f,g){return f.GetIndex()-g.GetIndex()}function c(f,g){for(let h=0,m=f.length;h<m;++h)if(f[h]!==g[h])return!1;return!0}e.EventSheetManager=class extends e.DefendedBase{constructor(f){super();this._runtime=f;this._allSheets=[];this._sheetsByName=new Map;this._allGroups=[];this._groupsByName=new Map;this._blocksBySid=new Map;this._cndsBySid=new Map;this._actsBySid=new Map;this._allUniqueSolModifiers=new Map;this._eventVarsBySid=new Map;this._nextLocalVarIndex=0;this._allGlobalVars=
[];this._allLocalVars=[];this._localVarInitialValues=[];this._functionBlocksByName=new Map;this._eventStack=e.New(e.EventStack,this);this._localVarStack=e.New(e.LocalVarStack,this);this._loopStack=e.New(e.LoopStack,this);this._triggersToPostInit=[];this._queuedTriggers=[];this._queuedDebugTriggers=[];this._blockFlushingDepth=this._executingTriggerDepth=this._runningEventsDepth=0;this._scheduledWaits=[];this._asyncActionPromises=[];self.c3_callFunction=(g,h)=>this._InvokeFunctionFromJS(g,h)}Release(){this.ClearAllScheduledWaits();
this._eventStack.Release();this._eventStack=null;this._localVarStack.Release();this._localVarStack=null;e.clearArray(this._queuedTriggers);e.clearArray(this._queuedDebugTriggers);this._runtime=null;e.clearArray(this._allSheets);this._sheetsByName.clear()}Create(f){f=e.New(e.EventSheet,this,f);this._allSheets.push(f);this._sheetsByName.set(f.GetName().toLowerCase(),f)}_AddTriggerToPostInit(f){this._triggersToPostInit.push(f)}_PostInit(){for(const f of this._functionBlocksByName.values())f._PostInit(!1);
for(const f of this._allSheets)f._PostInit();for(const f of this._allSheets)f._UpdateDeepIncludes();for(const f of this._triggersToPostInit)f._PostInit(!1);e.clearArray(this._triggersToPostInit);this._localVarStack._SetInitialValues(this._localVarInitialValues)}GetRuntime(){return this._runtime}GetEventSheetByName(f){return this._sheetsByName.get(f.toLowerCase())||null}_RegisterGroup(f){this._allGroups.push(f);this._groupsByName.set(f.GetGroupName(),f)}_RegisterEventBlock(f){this._blocksBySid.set(f.GetSID(),
f)}_RegisterCondition(f){this._cndsBySid.set(f.GetSID(),f)}_RegisterAction(f){this._actsBySid.set(f.GetSID(),f)}_RegisterFunctionBlock(f){this._functionBlocksByName.set(f.GetFunctionName().toLowerCase(),f)}_RegisterEventVariable(f){this._eventVarsBySid.set(f.GetSID(),f);f.IsGlobal()?this._allGlobalVars.push(f):this._allLocalVars.push(f)}_DeduplicateSolModifierList(f){2<=f.length&&f.sort(d);let g=this._allUniqueSolModifiers.get(f.length);g||(g=[],this._allUniqueSolModifiers.set(f.length,g));for(let h=
0,m=g.length;h<m;++h){const k=g[h];if(c(f,k))return k}g.push(f);return f}_GetNextLocalVarIndex(f){this._localVarInitialValues.push(f.GetInitialValue());return this._nextLocalVarIndex++}GetEventStack(){return this._eventStack}GetCurrentEventStackFrame(){return this.GetEventStack().GetCurrentStackFrame()}GetCurrentEvent(){return this.GetCurrentEventStackFrame().GetCurrentEvent()}GetCurrentCondition(){const f=this.GetCurrentEventStackFrame();return f.GetCurrentEvent().GetConditionAt(f.GetConditionIndex())}GetCurrentAction(){const f=
this.GetCurrentEventStackFrame();return f.GetCurrentEvent().GetActionAt(f.GetActionIndex())}GetLocalVarStack(){return this._localVarStack}GetLoopStack(){return this._loopStack}GetAllLocalVariablesInScope(f){const g=[];for(f=f.GetScopeParent();f;)e.appendArray(g,f._GetAllLocalVariablesInScope()),f=f.GetScopeParent();return g}_GetLocalVariablesScriptInterface(f){const g={};for(const h of this.GetAllLocalVariablesInScope(f))g[h.GetJsPropName()]=h._GetScriptInterfaceDescriptor();return Object.create(Object.prototype,
g)}GetEventVariableBySID(f){return this._eventVarsBySid.get(f)||null}GetEventBlockBySID(f){return this._blocksBySid.get(f)||null}GetConditionBySID(f){return this._cndsBySid.get(f)||null}GetActionBySID(f){return this._actsBySid.get(f)||null}GetFunctionBlockByName(f){return this._functionBlocksByName.get(f.toLowerCase())||null}GetAllGlobalVariables(){return this._allGlobalVars}GetAllLocalVariables(){return this._allLocalVars}ResetAllGlobalsToInitialValue(){for(const f of this._allGlobalVars)f.ResetToInitialValue()}GetEventGroupByName(f){return this._groupsByName.get(f.toLowerCase())||
null}GetEventGroupBySID(f){return(f=this._blocksBySid.get(f))&&f.IsGroup()?f:null}GetAllGroups(){return this._allGroups}ResetAllGroupsInitialActivation(){for(const f of this._allGroups)f.ResetInitialActivation()}_ResetAllHasRunFlags(){for(const f of this._allSheets)f._ResetHasRunFlag()}RunEvents(f){this._ResetAllHasRunFlags();this._runningEventsDepth++;for(const g of f.runningLayouts())if(f=g.GetEventSheet())this._runtime.PushCurrentLayout(g),f.Run(),this._runtime.PopCurrentLayout();this._runningEventsDepth--}async DebugRunEvents(f){this._ResetAllHasRunFlags();
this._runningEventsDepth++;for(const g of this._DebugRunEventsGen(f))await this._runtime.DebugBreak(g);this._runningEventsDepth--}*_DebugRunEventsGen(f){for(const g of f.runningLayouts())if(f=g.GetEventSheet())this._runtime.PushCurrentLayout(g),yield*f.DebugRun(),this._runtime.PopCurrentLayout()}_Trigger(f,g,h,m){let k=!1;if(!f.GetMainRunningLayout())return this.QueueTrigger(g,h,m);this._executingTriggerDepth++;for(const a of f.runningLayouts())if(f=a.GetEventSheet()){this._runtime.PushCurrentLayout(a);
for(const b of f.deepIncludes()){const l=b._Trigger(g,h,m);k=k||l}f=f._Trigger(g,h,m);k=k||f;this._runtime.PopCurrentLayout()}this._executingTriggerDepth--;return k}*_DebugTrigger(f,g,h,m){let k=!1;if(!f.GetMainRunningLayout())return this.QueueTrigger(g,h,m);this._executingTriggerDepth++;for(const a of f.runningLayouts())if(f=a.GetEventSheet()){this._runtime.PushCurrentLayout(a);for(const b of f.deepIncludes()){const l=yield*b._DebugTrigger(g,h,m);k=k||l}f=yield*f._DebugTrigger(g,h,m);k=k||f;this._runtime.PopCurrentLayout()}this._executingTriggerDepth--;
return k}QueueTrigger(f,g,h){this._queuedTriggers.push([f,g,h]);return!1}QueueDebugTrigger(f,g,h){let m=null;const k=new Promise(a=>m=a);this._queuedDebugTriggers.push([f,g,h,m]);return k}*_RunQueuedDebugTriggersGen(){if(this._runtime.HitBreakpoint())throw Error("should not be in breakpoint");const f=this._runtime.GetLayoutManager();for(;this._queuedDebugTriggers.length;){const [g,h,m,k]=this._queuedDebugTriggers.shift(),a=yield*this._DebugTrigger(f,g,h,m);k(a)}}async RunQueuedDebugTriggersAsync(){for(const f of this._RunQueuedDebugTriggersGen())await this._runtime.DebugBreak(f)}_FastTrigger(f,
g,h,m){let k=!1;var a=f.GetMainRunningLayout();if(f=a.GetEventSheet()){this._executingTriggerDepth++;this._runtime.PushCurrentLayout(a);a=f.deepIncludes();for(let b=0,l=a.length;b<l;++b){const p=a[b]._FastTrigger(g,h,m);k=k||p}g=f._FastTrigger(g,h,m);k=k||g;this._runtime.PopCurrentLayout();this._executingTriggerDepth--;return k}}*_DebugFastTrigger(f,g,h,m){let k=!1;var a=f.GetMainRunningLayout();if(f=a.GetEventSheet()){this._executingTriggerDepth++;this._runtime.PushCurrentLayout(a);a=f.deepIncludes();
for(let b=0,l=a.length;b<l;++b){const p=yield*a[b]._DebugFastTrigger(g,h,m);k=k||p}g=yield*f._DebugFastTrigger(g,h,m);k=k||g;this._runtime.PopCurrentLayout();this._executingTriggerDepth--;return k}}GetTriggerDepth(){return this._executingTriggerDepth}IsInTrigger(){return 0<this.GetTriggerDepth()}_IncTriggerDepth(){return++this._executingTriggerDepth}_DecTriggerDepth(){--this._executingTriggerDepth}IsRunningEvents(){return 0<this._runningEventsDepth}IsInEventEngine(){return this.IsRunningEvents()||
this.IsInTrigger()}_RunQueuedTriggers(f){for(const [g,h,m]of this._queuedTriggers)this._Trigger(f,g,h,m);e.clearArray(this._queuedTriggers)}BlockFlushingInstances(f){f?this._blockFlushingDepth++:this._blockFlushingDepth--}IsFlushingBlocked(){return 0<this._blockFlushingDepth}ClearSol(f){for(let g=0,h=f.length;g<h;++g)f[g].GetSolStack().Clear()}PushCleanSol(f){for(let g=0,h=f.length;g<h;++g)f[g].GetSolStack().PushClean()}PushCopySol(f){for(let g=0,h=f.length;g<h;++g)f[g].GetSolStack().PushCopy()}PopSol(f){for(let g=
0,h=f.length;g<h;++g)f[g].GetSolStack().Pop()}AddScheduledWait(){const f=e.New(e.ScheduledWait,this);this._scheduledWaits.push(f);return f}scheduledWaits(){return this._scheduledWaits}RunScheduledWaits(){if(this._scheduledWaits.length){var f=this.GetCurrentEventStackFrame(),g=!1;this._runningEventsDepth++;for(let h=0,m=this._scheduledWaits.length;h<m;++h){const k=this._scheduledWaits[h];k._ShouldRun()&&k._Run(f);k.ShouldRelease()&&(g=!0)}g&&this._FilterScheduledWaitsToRelease();this._runningEventsDepth--}}async DebugRunScheduledWaits(){if(this._scheduledWaits.length){var f=
this.GetCurrentEventStackFrame(),g=!1;this._runningEventsDepth++;for(let h=0,m=this._scheduledWaits.length;h<m;++h){const k=this._scheduledWaits[h];k._ShouldRun()&&await k._DebugRun(f);k.ShouldRelease()&&(g=!0)}g&&this._FilterScheduledWaitsToRelease();this._runningEventsDepth--}}_FilterScheduledWaitsToRelease(){const f=e.arrayFilterOut(this._scheduledWaits,g=>g.ShouldRelease());for(const g of f)g.Release()}ClearAllScheduledWaits(){for(const f of this._scheduledWaits)f.Release();e.clearArray(this._scheduledWaits)}RemoveInstancesFromScheduledWaits(f){for(const g of this._scheduledWaits)g.RemoveInstances(f)}AddAsyncActionPromise(f){this._asyncActionPromises.push(f)}ClearAsyncActionPromises(){e.clearArray(this._asyncActionPromises)}GetPromiseForAllAsyncActions(){const f=
Promise.all(this._asyncActionPromises);this._asyncActionPromises=[];return f}_SaveToJson(){return{groups:this._SaveGroupsToJson(),cnds:this._SaveCndsToJson(),acts:this._SaveActsToJson(),vars:this._SaveVarsToJson(),waits:this._SaveScheduledWaitsToJson()}}_LoadFromJson(f){this._LoadGroupsFromJson(f.groups);this._LoadCndsFromJson(f.cnds);this._LoadActsFromJson(f.acts);this._LoadVarsFromJson(f.vars);this._LoadScheduledWaitsFromJson(f.waits)}_SaveGroupsToJson(){const f={};for(const g of this.GetAllGroups())f[g.GetSID().toString()]=
g.IsGroupActive();return f}_LoadGroupsFromJson(f){for(const [g,h]of Object.entries(f))f=parseInt(g,10),(f=this.GetEventGroupBySID(f))&&f.SetGroupActive(h)}_SaveCndsToJson(){const f={};for(const [g,h]of this._cndsBySid){const m=h._SaveToJson();m&&(f[g.toString()]=m)}return f}_LoadCndsFromJson(f){const g=new Map;for(const [h,m]of Object.entries(f))g.set(parseInt(h,10),m);for(const [h,m]of this._cndsBySid)m._LoadFromJson(g.get(h)||null)}_SaveActsToJson(){const f={};for(const [g,h]of this._actsBySid){const m=
h._SaveToJson();m&&(f[g.toString()]=m)}return f}_LoadActsFromJson(f){const g=new Map;for(const [h,m]of Object.entries(f))g.set(parseInt(h,10),m);for(const [h,m]of this._actsBySid)m._LoadFromJson(g.get(h)||null)}_SaveVarsToJson(){const f={};for(const [g,h]of this._eventVarsBySid)h.IsConstant()||!h.IsGlobal()&&!h.IsStatic()||(f[g.toString()]=h.GetValue());return f}_LoadVarsFromJson(f){for(const [g,h]of Object.entries(f))f=parseInt(g,10),(f=this.GetEventVariableBySID(f))&&f.SetValue(h)}_SaveScheduledWaitsToJson(){return this._scheduledWaits.filter(f=>
!f.IsPromise()).map(f=>f._SaveToJson())}_LoadScheduledWaitsFromJson(f){this.ClearAllScheduledWaits();for(const g of f)(f=e.ScheduledWait._CreateFromJson(this,g))&&this._scheduledWaits.push(f)}_GetPerfRecords(){return[...this._runtime.GetLayoutManager().runningLayouts()].map(f=>f.GetEventSheet()).filter(f=>f).map(f=>f._GetPerfRecord())}FindFirstFunctionBlockParent(f){for(;f;){const g=f.GetScopeParent();if(g instanceof e.FunctionBlock)return g;f=f.GetParent()}return null}_InvokeFunctionFromJS(f,g){Array.isArray(g)||
(g=[]);f=this.GetFunctionBlockByName(f.toLowerCase());if(!f)return null;if(!f.IsEnabled())return f.GetDefaultReturnValue();var h=f.GetFunctionParameters();if(g.length<h.length){g=g.slice(0);do g.push(h[g.length].GetInitialValue());while(g.length<h.length)}h=f.GetEventBlock();return h.RunAsExpressionFunctionCall(h.GetSolModifiersIncludingParents(),f.GetReturnType(),f.GetDefaultReturnValue(),...g)}}}"use strict";
{const e=self.C3;e.EventSheet=class extends e.DefendedBase{constructor(d,c){super();this._eventSheetManager=d;this._runtime=d.GetRuntime();this._name=c[0];this._events=[];this._triggers=new Map;this._fastTriggers=new Map;this._eventsByDisplayNumber=new Map;this._hasRun=!1;this._shallowIncludes=[];this._deepIncludes=[];this._alreadyIncludedSheets=new Set;for(const f of c[1])this._CreateEvent(f,null,this._events);this._perfRecord=this._runtime.IsDebug()?{type:"sheet",name:this._name,totalTimeCounter:0,
children:[]}:null}Release(){this._runtime=this._eventSheetManager=null}_CreateEvent(d,c,f){switch(d[0]){case 0:case 3:this._CreateEventBlock(d,c,f);break;case 1:this._CreateEventVariable(d,c,f);break;case 2:this._CreateInclude(d,c,f);break;case 4:this._CreateFunctionBlock(d,c);break;case 5:this._CreateScriptBlock(d,c,f);break;default:throw Error("invalid event type");}}_CreateEventBlock(d,c,f){d=e.EventBlock.Create(this,c,d);if(d.IsOrBlock()){f.push(d);f=d.GetConditions();for(let g=0,h=f.length;g<
h;++g)f[g].IsTrigger()&&this._InitTrigger(d,g)}else d.IsTrigger()?this._InitTrigger(d,0):f.push(d)}_CreateFunctionBlock(d,c){d=e.FunctionBlock.Create(this,c,d);this._eventSheetManager._RegisterFunctionBlock(d)}_CreateEventVariable(d,c,f){d=e.EventVariable.Create(this,c,d);f.push(d)}_CreateInclude(d,c,f){d=e.EventInclude.Create(this,c,d);f.push(d)}_CreateScriptBlock(d,c,f){d=e.EventScript.Create(this,c,d);f.push(d)}_InitTrigger(d,c){d.IsOrBlock()||this._eventSheetManager._AddTriggerToPostInit(d);var f=
d.GetConditionAt(c),g=f._GetFunc(),h=f.GetObjectClass();if(f.IsFastTrigger()){var m=this._fastTriggers.get(h);m||(m=new Map,this._fastTriggers.set(h,m));f=f.GetFastTriggerValue().toLowerCase();h=m.get(g);h||(h=new Map,m.set(g,h));g=h.get(f);g||(g=[],h.set(f,g));g.push([d,c])}else m=this._triggers.get(h),m||(m={methodMap:new Map,behaviors:new Map},this._triggers.set(h,m)),(h=f.GetBehaviorType())?(f=m.behaviors.get(h),f||(f=new Map,m.behaviors.set(h,f))):f=m.methodMap,m=f.get(g),m||(m=[],f.set(g,m)),
m.push([d,c])}_PostInit(){const d=this._events;for(let c=0,f=d.length;c<f;++c){const g=c<f-1&&d[c+1]instanceof e.EventBlock&&d[c+1].IsElseBlock();d[c]._PostInit(g)}}_AddShallowInclude(d){this._shallowIncludes.push(d)}_UpdateDeepIncludes(){e.clearArray(this._deepIncludes);this._AddDeepIncludes(this);this._alreadyIncludedSheets.clear()}_AddDeepIncludes(d){const c=d._deepIncludes,f=d._alreadyIncludedSheets;for(const g of this._shallowIncludes){const h=g.GetIncludeSheet();g.IsActive()&&d!==h&&!f.has(h)&&
(f.add(h),h._AddDeepIncludes(d),c.push(h))}}deepIncludes(){return this._deepIncludes}GetEventSheetManager(){return this._eventSheetManager}GetRuntime(){return this._runtime}GetName(){return this._name}_RegisterEventByDisplayNumber(d,c){this._eventsByDisplayNumber.set(c,d)}_GetEventByDisplayNumber(d){return this._eventsByDisplayNumber.get(d)||null}_ResetHasRunFlag(){this._hasRun=!1}Run(){if(!this._hasRun){var d=this._runtime,c=d.IsCPUProfiling(),f=c?performance.now():0;this._hasRun=!0;var g=this.GetEventSheetManager(),
h=g.GetCurrentEventStackFrame();for(const m of this._events)m.Run(h),g.ClearSol(m.GetSolModifiers()),g.ClearAsyncActionPromises(),d.FlushPendingInstances();h.Reset(null);c&&(this._perfRecord.totalTimeCounter+=performance.now()-f)}}*DebugRun(){if(!this._hasRun){this._hasRun=!0;var d=this._runtime,c=this.GetEventSheetManager(),f=c.GetCurrentEventStackFrame();for(const g of this._events)yield*g.DebugRun(f),c.ClearSol(g.GetSolModifiers()),c.ClearAsyncActionPromises(),d.FlushPendingInstances();f.Reset(null)}}_Trigger(d,
c,f){if(c){const g=c.GetObjectClass();this._TriggerForClass(d,c,g,f);for(const h of g.GetFamilies())this._TriggerForClass(d,c,h,f)}else return this._TriggerForClass(d,c,null,null)}_TriggerForClass(d,c,f,g){f=this._triggers.get(f);if(!f)return!1;g=g?f.behaviors.get(g):f.methodMap;if(!g)return!1;g=g.get(d);if(!g)return!1;d=!1;for(const [h,m]of g)g=this._ExecuteTrigger(c,h,m),d=d||g;return d}*_DebugTrigger(d,c,f){if(c){const g=c.GetObjectClass();yield*this._DebugTriggerForClass(d,c,g,f);for(const h of g.GetFamilies())yield*this._DebugTriggerForClass(d,
c,h,f)}else return yield*this._DebugTriggerForClass(d,c,null,null)}*_DebugTriggerForClass(d,c,f,g){f=this._triggers.get(f);if(!f)return!1;g=g?f.behaviors.get(g):f.methodMap;if(!g)return!1;g=g.get(d);if(!g)return!1;d=!1;for(const [h,m]of g)g=h.DebugCanRunFast()?this._ExecuteTrigger(c,h,m):yield*this._DebugExecuteTrigger(c,h,m),d=d||g;return d}_FastTrigger(d,c,f){c=c.GetObjectClass();c=this._fastTriggers.get(c);if(!c)return!1;d=c.get(d);if(!d)return!1;f=d.get(f);if(!f)return!1;d=!1;for(let g=0,h=f.length;g<
h;++g)c=f[g],c=this._ExecuteTrigger(null,c[0],c[1]),d=d||c;return d}*_DebugFastTrigger(d,c,f){c=c.GetObjectClass();c=this._fastTriggers.get(c);if(!c)return!1;d=c.get(d);if(!d)return!1;f=d.get(f);if(!f)return!1;d=!1;for(let h=0,m=f.length;h<m;++h){var g=f[h];c=g[0];g=g[1];c=c.DebugCanRunFast()?this._ExecuteTrigger(null,c,g):yield*this._DebugExecuteTrigger(null,c,g);d=d||c}return d}_ExecuteTrigger(d,c,f){const g=this._runtime,h=this._eventSheetManager,m=h.GetCurrentEvent(),k=h.GetEventStack(),a=h.GetTriggerDepth();
let b=!1;m&&h.PushCleanSol(m.GetSolModifiersIncludingParents());h.PushCleanSol(c.GetSolModifiersIncludingParents());const l=1<a;l&&h.GetLocalVarStack().Push();const p=k.Push(c);d&&(c.GetConditions()[f].GetObjectClass().GetCurrentSol().SetSinglePicked(d),d.IsInContainer()&&d.SetSiblingsSinglePicked());d=!0;if(c.GetParent()){const r=c.GetTriggerParents();for(let t=0,u=r.length;t<u;++t)if(!r[t].RunPreTrigger(p)){d=!1;break}}d&&(g.IncrementExecCount(),c.IsOrBlock()?c.RunOrBlockTrigger(p,f):c.Run(p),b=
p.GetLastEventTrue());k.Pop();l&&h.GetLocalVarStack().Pop();h.PopSol(c.GetSolModifiersIncludingParents());m&&h.PopSol(m.GetSolModifiersIncludingParents());m||1!==a||h.IsFlushingBlocked()||g.FlushPendingInstances();return b}*_DebugExecuteTrigger(d,c,f){const g=this._runtime,h=this._eventSheetManager,m=h.GetCurrentEvent(),k=h.GetEventStack(),a=h.GetTriggerDepth();let b=!1;m&&h.PushCleanSol(m.GetSolModifiersIncludingParents());h.PushCleanSol(c.GetSolModifiersIncludingParents());const l=1<a;l&&h.GetLocalVarStack().Push();
const p=k.Push(c);d&&(c.GetConditions()[f].GetObjectClass().GetCurrentSol().SetSinglePicked(d),d.IsInContainer()&&d.SetSiblingsSinglePicked());d=!0;if(c.GetParent()){const r=c.GetTriggerParents();for(let t=0,u=r.length;t<u;++t)if(!(yield*r[t].DebugRunPreTrigger(p))){d=!1;break}}d&&(g.IncrementExecCount(),c.IsOrBlock()?yield*c.DebugRunOrBlockTrigger(p,f):yield*c.DebugRun(p),b=p.GetLastEventTrue());k.Pop();l&&h.GetLocalVarStack().Pop();h.PopSol(c.GetSolModifiersIncludingParents());m&&h.PopSol(m.GetSolModifiersIncludingParents());
m||1!==a||h.IsFlushingBlocked()||g.FlushPendingInstances();return b}_GetPerfRecord(){return this._perfRecord}}}"use strict";
{const e=self.C3,d=[];function c(g,h){return!0}function*f(g,h){return!0}e.EventBlock=class extends e.DefendedBase{constructor(g,h,m){super();this._eventSheet=g;this._runtime=g.GetRuntime();this._parent=h;this._scopeParent=null;this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._solModifiers=[];this._solModifiersIncludingParents=[];this._hasElseBlock=this._isTopLevelGroup=this._isSolWriterAfterCnds=this._hasGotSolModifiersIncludingParents=!1;this._isOrBlock=!!m[2];this._isElseBlock=
!1;this._triggerParents=null;this._conditions=[];this._actions=[];this._subEvents=[];this._RunActions=c;this._DebugRunActions=f;this._isInitiallyActive=this._isGroup=!1;this._groupName="";this._isGroupActive=!1;this._perfRecord=this._containedIncludes=null;this._sid=m[4];this._displayNumber=m[5];this._eventSheet._RegisterEventByDisplayNumber(this,this._displayNumber);this._debugData=this._runtime.IsDebug()?{isBreakpoint:m[3][0],isBreakable:m[3][1],canRunAllConditionsFast:!1,canRunAllActionsFast:!1,
canRunAllSubEventsFast:!1,canRunSelfFast:!1}:null;this.GetEventSheetManager()._RegisterEventBlock(this);3===m[0]&&this._InitGroup(m[1]);g=0;for(var k of m[6])h=e.Condition.Create(this,k,g++),this._conditions.push(h),this._AddSolModifier(h.GetObjectClass());g=0;for(const a of m[7])k=e.Action.Create(this,a,g++),this._actions.push(k);if(9===m.length){m=m[8];for(const a of m)this._eventSheet._CreateEvent(a,this,this._subEvents)}this._conditions.length&&(this._isElseBlock=null===this._conditions[0].GetObjectClass()&&
this._conditions[0]._GetFunc()===e.Plugins.System.Cnds.Else);0===this._conditions.length&&(this._conditions=d);0===this._actions.length&&(this._actions=d);0===this._subEvents.length&&(this._subEvents=d)}static Create(g,h,m){return e.New(e.EventBlock,g,h,m)}_InitGroup(g){this._isGroup=!0;this._isGroupActive=this._isInitiallyActive=!!g[0];this._groupName=g[1].toLowerCase();this._containedIncludes=[];this.GetEventSheetManager()._RegisterGroup(this);this._runtime.IsDebug()&&(this._perfRecord={type:"group",
name:g[1],totalTimeCounter:0,children:[]})}_AddContainedInclude(g){this._containedIncludes.push(g)}_AddContainerSolModifierToList(g,h){for(const m of g.GetContainer().objectTypes())h.includes(m)||h.push(m)}_AddSolModifierToList(g,h){if(g)if(h.includes(g)||h.push(g),g.IsFamily())for(const m of g.GetFamilyMembers())m.IsInContainer()&&this._AddContainerSolModifierToList(m,h);else g.IsInContainer()&&this._AddContainerSolModifierToList(g,h)}_AddSolModifier(g){this._AddSolModifierToList(g,this._solModifiers)}_AddParentSolModifier(g){this._AddSolModifierToList(g,
this._solModifiersIncludingParents)}SetAllSolModifiers(){this._solModifiers=this._runtime.GetAllObjectClasses()}_PostInit(g){this._hasElseBlock=!!g;this._IdentifyTopLevelGroup();this._IdentifyTriggerParents();for(const m of this._conditions)m._PostInit();if(0<this._actions.length){g=!1;for(var h of this._actions)h._PostInit(),h.HasReturnType()&&(g=!0);g?(this._RunActions=this._RunActions_ReturnValue,this._DebugRunActions=this._DebugRunActions_ReturnValue):(this._RunActions=this._RunActions_Fast,this._DebugRunActions=
this._DebugRunActions_Fast)}h=this._subEvents;for(let m=0,k=h.length;m<k;++m)g=m<k-1&&h[m+1]instanceof e.EventBlock&&h[m+1].IsElseBlock(),h[m]._PostInit(g);this._debugData&&this._UpdateCanRunFast();this._perfRecord&&this._GetPerfRecordParent()._GetPerfRecord().children.push(this._perfRecord)}_GetPerfRecord(){return this._perfRecord}_GetPerfRecordParent(){let g=this.GetParent();for(;g;){if(g.IsGroup())return g;g=g.GetParent()}return this._eventSheet}_UpdateCanRunFast(){const g=this._debugData;g.canRunAllConditionsFast=
this._conditions.every(h=>h.DebugCanRunFast());g.canRunAllActionsFast=this._actions.every(h=>h.DebugCanRunFast());g.canRunAllSubEventsFast=this._subEvents.every(h=>h.DebugCanRunFast());g.canRunSelfFast=g.canRunAllConditionsFast&&g.canRunAllActionsFast&&g.canRunAllSubEventsFast}_UpdateCanRunFastRecursive(){let g=this;do g._UpdateCanRunFast(),g=g.GetParent();while(g)}_IdentifyTopLevelGroup(){if(this.IsGroup()){var g=this.GetParent();for(this._isTopLevelGroup=!0;g;){if(!g.IsGroup()){this._isTopLevelGroup=
!1;break}g=g.GetParent()}}}_IdentifySolModifiersIncludingParents(){var g=this._runtime.GetAllObjectClasses();if(this._solModifiers===g)this._solModifiersIncludingParents=g;else{this._solModifiersIncludingParents=e.cloneArray(this._solModifiers);for(g=this.GetParent();g;){for(var h of g._solModifiers)this._AddParentSolModifier(h);g=g.GetParent()}h=this.GetEventSheetManager();this._solModifiers=h._DeduplicateSolModifierList(this._solModifiers);this._solModifiersIncludingParents=h._DeduplicateSolModifierList(this._solModifiersIncludingParents)}}_IdentifyTriggerParents(){if(this.HasAnyTriggeredCondition()){this._triggerParents=
[];for(var g=this.GetParent();g;)this._triggerParents.push(g),g=g.GetParent();this._triggerParents.reverse()}}SetSolWriterAfterCnds(){this._isSolWriterAfterCnds=!0;this._parent&&this._parent.SetSolWriterAfterCnds()}IsSolWriterAfterCnds(){return this._isSolWriterAfterCnds}GetSolModifiers(){return this._solModifiers}GetSolModifiersIncludingParents(){this._hasGotSolModifiersIncludingParents||(this._hasGotSolModifiersIncludingParents=!0,this._IdentifySolModifiersIncludingParents());return this._solModifiersIncludingParents}HasSolModifier(g){return this._solModifiers.includes(g)}GetTriggerParents(){return this._triggerParents}GetEventSheet(){return this._eventSheet}GetEventSheetManager(){return this._eventSheet.GetEventSheetManager()}GetRuntime(){return this._runtime}GetParent(){return this._parent}_SetScopeParent(g){this._scopeParent=
g}GetScopeParent(){return this._scopeParent||this._parent}GetDisplayNumber(){return this._displayNumber}IsDebugBreakable(){return this._debugData&&this._debugData.isBreakable}IsDebugBreakpoint(){return this.IsDebugBreakable()&&this._debugData.isBreakpoint}_SetDebugBreakpoint(g){this._debugData.isBreakpoint=!!g;this._UpdateCanRunFastRecursive()}IsGroup(){return this._isGroup}IsTopLevelGroup(){return this._isTopLevelGroup}IsElseBlock(){return this._isElseBlock}HasElseBlock(){return this._hasElseBlock}GetGroupName(){return this._groupName}IsGroupActive(){return this._isGroupActive}ResetInitialActivation(){this.SetGroupActive(this._isInitiallyActive)}SetGroupActive(g){g=
!!g;if(!this._isGroup)throw Error("not a group");if(this._isGroupActive!==g){this._isGroupActive=g;for(const h of this._containedIncludes)h.UpdateActive();this._containedIncludes.length&&(g=this._runtime.GetCurrentLayout().GetEventSheet())&&g._UpdateDeepIncludes()}}GetSID(){return this._sid}IsOrBlock(){return this._isOrBlock}IsTrigger(){return this._conditions.length&&this._conditions[0].IsTrigger()}IsForFunctionBlock(){return this._scopeParent&&this._scopeParent instanceof e.FunctionBlock}HasAnyTriggeredCondition(){return this.IsForFunctionBlock()||
this._conditions.some(g=>g.IsTrigger())}GetConditions(){return this._conditions}GetConditionCount(){return this._conditions.length}GetConditionAt(g){g=Math.floor(g);if(0>g||g>=this._conditions.length)throw new RangeError("invalid condition index");return this._conditions[g]}GetConditionByDebugIndex(g){return this.GetConditionAt(g)}IsFirstConditionOfType(g){let h=g.GetIndex();if(0===h)return!0;for(--h;0<=h;--h)if(this._conditions[h].GetObjectClass()===g.GetObjectClass())return!1;return!0}GetActions(){return this._actions}GetActionCount(){return this._actions.length}GetActionAt(g){g=
Math.floor(g);if(0>g||g>=this._actions.length)throw new RangeError("invalid action index");return this._actions[g]}GetActionByDebugIndex(g){g=Math.floor(g);const h=this._actions.find(m=>m.GetDebugIndex()===g);if(!h)throw new RangeError("invalid action debug index");return h}_HasActionIndex(g){g=Math.floor(g);return 0<=g&&g<this._actions.length}GetSubEvents(){return this._subEvents}_GetAllLocalVariablesInScope(){return this._subEvents.filter(g=>g instanceof e.EventVariable)}RunPreTrigger(g){g.SetCurrentEvent(this);
let h=!1;const m=this._conditions;for(let k=0,a=m.length;k<a;++k){const b=m[k];g.SetConditionIndex(k);if(b.IsLooping())throw Error("trigger cannot be used as sub-event to a loop");if(b.Run())h=!0;else if(!this._isOrBlock)return!1}return this._isOrBlock?h:!0}RunOrBlockTrigger(g,h){g.SetCurrentEvent(this);this._conditions[h].Run()&&(this._RunActions(g,0)&&this._RunSubEvents(g),g.SetLastEventTrue(!0))}*DebugRunPreTrigger(g){g.SetCurrentEvent(this);let h=!1;const m=this._conditions;for(let k=0,a=m.length;k<
a;++k){const b=m[k];g.SetConditionIndex(k);if(b.IsLooping())throw Error("trigger cannot be used as sub-event to a loop");if(b.DebugCanRunFast()?b.Run():yield*b.DebugRun())h=!0;else if(!this._isOrBlock)return!1}return this._isOrBlock?h:!0}*DebugRunOrBlockTrigger(g,h){g.SetCurrentEvent(this);h=this._conditions[h];if(h.DebugCanRunFast()?h.Run():yield*h.DebugRun())(this.DebugCanRunActionsFast()?this._RunActions(g,0):yield*this._DebugRunActions(g,0))&&(this.DebugCanRunSubEventsFast()?this._RunSubEvents():
yield*this._DebugRunSubEvents()),g.SetLastEventTrue(!0)}Run(g){g.SetCurrentEvent(this);this._isElseBlock||g.SetElseBranchRan(!1);this._isOrBlock?this._RunOrBlock(g):this._RunAndBlock(g)}*DebugRun(g){if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;g.SetCurrentEvent(this);this._isElseBlock||g.SetElseBranchRan(!1);this._isOrBlock?yield*this._DebugRunOrBlock(g):yield*this._DebugRunAndBlock(g)}_RunOrBlock(g){const h=this._conditions;let m=0===h.length;for(let a=0,b=h.length;a<b;++a){var k=
h[a];k.IsTrigger()||(g.SetConditionIndex(a),k=k.Run(),m=m||k)}g.SetLastEventTrue(m);m&&(this._RunActions(g,0)&&this._RunSubEvents(g),this._hasElseBlock&&g.SetElseBranchRan(!0))}*_DebugRunOrBlock(g){const h=this._conditions;let m=0===h.length;for(let a=0,b=h.length;a<b;++a){var k=h[a];k.IsTrigger()||(g.SetConditionIndex(a),k=k.DebugCanRunFast()?k.Run():yield*k.DebugRun(),m=m||k)}g.SetLastEventTrue(m);m&&((this.DebugCanRunActionsFast()?this._RunActions(g,0):yield*this._DebugRunActions(g,0))&&(this.DebugCanRunSubEventsFast()?
this._RunSubEvents():yield*this._DebugRunSubEvents()),this._hasElseBlock&&g.SetElseBranchRan(!0))}_RunAndBlock(g){const h=this._conditions;for(let m=0,k=h.length;m<k;++m){const a=h[m];g.SetConditionIndex(m);if(!a.Run()){g.SetLastEventTrue(!1);return}}g.SetLastEventTrue(!0);this._RunActions(g,0)&&this._RunSubEvents(g);g.GetLastEventTrue()&&this._hasElseBlock&&g.SetElseBranchRan(!0)}*_DebugRunAndBlock(g){const h=this._conditions;for(let m=0,k=h.length;m<k;++m){const a=h[m];g.SetConditionIndex(m);if(a.DebugCanRunFast()?
!a.Run():!(yield*a.DebugRun())){g.SetLastEventTrue(!1);return}}g.SetLastEventTrue(!0);(this.DebugCanRunActionsFast()?this._RunActions(g,0):yield*this._DebugRunActions(g,0))&&(this.DebugCanRunSubEventsFast()?this._RunSubEvents():yield*this._DebugRunSubEvents());g.GetLastEventTrue()&&this._hasElseBlock&&g.SetElseBranchRan(!0)}_RunActions_Fast(g,h){const m=this._actions;for(let k=h,a=m.length;k<a;++k)h=m[k],g.SetActionIndex(k),h.Run();return!0}*_DebugRunActions_Fast(g,h){const m=this._actions;for(let k=
h,a=m.length;k<a;++k)h=m[k],g.SetActionIndex(k),h.DebugCanRunFast()?h.Run():yield*h.DebugRun();return!0}_RunActions_ReturnValue(g,h){const m=this.GetEventSheetManager(),k=this._actions;for(let a=h,b=k.length;a<b;++a){h=k[a];g.SetActionIndex(a);const l=h.Run();if(h.CanBailOut()&&!0===l)return!1;h.IsAsync()&&l instanceof Promise&&m.AddAsyncActionPromise(l)}return!0}*_DebugRunActions_ReturnValue(g,h){const m=this.GetEventSheetManager(),k=this._actions;for(let a=h,b=k.length;a<b;++a){h=k[a];g.SetActionIndex(a);
let l;l=h.DebugCanRunFast()?h.Run():yield*h.DebugRun();if(h.CanBailOut()&&!0===l)return!1;h.IsAsync()&&l instanceof Promise&&m.AddAsyncActionPromise(l)}return!0}_ResumeActionsAndSubEvents(g){this._RunActions(g,g.GetActionIndex())&&this._RunSubEvents()}*_DebugResumeActionsAndSubEvents(g){if(yield*this._DebugRunActions(g,g.GetActionIndex()))yield*this._DebugRunSubEvents()}_RunSubEvents(){if(this._subEvents.length){var g=this.IsGroup()&&this._runtime.IsCPUProfiling(),h=g?performance.now():0,m=this._eventStack,
k=m.Push(this);this._isSolWriterAfterCnds?this._RunSubEvents_SolWriterAfterCnds(k):this._RunSubEvents_Fast(k);m.Pop();g&&(this._perfRecord.totalTimeCounter+=performance.now()-h)}}_RunSubEvents_SolWriterAfterCnds(g){const h=this._isGroup,m=this._isTopLevelGroup,k=this.GetEventSheetManager(),a=this._subEvents;for(let b=0,l=a.length,p=l-1;b<l;++b){const r=a[b],t=r.GetSolModifiers(),u=!m||!h&&b<p;u&&k.PushCopySol(t);r.Run(g);u?k.PopSol(t):k.ClearSol(t)}}_RunSubEvents_Fast(g){const h=this._subEvents;for(let m=
0,k=h.length;m<k;++m)h[m].Run(g)}*_DebugRunSubEvents(){if(this._subEvents.length){var g=this._eventStack,h=g.Push(this);this._isSolWriterAfterCnds?yield*this._DebugRunSubEvents_SolWriterAfterCnds(h):yield*this._DebugRunSubEvents_Fast(h);g.Pop()}}*_DebugRunSubEvents_SolWriterAfterCnds(g){const h=this._isGroup,m=this._isTopLevelGroup,k=this.GetEventSheetManager(),a=this._subEvents;for(let b=0,l=a.length,p=l-1;b<l;++b){const r=a[b],t=r.GetSolModifiers(),u=!m||!h&&b<p;u&&k.PushCopySol(t);yield*r.DebugRun(g);
u?k.PopSol(t):k.ClearSol(t)}}*_DebugRunSubEvents_Fast(g){const h=this._subEvents;for(let m=0,k=h.length;m<k;++m)yield*h[m].DebugRun(g)}Retrigger(g,h){this._runtime.IncrementExecCount();h.ResetQuick();const m=this._conditions;if(!this.IsOrBlock())for(let k=g.GetConditionIndex()+1,a=m.length;k<a;++k)if(g=m[k],h.SetConditionIndex(k),!g.Run())return!1;this._RunActions(h,0)&&this._RunSubEvents(h);return!0}*DebugRetrigger(g,h){this._runtime.IncrementExecCount();h.ResetQuick();const m=this._conditions;if(!this.IsOrBlock())for(let k=
g.GetConditionIndex()+1,a=m.length;k<a;++k)if(g=m[k],h.SetConditionIndex(k),g.DebugCanRunFast()?!g.Run():!(yield*g.DebugRun()))return!1;(this.DebugCanRunActionsFast()?this._RunActions(h,0):yield*this._DebugRunActions(h,0))&&(this.DebugCanRunSubEventsFast()?this._RunSubEvents():yield*this._DebugRunSubEvents());return!0}DebugCanRunFast(){return!this.IsDebugBreakpoint()&&!this._runtime.DebugBreakNext()&&this._debugData.canRunSelfFast}DebugCanRunActionsFast(){return!this._runtime.DebugBreakNext()&&this._debugData.canRunAllActionsFast}DebugCanRunSubEventsFast(){return!this._runtime.DebugBreakNext()&&
this._debugData.canRunAllSubEventsFast}_CheckParentsOKToRun(g){if(this.GetParent()){const h=this.GetTriggerParents();for(let m=0,k=h.length;m<k;++m)if(!h[m].RunPreTrigger(g))return!1}return!0}*_DebugCheckParentsOKToRun(g){if(this.GetParent()){const h=this.GetTriggerParents();for(let m=0,k=h.length;m<k;++m)if(!(yield*h[m].DebugRunPreTrigger(g)))return!1}return!0}_EvaluateFunctionCallParameters(g,h,m){0<h.length?m?(h=h.map(k=>k.Get(0)),g.GetLocalVarStack().Push(),this._scopeParent.SetFunctionParameters(h)):
this._scopeParent.EvaluateFunctionParameters(h):m&&g.GetLocalVarStack().Push()}RunAsFunctionCall(g,h){let m,k;const a=0<g.length;var b=this._runtime;const l=this._eventStack,p=b.GetEventSheetManager(),r=1<p._IncTriggerDepth();this._EvaluateFunctionCallParameters(p,h,r);a&&p.PushCleanSol(g);h=l.Push(this);this._CheckParentsOKToRun(h)&&(b.IncrementExecCount(),h.SetCurrentEvent(this),(b=this._scopeParent.IsAsync())&&([k,m]=this._scopeParent.StartAsyncFunctionCall()),this._RunAndBlock(h),b&&this._scopeParent.MaybeFinishAsyncFunctionCall(k));
l.Pop();r&&p.GetLocalVarStack().Pop();a&&p.PopSol(g);p._DecTriggerDepth();return m}*DebugRunAsFunctionCall(g,h){let m,k;if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;const a=0<g.length;var b=this._runtime;const l=this._eventStack,p=b.GetEventSheetManager(),r=1<p._IncTriggerDepth();this._EvaluateFunctionCallParameters(p,h,r);a&&p.PushCleanSol(g);h=l.Push(this);if(yield*this._DebugCheckParentsOKToRun(h))b.IncrementExecCount(),h.SetCurrentEvent(this),(b=this._scopeParent.IsAsync())&&
([k,m]=this._scopeParent.StartAsyncFunctionCall()),yield*this._DebugRunAndBlock(h),b&&this._scopeParent.MaybeFinishAsyncFunctionCall(k);l.Pop();r&&p.GetLocalVarStack().Pop();a&&p.PopSol(g);p._DecTriggerDepth();return m}RunAsMappedFunctionCall(g){const h=this.GetSolModifiersIncludingParents(),m=0<h.length,k=this._runtime,a=this._eventStack,b=k.GetEventSheetManager(),l=1<b._IncTriggerDepth();l&&b.GetLocalVarStack().Push();this._scopeParent.SetFunctionParameters(g);m&&b.PushCleanSol(h);g=a.Push(this);
this._CheckParentsOKToRun(g)&&(k.IncrementExecCount(),g.SetCurrentEvent(this),this._RunAndBlock(g));a.Pop();l&&b.GetLocalVarStack().Pop();m&&b.PopSol(h);b._DecTriggerDepth()}*DebugRunAsMappedFunctionCall(g){if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;const h=this.GetSolModifiersIncludingParents(),m=0<h.length,k=this._runtime,a=this._eventStack,b=k.GetEventSheetManager(),l=1<b._IncTriggerDepth();l&&b.GetLocalVarStack().Push();this._scopeParent.SetFunctionParameters(g);m&&
b.PushCleanSol(h);g=a.Push(this);if(yield*this._DebugCheckParentsOKToRun(g))k.IncrementExecCount(),g.SetCurrentEvent(this),yield*this._DebugRunAndBlock(g);a.Pop();l&&b.GetLocalVarStack().Pop();m&&b.PopSol(h);b._DecTriggerDepth()}RunAsExpressionFunctionCall(g,h,m,...k){let a,b;const l=0<g.length,p=this._runtime,r=this._eventStack,t=p.GetEventSheetManager(),u=1<t._IncTriggerDepth();u&&t.GetLocalVarStack().Push();0<k.length&&this._scopeParent.SetFunctionParameters(k);l&&t.PushCleanSol(g);k=r.Push(this);
k.InitCallFunctionExpression(h,m);r.PushExpFunc(k);p.SetDebuggingEnabled(!1);this._CheckParentsOKToRun(k)&&(p.IncrementExecCount(),k.SetCurrentEvent(this),(h=this._scopeParent.IsAsync())&&([b,a]=this._scopeParent.StartAsyncFunctionCall()),this._RunAndBlock(k),h&&this._scopeParent.MaybeFinishAsyncFunctionCall(b));p.SetDebuggingEnabled(!0);r.Pop();r.PopExpFunc();u&&t.GetLocalVarStack().Pop();l&&t.PopSol(g);t._DecTriggerDepth();return a||k.GetFunctionReturnValue()}}}"use strict";
{const e=self.C3,d=[];let c=!1;e.EventScript=class extends e.DefendedBase{constructor(f,g,h){super();const m=f.GetRuntime(),k=f.GetEventSheetManager();this._eventSheet=f;this._eventSheetManager=k;this._runtime=f.GetRuntime();this._parent=g;this._func=m.GetObjectReference(h[1]);this._displayNumber=h[2];this._eventSheet._RegisterEventByDisplayNumber(this,this._displayNumber);this._debugData=m.IsDebug()?{isBreakpoint:h[3][0],isBreakable:h[3][1]}:null}static Create(f,g,h){return e.New(e.EventScript,f,
g,h)}_PostInit(){const f=this._func,g=this._runtime.GetEventSheetManager()._GetLocalVariablesScriptInterface(this);this._func=f.bind(null,this._runtime.GetIRuntime(),g)}GetParent(){return this._parent}GetScopeParent(){return this._parent}GetEventSheet(){return this._eventSheet}GetDisplayNumber(){return this._displayNumber}IsDebugBreakable(){return this._debugData&&this._debugData.isBreakable}IsDebugBreakpoint(){return this.IsDebugBreakable()&&this._debugData.isBreakpoint}_SetDebugBreakpoint(f){this._debugData.isBreakpoint=
!!f}IsElseBlock(){return!1}GetSolModifiers(){return d}GetSolModifiersIncludingParents(){return this._parent?this._parent.GetSolModifiersIncludingParents():d}Run(f){f.SetCurrentEvent(this);this._eventSheetManager.AddAsyncActionPromise(this._RunUserScript())}async _RunUserScript(){try{await this._func()}catch(f){console.error(`Unhandled exception running script %c${this.GetEventSheet().GetName()}, event ${this.GetDisplayNumber()}:`,"font-size: 1.2em; font-weight: bold;",f),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),
c||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),c=!0)}}*DebugRun(f){f.SetCurrentEvent(this);if(this.IsDebugBreakpoint()||this._runtime.DebugBreakNext())yield this;this.Run(f)}DebugCanRunFast(){return!this.IsDebugBreakpoint()&&!this._runtime.DebugBreakNext()}static HadUserScriptException(){return c}static SetHadUserScriptException(){c=!0}}}"use strict";
{const e=self.C3;e.FunctionBlock=class extends e.DefendedBase{constructor(d,c,f){super();this._eventSheet=d;this._runtime=d.GetRuntime();this._parent=c;const g=f[1];this._functionName=g[0];this._returnType=g[1];this._functionParameters=g[2].map(h=>e.EventVariable.Create(d,this,h));this._isEnabled=g[3];this._isAsync=g[4];this._nextAsyncId=0;this._currentAsyncId=-1;this._asyncMap=new Map;this._eventBlock=e.EventBlock.Create(d,c,f);this._eventBlock._SetScopeParent(this)}static Create(d,c,f){return e.New(e.FunctionBlock,
d,c,f)}_PostInit(){for(const d of this._functionParameters)d._PostInit();this._eventBlock._PostInit(!1)}_GetAllLocalVariablesInScope(){return this._functionParameters}GetFunctionParameters(){return this._functionParameters}GetFunctionParameterCount(){return this._functionParameters.length}EvaluateFunctionParameters(d){const c=this._functionParameters;for(let f=0,g=c.length;f<g;++f)c[f].SetValue(d[f].Get(0))}SetFunctionParameters(d){const c=this._functionParameters;for(let f=0,g=c.length;f<g;++f)c[f].SetValue(d[f])}CaptureFunctionParameters(){return this._functionParameters.map(d=>
d.GetValue())}GetParent(){return this._parent}GetScopeParent(){return this._parent}GetFunctionName(){return this._functionName}GetReturnType(){return this._returnType}IsEnabled(){return this._isEnabled}GetDefaultReturnValue(){switch(this._returnType){case 0:return null;case 2:return"";default:return 0}}GetEventBlock(){return this._eventBlock}IsAsync(){return this._isAsync}StartAsyncFunctionCall(){const d=this._nextAsyncId++;this._currentAsyncId=d;let c;const f=new Promise(g=>c=g);this._asyncMap.set(d,
{resolve:c,pauseCount:0});return[d,f]}MaybeFinishAsyncFunctionCall(d){const c=this._asyncMap.get(d);0===c.pauseCount&&(c.resolve(),this._asyncMap.delete(d));this._currentAsyncId=-1}PauseCurrentAsyncFunction(){this._asyncMap.get(this._currentAsyncId).pauseCount++;return this._currentAsyncId}ResumeAsyncFunction(d){this._currentAsyncId=d;this._asyncMap.get(d).pauseCount--}}}"use strict";
{const e=self.C3,d=[];e.EventVariable=class extends e.DefendedBase{constructor(c,f,g){super();const h=c.GetEventSheetManager();this._eventSheet=c;this._eventSheetManager=h;this._runtime=c.GetRuntime();this._parent=f;this._localVarStack=h.GetLocalVarStack();this._name=g[1];this._type=g[2];this._initialValue=g[3];this._isStatic=!!g[4];this._isConstant=!!g[5];this._isFunctionParameter=f instanceof e.FunctionBlock;this._sid=g[6];this._jsPropName=this._runtime.GetJsPropName(g[8]);this._scriptSetter=m=>
this.SetValue(m);this._scriptGetter=()=>this.GetValue();this._hasSingleValue=!this._parent||this._isStatic||this._isConstant;this._value=this._initialValue;this._localIndex=-1;this.IsBoolean()&&(this._value=this._value?1:0);!this.IsLocal()||this.IsStatic()||this.IsConstant()||(this._localIndex=h._GetNextLocalVarIndex(this));h._RegisterEventVariable(this)}static Create(c,f,g){return e.New(e.EventVariable,c,f,g)}_PostInit(){}GetName(){return this._name}GetJsPropName(){return this._jsPropName}GetParent(){return this._parent}IsGlobal(){return!this.GetParent()}IsLocal(){return!this.IsGlobal()}IsFunctionParameter(){return this._isFunctionParameter}IsStatic(){return this._isStatic}IsConstant(){return this._isConstant}IsNumber(){return 0===
this._type}IsString(){return 1===this._type}IsBoolean(){return 2===this._type}IsElseBlock(){return!1}GetSID(){return this._sid}GetInitialValue(){return this._initialValue}GetSolModifiers(){return d}Run(c){!this.IsLocal()||this.IsStatic()||this.IsConstant()||this.SetValue(this.GetInitialValue())}DebugCanRunFast(){return!0}*DebugRun(c){this.Run(c)}SetValue(c){this.IsNumber()?"number"!==typeof c&&(c=parseFloat(c)):this.IsString()?"string"!==typeof c&&(c=c.toString()):this.IsBoolean()&&(c=c?1:0);this._hasSingleValue?
this._value=c:this._localVarStack.GetCurrent()[this._localIndex]=c}GetValue(){return this._hasSingleValue?this._value:this._localVarStack.GetCurrent()[this._localIndex]}GetTypedValue(){let c=this.GetValue();this.IsBoolean()&&(c=!!c);return c}ResetToInitialValue(){this._value=this._initialValue}_GetScriptInterfaceDescriptor(){return{configurable:!1,enumerable:!0,get:this._scriptGetter,set:this._scriptSetter}}}}"use strict";
{const e=self.C3,d=[];e.EventInclude=class extends e.DefendedBase{constructor(c,f,g){super();const h=c.GetEventSheetManager();this._eventSheet=c;this._eventSheetManager=h;this._runtime=c.GetRuntime();this._parent=f;this._includeSheet=null;this._includeSheetName=g[1];this._isActive=!0}static Create(c,f,g){return e.New(e.EventInclude,c,f,g)}_PostInit(){this._includeSheet=this._eventSheetManager.GetEventSheetByName(this._includeSheetName);this._eventSheet._AddShallowInclude(this);let c=this.GetParent();
for(;c;)c instanceof e.EventBlock&&c.IsGroup()&&c._AddContainedInclude(this),c=c.GetParent();this.UpdateActive();this._runtime.IsDebug()&&this._eventSheet._GetPerfRecord().children.push(this._includeSheet._GetPerfRecord())}GetParent(){return this._parent}GetSolModifiers(){return d}GetIncludeSheet(){return this._includeSheet}Run(c){c=!!this.GetParent();const f=this._runtime.GetAllObjectClasses();c&&this._eventSheetManager.PushCleanSol(f);this._includeSheet.Run();c&&this._eventSheetManager.PopSol(f)}*DebugRun(c){c=
!!this.GetParent();const f=this._runtime.GetAllObjectClasses();c&&this._eventSheetManager.PushCleanSol(f);yield*this._includeSheet.DebugRun();c&&this._eventSheetManager.PopSol(f)}DebugCanRunFast(){return!1}IsActive(){return this._isActive}UpdateActive(){let c=this.GetParent();for(;c;){if(c instanceof e.EventBlock&&c.IsGroup()&&!c.IsGroupActive()){this._isActive=!1;return}c=c.GetParent()}this._isActive=!0}}}"use strict";
{const e=self.C3;e.ExpNode=class extends e.DefendedBase{constructor(a){super();this._owner=a;this._runtime=a.GetRuntime()}_PostInit(){}static CreateNode(a,b){return e.New([m,g,h,k,d,c][b[0]],a,b)}};class d extends e.ExpNode{constructor(a,b){super(a);this._systemPlugin=this._runtime.GetSystemPlugin();this._func=this._runtime.GetObjectReference(b[1]);this._func!==e.Plugins.System.Exps.random&&this._func!==e.Plugins.System.Exps.choose||this._owner.SetVariesPerInstance()}GetBoundMethod(){return this._systemPlugin._GetBoundACEMethod(this._func,
this._systemPlugin)}}class c extends e.ExpNode{constructor(a,b){super(a);this._functionBlock=null;this._functionName=b[1];this._owner.SetVariesPerInstance()}_PostInit(){const a=this._runtime.GetEventSheetManager();this._functionBlock=a.GetFunctionBlockByName(this._functionName);this._functionName=null;const b=this._owner.GetEventBlock(),l=this._functionBlock.GetEventBlock();this._combinedSolModifiers=[...new Set([...b.GetSolModifiersIncludingParents(),...l.GetSolModifiersIncludingParents()])];this._combinedSolModifiers=
a._DeduplicateSolModifierList(this._combinedSolModifiers)}GetBoundMethod(){const a=this._functionBlock;if(a.IsEnabled()){const b=a.GetEventBlock();return e.EventBlock.prototype.RunAsExpressionFunctionCall.bind(b,this._combinedSolModifiers,a.GetReturnType(),a.GetDefaultReturnValue())}{const b=a.GetDefaultReturnValue();return()=>b}}}function f(a,b){if(a>=b)return a%b;0>a&&(a<=-b&&(a%=b),0>a&&(a+=b));return a}class g extends e.ExpNode{constructor(a,b){super(a);this._objectClass=this._runtime.GetObjectClassByIndex(b[1]);
this._func=this._runtime.GetObjectReference(b[2]);this._returnsString=!!b[3];this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._owner._MaybeVaryFor(this._objectClass)}GetBoundMethod(){return this._objectClass.GetPlugin()._GetBoundACEMethod(this._func,this._objectClass.GetSingleGlobalInstance().GetSdkInstance())}ExpObject(...a){const b=this._objectClass,l=b.GetCurrentSol().GetExpressionInstances();var p=l.length;if(0===p)return this._returnsString?"":0;p=f(this._owner.GetSolIndex(),
p);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(b);return this._func.apply(l[p].GetSdkInstance(),a)}ExpObject_InstExpr(a,...b){const l=this._objectClass,p=l.GetInstances(),r=p.length;if(0===r)return this._returnsString?"":0;a=f(a,r);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(l);return this._func.apply(p[a].GetSdkInstance(),b)}}class h extends e.ExpNode{constructor(a,b){super(a);this._objectClass=this._runtime.GetObjectClassByIndex(b[1]);this._varIndex=b[3];
this._returnsString=!!b[2];this._owner._MaybeVaryFor(this._objectClass)}ExpInstVar(){const a=this._objectClass.GetCurrentSol().GetExpressionInstances();var b=a.length;if(0===b)return this._returnsString?"":0;b=f(this._owner.GetSolIndex(),b);return a[b]._GetInstanceVariableValueUnchecked(this._varIndex)}ExpInstVar_Family(){var a=this._objectClass,b=a.GetCurrentSol().GetExpressionInstances(),l=b.length;if(0===l)return this._returnsString?"":0;l=f(this._owner.GetSolIndex(),l);b=b[l];a=b.GetObjectClass().GetFamilyInstanceVariableOffset(a.GetFamilyIndex());
return b._GetInstanceVariableValueUnchecked(this._varIndex+a)}ExpInstVar_InstExpr(a){const b=this._objectClass;var l=b.GetInstances();const p=l.length;if(0===p)return this._returnsString?"":0;a=f(a,p);l=l[a];a=0;b.IsFamily()&&(a=l.GetObjectClass().GetFamilyInstanceVariableOffset(b.GetFamilyIndex()));return l._GetInstanceVariableValueUnchecked(this._varIndex+a)}}class m extends e.ExpNode{constructor(a,b){super(a);this._objectClass=this._runtime.GetObjectClassByIndex(b[1]);this._behaviorType=this._objectClass.GetBehaviorTypeByName(b[2]);
this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(b[2]);this._func=this._runtime.GetObjectReference(b[3]);this._returnsString=!!b[4];this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._owner._MaybeVaryFor(this._objectClass)}ExpBehavior(...a){const b=this._objectClass;var l=b.GetCurrentSol().GetExpressionInstances(),p=l.length;if(0===p)return this._returnsString?"":0;p=f(this._owner.GetSolIndex(),p);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(b);
l=l[p];p=0;b.IsFamily()&&(p=l.GetObjectClass().GetFamilyBehaviorOffset(b.GetFamilyIndex()));return this._func.apply(l.GetBehaviorInstances()[this._behaviorIndex+p].GetSdkInstance(),a)}ExpBehavior_InstExpr(a,...b){const l=this._objectClass;var p=l.GetInstances();const r=p.length;if(0===r)return this._returnsString?"":0;a=f(a,r);this._eventStack.GetCurrentStackFrame().SetExpressionObjectClass(l);p=p[a];a=0;l.IsFamily()&&(a=p.GetObjectClass().GetFamilyBehaviorOffset(l.GetFamilyIndex()));return this._func.apply(p.GetBehaviorInstances()[this._behaviorIndex+
a].GetSdkInstance(),b)}}class k extends e.ExpNode{constructor(a,b){super(a);this._eventVar=null;this._eventVarSid=b[1]}_PostInit(){this._eventVar=this._runtime.GetEventSheetManager().GetEventVariableBySID(this._eventVarSid)}GetVar(){return this._eventVar}}}"use strict";
{const e=self.C3;e.Parameter=class extends e.DefendedBase{constructor(x,A,E){super();this._owner=x;this._index=E;this._type=A;this.Get=null;this._isConstant=this._variesPerInstance=!1}static Create(x,A,E){const y=A[0];return e.New([c,f,l,h,k,g,a,c,h,h,p,r,l,u,f,b,m,t,w][y],x,y,E,A)}_PostInit(){}SetVariesPerInstance(){this._variesPerInstance=!0}_MaybeVaryFor(x){this._variesPerInstance||!x||x.GetPlugin().IsSingleGlobal()||(this._variesPerInstance=!0)}VariesPerInstance(){return this._variesPerInstance}GetIndex(){return this._index}GetRuntime(){return this._owner.GetRuntime()}GetEventBlock(){return this._owner.GetEventBlock()}IsConstant(){return this._isConstant}};
function d(x){x=self.C3_ExpressionFuncs[x];if(!x)throw Error("invalid expression number");return x}class c extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._solIndex=0;x=y[1];this._expressionNumber=x[0];this._numberedNodes=[];this._expressionFunc=null;for(let B=1,H=x.length;B<H;++B)this._numberedNodes.push(e.ExpNode.CreateNode(this,x[B]));this._numberedNodes.length?this.Get=this.GetExpression:(this.Get=d(this._expressionNumber),this._isConstant=!0)}_GetNode(x){if(0>x||x>=this._numberedNodes.length)throw new RangeError("invalid numbered node");
return this._numberedNodes[x]}_PostInit(){for(var x of this._numberedNodes)x._PostInit();x=d(this._expressionNumber);this._expressionFunc=this._numberedNodes.length?x(this):x}GetSolIndex(){return this._solIndex}GetExpression(x){this._solIndex=x;return this._expressionFunc()}}class f extends c{constructor(x,A,E,y){super(x,A,E,y);this.Get=this.GetStringExpression;14===A&&(this.GetEventBlock().SetAllSolModifiers(),this._owner instanceof e.Action&&this.GetEventBlock().SetSolWriterAfterCnds())}GetStringExpression(x){this._solIndex=
x;x=this._expressionFunc();return"string"===typeof x?x:""}_GetFastTriggerValue(){return d(this._expressionNumber)()}}class g extends c{constructor(x,A,E,y){super(x,A,E,y);this.Get=this.GetLayer;this._isConstant=!1}GetLayer(x){this._solIndex=x;x=this._expressionFunc();return this.GetRuntime().GetCurrentLayout().GetLayer(x)}}class h extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._combo=y[1];this.Get=this.GetCombo;this._isConstant=!0}GetCombo(){return this._combo}}class m extends e.Parameter{constructor(x,
A,E,y){super(x,A,E);this._bool=y[1];this.Get=this.GetBoolean;this._isConstant=!0}GetBoolean(){return this._bool}}class k extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._objectClass=this.GetRuntime().GetObjectClassByIndex(y[1]);this.Get=this.GetObjectClass;x=this.GetEventBlock();x._AddSolModifier(this._objectClass);this._owner instanceof e.Action?x.SetSolWriterAfterCnds():x.GetParent()&&x.GetParent().SetSolWriterAfterCnds();this._isConstant=!0}GetObjectClass(){return this._objectClass}}
class a extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._layout=this.GetRuntime().GetLayoutManager().GetLayoutByName(y[1]);this.Get=this.GetLayout;this._isConstant=!0}GetLayout(){return this._layout}}class b extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._timeline=this.GetRuntime().GetTimelineManager().GetTimelineByName(y[1]);this.Get=this.GetTimeline;this._isConstant=!0}GetTimeline(){return this._timeline}}class l extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._fileInfo=
y[1];this.Get=this.GetFile;this._isConstant=!0}GetFile(){return this._fileInfo}}class p extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._instVarIndex=y[1];(x=this._owner.GetObjectClass())&&x.IsFamily()?(this.Get=this.GetFamilyInstanceVariable,this.SetVariesPerInstance()):(this.Get=this.GetInstanceVariable,this._isConstant=!0)}GetInstanceVariable(){return this._instVarIndex}GetFamilyInstanceVariable(x){x=x||0;const A=this._owner.GetObjectClass();var E=A.GetCurrentSol();const y=E.GetInstances();
if(y.length)x=y[x%y.length].GetObjectClass();else if(E.HasAnyElseInstances())E=E.GetElseInstances(),x=E[x%E.length].GetObjectClass();else if(0<A.GetInstanceCount())E=A.GetInstances(),x=E[x%E.length].GetObjectClass();else return 0;return this._instVarIndex+x.GetFamilyInstanceVariableOffset(A.GetFamilyIndex())}}class r extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._eventVarSid=y[1];this._eventVar=null;this.Get=this.GetEventVariable;this._isConstant=!0}_PostInit(){this._eventVar=this.GetRuntime().GetEventSheetManager().GetEventVariableBySID(this._eventVarSid)}GetEventVariable(){return this._eventVar}}
class t extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._functionBlockName=y[1];this._functionBlock=null;this.Get=this.GetFunction;this._isConstant=!0}_PostInit(){this._functionBlock=this.GetRuntime().GetEventSheetManager().GetFunctionBlockByName(this._functionBlockName);this._functionBlockName=null}GetFunction(){return this._functionBlock}}class u extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._subParams=[];this._variadicRet=[];this._isConstant=!0;for(let B=1,H=y.length;B<
H;++B)x=e.Parameter.Create(this._owner,y[B],0),this._subParams.push(x),this._variadicRet.push(0),x.IsConstant()||(this._isConstant=!1);this.Get=this.GetVariadic}_PostInit(){for(const x of this._subParams)x._PostInit()}GetVariadic(){const x=this._subParams,A=this._variadicRet;for(let E=0,y=x.length;E<y;++E)A[E]=x[E].Get(0);return A}}class w extends e.Parameter{constructor(x,A,E,y){super(x,A,E);this._easeIndex=y[1];this.Get=this.GetEase;this._isConstant=!0}GetEase(){return this._easeIndex}}}"use strict";
{const e=self.C3;function d(g,h){for(let m=0,k=g.length;m<k;++m)h[m]=g[m].Get(0)}const c=[],f=function(){};e.Condition=class extends e.DefendedBase{constructor(g,h,m){super();this._eventBlock=g;this._runtime=g.GetRuntime();this._index=m;this._func=this._runtime.GetObjectReference(h[1]);this._isTrigger=0<h[3];this._isFastTrigger=2===h[3];this._isLooping=!!h[4];this._isInverted=!!h[5];this._isStatic=!!h[6];this._sid=h[7];this._isInOrBlock=this._eventBlock.IsOrBlock();this._behaviorType=this._objectClass=
null;this._behaviorIndex=-1;this._systemPlugin=null;this.DebugRun=this.Run=f;this._parameters=[];this._results=[];this._anyParamVariesPerInstance=!1;this._unsavedData=this._savedData=null;this._debugData=this._runtime.IsDebug()?{isBreakpoint:h[8][0],canDebug:h[8][1]}:null;-1===h[0]?this._systemPlugin=this._runtime.GetSystemPlugin():(this._objectClass=this._runtime.GetObjectClassByIndex(h[0]),h[2]&&(this._behaviorType=this._objectClass.GetBehaviorTypeByName(h[2]),this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(h[2])),
this._eventBlock.GetParent()&&this._eventBlock.GetParent().SetSolWriterAfterCnds());if(10===h.length){g=h[9];for(let k of g)this._parameters.push(e.Parameter.Create(this,k,this._parameters.length)),this._results.push(0)}0===this._parameters.length&&(this._results=this._parameters=c);this._eventBlock.GetEventSheetManager()._RegisterCondition(this)}static Create(g,h,m){return e.New(e.Condition,g,h,m)}_PostInit(){for(const g of this._parameters)g._PostInit(),g.VariesPerInstance()&&(this._anyParamVariesPerInstance=
!0);this._isFastTrigger?(this.Run=this._RunFastTrigger,this.DebugRun=this._DebugRunFastTrigger):this._systemPlugin?(this._SetSystemRunMethod(),this.DebugRun=this._DebugRunSystem):this._objectClass.GetPlugin().IsSingleGlobal()?(this._SetSingleGlobalRunMethod(),this.DebugRun=this._DebugRunSingleGlobal):this._isStatic?(this.Run=this._RunStatic,this.DebugRun=this._DebugRunStatic):(this.Run=this._RunObject,this.DebugRun=this._DebugRunObject)}_SetSystemRunMethod(){this._SetRunMethodForBoundFunc(this._systemPlugin,
this._systemPlugin,this._RunSystem)}_SetSingleGlobalRunMethod(){const g=this._objectClass.GetPlugin(),h=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();this._SetRunMethodForBoundFunc(g,h,this._RunSingleGlobal)}_SetRunMethodForBoundFunc(g,h,m){const k=this._func,a=this._isInverted,b=this._parameters;if(0===b.length){const l=g._GetBoundACEMethod(k,h);this.Run=a?function(){return e.xor(l(),a)}:l}else if(1===b.length){const l=b[0];if(!a&&l.IsConstant())this.Run=g._GetBoundACEMethod_1param(k,
h,l.Get(0));else{const p=g._GetBoundACEMethod(k,h);this.Run=function(){return e.xor(p(l.Get(0)),a)}}}else if(2===b.length){const l=b[0],p=b[1];if(!a&&l.IsConstant()&&p.IsConstant())this.Run=g._GetBoundACEMethod_2params(k,h,l.Get(0),p.Get(0));else{const r=g._GetBoundACEMethod(k,h);this.Run=function(){return e.xor(r(l.Get(0),p.Get(0)),a)}}}else if(3===b.length){const l=b[0],p=b[1],r=b[2];if(!a&&l.IsConstant()&&p.IsConstant()&&r.IsConstant())this.Run=g._GetBoundACEMethod_3params(k,h,l.Get(0),p.Get(0),
r.Get(0));else{const t=g._GetBoundACEMethod(k,h);this.Run=function(){return e.xor(t(l.Get(0),p.Get(0),r.Get(0)),a)}}}else this.Run=m}GetSID(){return this._sid}_GetFunc(){return this._func}GetObjectClass(){return this._objectClass}GetBehaviorType(){return this._behaviorType}GetEventBlock(){return this._eventBlock}GetRuntime(){return this._runtime}GetIndex(){return this._index}GetDebugIndex(){return this.GetIndex()}IsTrigger(){return this._isTrigger}IsFastTrigger(){return this._isFastTrigger}IsInverted(){return this._isInverted}IsLooping(){return this._isLooping}IsBreakpoint(){return this._debugData.isBreakpoint}_SetBreakpoint(g){this._debugData.isBreakpoint=
!!g;this._eventBlock._UpdateCanRunFastRecursive()}_DebugReturnsGenerator(){return this._debugData.canDebug}DebugCanRunFast(){return!this.IsBreakpoint()&&!this._runtime.DebugBreakNext()&&!this._DebugReturnsGenerator()}GetSavedDataMap(){this._savedData||(this._savedData=new Map);return this._savedData}GetUnsavedDataMap(){this._unsavedData||(this._unsavedData=new Map);return this._unsavedData}_RunSystem(){const g=this._results;d(this._parameters,g);return e.xor(this._func.apply(this._systemPlugin,g),
this._isInverted)}*_DebugRunSystem(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){var g=this._results;d(this._parameters,g);g=this._func.apply(this._systemPlugin,g);e.IsIterator(g)&&(g=yield*g);return e.xor(g,this._isInverted)}return this.Run()}_RunSingleGlobal(){const g=this._results;d(this._parameters,g);const h=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();return e.xor(this._func.apply(h,g),this._isInverted)}*_DebugRunSingleGlobal(){if(this.IsBreakpoint()||
this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){var g=this._results;d(this._parameters,g);const h=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();g=this._func.apply(h,g);e.IsIterator(g)&&(g=yield*g);return e.xor(g,this._isInverted)}return this.Run()}_RunFastTrigger(){return!0}*_DebugRunFastTrigger(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;return!0}_RunStatic(){var g=this._results;d(this._parameters,g);g=this._func.apply(this._behaviorType||
this._objectClass,g);this._objectClass.ApplySolToContainer();return g}*_DebugRunStatic(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){var g=this._results;d(this._parameters,g);g=this._func.apply(this._behaviorType||this._objectClass,g);e.IsIterator(g)&&(g=yield*g);this._objectClass.ApplySolToContainer();return g}return this.Run()}_RunObject(){const g=this._parameters,h=this._results,m=this._objectClass.GetCurrentSol();for(let k=0,a=g.length;k<
a;++k){const b=g[k];b.VariesPerInstance()||(h[k]=b.Get(0))}return m.IsSelectAll()?this._RunObject_FirstFilter(m):this._RunObject_NextFilter(m)}*_DebugRunObject(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;return this._RunObject()}_EvaluateVaryingParameters(g){const h=this._parameters,m=this._results;for(let k=0,a=h.length;k<a;++k){const b=h[k];b.VariesPerInstance()&&(m[k]=b.Get(g))}}_RunObject_FirstFilter(g){const h=this._objectClass,m=h.IsFamily(),k=h.GetFamilyIndex(),a=this._behaviorIndex,
b=0<=a,l=h.GetInstances(),p=this._anyParamVariesPerInstance,r=this._results,t=this._func,u=this._isInverted,w=this._isInOrBlock&&!this._isTrigger;g.ClearArrays();for(let A=0,E=l.length;A<E;++A){const y=l[A];p&&this._EvaluateVaryingParameters(A);var x=void 0;b?(x=m?y.GetObjectClass().GetFamilyBehaviorOffset(k):0,x=t.apply(y.GetBehaviorInstances()[a+x].GetSdkInstance(),r)):x=t.apply(y.GetSdkInstance(),r);e.xor(x,u)?g._PushInstance(y):w&&g._PushElseInstance(y)}h.FinishCondition(!0);g._SetSelectAll(!1);
h.ApplySolToContainer();return g.HasAnyInstances()}_RunObject_NextFilter(g){const h=this._objectClass;var m=h.IsFamily();const k=h.GetFamilyIndex(),a=h.IsInContainer(),b=this._behaviorIndex,l=0<=b,p=this._anyParamVariesPerInstance,r=this._results,t=this._func,u=this._isInverted,w=this._isInOrBlock&&!this._isTrigger,x=g._GetOwnInstances(),A=g._GetOwnElseInstances(),E=w&&!this._eventBlock.IsFirstConditionOfType(this),y=E?A:x;let B=0,H=!1;for(let F=0,I=y.length;F<I;++F){const N=y[F];p&&this._EvaluateVaryingParameters(F);
var P=void 0;l?(P=m?N.GetObjectClass().GetFamilyBehaviorOffset(k):0,P=t.apply(N.GetBehaviorInstances()[b+P].GetSdkInstance(),r)):P=t.apply(N.GetSdkInstance(),r);e.xor(P,u)?(H=!0,E?(x.push(N),a&&N._PushSiblingsToSolInstances()):(y[B]=N,a&&N._SetSiblingsToSolInstancesIndex(B),++B)):E?(y[B]=N,a&&N._SetSiblingsToSolElseInstancesIndex(B),++B):w&&(A.push(N),a&&N._PushSiblingsToSolElseInstances())}e.truncateArray(y,B);a&&h._TruncateContainerSols(E,B);m=H;E&&!H&&(H=this._OrBlockCheckInstances(x));h.FinishCondition(m||
w);return w?H:g.HasAnyInstances()}_OrBlockCheckInstances(g){var h=this._objectClass;const m=h.IsFamily();h=h.GetFamilyIndex();const k=this._anyParamVariesPerInstance,a=this._behaviorIndex,b=0<=a,l=this._results,p=this._func,r=this._isInverted;for(let u=0,w=g.length;u<w;++u){var t=g[u];k&&this._EvaluateVaryingParameters(u);if(b){const x=m?t.GetObjectClass().GetFamilyBehaviorOffset(h):0;t=p.apply(t.GetBehaviorInstances()[a+x].GetSdkInstance(),l)}else t=p.apply(t.GetSdkInstance(),l);if(e.xor(t,r))return!0}return!1}ReevaluateParameter(g,
h){return this._parameters[g].Get(h)}GetFastTriggerValue(){const g=this._parameters;if(!g.length)throw Error("no parameters");return g[0]._GetFastTriggerValue()}_SaveToJson(){if(!this._savedData||!this._savedData.size)return null;const g={};for(const [h,m]of this._savedData.entries()){let k=m;"collmemory"===h&&(k=[...m.entries()].map(a=>[a[0].GetUID(),a[1].GetUID(),a[2]]));g[h]=k}return{ex:g}}_LoadFromJson(g){this._savedData&&(this._savedData.clear(),this._savedData=null);if(g){var h=this._runtime,
m=g.ex;if(m){g=this.GetSavedDataMap();g.clear();for(const [k,a]of Object.entries(m))m=a,"collmemory"===k&&(m=e.New(e.PairMap,a.map(b=>[h.GetInstanceByUID(b[0]),h.GetInstanceByUID(b[1]),b[2]]).filter(b=>b[0]&&b[1]))),g.set(k,m)}}}}}"use strict";
{const e=self.C3;function d(h,m){for(let k=0,a=h.length;k<a;++k)m[k]=h[k].Get(0)}const c=[],f=function(){},g=function*(){};e.Action=class extends e.DefendedBase{constructor(h,m,k){super();this._eventBlock=h;this._runtime=h=h.GetRuntime();this._index=k;this._sid=4<=m.length?m[3]:-1;this._actionReturnType=5<=m.length?m[4]:0;this._behaviorType=this._objectClass=this._func=null;this._behaviorIndex=-1;this._systemPlugin=null;this._callFunctionName="";this._combinedSolModifiers=this._callEventBlock=null;
this.DebugRun=this.Run=f;this._parameters=[];this._results=[];this._anyParamVariesPerInstance=!1;this._unsavedData=this._savedData=null;const a=(k=-3===m[0])?m[2]:m[5];this._debugData=h.IsDebug()||k?{isBreakpoint:a[0],canDebug:a[1],index:a[2]}:null;-1===m[0]?(this._systemPlugin=h.GetSystemPlugin(),this._func=h.GetObjectReference(m[1])):-2===m[0]?this._callFunctionName=m[1]:k?(this._func=h.GetObjectReference(m[1]),this.Run=this.RunUserScript,this.DebugRun=this.DebugRunUserScript,this._actionReturnType=
1):(this._func=h.GetObjectReference(m[1]),this._objectClass=h.GetObjectClassByIndex(m[0]),m[2]&&(this._behaviorType=this._objectClass.GetBehaviorTypeByName(m[2]),this._behaviorIndex=this._objectClass.GetBehaviorIndexByName(m[2])));if(7===m.length){m=m[6];for(const b of m)this._parameters.push(e.Parameter.Create(this,b,this._parameters.length)),this._results.push(0)}0===this._parameters.length&&(this._results=this._parameters=c);this._eventBlock.GetEventSheetManager()._RegisterAction(this)}static Create(h,
m,k){return e.New(e.Action,h,m,k)}_PostInit(){for(var h of this._parameters)h._PostInit(),h.VariesPerInstance()&&(this._anyParamVariesPerInstance=!0);if(this._systemPlugin)this._SetSystemRunMethod(),this.DebugRun=this._DebugRunSystem;else if(this._callFunctionName)this._SetCallFunctionRunMethod(),this._callFunctionName="";else if(this.Run===this.RunUserScript){h=this._func;const m=this._runtime.GetEventSheetManager()._GetLocalVariablesScriptInterface(this._eventBlock);this._func=h.bind(null,this._runtime.GetIRuntime(),
m)}else this._behaviorType?this.IsAsync()?(this.Run=this._RunBehavior_Async,this.DebugRun=this._DebugRunBehavior_Async):(this.Run=this._RunBehavior,this.DebugRun=this._DebugRunBehavior):this._objectClass.GetPlugin().IsSingleGlobal()?(this._SetSingleGlobalRunMethod(),this.DebugRun=this._DebugRunSingleGlobal):this.IsAsync()?(this.Run=this._RunObject_Async,this.DebugRun=this._DebugRunObject_Async):this._parameters.length?this._parameters.every(m=>m.VariesPerInstance())?(this.Run=this._RunObject_AllParamsVary,
this.DebugRun=this._DebugRunObject_AllParamsVary):this._anyParamVariesPerInstance?(this.Run=this._RunObject_SomeParamsVary,this.DebugRun=this._DebugRunObject_SomeParamsVary):this._parameters.every(m=>m.IsConstant())?(d(this._parameters,this._results),this.Run=this._RunObject_ParamsConst,this.DebugRun=this._DebugRunObject_ParamsConst):(this.Run=this._RunObject_ParamsDontVary,this.DebugRun=this._DebugRunObject_ParamsDontVary):(this.Run=this._RunObject_ParamsConst,this.DebugRun=this._DebugRunObject_ParamsConst)}_SetSystemRunMethod(){this._SetRunMethodForBoundFunc(this._systemPlugin,
this._systemPlugin,this._RunSystem)}_SetSingleGlobalRunMethod(){const h=this._objectClass.GetPlugin(),m=this._objectClass.GetSingleGlobalInstance().GetSdkInstance();this._SetRunMethodForBoundFunc(h,m,this._RunSingleGlobal)}_SetCallFunctionRunMethod(){const h=this._eventBlock.GetEventSheetManager(),m=h.GetFunctionBlockByName(this._callFunctionName);m.IsEnabled()?(this._callEventBlock=m.GetEventBlock(),this._combinedSolModifiers=[...new Set([...this._eventBlock.GetSolModifiersIncludingParents(),...this._callEventBlock.GetSolModifiersIncludingParents()])],
this._combinedSolModifiers=h._DeduplicateSolModifierList(this._combinedSolModifiers),this.Run=e.EventBlock.prototype.RunAsFunctionCall.bind(this._callEventBlock,this._combinedSolModifiers,this._parameters),this.DebugRun=this._DebugRunCallFunction):(this.Run=f,this.DebugRun=g)}_SetRunMethodForBoundFunc(h,m,k){const a=this._func,b=this._parameters;if(0===b.length)this.Run=h._GetBoundACEMethod(a,m);else if(1===b.length){const l=b[0];if(l.IsConstant())this.Run=h._GetBoundACEMethod_1param(a,m,l.Get(0));
else{const p=h._GetBoundACEMethod(a,m);this.Run=function(){return p(l.Get(0))}}}else if(2===b.length){const l=b[0],p=b[1];if(l.IsConstant()&&p.IsConstant())this.Run=h._GetBoundACEMethod_2params(a,m,l.Get(0),p.Get(0));else{const r=h._GetBoundACEMethod(a,m);this.Run=function(){return r(l.Get(0),p.Get(0))}}}else if(3===b.length){const l=b[0],p=b[1],r=b[2];if(l.IsConstant()&&p.IsConstant()&&r.IsConstant())this.Run=h._GetBoundACEMethod_3params(a,m,l.Get(0),p.Get(0),r.Get(0));else{const t=h._GetBoundACEMethod(a,
m);this.Run=function(){return t(l.Get(0),p.Get(0),r.Get(0))}}}else this.Run=k}GetSID(){return this._sid}IsAsync(){return 1===this._actionReturnType}CanBailOut(){return 2===this._actionReturnType}HasReturnType(){return 0!==this._actionReturnType}GetObjectClass(){return this._objectClass}GetEventBlock(){return this._eventBlock}GetRuntime(){return this._runtime}GetIndex(){return this._index}GetDebugIndex(){return this._debugData.index}GetCombinedSolModifiers(){return this._combinedSolModifiers}IsBreakpoint(){return this._debugData.isBreakpoint}_SetBreakpoint(h){this._debugData.isBreakpoint=
!!h;this._eventBlock._UpdateCanRunFastRecursive()}_DebugReturnsGenerator(){return this._debugData.canDebug}DebugCanRunFast(){return!this.IsBreakpoint()&&!this._runtime.DebugBreakNext()&&!this._DebugReturnsGenerator()}GetSavedDataMap(){this._savedData||(this._savedData=new Map);return this._savedData}GetUnsavedDataMap(){this._unsavedData||(this._unsavedData=new Map);return this._unsavedData}_RunSystem(){const h=this._results;d(this._parameters,h);return this._func.apply(this._systemPlugin,h)}*_DebugRunSystem(){if(this.IsBreakpoint()||
this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const h=this._results;d(this._parameters,h);return yield*this._func.apply(this._systemPlugin,h)}return this.Run()}*_DebugRunCallFunction(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;return yield*this._callEventBlock.DebugRunAsFunctionCall(this._combinedSolModifiers,this._parameters)}_RunSingleGlobal(){const h=this._results;d(this._parameters,h);return this._func.apply(this._objectClass.GetSingleGlobalInstance().GetSdkInstance(),
h)}*_DebugRunSingleGlobal(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const h=this._results;d(this._parameters,h);return yield*this._func.apply(this._objectClass.GetSingleGlobalInstance().GetSdkInstance(),h)}return this.Run()}_RunObject_ParamsConst(){const h=this._results,m=this._objectClass.GetCurrentSol().GetInstances();for(let k=0,a=m.length;k<a;++k)this._func.apply(m[k].GetSdkInstance(),h)}*_DebugRunObject_ParamsConst(){if(this.IsBreakpoint()||
this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const h=this._results,m=this._objectClass.GetCurrentSol().GetInstances();for(let k=0,a=m.length;k<a;++k)yield*this._func.apply(m[k].GetSdkInstance(),h)}else this._RunObject_ParamsConst()}_RunObject_ParamsDontVary(){const h=this._results;d(this._parameters,h);const m=this._objectClass.GetCurrentSol().GetInstances();for(let k=0,a=m.length;k<a;++k)this._func.apply(m[k].GetSdkInstance(),h)}*_DebugRunObject_ParamsDontVary(){if(this.IsBreakpoint()||
this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const h=this._results;d(this._parameters,h);const m=this._objectClass.GetCurrentSol().GetInstances();for(let k=0,a=m.length;k<a;++k)yield*this._func.apply(m[k].GetSdkInstance(),h)}else this._RunObject_ParamsDontVary()}_RunObject_AllParamsVary(){const h=this._parameters,m=this._results,k=this._func,a=this._objectClass.GetCurrentSol().GetInstances();for(let b=0,l=a.length;b<l;++b){const p=a[b];for(let r=0,t=h.length;r<t;++r)m[r]=
h[r].Get(b);k.apply(p.GetSdkInstance(),m)}}*_DebugRunObject_AllParamsVary(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const h=this._parameters,m=this._results,k=this._func,a=this._objectClass.GetCurrentSol().GetInstances();for(let b=0,l=a.length;b<l;++b){const p=a[b];for(let r=0,t=h.length;r<t;++r)m[r]=h[r].Get(b);yield*k.apply(p.GetSdkInstance(),m)}}else this._RunObject_AllParamsVary()}_RunObject_SomeParamsVary(){const h=this._parameters,
m=this._results,k=this._func,a=this._objectClass.GetCurrentSol().GetInstances();for(let l=0,p=h.length;l<p;++l){var b=h[l];b.VariesPerInstance()||(m[l]=b.Get(0))}for(let l=0,p=a.length;l<p;++l){b=a[l];for(let r=0,t=h.length;r<t;++r){const u=h[r];u.VariesPerInstance()&&(m[r]=u.Get(l))}k.apply(b.GetSdkInstance(),m)}}*_DebugRunObject_SomeParamsVary(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const m=this._parameters,k=this._results,a=this._func,
b=this._objectClass.GetCurrentSol().GetInstances();for(let l=0,p=m.length;l<p;++l){var h=m[l];h.VariesPerInstance()||(k[l]=h.Get(0))}for(let l=0,p=b.length;l<p;++l){h=b[l];for(let r=0,t=m.length;r<t;++r){const u=m[r];u.VariesPerInstance()&&(k[r]=u.Get(l))}yield*a.apply(h.GetSdkInstance(),k)}}else this._RunObject_SomeParamsVary()}_RunBehavior(){var h=this._objectClass;const m=h.IsFamily(),k=h.GetFamilyIndex(),a=this._parameters,b=this._anyParamVariesPerInstance,l=this._results,p=this._func,r=this._behaviorIndex;
h=h.GetCurrentSol().GetInstances();for(let w=0,x=a.length;w<x;++w){var t=a[w];t.VariesPerInstance()||(l[w]=t.Get(0))}for(let w=0,x=h.length;w<x;++w){t=h[w];if(b)for(let A=0,E=a.length;A<E;++A){var u=a[A];u.VariesPerInstance()&&(l[A]=u.Get(w))}u=m?t.GetObjectClass().GetFamilyBehaviorOffset(k):0;p.apply(t.GetBehaviorInstances()[r+u].GetSdkInstance(),l)}}*_DebugRunBehavior(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){var h=this._objectClass;const a=
h.IsFamily(),b=h.GetFamilyIndex(),l=this._parameters,p=this._anyParamVariesPerInstance,r=this._results,t=this._func,u=this._behaviorIndex;h=h.GetCurrentSol().GetInstances();for(let w=0,x=l.length;w<x;++w){var m=l[w];m.VariesPerInstance()||(r[w]=m.Get(0))}for(let w=0,x=h.length;w<x;++w){m=h[w];if(p)for(let A=0,E=l.length;A<E;++A){var k=l[A];k.VariesPerInstance()&&(r[A]=k.Get(w))}k=a?m.GetObjectClass().GetFamilyBehaviorOffset(b):0;yield*t.apply(m.GetBehaviorInstances()[u+k].GetSdkInstance(),r)}}else this._RunBehavior()}_RunObject_Async(){const h=
this._parameters,m=this._results,k=this._func,a=this._objectClass.GetCurrentSol().GetInstances(),b=[];for(let l=0,p=a.length;l<p;++l){const r=a[l];for(let t=0,u=h.length;t<u;++t)m[t]=h[t].Get(l);b.push(k.apply(r.GetSdkInstance(),m))}return Promise.all(b)}*_DebugRunObject_Async(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){const h=this._parameters,m=this._results,k=this._func,a=this._objectClass.GetCurrentSol().GetInstances(),b=[];for(let l=0,
p=a.length;l<p;++l){const r=a[l];for(let t=0,u=h.length;t<u;++t)m[t]=h[t].Get(l);b.push(yield*k.apply(r.GetSdkInstance(),m))}return Promise.all(b)}return this._RunObject_Async()}_RunBehavior_Async(){var h=this._objectClass;const m=h.IsFamily(),k=h.GetFamilyIndex(),a=this._parameters,b=this._results,l=this._func,p=this._behaviorIndex;h=h.GetCurrentSol().GetInstances();const r=[];for(let t=0,u=h.length;t<u;++t){const w=h[t];for(let A=0,E=a.length;A<E;++A)b[A]=a[A].Get(t);const x=m?w.GetObjectClass().GetFamilyBehaviorOffset(k):
0;r.push(l.apply(w.GetBehaviorInstances()[p+x].GetSdkInstance(),b))}return Promise.all(r)}*_DebugRunBehavior_Async(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;if(this._DebugReturnsGenerator()){var h=this._objectClass;const m=h.IsFamily(),k=h.GetFamilyIndex(),a=this._parameters,b=this._results,l=this._func,p=this._behaviorIndex;h=h.GetCurrentSol().GetInstances();const r=[];for(let t=0,u=h.length;t<u;++t){const w=h[t];for(let A=0,E=a.length;A<E;++A)b[A]=a[A].Get(t);const x=m?
w.GetObjectClass().GetFamilyBehaviorOffset(k):0;r.push(yield*l.apply(w.GetBehaviorInstances()[p+x].GetSdkInstance(),b))}return Promise.all(r)}return this._RunBehavior_Async()}async RunUserScript(){try{await this._func()}catch(h){console.error(`Unhandled exception running script %c${this._eventBlock.GetEventSheet().GetName()}, event ${this._eventBlock.GetDisplayNumber()}, action ${this.GetDebugIndex()+1}:`,"font-size: 1.2em; font-weight: bold;",h),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),
e.EventScript.HadUserScriptException()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),e.EventScript.SetHadUserScriptException())}}*DebugRunUserScript(){if(this.IsBreakpoint()||this._runtime.DebugBreakNext())yield this;return this.RunUserScript()}_SaveToJson(){return this._savedData&&this._savedData.size?{ex:e.ToSuperJSON(this._savedData)}:null}_LoadFromJson(h){this._savedData&&
(this._savedData.clear(),this._savedData=null);h&&(h=h.ex)&&(this._savedData=e.FromSuperJSON(h))}}}"use strict";
{const e=self.C3,d=new e.Color;function c(L,O){return e.compare(this.GetWorldInfo().GetX(),L,O)}function f(L,O){return e.compare(this.GetWorldInfo().GetY(),L,O)}function g(){const L=this.GetWorldInfo();return L.IsInViewport(L.GetLayer().GetViewport())}function h(){var L=this.GetWorldInfo();const O=L.GetLayout();L=L.GetBoundingBox();return 0>L.getRight()||0>L.getBottom()||L.getLeft()>O.GetWidth()||L.getTop()>O.GetHeight()}function m(L,O,V){const aa=this.GetCurrentSol(),fa=aa.GetInstances();if(!fa.length)return!1;
let ha=fa[0];var da=ha.GetWorldInfo();let ta=ha,ua=e.distanceSquared(da.GetX(),da.GetY(),O,V);for(let ya=1,Ha=fa.length;ya<Ha;++ya)if(ha=fa[ya],da=ha.GetWorldInfo(),da=e.distanceSquared(da.GetX(),da.GetY(),O,V),0===L&&da<ua||1===L&&da>ua)ua=da,ta=ha;aa.PickOne(ta);return!0}function k(L){const O=this.GetWorldInfo();O.GetX()!==L&&(O.SetX(L),O.SetBboxChanged())}function a(L){const O=this.GetWorldInfo();O.GetY()!==L&&(O.SetY(L),O.SetBboxChanged())}function b(L,O){const V=this.GetWorldInfo();V.EqualsXY(L,
O)||(V.SetXY(L,O),V.SetBboxChanged())}function l(L,O){if(L&&(L=L.GetPairedInstance(this._inst))){var [V,aa]=L.GetImagePoint(O);O=this.GetWorldInfo();if(O.GetX()!==V||O.GetY()!==aa)O.SetXY(V,aa),O.SetBboxChanged()}}function p(L){if(0!==L){var O=this.GetWorldInfo();O.OffsetXY(O.GetCosAngle()*L,O.GetSinAngle()*L);O.SetBboxChanged()}}function r(L,O){if(0!==O){var V=this.GetWorldInfo();L=e.toRadians(L);V.OffsetXY(Math.cos(L)*O,Math.sin(L)*O);V.SetBboxChanged()}}function t(){return this.GetWorldInfo().GetX()}
function u(){return this.GetWorldInfo().GetY()}function w(){return this._runtime.GetDt(this._inst)}function x(L,O){return e.compare(this.GetWorldInfo().GetWidth(),L,O)}function A(L,O){return e.compare(this.GetWorldInfo().GetHeight(),L,O)}function E(L){const O=this.GetWorldInfo();O.GetWidth()!==L&&(O.SetWidth(L),O.SetBboxChanged())}function y(L){const O=this.GetWorldInfo();O.GetHeight()!==L&&(O.SetHeight(L),O.SetBboxChanged())}function B(L,O){const V=this.GetWorldInfo();if(V.GetWidth()!==L||V.GetHeight()!==
O)V.SetSize(L,O),V.SetBboxChanged()}function H(){return this.GetWorldInfo().GetWidth()}function P(){return this.GetWorldInfo().GetHeight()}function F(){return this.GetWorldInfo().GetBoundingBox().getLeft()}function I(){return this.GetWorldInfo().GetBoundingBox().getTop()}function N(){return this.GetWorldInfo().GetBoundingBox().getRight()}function R(){return this.GetWorldInfo().GetBoundingBox().getBottom()}function S(L,O){return e.angleDiff(this.GetWorldInfo().GetAngle(),e.toRadians(O))<=e.toRadians(L)}
function Y(L){return e.angleClockwise(this.GetWorldInfo().GetAngle(),e.toRadians(L))}function W(L,O){L=e.toRadians(L);O=e.toRadians(O);const V=this.GetWorldInfo().GetAngle();return e.angleClockwise(O,L)?e.angleClockwise(V,L)&&!e.angleClockwise(V,O):!(!e.angleClockwise(V,L)&&e.angleClockwise(V,O))}function ea(L){const O=this.GetWorldInfo();L=e.clampAngle(e.toRadians(L));isNaN(L)||O.GetAngle()===L||(O.SetAngle(L),O.SetBboxChanged())}function na(L){if(!isNaN(L)&&0!==L){var O=this.GetWorldInfo();O.SetAngle(O.GetAngle()+
e.toRadians(L));O.SetBboxChanged()}}function ja(L){if(!isNaN(L)&&0!==L){var O=this.GetWorldInfo();O.SetAngle(O.GetAngle()-e.toRadians(L));O.SetBboxChanged()}}function wa(L,O){const V=this.GetWorldInfo(),aa=V.GetAngle();L=e.angleRotate(aa,e.toRadians(O),e.toRadians(L));isNaN(L)||aa===L||(V.SetAngle(L),V.SetBboxChanged())}function sa(L,O,V){const aa=this.GetWorldInfo(),fa=aa.GetAngle();O-=aa.GetX();V-=aa.GetY();L=e.angleRotate(fa,Math.atan2(V,O),e.toRadians(L));isNaN(L)||fa===L||(aa.SetAngle(L),aa.SetBboxChanged())}
function Da(L,O){const V=this.GetWorldInfo(),aa=V.GetAngle();L-=V.GetX();O-=V.GetY();O=Math.atan2(O,L);isNaN(O)||aa===O||(V.SetAngle(O),V.SetBboxChanged())}function Ea(){return e.toDegrees(this.GetWorldInfo().GetAngle())}function Aa(L,O){return e.compare(e.round6dp(100*this.GetWorldInfo().GetOpacity()),L,O)}function za(){return this.GetWorldInfo().IsVisible()}function ia(L){const O=this.GetWorldInfo();L=2===L?!O.IsVisible():0!==L;O.IsVisible()!==L&&(O.SetVisible(L),this._runtime.UpdateRender())}function Fa(L){L=
e.clamp(L/100,0,1);const O=this.GetWorldInfo();O.GetOpacity()!==L&&(O.SetOpacity(L),this._runtime.UpdateRender())}function xa(L){d.setFromRgbValue(L);L=this.GetWorldInfo();L.GetUnpremultipliedColor().equalsIgnoringAlpha(d)||(L.SetUnpremultipliedColor(d),this._runtime.UpdateRender())}function Ca(){const L=this.GetWorldInfo().GetUnpremultipliedColor();return e.PackRGBAEx(L.getR(),L.getG(),L.getB(),L.getA())}function Pa(){return e.round6dp(100*this.GetWorldInfo().GetOpacity())}function Qa(L){return L?
this.GetWorldInfo().GetLayer()===L:!1}function Ra(L){const O=this.GetCurrentSol(),V=O.GetInstances();if(!V.length)return!1;let aa=V[0];for(let fa=1,ha=V.length;fa<ha;++fa){const da=V[fa],ta=da.GetWorldInfo(),ua=aa.GetWorldInfo(),ya=ta.GetLayer().GetIndex(),Ha=ua.GetLayer().GetIndex();if(0===L){if(ya>Ha||ya===Ha&&ta.GetZIndex()>ua.GetZIndex())aa=da}else if(ya<Ha||ya===Ha&&ta.GetZIndex()<ua.GetZIndex())aa=da}O.PickOne(aa);return!0}function Ja(L,O,V){const aa=this.GetWorldInfo();L=0===L?aa.GetZElevation():
aa.GetTotalZElevation();return e.compare(L,O,V)}function Sa(){this.GetWorldInfo().ZOrderMoveToTop()}function Ta(){this.GetWorldInfo().ZOrderMoveToBottom()}function Ua(L){L&&this.GetWorldInfo().ZOrderMoveToLayer(L)}function Va(L,O){L=0===L;O&&(O=O.GetFirstPicked(this.GetInstance()))&&this.GetWorldInfo().ZOrderMoveAdjacentToInstance(O,L)}function Wa(L){const O=this.GetWorldInfo();O.GetZElevation()!==L&&(O.SetZElevation(L),this._runtime.UpdateRender())}function Xa(){return this.GetWorldInfo().GetLayer().GetIndex()}
function Ya(){return this.GetWorldInfo().GetLayer().GetName()}function Ka(){return this.GetWorldInfo().GetZIndex()}function Za(){return this.GetWorldInfo().GetZElevation()}function $a(){return this.GetWorldInfo().GetTotalZElevation()}function ab(L,O){if(O=this.GetObjectClass().GetEffectList().GetEffectTypeByName(O)){O=O.GetIndex();L=1===L;var V=this.GetWorldInfo().GetInstanceEffectList();V.IsEffectIndexActive(O)!==L&&(V.SetEffectIndexActive(O,L),V.UpdateActiveEffects(),this._runtime.UpdateRender())}}
function bb(L,O,V){var aa=this.GetObjectClass().GetEffectList().GetEffectTypeByName(L);if(aa){L=aa.GetIndex();var fa=this.GetWorldInfo().GetInstanceEffectList(),ha=fa.GetEffectParametersForIndex(L);O=Math.floor(O);if(!(0>O||O>=ha.length)){aa=aa.GetShaderProgram().GetParameterType(O);if("color"===aa){d.setFromRgbValue(V);O=ha[O];if(d.equalsIgnoringAlpha(O))return;O.copyRgb(d)}else{"percent"===aa&&(V/=100);if(ha[O]===V)return;ha[O]=V}fa.IsEffectIndexActive(L)&&this._runtime.UpdateRender()}}}function cb(){return this.GetWorldInfo().HasParent()}
function db(){return this.GetWorldInfo().HasChildren()}function eb(L,O){const V=this.GetCurrentSol().GetInstances();if(0===V.length)return!1;const aa=L.GetCurrentSol();var fa=aa.GetInstances();if(0===fa.length)return!1;fa=new Set(fa);const ha=new Set;for(let ta=0,ua=V.length;ta<ua;++ta){var da=V[ta];if(1===O)for(const ya of da.parents())ya.BelongsToObjectClass(L)&&fa.has(ya)&&ha.add(ya);else{if(0===O){if(da=da.GetParent(),null===da)continue}else da=da.GetTopParent();da.BelongsToObjectClass(L)&&fa.has(da)&&
ha.add(da)}}if(0===ha.size)return!1;aa.SetSetPicked(ha);L.ApplySolToContainer();return!0}function fb(L,O){const V=this.GetCurrentSol().GetInstances();if(0===V.length)return!1;const aa=L.GetCurrentSol();var fa=aa.GetInstances();if(0===fa.length)return!1;fa=new Set(fa);const ha=new Set;for(let da=0,ta=V.length;da<ta;++da){const ua=V[da];2===O&&!ua.HasChildren()&&ua.BelongsToObjectClass(L)&&fa.has(ua)&&ha.add(ua);for(const ya of 0===O?ua.children():ua.allChildren())2===O&&ya.HasChildren()||ya.BelongsToObjectClass(L)&&
fa.has(ya)&&ha.add(ya)}if(0===ha.size)return!1;aa.SetSetPicked(ha);L.ApplySolToContainer();return!0}function gb(L,O){const V=this.GetCurrentSol().GetInstances();if(0===V.length)return!1;const aa=L.GetCurrentSol();var fa=aa.GetInstances();if(0===fa.length)return!1;fa=new Set(fa);const ha=[];for(let da=0,ta=V.length;da<ta;++da){const ua=V[da].GetChildAt(O);null!==ua&&ua.BelongsToObjectClass(L)&&fa.has(ua)&&ha.push(ua)}if(0===ha.length)return!1;aa.SetArrayPicked(ha);L.ApplySolToContainer();return!0}
function hb(L,O){return e.compare(this._inst.GetChildCount(),L,O)}function ib(L,O,V,aa,fa,ha,da,ta){const ua=this._inst,ya=this._runtime.GetCurrentAction().GetObjectClass();for(const Ha of L.allCorrespondingInstances(ua,ya)){if(!Ha.GetPlugin().SupportsSceneGraph())break;ua.AddChild(Ha,{transformX:O,transformY:V,transformWidth:aa,transformHeight:fa,transformAngle:ha,transformZElevation:da,destroyWithParent:ta})}}function jb(L){const O=this._inst,V=this._runtime.GetCurrentAction().GetObjectClass();
for(const aa of L.allCorrespondingInstances(O,V))O.RemoveChild(aa)}function ma(){this._inst.HasParent()&&this._inst.GetParent().RemoveChild(this._inst)}function Ga(){return this._inst.GetChildCount()}function kb(L,O){L=Math.floor(L);O=Math.floor(O);const V=this.GetWorldInfo();2>L||2>O||!isFinite(L)||!isFinite(O)?(V.ReleaseMesh(),V.SetBboxChanged()):V.CreateMesh(L,O)}function lb(L,O,V,aa,fa,ha,da){const ta=this.GetWorldInfo();ta.SetMeshPoint(L,O,{mode:0===V?"absolute":"relative",x:aa,y:fa,u:ha,v:da})&&
ta.SetBboxChanged()}function mb(){const L=this.GetWorldInfo();return L.HasMesh()?L.GetSourceMesh().GetHSize():0}function nb(){const L=this.GetWorldInfo();return L.HasMesh()?L.GetSourceMesh().GetVSize():0}function ob(L){const O=this.GetWorldInfo();L=2===L?!O.IsVisible():0!==L;O.IsVisible()!==L&&O.SetVisible(L)}function pb(L,O){this.SetElementCSSStyle(L,O)}function La(L,O){this.SetElementAttribute(L,""+O)}function Ma(L){this.RemoveElementAttribute(L)}function Na(){this.FocusElement()}function Oa(){this.BlurElement()}
function Ia(){return this.IsElementFocused()}function n(L){this._SetEnabled(0!==L)}function q(){return this._IsEnabled()}function v(L,O,V){return e.compare(this.GetInstance().GetInstanceVariableValue(L),O,V)}function z(L){return!!this.GetInstance().GetInstanceVariableValue(L)}function C(L,O){const V=this.GetCurrentSol(),aa=V.GetInstances();if(!aa.length)return!1;let fa=aa[0],ha=fa,da=fa.GetInstanceVariableValue(O);for(let ta=1,ua=aa.length;ta<ua;++ta){fa=aa[ta];const ya=fa.GetInstanceVariableValue(O);
if(0===L&&ya<da||1===L&&ya>da)da=ya,ha=fa}V.PickOne(ha);return!0}function D(L){return this._runtime.GetCurrentCondition().IsInverted()?J(this,L):G(this,L)}function G(L,O){O=L.GetRuntime().GetInstanceByUID(O);if(!O)return!1;const V=L.GetCurrentSol();if(!V.IsSelectAll()&&!V._GetOwnInstances().includes(O))return!1;if(L.IsFamily()){if(O.GetObjectClass().BelongsToFamily(L))return V.PickOne(O),L.ApplySolToContainer(),!0}else if(O.GetObjectClass()===L)return V.PickOne(O),L.ApplySolToContainer(),!0;return!1}
function J(L,O){const V=L.GetCurrentSol();if(V.IsSelectAll()){V._SetSelectAll(!1);V.ClearArrays();var aa=L.GetInstances();for(let ha=0,da=aa.length;ha<da;++ha){var fa=aa[ha];fa.GetUID()===O?V._PushElseInstance(fa):V._PushInstance(fa)}L.ApplySolToContainer();return!!V._GetOwnInstances().length}aa=V._GetOwnInstances();fa=0;for(let ha=0,da=aa.length;ha<da;++ha){const ta=aa[ha];aa[fa]=ta;ta.GetUID()===O?V._PushElseInstance(ta):++fa}e.truncateArray(aa,fa);L.ApplySolToContainer();return!!aa.length}function K(){this._runtime.DestroyInstance(this._inst)}
function M(){return!0}function Q(){return!0}function T(L,O){this.GetInstance().SetInstanceVariableValue(L,O)}function X(L,O){const V=this.GetInstance(),aa=V.GetInstanceVariableValue(L);"number"===typeof aa&&"number"!==typeof O?O=parseFloat(O):"string"===typeof aa&&"string"!==typeof O&&(O=O.toString());V.SetInstanceVariableValue(L,aa+O)}function U(L,O){const V=this.GetInstance(),aa=V.GetInstanceVariableValue(L);"number"===typeof aa&&("number"!==typeof O&&(O=parseFloat(O)),V.SetInstanceVariableValue(L,
aa-O))}function ca(L,O){this.GetInstance().SetInstanceVariableValue(L,O?1:0)}function ba(L){const O=this.GetInstance();O.SetInstanceVariableValue(L,0===O.GetInstanceVariableValue(L)?1:0)}function Z(L){let O;try{O=JSON.parse(L)}catch(V){console.error("Failed to load from JSON string: ",V);return}this.GetInstance().LoadFromJson(O,"state")}function ra(){return JSON.stringify(this.GetInstance().SaveToJson("state"))}function la(){return this.GetInstance().GetObjectClass().GetName()}function pa(){const L=
this._runtime.GetCurrentEventStackFrame().GetExpressionObjectClass();let O=L.GetInstanceCount();const V=this._runtime._GetInstancesPendingCreate();for(const aa of V)L.IsFamily()?aa.GetObjectClass().BelongsToFamily(L)&&++O:aa.GetObjectClass()===L&&++O;return O}function qa(){return this._runtime.GetCurrentEventStackFrame().GetExpressionObjectClass().GetCurrentSol().GetInstances().length}function oa(){return this._inst.GetIID()}function Ba(){return this._inst.GetUID()}e.AddCommonACEs=function(L,O){const V=
L[1],aa=L[4],fa=L[5],ha=L[6],da=L[7],ta=L[8],ua=L[10],ya=L[11],Ha=L[12],qb=L[13],rb=L[14],va=O.Cnds,ka=O.Acts;O=O.Exps;L[3]&&(va.CompareX=c,va.CompareY=f,va.IsOnScreen=g,va.IsOutsideLayout=h,va.PickDistance=m,ka.SetX=k,ka.SetY=a,ka.SetPos=b,ka.SetPosToObject=l,ka.MoveForward=p,ka.MoveAtAngle=r,O.X=t,O.Y=u,O.dt=w);aa&&(va.CompareWidth=x,va.CompareHeight=A,ka.SetWidth=E,ka.SetHeight=y,ka.SetSize=B,O.Width=H,O.Height=P,O.BBoxLeft=F,O.BBoxTop=I,O.BBoxRight=N,O.BBoxBottom=R);fa&&(va.AngleWithin=S,va.IsClockwiseFrom=
Y,va.IsBetweenAngles=W,ka.SetAngle=ea,ka.RotateClockwise=na,ka.RotateCounterclockwise=ja,ka.RotateTowardAngle=wa,ka.RotateTowardPosition=sa,ka.SetTowardPosition=Da,O.Angle=Ea);ha&&(va.IsVisible=za,va.CompareOpacity=Aa,ka.SetVisible=ia,ka.SetOpacity=Fa,ka.SetDefaultColor=xa,O.Opacity=Pa,O.ColorValue=Ca);da&&(va.IsOnLayer=Qa,va.PickTopBottom=Ra,va.CompareZElevation=Ja,ka.MoveToTop=Sa,ka.MoveToBottom=Ta,ka.MoveToLayer=Ua,ka.ZMoveToObject=Va,ka.SetZElevation=Wa,O.LayerNumber=Xa,O.LayerName=Ya,O.ZIndex=
Ka,O.ZElevation=Za,O.TotalZElevation=$a);ta&&(ka.SetEffectEnabled=ab,ka.SetEffectParam=bb);qb&&(va.HasParent=cb,va.HasChildren=db,va.PickParent=eb,va.PickChildren=fb,va.PickNthChild=gb,va.CompareChildCount=hb,ka.AddChild=ib,ka.RemoveChild=jb,ka.RemoveFromParent=ma,O.ChildCount=Ga);rb&&(ka.SetMeshSize=kb,ka.SetMeshPoint=lb,O.MeshColumns=mb,O.MeshRows=nb);ua&&(va.IsVisible=za,ka.SetVisible=ob,ka.SetCSSStyle=pb,ka.SetElemAttribute=La,ka.RemoveElemAttribute=Ma);ya&&(va.IsFocused=Ia,ka.SetFocus=Na,ka.SetBlur=
Oa);Ha&&(va.IsEnabled=q,ka.SetEnabled=n);V||(va.CompareInstanceVar=v,va.IsBoolInstanceVarSet=z,va.PickInstVarHiLow=C,va.PickByUID=D,ka.SetInstanceVar=T,ka.AddInstanceVar=X,ka.SubInstanceVar=U,ka.SetBoolInstanceVar=ca,ka.ToggleBoolInstanceVar=ba,va.OnCreated=M,va.OnDestroyed=Q,ka.Destroy=K,ka.LoadFromJsonString||(ka.LoadFromJsonString=Z),O.AsJSON||(O.AsJSON=ra),O.Count=pa,O.PickedCount=qa,O.IID=oa,O.UID=Ba,O.ObjectTypeName=la)}}"use strict";
{const e=self.C3;e.ScheduledWait=class extends e.DefendedBase{constructor(d){super();this._eventSheetManager=d;this._type="";this._time=-1;this._signalTag="";this._isSignalled=!1;this._event=null;this._actIndex=0;this._solModifiers=[];this._sols=new Map;this._callingFunctionBlock=null;this._asyncId=-1;this._functionParameters=null;this._shouldRelease=!1}Release(){this._type="";this._time=-1;this._signalTag="";this._functionParameters=this._callingFunctionBlock=this._event=null;this._asyncId=-1;e.clearArray(this._solModifiers);
for(const d of this._sols.values())d.Release();this._sols.clear()}_Init(){var d=this._eventSheetManager,c=d.GetRuntime().GetAllObjectClasses();const f=d.GetCurrentEventStackFrame();this._event=f.GetCurrentEvent();this._actIndex=f.GetActionIndex()+1;if(d=d.FindFirstFunctionBlockParent(this._event))this._callingFunctionBlock=d,this._functionParameters=d.CaptureFunctionParameters(),d.IsAsync()&&(this._asyncId=d.PauseCurrentAsyncFunction());for(const g of c)if(c=g.GetCurrentSol(),!c.IsSelectAll()||this._event.HasSolModifier(g))this._solModifiers.push(g),
this._sols.set(g,e.New(e.SolState,c))}InitTimer(d){this._type="timer";this._Init();this._time=this._eventSheetManager.GetRuntime().GetGameTime()+d}InitSignal(d){this._type="signal";this._Init();this._signalTag=d.toLowerCase()}InitPromise(d){this._type="promise";this._Init();d.then(()=>this.SetSignalled()).catch(c=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",c);this.SetSignalled()})}IsTimer(){return"timer"===this._type}IsSignal(){return"signal"===this._type}IsPromise(){return"promise"===
this._type}GetSignalTag(){return this._signalTag}IsSignalled(){return this._isSignalled}SetSignalled(){this._isSignalled=!0}_ShouldRun(){return this.IsTimer()?this._time<=this._eventSheetManager.GetRuntime().GetGameTime():this.IsSignalled()}_RestoreState(d){d._Restore(this._event,this._actIndex);for(const [c,f]of this._sols.entries())d=c.GetCurrentSol(),f._Restore(d);if(d=this._callingFunctionBlock)d.SetFunctionParameters(this._functionParameters),d.IsAsync()&&d.ResumeAsyncFunction(this._asyncId)}_Run(d){this._RestoreState(d);
this._event._ResumeActionsAndSubEvents(d);this._callingFunctionBlock&&this._callingFunctionBlock.IsAsync()&&this._callingFunctionBlock.MaybeFinishAsyncFunctionCall(this._asyncId);this._eventSheetManager.ClearSol(this._solModifiers);this._shouldRelease=!0}async _DebugRun(d){this._RestoreState(d);for(const c of this._event._DebugResumeActionsAndSubEvents(d))await this._eventSheetManager.GetRuntime().DebugBreak(c);this._callingFunctionBlock&&this._callingFunctionBlock.IsAsync()&&this._callingFunctionBlock.MaybeFinishAsyncFunctionCall(this._asyncId);
this._eventSheetManager.ClearSol(this._solModifiers);this._shouldRelease=!0}ShouldRelease(){return this._shouldRelease}RemoveInstances(d){for(const c of this._sols.values())c.RemoveInstances(d)}_SaveToJson(){const d={},c={t:this._time,st:this._signalTag,s:this._isSignalled,ev:this._event.GetSID(),sm:this._solModifiers.map(f=>f.GetSID()),sols:d};this._event._HasActionIndex(this._actIndex)&&(c.act=this._event.GetActionAt(this._actIndex).GetSID());for(const [f,g]of this._sols)d[f.GetSID().toString()]=
g._SaveToJson();return c}static _CreateFromJson(d,c){const f=d.GetRuntime();var g=d.GetEventBlockBySID(c.ev);if(!g)return null;let h=0;if(c.hasOwnProperty("act")){var m=d.GetActionBySID(c.act);if(!m)return null;h=m.GetIndex()}m=e.New(e.ScheduledWait,d);m._time=c.t;m._type=-1===m._time?"signal":"timer";m._signalTag=c.st;m._isSignalled=c.s;m._event=g;m._actIndex=h;for(var k of c.sm)(g=f.GetObjectClassBySID(k))&&m._solModifiers.push(g);for(const [a,b]of Object.entries(c.sols))if(c=parseInt(a,10),c=f.GetObjectClassBySID(c))k=
e.New(e.SolState,null),k._LoadFromJson(d,b),m._sols.set(c,k);return m}}}"use strict";
{const e=self.C3;e.SolState=class extends e.DefendedBase{constructor(d){super();this._objectClass=null;this._isSelectAll=!0;this._instances=[];d&&(this._objectClass=d.GetObjectClass(),this._isSelectAll=d.IsSelectAll(),e.shallowAssignArray(this._instances,d._GetOwnInstances()))}Release(){this._objectClass=null;e.clearArray(this._instances)}_Restore(d){d._SetSelectAll(this._isSelectAll);e.shallowAssignArray(d._GetOwnInstances(),this._instances)}RemoveInstances(d){e.arrayRemoveAllInSet(this._instances,
d)}_SaveToJson(){return{sa:this._isSelectAll,insts:this._instances.map(d=>d.GetUID())}}_LoadFromJson(d,c){d=d.GetRuntime();this._isSelectAll=!!c.sa;e.clearArray(this._instances);for(const f of c.insts)(c=d.GetInstanceByUID(f))&&this._instances.push(c)}}}"use strict";
{const e=self.C3;function d(c,f){let g=c.get(f);g||(g=new Map,c.set(f,g));return g}e.SDKPluginBase=class extends e.DefendedBase{constructor(c){super();this._runtime=c.runtime;this._isSingleGlobal=!!c.isSingleGlobal;this._isWorldType=!!c.isWorld;this._isRotatable=!!c.isRotatable;this._mustPredraw=!!c.mustPredraw;this._hasEffects=!!c.hasEffects;this._supportsSceneGraph=!!c.supportsSceneGraph;this._supportsMesh=!!c.supportsMesh;this._singleGlobalObjectClass=null;this._boundACEMethodCache=new Map;this._boundACEMethodCache_1param=
new Map;this._boundACEMethodCache_2params=new Map;this._boundACEMethodCache_3params=new Map}Release(){this._runtime=null}GetRuntime(){return this._runtime}OnCreate(){}IsSingleGlobal(){return this._isSingleGlobal}IsWorldType(){return this._isWorldType}IsRotatable(){return this._isRotatable}MustPreDraw(){return this._mustPredraw}HasEffects(){return this._hasEffects}SupportsSceneGraph(){return this._supportsSceneGraph}SupportsMesh(){return this._supportsMesh}_GetBoundACEMethod(c,f){if(!f)throw Error("missing 'this' binding");
let g=this._boundACEMethodCache.get(c);if(g)return g;g=c.bind(f);this._boundACEMethodCache.set(c,g);return g}_GetBoundACEMethod_1param(c,f,g){if(!f)throw Error("missing 'this' binding");const h=d(this._boundACEMethodCache_1param,c);let m=h.get(g);if(m)return m;m=c.bind(f,g);h.set(g,m);return m}_GetBoundACEMethod_2params(c,f,g,h){if(!f)throw Error("missing 'this' binding");var m=d(this._boundACEMethodCache_2params,c);m=d(m,g);let k=m.get(h);if(k)return k;k=c.bind(f,g,h);m.set(h,k);return k}_GetBoundACEMethod_3params(c,
f,g,h,m){if(!f)throw Error("missing 'this' binding");var k=d(this._boundACEMethodCache_3params,c);k=d(k,g);k=d(k,h);let a=k.get(m);if(a)return a;a=c.bind(f,g,h,m);k.set(m,a);return a}_SetSingleGlobalObjectClass(c){if(!this.IsSingleGlobal())throw Error("must be single-global plugin");this._singleGlobalObjectClass=c}GetSingleGlobalObjectClass(){if(!this.IsSingleGlobal())throw Error("must be single-global plugin");return this._singleGlobalObjectClass}GetSingleGlobalInstance(){if(!this.IsSingleGlobal())throw Error("must be single-global plugin");
return this._singleGlobalObjectClass.GetSingleGlobalInstance()}}}"use strict";
{const e=self.C3;e.SDKDOMPluginBase=class extends e.SDKPluginBase{constructor(d,c){super(d);this._domComponentId=c;this._nextElementId=0;this._instMap=new Map;this.AddElementMessageHandler("elem-focused",f=>f._OnElemFocused());this.AddElementMessageHandler("elem-blurred",f=>{f&&f._OnElemBlurred()})}Release(){super.Release()}_AddElement(d){const c=this._nextElementId++;this._instMap.set(c,d);return c}_RemoveElement(d){this._instMap.delete(d)}AddElementMessageHandler(d,c){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,
d,f=>{const g=this._instMap.get(f.elementId);c(g,f)})}}}"use strict";{const e=self.C3;e.SDKTypeBase=class extends e.DefendedBase{constructor(d){super();this._objectClass=d;this._runtime=d.GetRuntime();this._plugin=d.GetPlugin()}Release(){this._plugin=this._runtime=this._objectClass=null}GetObjectClass(){return this._objectClass}GetRuntime(){return this._runtime}GetPlugin(){return this._plugin}GetImageInfo(){return this._objectClass.GetImageInfo()}FinishCondition(d){}LoadTextures(d){}ReleaseTextures(){}OnDynamicTextureLoadComplete(){}PreloadTexturesWithInstances(d){}LoadTilemapData(){}GetScriptInterfaceClass(){return null}}}"use strict";
{const e=self.C3;e.SDKInstanceBase=class extends e.DefendedBase{constructor(d,c){super();this._inst=d;this._domComponentId=c;this._runtime=d.GetRuntime();this._objectClass=this._inst.GetObjectClass();this._sdkType=this._objectClass.GetSdkType();this._tick2Func=this._tickFunc=null;this._isTicking2=this._isTicking=!1;this._disposables=null;this._wasReleased=!1}Release(){this._wasReleased=!0;this._StopTicking();this._StopTicking2();this._tick2Func=this._tickFunc=null;this._disposables&&(this._disposables.Release(),
this._disposables=null);this._sdkType=this._objectClass=this._runtime=this._inst=null}WasReleased(){return this._wasReleased}GetInstance(){return this._inst}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetPlugin(){return this._sdkType.GetPlugin()}GetSdkType(){return this._sdkType}GetScriptInterface(){return this._inst.GetInterfaceClass()}Trigger(d){return this._runtime.Trigger(d,this._inst,null)}DebugTrigger(d){return this._runtime.DebugTrigger(d,this._inst,null)}TriggerAsync(d){return this._runtime.TriggerAsync(d,
this._inst,null)}FastTrigger(d,c){return this._runtime.FastTrigger(d,this._inst,c)}DebugFastTrigger(d,c){return this._runtime.DebugFastTrigger(d,this._inst,c)}ScheduleTriggers(d){return this._runtime.ScheduleTriggers(d)}AddDOMMessageHandler(d,c){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,d,c)}AddDOMMessageHandlers(d){for(const [c,f]of d)this.AddDOMMessageHandler(c,f)}PostToDOM(d,c){this._runtime.PostComponentMessageToDOM(this._domComponentId,d,c)}PostToDOMAsync(d,c){return this._runtime.PostComponentMessageToDOMAsync(this._domComponentId,
d,c)}_PostToDOMMaybeSync(d,c){if(this._runtime.IsInWorker())this.PostToDOM(d,c);else return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this._domComponentId,handler:d,data:c,responseId:null})}GetCurrentImageInfo(){return null}GetCurrentSurfaceSize(){var d=this.GetCurrentImageInfo();return d&&(d=d.GetTexture())?[d.GetWidth(),d.GetHeight()]:[100,100]}GetCurrentTexRect(){const d=this.GetCurrentImageInfo();return d?d.GetTexRect():null}GetImagePoint(d){d=this._inst.GetWorldInfo();
return[d.GetX(),d.GetY()]}Tick(){}Tick2(){}_StartTicking(){this._isTicking||(this._tickFunc||(this._tickFunc=()=>this.Tick()),this._runtime.Dispatcher().addEventListener("tick",this._tickFunc),this._isTicking=!0)}_StopTicking(){this._isTicking&&(this._runtime.Dispatcher().removeEventListener("tick",this._tickFunc),this._isTicking=!1)}IsTicking(){return this._isTicking}_StartTicking2(){this._isTicking2||(this._tick2Func||(this._tick2Func=()=>this.Tick2()),this._runtime.Dispatcher().addEventListener("tick2",
this._tick2Func),this._isTicking2=!0)}_StopTicking2(){this._isTicking2&&(this._runtime.Dispatcher().removeEventListener("tick2",this._tick2Func),this._isTicking2=!1)}IsTicking2(){return this._isTicking2}GetDebuggerProperties(){return[]}SaveToJson(){return null}LoadFromJson(d){}LoadTilemapData(d,c,f){}TestPointOverlapTile(d,c){}GetPropertyValueByIndex(d){}SetPropertyValueByIndex(d,c){}OffsetPropertyValueByIndex(d,c){if(0!==c){var f=this.GetPropertyValueByIndex(d);if("number"!==typeof f)throw Error("expected number");
this.SetPropertyValueByIndex(d,f+c)}}SetPropertyColorOffsetValueByIndex(d,c,f,g){}CallAction(d,...c){d.call(this,...c)}CallExpression(d,...c){return d.call(this,...c)}GetScriptInterfaceClass(){return null}}}"use strict";
{const e=self.C3;e.SDKWorldInstanceBase=class extends e.SDKInstanceBase{constructor(d,c){super(d,c);this._worldInfo=d.GetWorldInfo();this._webglcontextrestored_handler=this._webglcontextlost_handler=null}Release(){if(this._webglcontextlost_handler){const d=this._runtime.Dispatcher();d.removeEventListener("webglcontextlost",this._webglcontextlost_handler);d.removeEventListener("webglcontextrestored",this._webglcontextrestored_handler);this._webglcontextrestored_handler=this._webglcontextlost_handler=
null}this._worldInfo=null;super.Release()}HandleWebGLContextLoss(){if(!this._webglcontextlost_handler){this._webglcontextlost_handler=()=>this.OnWebGLContextLost();this._webglcontextrestored_handler=()=>this.OnWebGLContextRestored();var d=this._runtime.Dispatcher();d.addEventListener("webglcontextlost",this._webglcontextlost_handler);d.addEventListener("webglcontextrestored",this._webglcontextrestored_handler)}}OnWebGLContextLost(){}OnWebGLContextRestored(){}GetWorldInfo(){return this._worldInfo}}}"use strict";
{const e=self.C3,d=e.New(e.Rect);e.SDKDOMInstanceBase=class extends e.SDKWorldInstanceBase{constructor(c,f){super(c,f);this._elementId=this.GetPlugin()._AddElement(this);this._isElementShowing=!0;this._autoFontSize=this._elemHasFocus=!1;this._lastRect=e.New(e.Rect,0,0,-1,-1);c=this._runtime.GetCanvasManager();this._lastWindowWidth=c.GetLastWidth();this._lastWindowHeight=c.GetLastHeight();this._isPendingUpdateState=!1;this._StartTicking()}Release(){this.GetPlugin()._RemoveElement(this._elementId);
this.PostToDOMElement("destroy");this._elementId=-1;super.Release()}_GetElementInDOMMode(){if(this._runtime.IsInWorker())throw Error("not valid in worker mode");return this._PostToDOMElementMaybeSync("get-element")}PostToDOMElement(c,f){f||(f={});f.elementId=this._elementId;this.PostToDOM(c,f)}_PostToDOMElementMaybeSync(c,f){f||(f={});f.elementId=this._elementId;return this._PostToDOMMaybeSync(c,f)}PostToDOMElementAsync(c,f){f||(f={});f.elementId=this._elementId;return this.PostToDOMAsync(c,f)}CreateElement(c){c||
(c={});const f=this.GetWorldInfo().IsVisible();c.elementId=this._elementId;c.isVisible=f;Object.assign(c,this.GetElementState());this._isElementShowing=!!c.isVisible;this._PostToDOMMaybeSync("create",c);this._UpdatePosition(!0)}SetElementVisible(c){c=!!c;this._isElementShowing!==c&&(this._isElementShowing=c,this.PostToDOMElement("set-visible",{isVisible:c}))}Tick(){this._UpdatePosition(!1)}_ShouldPreserveElement(){const c=this._runtime.GetCanvasManager().GetFullscreenMode();return"Android"===e.Platform.OS&&
("scale-inner"===c||"scale-outer"===c||"crop"===c)}_UpdatePosition(c){var f=this.GetWorldInfo();const g=f.GetLayer();var h=f.GetX(),m=f.GetY();let [k,a]=g.LayerToCanvasCss(h,m),[b,l]=g.LayerToCanvasCss(h+f.GetWidth(),m+f.GetHeight());h=this._runtime.GetCanvasManager();m=h.GetCssWidth();const p=h.GetCssHeight();if(f.IsVisible()&&g.IsVisible()){if(!this._ShouldPreserveElement()){if(0>=b||0>=l||k>=m||a>=p){this.SetElementVisible(!1);return}1>k&&(k=1);1>a&&(a=1);b>=m&&(b=m-1);l>=p&&(l=p-1)}d.set(k,a,
b,l);f=h.GetLastWidth();m=h.GetLastHeight();!c&&d.equals(this._lastRect)&&this._lastWindowWidth===f&&this._lastWindowHeight===m?this.SetElementVisible(!0):(this._lastRect.copy(d),this._lastWindowWidth=f,this._lastWindowHeight=m,this.SetElementVisible(!0),c=null,this._autoFontSize&&(c=g.GetDisplayScale()-.2),this.PostToDOMElement("update-position",{left:Math.round(this._lastRect.getLeft())+h.GetCanvasClientX(),top:Math.round(this._lastRect.getTop())+h.GetCanvasClientY(),width:Math.round(this._lastRect.width()),
height:Math.round(this._lastRect.height()),fontSize:c}))}else this.SetElementVisible(!1)}FocusElement(){this._PostToDOMElementMaybeSync("focus",{focus:!0})}BlurElement(){this._PostToDOMElementMaybeSync("focus",{focus:!1})}_OnElemFocused(){this._elemHasFocus=!0}_OnElemBlurred(){this._elemHasFocus=!1}IsElementFocused(){return this._elemHasFocus}SetElementCSSStyle(c,f){this.PostToDOMElement("set-css-style",{prop:e.CSSToCamelCase(c),val:f})}SetElementAttribute(c,f){this.PostToDOMElement("set-attribute",
{name:c,val:f})}RemoveElementAttribute(c){this.PostToDOMElement("remove-attribute",{name:c})}UpdateElementState(){this._isPendingUpdateState||(this._isPendingUpdateState=!0,Promise.resolve().then(()=>{this._isPendingUpdateState=!1;this.PostToDOMElement("update-state",this.GetElementState())}))}GetElementState(){}GetElementId(){return this._elementId}}}"use strict";
{const e=self.C3,d=self.IBehavior;e.SDKBehaviorBase=class extends e.DefendedBase{constructor(c){super();this._runtime=c.runtime;this._myObjectClasses=e.New(e.ArraySet);this._myInstances=e.New(e.ArraySet);this._iBehavior=null;if(c=c.scriptInterfaceClass){if(this._iBehavior=new c(this),!(this._iBehavior instanceof d))throw new TypeError("script interface class must derive from IBehavior");}else this._iBehavior=new d(this)}Release(){this._myInstances.Release();this._myObjectClasses.Release();this._runtime=
null}GetRuntime(){return this._runtime}OnCreate(){}_AddObjectClass(c){this._myObjectClasses.Add(c)}GetObjectClasses(){return this._myObjectClasses.GetArray()}_AddInstance(c){this._myInstances.Add(c)}_RemoveInstance(c){this._myInstances.Delete(c)}GetInstances(){return this._myInstances.GetArray()}GetIBehavior(){return this._iBehavior}}}"use strict";
{const e=self.C3;e.SDKBehaviorTypeBase=class extends e.DefendedBase{constructor(d){super();this._runtime=d.GetRuntime();this._behaviorType=d;this._objectClass=d.GetObjectClass();this._behavior=d.GetBehavior();this._behavior._AddObjectClass(this._objectClass)}Release(){this._behavior=this._objectClass=this._behaviorType=this._runtime=null}GetBehaviorType(){return this._behaviorType}GetObjectClass(){return this._objectClass}GetRuntime(){return this._runtime}GetBehavior(){return this._behavior}}}"use strict";
{const e=self.C3;e.SDKBehaviorInstanceBase=class extends e.DefendedBase{constructor(d,c){super();this._behInst=d;this._domComponentId=c;this._inst=d.GetObjectInstance();this._runtime=d.GetRuntime();this._behaviorType=d.GetBehaviorType();this._sdkType=this._behaviorType.GetSdkType();this._isPostTicking=this._isTicking2=this._isTicking=!1;this._disposables=null}Release(){this._StopTicking();this._StopTicking2();this._StopPostTicking();this._disposables&&(this._disposables.Release(),this._disposables=
null);this._sdkType=this._behaviorType=this._runtime=this._inst=this._behInst=null}GetBehavior(){return this._behaviorType.GetBehavior()}GetBehaviorInstance(){return this._behInst}GetObjectInstance(){return this._inst}GetObjectClass(){return this._inst.GetObjectClass()}GetWorldInfo(){return this._inst.GetWorldInfo()}GetRuntime(){return this._runtime}GetBehaviorType(){return this._behaviorType}GetSdkType(){return this._sdkType}GetScriptInterface(){return this._behInst.GetScriptInterface()}Trigger(d){return this._runtime.Trigger(d,
this._inst,this._behaviorType)}DebugTrigger(d){return this._runtime.DebugTrigger(d,this._inst,this._behaviorType)}TriggerAsync(d){return this._runtime.TriggerAsync(d,this._inst,this._behaviorType)}PostCreate(){}Tick(){}Tick2(){}PostTick(){}_StartTicking(){this._isTicking||(this._runtime._AddBehInstToTick(this),this._isTicking=!0)}_StopTicking(){this._isTicking&&(this._runtime._RemoveBehInstToTick(this),this._isTicking=!1)}IsTicking(){return this._isTicking}_StartTicking2(){this._isTicking2||(this._runtime._AddBehInstToTick2(this),
this._isTicking2=!0)}_StopTicking2(){this._isTicking2&&(this._runtime._RemoveBehInstToTick2(this),this._isTicking2=!1)}IsTicking2(){return this._isTicking2}_StartPostTicking(){this._isPostTicking||(this._runtime._AddBehInstToPostTick(this),this._isPostTicking=!0)}_StopPostTicking(){this._isPostTicking&&(this._runtime._RemoveBehInstToPostTick(this),this._isPostTicking=!1)}IsPostTicking(){return this._isPostTicking}GetDebuggerProperties(){return[]}AddDOMMessageHandler(d,c){this._runtime.AddDOMComponentMessageHandler(this._domComponentId,
d,c)}OnSpriteFrameChanged(d,c){}SaveToJson(){return null}LoadFromJson(d){}GetPropertyValueByIndex(d){}SetPropertyValueByIndex(d,c){}OffsetPropertyValueByIndex(d,c){if(0!==c){var f=this.GetPropertyValueByIndex(d);if("number"!==typeof f)throw Error("expected number");this.SetPropertyValueByIndex(d,f+c)}}SetPropertyColorOffsetValueByIndex(d,c,f,g){}CallAction(d,...c){d.call(this,...c)}CallExpression(d,...c){return d.call(this,...c)}GetScriptInterfaceClass(){return null}}}"use strict";
{const e=self.C3;e.Plugins={};e.Behaviors={};e.PluginManager=class extends e.DefendedBase{constructor(d){super();this._runtime=d;this._allPlugins=[];this._pluginsByCtor=new Map;this._systemPlugin=null;this._allBehaviors=[];this._behaviorsByCtor=new Map;this._jumpthruBehavior=this._solidBehavior=null}CreatePlugin(d){const c=this._runtime.GetObjectReference(d[0]);if(!c)throw Error("missing plugin");e.AddCommonACEs(d,c);d=e.New(c,{runtime:this._runtime,isSingleGlobal:d[1],isWorld:d[2],isRotatable:d[5],
hasEffects:d[8],mustPredraw:d[9],supportsSceneGraph:d[13],supportsMesh:d[14]});d.OnCreate();this._allPlugins.push(d);this._pluginsByCtor.set(c,d)}CreateSystemPlugin(){this._systemPlugin=e.New(e.Plugins.System,{runtime:this._runtime,isSingleGlobal:!0});this._systemPlugin.OnCreate()}CreateBehavior(d){d=this._runtime.GetObjectReference(d[1]);if(!d)throw Error("missing behavior");const c=e.New(d,{runtime:this._runtime});c.OnCreate();this._allBehaviors.push(c);this._behaviorsByCtor.set(d,c);!this._solidBehavior&&
e.Behaviors.solid&&c instanceof e.Behaviors.solid?this._solidBehavior=c:!this._jumpthruBehavior&&e.Behaviors.jumpthru&&c instanceof e.Behaviors.jumpthru&&(this._jumpthruBehavior=c)}GetPluginByConstructorFunction(d){return this._pluginsByCtor.get(d)||null}HasBehaviorByConstructorFunction(d){return this._behaviorsByCtor.has(d)}GetBehaviorByConstructorFunction(d){return this._behaviorsByCtor.get(d)||null}GetSystemPlugin(){return this._systemPlugin}GetSolidBehavior(){return this._solidBehavior}GetJumpthruBehavior(){return this._jumpthruBehavior}}}"use strict";
{const e=self.C3,d=new Set;e.ImageInfo=class extends e.DefendedBase{constructor(){super();this._url="";this._height=this._width=this._offsetY=this._offsetX=this._pixelFormat=this._size=0;this._hasMetaData=!1;this._imageAsset=null;this._textureState="";this._rcTex=e.New(e.Rect);d.add(this)}Release(){this.ReleaseTexture();this._imageAsset=null;d.delete(this)}static OnWebGLContextLost(){for(const c of d)c._textureState="",c._rcTex.set(0,0,0,0)}LoadData(c){this._url=c[0];this._size=c[1];this._pixelFormat=
c[2];this._offsetX=c[3];this._offsetY=c[4];this._width=c[5];this._height=c[6];this._hasMetaData=!0}LoadAnimationFrameData(c){this._url=c[0];this._size=c[1];this._offsetX=c[2];this._offsetY=c[3];this._width=c[4];this._height=c[5];this._pixelFormat=c[11];this._hasMetaData=!0}LoadDynamicAsset(c,f){if(this._imageAsset)throw Error("already loaded asset");this._url=f;const g={};e.IsAbsoluteURL(f)&&(g.loadPolicy="remote");this.LoadAsset(c,g);return this._imageAsset.Load()}ReplaceWith(c){if(c===this)throw Error("cannot replace with self");
this.ReleaseTexture();this._url=c._url;this._size=c._size;this._pixelFormat=c._pixelFormat;this._offsetX=c._offsetX;this._offsetY=c._offsetY;this._width=c._width;this._height=c._height;this._hasMetaData=c._hasMetaData;this._imageAsset=c._imageAsset;this._textureState=c._textureState;this._rcTex=c._rcTex}GetURL(){return this._url}GetSize(){return this._size}GetPixelFormat(){return this._pixelFormat}GetOffsetX(){return this._offsetX}GetOffsetY(){return this._offsetY}GetWidth(){return this._width}GetHeight(){return this._height}GetSheetWidth(){return this._imageAsset.GetWidth()}GetSheetHeight(){return this._imageAsset.GetHeight()}LoadAsset(c,
f){if(this._imageAsset)throw Error("already got asset");f=Object.assign({},f,{url:this.GetURL(),size:this.GetSize()});this._imageAsset=c.LoadImage(f)}IsLoaded(){return this._imageAsset&&this._imageAsset.IsLoaded()}async LoadStaticTexture(c,f){if(!this._imageAsset)throw Error("no asset");if(this._textureState)throw Error("already loaded texture");this._textureState="loading";c=await this._imageAsset.LoadStaticTexture(c,f);if(!c)return this._textureState="",null;this._textureState="loaded";this._hasMetaData||
(this._width=c.GetWidth(),this._height=c.GetHeight(),this._hasMetaData=!0);this._rcTex.set(this._offsetX,this._offsetY,this._offsetX+this._width,this._offsetY+this._height);this._rcTex.divide(c.GetWidth(),c.GetHeight());return c}ReleaseTexture(){this._textureState&&(this._imageAsset&&this._imageAsset.ReleaseTexture(),this._textureState="",this._rcTex.set(0,0,0,0))}GetTexture(){return this._imageAsset?this._imageAsset.GetTexture():null}GetTexRect(){return this._rcTex}async ExtractImageToCanvas(){const c=
await this._imageAsset.LoadToDrawable(),f=e.CreateCanvas(this._width,this._height);f.getContext("2d").drawImage(c,this._offsetX,this._offsetY,this._width,this._height,0,0,this._width,this._height);return f}}}"use strict";
{const e=self.C3;e.AnimationInfo=class extends e.DefendedBase{constructor(d){super();this._name=d[0];this._speed=d[1];this._isLooping=!!d[2];this._repeatCount=d[3];this._repeatTo=d[4];this._isPingPong=!!d[5];this._sid=d[6];this._frames=d[7].map(c=>e.New(e.AnimationFrameInfo,c))}Release(){for(const d of this._frames)d.Release();e.clearArray(this._frames)}LoadAllAssets(d){for(const c of this._frames)c.GetImageInfo().LoadAsset(d)}LoadAllTextures(d,c){return Promise.all(this._frames.map(f=>f.GetImageInfo().LoadStaticTexture(d,
c)))}ReleaseAllTextures(){for(const d of this._frames)d.GetImageInfo().ReleaseTexture()}GetName(){return this._name}GetSID(){return this._sid}GetFrameCount(){return this._frames.length}GetFrames(){return this._frames}GetFrameAt(d){d=Math.floor(d);if(0>d||d>=this._frames.length)throw new RangeError("invalid frame");return this._frames[d]}GetSpeed(){return this._speed}IsLooping(){return this._isLooping}GetRepeatCount(){return this._repeatCount}GetRepeatTo(){return this._repeatTo}IsPingPong(){return this._isPingPong}}}"use strict";
{const e=self.C3;e.AnimationFrameInfo=class extends e.DefendedBase{constructor(d){super();this._imageInfo=e.New(e.ImageInfo);this._imageInfo.LoadAnimationFrameData(d);this._duration=d[6];this._origin=e.New(e.Vector2,d[7],d[8]);this._imagePoints=d[9].map(c=>e.New(e.ImagePoint,this,c));this._imagePointsByName=new Map;for(const c of this._imagePoints)this._imagePointsByName.set(c.GetName().toLowerCase(),c);this._collisionPoly=null;d=d[10];6<=d.length&&(this._collisionPoly=e.New(e.CollisionPoly,d))}Release(){this._collisionPoly&&
(this._collisionPoly.Release(),this._collisionPoly=null);this._imageInfo.Release();this._imageInfo=null}GetImageInfo(){return this._imageInfo}GetDuration(){return this._duration}GetOriginX(){return this._origin.getX()}GetOriginY(){return this._origin.getY()}GetCollisionPoly(){return this._collisionPoly}GetImagePointByName(d){return this._imagePointsByName.get(d.toLowerCase())||null}GetImagePointByIndex(d){d=Math.floor(d);return 0>d||d>=this._imagePoints.length?null:this._imagePoints[d]}GetImagePointCount(){return this._imagePoints.length}}}"use strict";
{const e=self.C3;e.ImagePoint=class extends e.DefendedBase{constructor(d,c){super();this._afi=d;this._name=c[0];this._pos=e.New(e.Vector2,c[1],c[2])}Release(){}GetName(){return this._name}GetX(){return this._pos.getX()}GetY(){return this._pos.getY()}GetVec2(){return this._pos}}}"use strict";
{const e=self.C3,d=self.C3Debugger,c=self.IObjectClass;e.ObjectClass=class extends e.DefendedBase{constructor(f,g,h){super();const m=f.GetObjectReference(h[1]);this._runtime=f;this._plugin=f.GetPluginManager().GetPluginByConstructorFunction(m);this._sdkType=null;this._instSdkCtor=m.Instance;this._index=g;this._sid=h[11];this._name=h[0];this._jsPropName=this._runtime.GetJsPropName(h[14]);this._isGlobal=!!h[9];this._isFamily=!!h[2];this._isOnLoaderLayout=!!h[10];this._instVars=h[3].map(k=>({sid:k[0],
type:k[1],name:k[2],jsPropName:f.GetJsPropName(k[3])}));this._behaviorsCount=h[4];this._effectsCount=h[5];this._isWorldType=this._plugin.IsWorldType();this._effectList=null;this._collisionGrid=e.New(e.SparseGrid,f.GetOriginalViewportWidth(),f.GetOriginalViewportHeight());this._anyCollisionCellChanged=!0;this._anyInstanceParallaxed=!1;this._familyMembersSet=this._familyMembers=null;this._familyIndex=-1;this._familyEffectMap=this._familyBehaviorMap=this._familyInstVarMap=this._familiesSet=this._families=
null;this._isInContainer=!1;this._container=null;this._behaviorTypes=h[8].map(k=>e.BehaviorType.Create(this,k));this._behaviorTypesIncludingInherited=[];this._behaviorsByName=new Map;this._behaviorNameToIndex=new Map;this._usedBehaviorCtors=new Set;this._solStack=e.New(e.SolStack,this);this._defaultInstanceData=null;this._defaultLayerIndex=0;this._isContained=!1;this._animationsBySid=this._animationsByName=this._animations=this._imageInfo=this._container=null;this._textureRefCount=0;this._savedData=
new Map;this._unsavedData=new Map;this._instances=[];this._iidsStale=!0;this._plugin.HasEffects()&&(this._effectList=e.New(e.EffectList,this,h[12]));h[6]&&(this._imageInfo=e.New(e.ImageInfo),this._imageInfo.LoadData(h[6]));if(h[7]){this._animations=h[7].map(k=>e.New(e.AnimationInfo,k));this._animationsByName=new Map;this._animationsBySid=new Map;for(const k of this._animations)this._animationsByName.set(k.GetName().toLowerCase(),k),this._animationsBySid.set(k.GetSID(),k)}this._isFamily?(this._familyMembers=
[],this._familyMembersSet=new Set,this._familyIndex=this._runtime._GetNextFamilyIndex()):(this._families=[],this._familiesSet=new Set,this._familyInstVarMap=[],this._familyBehaviorMap=[],this._familyEffectMap=[]);this._sdkType=e.New(m.Type,this,h[15]);this._instanceUserScriptClass=this._iObjectClass=null;this._userScriptDispatcher=e.New(e.Event.Dispatcher);if(g=this._sdkType.GetScriptInterfaceClass()){if(this._iObjectClass=new g(this),!(this._iObjectClass instanceof c))throw new TypeError("script interface class must derive from IObjectClass");
}else this._iObjectClass=new c(this);h[13]&&(g=h[13])&&this._sdkType.LoadTilemapData(g[0],g[1]);this._runtime.UsesLoaderLayout()&&!this._isFamily&&!this._isOnLoaderLayout&&this._isWorldType||this.OnCreate();this._plugin.IsSingleGlobal()&&(this._plugin._SetSingleGlobalObjectClass(this),this._CreateSingleGlobalInstance(h))}static Create(f,g,h){return e.New(e.ObjectClass,f,g,h)}Release(){this._imageInfo&&(this._imageInfo.Release(),this._imageInfo=null);if(this._animations){for(const f of this._animations)f.Release();
e.clearArray(this._animations);this._animationsByName.clear();this._animationsBySid.clear()}this._solStack.Release();this._solStack=null;this._savedData.clear();this._unsavedData.clear();this._runtime=this._container=null}_LoadFamily(f){for(let g=1,h=f.length;g<h;++g){const m=this._runtime.GetObjectClassByIndex(f[g]);this._familyMembers.push(m);this._familyMembersSet.add(m);m._families.push(this);m._familiesSet.add(this)}}_SetContainer(f){this._isInContainer=!0;this._container=f}IsInContainer(){return this._isInContainer}GetContainer(){return this._container}_OnAfterCreate(){var f=
0;if(!this._isFamily)for(var g of this._families)for(var h of g.GetBehaviorTypes()){const a=h.GetName().toLowerCase();this._behaviorsByName.set(a,h);this._behaviorNameToIndex.set(a,f);this._behaviorTypesIncludingInherited.push(h);++f}for(var m of this.GetBehaviorTypes())g=m.GetName().toLowerCase(),this._behaviorsByName.set(g,m),this._behaviorNameToIndex.set(g,f),this._behaviorTypesIncludingInherited.push(m),++f;for(var k of this._behaviorTypesIncludingInherited)this._usedBehaviorCtors.add(k.GetBehavior().constructor);
if(!this._isFamily&&this._families.length){f=this._runtime.GetFamilyCount();e.extendArray(this._familyInstVarMap,f,0);e.extendArray(this._familyBehaviorMap,f,0);e.extendArray(this._familyEffectMap,f,0);f=[];g=k=m=0;for(const a of this._families)if(h=a.GetFamilyIndex(),this._familyInstVarMap[h]=m,m+=a.GetInstanceVariablesCount(),this._familyBehaviorMap[h]=k,k+=a.GetBehaviorTypesCount(),this._familyEffectMap[h]=g,g+=a.GetEffectTypesCount(),(h=a.GetEffectList())&&this._effectList)for(const b of h.GetAllEffectTypes())f.push(b.Clone(this._effectList));
this._effectList&&this._effectList.PrependEffectTypes(f)}}_CreateSingleGlobalInstance(f){const g=this._runtime._GetNewUID(),h=e.New(e.Instance,{runtime:this._runtime,objectType:this,uid:g});h._CreateSdkInstance(f[16],[]);this._runtime._MapInstanceByUID(g,h);this._instances.push(h)}GetSdkType(){return this._sdkType}IsOnLoaderLayout(){return this._isOnLoaderLayout}OnCreate(){this._isFamily||this._sdkType.OnCreate()}HasLoadedTextures(){return 0<this._textureRefCount}LoadTextures(f){if(this._isFamily)return Promise.resolve();
this._textureRefCount++;return 1===this._textureRefCount?this._sdkType.LoadTextures(f)||Promise.resolve():Promise.resolve()}ReleaseTextures(){if(!this._isFamily){this._textureRefCount--;if(0>this._textureRefCount)throw Error("released textures too many times");0===this._textureRefCount&&this._sdkType.ReleaseTextures()}}OnDynamicTextureLoadComplete(){if(this._isFamily)throw Error("not applicable to family");this._sdkType.OnDynamicTextureLoadComplete()}PreloadTexturesWithInstances(f){return this._isFamily?
Promise.resolve():this._sdkType.PreloadTexturesWithInstances(f)}GetRuntime(){return this._runtime}GetPlugin(){return this._plugin}GetInstanceSdkCtor(){return this._instSdkCtor}GetName(){return this._name}GetJsPropName(){return this._jsPropName}GetIndex(){return this._index}GetSID(){return this._sid}IsFamily(){return this._isFamily}IsGlobal(){return this._isGlobal}IsWorldType(){return this._isWorldType}GetFamilyIndex(){return this._familyIndex}GetBehaviorTypes(){return this._behaviorTypes}GetBehaviorTypesCount(){return this._behaviorsCount}UsesBehaviorByCtor(f){return f&&
this._usedBehaviorCtors.has(f)}GetInstanceVariablesCount(){return this._instVars.length}GetInstanceVariableSIDs(){return this._instVars.map(f=>f.sid)}GetInstanceVariableIndexBySID(f){return this._instVars.findIndex(g=>g.sid===f)}GetInstanceVariableIndexByName(f){return this._instVars.findIndex(g=>g.name===f)}_GetAllInstanceVariableNames(){return this._instVars.map(f=>f.name)}_GetAllInstanceVariableJsPropNames(){return this._instVars.map(f=>f.jsPropName)}GetInstanceVariableType(f){f=Math.floor(f);
if(0>f||f>=this._instVars.length)throw new RangeError("invalid instance variable index");return this._instVars[f].type}GetInstanceVariableName(f){f=Math.floor(f);if(0>f||f>=this._instVars.length)throw new RangeError("invalid instance variable index");return this._instVars[f].name}GetEffectTypesCount(){return this._effectsCount}GetBehaviorTypesIncludingInherited(){return this._behaviorTypesIncludingInherited}GetBehaviorTypeByName(f){return this._behaviorsByName.get(f.toLowerCase())||null}GetBehaviorIndexByName(f){f=
this._behaviorNameToIndex.get(f.toLowerCase());return"undefined"===typeof f?-1:f}GetEffectList(){return this._effectList}HasEffects(){return this._plugin.HasEffects()}UsesEffects(){return this._effectList&&this._effectList.HasAnyEffectType()}GetSolStack(){return this._solStack}GetCurrentSol(){return this._solStack.GetCurrentSol()}GetImageInfo(){return this._imageInfo}SetDefaultInstanceData(f){this._defaultInstanceData=f}GetDefaultInstanceData(){return this._defaultInstanceData}_SetDefaultLayerIndex(f){this._defaultLayerIndex=
f}GetDefaultLayerIndex(){return this._defaultLayerIndex}GetAnimations(){return this._animations}GetAnimationCount(){return this._animations.length}GetFamilies(){return this._families}BelongsToFamily(f){return this._familiesSet.has(f)}GetFamilyMembers(){return this._familyMembers}FamilyHasMember(f){return this._familyMembersSet.has(f)}GetFamilyBehaviorOffset(f){return this._familyBehaviorMap[f]}GetFamilyInstanceVariableOffset(f){return this._familyInstVarMap[f]}GetAnimationByName(f){if(!this._animations)throw Error("no animations");
return this._animationsByName.get(f.toLowerCase())||null}GetAnimationBySID(f){if(!this._animations)throw Error("no animations");return this._animationsBySid.get(f)||null}GetFirstAnimationFrame(){if(!this._animations)throw Error("no animations");return this._animations[0].GetFrameAt(0)}GetDefaultInstanceSize(){if(this._animations){const f=this.GetFirstAnimationFrame().GetImageInfo();return[f.GetWidth(),f.GetHeight()]}return this._imageInfo?[this._imageInfo.GetWidth(),this._imageInfo.GetHeight()]:[100,
100]}GetSingleGlobalInstance(){if(!this._plugin.IsSingleGlobal())throw Error("not a single-global plugin");return this._instances[0]}GetInstances(){return this._instances}*instances(){yield*this._instances}*instancesIncludingPendingCreate(){yield*this._instances;for(const f of this._runtime._GetInstancesPendingCreate())f.GetObjectClass()===this&&(yield f)}GetInstanceCount(){return this._instances.length}_AddInstance(f){this._instances.push(f)}_SetIIDsStale(){this._iidsStale=!0}_UpdateIIDs(){if(this._iidsStale&&
!this._isFamily){var f=this._instances,g=0;for(let h=f.length;g<h;++g)f[g]._SetIID(g);f=this._runtime._GetInstancesPendingCreate();for(const h of f)h.GetObjectClass()===this&&h._SetIID(g++);this._iidsStale=!1}}GetInstanceByIID(f){var g=this._instances;if(f<g.length)return g[f];f-=g.length;g=this._runtime._GetInstancesPendingCreate();for(const h of g)if(h.GetObjectClass()===this){if(0===f)return h;--f}return null}GetFirstPicked(f){if(f&&f.IsInContainer()&&f.GetObjectClass()!==this)for(const g of f.siblings())if(g.GetObjectClass()===
this)return g;f=this.GetCurrentSol().GetInstances();return f.length?f[0]:null}GetPairedInstance(f){const g=this.GetCurrentSol().GetInstances();return g.length?g[f.GetIID()%g.length]:null}*allCorrespondingInstances(f,g){const h=this.GetCurrentSol().GetInstances();var m=h.length;const k=g.GetCurrentSol(),a=g.GetCurrentSol().GetInstances(),b=a.length;var l=f.GetIID();if(g.IsFamily()||!k.IsSelectAll())l=a.indexOf(f);f=Math.ceil(m/b);m%=b;0===m||l<m?(l*=f,m=f):(l=m*f+(l-m)*(f-1),m=f-1);for(let p=l,r=l+
m;p<r;++p)yield h[p]}FinishCondition(f){this._sdkType.FinishCondition(f)}ApplySolToContainer(){if(this._isInContainer&&!this._isFamily){this._UpdateIIDs();var f=this.GetCurrentSol(),g=f._GetOwnInstances(),h=f.IsSelectAll(),m=this._runtime.GetCurrentEventStackFrame();m=m&&m.GetCurrentEvent()&&m.GetCurrentEvent().IsOrBlock();for(const b of this._container.objectTypes())if(b!==this){b._UpdateIIDs();var k=b.GetCurrentSol();k._SetSelectAll(h);if(!h){var a=k._GetOwnInstances();e.clearArray(a);for(const l of g)a.push(b.GetInstanceByIID(l.GetIID()));
if(m){a=f._GetOwnElseInstances();k=k._GetOwnElseInstances();e.clearArray(k);for(const l of a)k.push(b.GetInstanceByIID(l.GetIID()))}}}}}_TruncateContainerSols(f,g){for(const h of this.GetContainer().objectTypes()){const m=h.GetCurrentSol();f?e.truncateArray(m._GetOwnElseInstances(),g):e.truncateArray(m._GetOwnInstances(),g)}}_GetCollisionCellGrid(){return this._collisionGrid}_SetAnyCollisionCellChanged(f){this._anyCollisionCellChanged=!!f}_SetAnyInstanceParallaxed(f){this._anyInstanceParallaxed=!!f}IsAnyInstanceParallaxed(){return this._anyInstanceParallaxed}_UpdateAllCollisionCells(){if(this._anyCollisionCellChanged&&
this._isWorldType){for(const f of this._instances)f.GetWorldInfo()._UpdateCollisionCell();for(const f of this._runtime._GetInstancesPendingCreate())f.GetObjectClass()===this&&f.GetWorldInfo()._UpdateCollisionCell();this._anyCollisionCellChanged=!1}}GetSavedDataMap(){this._savedData||(this._savedData=new Map);return this._savedData}GetUnsavedDataMap(){this._unsavedData||(this._unsavedData=new Map);return this._unsavedData}HasSolidBehavior(){return this.UsesBehaviorByCtor(e.Behaviors.solid)}HasNoSaveBehavior(){return this.UsesBehaviorByCtor(e.Behaviors.NoSave)}HasPersistBehavior(){return this.UsesBehaviorByCtor(e.Behaviors.Persist)}_SaveToJson(){const f=
{instances:this._instances.map(g=>g.SaveToJson())};this._savedData&&this._savedData.size&&(f.ex=e.ToSuperJSON(this._savedData));return f}_LoadFromJson(f){this._savedData&&(this._savedData.clear(),this._savedData=null);var g=f.ex;g&&(this._savedData=e.FromSuperJSON(g));g=this._instances;f=f.instances;for(let h=0,m=Math.min(g.length,f.length);h<m;++h)g[h].LoadFromJson(f[h]);for(let h=f.length,m=g.length;h<m;++h)this._runtime.DestroyInstance(g[h]);for(let h=g.length,m=f.length;h<m;++h){g=f[h];let k=
null;if(this.IsWorldType()&&(k=this._runtime.GetMainRunningLayout().GetLayerBySID(g.w.l),!k))continue;this._runtime.CreateInstanceFromData(this._defaultInstanceData||this,k,!1,0,0,!0).LoadFromJson(g)}this._SetIIDsStale()}GetIObjectClass(){return this._iObjectClass}UserScriptDispatcher(){return this._userScriptDispatcher}_GetUserScriptInstanceClass(){return this._instanceUserScriptClass}_SetUserScriptInstanceClass(f){this._instanceUserScriptClass=f}DispatchUserScriptEvent(f){var g=this._runtime;(g=
g.IsDebug()&&!g.GetEventSheetManager().IsInEventEngine())&&d.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(f);g&&d.AddScriptTime()}}}"use strict";
{const e=self.C3;e.Container=class extends e.DefendedBase{constructor(d,c){super();this._runtime=d;this._objectTypes=c;for(const f of this._objectTypes)f._SetContainer(this)}Release(){this._runtime=null}GetRuntime(){return this._runtime}GetObjectTypes(){return this._objectTypes}objectTypes(){return this._objectTypes}HasAnyWorldType(){return this._objectTypes.some(d=>d.IsWorldType())}}}"use strict";
{const e=self.C3,d=self.C3Debugger,c=self.IInstance,f=[];let g=0;const h=new WeakMap,m=new WeakMap;e.Instance=class extends e.DefendedBase{constructor(k){super();this._runtime=k.runtime;this._objectType=k.objectType;this._iScriptInterface=this._sdkInst=this._worldInfo=null;this._iid=0;this._uid=k.uid;this._puid=g++;this._flags=0;this._behaviorInstances=this._instVarValues=f;var a=this._objectType.GetBehaviorTypesIncludingInherited();0<a.length&&(this._behaviorInstances=a.map((b,l)=>e.New(e.BehaviorInstance,
{runtime:this._runtime,behaviorType:b,instance:this,index:l})));this._siblings=this._objectType.IsInContainer()?[]:null;this._timeScale=-1;this._dispatcher=null;a=this.GetPlugin();a.MustPreDraw()&&(this._flags|=4);if(a.IsWorldType())if(this._worldInfo=e.New(e.WorldInfo,this,k.layer),k.worldData)this._worldInfo.Init(k.worldData);else{this._worldInfo.InitNoData();const [b,l]=this._objectType.GetDefaultInstanceSize();this._worldInfo.SetSize(b,l);this.GetObjectClass().UsesEffects()&&this._worldInfo.GetInstanceEffectList().LoadDefaultEffectParameters()}k.instVarData?
this._LoadInstanceVariableData(k.instVarData):this._LoadDefaultInstanceVariables()}Release(){this._iScriptInterface&&(this._iScriptInterface._Release(),this._iScriptInterface=null);if(0<this._behaviorInstances.length){for(var k of this._behaviorInstances)k.Release();e.clearArray(this._behaviorInstances)}this._sdkInst.Release();this._sdkInst=null;if(k=h.get(this))k.clear(),h.delete(this);if(k=m.get(this))k.clear(),m.delete(this);this._siblings&&e.clearArray(this._siblings);this._dispatcher&&(this._dispatcher.Release(),
this._dispatcher=null);this._objectType=this._runtime=null;0<this._instVarValues.length&&e.clearArray(this._instVarValues);this._worldInfo&&(this._worldInfo.Release(),this._worldInfo=null)}_LoadInstanceVariableData(k){0<k.length&&(this._instVarValues=[],e.shallowAssignArray(this._instVarValues,k))}_LoadDefaultInstanceVariables(){const k=this._objectType.GetInstanceVariablesCount();if(0!==k){this._instVarValues=[];var a=[0,0,""];for(let b=0;b<k;++b)this._instVarValues.push(a[this._objectType.GetInstanceVariableType(b)])}}_CreateSdkInstance(k,
a){if(this._sdkInst)throw Error("already got sdk instance");for(let b=0,l=this._behaviorInstances.length;b<l;++b)this._behaviorInstances[b]._CreateSdkInstance(a?a[b]:null);this._sdkInst=e.New(this._objectType.GetInstanceSdkCtor(),this,k);if(!(this._sdkInst instanceof e.SDKInstanceBase))throw Error("sdk type must derive from SDKInstanceBase");for(let b=0,l=this._behaviorInstances.length;b<l;++b)this._behaviorInstances[b].PostCreate();this._objectType._GetUserScriptInstanceClass()&&this._InitUserScriptInterface()}GetSdkInstance(){return this._sdkInst}GetWorldInfo(){return this._worldInfo}GetRuntime(){return this._runtime}GetTimeScale(){return this._timeScale}GetActiveTimeScale(){const k=
this._timeScale;return-1===k?this.GetRuntime().GetTimeScale():k}SetTimeScale(k){k=+k;if(0>k||!isFinite(k))k=0;this._timeScale=k}RestoreTimeScale(){this._timeScale=-1}Dispatcher(){this._dispatcher||(this._dispatcher=e.New(e.Event.Dispatcher));return this._dispatcher}Draw(k){this._sdkInst.Draw(k)}OnCreate(k){this._sdkInst.OnCreate(k)}_SetHasTilemap(){this._flags|=2}HasTilemap(){return 0!==(this._flags&2)}_MarkDestroyed(){this._flags|=1}IsDestroyed(){return 0!==(this._flags&1)}MustPreDraw(){return 0!==
(this._flags&4)}_IsSolidEnabled(){return 0!==(this._flags&8)}_SetSolidEnabled(k){this._flags=k?this._flags|8:this._flags&-9}_IsJumpthruEnabled(){return 0!==(this._flags&16)}_SetJumpthruEnabled(k){this._flags=k?this._flags|16:this._flags&-17}SetFlag(k,a){k<<=16;this._flags=a?this._flags|k:this._flags&~k}GetFlag(k){return 0!==(this._flags&k<<16)}GetCurrentImageInfo(){return this._sdkInst.GetCurrentImageInfo()}GetCurrentSurfaceSize(){return this._sdkInst.GetCurrentSurfaceSize()}GetCurrentTexRect(){return this._sdkInst.GetCurrentTexRect()}GetImagePoint(k){return this._sdkInst.GetImagePoint(k)}GetObjectClass(){return this._objectType}BelongsToObjectClass(k){return k.IsFamily()?
k.FamilyHasMember(this.GetObjectClass()):this.GetObjectClass()===k}VerifySupportsSceneGraph(){if(!this.GetPlugin().SupportsSceneGraph())throw Error("object does not support scene graph");}HasParent(){return null!==this.GetParent()}GetParent(){var k=this.GetWorldInfo();return k?(k=k.GetParent())?k.GetInstance():null:null}GetTopParent(){var k=this.GetWorldInfo();return k?(k=k.GetTopParent())?k.GetInstance():null:null}*parents(){const k=this.GetWorldInfo();if(k)for(const a of k.parents())yield a.GetInstance()}HasChildren(){const k=
this.GetWorldInfo();return k?k.HasChildren():!1}GetChildren(){const k=this.GetWorldInfo();return k?k.GetChildren().map(a=>a.GetInstance()):[]}*children(){const k=this.GetWorldInfo();if(k)for(const a of k.children())yield a.GetInstance()}*allChildren(){const k=this.GetWorldInfo();if(k)for(const a of k.allChildren())yield a.GetInstance()}GetChildCount(){const k=this.GetWorldInfo();return k?k.GetChildCount():0}GetChildAt(k){const a=this.GetWorldInfo();return a?(k=a.GetChildAt(k))?k.GetInstance():null:
null}AddChild(k,a){this.VerifySupportsSceneGraph();k.VerifySupportsSceneGraph();this.GetWorldInfo().AddChild(k.GetWorldInfo(),a||{})}RemoveChild(k){const a=this.GetWorldInfo();a&&a.RemoveChild(k.GetWorldInfo())}GetDestroyWithParent(){const k=this.GetWorldInfo();return k?k.GetDestroyWithParent():!1}SetupInitialSceneGraphConnections(){var k=this.GetWorldInfo();if(k&&(k=k.GetSceneGraphChildrenExportData()))for(const a of k)if(k=this._runtime.GetInstanceByUID(a[0])){const b=a[1];this.AddChild(k,{transformX:!!(b>>
0&1),transformY:!!(b>>1&1),transformWidth:!!(b>>2&1),transformHeight:!!(b>>3&1),transformAngle:!!(b>>4&1),destroyWithParent:!!(b>>5&1),transformZElevation:!!(b>>6&1)})}}IsInContainer(){return null!==this._siblings}_AddSibling(k){this._siblings.push(k)}GetSiblings(){return this._siblings}siblings(){return this._siblings}SetSiblingsSinglePicked(){for(const k of this.siblings())k.GetObjectClass().GetCurrentSol().SetSinglePicked(k)}_PushSiblingsToSolInstances(){for(const k of this.siblings())k.GetObjectClass().GetCurrentSol()._PushInstance(k)}_SetSiblingsToSolInstancesIndex(k){for(const a of this.siblings())a.GetObjectClass().GetCurrentSol()._GetOwnInstances()[k]=
a}_PushSiblingsToSolElseInstances(){for(const k of this.siblings())k.GetObjectClass().GetCurrentSol()._PushElseInstance(k)}_SetSiblingsToSolElseInstancesIndex(k){for(const a of this.siblings())a.GetObjectClass().GetCurrentSol()._GetOwnElseInstances()[k]=a}GetPlugin(){return this._objectType.GetPlugin()}_SetIID(k){this._iid=k}GetIID(){this._objectType._UpdateIIDs();return this._iid}GetUID(){return this._uid}GetPUID(){return this._puid}GetBehaviorInstances(){return this._behaviorInstances}GetBehaviorInstanceFromCtor(k){if(!k)return null;
for(const a of this._behaviorInstances)if(a.GetBehavior()instanceof k)return a;return null}GetBehaviorSdkInstanceFromCtor(k){return k?(k=this.GetBehaviorInstanceFromCtor(k))?k.GetSdkInstance():null:null}GetBehaviorIndexBySID(k){const a=this._behaviorInstances;for(let b=0,l=a.length;b<l;++b)if(a[b].GetBehaviorType().GetSID()===k)return b;return-1}GetAllInstanceVariableValues(){return this._instVarValues}_GetAllInstanceVariableNames(){return this._objectType._GetAllInstanceVariableNames()}GetInstanceVariableCount(){return this._instVarValues.length}GetInstanceVariableValue(k){k|=
0;const a=this._instVarValues;if(0>k||k>=a.length)throw new RangeError("invalid instance variable");return a[k]}_GetInstanceVariableValueUnchecked(k){return this._instVarValues[k]}SetInstanceVariableValue(k,a){k|=0;const b=this._instVarValues;if(0>k||k>=b.length)throw new RangeError("invalid instance variable");const l=b[k];if("number"===typeof l)b[k]="number"===typeof a?a:parseFloat(a);else if("boolean"===typeof l)b[k]="boolean"===typeof a?a:!!a;else if("string"===typeof l)b[k]="string"===typeof a?
a:a.toString();else throw Error("unknown instance variable type");}SetInstanceVariableOffset(k,a){if(0!==a){k|=0;var b=this._instVarValues;if(0>k||k>=b.length)throw new RangeError("invalid instance variable");var l=b[k];if("number"===typeof l)b[k]="number"===typeof a?b[k]+a:b[k]+parseFloat(a);else{if("boolean"===typeof l)throw Error("can not set offset of boolean variable");if("string"===typeof l)throw Error("can not set offset of string variable");throw Error("unknown instance variable type");}}}GetSavedDataMap(){let k=
h.get(this);if(k)return k;k=new Map;h.set(this,k);return k}GetUnsavedDataMap(){let k=m.get(this);if(k)return k;k=new Map;m.set(this,k);return k}_HasAnyCreateDestroyHandler(k){const a=this.GetObjectClass();if(a.UserScriptDispatcher().HasAnyHandlerFor(k))return!0;for(const b of a.GetFamilies())if(b.UserScriptDispatcher().HasAnyHandlerFor(k))return!0;return this._runtime.UserScriptDispatcher().HasAnyHandlerFor(k)?!0:!1}_TriggerOnCreated(){if(this._HasAnyCreateDestroyHandler("instancecreate")){const k=
this.GetObjectClass(),a=new e.Event("instancecreate");a.instance=this.GetInterfaceClass();k.DispatchUserScriptEvent(a);for(const b of k.GetFamilies())b.DispatchUserScriptEvent(a);this._runtime.DispatchUserScriptEvent(a)}this._runtime.Trigger(this.GetPlugin().constructor.Cnds.OnCreated,this,null)}_TriggerOnDestroyed(){this._runtime.Trigger(this.GetPlugin().constructor.Cnds.OnDestroyed,this,null)}_FireDestroyedScriptEvents(k){if(this._iScriptInterface){var a=new e.Event("destroy");a.isEndingLayout=
k;this.DispatchUserScriptEvent(a)}if(this._HasAnyCreateDestroyHandler("instancedestroy")){a=this.GetObjectClass();var b=new e.Event("instancedestroy");b.instance=this.GetInterfaceClass();b.isEndingLayout=k;a.DispatchUserScriptEvent(b);for(const l of a.GetFamilies())l.DispatchUserScriptEvent(b);this._runtime.DispatchUserScriptEvent(b)}}_GetDebuggerProperties(){return this._sdkInst.GetDebuggerProperties()}SaveToJson(k="full"){const a={};"full"===k?a.uid=this.GetUID():a.c3=!0;if("visual-state"!==k){(k=
h.get(this))&&k.size&&(a.ex=e.ToSuperJSON(k));-1!==this.GetTimeScale()&&(a.mts=this.GetTimeScale());if(0<this._objectType.GetInstanceVariablesCount()){k={};var b=this._objectType.GetInstanceVariableSIDs();for(let p=0,r=this._instVarValues.length;p<r;++p)k[b[p].toString()]=this._instVarValues[p];a.ivs=k}if(this._behaviorInstances.length){k={};for(var l of this._behaviorInstances)(b=l.SaveToJson())&&(k[l.GetBehaviorType().GetSID().toString()]=b);a.behs=k}}this._worldInfo&&(a.w=this._worldInfo._SaveToJson());
(l=this._sdkInst.SaveToJson())&&(a.data=l);return a}LoadFromJson(k,a="full"){if("full"===a)this._uid=k.uid;else if(!k.c3)return;if("visual-state"!==a){var b=h.get(this);b&&(b.clear(),h.delete(this));if(b=k.ex)b=e.FromSuperJSON(b),h.set(this,b);this._timeScale=k.hasOwnProperty("mts")?k.mts:-1;if(b=k.ivs)for(const [r,t]of Object.entries(b))if(b=parseInt(r,10),b=this._objectType.GetInstanceVariableIndexBySID(b),!(0>b||b>=this._instVarValues.length)){var l=t;null===l&&(l=NaN);this._instVarValues[b]=l}}if(this.GetPlugin().IsWorldType()){b=
k.w;var p=b.l;this._worldInfo.GetLayer().GetSID()!==p&&(l=this._worldInfo.GetLayer(),(p=l.GetLayout().GetLayerBySID(p))?(this._worldInfo._SetLayer(p),l._RemoveInstance(this,!0),p._AddInstance(this,!0),p.SetZIndicesChanged(),this._worldInfo.SetBboxChanged()):"full"===a&&this._runtime.DestroyInstance(this));this._worldInfo._LoadFromJson(b)}if("visual-state"!==a&&(a=k.behs))for(const [r,t]of Object.entries(a))a=parseInt(r,10),a=this.GetBehaviorIndexBySID(a),0>a||a>=this._behaviorInstances.length||this._behaviorInstances[a].LoadFromJson(t);
(k=k.data)&&this._sdkInst.LoadFromJson(k)}GetInterfaceClass(){return this._iScriptInterface||this._InitUserScriptInterface()}_InitUserScriptInterface(){var k=this._worldInfo?self.IWorldInstance:c;const a=this._sdkInst.GetScriptInterfaceClass(),b=this._objectType._GetUserScriptInstanceClass(),l=b||a||k;c._Init(this);this._iScriptInterface=new l;c._Init(null);if(a&&!(this._iScriptInterface instanceof k))throw new TypeError(`script interface class '${a.name}' does not extend the right base class '${k.name}'`);
if(b&&(k=a||k,!(this._iScriptInterface instanceof k)))throw new TypeError(`setInstanceClass(): class '${b.name}' does not extend the right base class '${k.name}'`);return this._iScriptInterface}_GetInstVarsScriptDescriptor(k){if(0!==this._instVarValues.length){var a={},b=this._objectType._GetAllInstanceVariableJsPropNames();for(let l=0,p=b.length;l<p;++l)a[b[l]]={configurable:!1,enumerable:!0,get:e.Instance.prototype._GetInstanceVariableValueUnchecked.bind(this,l),set:e.Instance.prototype.SetInstanceVariableValue.bind(this,
l)};a=Object.create(Object.prototype,a);k.instVars={value:a,writable:!1}}}_GetBehaviorsScriptDescriptor(k){var a=this._behaviorInstances;if(0!==a.length){var b={};for(const l of a)b[l.GetBehaviorType().GetJsPropName()]={value:l.GetScriptInterface(),writable:!1};a=Object.create(Object.prototype,b);k.behaviors={value:a,writable:!1}}}DispatchUserScriptEvent(k){k.instance=this.GetInterfaceClass();var a=this._runtime;(a=a.IsDebug()&&!a.GetEventSheetManager().IsInEventEngine())&&d.StartMeasuringScriptTime();
this.GetInterfaceClass().dispatchEvent(k);a&&d.AddScriptTime()}}}"use strict";
{const e=self.C3;e.SceneGraphInfo=class extends e.DefendedBase{constructor(d){super();this._owner=d;this._parent=null;this._children=[];this._myStartWidth=d.GetWidth();this._myStartHeight=d.GetHeight();this._parentStartAngle=0}Release(){this._parent=null;e.clearArray(this._children)}SetParent(d){this._parentStartAngle=(this._parent=d)?d.GetAngle():0}GetParent(){return this._parent}HasChildren(){return 0<this._children.length}GetChildren(){return this._children}_GetStartWidth(){return this._myStartWidth}_GetStartHeight(){return this._myStartHeight}GetParentScaleX(){return this._owner.GetTransformWithParentWidth()?this._parent.GetWidth()/
this._parent._GetSceneGraphInfo()._GetStartWidth():1}GetParentScaleY(){return this._owner.GetTransformWithParentHeight()?this._parent.GetHeight()/this._parent._GetSceneGraphInfo()._GetStartHeight():1}GetParentStartAngle(){return this._parentStartAngle}_SaveToJson(){return{sw:this._myStartWidth,sh:this._myStartHeight,psa:this._parentStartAngle,c:this._children.map(d=>{let c="";d.GetTransformWithParentX()&&(c+="x");d.GetTransformWithParentY()&&(c+="y");d.GetTransformWithParentWidth()&&(c+="w");d.GetTransformWithParentHeight()&&
(c+="h");d.GetTransformWithParentAngle()&&(c+="a");d.GetTransformWithParentZElevation()&&(c+="z");d.GetDestroyWithParent()&&(c+="d");return{uid:d.GetInstance().GetUID(),f:c}})}}_LoadFromJson(d){this._myStartWidth=d.sw;this._myStartHeight=d.sh;this._parentStartAngle=d.psa}_OnAfterLoad(d){const c=this._owner,f=c.GetRuntime();for(const g of d.c){d=f.GetInstanceByUID(g.uid).GetWorldInfo();const h=g.f,m={};m.transformX=h.includes("x");m.transformY=h.includes("y");m.transformWidth=h.includes("w");m.transformHeight=
h.includes("h");m.transformAngle=h.includes("a");m.transformZElevation=h.includes("z");m.destroyWithParent=h.includes("d");c.AddChild(d,m)}}}}"use strict";
{const e=self.C3,d=e.New(e.Rect),c=e.New(e.Quad),f=e.New(e.Event,"bboxchange",!1),g=e.New(e.Color,0,0,0,0),h=e.New(e.CollisionPoly),m=e.New(e.Color,1,1,1,1),k=e.New(e.Rect,0,0,-1,-1),a=e.New(e.Rect,0,0,-1,-1),b=new Set(["absolute","relative"]),l=[];let p=!0;e.WorldInfo=class extends e.DefendedBase{constructor(r,t){super();this._inst=r;this._objectClass=r.GetObjectClass();this._runtime=r.GetRuntime();this._layer=t;this._zIndex=-1;this._flags=98331;this._objectClass.GetPlugin().IsRotatable()&&(this._flags|=
128);this._oy=this._ox=this._cosA=this._sinA=this._a=this._h=this._w=this._zElevation=this._y=this._x=NaN;this._boundingBox=e.New(e.Rect);this._boundingQuad=e.New(e.Quad);this._collisionCells=a;this._renderCells=k;this._solidFilterTags=this._transformedPolyInfo=this._sourceCollisionPoly=null;this._colorPremultiplied=this._color=m;this._instanceEffectList=this._stateGroup=null;this._inst.GetObjectClass().UsesEffects()&&(this._instanceEffectList=e.New(e.InstanceEffectList,this._inst,this));this._sceneGraphInfo=
null;this._sceneGraphFlagsExportData=NaN;this._meshInfo=this._sceneGraphChildrenExportData=null}Release(){this._stateGroup&&(this._runtime.GetRenderer().ReleaseStateGroup(this._stateGroup),this._stateGroup=null);this._sourceCollisionPoly=null;this._transformedPolyInfo&&(this._transformedPolyInfo.poly.Release(),this._transformedPolyInfo=null);this._solidFilterTags&&(this._solidFilterTags.clear(),this._solidFilterTags=null);this.ReleaseMesh();this.HasParent()&&this.GetParent().RemoveChild(this);if(this.HasChildren()){const r=
[...this.GetChildren()];for(const t of r)this.RemoveChild(t)}this._ReleaseSceneGraphInfo();this._layer=this._runtime=this._objectClass=this._inst=null}Init(r){p=!1;this.SetXY(r[0],r[1]);this.SetZElevation(r[2]);this.SetSize(r[3],r[4]);this.IsRotatable()?this.SetAngle(r[6]):this._a=0;g.setFromJSON(r[7]);this._SetColor(g);this.SetOriginX(r[8]);this.SetOriginY(r[9]);this.SetBlendMode(r[10]);this._instanceEffectList&&this._instanceEffectList._LoadEffectParameters(r[12]);r[14]&&(this._sceneGraphFlagsExportData=
r[14][0],this._sceneGraphChildrenExportData=r[14][1]);p=!0;this._UpdateRendererStateGroup()}InitNoData(){this._sinA=this._a=this._h=this._w=this._zElevation=this._y=this._x=0;this._cosA=1;this._oy=this._ox=0;this._UpdateRendererStateGroup()}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetInstance(){return this._inst}_GetParentOffsetAngle(){return this.GetTransformWithParentAngle()?this.GetParent().GetAngle()-this._sceneGraphInfo.GetParentStartAngle():0}SetX(r){r=+r;
if(this.GetTransformWithParentX()){const t=this._sceneGraphInfo;r-=this.GetX();const u=-this._GetParentOffsetAngle();0===u?this._x+=r/t.GetParentScaleX():(this._x+=Math.cos(u)*r/t.GetParentScaleX(),this.GetTransformWithParentY()&&(this._y+=Math.sin(u)*r/t.GetParentScaleY()))}else this._x=r}OffsetX(r){r=+r;this.GetTransformWithParentX()?this.SetX(this.GetX()+r):this._x+=r}GetX(){if(this.GetTransformWithParentX()){let r=this._x;const t=this._sceneGraphInfo,u=this.GetParent(),w=this._GetParentOffsetAngle();
0===w?r*=t.GetParentScaleX():(r=r*t.GetParentScaleX()*Math.cos(w),this.GetTransformWithParentY()&&(r-=this._y*t.GetParentScaleY()*Math.sin(w)));return u.GetX()+r}return this._x}SetY(r){r=+r;if(this.GetTransformWithParentY()){const t=this._sceneGraphInfo;r-=this.GetY();const u=-this._GetParentOffsetAngle();0===u?this._y+=r/t.GetParentScaleY():(this.GetTransformWithParentX()&&(this._x-=Math.sin(u)*r/t.GetParentScaleX()),this._y+=Math.cos(u)*r/t.GetParentScaleY())}else this._y=r}OffsetY(r){r=+r;this.GetTransformWithParentY()?
this.SetY(this.GetY()+r):this._y+=r}GetY(){if(this.GetTransformWithParentY()){let r=this._y;const t=this._sceneGraphInfo,u=this.GetParent(),w=this._GetParentOffsetAngle();0===w?r*=t.GetParentScaleY():(r=r*t.GetParentScaleY()*Math.cos(w),this.GetTransformWithParentX()&&(r+=this._x*t.GetParentScaleX()*Math.sin(w)));return u.GetY()+r}return this._y}SetXY(r,t){r=+r;t=+t;if(this.GetTransformWithParentXOrY()){const w=this.GetTransformWithParentX(),x=this.GetTransformWithParentY(),A=this._sceneGraphInfo,
E=r-this.GetX(),y=t-this.GetY();var u=-this._GetParentOffsetAngle();if(0===u)this._x=w?this._x+E/A.GetParentScaleX():r,this._y=x?this._y+y/A.GetParentScaleY():t;else{const B=Math.sin(u);u=Math.cos(u);this._x=w?x?this._x+(u*E-B*y)/A.GetParentScaleX():this._x+u*E/A.GetParentScaleX():r;this._y=x?w?this._y+(B*E+u*y)/A.GetParentScaleY():this._y+u*y/A.GetParentScaleY():t}}else this._x=r,this._y=t}OffsetXY(r,t){r=+r;t=+t;this.GetTransformWithParentXOrY()?this.SetXY(this.GetX()+r,this.GetY()+t):(this._x+=
r,this._y+=t)}EqualsXY(r,t){return this.GetX()===r&&this.GetY()===t}SetZElevation(r){r=+r;this.GetTransformWithParentZElevation()&&(r-=this.GetParent().GetZElevation());this._zElevation!==r&&(this._zElevation=r,this._UpdateZElevation(),r=this.GetLayer(),0!==this._zElevation&&r._SetAnyInstanceZElevated(),r.SetZIndicesChanged())}_UpdateZElevation(){this._UpdateRendererStateGroup();if(this.HasChildren()){const r=this.GetChildren();for(let t=0,u=r.length;t<u;t++){const w=r[t];w.GetTransformWithParentZElevation()&&
w._UpdateZElevation()}}}OffsetZElevation(r){this.SetZElevation(this.GetZElevation()+r)}GetZElevation(){return this.GetTransformWithParentZElevation()?this.GetParent().GetZElevation()+this._zElevation:this._zElevation}GetTotalZElevation(){return this.GetLayer().GetZElevation()+this.GetZElevation()}SetWidth(r){r=+r;this.GetTransformWithParentWidth()?this._w*=r/this.GetWidth():this._w=r}OffsetWidth(r){r=+r;this.GetTransformWithParentWidth()?this.SetWidth(this.GetWidth()+r):this._w+=r}GetWidth(){return this.GetTransformWithParentWidth()?
this.GetParent().GetWidth()*this._w:this._w}SetHeight(r){r=+r;this.GetTransformWithParentHeight()?this._h*=r/this.GetHeight():this._h=r}OffsetHeight(r){r=+r;this.GetTransformWithParentHeight()?this.SetHeight(this.GetHeight()+r):this._h+=r}GetHeight(){return this.GetTransformWithParentHeight()?this.GetParent().GetHeight()*this._h:this._h}SetSize(r,t){r=+r;t=+t;this.GetTransformWithParentWidth()?this._w*=r/this.GetWidth():this._w=r;this.GetTransformWithParentHeight()?this._h*=t/this.GetHeight():this._h=
t}GetSceneGraphScale(){if(this.HasParent()){const r=this._sceneGraphInfo;return Math.min(r.GetParentScaleX(),r.GetParentScaleY())}return 1}IsRotatable(){return 0!==(this._flags&128)}SetAngle(r){r=+r;this.IsRotatable()&&(this.GetTransformWithParentAngle()&&(r-=this.GetParent().GetAngle()),r=e.clampAngle(r),this._a!==r&&(this._a=r,this._MarkSinCosAngleChanged()))}OffsetAngle(r){r=+r;0!==r&&this.IsRotatable()&&(this._a=e.clampAngle(this._a+r),this._MarkSinCosAngleChanged())}_MarkSinCosAngleChanged(){this._flags|=
131072;if(this.HasChildren()){const r=this.GetChildren();for(let t=0,u=r.length;t<u;t++)r[t]._MarkSinCosAngleChanged()}}GetAngle(){return this.GetTransformWithParentAngle()?e.clampAngle(this.GetParent().GetAngle()+this._a):this._a}_MaybeUpdateSinCosAngle(){const r=this._flags;if(0!==(r&131072)){var t=this.GetAngle();this._sinA=Math.sin(t);this._cosA=Math.cos(t);this._flags=r&-131073}}GetSinAngle(){this._MaybeUpdateSinCosAngle();return this._sinA}GetCosAngle(){this._MaybeUpdateSinCosAngle();return this._cosA}SetOriginX(r){this._ox=
+r}OffsetOriginX(r){this._ox+=+r}GetOriginX(){return this._ox}SetOriginY(r){this._oy=+r}OffsetOriginY(r){this._oy+=+r}GetOriginY(){return this._oy}_SetColor(r){this._color.equals(r)||(this._color===m?(this._color=e.New(e.Color,r),this._colorPremultiplied=e.New(e.Color,r),this._colorPremultiplied.premultiply()):r.equalsRgba(1,1,1,1)?this._colorPremultiplied=this._color=m:(this._color.set(r),this._colorPremultiplied.set(r),this._colorPremultiplied.premultiply()),this._UpdateRendererStateGroup())}SetOpacity(r){r=
e.clamp(+r,0,1);this._color.a!==r&&(g.copyRgb(this._color),g.a=r,this._SetColor(g))}OffsetOpacity(r){this.SetOpacity(this.GetOpacity()+r)}GetOpacity(){return this._color.a}SetUnpremultipliedColor(r){this._color.equalsIgnoringAlpha(r)||(g.copyRgb(r),g.a=this._color.a,this._SetColor(g))}SetUnpremultipliedColorRGB(r,t,u){g.setRgb(r,t,u);this.SetUnpremultipliedColor(g)}OffsetUnpremultipliedColorRGB(r,t,u){if(0!==r||0!==t||0!==u)g.copyRgb(this._color),g.r+=r,g.g+=t,g.b+=u,this.SetUnpremultipliedColor(g)}GetUnpremultipliedColor(){return this._color}GetPremultipliedColor(){return this._colorPremultiplied}GetDestroyWithParent(){return 0!==
(this._flags&256)}SetDestroyWithParent(r){this._SetFlag(256,r)}GetTransformWithParentX(){return 0!==(this._flags&512)}SetTransformWithParentX(r){this._SetFlag(512,r)}GetTransformWithParentY(){return 0!==(this._flags&1024)}GetTransformWithParentXOrY(){return 0!==(this._flags&1536)}SetTransformWithParentY(r){this._SetFlag(1024,r)}GetTransformWithParentWidth(){return 0!==(this._flags&2048)}SetTransformWithParentWidth(r){this._SetFlag(2048,r)}GetTransformWithParentHeight(){return 0!==(this._flags&4096)}SetTransformWithParentHeight(r){this._SetFlag(4096,
r)}GetTransformWithParentAngle(){return 0!==(this._flags&8192)}SetTransformWithParentAngle(r){this._SetFlag(8192,r)}GetTransformWithParentZElevation(){return 0!==(this._flags&16384)}SetTransformWithParentZElevation(r){this._SetFlag(16384,r)}_ClearAllSceneGraphFlags(){this._flags&=-32513}AddChild(r,t){if(r!==this&&!r.HasParent()&&!this._HasChildRecursive(r)&&!this._HasAnyParent(r)){var u=r.GetX(),w=r.GetY(),x=r.GetWidth(),A=r.GetHeight(),E=r.GetAngle(),y=r.GetZElevation();r._SetParent(this);r.SetTransformWithParentX(t.transformX);
r.SetTransformWithParentY(t.transformY);r.SetTransformWithParentWidth(t.transformWidth);r.SetTransformWithParentHeight(t.transformHeight);r.SetTransformWithParentAngle(t.transformAngle);r.SetTransformWithParentZElevation(t.transformZElevation);r.SetDestroyWithParent(t.destroyWithParent);t.transformX&&(r._x=u-this.GetX());t.transformY&&(r._y=w-this.GetY());t.transformWidth&&(r._w=x/this.GetWidth());t.transformHeight&&(r._h=A/this.GetHeight());t.transformAngle&&(r._a=E-this.GetAngle());t.transformZElevation&&
(r._zElevation=y-this.GetZElevation());this._AddChildToSceneGraphInfo(r);this.SetBboxChanged()}}RemoveChild(r){if(r.GetParent()===this){var t=r.GetX(),u=r.GetY(),w=r.GetWidth(),x=r.GetHeight(),A=r.GetAngle(),E=r.GetZElevation();r._SetParent(null);r._ClearAllSceneGraphFlags();r.SetXY(t,u);r.SetSize(w,x);r.SetAngle(A);r.SetZElevation(E);this._RemoveChildFromSceneGraphInfo(r);this.SetBboxChanged()}}_ResetAllSceneGraphState(){for(var r of this.children())this.RemoveChild(r);(r=this.GetParent())&&r.RemoveChild(this);
this._ClearAllSceneGraphFlags()}HasParent(){return null!==this.GetParent()}GetParent(){const r=this._sceneGraphInfo;return null!==r?r.GetParent():null}GetTopParent(){let r=this;for(;r.HasParent();)r=r.GetParent();return r}*parents(){let r=this.GetParent();for(;r;)yield r,r=r.GetParent()}HasChild(r){return this.GetChildren().includes(r)}HasChildren(){const r=this._sceneGraphInfo;return null!==r?r.HasChildren():!1}GetChildren(){const r=this._sceneGraphInfo;return null!==r?r.GetChildren():l}children(){return this.GetChildren()}*allChildren(){for(const r of this.children())yield r,
yield*r.allChildren()}GetChildCount(){return this.GetChildren().length}GetChildAt(r){const t=this.GetChildren();r=Math.floor(+r);return 0>r||r>=t.length?null:t[r]}_CreateSceneGraphInfo(r){this._sceneGraphInfo||(this._sceneGraphInfo=e.New(e.SceneGraphInfo,this));r&&this._sceneGraphInfo.SetParent(r)}_GetSceneGraphInfo(){return this._sceneGraphInfo}_ReleaseSceneGraphInfo(){this._sceneGraphInfo&&(this._sceneGraphInfo.Release(),this._sceneGraphInfo=null)}_SetParent(r){r?(r._CreateSceneGraphInfo(null),
this._CreateSceneGraphInfo(r)):(this._sceneGraphInfo&&this._sceneGraphInfo.SetParent(null),this.HasChildren()||this._ReleaseSceneGraphInfo())}_HasAnyParent(r){if(!this.HasParent())return!1;const t=this.GetParent();return t===r?!0:t._HasAnyParent(r)}_HasChildRecursive(r){if(this.HasChild(r))return!0;for(const t of this.GetChildren())if(t._HasChildRecursive(r))return!0;return!1}_AddChildToSceneGraphInfo(r){this._sceneGraphInfo.GetChildren().push(r)}_RemoveChildFromSceneGraphInfo(r){const t=this._sceneGraphInfo.GetChildren(),
u=t.indexOf(r);-1!==u&&t.splice(u,1);0!==t.length||this.HasParent()||this._ReleaseSceneGraphInfo();r.HasChildren()||r._ReleaseSceneGraphInfo()}GetSceneGraphChildrenExportData(){return this._sceneGraphChildrenExportData}_UpdateRendererStateGroup(){if(p){var r=this._runtime.GetRenderer();this._stateGroup&&r.ReleaseStateGroup(this._stateGroup);this._stateGroup=r.AcquireStateGroup(r.GetTextureFillShaderProgram()||"<default>",this.GetBlendMode(),this._colorPremultiplied,this.GetZElevation())}}GetRendererStateGroup(){return this._stateGroup}HasDefaultColor(){return this._color===
m}SetBlendMode(r){r|=0;if(0>r||31<r)throw new RangeError("invalid blend mode");this.GetBlendMode()!==r&&(this._flags=this._flags&-2080374785|r<<26,this._UpdateRendererStateGroup())}GetBlendMode(){return(this._flags&2080374784)>>26}_SetLayer(r){this._layer=r;0!==this.GetZElevation()&&this._layer._SetAnyInstanceZElevated()}GetLayer(){return this._layer}GetLayout(){return this.GetLayer().GetLayout()}_SetZIndex(r){this._zIndex=r|0}GetZIndex(){this._layer._UpdateZIndices();return this._zIndex}_GetLastCachedZIndex(){return this._zIndex}_SetFlag(r,
t){this._flags=t?this._flags|r:this._flags&~r}IsVisible(){return 0!==(this._flags&1)}SetVisible(r){this._SetFlag(1,r)}IsCollisionEnabled(){return 0!==(this._flags&8)}SetCollisionEnabled(r){r=!!r;this.IsCollisionEnabled()!==r&&(this._SetFlag(8,r),r?this.SetBboxChanged():this._RemoveFromCollisionCells())}SetSolidCollisionFilter(r,t){this._SetFlag(32,r);this._solidFilterTags&&this._solidFilterTags.clear();if(t.trim()){this._solidFilterTags||(this._solidFilterTags=new Set);for(const u of t.split(" "))u&&
this._solidFilterTags.add(u.toLowerCase())}else this._solidFilterTags=null}IsSolidCollisionAllowed(r){const t=0!==(this._flags&32),u=this._solidFilterTags;if(!r||!u)return!t;for(const w of u)if(r.has(w))return t;return!t}SetBboxChanged(){this._flags|=32786;this._objectClass._SetAnyCollisionCellChanged(!0);this._runtime.UpdateRender();this._layer.UsesRenderCells()&&(this.CalculateBbox(this._boundingBox,this._boundingQuad,!0),this._flags&=-3,this._UpdateRenderCell());0!==(this._flags&4)&&this._inst.Dispatcher().dispatchEvent(f);
if(null!==this._sceneGraphInfo){const r=this._sceneGraphInfo.GetChildren();for(let t=0,u=r.length;t<u;++t)r[t].SetBboxChanged()}}CalculateBbox(r,t,u){const w=this.GetX(),x=this.GetY(),A=this.GetWidth(),E=this.GetHeight(),y=this.GetAngle();r.setWH(w-this._ox*A,x-this._oy*E,A,E);u&&this.HasMesh()&&this._ExpandBboxForMesh(r);0===y?t.setFromRect(r):(r.offset(-w,-x),t.setFromRotatedRectPrecalc(r,this.GetSinAngle(),this.GetCosAngle()),t.offset(w,x),t.getBoundingBox(r));r.normalize()}_UpdateBbox(){const r=
this._flags;0!==(r&2)&&(this.CalculateBbox(this._boundingBox,this._boundingQuad,!0),this._flags=r&-3)}GetBoundingBox(){this._UpdateBbox();return this._boundingBox}GetBoundingQuad(){this._UpdateBbox();return this._boundingQuad}PixelRoundQuad(r){var t=this.GetX(),u=this.GetY();t=Math.round(t)-t;u=Math.round(u)-u;if(0===t&&0===u)return r;c.copy(r);c.offset(t,u);return c}OverwriteBoundingBox(r){this._boundingBox.copy(r);this._boundingQuad.setFromRect(this._boundingBox);this._flags&=-3;this._UpdateCollisionCell();
this._UpdateRenderCell()}SetBboxChangeEventEnabled(r){this._SetFlag(4,r)}IsBboxChangeEventEnabled(){return 0!==(this._flags&4)}IsInViewport(r){return 0===this.GetZElevation()?r.intersectsRect(this.GetBoundingBox()):this._IsInViewport_ZElevated()}_IsInViewport_ZElevated(){const r=this.GetLayer(),t=this.GetTotalZElevation();if(t>=r.GetCameraZ())return!1;r.GetViewportForZ(t,d);return d.intersectsRect(this.GetBoundingBox())}SetSourceCollisionPoly(r){this._sourceCollisionPoly=r;this._DiscardTransformedCollisionPoly();
this.HasMesh()&&(this._meshInfo.meshPoly=null)}GetSourceCollisionPoly(){return this._sourceCollisionPoly}HasOwnCollisionPoly(){return null!==this._sourceCollisionPoly||this.HasMesh()}GetTransformedCollisionPoly(){return this._GetCustomTransformedCollisionPolyPrecalc(this.GetWidth(),this.GetHeight(),this.GetAngle(),this.GetSinAngle(),this.GetCosAngle())}GetCustomTransformedCollisionPoly(r,t,u){let w=0,x=1;0!==u&&(w=Math.sin(u),x=Math.cos(u));return this._GetCustomTransformedCollisionPolyPrecalc(r,
t,u,w,x)}_GetCustomTransformedCollisionPolyPrecalc(r,t,u,w,x){let A=this._transformedPolyInfo;null===A&&(this._transformedPolyInfo=A={poly:e.New(e.CollisionPoly),width:NaN,height:NaN,angle:NaN});const E=A.poly;if(A.width===r&&A.height===t&&A.angle===u)return E;const y=this._sourceCollisionPoly;if(this.HasMesh()){const B=this.GetOriginX(),H=this.GetOriginY(),P=this.GetSourceMesh();let F=this._meshInfo.meshPoly;F||(y?(h.copy(y),h.offset(B,H)):h.setDefaultPoints(),F=P.InsertPolyMeshVertices(h),this._meshInfo.meshPoly=
F);P.TransformCollisionPoly(F,E);E.offset(-B,-H);E.transformPrecalc(r,t,w,x)}else y?(E.copy(y),E.transformPrecalc(r,t,w,x)):E.setFromQuad(this.GetBoundingQuad(),-this.GetX(),-this.GetY());A.width=r;A.height=t;A.angle=u;return E}_DiscardTransformedCollisionPoly(){this.SetPhysicsBodyChanged(!0);const r=this._transformedPolyInfo;null!==r&&(r.width=NaN)}CreateMesh(r,t){r=Math.floor(r);t=Math.floor(t);if(!this.GetInstance().GetPlugin().SupportsMesh())throw Error("object does not support mesh");this.ReleaseMesh();
this._meshInfo={sourceMesh:e.New(e.Gfx.Mesh,r,t),transformedMesh:e.New(e.Gfx.Mesh,r,t),meshPoly:null}}HasMesh(){return null!==this._meshInfo}GetSourceMesh(){if(!this.HasMesh())throw Error("no mesh");return this._meshInfo.sourceMesh}GetTransformedMesh(){if(!this.HasMesh())throw Error("no mesh");return this._meshInfo.transformedMesh}SetMeshChanged(r){this._SetFlag(32768,r)}IsMeshChanged(){return 0!==(this._flags&32768)}SetPhysicsBodyChanged(r){this._SetFlag(65536,r)}IsPhysicsBodyChanged(){return 0!==
(this._flags&65536)}_ExpandBboxForMesh(r){var t=this._meshInfo.sourceMesh;const u=Math.min(t.GetMinX(),0),w=Math.min(t.GetMinY(),0),x=Math.max(t.GetMaxX(),1);t=Math.max(t.GetMaxY(),1);const A=r.width(),E=r.height();r.offsetLeft(u*A);r.offsetTop(w*E);r.offsetRight((x-1)*A);r.offsetBottom((t-1)*E)}ReleaseMesh(){this._meshInfo&&(this._meshInfo.sourceMesh.Release(),this._meshInfo.transformedMesh.Release(),this._meshInfo=null,this._DiscardTransformedCollisionPoly())}SetMeshPoint(r,t,u){r=Math.floor(r);
t=Math.floor(t);var w=u.mode||"absolute";if(!b.has(w))throw Error("invalid mode");w="relative"===w;let x=u.x,A=u.y,E="number"===typeof u.u?u.u:w?0:-1;u="number"===typeof u.v?u.v:w?0:-1;if(!this.HasMesh())return!1;const y=this.GetSourceMesh(),B=y.GetMeshPointAt(r,t);if(null===B)return!1;w&&(x+=r/(y.GetHSize()-1),A+=t/(y.GetVSize()-1));-1!==E||w?(w&&(E+=r/(y.GetHSize()-1)),E=e.clamp(E,0,1)):E=B.GetU();-1!==u||w?(w&&(u+=t/(y.GetVSize()-1)),u=e.clamp(u,0,1)):u=B.GetV();if(B.GetX()===x&&B.GetY()===A&&
B.GetU()===E&&B.GetV()===u)return!1;B.SetX(x);B.SetY(A);B.SetU(E);B.SetV(u);this._DiscardTransformedCollisionPoly();return!0}HasTilemap(){return this._inst.HasTilemap()}ContainsPoint(r,t){return this.GetBoundingBox().containsPoint(r,t)&&this.GetBoundingQuad().containsPoint(r,t)?this.HasTilemap()?this._inst.GetSdkInstance().TestPointOverlapTile(r,t):this.HasOwnCollisionPoly()?this.GetTransformedCollisionPoly().containsPoint(r-this.GetX(),t-this.GetY()):!0:!1}_IsCollisionCellChanged(){return 0!==(this._flags&
16)}_UpdateCollisionCell(){if(this._IsCollisionCellChanged()&&this.IsCollisionEnabled()){var r=this.GetBoundingBox(),t=this._objectClass._GetCollisionCellGrid(),u=this._collisionCells;d.set(t.XToCell(r.getLeft()),t.YToCell(r.getTop()),t.XToCell(r.getRight()),t.YToCell(r.getBottom()));u.equals(d)||(r=this._inst,u===a?(t.Update(r,null,d),this._collisionCells=e.New(e.Rect,d)):(t.Update(r,u,d),u.copy(d)),this._flags&=-17)}}_RemoveFromCollisionCells(){const r=this._collisionCells;r!==a&&(this._objectClass._GetCollisionCellGrid().Update(this._inst,
r,null),this._collisionCells=a)}_UpdateRenderCell(){const r=this.GetLayer();if(r.UsesRenderCells()){var t=r.GetRenderGrid(),u=this.GetBoundingBox(),w=this._renderCells;d.set(t.XToCell(u.getLeft()),t.YToCell(u.getTop()),t.XToCell(u.getRight()),t.YToCell(u.getBottom()));w.equals(d)||(u=this._inst,w===k?(t.Update(u,null,d),this._renderCells=e.New(e.Rect,d)):(t.Update(u,w,d),w.copy(d)),r.SetRenderListStale())}}_RemoveFromRenderCells(){const r=this._renderCells;r!==k&&(this.GetLayer().GetRenderGrid().Update(this._inst,
r,null),this._renderCells=k)}GetRenderCellRange(){return this._renderCells}ZOrderMoveToTop(){const r=this._inst,t=this._layer,u=t._GetInstances();u.length&&u[u.length-1]===r||(t._RemoveInstance(r,!1),t._AddInstance(r,!1),this._runtime.UpdateRender())}ZOrderMoveToBottom(){const r=this._inst,t=this._layer,u=t._GetInstances();u.length&&u[0]===r||(t._RemoveInstance(r,!1),t._PrependInstance(r,!1),this._runtime.UpdateRender())}ZOrderMoveToLayer(r){const t=this._inst,u=this._layer;if(u.GetLayout()!==r.GetLayout())throw Error("layer from different layout");
r!==u&&(u._RemoveInstance(t,!0),this._SetLayer(r),r._AddInstance(t,!0),this._runtime.UpdateRender())}ZOrderMoveAdjacentToInstance(r,t){const u=this._inst,w=this._layer;if(r.GetUID()!==u.GetUID()){var x=r.GetWorldInfo();if(!x)throw Error("expected world instance");var A=x.GetLayer();x=!1;w.GetIndex()!==A.GetIndex()&&(w._RemoveInstance(u,!0),this._SetLayer(A),A._AddInstance(u,!0),x=!0);r=A.MoveInstanceAdjacent(u,r,!!t);(x||r)&&this._runtime.UpdateRender()}}GetInstanceEffectList(){return this._instanceEffectList}_SetHasAnyActiveEffect(r){this._SetFlag(64,
r)}HasAnyActiveEffect(){return 0!==(this._flags&64)}_SaveToJson(){const r={x:this.GetX(),y:this.GetY(),w:this.GetWidth(),h:this.GetHeight(),l:this.GetLayer().GetSID(),zi:this.GetZIndex()};0!==this.GetZElevation()&&(r.ze=this.GetZElevation());0!==this.GetAngle()&&(r.a=this.GetAngle());this.HasDefaultColor()||(r.c=this._color.toJSON());.5!==this.GetOriginX()&&(r.oX=this.GetOriginX());.5!==this.GetOriginY()&&(r.oY=this.GetOriginY());0!==this.GetBlendMode()&&(r.bm=this.GetBlendMode());this.IsVisible()||
(r.v=this.IsVisible());this.IsCollisionEnabled()||(r.ce=this.IsCollisionEnabled());this.IsBboxChangeEventEnabled()&&(r.be=this.IsBboxChangeEventEnabled());this._instanceEffectList&&(r.fx=this._instanceEffectList._SaveToJson());const t=0!==(this._flags&32);t&&(r.sfi=t);this._solidFilterTags&&(r.sft=[...this._solidFilterTags].join(" "));this._sceneGraphInfo&&(r.sgi=this._sceneGraphInfo._SaveToJson());return r}_LoadFromJson(r){p=!1;this._ResetAllSceneGraphState();this.SetX(r.x);this.SetY(r.y);this.SetWidth(r.w);
this.SetHeight(r.h);this._SetZIndex(r.zi);this.SetZElevation(r.hasOwnProperty("ze")?r.ze:0);this.SetAngle(r.hasOwnProperty("a")?r.a:0);r.hasOwnProperty("c")?g.setFromJSON(r.c):r.hasOwnProperty("o")?(g.copyRgb(this._color),g.a=r.o):g.setRgba(1,1,1,1);this._SetColor(g);this.SetOriginX(r.hasOwnProperty("oX")?r.oX:.5);this.SetOriginY(r.hasOwnProperty("oY")?r.oY:.5);this.SetBlendMode(r.hasOwnProperty("bm")?r.bm:0);this.SetVisible(r.hasOwnProperty("v")?r.v:!0);this.SetCollisionEnabled(r.hasOwnProperty("ce")?
r.ce:!0);this.SetBboxChangeEventEnabled(r.hasOwnProperty("be")?r.be:!1);this.SetSolidCollisionFilter(r.hasOwnProperty("sfi")?r.sfi:!1,r.hasOwnProperty("sft")?r.sft:"");this._instanceEffectList&&r.hasOwnProperty("fx")&&this._instanceEffectList._LoadFromJson(r.fx);if(r.hasOwnProperty("sgi")){this._CreateSceneGraphInfo(null);const t=this._sceneGraphInfo,u=r.sgi;t._LoadFromJson(u);const w=this.GetRuntime().Dispatcher(),x=()=>{w.removeEventListener("afterload",x);t._OnAfterLoad(u)};w.addEventListener("afterload",
x)}this.SetBboxChanged();p=!0;this._UpdateRendererStateGroup()}}}"use strict";
{const e=self.C3;e.BehaviorType=class extends e.DefendedBase{constructor(d,c){super();const f=d.GetRuntime(),g=f.GetPluginManager(),h=f.GetObjectReference(c[1]);g.HasBehaviorByConstructorFunction(h)||g.CreateBehavior(c);this._runtime=f;this._objectClass=d;this._behavior=g.GetBehaviorByConstructorFunction(h);this._sdkType=null;this._instSdkCtor=h.Instance;this._sid=c[2];this._name=c[0];this._jsPropName=this._runtime.GetJsPropName(c[3]);this._sdkType=e.New(h.Type,this);this.OnCreate()}static Create(d,
c){return e.New(e.BehaviorType,d,c)}Release(){this._behavior=this._runtime=null;this._sdkType.Release();this._instSdkCtor=this._sdkType=null}GetSdkType(){return this._sdkType}OnCreate(){this._sdkType.OnCreate()}GetRuntime(){return this._runtime}GetObjectClass(){return this._objectClass}GetBehavior(){return this._behavior}GetInstanceSdkCtor(){return this._instSdkCtor}GetName(){return this._name}GetSID(){return this._sid}GetJsPropName(){return this._jsPropName}}}"use strict";
{const e=self.C3,d=self.IBehaviorInstance;e.BehaviorInstance=class extends e.DefendedBase{constructor(c){super();this._runtime=c.runtime;this._behaviorType=c.behaviorType;this._behavior=this._behaviorType.GetBehavior();this._inst=c.instance;this._index=c.index;this._iScriptInterface=this._sdkInst=null;this._behavior._AddInstance(this._inst)}Release(){this._iScriptInterface&&(this._iScriptInterface._Release(),this._iScriptInterface=null);this._behavior._RemoveInstance(this._inst);this._sdkInst.Release();
this._inst=this._behavior=this._behaviorType=this._runtime=this._iScriptInterface=this._sdkInst=null}_CreateSdkInstance(c){if(this._sdkInst)throw Error("already got sdk instance");this._sdkInst=e.New(this._behaviorType.GetInstanceSdkCtor(),this,c);this._InitScriptInterface()}GetSdkInstance(){return this._sdkInst}GetObjectInstance(){return this._inst}GetRuntime(){return this._runtime}GetBehaviorType(){return this._behaviorType}GetBehavior(){return this._behavior}_GetIndex(){return this._index}PostCreate(){this._sdkInst.PostCreate()}OnSpriteFrameChanged(c,
f){this._sdkInst.OnSpriteFrameChanged(c,f)}_GetDebuggerProperties(){return this._sdkInst.GetDebuggerProperties()}SaveToJson(){return this._sdkInst.SaveToJson()}LoadFromJson(c){return this._sdkInst.LoadFromJson(c)}static SortByTickSequence(c,f){var g=c.GetObjectInstance(),h=f.GetObjectInstance();const m=g.GetObjectClass().GetIndex(),k=h.GetObjectClass().GetIndex();if(m!==k)return m-k;g=g.GetPUID();h=h.GetPUID();return g!==h?g-h:c.GetBehaviorInstance()._GetIndex()-f.GetBehaviorInstance()._GetIndex()}_InitScriptInterface(){const c=
this._sdkInst.GetScriptInterfaceClass(),f=c||d;d._Init(this);this._iScriptInterface=new f;d._Init(null);if(c&&!(this._iScriptInterface instanceof d))throw new TypeError(`script interface class '${c.name}' does not extend the right base class '${d.name}'`);}GetScriptInterface(){return this._iScriptInterface}}}"use strict";
{const e=self.C3;e.EffectList=class extends e.DefendedBase{constructor(d,c){super();this._owner=d;this._allEffectTypes=[];this._activeEffectTypes=[];this._effectTypesByName=new Map;this._effectParams=[];this._preservesOpaqueness=!0;for(const f of c)d=e.New(e.EffectType,this,f,this._allEffectTypes.length),this._allEffectTypes.push(d),this._effectTypesByName.set(d.GetName().toLowerCase(),d),3<=f.length&&this._effectParams.push(this._LoadSingleEffectParameters(f[2]));this.GetRuntime()._AddEffectList(this)}Release(){e.clearArray(this._allEffectTypes);
e.clearArray(this._activeEffectTypes);this._effectTypesByName.clear();e.clearArray(this._effectParams);this._owner=null}PrependEffectTypes(d){if(d.length){this._allEffectTypes=d.concat(this._allEffectTypes);for(const c of d)this._effectTypesByName.set(c.GetName().toLowerCase(),c);for(let c=0,f=this._allEffectTypes.length;c<f;++c)this._allEffectTypes[c]._SetIndex(c)}}_LoadSingleEffectParameters(d){d=d.slice(0);for(let c=0,f=d.length;c<f;++c){const g=d[c];if(Array.isArray(g)){const h=e.New(e.Color);
h.setFromJSON(g);d[c]=h}}return d}GetOwner(){return this._owner}GetRuntime(){return this._owner.GetRuntime()}UpdateActiveEffects(){e.clearArray(this._activeEffectTypes);let d=!0;for(const c of this._allEffectTypes)c.IsActive()&&(this._activeEffectTypes.push(c),c.GetShaderProgram().PreservesOpaqueness()||(d=!1));this._preservesOpaqueness=d}GetAllEffectTypes(){return this._allEffectTypes}HasAnyEffectType(){return 0<this._allEffectTypes.length}GetEffectTypeByName(d){return this._effectTypesByName.get(d.toLowerCase())||
null}GetEffectTypeByIndex(d){d=Math.floor(+d);if(0>d||d>=this._allEffectTypes.length)throw new RangeError("invalid effect type index");return this._allEffectTypes[d]}IsEffectIndexActive(d){return this.GetEffectTypeByIndex(d).IsActive()}SetEffectIndexActive(d,c){this.GetEffectTypeByIndex(d).SetActive(c)}GetActiveEffectTypes(){return this._activeEffectTypes}HasAnyActiveEffect(){return 0<this._activeEffectTypes.length}PreservesOpaqueness(){return this._preservesOpaqueness}GetEffectParametersForIndex(d){return this._effectParams[d]}static SaveFxParamToJson(d){return d&&
d instanceof e.Color?{t:"color",v:d.toJSON()}:d}static LoadFxParamFromJson(d){if("object"===typeof d){if("color"===d.t){const c=e.New(e.Color);c.setFromJSON(d.v);return c}throw Error("invalid effect parameter type");}return d}static SaveFxParamsToJson(d){return d.map(e.EffectList.SaveFxParamToJson)}static LoadFxParamsFromJson(d){return d.map(e.EffectList.LoadFxParamFromJson)}SaveToJson(){return this._allEffectTypes.map(d=>({name:d.GetName(),active:d.IsActive(),params:e.EffectList.SaveFxParamsToJson(this._effectParams[d.GetIndex()])}))}LoadFromJson(d){for(const c of d)if(d=
this.GetEffectTypeByName(c.name))d.SetActive(c.active),this._effectParams[d.GetIndex()]=e.EffectList.LoadFxParamsFromJson(c.params);this.UpdateActiveEffects()}}}"use strict";
{const e=self.C3;e.EffectType=class extends e.DefendedBase{constructor(d,c,f){super();this._effectList=d;this._id=c[0];this._name=c[1];this._index=f;this._shaderProgram=null;this._isActive=!0}Release(){this._shaderProgram=this._effectList=null}Clone(d){d=e.New(e.EffectType,d,[this._id,this._name],-1);d._shaderProgram=this._shaderProgram;d._isActive=this._isActive;return d}_InitRenderer(d){d=d.GetShaderProgramByName(this._id);if(!d)throw Error("failed to find shader program '"+this._id+"'");this._shaderProgram=
d}GetEffectList(){return this._effectList}GetName(){return this._name}_SetIndex(d){this._index=d}GetIndex(){return this._index}GetOwner(){return this._effectList.GetOwner()}GetRuntime(){return this._effectList.GetRuntime()}SetActive(d){this._isActive=!!d}IsActive(){return this._isActive}GetShaderProgram(){return this._shaderProgram}GetDefaultParameterValues(){const d=[];for(let c=0,f=this._shaderProgram.GetParameterCount();c<f;++c){const g=this._shaderProgram.GetParameterType(c);if("float"===g||"percent"===
g)d.push(0);else if("color"===g)d.push(e.New(e.Color,1,1,1,1));else throw new TypeError("unknown effect parameter type");}return d}}}"use strict";
{const e=self.C3;e.InstanceEffectList=class extends e.DefendedBase{constructor(d,c,f){super();this._inst=d;this._wi=c;this._effectList=d.GetObjectClass().GetEffectList();this._activeEffectFlags=[];this._activeEffectTypes=[];this._preservesOpaqueness=!0;this._effectParams=[];for(const g of this._effectList.GetAllEffectTypes())this._activeEffectFlags.push(!0);this.UpdateActiveEffects()}Release(){e.clearArray(this._activeEffectFlags);e.clearArray(this._activeEffectTypes);e.clearArray(this._effectParams);
this._effectList=this._inst=null}_LoadEffectParameters(d){for(const c of d)this._effectParams.push(this._LoadSingleEffectParameters(c))}_LoadSingleEffectParameters(d){d=d.slice(0);for(let c=0,f=d.length;c<f;++c){const g=d[c];if(Array.isArray(g)){const h=e.New(e.Color);h.setFromJSON(g);d[c]=h}}return d}LoadDefaultEffectParameters(){for(const d of this._effectList.GetAllEffectTypes())this._effectParams.push(d.GetDefaultParameterValues())}GetOwner(){return this._owner}GetEffectList(){return this._effectList}GetRuntime(){return this._inst.GetRuntime()}UpdateActiveEffects(){e.clearArray(this._activeEffectTypes);
const d=this._effectList.GetAllEffectTypes(),c=this._activeEffectTypes,f=this._activeEffectFlags;let g=!0;for(let h=0,m=d.length;h<m;++h)if(f[h]){const k=d[h];c.push(k);k.GetShaderProgram().PreservesOpaqueness()||(g=!1)}this._preservesOpaqueness=g;this._wi._SetHasAnyActiveEffect(!!c.length)}GetActiveEffectTypes(){return this._activeEffectTypes}GetEffectParametersForIndex(d){return this._effectParams[d]}PreservesOpaqueness(){return this._preservesOpaqueness}HasAnyActiveBackgroundBlendingEffect(){return this._activeEffectTypes.some(d=>
d.GetShaderProgram().UsesDest())}IsEffectIndexActive(d){return this._activeEffectFlags[d]}SetEffectIndexActive(d,c){this._activeEffectFlags[d]=!!c}GetAllEffectTypes(){return this._effectList.GetAllEffectTypes()}_SaveToJson(){return this._effectList.GetAllEffectTypes().map(d=>({name:d.GetName(),active:this._activeEffectFlags[d.GetIndex()],params:e.EffectList.SaveFxParamsToJson(this._effectParams[d.GetIndex()])}))}_LoadFromJson(d){for(const c of d)if(d=this._effectList.GetEffectTypeByName(c.name))this._activeEffectFlags[d.GetIndex()]=
c.active,this._effectParams[d.GetIndex()]=e.EffectList.LoadFxParamsFromJson(c.params);this.UpdateActiveEffects()}}}"use strict";
{const e=self.C3,d=[],c=[],f=[],g=e.New(e.CollisionPoly),h=e.New(e.CollisionPoly),m=e.New(e.Quad),k=e.New(e.Rect),a=e.New(e.Rect);e.CollisionEngine=class extends e.DefendedBase{constructor(b){super();this._runtime=b;this._registeredCollisions=[];this._polyCheckSec=this._polyCheckCount=this._collisionCheckSec=this._collisionCheckCount=0}Release(){this._runtime=null}_Update1sStats(){this._collisionCheckSec=this._collisionCheckCount;this._collisionCheckCount=0;this._polyCheckSec=this._polyCheckCount;
this._polyCheckCount=0}Get1secCollisionChecks(){return this._collisionCheckSec}Get1secPolyChecks(){return this._polyCheckSec}RegisterCollision(b,l){const p=b.GetWorldInfo(),r=l.GetWorldInfo();p&&r&&p.IsCollisionEnabled()&&r.IsCollisionEnabled()&&this._registeredCollisions.push([b,l])}AddRegisteredCollisionCandidates(b,l,p){for(const [r,t]of this._registeredCollisions){let u;if(b===r)u=t;else if(b===t)u=r;else continue;u.BelongsToObjectClass(l)&&(p.includes(u)||p.push(u))}}CheckRegisteredCollision(b,
l){if(!this._registeredCollisions.length)return!1;for(const [p,r]of this._registeredCollisions)if(b===p&&l===r||b===r&&l===p)return!0;return!1}ClearRegisteredCollisions(){e.clearArray(this._registeredCollisions)}TestOverlap(b,l){if(!b||!l||b===l)return!1;b=b.GetWorldInfo();l=l.GetWorldInfo();if(!b.IsCollisionEnabled()||!l.IsCollisionEnabled())return!1;this._collisionCheckCount++;const p=b.GetLayer(),r=l.GetLayer();return p.IsTransformCompatibleWith(r)?this._TestOverlap_SameLayers(b,l):this._TestOverlap_DifferentLayers(b,
l)}_TestOverlap_SameLayers(b,l){if(!b.GetBoundingBox().intersectsRect(l.GetBoundingBox()))return!1;this._polyCheckCount++;if(!b.GetBoundingQuad().intersectsQuad(l.GetBoundingQuad())||b.HasTilemap()&&l.HasTilemap())return!1;if(b.HasTilemap())return this.TestTilemapOverlap(b,l);if(l.HasTilemap())return this.TestTilemapOverlap(l,b);if(!b.HasOwnCollisionPoly()&&!l.HasOwnCollisionPoly())return!0;const p=b.GetTransformedCollisionPoly(),r=l.GetTransformedCollisionPoly();return p.intersectsPoly(r,l.GetX()-
b.GetX(),l.GetY()-b.GetY())}_TestOverlap_DifferentLayers(b,l){var p=b.GetLayer();const r=l.GetLayer();g.copy(b.GetTransformedCollisionPoly());h.copy(l.GetTransformedCollisionPoly());var t=g.pointsArr();for(let u=0,w=t.length;u<w;u+=2){const x=u+1,A=t[x],[E,y]=p.LayerToCanvasCss(t[u]+b.GetX(),A+b.GetY());t[u]=E;t[x]=y}b=h.pointsArr();for(let u=0,w=b.length;u<w;u+=2){p=u+1;t=b[p];const [x,A]=r.LayerToCanvasCss(b[u]+l.GetX(),t+l.GetY());b[u]=x;b[p]=A}g.setBboxChanged();h.setBboxChanged();this._polyCheckCount++;
return g.intersectsPoly(h,0,0)}TestTilemapOverlap(b,l){const p=l.GetBoundingBox(),r=b.GetX(),t=b.GetY();var u=b.GetInstance().GetSdkInstance();b=l.GetX();const w=l.GetY(),x=l.HasOwnCollisionPoly(),A=l.GetBoundingQuad();u.GetCollisionRectCandidates(p,c);for(let B=0,H=c.length;B<H;++B){var E=c[B];u=E.GetRect();this._collisionCheckCount++;if(p.intersectsRectOffset(u,r,t)&&(m.setFromRect(u),m.offset(r,t),m.intersectsQuad(A)))if(x){var y=l.GetTransformedCollisionPoly();if(E=E.GetPoly()){if(this._polyCheckCount++,
E.intersectsPoly(y,b-(r+u.getLeft()),w-(t+u.getTop())))return e.clearArray(c),!0}else if(g.setFromQuad(m,0,0),g.intersectsPoly(y,b,w))return e.clearArray(c),!0}else if(y=E.GetPoly()){if(g.setFromQuad(A,0,0),y.intersectsPoly(g,-(r+u.getLeft()),-(t+u.getTop())))return e.clearArray(c),!0}else return e.clearArray(c),!0}e.clearArray(c);return!1}TestAndSelectCanvasPointOverlap(b,l,p,r){const t=b.GetCurrentSol();var u=this._runtime.GetCurrentEvent();if(!u)throw Error("cannot call outside event");u=u.IsOrBlock();
if(t.IsSelectAll()){r||(t._SetSelectAll(!1),e.clearArray(t._GetOwnInstances()));for(var w of b.GetInstances()){var x=w.GetWorldInfo(),A=x.GetLayer();const [E,y]=A.CanvasCssToLayer(l,p,x.GetTotalZElevation());if(x.ContainsPoint(E,y)){if(r)return!1;t._PushInstance(w)}else u&&t._PushElseInstance(w)}}else{w=u?t._GetOwnElseInstances():t._GetOwnInstances();x=0;for(let E=0,y=w.length;E<y;++E){A=w[E];const B=A.GetWorldInfo(),H=B.GetLayer(),[P,F]=H.CanvasCssToLayer(l,p,B.GetTotalZElevation());if(B.ContainsPoint(P,
F)){if(r)return!1;u?t._PushInstance(A):w[x++]=A}else u&&(w[x++]=A)}r||(w.length=x)}b.ApplySolToContainer();return r?!0:t.HasAnyInstances()}GetCollisionCandidates(b,l,p,r){b=b?1!==b.GetParallaxX()||1!==b.GetParallaxY():!1;if(l.IsFamily())for(const t of l.GetFamilyMembers())b||t.IsAnyInstanceParallaxed()?e.appendArray(r,t.GetInstances()):(t._UpdateAllCollisionCells(),t._GetCollisionCellGrid().QueryRange(p,r));else b||l.IsAnyInstanceParallaxed()?e.appendArray(r,l.GetInstances()):(l._UpdateAllCollisionCells(),
l._GetCollisionCellGrid().QueryRange(p,r))}GetObjectClassesCollisionCandidates(b,l,p,r){for(const t of l)this.GetCollisionCandidates(b,t,p,r)}GetSolidCollisionCandidates(b,l,p){const r=this._runtime.GetSolidBehavior();r&&this.GetObjectClassesCollisionCandidates(b,r.GetObjectClasses(),l,p)}GetJumpthruCollisionCandidates(b,l,p){const r=this._runtime.GetJumpthruBehavior();r&&this.GetObjectClassesCollisionCandidates(b,r.GetObjectClasses(),l,p)}IsSolidCollisionAllowed(b,l){return b._IsSolidEnabled()&&
(!l||l.GetWorldInfo().IsSolidCollisionAllowed(b.GetSavedDataMap().get("solidTags")))}TestOverlapSolid(b){const l=b.GetWorldInfo();this.GetSolidCollisionCandidates(l.GetLayer(),l.GetBoundingBox(),d);for(const p of d)if(this.IsSolidCollisionAllowed(p,b)&&this.TestOverlap(b,p))return e.clearArray(d),p;e.clearArray(d);return null}TestRectOverlapSolid(b,l){this.GetSolidCollisionCandidates(null,b,d);for(const p of d)if(this.IsSolidCollisionAllowed(p,l)&&this.TestRectOverlap(b,p))return e.clearArray(d),
p;e.clearArray(d);return null}TestOverlapJumpthru(b,l){let p=null;l&&(p=f,e.clearArray(p));const r=b.GetWorldInfo();this.GetJumpthruCollisionCandidates(r.GetLayer(),r.GetBoundingBox(),d);for(const t of d)if(t._IsJumpthruEnabled()&&this.TestOverlap(b,t))if(l)p.push(t);else return e.clearArray(d),t;e.clearArray(d);return p}PushOut(b,l,p,r,t){r=r||50;const u=b.GetWorldInfo(),w=u.GetX(),x=u.GetY();for(let A=0;A<r;++A)if(u.SetXY(w+l*A,x+p*A),u.SetBboxChanged(),!this.TestOverlap(b,t))return!0;u.SetXY(w,
x);u.SetBboxChanged();return!1}PushOutSolid(b,l,p,r,t,u){r=r||50;const w=b.GetWorldInfo(),x=w.GetX(),A=w.GetY();let E=null,y=null;for(let B=0;B<r;++B)if(w.SetXY(x+l*B,A+p*B),w.SetBboxChanged(),!this.TestOverlap(b,E))if(E=this.TestOverlapSolid(b))y=E;else if(t&&(E=u?this.TestOverlap(b,u)?u:null:this.TestOverlapJumpthru(b))&&(y=E),!E)return y&&this.PushInFractional(b,l,p,y,16,!0),!0;w.SetXY(x,A);w.SetBboxChanged();return!1}PushOutSolidAxis(b,l,p,r){r=r||50;const t=b.GetWorldInfo(),u=t.GetX(),w=t.GetY();
let x=null,A=null;for(let E=0;E<r;++E)for(let y=0;2>y;++y){const B=2*y-1;t.SetXY(u+l*E*B,w+p*E*B);t.SetBboxChanged();if(!this.TestOverlap(b,x))if(x=this.TestOverlapSolid(b))A=x;else return A&&this.PushInFractional(b,l*B,p*B,A,16,!0),!0}t.SetXY(u,w);t.SetBboxChanged();return!1}PushInFractional(b,l,p,r,t,u){let w=2,x=!1;var A=!1;const E=b.GetWorldInfo();let y=E.GetX(),B=E.GetY();for(;w<=t;)A=1/w,w*=2,E.OffsetXY(l*A*(x?1:-1),p*A*(x?1:-1)),E.SetBboxChanged(),this.TestOverlap(b,r)||u&&this.TestOverlapSolid(b)?
A=x=!0:(A=x=!1,y=E.GetX(),B=E.GetY());A&&(E.SetXY(y,B),E.SetBboxChanged())}PushOutSolidNearest(b,l=100){let p=0;const r=b.GetWorldInfo(),t=r.GetX(),u=r.GetY();let w=0,x=this.TestOverlapSolid(b);if(!x)return!0;for(;p<=l;){let A=0,E=0;switch(w){case 0:A=0;E=-1;p++;break;case 1:A=1;E=-1;break;case 2:A=1;E=0;break;case 3:E=A=1;break;case 4:A=0;E=1;break;case 5:A=-1;E=1;break;case 6:A=-1;E=0;break;case 7:E=A=-1}w=(w+1)%8;r.SetXY(Math.floor(t+A*p),Math.floor(u+E*p));r.SetBboxChanged();if(!this.TestOverlap(b,
x)&&(x=this.TestOverlapSolid(b),!x))return!0}r.SetXY(t,u);r.SetBboxChanged();return!1}CalculateBounceAngle(b,l,p,r){const t=b.GetWorldInfo(),u=t.GetX(),w=t.GetY(),x=Math.max(10,e.distanceTo(l,p,u,w));var A=e.angleTo(l,p,u,w),E=r||this.TestOverlapSolid(b);if(!E)return e.clampAngle(A+Math.PI);let y=E;var B=0,H=0;const P=e.toRadians(5);let F;for(F=1;36>F;++F){const I=A-F*P;t.SetXY(l+Math.cos(I)*x,p+Math.sin(I)*x);t.SetBboxChanged();if(!this.TestOverlap(b,y)&&(y=r?null:this.TestOverlapSolid(b),!y)){B=
I;break}}36===F&&(B=e.clampAngle(A+Math.PI));y=E;for(F=1;36>F;++F)if(E=A+F*P,t.SetXY(l+Math.cos(E)*x,p+Math.sin(E)*x),t.SetBboxChanged(),!this.TestOverlap(b,y)&&(y=r?null:this.TestOverlapSolid(b),!y)){H=E;break}36===F&&(H=e.clampAngle(A+Math.PI));t.SetXY(u,w);t.SetBboxChanged();if(H===B)return H;b=e.angleDiff(H,B)/2;b=e.angleClockwise(H,B)?e.clampAngle(B+b+Math.PI):e.clampAngle(H+b);B=Math.cos(A);A=Math.sin(A);H=Math.cos(b);b=Math.sin(b);l=B*H+A*b;return e.angleTo(0,0,B-2*l*H,A-2*l*b)}TestSegmentOverlap(b,
l,p,r,t){if(!t)return!1;const u=t.GetWorldInfo();if(!u.IsCollisionEnabled())return!1;this._collisionCheckCount++;k.set(Math.min(b,p),Math.min(l,r),Math.max(b,p),Math.max(l,r));if(!u.GetBoundingBox().intersectsRect(k))return!1;if(t.HasTilemap())return this._TestSegmentOverlapTilemap(b,l,p,r,t,u);this._polyCheckCount++;return u.GetBoundingQuad().intersectsSegment(b,l,p,r)?u.HasOwnCollisionPoly()?u.GetTransformedCollisionPoly().intersectsSegment(u.GetX(),u.GetY(),b,l,p,r):!0:!1}_TestSegmentOverlapTilemap(b,
l,p,r,t,u){const w=u.GetX();u=u.GetY();t=t.GetSdkInstance();a.set(b,l,p,r);a.normalize();t.GetCollisionRectCandidates(a,c);for(let A=0,E=c.length;A<E;++A){var x=c[A];t=x.GetRect();this._collisionCheckCount++;if(k.intersectsRectOffset(t,w,u)&&(m.setFromRect(t),m.offset(w,u),m.intersectsSegment(b,l,p,r)))if(x=x.GetPoly()){if(this._polyCheckCount++,x.intersectsSegment(w+t.getLeft(),u+t.getTop(),b,l,p,r))return e.clearArray(c),!0}else return e.clearArray(c),!0}e.clearArray(c);return!1}TestRectOverlap(b,
l){if(!l)return!1;const p=l.GetWorldInfo();if(!p.IsCollisionEnabled())return!1;this._collisionCheckCount++;if(!p.GetBoundingBox().intersectsRect(b))return!1;if(l.HasTilemap())return this._TestRectOverlapTilemap(b,l,p);this._polyCheckCount++;m.setFromRect(b);if(!p.GetBoundingQuad().intersectsQuad(m))return!1;if(!p.HasOwnCollisionPoly())return!0;g.setFromRect(b,p.GetX(),p.GetY());b=p.GetTransformedCollisionPoly();return g.intersectsPoly(b,0,0)}_TestRectOverlapTilemap(b,l,p){const r=p.GetX();p=p.GetY();
l.GetSdkInstance().GetCollisionRectCandidates(b,c);for(let u=0,w=c.length;u<w;++u){var t=c[u];l=t.GetRect();this._collisionCheckCount++;if(b.intersectsRectOffset(l,r,p))if(t=t.GetPoly()){if(this._polyCheckCount++,g.setFromRect(b,0,0),t.intersectsPoly(g,-(r+l.getLeft()),-(p+l.getTop())))return e.clearArray(c),!0}else return e.clearArray(c),!0}e.clearArray(c);return!1}TestRayIntersectsInstance(b,l){if(b){var p=b.GetWorldInfo();p.IsCollisionEnabled()&&(this._collisionCheckCount++,p.GetBoundingBox().intersectsRect(l.rect)&&
(b.HasTilemap()?this._TestRayIntersectsTilemap(b,p,l):(this._polyCheckCount++,p.HasOwnCollisionPoly()?l.TestInstancePoly(b,p.GetX(),p.GetY(),p.GetTransformedCollisionPoly()):l.TestInstanceQuad(b,p.GetBoundingQuad()))))}}_TestRayIntersectsTilemap(b,l,p){const r=l.GetX(),t=l.GetY();b.GetSdkInstance().GetCollisionRectCandidates(p.rect,c);for(let w=0,x=c.length;w<x;w++){var u=c[w];const A=u.GetRect();this._collisionCheckCount++;p.rect.intersectsRectOffset(A,r,t)&&(u=u.GetPoly(),this._polyCheckCount++,
u?p.TestInstancePoly(b,r+A.getLeft(),t+A.getTop(),u):p.TestInstanceRect(b,l.GetX(),l.GetY(),A))}e.clearArray(c)}}}"use strict";
{const e=self.C3;e.SparseGrid=class extends e.DefendedBase{constructor(d,c){super();this._cellWidth=d;this._cellHeight=c;this._cells=e.New(e.PairMap)}Release(){this._cells.Release();this._cells=null}GetCell(d,c,f){let g=this._cells.Get(d,c);return g?g:f?(g=e.New(e.GridCell,this,d,c),this._cells.Set(d,c,g),g):null}XToCell(d){d=Math.floor(d/this._cellWidth);return isFinite(d)?d:0}YToCell(d){d=Math.floor(d/this._cellHeight);return isFinite(d)?d:0}Update(d,c,f){if(c)for(let g=c.getLeft(),h=c.getRight();g<=
h;++g)for(let m=c.getTop(),k=c.getBottom();m<=k;++m){if(f&&f.containsPoint(g,m))continue;const a=this.GetCell(g,m,!1);a&&(a.Remove(d),a.IsEmpty()&&this._cells.Delete(g,m))}if(f)for(let g=f.getLeft(),h=f.getRight();g<=h;++g)for(let m=f.getTop(),k=f.getBottom();m<=k;++m)c&&c.containsPoint(g,m)||this.GetCell(g,m,!0).Insert(d)}QueryRange(d,c){let f=this.XToCell(d.getLeft());const g=this.YToCell(d.getTop()),h=this.XToCell(d.getRight());d=this.YToCell(d.getBottom());if(isFinite(h)&&isFinite(d))for(;f<=
h;++f)for(let m=g;m<=d;++m){const k=this.GetCell(f,m,!1);k&&k.Dump(c)}}}}"use strict";{const e=self.C3;e.GridCell=class extends e.DefendedBase{constructor(d,c,f){super();this._grid=d;this._x=c;this._y=f;this._instances=e.New(e.ArraySet)}Release(){this._instances.Release();this._grid=this._instances=null}IsEmpty(){return this._instances.IsEmpty()}Insert(d){this._instances.Add(d)}Remove(d){this._instances.Delete(d)}Dump(d){e.appendArray(d,this._instances.GetArray())}}}"use strict";
{const e=self.C3;e.Ray=class{constructor(){this.dy=this.dx=this.y2=this.x2=this.y1=this.x1=0;this.rect=new e.Rect;this.hitFraction=2;this.hitUid=null;this.distance=this.hitY=this.hitX=this.hitNormalDy=this.hitNormalDx=this.hitNormal=0;this.normalX=1;this.normalY=0;this.reflectionX=1;this.reflectionY=0}DidCollide(){return 1.000001>this.hitFraction}Set(d,c,f,g){this.x1=d;this.y1=c;this.x2=f;this.y2=g;this.dx=f-d;this.dy=g-c;this.rect.set(d,c,f,g);this.rect.normalize();this.hitFraction=2;this.hitUid=
null;this.distance=this.hitY=this.hitX=this.hitNormalDy=this.hitNormalDx=this.hitNormal=0;this.normalX=1;this.normalY=0;this.reflectionX=1;this.reflectionY=0;return this}Complete(){if(!1!==this.DidCollide()){var d=this.dx*this.hitFraction,c=this.dy*this.hitFraction,f=Math.sqrt(d*d+c*c);d/=f;c/=f;this.distance=f-.000001;this.hitX=this.x1+d*this.distance;this.hitY=this.y1+c*this.distance;this.hitNormal=Math.atan2(this.hitNormalDy,this.hitNormalDx)+Math.PI/2;this.normalX=Math.cos(this.hitNormal);this.normalY=
Math.sin(this.hitNormal);f=d*this.normalX+c*this.normalY;this.reflectionX=d-2*this.normalX*f;this.reflectionY=c-2*this.normalY*f;0<f&&(this.hitNormal=e.clampAngle(this.hitNormal+Math.PI),this.normalX=-this.normalX,this.normalY=-this.normalY)}}TestInstanceSegment(d,c,f,g,h){const m=e.rayIntersect(this.x1,this.y1,this.x2,this.y2,c,f,g,h);0<=m&&m<this.hitFraction&&(this.hitFraction=m,this.hitUid=d.GetUID(),this.hitNormalDx=c-g,this.hitNormalDy=f-h)}TestInstanceRect(d,c,f,g){const h=c+g.getLeft();c+=
g.getRight();const m=f+g.getTop();f+=g.getBottom();this.TestInstanceSegment(d,h,m,c,m);this.TestInstanceSegment(d,c,m,c,f);this.TestInstanceSegment(d,c,f,h,f);this.TestInstanceSegment(d,h,f,h,m)}TestInstanceQuad(d,c){const f=c.getTlx(),g=c.getTly(),h=c.getTrx(),m=c.getTry(),k=c.getBrx(),a=c.getBry(),b=c.getBlx();c=c.getBly();this.TestInstanceSegment(d,f,g,h,m);this.TestInstanceSegment(d,h,m,k,a);this.TestInstanceSegment(d,k,a,b,c);this.TestInstanceSegment(d,b,c,f,g)}TestInstancePoly(d,c,f,g){g=g.pointsArr();
for(let h=0,m=g.length;h<m;h+=2){const k=(h+2)%m;this.TestInstanceSegment(d,g[h]+c,g[h+1]+f,g[k]+c,g[k+1]+f)}}}}"use strict";
{const e=self.C3,d=new Set("off crop scale-inner scale-outer letterbox-scale letterbox-integer-scale".split(" ")),c=new Set(["high","low"]),f=e.New(e.Quad),g=e.New(e.Rect);e.CanvasManager=class extends e.DefendedBase{constructor(h){super();this._runtime=h;this._webglRenderer=this._canvas=null;this._gpuPreference="high-performance";this._canvasCssOffsetY=this._canvasCssOffsetX=this._canvasDeviceHeight=this._canvasDeviceWidth=this._canvasCssHeight=this._canvasCssWidth=this._windowInnerHeight=this._windowInnerWidth=
0;this._enableMipmaps=!0;this._drawHeight=this._drawWidth=0;this._documentFullscreenMode=this._fullscreenMode="letterbox-scale";this._deviceTransformOffY=this._deviceTransformOffX=0;this._fullscreenScalingQuality=this._wantFullscreenScalingQuality="high";this._isDocumentFullscreen=!1;this._availableAdditionalRenderTargets=[];this._usedAdditionalRenderTargets=new Set;this._gpuFrameTimingsBuffer=this._shaderData=null;this._gpuTimeEndFrame=this._gpuTimeStartFrame=0;this._gpuCurUtilisation=NaN;this._gpuLastUtilisation=
0;this._layersGpuProfile=new Map;this._snapshotFormat="";this._snapshotQuality=1;this._snapshotArea=e.New(e.Rect);this._snapshotUrl="";this._snapshotResolve=this._snapshotPromise=null;this._loaderStartTime=0;this._rafId=-1;this._loadingProgress=0;this._loadingprogress_handler=m=>this._loadingProgress=m.progress;this._loadingLogoAsset=this._percentText=null;this._splashTextures={logo:null,powered:null,website:null};this._splashFadeOutStartTime=this._splashFadeInFinishTime=this._splashFrameNumber=0;
this._splashState="fade-in";this._splashDoneResolve=null;this._splashDonePromise=new Promise(m=>this._splashDoneResolve=m)}_SetGPUPowerPreference(h){this._gpuPreference=h}async CreateCanvas(h){this._canvas=h.canvas;this._canvas.addEventListener("webglcontextlost",k=>this._OnWebGLContextLost(k));this._canvas.addEventListener("webglcontextrestored",k=>this._OnWebGLContextRestored(k));const m={powerPreference:this._gpuPreference,enableGpuProfiling:!0};"Android"===e.Platform.OS&&"Chromium"===e.Platform.BrowserEngine&&
75>e.Platform.BrowserVersionNumber&&(console.warn("[Construct 3] Disabling WebGL 2 because this device appears to be affected by crbug.com/934823. Install software updates to avoid this."),m.maxWebGLVersion=1);"standard"===this._runtime.GetCompositingMode()?m.alpha=!0:(m.alpha=!1,m.lowLatency=!0);this._webglRenderer=e.New(e.Gfx.WebGLRenderer,this._canvas,m);await this._webglRenderer.InitState();this._webglRenderer.SupportsGPUProfiling()||(this._gpuLastUtilisation=NaN);this._runtime.AddDOMComponentMessageHandler("runtime",
"window-resize",k=>this._OnWindowResize(k));this._runtime.AddDOMComponentMessageHandler("runtime","fullscreenchange",k=>this._OnFullscreenChange(k));this._runtime.AddDOMComponentMessageHandler("runtime","fullscreenerror",k=>this._OnFullscreenError(k));this._isDocumentFullscreen=!!h.isFullscreen;this.SetSize(h.windowInnerWidth,h.windowInnerHeight,!0);this._shaderData=self.C3_Shaders;await this._LoadShaderPrograms();h=!1;for(const k of this._runtime._GetAllEffectLists()){for(const a of k.GetAllEffectTypes())a._InitRenderer(this._webglRenderer),
a.GetShaderProgram().UsesDest()&&(h=!0);k.UpdateActiveEffects()}this._runtime._SetUsesAnyBackgroundBlending(h);this._webglRenderer.SupportsGPUProfiling()&&(this._gpuFrameTimingsBuffer=e.New(e.Gfx.WebGLQueryResultBuffer,this._webglRenderer));this._webglRenderer.SetMipmapsEnabled(this._enableMipmaps)}async _LoadShaderPrograms(){if(this._shaderData){var h=[];for(const [m,k]of Object.entries(this._shaderData)){const a=e.Gfx.WebGLShaderProgram.GetDefaultVertexShaderSource(this._webglRenderer.Is3D());h.push(this._webglRenderer.CreateShaderProgram(k,
a,m))}await Promise.all(h);this._webglRenderer.ResetLastProgram();this._webglRenderer.SetTextureFillMode()}}Release(){this._canvas=this._webglRenderer=this._runtime=null}_OnWindowResize(h){const m=h.devicePixelRatio;this._runtime.IsInWorker()&&(self.devicePixelRatio=m);this._runtime._SetDevicePixelRatio(m);this.SetSize(h.innerWidth,h.innerHeight);this._runtime.UpdateRender()}_OnFullscreenChange(h){this._isDocumentFullscreen=!!h.isFullscreen;this.SetSize(h.innerWidth,h.innerHeight,!0);this._runtime.UpdateRender()}_OnFullscreenError(h){this._isDocumentFullscreen=
!!h.isFullscreen;this.SetSize(h.innerWidth,h.innerHeight,!0);this._runtime.UpdateRender()}SetSize(h,m,k=!1){h=Math.floor(h);m=Math.floor(m);if(0>=h||0>=m)throw Error("invalid size");if(this._windowInnerWidth!==h||this._windowInnerHeight!==m||k)this._windowInnerWidth=h,this._windowInnerHeight=m,k=this.GetCurrentFullscreenMode(),"letterbox-scale"===k?this._CalculateLetterboxScale(h,m):"letterbox-integer-scale"===k?this._CalculateLetterboxIntegerScale(h,m):"off"===k?this._CalculateFixedSizeCanvas(h,
m):this._CalculateFullsizeCanvas(h,m),this._UpdateFullscreenScalingQuality(k),this._canvas.width=this._canvasDeviceWidth,this._canvas.height=this._canvasDeviceHeight,this._runtime.PostComponentMessageToDOM("canvas","update-size",{marginLeft:this._canvasCssOffsetX,marginTop:this._canvasCssOffsetY,styleWidth:this._canvasCssWidth,styleHeight:this._canvasCssHeight}),this._webglRenderer.SetSize(this._canvasDeviceWidth,this._canvasDeviceHeight,!0)}_CalculateLetterboxScale(h,m){const k=this._runtime.GetDevicePixelRatio(),
a=this._runtime.GetOriginalViewportWidth(),b=this._runtime.GetOriginalViewportHeight(),l=a/b;h/m>l?(this._canvasCssWidth=Math.round(m*l),this._canvasCssHeight=m,this._canvasCssOffsetX=Math.floor((h-this._canvasCssWidth)/2),this._canvasCssOffsetY=0):(this._canvasCssWidth=h,this._canvasCssHeight=Math.round(h/l),this._canvasCssOffsetX=0,this._canvasCssOffsetY=Math.floor((m-this._canvasCssHeight)/2));this._canvasDeviceWidth=Math.round(this._canvasCssWidth*k);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*
k);this._runtime.SetViewportSize(a,b)}_CalculateLetterboxIntegerScale(h,m){const k=this._runtime.GetDevicePixelRatio();1!==k&&(h+=1,m+=1);const a=this._runtime.GetOriginalViewportWidth(),b=this._runtime.GetOriginalViewportHeight();var l=a/b;l=h/m>l?m*l*k/a:h/l*k/b;1<l?l=Math.floor(l):1>l&&(l=1/Math.ceil(1/l));this._canvasDeviceWidth=Math.round(a*l);this._canvasDeviceHeight=Math.round(b*l);this._canvasCssWidth=this._canvasDeviceWidth/k;this._canvasCssHeight=this._canvasDeviceHeight/k;this._canvasCssOffsetX=
Math.max(Math.floor((h-this._canvasCssWidth)/2),0);this._canvasCssOffsetY=Math.max(Math.floor((m-this._canvasCssHeight)/2),0);this._runtime.SetViewportSize(a,b)}_CalculateFullsizeCanvas(h,m){const k=this._runtime.GetDevicePixelRatio();this._canvasCssWidth=h;this._canvasCssHeight=m;this._canvasDeviceWidth=Math.round(this._canvasCssWidth*k);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*k);this._canvasCssOffsetY=this._canvasCssOffsetX=0;h=this.GetDisplayScale();this._runtime.SetViewportSize(this._canvasCssWidth/
h,this._canvasCssHeight/h)}_CalculateFixedSizeCanvas(h,m){const k=this._runtime.GetDevicePixelRatio();this._canvasCssWidth=this._runtime.GetViewportWidth();this._canvasCssHeight=this._runtime.GetViewportHeight();this._canvasDeviceWidth=Math.round(this._canvasCssWidth*k);this._canvasDeviceHeight=Math.round(this._canvasCssHeight*k);this.IsDocumentFullscreen()?(this._canvasCssOffsetX=Math.floor((h-this._canvasCssWidth)/2),this._canvasCssOffsetY=Math.floor((m-this._canvasCssHeight)/2)):this._canvasCssOffsetY=
this._canvasCssOffsetX=0;this._runtime.SetViewportSize(this._runtime.GetViewportWidth(),this._runtime.GetViewportHeight())}_UpdateFullscreenScalingQuality(h){if("high"===this._wantFullscreenScalingQuality)this._drawWidth=this._canvasDeviceWidth,this._drawHeight=this._canvasDeviceHeight,this._fullscreenScalingQuality="high";else{let k;if("off"===this.GetCurrentFullscreenMode()){var m=this._runtime.GetViewportWidth();k=this._runtime.GetViewportHeight()}else m=this._runtime.GetOriginalViewportWidth(),
k=this._runtime.GetOriginalViewportHeight();this._canvasDeviceWidth<m&&this._canvasDeviceHeight<k?(this._drawWidth=this._canvasDeviceWidth,this._drawHeight=this._canvasDeviceHeight,this._fullscreenScalingQuality="high"):(this._drawWidth=m,this._drawHeight=k,this._fullscreenScalingQuality="low","scale-inner"===h?(h=m/k,m=this._windowInnerWidth/this._windowInnerHeight,m<h?this._drawWidth=this._drawHeight*m:m>h&&(this._drawHeight=this._drawWidth/m)):"scale-outer"===h&&(h=m/k,m=this._windowInnerWidth/
this._windowInnerHeight,m>h?this._drawWidth=this._drawHeight*m:m<h&&(this._drawHeight=this._drawWidth/m)))}}IsDocumentFullscreen(){return this._isDocumentFullscreen}SetFullscreenMode(h){if(!d.has(h))throw Error("invalid fullscreen mode");this._fullscreenMode=h}GetFullscreenMode(){return this._fullscreenMode}SetDocumentFullscreenMode(h){if(!d.has(h))throw Error("invalid fullscreen mode");this._documentFullscreenMode=h}GetDocumentFullscreenMode(){return this._documentFullscreenMode}GetCurrentFullscreenMode(){return this.IsDocumentFullscreen()?
this.GetDocumentFullscreenMode():this.GetFullscreenMode()}SetFullscreenScalingQuality(h){if(!c.has(h))throw Error("invalid fullscreen scaling quality");this._wantFullscreenScalingQuality=h}GetSetFullscreenScalingQuality(){return this._wantFullscreenScalingQuality}GetCurrentFullscreenScalingQuality(){return this._fullscreenScalingQuality}static _FullscreenModeNumberToString(h){switch(h){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";
case 5:return"letterbox-integer-scale";default:throw Error("invalid fullscreen mode");}}GetLastWidth(){return this._windowInnerWidth}GetLastHeight(){return this._windowInnerHeight}GetDrawWidth(){return this._drawWidth}GetDrawHeight(){return this._drawHeight}SetMipmapsEnabled(h){this._enableMipmaps=!!h}IsWebGLContextLost(){return this._webglRenderer.IsContextLost()}_OnWebGLContextLost(h){console.log("[Construct 3] WebGL context lost");h.preventDefault();this._availableAdditionalRenderTargets=[];this._usedAdditionalRenderTargets.clear();
this._webglRenderer.OnContextLost();this._runtime._OnWebGLContextLost()}async _OnWebGLContextRestored(h){await this._webglRenderer.OnContextRestored();await this._LoadShaderPrograms();for(const m of this._runtime._GetAllEffectLists())for(const k of m.GetAllEffectTypes())k._InitRenderer(this._webglRenderer);await this._runtime._OnWebGLContextRestored();console.log("[Construct 3] WebGL context restored")}GetWebGLRenderer(){return this._webglRenderer}GetRenderScale(){return"low"===this._fullscreenScalingQuality?
1/this._runtime.GetDevicePixelRatio():this.GetDisplayScale()}GetDisplayScale(){const h=this.GetCurrentFullscreenMode();if("off"===h||"crop"===h)return 1;const m=this._runtime.GetOriginalViewportWidth(),k=this._runtime.GetOriginalViewportHeight(),a=m/k,b=this._canvasDeviceWidth/this._canvasDeviceHeight;return"scale-inner"!==h&&b>a||"scale-inner"===h&&b<a?this._canvasCssHeight/k:this._canvasCssWidth/m}SetDeviceTransformOffset(h,m){this._deviceTransformOffX=h;this._deviceTransformOffY=m}SetDeviceTransform(h,
m,k){m=(m||this._drawWidth)/2+this._deviceTransformOffX;k=(k||this._drawHeight)/2+this._deviceTransformOffY;h.SetCameraXYZ(m,k,100*this._runtime.GetDevicePixelRatio());h.SetLookXYZ(m,k,0);h.ResetModelView();h.UpdateModelView()}SetCssTransform(h){const m=this._canvasCssWidth/2,k=this._canvasCssHeight/2;h.SetCameraXYZ(m,k,100);h.SetLookXYZ(m,k,0);h.ResetModelView();h.UpdateModelView()}GetDeviceWidth(){return this._canvasDeviceWidth}GetDeviceHeight(){return this._canvasDeviceHeight}GetCssWidth(){return this._canvasCssWidth}GetCssHeight(){return this._canvasCssHeight}GetCanvasClientX(){return this._canvasCssOffsetX}GetCanvasClientY(){return this._canvasCssOffsetY}GetAdditionalRenderTarget(h){const m=
this._availableAdditionalRenderTargets,k=m.findIndex(b=>b.IsCompatibleWithOptions(h));let a;-1!==k?(a=m[k],m.splice(k,1)):a=this._webglRenderer.CreateRenderTarget(h);this._usedAdditionalRenderTargets.add(a);return a}ReleaseAdditionalRenderTarget(h){if(!this._usedAdditionalRenderTargets.has(h))throw Error("render target not in use");this._usedAdditionalRenderTargets.delete(h);this._availableAdditionalRenderTargets.push(h)}*activeLayersGpuProfiles(){for(const h of this._runtime.GetLayoutManager().runningLayouts())for(const m of h.GetLayers()){const k=
this._layersGpuProfile.get(m);k&&(yield k)}}GetLayerTimingsBuffer(h){if(!this._webglRenderer.SupportsGPUProfiling())return null;let m=this._layersGpuProfile.get(h);m||(m={name:h.GetName(),timingsBuffer:e.New(e.Gfx.WebGLQueryResultBuffer,this._webglRenderer),curUtilisation:0,lastUtilisation:0},this._layersGpuProfile.set(h,m));return m.timingsBuffer}_Update1sFrameRange(){if(this._webglRenderer.SupportsGPUProfiling()&&0===this._gpuTimeEndFrame){this._gpuTimeEndFrame=this._webglRenderer.GetFrameNumber();
this._gpuCurUtilisation=NaN;for(const h of this.activeLayersGpuProfiles())h.curUtilisation=NaN}}_UpdateTick(){if(this._webglRenderer.SupportsGPUProfiling()&&isNaN(this._gpuCurUtilisation)&&(this._gpuCurUtilisation=this._gpuFrameTimingsBuffer.GetFrameRangeResultSum(this._gpuTimeStartFrame,this._gpuTimeEndFrame),!isNaN(this._gpuCurUtilisation))){if(this._runtime.IsDebug())for(const h of this.activeLayersGpuProfiles())if(h.curUtilisation=h.timingsBuffer.GetFrameRangeResultSum(this._gpuTimeStartFrame,
this._gpuTimeEndFrame),isNaN(h.curUtilisation))return;this._gpuFrameTimingsBuffer.DeleteAllBeforeFrameNumber(this._gpuTimeEndFrame);this._gpuLastUtilisation=Math.min(this._gpuCurUtilisation,1);if(this._runtime.IsDebug()){for(const h of this.activeLayersGpuProfiles())h.timingsBuffer.DeleteAllBeforeFrameNumber(this._gpuTimeEndFrame),h.lastUtilisation=Math.min(h.curUtilisation,1);self.C3Debugger.UpdateGPUProfile(this._gpuLastUtilisation,[...this.activeLayersGpuProfiles()])}this._gpuTimeStartFrame=this._gpuTimeEndFrame;
this._gpuTimeEndFrame=0}}GetGPUFrameTimingsBuffer(){return this._gpuFrameTimingsBuffer}GetGPUUtilisation(){return this._gpuLastUtilisation}SnapshotCanvas(h,m,k,a,b,l){this._snapshotFormat=h;this._snapshotQuality=m;this._snapshotArea.setWH(k,a,b,l);return this._snapshotPromise?this._snapshotPromise:this._snapshotPromise=new Promise(p=>{this._snapshotResolve=p})}_MaybeTakeSnapshot(){if(this._snapshotFormat){var h=this._canvas,m=this._snapshotArea,k=e.clamp(Math.floor(m.getLeft()),0,h.width),a=e.clamp(Math.floor(m.getTop()),
0,h.height),b=m.width();b=0===b?h.width-k:e.clamp(Math.floor(b),0,h.width-k);m=m.height();m=0===m?h.height-a:e.clamp(Math.floor(m),0,h.height-a);(0!==k||0!==a||b!==h.width||m!==h.height)&&0<b&&0<m&&(h=e.CreateCanvas(b,m),h.getContext("2d").drawImage(this._canvas,k,a,b,m,0,0,b,m));e.CanvasToBlob(h,this._snapshotFormat,this._snapshotQuality).then(l=>{this._snapshotUrl=URL.createObjectURL(l);this._snapshotPromise=null;this._snapshotResolve(this._snapshotUrl)});this._snapshotFormat="";this._snapshotQuality=
1}}GetCanvasSnapshotUrl(){return this._snapshotUrl}InitLoadingScreen(h){if(2===h)this._percentText=e.New(e.Gfx.RendererText,this._webglRenderer),this._percentText.SetIsAsync(!1),this._percentText.SetFontName("Arial"),this._percentText.SetFontSize(16),this._percentText.SetHorizontalAlignment("center"),this._percentText.SetVerticalAlignment("center"),this._percentText.SetSize(300,200);else if(0===h){const m=this._runtime.GetLoadingLogoFilename();h=this._runtime.GetAssetManager();let k;if(this._runtime.IsPreview()){if(!h._HasLocalUrlBlob(m))return;
k=h.GetLocalUrlAsBlobUrl(m)}else k=h.GetIconsSubfolder()+m;this._loadingLogoAsset=h.LoadImage({url:k});this._loadingLogoAsset.LoadStaticTexture(this._webglRenderer).catch(a=>console.warn(`[C3 runtime] Failed to load '${m}' for loading screen. Check the project has an icon with that name.`,a))}else 4===h&&(this._LoadSvgSplashImage("splash-images/splash-logo.svg").then(m=>{"done"===this._splashState?this._webglRenderer.DeleteTexture(m):this._splashTextures.logo=m}).catch(m=>console.warn("Failed to load splash image: ",
m)),this._LoadBitmapSplashImage("splash-images/splash-poweredby-512.png").then(m=>{"done"===this._splashState?this._webglRenderer.DeleteTexture(m):this._splashTextures.powered=m}).catch(m=>console.warn("Failed to load splash image: ",m)),this._LoadBitmapSplashImage("splash-images/splash-website-512.png").then(m=>{"done"===this._splashState?this._webglRenderer.DeleteTexture(m):this._splashTextures.website=m}).catch(m=>console.warn("Failed to load splash image: ",m)))}async _LoadSvgSplashImage(h){h=
(new URL(h,this._runtime.GetBaseURL())).toString();h=await e.FetchBlob(h);h=await this._runtime.RasterSvgImage(h,2048,2048);return await this._webglRenderer.CreateStaticTextureAsync(h,{mipMapQuality:"high"})}async _LoadBitmapSplashImage(h){h=(new URL(h,this._runtime.GetBaseURL())).toString();h=await e.FetchBlob(h);return await this._webglRenderer.CreateStaticTextureAsync(h,{mipMapQuality:"high"})}HideCordovaSplashScreen(){this._runtime.PostComponentMessageToDOM("runtime","hide-cordova-splash")}StartLoadingScreen(){this._loaderStartTime=
Date.now();this._runtime.Dispatcher().addEventListener("loadingprogress",this._loadingprogress_handler);this._rafId=requestAnimationFrame(()=>this._DrawLoadingScreen());3!==this._runtime.GetLoaderStyle()&&this.HideCordovaSplashScreen()}async EndLoadingScreen(){this._loadingProgress=1;const h=this._runtime.GetLoaderStyle();4===h&&await this._splashDonePromise;this._splashDonePromise=this._splashDoneResolve=null;-1!==this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=-1);this._runtime.Dispatcher().removeEventListener("loadingprogress",
this._loadingprogress_handler);this._loadingprogress_handler=null;this._percentText&&(this._percentText.Release(),this._percentText=null);this._loadingLogoAsset&&(this._loadingLogoAsset.Release(),this._loadingLogoAsset=null);this._webglRenderer.Start();this._splashTextures.logo&&(this._webglRenderer.DeleteTexture(this._splashTextures.logo),this._splashTextures.logo=null);this._splashTextures.powered&&(this._webglRenderer.DeleteTexture(this._splashTextures.powered),this._splashTextures.powered=null);
this._splashTextures.website&&(this._webglRenderer.DeleteTexture(this._splashTextures.website),this._splashTextures.website=null);this._webglRenderer.ClearRgba(0,0,0,0);this._webglRenderer.Finish();this._splashState="done";this._gpuTimeStartFrame=this._webglRenderer.GetFrameNumber();3===h&&this.HideCordovaSplashScreen()}_DrawLoadingScreen(){if(-1!==this._rafId){var h=this._webglRenderer;h.Start();this._rafId=-1;var m=this._runtime.GetAssetManager().HasHadErrorLoading(),k=this._runtime.GetLoaderStyle();
3!==k&&(this.SetCssTransform(h),h.ClearRgba(0,0,0,0),h.ResetColor(),h.SetTextureFillMode(),h.SetTexture(null));if(0===k)this._DrawProgressBarAndLogoLoadingScreen(m);else if(1===k)this._DrawProgressBarLoadingScreen(m,120,0);else if(2===k)this._DrawPercentTextLoadingScreen(m);else if(3===k)e.noop();else if(4===k)this._DrawSplashLoadingScreen(m);else throw Error("invalid loader style");h.Finish();this._rafId=requestAnimationFrame(()=>this._DrawLoadingScreen())}}_DrawPercentTextLoadingScreen(h){h?this._percentText.SetColorRgb(1,
0,0):this._percentText.SetColorRgb(.6,.6,.6);this._percentText.SetText(Math.round(100*this._loadingProgress)+"%");h=this._canvasCssWidth/2;const m=this._canvasCssHeight/2;f.setRect(h-150,m-100,h+150,m+100);this._webglRenderer.SetTexture(this._percentText.GetTexture());this._webglRenderer.Quad3(f,this._percentText.GetTexRect())}_DrawProgressBarLoadingScreen(h,m,k){const a=this._webglRenderer;a.SetColorFillMode();h?a.SetColorRgba(1,0,0,1):a.SetColorRgba(.118,.565,1,1);h=this._canvasCssWidth/2;const b=
this._canvasCssHeight/2,l=m/2;g.setWH(h-l,b-4+k,Math.floor(m*this._loadingProgress),8);a.Rect(g);g.setWH(h-l,b-4+k,m,8);g.offset(-.5,-.5);g.inflate(.5,.5);a.SetColorRgba(0,0,0,1);a.LineRect2(g);g.inflate(1,1);a.SetColorRgba(1,1,1,1);a.LineRect2(g)}_DrawProgressBarAndLogoLoadingScreen(h){if(this._loadingLogoAsset){var m=this._loadingLogoAsset.GetTexture();if(m){var k=m.GetWidth(),a=m.GetHeight(),b=this._canvasCssWidth/2,l=this._canvasCssHeight/2,p=k/2;a/=2;f.setRect(b-p,l-a,b+p,l+a);this._webglRenderer.SetTexture(m);
this._webglRenderer.Quad(f);this._DrawProgressBarLoadingScreen(h,k,a+16)}else this._DrawProgressBarLoadingScreen(h,120,0)}else this._DrawProgressBarLoadingScreen(h,120,0)}_DrawSplashLoadingScreen(h){const m=this._webglRenderer,k=this._splashTextures.logo,a=this._splashTextures.powered,b=this._splashTextures.website,l=Date.now();0===this._splashFrameNumber&&(this._loaderStartTime=l);const p=this._runtime.IsPreview()||this._runtime.IsFBInstantAvailable()&&!this._runtime.IsCordova(),r=p?0:200,t=p?0:
3E3;let u=1;"fade-in"===this._splashState?u=Math.min((l-this._loaderStartTime)/300,1):"fade-out"===this._splashState&&(u=Math.max(1-(l-this._splashFadeOutStartTime)/300,0));m.SetColorFillMode();m.SetColorRgba(.231*u,.251*u,.271*u,u);g.set(0,0,this._canvasCssWidth,this._canvasCssHeight);m.Rect(g);const w=Math.ceil(this._canvasCssWidth),x=Math.ceil(this._canvasCssHeight);let A;256<this._canvasCssHeight?(m.SetColorRgba(.302*u,.334*u,.365*u,u),A=Math.max(.005*x,2),g.setWH(0,.8*x-A/2,w,A),m.Rect(g),h?
m.SetColorRgba(u,0,0,u):m.SetColorRgba(.161*u,.953*u,.816*u,u),h=w*this._loadingProgress,g.setWH(.5*w-h/2,.8*x-A/2,h,A),m.Rect(g),m.SetColorRgba(u,u,u,u),m.SetTextureFillMode(),a&&(h=1.5*e.clamp(.22*x,105,.6*w),A=h/8,g.setWH(.5*w-h/2,.2*x-A/2,h,A),m.SetTexture(a),m.Rect(g)),k&&(A=h=Math.min(.395*x,.95*w),g.setWH(.5*w-h/2,.485*x-A/2,h,A),m.SetTexture(k),m.Rect(g)),b&&(h=1.5*e.clamp(.22*x,105,.6*w),A=h/8,g.setWH(.5*w-h/2,.868*x-A/2,h,A),m.SetTexture(b),m.Rect(g))):(m.SetColorRgba(.302*u,.334*u,.365*
u,u),A=Math.max(.005*x,2),g.setWH(0,.85*x-A/2,w,A),m.Rect(g),h?m.SetColorRgba(u,0,0,u):m.SetColorRgba(.161*u,.953*u,.816*u,u),h=w*this._loadingProgress,g.setWH(.5*w-h/2,.85*x-A/2,h,A),m.Rect(g),m.SetColorRgba(u,u,u,u),m.SetTextureFillMode(),k&&(A=h=.55*x,g.setWH(.5*w-h/2,.45*x-A/2,h,A),m.SetTexture(k),m.Rect(g)));this._splashFrameNumber++;"fade-in"===this._splashState&&300<=l-this._loaderStartTime&&2<=this._splashFrameNumber&&(this._splashState="wait",this._splashFadeInFinishTime=l);"wait"===this._splashState&&
l-this._splashFadeInFinishTime>=t&&1<=this._loadingProgress&&(this._splashState="fade-out",this._splashFadeOutStartTime=l);("fade-out"===this._splashState&&l-this._splashFadeOutStartTime>=300+r||p&&1<=this._loadingProgress&&500>l-this._loaderStartTime)&&this._splashDoneResolve()}}}"use strict";
{const e=self.C3,d=self.C3Debugger,c={messagePort:null,baseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,projectData:"",exportType:""};let f=!0;e.Runtime=class extends e.DefendedBase{constructor(g){g=Object.assign({},c,g);super();this._messagePort=g.messagePort;this._baseUrl=g.baseUrl;this._isHeadless=!!g.headless;this._hasDom=!!g.hasDom;this._isInWorker=!!g.isInWorker;f=g.ife;this._useAudio=!!g.useAudio;this._exportType=g.exportType;this._isiOSCordova=!!g.isiOSCordova;this._isiOSWebView=
!!g.isiOSWebView;this._isFBInstantAvailable=!!g.isFBInstantAvailable;this._opusWasmScriptUrl=g.opusWasmScriptUrl;this._opusWasmBinaryUrl=g.opusWasmBinaryUrl;this._dataJsonFilename="data.json";this._isDebugging=this._breakpointsEnabled=this._isDebug=!("preview"!==this._exportType||!g.isDebug);this._debuggingDisabled=0;const h=g.previewImageBlobs;var m=g.previewProjectFileBlobs;m&&Object.assign(h,m);(m=g.projectData)&&(h[this._dataJsonFilename]=m);this._additionalLoadPromises=[];this._additionalCreatePromises=
[];this._isUsingCreatePromises=!1;this._appId=this._projectUniqueId=this._projectVersion=this._projectName="";this._originalViewportHeight=this._originalViewportWidth=0;this._devicePixelRatio=self.devicePixelRatio;this._loaderStyle=this._viewportHeight=this._viewportWidth=this._parallaxYorigin=this._parallaxXorigin=0;this._usesLoaderLayout=!1;this._isLoading=!0;this._usesAnyBackgroundBlending=!1;this._loadingLogoFilename="loading-logo.png";this._assetManager=e.New(e.AssetManager,this,{defaultLoadPolicy:"html5"===
this._exportType||"scirra-arcade"===this._exportType||"instant-games"===this._exportType?"remote":"local",localUrlBlobs:h,isCordova:"cordova"===this._exportType,isiOSCordova:this._isiOSCordova,supportedAudioFormats:g.supportedAudioFormats});this._layoutManager=e.New(e.LayoutManager,this);this._eventSheetManager=e.New(e.EventSheetManager,this);this._pluginManager=e.New(e.PluginManager,this);this._collisionEngine=e.New(e.CollisionEngine,this);this._timelineManager=e.New(e.TimelineManager,this);this._transitionManager=
e.New(e.TransitionManager,this);this._allObjectClasses=[];this._objectClassesByName=new Map;this._objectClassesBySid=new Map;this._familyCount=0;this._allContainers=[];this._allEffectLists=[];this._currentLayoutStack=[];this._instancesPendingCreate=[];this._instancesPendingDestroy=new Map;this._isFlushingPendingInstances=this._hasPendingInstances=!1;this._nextUid=this._objectCount=0;this._instancesByUid=new Map;this._instancesToReleaseAtEndOfTick=new Set;this._instancesToReleaseAffectedObjectClasses=
new Set;this._objectReferenceTable=[];this._jsPropNameTable=[];this._canvasManager=null;this._framerateMode="vsync";this._compositingMode="standard";this._sampling="trilinear";this._isPixelRoundingEnabled=!1;this._needRender=!0;this._isPausedOnBlur=this._pauseOnBlur=!1;this._tickCallbacks={normal:k=>{this._ruafId=this._rafId=-1;this.Tick(k)},tickOnly:k=>{this._ruafId=-1;this.Tick(k,!1,"skip-render")},renderOnly:()=>{this._rafId=-1;this.Render()}};this._ruafId=this._rafId=-1;this._execCount=this._tickCountNoSave=
this._tickCount=0;this._hasStartedTicking=this._isInTick=this._hasStarted=!1;this._isLayoutFirstTick=!0;this._suspendCount=0;this._scheduleTriggersThrottle=new e.PromiseThrottle(1);this._randomNumberCallback=()=>Math.random();this._dt=this._dt1=this._lastTickTime=this._startTime=0;this._timeScale=1;this._minimumFramerate=30;this._gameTime=e.New(e.KahanSum);this._wallTime=e.New(e.KahanSum);this._fpsFrameCount=-1;this._mainThreadTime=this._mainThreadTimeCounter=this._fps=this._fpsLastTime=0;this._isLoadingState=
!1;this._loadFromSlotName=this._saveToSlotName="";this._loadFromJson=null;this._lastSaveJson="";this._triggerOnCreateAfterLoad=[];this._savegamesStorage=this._projectStorage=null;this._dispatcher=e.New(e.Event.Dispatcher);this._domEventHandlers=new Map;this._pendingResponsePromises=new Map;this._nextDomResponseId=0;this._isReadyToHandleEvents=this._didRequestDeviceMotionEvent=this._didRequestDeviceOrientationEvent=!1;this._waitingToHandleEvents=[];this._eventObjects={pretick:e.New(e.Event,"pretick",
!1),tick:e.New(e.Event,"tick",!1),tick2:e.New(e.Event,"tick2",!1),instancedestroy:e.New(e.Event,"instancedestroy",!1),beforelayoutchange:e.New(e.Event,"beforelayoutchange",!1),layoutchange:e.New(e.Event,"layoutchange",!1)};this._eventObjects.instancedestroy.instance=null;this._userScriptDispatcher=e.New(e.Event.Dispatcher);this._userScriptEventObjects=null;this._behInstsToTick=e.New(e.RedBlackSet,e.BehaviorInstance.SortByTickSequence);this._behInstsToPostTick=e.New(e.RedBlackSet,e.BehaviorInstance.SortByTickSequence);
this._behInstsToTick2=e.New(e.RedBlackSet,e.BehaviorInstance.SortByTickSequence);this._jobScheduler=e.New(e.JobSchedulerRuntime,this,g.jobScheduler);g.canvas&&(this._canvasManager=e.New(e.CanvasManager,this));this._messagePort.onmessage=k=>this._OnMessageFromDOM(k.data);this.AddDOMComponentMessageHandler("runtime","visibilitychange",k=>this._OnVisibilityChange(k));this.AddDOMComponentMessageHandler("runtime","opus-decode",k=>this._WasmDecodeWebMOpus(k.arrayBuffer));this.AddDOMComponentMessageHandler("runtime",
"get-remote-preview-status-info",()=>this._GetRemotePreviewStatusInfo());this.AddDOMComponentMessageHandler("runtime","js-invoke-function",k=>this._InvokeFunctionFromJS(k));this.AddDOMComponentMessageHandler("runtime","go-to-last-error-script",self.goToLastErrorScript);this._dispatcher.addEventListener("window-blur",k=>this._OnWindowBlur(k));this._dispatcher.addEventListener("window-focus",()=>this._OnWindowFocus());this._timelineManager.AddRuntimeListeners();this._iRuntime=null;this._interfaceMap=
new WeakMap;this._commonScriptInterfaces={keyboard:null,mouse:null,touch:null}}static Create(g){return e.New(e.Runtime,g)}Release(){e.clearArray(this._allObjectClasses);this._objectClassesByName.clear();this._objectClassesBySid.clear();this._layoutManager.Release();this._layoutManager=null;this._eventSheetManager.Release();this._eventSheetManager=null;this._pluginManager.Release();this._pluginManager=null;this._assetManager.Release();this._assetManager=null;this._collisionEngine.Release();this._collisionEngine=
null;this._timelineManager.Release();this._timelineManager=null;this._transitionManager.Release();this._transitionManager=null;this._canvasManager&&(this._canvasManager.Release(),this._canvasManager=null);this._dispatcher.Release();this._tickEvent=this._dispatcher=null}["_OnMessageFromDOM"](g){const h=g.type;if("event"===h)this._OnEventFromDOM(g);else if("result"===h)this._OnResultFromDOM(g);else throw Error(`unknown message '${h}'`);}_OnEventFromDOM(g){if(this._isReadyToHandleEvents){var h=g.component,
m=g.handler,k=g.data,a=g.dispatchOpts,b=!(!a||!a.dispatchRuntimeEvent);a=!(!a||!a.dispatchUserScriptEvent);var l=g.responseId;if("runtime"===h&&(b&&(g=new e.Event(m),g.data=k,this._dispatcher.dispatchEventAndWaitAsyncSequential(g)),a)){g=new e.Event(m,!0);for(const [p,r]of Object.entries(k))g[p]=r;this.DispatchUserScriptEvent(g)}if(g=this._domEventHandlers.get(h))if(g=g.get(m)){b=null;try{b=g(k)}catch(p){console.error(`Exception in '${h}' handler '${m}':`,p);null!==l&&this._PostResultToDOM(l,!1,""+
p);return}null!==l&&(b&&b.then?b.then(p=>this._PostResultToDOM(l,!0,p)).catch(p=>{console.error(`Rejection from '${h}' handler '${m}':`,p);this._PostResultToDOM(l,!1,""+p)}):this._PostResultToDOM(l,!0,b))}else b||a||console.warn(`[Runtime] No DOM handler '${m}' for component '${h}'`);else b||a||console.warn(`[Runtime] No DOM event handlers for component '${h}'`)}else this._waitingToHandleEvents.push(g)}_PostResultToDOM(g,h,m){this._messagePort.postMessage({type:"result",responseId:g,isOk:h,result:m})}_OnResultFromDOM(g){const h=
g.responseId,m=g.isOk;g=g.result;const k=this._pendingResponsePromises.get(h);m?k.resolve(g):k.reject(g);this._pendingResponsePromises.delete(h)}AddDOMComponentMessageHandler(g,h,m){let k=this._domEventHandlers.get(g);k||(k=new Map,this._domEventHandlers.set(g,k));if(k.has(h))throw Error(`[Runtime] Component '${g}' already has handler '${h}'`);k.set(h,m)}PostComponentMessageToDOM(g,h,m){this._messagePort.postMessage({type:"event",component:g,handler:h,data:m,responseId:null})}PostComponentMessageToDOMAsync(g,
h,m){const k=this._nextDomResponseId++,a=new Promise((b,l)=>{this._pendingResponsePromises.set(k,{resolve:b,reject:l})});this._messagePort.postMessage({type:"event",component:g,handler:h,data:m,responseId:k});return a}PostToDebugger(g){if(!this.IsDebug())throw Error("not in debug mode");this.PostComponentMessageToDOM("runtime","post-to-debugger",g)}async Init(g){this.IsDebug()?await d.Init(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);var [h]=await Promise.all([this._assetManager.FetchJson(this._dataJsonFilename),
this._MaybeLoadOpusDecoder(),this._jobScheduler.Init()]);this._LoadDataJson(h);await this._InitialiseCanvas(g);this.IsPreview()||console.info("Made with Construct 3, the game and app creator :: https://www.construct.net");(h=this.GetWebGLRenderer())?(console.info(`[C3 runtime] Hosted in ${this.IsInWorker()?"worker":"DOM"}, rendering with WebGL ${h.GetWebGLVersionNumber()} [${h.GetUnmaskedRenderer()}] (${h.IsDesynchronized()?"desynchronized":"standard"} compositing)`),h.HasMajorPerformanceCaveat()&&
console.warn("[C3 runtime] WebGL indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance.")):console.info(`[C3 runtime] Hosted in ${this.IsInWorker()?"worker":"DOM"}, headless`);this._isReadyToHandleEvents=!0;for(const m of this._waitingToHandleEvents)this._OnEventFromDOM(m);e.clearArray(this._waitingToHandleEvents);this._canvasManager&&this._canvasManager.StartLoadingScreen();for(const m of g.runOnStartupFunctions)this._additionalLoadPromises.push(this._RunOnStartupFunction(m));
await Promise.all([this._assetManager.WaitForAllToLoad(),...this._additionalLoadPromises]);e.clearArray(this._additionalLoadPromises);if(this._assetManager.HasHadErrorLoading())this._canvasManager&&this._canvasManager.HideCordovaSplashScreen();else return this._canvasManager&&await this._canvasManager.EndLoadingScreen(),await this._dispatcher.dispatchEventAndWaitAsync(new e.Event("beforeruntimestart")),await this.Start(),this._messagePort.postMessage({type:"runtime-ready"}),this}async _RunOnStartupFunction(g){try{await g(this._iRuntime)}catch(h){console.error("[C3 runtime] Error in runOnStartup function: ",
h)}}_LoadDataJson(g){g=g.project;this._projectName=g[0];this._projectVersion=g[16];this._projectUniqueId=g[31];this._appId=g[38];this._loadingLogoFilename=g[39];this._isPixelRoundingEnabled=!!g[9];this._originalViewportWidth=this._viewportWidth=g[10];this._originalViewportHeight=this._viewportHeight=g[11];this._parallaxXorigin=this._originalViewportWidth/2;this._parallaxYorigin=this._originalViewportHeight/2;this._compositingMode=g[36];this._framerateMode=g[37];"low-latency"===this._compositingMode&&
this.IsAndroidWebView()&&77>=e.Platform.BrowserVersionNumber&&(console.warn("[C3 runtime] Desynchronized (low-latency) compositing is enabled, but is disabled in the Android WebView <=77 due to crbug.com/1008842. Reverting to synchronized (standard) compositing."),this._compositingMode="standard");this._sampling=g[14];this._usesLoaderLayout=!!g[18];this._loaderStyle=g[19];this._nextUid=g[21];this._pauseOnBlur=g[22];this._assetManager._SetAudioFiles(g[7],g[25]);this._assetManager._SetMediaSubfolder(g[8]);
this._assetManager._SetFontsSubfolder(g[32]);this._assetManager._SetIconsSubfolder(g[28]);this._assetManager._SetWebFonts(g[29]);this._canvasManager&&(this._canvasManager.SetFullscreenMode(e.CanvasManager._FullscreenModeNumberToString(g[12])),this._canvasManager.SetFullscreenScalingQuality(g[23]?"high":"low"),this._canvasManager.SetMipmapsEnabled(0!==g[24]),this._canvasManager._SetGPUPowerPreference(g[34]));this._pluginManager.CreateSystemPlugin();this._objectReferenceTable=self.C3_GetObjectRefTable();
for(var h of g[2])this._pluginManager.CreatePlugin(h);this._objectReferenceTable=self.C3_GetObjectRefTable();this._LoadJsPropNameTable();for(var m of g[3])h=e.ObjectClass.Create(this,this._allObjectClasses.length,m),this._allObjectClasses.push(h),this._objectClassesByName.set(h.GetName().toLowerCase(),h),this._objectClassesBySid.set(h.GetSID(),h);for(const b of g[4])this._allObjectClasses[b[0]]._LoadFamily(b);for(var k of g[27])m=k.map(b=>this._allObjectClasses[b]),this._allContainers.push(e.New(e.Container,
this,m));for(const b of this._allObjectClasses)b._OnAfterCreate();for(const b of g[5])this._layoutManager.Create(b);(k=g[1])&&(k=this._layoutManager.GetLayoutByName(k))&&this._layoutManager.SetFirstLayout(k);for(var a of g[33])this._timelineManager.Create(a);for(const b of g[35])this._transitionManager.Create(b);this._InitScriptInterfaces();for(const b of g[6])this._eventSheetManager.Create(b);this._eventSheetManager._PostInit();this._InitGlobalVariableScriptInterface();e.clearArray(this._objectReferenceTable);
this.FlushPendingInstances();a="any";g=g[20];1===g?a="portrait":2===g&&(a="landscape");this.PostComponentMessageToDOM("runtime","set-target-orientation",{targetOrientation:a})}GetLoaderStyle(){return this._loaderStyle}IsFBInstantAvailable(){return this._isFBInstantAvailable}IsLoading(){return this._isLoading}AddLoadPromise(g){this._additionalLoadPromises.push(g)}SetUsingCreatePromises(g){this._isUsingCreatePromises=!!g}AddCreatePromise(g){this._isUsingCreatePromises&&this._additionalCreatePromises.push(g)}GetCreatePromises(){return this._additionalCreatePromises}_GetNextFamilyIndex(){return this._familyCount++}GetFamilyCount(){return this._familyCount}_AddEffectList(g){this._allEffectLists.push(g)}_GetAllEffectLists(){return this._allEffectLists}async _InitialiseCanvas(g){this._canvasManager&&
(await this._canvasManager.CreateCanvas(g),this._canvasManager.InitLoadingScreen(this._loaderStyle))}async _MaybeLoadOpusDecoder(){if(!this._assetManager.IsAudioFormatSupported("audio/webm; codecs=opus")){var g=null,h=null;try{this.IsiOSCordova()&&"file:"===location.protocol?h=await this._assetManager.CordovaFetchLocalFileAsArrayBuffer(this._opusWasmBinaryUrl):g=await this._assetManager.FetchBlob(this._opusWasmBinaryUrl)}catch(m){console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",
m);return}h?this.AddJobWorkerBuffer(h,"opus-decoder-wasm"):this.AddJobWorkerBlob(g,"opus-decoder-wasm");await this.AddJobWorkerScripts([this._opusWasmScriptUrl])}}async _WasmDecodeWebMOpus(g){return await this.AddJob("OpusDecode",{arrayBuffer:g},[g])}async Start(){this._hasStarted=!0;this._startTime=Date.now();if(this._usesLoaderLayout){for(var g of this._allObjectClasses)g.IsFamily()||g.IsOnLoaderLayout()||!g.IsWorldType()||g.OnCreate();this._assetManager.WaitForAllToLoad().then(()=>{this._isLoading=
!1;this._OnLoadFinished()})}else this._isLoading=!1;this._assetManager.SetInitialLoadFinished();this.IsDebug()&&d.RuntimeInit(f);for(const h of this._layoutManager.GetAllLayouts())h._CreateGlobalNonWorlds();g=this._layoutManager.GetFirstLayout();await g._Load(null,this.GetWebGLRenderer());await g._StartRunning(!0);this._fpsLastTime=performance.now();this._usesLoaderLayout||this._OnLoadFinished();(await this.PostComponentMessageToDOMAsync("runtime","before-start-ticking")).isSuspended?this._suspendCount++:
this.Tick()}_OnLoadFinished(){this.Trigger(e.Plugins.System.Cnds.OnLoadFinished,null,null);this.PostComponentMessageToDOM("runtime","register-sw")}GetObjectReference(g){g=Math.floor(g);const h=this._objectReferenceTable;if(0>g||g>=h.length)throw Error("invalid object reference");return h[g]}_LoadJsPropNameTable(){for(const g of self.C3_JsPropNameTable){const h=e.first(Object.keys(g));this._jsPropNameTable.push(h)}}GetJsPropName(g){g=Math.floor(g);const h=this._jsPropNameTable;if(0>g||g>=h.length)throw Error("invalid prop reference");
return h[g]}HasDOM(){return this._hasDom}IsHeadless(){return this._isHeadless}IsInWorker(){return this._isInWorker}GetBaseURL(){return this._baseUrl}GetEventSheetManager(){return this._eventSheetManager}GetEventStack(){return this._eventSheetManager.GetEventStack()}GetCurrentEventStackFrame(){return this._eventSheetManager.GetCurrentEventStackFrame()}GetCurrentEvent(){return this._eventSheetManager.GetCurrentEvent()}GetCurrentCondition(){return this._eventSheetManager.GetCurrentCondition()}IsCurrentConditionFirst(){return 0===
this.GetCurrentEventStackFrame().GetConditionIndex()}GetCurrentAction(){return this._eventSheetManager.GetCurrentAction()}GetPluginManager(){return this._pluginManager}GetSystemPlugin(){return this._pluginManager.GetSystemPlugin()}GetObjectClassByIndex(g){g=Math.floor(g);if(0>g||g>=this._allObjectClasses.length)throw new RangeError("invalid index");return this._allObjectClasses[g]}GetObjectClassByName(g){return this._objectClassesByName.get(g.toLowerCase())||null}GetObjectClassBySID(g){return this._objectClassesBySid.get(g)||
null}GetSingleGlobalObjectClassByCtor(g){return(g=this._pluginManager.GetPluginByConstructorFunction(g))?g.GetSingleGlobalObjectClass():null}GetAllObjectClasses(){return this._allObjectClasses}Dispatcher(){return this._dispatcher}UserScriptDispatcher(){return this._userScriptDispatcher}DispatchUserScriptEvent(g){g.runtime=this.GetIRuntime();const h=this.IsDebug()&&!this._eventSheetManager.IsInEventEngine();h&&d.StartMeasuringScriptTime();this._userScriptDispatcher.dispatchEvent(g);h&&d.AddScriptTime()}DispatchUserScriptEventAsyncWait(g){g.runtime=
this.GetIRuntime();return this._userScriptDispatcher.dispatchEventAndWaitAsync(g)}GetOriginalViewportWidth(){return this._originalViewportWidth}GetOriginalViewportHeight(){return this._originalViewportHeight}SetOriginalViewportSize(g,h){this._originalViewportWidth=g;this._originalViewportHeight=h}GetViewportWidth(){return this._viewportWidth}GetViewportHeight(){return this._viewportHeight}SetViewportSize(g,h){this._viewportWidth=g;this._viewportHeight=h}_SetDevicePixelRatio(g){this._devicePixelRatio=
g}GetDevicePixelRatio(){return this._devicePixelRatio}GetParallaxXOrigin(){return this._parallaxXorigin}GetParallaxYOrigin(){return this._parallaxYorigin}GetCanvasManager(){return this._canvasManager}GetDrawWidth(){return this._canvasManager?this._canvasManager.GetDrawWidth():this._viewportWidth}GetDrawHeight(){return this._canvasManager?this._canvasManager.GetDrawHeight():this._viewportHeight}GetRenderScale(){return this._canvasManager?this._canvasManager.GetRenderScale():1}GetDisplayScale(){return this._canvasManager?
this._canvasManager.GetDisplayScale():1}GetCanvasClientX(){return this._canvasManager?this._canvasManager.GetCanvasClientX():0}GetCanvasClientY(){return this._canvasManager?this._canvasManager.GetCanvasClientY():0}GetCanvasCssWidth(){return this._canvasManager?this._canvasManager.GetCssWidth():0}GetCanvasCssHeight(){return this._canvasManager?this._canvasManager.GetCssHeight():0}GetFullscreenMode(){return this._canvasManager?this._canvasManager.GetFullscreenMode():"off"}GetAdditionalRenderTarget(g){return this._canvasManager?
this._canvasManager.GetAdditionalRenderTarget(g):null}ReleaseAdditionalRenderTarget(g){this._canvasManager&&this._canvasManager.ReleaseAdditionalRenderTarget(g)}_SetUsesAnyBackgroundBlending(g){this._usesAnyBackgroundBlending=!!g}UsesAnyBackgroundBlending(){return this._usesAnyBackgroundBlending}GetGPUUtilisation(){return this._canvasManager?this._canvasManager.GetGPUUtilisation():NaN}IsLinearSampling(){return"nearest"!==this.GetSampling()}GetFramerateMode(){return this._framerateMode}GetCompositingMode(){return this._compositingMode}GetSampling(){return this._sampling}UsesLoaderLayout(){return this._usesLoaderLayout}GetLoadingLogoFilename(){return this._loadingLogoFilename}GetLayoutManager(){return this._layoutManager}GetMainRunningLayout(){return this._layoutManager.GetMainRunningLayout()}GetTimelineManager(){return this._timelineManager}GetTransitionManager(){return this._transitionManager}GetAssetManager(){return this._assetManager}LoadImage(g){return this._assetManager.LoadImage(g)}CreateInstance(g,
h,m,k){return this.CreateInstanceFromData(g,h,!1,m,k)}CreateInstanceFromData(g,h,m,k,a,b){let l=null,p=null;if(g instanceof e.ObjectClass){p=g;if(p.IsFamily()){g=p.GetFamilyMembers();var r=Math.floor(this.Random()*g.length);p=g[r]}l=p.GetDefaultInstanceData()}else l=g,p=this.GetObjectClassByIndex(l[1]);const t=p.GetPlugin().IsWorldType();if(this._isLoading&&t&&!p.IsOnLoaderLayout())return null;const u=h;t||(h=null);var w=m&&!b&&l&&!this._instancesByUid.has(l[2])?l[2]:this._nextUid++;r=l?l[0]:null;
g=e.New(e.Instance,{runtime:this,objectType:p,layer:h,worldData:r,instVarData:l?l[3]:null,uid:w});this._instancesByUid.set(w,g);w=null;t&&(w=g.GetWorldInfo(),"undefined"!==typeof k&&"undefined"!==typeof a&&(w.SetX(k),w.SetY(a)),p._SetAnyCollisionCellChanged(!0));h&&(h._AddInstance(g,!0),1===h.GetParallaxX()&&1===h.GetParallaxY()||p._SetAnyInstanceParallaxed(!0),h.GetLayout().MaybeLoadTexturesFor(p));this._objectCount++;if(p.IsInContainer()&&!m&&!b){for(var x of p.GetContainer().objectTypes())x!==
p&&(h=this.CreateInstanceFromData(x,u,!1,w?w.GetX():k,w?w.GetY():a,!0),g._AddSibling(h));for(const A of g.siblings()){A._AddSibling(g);for(const E of g.siblings())A!==E&&A._AddSibling(E)}}p._SetIIDsStale();k=l?e.cloneArray(l[5]):null;a=l?l[4].map(A=>e.cloneArray(A)):null;(x=t&&r&&14===r.length)&&g._SetHasTilemap();g._CreateSdkInstance(k,a);x&&(k=r[13],g.GetSdkInstance().LoadTilemapData(k[2],k[0],k[1]));this._instancesPendingCreate.push(g);this._hasPendingInstances=!0;this.IsDebug()&&d.InstanceCreated(g);
return g}DestroyInstance(g){if(!this._instancesToReleaseAtEndOfTick.has(g)){var h=g.GetObjectClass(),m=this._instancesPendingDestroy.get(h);if(m){if(m.has(g))return;m.add(g)}else m=new Set,m.add(g),this._instancesPendingDestroy.set(h,m);this.IsDebug()&&d.InstanceDestroyed(g);g._MarkDestroyed();this._hasPendingInstances=!0;if(g.IsInContainer())for(const k of g.siblings())this.DestroyInstance(k);for(const k of g.children())k.GetDestroyWithParent()&&this.DestroyInstance(k);this._layoutManager.IsEndingLayout()||
this._isLoadingState||(h=this.GetEventSheetManager(),h.BlockFlushingInstances(!0),g._TriggerOnDestroyed(),h.BlockFlushingInstances(!1));g._FireDestroyedScriptEvents(this._layoutManager.IsEndingLayout())}}FlushPendingInstances(){this._hasPendingInstances&&(this._isFlushingPendingInstances=!0,this._FlushInstancesPendingCreate(),this._FlushInstancesPendingDestroy(),this._hasPendingInstances=this._isFlushingPendingInstances=!1,this.UpdateRender())}_FlushInstancesPendingCreate(){for(const g of this._instancesPendingCreate){const h=
g.GetObjectClass();h._AddInstance(g);for(const m of h.GetFamilies())m._AddInstance(g),m._SetIIDsStale()}e.clearArray(this._instancesPendingCreate)}_FlushInstancesPendingDestroy(){this._dispatcher.SetDelayRemoveEventsEnabled(!0);for(const [g,h]of this._instancesPendingDestroy.entries())this._FlushInstancesPendingDestroyForObjectClass(g,h),h.clear();this._instancesPendingDestroy.clear();this._dispatcher.SetDelayRemoveEventsEnabled(!1)}_FlushInstancesPendingDestroyForObjectClass(g,h){for(const k of h){var m=
this._eventObjects.instancedestroy;m.instance=k;this._dispatcher.dispatchEvent(m);this._instancesByUid.delete(k.GetUID());if(m=k.GetWorldInfo())m._RemoveFromCollisionCells(),m._RemoveFromRenderCells();this._instancesToReleaseAtEndOfTick.add(k);this._objectCount--}e.arrayRemoveAllInSet(g.GetInstances(),h);g._SetIIDsStale();this._instancesToReleaseAffectedObjectClasses.add(g);0===g.GetInstances().length&&g._SetAnyInstanceParallaxed(!1);for(const k of g.GetFamilies())e.arrayRemoveAllInSet(k.GetInstances(),
h),k._SetIIDsStale(),this._instancesToReleaseAffectedObjectClasses.add(k);if(g.GetPlugin().IsWorldType()){g=new Set([...h].map(k=>k.GetWorldInfo().GetLayer()));for(const k of g)k._RemoveAllInstancesInSet(h)}}_GetInstancesPendingCreate(){return this._instancesPendingCreate}_GetNewUID(){return this._nextUid++}_MapInstanceByUID(g,h){this._instancesByUid.set(g,h)}_OnWebGLContextLost(){this._dispatcher.dispatchEvent(e.New(e.Event,"webglcontextlost"));this.SetSuspended(!0);for(var g of this._allObjectClasses)!g.IsFamily()&&
g.HasLoadedTextures()&&g.ReleaseTextures();(g=this.GetMainRunningLayout())&&g._OnWebGLContextLost();e.ImageInfo.OnWebGLContextLost();e.ImageAsset.OnWebGLContextLost()}async _OnWebGLContextRestored(){await this.GetMainRunningLayout()._Load(null,this.GetWebGLRenderer());this._dispatcher.dispatchEvent(e.New(e.Event,"webglcontextrestored"));this.SetSuspended(!1);this.UpdateRender()}_OnVisibilityChange(g){this.SetSuspended(g.hidden)}_OnWindowBlur(g){this.IsPreview()&&this._pauseOnBlur&&!e.Platform.IsMobile&&
!g.data.parentHasFocus&&(this.SetSuspended(!0),this._isPausedOnBlur=!0)}_OnWindowFocus(){this._isPausedOnBlur&&(this.SetSuspended(!1),this._isPausedOnBlur=!1)}_RequestAnimationFrame(){const g=this._tickCallbacks;"vsync"===this._framerateMode?-1===this._rafId&&(this._rafId=self.requestAnimationFrame(g.normal)):"unlimited-tick"===this._framerateMode?(-1===this._ruafId&&(this._ruafId=e.RequestUnlimitedAnimationFrame(g.tickOnly)),-1===this._rafId&&(this._rafId=self.requestAnimationFrame(g.renderOnly))):
-1===this._ruafId&&(this._ruafId=e.RequestUnlimitedAnimationFrame(g.normal))}_CancelAnimationFrame(){-1!==this._rafId&&(self.cancelAnimationFrame(this._rafId),this._rafId=-1);-1!==this._ruafId&&(e.CancelUnlimitedAnimationFrame(this._ruafId),this._ruafId=-1)}IsSuspended(){return 0<this._suspendCount}SetSuspended(g){var h=this.IsSuspended();this._suspendCount+=g?1:-1;0>this._suspendCount&&(this._suspendCount=0);g=this.IsSuspended();!h&&g?(console.log("[Construct 3] Suspending"),this._CancelAnimationFrame(),
this._dispatcher.dispatchEvent(e.New(e.Event,"suspend")),this.Trigger(e.Plugins.System.Cnds.OnSuspend,null,null)):h&&!g&&(console.log("[Construct 3] Resuming"),this._fpsLastTime=this._lastTickTime=h=performance.now(),this._mainThreadTimeCounter=this._mainThreadTime=this._fps=this._fpsFrameCount=0,this._dispatcher.dispatchEvent(e.New(e.Event,"resume")),this.Trigger(e.Plugins.System.Cnds.OnResume,null,null),this.HitBreakpoint()||this.Tick(h))}_AddBehInstToTick(g){this._behInstsToTick.Add(g)}_AddBehInstToPostTick(g){this._behInstsToPostTick.Add(g)}_AddBehInstToTick2(g){this._behInstsToTick2.Add(g)}_RemoveBehInstToTick(g){this._behInstsToTick.Remove(g)}_RemoveBehInstToPostTick(g){this._behInstsToPostTick.Remove(g)}_RemoveBehInstToTick2(g){this._behInstsToTick2.Remove(g)}_BehaviorTick(){this._behInstsToTick.SetQueueingEnabled(!0);
for(const g of this._behInstsToTick)g.Tick();this._behInstsToTick.SetQueueingEnabled(!1)}_BehaviorPostTick(){this._behInstsToPostTick.SetQueueingEnabled(!0);for(const g of this._behInstsToPostTick)g.PostTick();this._behInstsToPostTick.SetQueueingEnabled(!1)}_BehaviorTick2(){this._behInstsToTick2.SetQueueingEnabled(!0);for(const g of this._behInstsToTick2)g.Tick2();this._behInstsToTick2.SetQueueingEnabled(!1)}*_DebugBehaviorTick(){this._behInstsToTick.SetQueueingEnabled(!0);for(const g of this._behInstsToTick){const h=
g.Tick();e.IsIterator(h)&&(yield*h)}this._behInstsToTick.SetQueueingEnabled(!1)}*_DebugBehaviorPostTick(){this._behInstsToPostTick.SetQueueingEnabled(!0);for(const g of this._behInstsToPostTick){const h=g.PostTick();e.IsIterator(h)&&(yield*h)}this._behInstsToPostTick.SetQueueingEnabled(!1)}*_DebugBehaviorTick2(){this._behInstsToTick2.SetQueueingEnabled(!0);for(const g of this._behInstsToTick2){const h=g.Tick2();e.IsIterator(h)&&(yield*h)}this._behInstsToTick2.SetQueueingEnabled(!1)}async Tick(g,h,
m){this._hasStartedTicking=!0;const k="background-wake"===m;m="background-wake"!==m&&"skip-render"!==m;this._hasStarted&&(!this.IsSuspended()||h||k)&&(h=performance.now(),this._isInTick=!0,g||(g=h),this._MeasureDt(g),g=this.Step_BeforePreTick(),this.IsDebugging()&&await g,g=this._dispatcher.dispatchEventAndWait_AsyncOptional(this._eventObjects.pretick),g instanceof Promise&&await g,g=this.Step_AfterPreTick(),this.IsDebugging()&&await g,this._NeedsHandleSaveOrLoad()&&await this._HandleSaveOrLoad(),
this.GetLayoutManager().IsPendingChangeMainLayout()&&await this._MaybeChangeLayout(),g=this.Step_RunEventsEtc(),this.IsDebugging()&&await g,m&&this.Render(),this.IsSuspended()||k||this._RequestAnimationFrame(),this._tickCount++,this._tickCountNoSave++,this._execCount++,this._isInTick=!1,this._mainThreadTimeCounter+=performance.now()-h)}async Step_BeforePreTick(){const g=this._eventSheetManager,h=this.IsDebug();this.FlushPendingInstances();g.BlockFlushingInstances(!0);this.PushCurrentLayout(this.GetMainRunningLayout());
h&&d.StartMeasuringTime();this.IsDebugging()?await g.DebugRunScheduledWaits():g.RunScheduledWaits();h&&d.AddEventsTime();this.PopCurrentLayout();g.BlockFlushingInstances(!1);this.FlushPendingInstances();g.BlockFlushingInstances(!0)}async Step_AfterPreTick(){const g=this.IsDebug(),h=this.IsDebugging(),m=this._dispatcher,k=this._eventObjects,a=this._userScriptEventObjects;g&&d.StartMeasuringTime();h?await this.DebugIterateAndBreak(this._DebugBehaviorTick()):this._BehaviorTick();h?await this.DebugIterateAndBreak(this._DebugBehaviorPostTick()):
this._BehaviorPostTick();g&&d.AddBehaviorTickTime();g&&d.StartMeasuringTime();h?await this.DebugFireGeneratorEventAndBreak(k.tick):m.dispatchEvent(k.tick);g&&d.AddPluginTickTime();this._eventSheetManager.BlockFlushingInstances(!1);this.DispatchUserScriptEvent(a.tick)}async Step_RunEventsEtc(){const g=this._eventSheetManager,h=this._dispatcher,m=this._eventObjects,k=this.IsDebug(),a=this.IsDebugging();k&&d.StartMeasuringTime();a?await g.DebugRunEvents(this._layoutManager):g.RunEvents(this._layoutManager);
k&&d.AddEventsTime();this._collisionEngine.ClearRegisteredCollisions();if(0<this._instancesToReleaseAtEndOfTick.size){h.SetDelayRemoveEventsEnabled(!0);for(const b of this._instancesToReleaseAffectedObjectClasses)b.GetSolStack().RemoveInstances(this._instancesToReleaseAtEndOfTick);this._instancesToReleaseAffectedObjectClasses.clear();this._eventSheetManager.RemoveInstancesFromScheduledWaits(this._instancesToReleaseAtEndOfTick);for(const b of this._instancesToReleaseAtEndOfTick)b.Release();this._instancesToReleaseAtEndOfTick.clear();
h.SetDelayRemoveEventsEnabled(!1)}this._isLayoutFirstTick=!1;g.BlockFlushingInstances(!0);k&&d.StartMeasuringTime();a?await this.DebugIterateAndBreak(this._DebugBehaviorTick2()):this._BehaviorTick2();k&&d.AddBehaviorTickTime();k&&d.StartMeasuringTime();a?await this.DebugFireGeneratorEventAndBreak(m.tick2):h.dispatchEvent(m.tick2);k&&d.AddPluginTickTime();g.BlockFlushingInstances(!1);a&&await g.RunQueuedDebugTriggersAsync()}async _MaybeChangeLayout(){const g=this.GetLayoutManager();let h=0;for(;g.IsPendingChangeMainLayout()&&
10>h++;)await this._DoChangeLayout(g.GetPendingChangeMainLayout())}_MeasureDt(g){if(0!==this._lastTickTime){this._dt1=Math.max(g-this._lastTickTime,0)/1E3;const h=1/this._minimumFramerate;.5<this._dt1?this._dt1=0:this._dt1>h&&(this._dt1=h)}this._lastTickTime=g;this._dt=this._dt1*this._timeScale;this._gameTime.Add(this._dt);this._wallTime.Add(this._dt1);this._canvasManager&&this._canvasManager._UpdateTick();1E3<=g-this._fpsLastTime&&(this._fpsLastTime+=1E3,1E3<=g-this._fpsLastTime&&(this._fpsLastTime=
g),this._fps=this._fpsFrameCount,this._fpsFrameCount=0,this._mainThreadTime=Math.min(this._mainThreadTimeCounter/1E3,1),this._mainThreadTimeCounter=0,this._canvasManager&&this._canvasManager._Update1sFrameRange(),this._collisionEngine._Update1sStats(),this.IsDebug()&&d.Update1sPerfStats());this._fpsFrameCount++}async _DoChangeLayout(g){const h=this._dispatcher,m=this.GetLayoutManager().GetMainRunningLayout();await m._StopRunning();m._Unload(g,this.GetWebGLRenderer());m===g&&this._eventSheetManager.ClearAllScheduledWaits();
this._collisionEngine.ClearRegisteredCollisions();h.dispatchEvent(this._eventObjects.beforelayoutchange);e.Asyncify.SetHighThroughputMode(!0);await g._Load(m,this.GetWebGLRenderer());e.Asyncify.SetHighThroughputMode(!1);await g._StartRunning(!1);h.dispatchEvent(this._eventObjects.layoutchange);this.UpdateRender();this._isLayoutFirstTick=!0;this.FlushPendingInstances()}UpdateRender(){this._needRender=!0}GetWebGLRenderer(){return this._canvasManager?this._canvasManager.GetWebGLRenderer():null}GetRenderer(){return this.GetWebGLRenderer()}Render(){if(this._canvasManager&&
!this._canvasManager.IsWebGLContextLost()){var g=this.GetWebGLRenderer();g.Start();g.CheckForQueryResults();if(this._needRender){var h=this.IsDebug();h&&d.StartMeasuringTime();this._needRender=!1;var m=null;g.SupportsGPUProfiling()&&(m=this._canvasManager.GetGPUFrameTimingsBuffer().AddTimeElapsedQuery(),g.StartQuery(m));g.SetTextureFillMode();g.SetAlphaBlend();g.SetColorRgba(1,1,1,1);g.SetRenderTarget(null);g.SetTexture(null);this._layoutManager.GetMainRunningLayout().Draw(g);m&&g.EndQuery(m);g.Finish();
h&&(d.AddDrawCallsTime(),d.UpdateInspectHighlight());this._canvasManager&&this._canvasManager._MaybeTakeSnapshot()}else g.IncrementFrameNumber()}}Trigger(g,h,m){if(!this._hasStarted)return!1;var k=!this._isInTick&&!this._eventSheetManager.IsInTrigger();let a=0;k&&(a=performance.now());const b=this.IsDebug();b&&this.SetDebuggingEnabled(!1);g=this._eventSheetManager._Trigger(this._layoutManager,g,h,m);k&&(k=performance.now()-a,this._mainThreadTimeCounter+=k,b&&d.AddTriggersTime(k));b&&this.SetDebuggingEnabled(!0);
return g}DebugTrigger(g,h,m){if(!this.IsDebug())return this.Trigger(g,h,m);if(this.HitBreakpoint())throw Error("called DebugTrigger() while stopped on breakpoint");if(!this._isInTick&&!this._eventSheetManager.IsInTrigger())throw Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this._eventSheetManager._DebugTrigger(this._layoutManager,g,h,m)}async TriggerAsync(g,h,m){if(!this.IsDebugging())return this.Trigger(g,h,m);if(!this._hasStarted)return!1;if(this.HitBreakpoint())return this._eventSheetManager.QueueDebugTrigger(g,
h,m);if(!this.GetMainRunningLayout())return this._eventSheetManager.QueueTrigger(g,h,m);const k=performance.now();g=this._eventSheetManager._DebugTrigger(this._layoutManager,g,h,m);for(h=g.next();!h.done;)await this.DebugBreak(h.value),h=g.next();this.IsSuspended()||this._eventSheetManager.IsInTrigger()||(await this._eventSheetManager.RunQueuedDebugTriggersAsync(),this._hasStartedTicking&&!this._isInTick&&this._RequestAnimationFrame());this._mainThreadTimeCounter+=performance.now()-k;return h.value}FastTrigger(g,
h,m){const k=this.IsDebug();k&&this.SetDebuggingEnabled(!1);g=this._eventSheetManager._FastTrigger(this._layoutManager,g,h,m);k&&this.SetDebuggingEnabled(!0);return g}DebugFastTrigger(g,h,m){return this._eventSheetManager._DebugFastTrigger(this._layoutManager,g,h,m)}ScheduleTriggers(g){return this._scheduleTriggersThrottle.Add(g)}PushCurrentLayout(g){this._currentLayoutStack.push(g)}PopCurrentLayout(){if(!this._currentLayoutStack.length)throw Error("layout stack empty");this._currentLayoutStack.pop()}GetCurrentLayout(){return this._currentLayoutStack.length?
this._currentLayoutStack[this._currentLayoutStack.length-1]:this.GetMainRunningLayout()}GetDt(g){return g&&-1!==g.GetTimeScale()?this._dt1*g.GetTimeScale():this._dt}_GetDtFast(){return this._dt}GetDt1(){return this._dt1}GetTimeScale(){return this._timeScale}SetTimeScale(g){if(isNaN(g)||0>g)g=0;this._timeScale=g}SetMinimumFramerate(g){this._minimumFramerate=e.clamp(g,1,120)}GetMinimumFramerate(){return this._minimumFramerate}GetFPS(){return this._fps}GetMainThreadTime(){return this._mainThreadTime}GetStartTime(){return this._startTime}GetGameTime(){return this._gameTime.Get()}GetWallTime(){return this._wallTime.Get()}GetTickCount(){return this._tickCount}GetTickCountNoSave(){return this._tickCountNoSave}IncrementExecCount(){++this._execCount}GetExecCount(){return this._execCount}GetObjectCount(){return this._objectCount}GetProjectName(){return this._projectName}GetProjectVersion(){return this._projectVersion}GetProjectUniqueId(){return this._projectUniqueId}GetAppId(){return this._appId}GetInstanceByUID(g){if(this._isLoadingState)throw Error("cannot call while loading state - wait until afterload event");
return this._instancesByUid.get(g)||null}_RefreshUidMap(){this._instancesByUid.clear();for(const g of this._allObjectClasses)if(!g.IsFamily())for(const h of g.GetInstances())this._instancesByUid.set(h.GetUID(),h)}IsPreview(){return"preview"===this._exportType}IsDebug(){return this._isDebug}GetExportType(){return this._exportType}IsCordova(){return"cordova"===this._exportType}IsAndroidWebView(){return"Android"===e.Platform.OS&&("cordova"===this._exportType||"playable-ad"===this._exportType||"instant-games"===
this._exportType)}IsiOSCordova(){return this._isiOSCordova}IsiOSWebView(){return this._isiOSWebView}GetCollisionEngine(){return this._collisionEngine}GetSolidBehavior(){return this._pluginManager.GetSolidBehavior()}GetJumpthruBehavior(){return this._pluginManager.GetJumpthruBehavior()}IsLayoutFirstTick(){return this._isLayoutFirstTick}SetPixelRoundingEnabled(g){g=!!g;this._isPixelRoundingEnabled!==g&&(this._isPixelRoundingEnabled=g,this.UpdateRender())}IsPixelRoundingEnabled(){return this._isPixelRoundingEnabled}SaveToSlot(g){this._saveToSlotName=
g}LoadFromSlot(g){this._loadFromSlotName=g}LoadFromJsonString(g){this._loadFromJson=g}GetLastSaveJsonString(){return this._lastSaveJson}_NeedsHandleSaveOrLoad(){return!(!this._saveToSlotName&&!this._loadFromSlotName&&null===this._loadFromJson)}async _HandleSaveOrLoad(){this._saveToSlotName&&(this.FlushPendingInstances(),await this._DoSaveToSlot(this._saveToSlotName),this._ClearSaveOrLoad());this._loadFromSlotName&&(await this._DoLoadFromSlot(this._loadFromSlotName),this._ClearSaveOrLoad(),this.IsDebug()&&
d.StepIfPausedInDebugger());if(null!==this._loadFromJson){this.FlushPendingInstances();try{await this._DoLoadFromJsonString(this._loadFromJson),this._lastSaveJson=this._loadFromJson,await this.TriggerAsync(e.Plugins.System.Cnds.OnLoadComplete,null),this._lastSaveJson=""}catch(g){console.error("[Construct 3] Failed to load state from JSON string: ",g),await this.TriggerAsync(e.Plugins.System.Cnds.OnLoadFailed,null)}this._ClearSaveOrLoad()}}_ClearSaveOrLoad(){this._loadFromSlotName=this._saveToSlotName=
"";this._loadFromJson=null}_GetProjectStorage(){this._projectStorage||(this._projectStorage=localforage.createInstance({name:"c3-localstorage-"+this.GetProjectUniqueId(),description:this.GetProjectName()}));return this._projectStorage}_GetSavegamesStorage(){this._savegamesStorage||(this._savegamesStorage=localforage.createInstance({name:"c3-savegames-"+this.GetProjectUniqueId(),description:this.GetProjectName()}));return this._savegamesStorage}async _DoSaveToSlot(g){const h=await this._SaveToJsonString();
try{await this._GetSavegamesStorage().setItem(g,h),console.log("[Construct 3] Saved state to storage ("+h.length+" chars)"),this._lastSaveJson=h,await this.TriggerAsync(e.Plugins.System.Cnds.OnSaveComplete,null),this._lastSaveJson=""}catch(m){console.error("[Construct 3] Failed to save state to storage: ",m),await this.TriggerAsync(e.Plugins.System.Cnds.OnSaveFailed,null)}}async _DoLoadFromSlot(g){try{const h=await this._GetSavegamesStorage().getItem(g);if(!h)throw Error("empty slot");console.log("[Construct 3] Loaded state from storage ("+
h.length+" chars)");await this._DoLoadFromJsonString(h);this._lastSaveJson=h;await this.TriggerAsync(e.Plugins.System.Cnds.OnLoadComplete,null);this._lastSaveJson=""}catch(h){console.error("[Construct 3] Failed to load state from storage: ",h),await this.TriggerAsync(e.Plugins.System.Cnds.OnLoadFailed,null)}}async _SaveToJsonString(){const g={c3save:!0,version:1,rt:{time:this.GetGameTime(),walltime:this.GetWallTime(),timescale:this.GetTimeScale(),tickcount:this.GetTickCount(),execcount:this.GetExecCount(),
next_uid:this._nextUid,running_layout:this.GetMainRunningLayout().GetSID(),start_time_offset:Date.now()-this._startTime},types:{},layouts:{},events:this._eventSheetManager._SaveToJson(),timelines:this._timelineManager._SaveToJson(),user_script_data:null};for(var h of this._allObjectClasses)h.IsFamily()||h.HasNoSaveBehavior()||(g.types[h.GetSID().toString()]=h._SaveToJson());for(const m of this._layoutManager.GetAllLayouts())g.layouts[m.GetSID().toString()]=m._SaveToJson();h=this._CreateUserScriptEvent("save");
h.saveData=null;await this.DispatchUserScriptEventAsyncWait(h);g.user_script_data=h.saveData;return JSON.stringify(g)}IsLoadingState(){return this._isLoadingState}_TriggerOnCreateAfterLoad(g){e.shallowAssignArray(this._triggerOnCreateAfterLoad,g)}async _DoLoadFromJsonString(g){g=JSON.parse(g);if(g.c2save)throw Error("C2 saves are incompatible with C3 runtime");if(!g.c3save)throw Error("not valid C3 save data");if(1<g.version)throw Error("C3 save data from future version");this._isLoadingState=!0;
var h=g.rt;this._gameTime.Set(h.time);this._wallTime.Set(h.walltime);this._timeScale=h.timescale;this._tickCount=h.tickcount;this._execCount=h.execcount;this._startTime=Date.now()-h.start_time_offset;var m=h.running_layout;if(m!==this.GetMainRunningLayout().GetSID())if(m=this._layoutManager.GetLayoutBySID(m))await this._DoChangeLayout(m);else return;for(const [b,l]of Object.entries(g.types))m=parseInt(b,10),m=this.GetObjectClassBySID(m),!m||m.IsFamily()||m.HasNoSaveBehavior()||m._LoadFromJson(l);
this.FlushPendingInstances();this._RefreshUidMap();this._isLoadingState=!1;this._nextUid=h.next_uid;for(const [b,l]of Object.entries(g.layouts))h=parseInt(b,10),(h=this._layoutManager.GetLayoutBySID(h))&&h._LoadFromJson(l);this._eventSheetManager._LoadFromJson(g.events);for(var k of this._triggerOnCreateAfterLoad)k._TriggerOnCreated(),k.SetupInitialSceneGraphConnections();e.clearArray(this._triggerOnCreateAfterLoad);for(var a of this._allObjectClasses)if(!a.IsFamily()&&a.IsInContainer())for(const b of a.GetInstances()){k=
b.GetIID();for(const l of a.GetContainer().objectTypes())if(l!==a){h=l.GetInstances();if(0>k||k>=h.length)throw Error("missing sibling instance");b._AddSibling(h[k])}}this._timelineManager._LoadFromJson(g.timelines);this._dispatcher.dispatchEvent(e.New(e.Event,"afterload"));a=this._CreateUserScriptEvent("load");a.saveData=g.user_script_data;await this.DispatchUserScriptEventAsyncWait(a);this.UpdateRender()}async AddJobWorkerScripts(g){g=(await Promise.all(g.map(h=>this._assetManager.FetchBlob(h)))).map(h=>
URL.createObjectURL(h));this._jobScheduler.ImportScriptsToJobWorkers(g)}AddJobWorkerBlob(g,h){this._jobScheduler.SendBlobToJobWorkers(g,h)}AddJobWorkerBuffer(g,h){this._jobScheduler.SendBufferToJobWorkers(g,h)}AddJob(g,h,m){return this._jobScheduler.AddJob(g,h,m)}BroadcastJob(g,h,m){return this._jobScheduler.BroadcastJob(g,h,m)}InvokeDownload(g,h){this.PostComponentMessageToDOM("runtime","invoke-download",{url:g,filename:h})}async RasterSvgImage(g,h,m,k,a,b){k=k||h;a=a||m;if(this.IsInWorker())return(await this.PostComponentMessageToDOMAsync("runtime",
"raster-svg-image",{blob:g,imageWidth:h,imageHeight:m,surfaceWidth:k,surfaceHeight:a,imageBitmapOpts:b})).imageBitmap;g=await self.C3_RasterSvgImageBlob(g,h,m,k,a);return b?await self.createImageBitmap(g,b):g}async GetSvgImageSize(g){return this.IsInWorker()?await this.PostComponentMessageToDOMAsync("runtime","get-svg-image-size",{blob:g}):await self.C3_GetSvgImageSize(g)}RequestDeviceOrientationEvent(){this._didRequestDeviceOrientationEvent||(this._didRequestDeviceOrientationEvent=!0,this.PostComponentMessageToDOM("runtime",
"enable-device-orientation"))}RequestDeviceMotionEvent(){this._didRequestDeviceMotionEvent||(this._didRequestDeviceMotionEvent=!0,this.PostComponentMessageToDOM("runtime","enable-device-motion"))}Random(){return this._randomNumberCallback()}SetRandomNumberGeneratorCallback(g){this._randomNumberCallback=g}_GetRemotePreviewStatusInfo(){return{fps:this.GetFPS(),cpu:this.GetMainThreadTime(),gpu:this.GetGPUUtilisation(),layout:this.GetMainRunningLayout()?this.GetMainRunningLayout().GetName():"",renderer:this.GetWebGLRenderer().GetUnmaskedRenderer()}}HitBreakpoint(){return this.IsDebug()?
d.HitBreakpoint():!1}DebugBreak(g){return this.IsDebugging()?d.DebugBreak(g):Promise.resolve()}DebugBreakNext(){return this.IsDebugging()?d.BreakNext():!1}SetDebugBreakpointsEnabled(g){this._breakpointsEnabled=!!g;this._UpdateDebuggingFlag()}AreDebugBreakpointsEnabled(){return this._breakpointsEnabled}IsDebugging(){return this._isDebugging}SetDebuggingEnabled(g){g?this._debuggingDisabled--:this._debuggingDisabled++;this._UpdateDebuggingFlag()}_UpdateDebuggingFlag(){this._isDebugging=this.IsDebug()&&
this._breakpointsEnabled&&0===this._debuggingDisabled}IsCPUProfiling(){return this.IsDebug()&&d.IsCPUProfiling()}IsGPUProfiling(){return this.IsDebug()&&this.GetWebGLRenderer().SupportsGPUProfiling()&&d.IsGPUProfiling()}async DebugIterateAndBreak(g){if(g)for(const h of g)await this.DebugBreak(h)}DebugFireGeneratorEventAndBreak(g){return this.DebugIterateAndBreak(this._dispatcher.dispatchGeneratorEvent(g))}_InvokeFunctionFromJS(g){return this._eventSheetManager._InvokeFunctionFromJS(g.name,g.params)}GetIRuntime(){return this._iRuntime}_CreateUserScriptEvent(g){g=
e.New(e.Event,g,!1);g.runtime=this._iRuntime;return g}_InitScriptInterfaces(){var g={};for(const h of this._allObjectClasses)g[h.GetJsPropName()]={value:h.GetIObjectClass(),enumerable:!0,writable:!1};g=Object.create(Object.prototype,g);this._iRuntime=new self.IRuntime(this,g);this._userScriptEventObjects={tick:this._CreateUserScriptEvent("tick")}}_InitGlobalVariableScriptInterface(){const g={};for(const h of this.GetEventSheetManager().GetAllGlobalVariables())g[h.GetJsPropName()]=h._GetScriptInterfaceDescriptor();
this._iRuntime._InitGlobalVars(g)}_GetCommonScriptInterfaces(){return this._commonScriptInterfaces}_MapScriptInterface(g,h){this._interfaceMap.set(g,h)}_UnwrapScriptInterface(g){return this._interfaceMap.get(g)}};self.C3_CreateRuntime=e.Runtime.Create;self.C3_InitRuntime=(g,h)=>g.Init(h)}"use strict";
{const e=self.C3;e.JobSchedulerRuntime=class extends e.DefendedBase{constructor(d,c){super();this._runtime=d;this._jobPromises=new Map;this._nextJobId=0;this._inputPort=c.inputPort;c.outputPort.onmessage=f=>this._OnJobWorkerMessage(f);this._maxNumWorkers=c.maxNumWorkers;this._jobWorkerCount=1;this._hadErrorCreatingWorker=this._isCreatingWorker=!1}async Init(){}ImportScriptsToJobWorkers(d){this._inputPort.postMessage({type:"_import_scripts",scripts:d})}SendBlobToJobWorkers(d,c){this._inputPort.postMessage({type:"_send_blob",
blob:d,id:c})}SendBufferToJobWorkers(d,c){this._inputPort.postMessage({type:"_send_buffer",buffer:d,id:c},[d])}AddJob(d,c,f,g,h){f||(f=[]);const m=this._nextJobId++;d={type:d,isBroadcast:!1,jobId:m,params:c,transferables:f};c=new Promise((k,a)=>{this._jobPromises.set(m,{resolve:k,progress:g,reject:a,cancelled:!1})});h&&h.SetAction(()=>this._CancelJob(m));this._inputPort.postMessage(d,f);this._MaybeCreateExtraWorker();return c}BroadcastJob(d,c,f){f||(f=[]);const g=this._nextJobId++;this._inputPort.postMessage({type:d,
isBroadcast:!0,jobId:g,params:c,transferables:f},f)}_CancelJob(d){const c=this._jobPromises.get(d);c&&(c.cancelled=!0,c.resolve=null,c.progress=null,c.reject=null,this._inputPort.postMessage({type:"_cancel",jobId:d}))}_OnJobWorkerMessage(d){d=d.data;const c=d.type,f=d.jobId;switch(c){case "result":this._OnJobResult(f,d.result);break;case "progress":this._OnJobProgress(f,d.progress);break;case "error":this._OnJobError(f,d.error);break;case "ready":this._OnJobWorkerReady();break;default:throw Error(`unknown message from worker '${c}'`);
}}_OnJobResult(d,c){const f=this._jobPromises.get(d);if(!f)throw Error("invalid job ID");f.cancelled||f.resolve(c);this._jobPromises.delete(d)}_OnJobProgress(d,c){d=this._jobPromises.get(d);if(!d)throw Error("invalid job ID");!d.cancelled&&d.progress&&d.progress(c)}_OnJobError(d,c){const f=this._jobPromises.get(d);if(!f)throw Error("invalid job ID");f.cancelled||f.reject(c);this._jobPromises.delete(d)}_OnJobWorkerReady(){this._isCreatingWorker&&(this._isCreatingWorker=!1,this._jobWorkerCount++,this._jobWorkerCount<
this._maxNumWorkers?this._MaybeCreateExtraWorker():this._inputPort.postMessage({type:"_no_more_workers"}))}async _MaybeCreateExtraWorker(){if(!(this._jobWorkerCount>=this._maxNumWorkers||this._isCreatingWorker||this._hadErrorCreatingWorker||this._jobPromises.size<=this._jobWorkerCount))try{this._isCreatingWorker=!0,(await this._runtime.PostComponentMessageToDOMAsync("runtime","create-job-worker")).outputPort.onmessage=d=>this._OnJobWorkerMessage(d)}catch(d){this._hadErrorCreatingWorker=!0,this._isCreatingWorker=
!1,console.error(`[Construct 3] Failed to create job worker; stopping creating any more (created ${this._jobWorkerCount} so far)`,d)}}}}self.C3_Shaders={};
self.C3_Shaders.brightness={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float brightness;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= front.a;\nfront.rgb += (brightness - 1.0);\nfront.rgb *= a;\ngl_FragColor = front;\n}",extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,animated:!1,parameters:[["brightness",0,"percent"]]};
self.C3_Shaders.hsladjust={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nprecision mediump float;\nuniform float huerotate;\nuniform float satadjust;\nuniform float lumadjust;\nvec3 rgb_to_hsl(vec3 color)\n{\nvec3 hsl = vec3(0.0, 0.0, 0.0);\nfloat fmin = min(min(color.r, color.g), color.b);\nfloat fmax = max(max(color.r, color.g), color.b);\nfloat delta = fmax - fmin;\nhsl.z = (fmax + fmin) / 2.0;\nif (delta == 0.0)\n{\nhsl.x = 0.0;\nhsl.y = 0.0;\n}\nelse\n{\nif (hsl.z < 0.5)\nhsl.y = delta / (fmax + fmin);\nelse\nhsl.y = delta / (2.0 - fmax - fmin);\nfloat dR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\nfloat dG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\nfloat dB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\nif (color.r == fmax)\nhsl.x = dB - dG;\nelse if (color.g == fmax)\nhsl.x = (1.0 / 3.0) + dR - dB;\nelse if (color.b == fmax)\nhsl.x = (2.0 / 3.0) + dG - dR;\nif (hsl.x < 0.0)\nhsl.x += 1.0;\nelse if (hsl.x > 1.0)\nhsl.x -= 1.0;\n}\nreturn hsl;\n}\nfloat hue_to_rgb(float f1, float f2, float hue)\n{\nif (hue < 0.0)\nhue += 1.0;\nelse if (hue > 1.0)\nhue -= 1.0;\nfloat ret;\nif ((6.0 * hue) < 1.0)\nret = f1 + (f2 - f1) * 6.0 * hue;\nelse if ((2.0 * hue) < 1.0)\nret = f2;\nelse if ((3.0 * hue) < 2.0)\nret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\nelse\nret = f1;\nreturn ret;\n}\nvec3 hsl_to_rgb(vec3 hsl)\n{\nvec3 rgb = vec3(hsl.z);\nif (hsl.y != 0.0)\n{\nfloat f2;\nif (hsl.z < 0.5)\nf2 = hsl.z * (1.0 + hsl.y);\nelse\nf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\nfloat f1 = 2.0 * hsl.z - f2;\nrgb.r = hue_to_rgb(f1, f2, hsl.x + (1.0 / 3.0));\nrgb.g = hue_to_rgb(f1, f2, hsl.x);\nrgb.b = hue_to_rgb(f1, f2, hsl.x - (1.0 / 3.0));\n}\nreturn rgb;\n}\nvoid main(void)\n{\nvec4 front = texture2D(samplerFront, vTex);\nvec3 rgb = rgb_to_hsl(front.rgb) + vec3((huerotate > 0.5 ? huerotate - 1.0 : huerotate), 0, (lumadjust - 1.0) * front.a);\nrgb.y *= satadjust;\nrgb = hsl_to_rgb(rgb);\ngl_FragColor = vec4(rgb, front.a);\n}",
extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,animated:!1,parameters:[["huerotate",0,"percent"],["satadjust",0,"percent"],["lumadjust",0,"percent"]]};
self.C3_Shaders.grayscale={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float intensity;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float gray = front.r * 0.299 + front.g * 0.587 + front.b * 0.114;\ngl_FragColor = mix(front, vec4(gray, gray, gray, front.a), intensity);\n}",extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,animated:!1,parameters:[["intensity",0,"percent"]]};
self.C3_Shaders.sepia={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp float intensity;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp vec4 sepia = front * mat4( 0.3588, 0.7044, 0.1368, 0.0,\n0.2990, 0.5870, 0.1140, 0.0,\n0.2392, 0.4696, 0.0912, 0.0,\n0.0,\t0.0,\t0.0,\t1.0);\ngl_FragColor = mix(front, vec4(sepia.r, sepia.g, sepia.b, front.a), intensity);\n}",extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,
animated:!1,parameters:[["intensity",0,"percent"]]};self.C3_Shaders.tint={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 tintColor;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\ngl_FragColor = front * vec4(tintColor.r, tintColor.g, tintColor.b, 1.0);\n}",extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,animated:!1,parameters:[["tintColor",0,"color"]]};
self.C3_Shaders.replacecolor={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 sourceColor;\nuniform lowp vec3 destColor;\nuniform lowp float tolerance;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= a;\nlowp float diff = length(front.rgb - sourceColor);\nif (diff <= tolerance)\n{\nfront.rgb = mix(front.rgb, destColor, 1.0 - diff / tolerance);\n}\nfront.rgb *= a;\ngl_FragColor = front;\n}",extendBoxHorizontal:0,
extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,animated:!1,parameters:[["sourceColor",0,"color"],["destColor",0,"color"],["tolerance",0,"percent"]]};
self.C3_Shaders.pixellate={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 pixelSize;\nuniform mediump float tilesize;\nvoid main(void)\n{\nmediump vec2 tile = pixelSize * tilesize;\nmediump vec2 halftile = tile / 2.0;\nmediump vec2 tex = floor(vTex / tile) * tile + halftile;\ntex = clamp(tex, min(srcOriginStart, srcOriginEnd), max(srcOriginStart, srcOriginEnd));\ngl_FragColor = texture2D(samplerFront, tex);\n}",extendBoxHorizontal:0,
extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!1,animated:!1,parameters:[["tilesize",0,"float"]]};
self.C3_Shaders.scanlines={src:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float lineHeight;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nmediump float factor = 1.0 + (floor(mod(vTex.y, pixelSize.y * lineHeight * 2.0) / (pixelSize.y * lineHeight)) / 3.0);\nfront.rgb /= factor;\ngl_FragColor = front;\n}",extendBoxHorizontal:0,extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,animated:!1,
parameters:[["lineHeight",0,"float"]]};
self.C3_Shaders.noise={src:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform highmedp float seconds;\nuniform lowp float intensity;\nuniform lowp float noiseColor;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= a;\nhighmedp float seconds_mod = mod(seconds, 10.0);\nmediump vec3 noise = vec3(fract(sin(dot(vTex.xy, vec2(12.9898,78.233)) + seconds_mod) * 43758.5453),\nfract(sin(dot(vTex.yx, vec2(12.9898,-78.233)) + seconds_mod) * 43758.5453),\nfract(sin(dot(vTex.xy, vec2(-12.9898,-78.233)) + seconds_mod) * 43758.5453));\nnoise = mix(vec3(noise.r), noise, noiseColor);\nfront.rgb += (noise * intensity) - (intensity / 2.0);\nfront.rgb *= a;\ngl_FragColor = front;\n}",extendBoxHorizontal:0,
extendBoxVertical:0,crossSampling:!1,mustPreDraw:!1,preservesOpaqueness:!0,animated:!0,parameters:[["intensity",0,"percent"],["noiseColor",0,"percent"]]};"use strict";
{const e=self.C3;let d=null,c="",f="",g=[],h="",m="",k="";const a=e.New(e.ArrayStack);function b(l,p){l=l[1];p=p[1];if("number"===typeof l&&"number"===typeof p)return l-p;l=""+l;p=""+p;return l<p?-1:l>p?1:0}e.Plugins.System=class extends e.SDKPluginBase{constructor(l){super(l);this._loopStack=this._runtime.GetEventSheetManager().GetLoopStack();this._eventStack=this._runtime.GetEventSheetManager().GetEventStack();this._imagesLoadingComplete=this._imagesLoadingTotal=0;this._functionMaps=new Map}Release(){super.Release()}UpdateRender(){this._runtime.UpdateRender()}Trigger(l){this._runtime.Trigger(l,
null,null)}GetRegex(l,p){d&&l===c&&p===f||(d=new RegExp(l,p),c=l,f=p);d.lastIndex=0;return d}GetRegexMatches(l,p,r){if(l===h&&p===m&&r===k)return g;const t=this.GetRegex(p,r);g=l.match(t);h=l;m=p;k=r;return g}async _LoadTexturesForObjectClasses(l,p){if(p.length){this._imagesLoadingTotal+=p.length;var r=[];for(const t of p)r.push(l.MaybeLoadTexturesFor(t));await e.PromiseAllWithProgress(r,()=>{this._imagesLoadingComplete++});this._imagesLoadingComplete++;this._imagesLoadingComplete===this._imagesLoadingTotal&&
(this._runtime.Trigger(e.Plugins.System.Cnds.OnImageLoadingComplete,null,null),this._imagesLoadingTotal=this._imagesLoadingComplete=0)}}_UnloadTexturesForObjectClasses(l,p){for(const r of p)0===r.GetInstanceCount()&&l.MaybeUnloadTexturesFor(r)}_GetForEachStack(){return a}_Repeat(l){var p=this._runtime.GetEventSheetManager();const r=p.GetEventStack(),t=r.GetCurrentStackFrame(),u=t.GetCurrentEvent(),w=u.GetSolModifiers();var x=t.IsSolModifierAfterCnds();const A=r.Push(u),E=p.GetLoopStack(),y=E.Push();
y.SetEnd(l);if(x)for(x=0;x<l&&!y.IsStopped();++x)p.PushCopySol(w),y.SetIndex(x),u.Retrigger(t,A),p.PopSol(w);else for(p=0;p<l&&!y.IsStopped();++p)y.SetIndex(p),u.Retrigger(t,A);r.Pop();E.Pop();return!1}*_DebugRepeat(l){var p=this._runtime.GetEventSheetManager();const r=p.GetEventStack(),t=r.GetCurrentStackFrame(),u=t.GetCurrentEvent(),w=u.GetSolModifiers();var x=t.IsSolModifierAfterCnds();const A=r.Push(u),E=p.GetLoopStack(),y=E.Push();y.SetEnd(l);if(x)for(x=0;x<l&&!y.IsStopped();++x)p.PushCopySol(w),
y.SetIndex(x),yield*u.DebugRetrigger(t,A),p.PopSol(w);else for(p=0;p<l&&!y.IsStopped();++p)y.SetIndex(p),yield*u.DebugRetrigger(t,A);r.Pop();E.Pop();return!1}_While(){var l=this._runtime.GetEventSheetManager();const p=l.GetEventStack(),r=p.GetCurrentStackFrame(),t=r.GetCurrentEvent(),u=t.GetSolModifiers();var w=r.IsSolModifierAfterCnds();const x=p.Push(t),A=l.GetLoopStack(),E=A.Push();if(w)for(w=0;!E.IsStopped();++w)l.PushCopySol(u),E.SetIndex(w),t.Retrigger(r,x)||E.Stop(),l.PopSol(u);else for(l=
0;!E.IsStopped();++l)E.SetIndex(l),t.Retrigger(r,x)||E.Stop();p.Pop();A.Pop();return!1}*_DebugWhile(){var l=this._runtime.GetEventSheetManager();const p=l.GetEventStack(),r=p.GetCurrentStackFrame(),t=r.GetCurrentEvent(),u=t.GetSolModifiers();var w=r.IsSolModifierAfterCnds();const x=p.Push(t),A=l.GetLoopStack(),E=A.Push();if(w)for(w=0;!E.IsStopped();++w)l.PushCopySol(u),E.SetIndex(w),(yield*t.DebugRetrigger(r,x))||E.Stop(),l.PopSol(u);else for(l=0;!E.IsStopped();++l)E.SetIndex(l),(yield*t.DebugRetrigger(r,
x))||E.Stop();p.Pop();A.Pop();return!1}_For(l,p,r){var t=this._runtime.GetEventSheetManager();const u=t.GetEventStack(),w=u.GetCurrentStackFrame(),x=w.GetCurrentEvent(),A=x.GetSolModifiers(),E=w.IsSolModifierAfterCnds(),y=u.Push(x),B=t.GetLoopStack(),H=B.Push();H.SetName(l);H.SetEnd(r);if(r<p)if(E)for(l=p;l>=r&&!H.IsStopped();--l)t.PushCopySol(A),H.SetIndex(l),x.Retrigger(w,y),t.PopSol(A);else for(t=p;t>=r&&!H.IsStopped();--t)H.SetIndex(t),x.Retrigger(w,y);else if(E)for(l=p;l<=r&&!H.IsStopped();++l)t.PushCopySol(A),
H.SetIndex(l),x.Retrigger(w,y),t.PopSol(A);else for(t=p;t<=r&&!H.IsStopped();++t)H.SetIndex(t),x.Retrigger(w,y);u.Pop();B.Pop();return!1}*_DebugFor(l,p,r){var t=this._runtime.GetEventSheetManager();const u=t.GetEventStack(),w=u.GetCurrentStackFrame(),x=w.GetCurrentEvent(),A=x.GetSolModifiers(),E=w.IsSolModifierAfterCnds(),y=u.Push(x),B=t.GetLoopStack(),H=B.Push();H.SetName(l);H.SetEnd(r);if(r<p)if(E)for(l=p;l>=r&&!H.IsStopped();--l)t.PushCopySol(A),H.SetIndex(l),yield*x.DebugRetrigger(w,y),t.PopSol(A);
else for(t=p;t>=r&&!H.IsStopped();--t)H.SetIndex(t),yield*x.DebugRetrigger(w,y);else if(E)for(l=p;l<=r&&!H.IsStopped();++l)t.PushCopySol(A),H.SetIndex(l),yield*x.DebugRetrigger(w,y),t.PopSol(A);else for(t=p;t<=r&&!H.IsStopped();++t)H.SetIndex(t),yield*x.DebugRetrigger(w,y);u.Pop();B.Pop();return!1}_ForEach(l){var p=this._runtime.GetEventSheetManager();const r=p.GetEventStack(),t=r.GetCurrentStackFrame(),u=t.GetCurrentEvent(),w=u.GetSolModifiers();var x=t.IsSolModifierAfterCnds();const A=r.Push(u),
E=p.GetLoopStack(),y=E.Push(),B=l.IsInContainer(),H=l.GetCurrentSol(),P=a.Push();e.shallowAssignArray(P,H.GetInstances());y.SetEnd(P.length);if(x)for(let F=0,I=P.length;F<I&&!y.IsStopped();++F)p.PushCopySol(w),x=P[F],l.GetCurrentSol().SetSinglePicked(x),B&&x.SetSiblingsSinglePicked(),y.SetIndex(F),u.Retrigger(t,A),p.PopSol(w);else{H._SetSelectAll(!1);l=H._GetOwnInstances();e.clearArray(l);l.push(null);for(let F=0,I=P.length;F<I&&!y.IsStopped();++F)p=P[F],l[0]=p,B&&p.SetSiblingsSinglePicked(),y.SetIndex(F),
u.Retrigger(t,A)}r.Pop();E.Pop();e.clearArray(P);a.Pop();return!1}*_DebugForEach(l){var p=this._runtime.GetEventSheetManager();const r=p.GetEventStack(),t=r.GetCurrentStackFrame(),u=t.GetCurrentEvent(),w=u.GetSolModifiers();var x=t.IsSolModifierAfterCnds();const A=r.Push(u),E=p.GetLoopStack(),y=E.Push(),B=l.IsInContainer(),H=l.GetCurrentSol(),P=a.Push();e.shallowAssignArray(P,H.GetInstances());y.SetEnd(P.length);if(x)for(let F=0,I=P.length;F<I&&!y.IsStopped();++F)p.PushCopySol(w),x=P[F],l.GetCurrentSol().SetSinglePicked(x),
B&&x.SetSiblingsSinglePicked(),y.SetIndex(F),yield*u.DebugRetrigger(t,A),p.PopSol(w);else{H._SetSelectAll(!1);l=H._GetOwnInstances();e.clearArray(l);l.push(null);for(let F=0,I=P.length;F<I&&!y.IsStopped();++F)p=P[F],l[0]=p,B&&p.SetSiblingsSinglePicked(),y.SetIndex(F),yield*u.DebugRetrigger(t,A)}r.Pop();E.Pop();e.clearArray(P);a.Pop();return!1}_ForEachOrdered(l,p){var r=this._runtime.GetEventSheetManager();const t=r.GetEventStack(),u=r.GetCurrentCondition(),w=t.GetCurrentStackFrame(),x=w.GetCurrentEvent(),
A=x.GetSolModifiers(),E=w.IsSolModifierAfterCnds(),y=t.Push(x),B=r.GetLoopStack(),H=B.Push(),P=l.IsInContainer(),F=l.GetCurrentSol(),I=a.Push();e.clearArray(I);const N=F.GetInstances();H.SetEnd(N.length);for(let R=0,S=N.length;R<S;++R)I.push([N[R],u.ReevaluateParameter(1,R)]);I.sort(b);1===p&&I.reverse();if(E)for(let R=0,S=I.length;R<S&&!H.IsStopped();++R)r.PushCopySol(A),p=I[R][0],l.GetCurrentSol().SetSinglePicked(p),P&&p.SetSiblingsSinglePicked(),H.SetIndex(R),x.Retrigger(w,y),r.PopSol(A);else{F._SetSelectAll(!1);
l=F._GetOwnInstances();e.clearArray(l);l.push(null);for(let R=0,S=I.length;R<S&&!H.IsStopped();++R)r=I[R][0],l[0]=r,P&&r.SetSiblingsSinglePicked(),H.SetIndex(R),x.Retrigger(w,y)}t.Pop();B.Pop();e.clearArray(I);a.Pop();return!1}*_DebugForEachOrdered(l,p){var r=this._runtime.GetEventSheetManager();const t=r.GetEventStack(),u=r.GetCurrentCondition(),w=t.GetCurrentStackFrame(),x=w.GetCurrentEvent(),A=x.GetSolModifiers(),E=w.IsSolModifierAfterCnds(),y=t.Push(x),B=r.GetLoopStack(),H=B.Push(),P=l.IsInContainer(),
F=l.GetCurrentSol(),I=a.Push();e.clearArray(I);const N=F.GetInstances();H.SetEnd(N.length);for(let R=0,S=N.length;R<S;++R)I.push([N[R],u.ReevaluateParameter(1,R)]);I.sort(b);1===p&&I.reverse();if(E)for(let R=0,S=I.length;R<S&&!H.IsStopped();++R)r.PushCopySol(A),p=I[R][0],l.GetCurrentSol().SetSinglePicked(p),P&&p.SetSiblingsSinglePicked(),H.SetIndex(R),yield*x.DebugRetrigger(w,y),r.PopSol(A);else{F._SetSelectAll(!1);l=F._GetOwnInstances();e.clearArray(l);l.push(null);for(let R=0,S=I.length;R<S&&!H.IsStopped();++R)r=
I[R][0],l[0]=r,P&&r.SetSiblingsSinglePicked(),H.SetIndex(R),yield*x.DebugRetrigger(w,y)}t.Pop();B.Pop();e.clearArray(I);a.Pop();return!1}_GetFunctionMap(l,p){let r=this._functionMaps.get(l);if(r)return r;if(!p)return null;r={defaultFunc:null,strMap:new Map};this._functionMaps.set(l,r);return r}_DoCallMappedFunction(l,p,r,t,u){p.GetEventBlock().RunAsMappedFunctionCall(r);t&&l.PopSol(u)}*_DebugDoCallMappedFunction(l,p,r,t,u){yield*p.GetEventBlock().DebugRunAsMappedFunctionCall(r);t&&l.PopSol(u)}}}"use strict";
{const e=self.C3;e.Plugins.System.Type=class extends e.DefendedBase{constructor(d){super();this._objectClass=d;this._runtime=d.GetRuntime();this._plugin=d.GetPlugin()}OnCreate(){}Release(){this._plugin=this._runtime=this._objectClass=null}}}"use strict";
{const e=self.C3;e.Plugins.System.Instance=class extends e.DefendedBase{constructor(d,c){super();this._inst=d;this._objectClass=this._inst.GetObjectClass();this._sdkType=this._objectClass.GetSdkType();this._runtime=this._inst.GetRuntime()}Release(){this._runtime=this._sdkType=this._objectClass=this._inst=null}}}"use strict";
{const e=self.C3,d=[];e.Plugins.System.Cnds={EveryTick(){return!0},OnLayoutStart(){return!0},OnLayoutEnd(){return!0},OnSuspend(){return!0},OnResume(){return!0},IsSuspended(){return this._runtime.IsSuspended()},Else(){const c=this._runtime.GetCurrentEventStackFrame();return c.GetElseBranchRan()?!1:!c.GetLastEventTrue()},TriggerOnce(){const c=this._runtime.GetCurrentCondition().GetSavedDataMap();let f=c.get("TriggerOnce_lastTick");"undefined"===typeof f&&(f=-1,c.set("TriggerOnce_lastTick",-1));const g=
this._runtime.GetTickCount();c.set("TriggerOnce_lastTick",g);return this._runtime.IsLayoutFirstTick()||f!==g-1},Every(c){const f=this._runtime.GetCurrentCondition().GetSavedDataMap(),g=f.get("Every_lastTime")||0,h=this._runtime.GetGameTime();f.has("Every_seconds")||f.set("Every_seconds",c);const m=f.get("Every_seconds");if(h>=g+m)return f.set("Every_lastTime",g+m),h>=f.get("Every_lastTime")+.04&&f.set("Every_lastTime",h),f.set("Every_seconds",c),!0;h<g-.1&&f.set("Every_lastTime",h);return!1},IsGroupActive(c){return(c=
this._runtime.GetEventSheetManager().GetEventGroupByName(c))&&c.IsGroupActive()},IsPreview(){return this._runtime.IsPreview()},IsMobile(){return e.Platform.IsMobile},OnLoadFinished(){return!0},OnCanvasSnapshot(){return!0},EffectsSupported(){return!0},OnSaveComplete(){return!0},OnSaveFailed(){return!0},OnLoadComplete(){return!0},OnLoadFailed(){return!0},ObjectUIDExists(c){return!!this._runtime.GetInstanceByUID(c)},IsOnPlatform(c){switch(c){case 0:return"browser"===e.Platform.Context;case 1:return"iOS"===
e.Platform.OS;case 2:return"Android"===e.Platform.OS;case 8:return"cordova"===e.Platform.Context;case 9:return"scirra-arcade"===this._runtime.GetExportType();case 10:return"nwjs"===e.Platform.Context;case 13:return"windows-uwp"===this._runtime.GetExportType();default:return!1}},RegexTest(c,f,g){return this.GetRegex(f,g).test(c)},Compare(c,f,g){return e.compare(c,f,g)},CompareBetween(c,f,g){return c>=f&&c<=g},CompareVar(c,f,g){return e.compare(c.GetValue(),f,g)},CompareBoolVar(c){return!!c.GetValue()},
CompareTime(c,f){const g=this._runtime.GetGameTime();return 0===c?(c=this._runtime.GetCurrentCondition().GetSavedDataMap(),!c.get("CompareTime_executed")&&g>=f?(c.set("CompareTime_executed",!0),!0):!1):e.compare(g,c,f)},IsNaN(c){return isNaN(c)},AngleWithin(c,f,g){return e.angleDiff(e.toRadians(c),e.toRadians(g))<=e.toRadians(f)},IsClockwiseFrom(c,f){return e.angleClockwise(e.toRadians(c),e.toRadians(f))},IsBetweenAngles(c,f,g){c=e.toRadians(c);f=e.toRadians(f);g=e.toRadians(g);return e.angleClockwise(g,
f)?e.angleClockwise(c,f)&&!e.angleClockwise(c,g):!(!e.angleClockwise(c,f)&&e.angleClockwise(c,g))},IsValueType(c,f){return"number"===typeof c?0===f:1===f},EvaluateExpression(c){return!!c},PickByComparison(c,f,g,h){if(!c)return!1;const m=this._GetForEachStack(),k=m.Push(),a=c.GetCurrentSol();e.shallowAssignArray(k,a.GetInstances());a.IsSelectAll()&&e.clearArray(a._GetOwnElseInstances());const b=this._runtime.GetCurrentCondition();let l=0;for(let p=0,r=k.length;p<r;++p){const t=k[p];k[l]=t;f=b.ReevaluateParameter(1,
p);h=b.ReevaluateParameter(3,p);e.compare(f,g,h)?++l:a._PushElseInstance(t)}e.truncateArray(k,l);a.SetArrayPicked(k);f=!!k.length;e.clearArray(k);m.Pop();c.ApplySolToContainer();return f},PickByEvaluate(c,f){if(!c)return!1;const g=this._GetForEachStack(),h=g.Push(),m=c.GetCurrentSol();e.shallowAssignArray(h,m.GetInstances());m.IsSelectAll()&&e.clearArray(m._GetOwnElseInstances());const k=this._runtime.GetCurrentCondition();let a=0;for(let b=0,l=h.length;b<l;++b){const p=h[b];h[a]=p;(f=k.ReevaluateParameter(1,
b))?++a:m._PushElseInstance(p)}e.truncateArray(h,a);m.SetArrayPicked(h);f=!!h.length;e.clearArray(h);g.Pop();c.ApplySolToContainer();return f},PickNth(c,f){if(!c)return!1;const g=c.GetCurrentSol(),h=g.GetInstances();f=Math.floor(f);if(f>=h.length)return!1;g.PickOne(h[f]);c.ApplySolToContainer();return!0},PickRandom(c){if(!c)return!1;const f=c.GetCurrentSol(),g=f.GetInstances(),h=Math.floor(this._runtime.Random()*g.length);if(h>=g.length)return!1;f.PickOne(g[h]);c.ApplySolToContainer();return!0},PickAll(c){if(!c||
!c.GetInstanceCount())return!1;c.GetCurrentSol()._SetSelectAll(!0);c.ApplySolToContainer();return!0},PickOverlappingPoint(c,f,g){if(!c)return!1;const h=c.GetCurrentSol();var m=h.GetInstances();const k=this._runtime.GetCurrentEvent().IsOrBlock(),a=this._runtime.GetCurrentCondition().IsInverted();h.IsSelectAll()?(e.shallowAssignArray(d,m),h.ClearArrays(),h._SetSelectAll(!1)):k?(e.shallowAssignArray(d,h._GetOwnElseInstances()),e.clearArray(h._GetOwnElseInstances())):(e.shallowAssignArray(d,h._GetOwnInstances()),
e.clearArray(h._GetOwnInstances()));for(let b=0,l=d.length;b<l;++b)m=d[b],e.xor(m.GetWorldInfo().ContainsPoint(f,g),a)?h._PushInstance(m):h._PushElseInstance(m);c.ApplySolToContainer();return e.xor(!!h._GetOwnInstances().length,a)},PickLastCreated(c){if(!c)return!1;var f=c.IsFamily();let g=null;const h=this._runtime._GetInstancesPendingCreate();for(let m=h.length-1;0<=m;--m){const k=h[m];if(f){if(k.GetObjectClass().BelongsToFamily(c)){g=k;break}}else if(k.GetObjectClass()===c){g=k;break}}g||(f=c.GetInstances(),
f.length&&(g=f[f.length-1]));if(!g)return!1;c.GetCurrentSol().PickOne(g);c.ApplySolToContainer();return!0},Repeat(c){return this._runtime.IsDebugging()?this._DebugRepeat(c):this._Repeat(c)},While(){return this._runtime.IsDebugging()?this._DebugWhile():this._While()},For(c,f,g){return this._runtime.IsDebugging()?this._DebugFor(c,f,g):this._For(c,f,g)},ForEach(c){return this._runtime.IsDebugging()?this._DebugForEach(c):this._ForEach(c)},ForEachOrdered(c,f,g){return this._runtime.IsDebugging()?this._DebugForEachOrdered(c,
g):this._ForEachOrdered(c,g)},LayerVisible(c){return c?c.IsVisible():!1},LayerEmpty(c){return c?!c.GetInstanceCount():!1},LayerCmpOpacity(c,f,g){return c?e.compare(100*c.GetOpacity(),f,g):!1},OnImageLoadingComplete(){return!0},IsLoadingImages(){return 0<this._imagesLoadingTotal}}}"use strict";
{const e=self.C3;function d(k,a){const b=k[0]-a[0];return 0!==b?b:k[1]-a[1]}function c(k,a){return k[1]-a[1]}const f=[],g=[],h=e.New(e.Rect),m=e.New(e.Color);e.Plugins.System.Acts={SetVar(k,a){k.SetValue(a)},AddVar(k,a){k.IsNumber()&&"number"!==typeof a&&(a=parseFloat(a));k.SetValue(k.GetValue()+a)},SubVar(k,a){k.IsNumber()&&k.SetValue(k.GetValue()-a)},SetBoolVar(k,a){k.SetValue(!!a)},ToggleBoolVar(k){k.SetValue(!k.GetValue())},ResetGlobals(){this._runtime.GetEventSheetManager().ResetAllGlobalsToInitialValue()},
CreateObject(k,a,b,l){if(k&&a&&(a=this._runtime.CreateInstance(k,a,b,l))){b=this._runtime.GetEventSheetManager();b.BlockFlushingInstances(!0);a._TriggerOnCreated();if(a.IsInContainer())for(const p of a.siblings())p._TriggerOnCreated();b.BlockFlushingInstances(!1);k.GetCurrentSol().SetSinglePicked(a);a.IsInContainer()&&a.SetSiblingsSinglePicked()}},CreateObjectByName(k,a,b,l){k&&a&&(k=this._runtime.GetObjectClassByName(k))&&e.Plugins.System.Acts.CreateObject.call(this,k,a,b,l)},RecreateInitialObjects(k,
a,b,l,p,r,t,u,w){if(k){var x=this._runtime.GetCurrentLayout();if(r&&(x=this._runtime.GetLayoutManager().GetLayoutByName(r),!x))return;r=null;if("number"!==typeof t||0<=t)if(r=x.GetLayer(t),!r)return;h.set(a,b,l,p);a=x.RecreateInitialObjects(k,h,r,u,w);k.GetCurrentSol().SetArrayPicked(a);k.ApplySolToContainer()}},StopLoop(){const k=this._loopStack;k.IsInLoop()&&k.GetCurrent().Stop()},SetGroupActive(k,a){(k=this._runtime.GetEventSheetManager().GetEventGroupByName(k))&&(0===a?k.SetGroupActive(!1):1===
a?k.SetGroupActive(!0):k.SetGroupActive(!k.IsGroupActive()))},SetTimescale(k){this._runtime.SetTimeScale(k)},SetObjectTimescale(k,a){0>a&&(a=0);if(k){k=k.GetCurrentSol().GetInstances();for(const b of k)b.SetTimeScale(a)}},RestoreObjectTimescale(k){if(k){k=k.GetCurrentSol().GetInstances();for(const a of k)a.RestoreTimeScale()}},Wait(k){if(!(0>k))return this._runtime.GetEventSheetManager().AddScheduledWait().InitTimer(k),!0},WaitForSignal(k){this._runtime.GetEventSheetManager().AddScheduledWait().InitSignal(k);
return!0},WaitForPreviousActions(){const k=this._runtime.GetEventSheetManager();k.AddScheduledWait().InitPromise(k.GetPromiseForAllAsyncActions());return!0},Signal(k){k=k.toLowerCase();for(const a of this._runtime.GetEventSheetManager().scheduledWaits())a.IsSignal()&&a.GetSignalTag()===k&&a.SetSignalled()},async SnapshotCanvas(k,a,b,l,p,r){const t=this._runtime.GetCanvasManager();t&&(this.UpdateRender(),await t.SnapshotCanvas(0===k?"image/png":"image/jpeg",a/100,b,l,p,r),await this._runtime.TriggerAsync(e.Plugins.System.Cnds.OnCanvasSnapshot,
null))},SetCanvasSize(k,a){if(!(0>=k||0>=a)){this._runtime.SetViewportSize(k,a);var b=this._runtime.GetCurrentLayout();b.BoundScrolling();for(const l of b.GetLayers())l.UpdateViewport();if(b=this._runtime.GetCanvasManager())"off"!==b.GetCurrentFullscreenMode()&&this._runtime.SetOriginalViewportSize(k,a),b.SetSize(b.GetLastWidth(),b.GetLastHeight(),!0),this._runtime.UpdateRender()}},SetFullscreenQuality(k){const a=this._runtime.GetCanvasManager();a&&"off"!==a.GetCurrentFullscreenMode()&&(a.SetFullscreenScalingQuality(0!==
k?"high":"low"),a.SetSize(a.GetLastWidth(),a.GetLastHeight(),!0))},SaveState(k){this._runtime.SaveToSlot(k)},LoadState(k){this._runtime.LoadFromSlot(k)},LoadStateJSON(k){this._runtime.LoadFromJsonString(k)},SetHalfFramerateMode(k){},ResetPersisted(){for(const k of this._runtime.GetLayoutManager().GetAllLayouts())k.ResetPersistData()},SetPixelRounding(k){this._runtime.SetPixelRoundingEnabled(0!==k)},SetMinimumFramerate(k){this._runtime.SetMinimumFramerate(k)},SortZOrderByInstVar(k,a){if(k){var b=k.GetCurrentSol().GetInstances(),
l=this._runtime.GetCurrentLayout(),p=k.IsFamily();k=k.GetFamilyIndex();for(let t=0,u=b.length;t<u;++t){var r=b[t];const w=r.GetWorldInfo();if(!w)continue;let x;x=p?r.GetInstanceVariableValue(a+r.GetObjectClass().GetFamilyInstanceVariableOffset(k)):r.GetInstanceVariableValue(a);f.push([w.GetLayer().GetIndex(),w.GetZIndex()]);g.push([r,x])}if(f.length){f.sort(d);g.sort(c);a=!1;for(let t=0,u=f.length;t<u;++t)b=g[t][0],p=l.GetLayerByIndex(f[t][0]),k=f[t][1],r=p._GetInstances(),r[k]!==b&&(r[k]=b,b.GetWorldInfo()._SetLayer(p),
p.SetZIndicesChanged(),a=!0);a&&this._runtime.UpdateRender();e.clearArray(f);e.clearArray(g)}}},GoToLayout(k){if(!this._runtime.IsLoading()){var a=this._runtime.GetLayoutManager();a.IsPendingChangeMainLayout()||a.ChangeMainLayout(k)}},GoToLayoutByName(k){if(!this._runtime.IsLoading()){var a=this._runtime.GetLayoutManager();a.IsPendingChangeMainLayout()||(k=a.GetLayoutByName(k))&&a.ChangeMainLayout(k)}},NextPrevLayout(k){if(!this._runtime.IsLoading()){var a=this._runtime.GetLayoutManager();if(!a.IsPendingChangeMainLayout()){var b=
a.GetAllLayouts(),l=b.indexOf(a.GetMainRunningLayout());k&&0===l||(k||l!==b.length-1)&&a.ChangeMainLayout(b[l+(k?-1:1)])}}},RestartLayout(){if(!this._runtime.IsLoading()){var k=this._runtime.GetLayoutManager();k.IsPendingChangeMainLayout()||(k.ChangeMainLayout(k.GetMainRunningLayout()),this._runtime.GetEventSheetManager().ResetAllGroupsInitialActivation())}},SetLayerVisible(k,a){k&&k.SetVisible(a)},SetLayerOpacity(k,a){k&&k.SetOpacity(a/100)},SetLayerScale(k,a){k&&k.SetOwnScale(a)},SetLayerScaleRate(k,
a){k&&k.SetScaleRate(a)},SetLayerAngle(k,a){k&&(a=e.clampAngle(e.toRadians(+a)),k.GetOwnAngle()!==a&&(k.SetAngle(a),this.UpdateRender()))},SetLayerParallax(k,a,b){k&&k.SetParallax(a/100,b/100)},SetLayerZElevation(k,a){k&&k.SetZElevation(a)},SetLayerBackground(k,a){k&&(m.setFromRgbValue(a),m.clamp(),k=k.GetBackgroundColor(),k.equalsIgnoringAlpha(m)||(k.copyRgb(m),this.UpdateRender()))},SetLayerTransparent(k,a){k&&(a=!!a,k.IsTransparent()!==a&&(k.SetTransparent(a),this.UpdateRender()))},SetLayerBlendMode(k,
a){k&&k.GetBlendMode()!==a&&(k.SetBlendMode(a),this.UpdateRender())},SetLayerEffectEnabled(k,a,b){k&&(k=k.GetEffectList(),b=k.GetEffectTypeByName(b))&&(a=1===a,b.IsActive()!==a&&(b.SetActive(a),k.UpdateActiveEffects(),this._runtime.UpdateRender()))},SetLayerEffectParam(k,a,b,l){if(k&&(k=k.GetEffectList(),a=k.GetEffectTypeByName(a))){var p=a.GetIndex();k=k.GetEffectParametersForIndex(p);b=Math.floor(b);if(!(0>b||b>=k.length)){p=a.GetShaderProgram().GetParameterType(b);if("color"===p){m.setFromRgbValue(l);
b=k[b];if(m.equalsIgnoringAlpha(b))return;b.copyRgb(m)}else{"percent"===p&&(l/=100);if(k[b]===l)return;k[b]=l}a.IsActive()&&this._runtime.UpdateRender()}}},SetLayerForceOwnTexture(k,a){k&&(a=!!a,k.IsForceOwnTexture()!==a&&(k.SetForceOwnTexture(a),this.UpdateRender()))},SetLayoutScale(k){const a=this._runtime.GetCurrentLayout();a.GetScale()!==k&&(a.SetScale(k),this.UpdateRender())},SetLayoutAngle(k){k=e.clampAngle(e.toRadians(+k));const a=this._runtime.GetCurrentLayout();a.GetAngle()!==k&&(a.SetAngle(k),
this.UpdateRender())},SetLayoutEffectEnabled(k,a){const b=this._runtime.GetCurrentLayout().GetEffectList();if(a=b.GetEffectTypeByName(a))k=1===k,a.IsActive()!==k&&(a.SetActive(k),b.UpdateActiveEffects(),this._runtime.UpdateRender())},SetLayoutEffectParam(k,a,b){var l=this._runtime.GetCurrentLayout().GetEffectList();if(k=l.GetEffectTypeByName(k)){var p=k.GetIndex();l=l.GetEffectParametersForIndex(p);a=Math.floor(a);if(!(0>a||a>=l.length)){p=k.GetShaderProgram().GetParameterType(a);if("color"===p){m.setFromRgbValue(b);
a=l[a];if(m.equalsIgnoringAlpha(a))return;a.copyRgb(m)}else{"percent"===p&&(b/=100);if(l[a]===b)return;l[a]=b}k.IsActive()&&this._runtime.UpdateRender()}}},ScrollX(k){this._runtime.GetCurrentLayout().SetScrollX(k)},ScrollY(k){this._runtime.GetCurrentLayout().SetScrollY(k)},Scroll(k,a){const b=this._runtime.GetCurrentLayout();b.SetScrollX(k);b.SetScrollY(a)},ScrollToObject(k){if(k&&(k=k.GetFirstPicked())&&(k=k.GetWorldInfo())){var a=this._runtime.GetCurrentLayout();a.SetScrollX(k.GetX());a.SetScrollY(k.GetY())}},
async LoadObjectTextures(k){const a=this._runtime.GetMainRunningLayout();a&&k&&!this._runtime.IsLoading()&&(k=k.IsFamily()?k.GetFamilyMembers():[k],await this._LoadTexturesForObjectClasses(a,k))},async LoadObjectTexturesByName(k){await e.Plugins.System.Acts.LoadObjectTextures.call(this,this._runtime.GetObjectClassByName(k))},UnloadObjectTextures(k){const a=this._runtime.GetMainRunningLayout();a&&k&&(k=k.IsFamily()?k.GetFamilyMembers():[k],this._UnloadTexturesForObjectClasses(a,k))},UnloadObjectTexturesByName(k){e.Plugins.System.Acts.UnloadObjectTexturesByName.call(this,
this._runtime.GetObjectClassByName(k))},UnloadUnusedTextures(){const k=this._runtime.GetMainRunningLayout();if(k){var a=k._GetTextureLoadedObjectTypes();this._UnloadTexturesForObjectClasses(k,a)}},async LoadLayoutTextures(k){const a=this._runtime.GetMainRunningLayout();k&&a&&!this._runtime.IsLoading()&&await this._LoadTexturesForObjectClasses(a,k._GetInitialObjectClasses())},async LoadLayoutTexturesByName(k){const a=this._runtime.GetMainRunningLayout();(k=this._runtime.GetLayoutManager().GetLayoutByName(k))&&
a&&!this._runtime.IsLoading()&&await this._LoadTexturesForObjectClasses(a,k._GetInitialObjectClasses())},SetFunctionReturnValue(k){const a=this._eventStack.GetCurrentExpFuncStackFrame();if(a)switch(a.GetFunctionReturnType()){case 1:"number"===typeof k&&a.SetFunctionReturnValue(k);break;case 2:"string"===typeof k&&a.SetFunctionReturnValue(k);break;case 3:a.SetFunctionReturnValue(k)}},MapFunction(k,a,b){var l=this._GetFunctionMap(k.toLowerCase(),!0);const p=l.strMap,r=a.toLowerCase();p.has(r)&&console.warn(`[Construct 3] Function map '${k}' string '${a}' already in map; overwriting entry`);
if(l=e.first(p.values())||l.defaultFunc){l=0!==l.GetReturnType();const t=0!==b.GetReturnType();if(l!==t){console.error(`[Construct 3] Function map '${k}' string '${a}' function return type not compatible with other functions in the map; entry ignored`);return}}p.set(r,b)},MapFunctionDefault(k,a){const b=this._GetFunctionMap(k.toLowerCase(),!0);b.defaultFunc&&console.warn(`[Construct 3] Function map '${k}' already has a default; overwriting entry`);var l=e.first(b.strMap.values())||b.defaultFunc;if(l){l=
0!==l.GetReturnType();const p=0!==a.GetReturnType();if(l!==p){console.error(`[Construct 3] Function map '${k}' default: function return type not compatible with other functions in the map; entry ignored`);return}}b.defaultFunc=a},CallMappedFunction(k,a,b){b=Math.floor(b);var l=this._GetFunctionMap(k.toLowerCase(),!1);if(l){var p=l.strMap.get(a.toLowerCase());if(!p)if(l.defaultFunc)p=l.defaultFunc,b=0;else{console.warn(`[Construct 3] Call mapped function: no function associated with map '${k}' string '${a}'; call ignored (consider setting a default)`);
return}if(p.IsEnabled())if(0!==p.GetReturnType())console.warn(`[Construct 3] Call mapped function: map '${k}' string '${a}' has a return type so cannot be called`);else{k=this._runtime;a=k.GetEventSheetManager();var r=a.GetCurrentEvent();l=r.GetSolModifiersIncludingParents();var t=0<l.length;t&&a.PushCleanSol(l);var u=[];if(r=a.FindFirstFunctionBlockParent(r)){r=r.GetFunctionParameters();for(let w=b,x=r.length;w<x;++w)u.push(r[w].GetValue())}b=p.GetFunctionParameters();for(let w=u.length,x=b.length;w<
x;++w)u.push(b[w].GetInitialValue());return k.IsDebugging()?this._DebugDoCallMappedFunction(a,p,u,t,l):this._DoCallMappedFunction(a,p,u,t,l)}}else console.warn(`[Construct 3] Call mapped function: map name '${k}' not found; call ignored`)}}}"use strict";
{const e=self.C3;e.Plugins.System.Exps={int:function(d){"string"===typeof d&&(d=parseInt(d,10),isNaN(d)&&(d=0));return Math.floor(d)},float:function(d){"string"===typeof d&&(d=parseFloat(d),isNaN(d)&&(d=0));return d},str(d){return d.toString()},len(d){return"string"===typeof d?d.length:0},random(d,c){return"undefined"===typeof c?this._runtime.Random()*d:this._runtime.Random()*(c-d)+d},choose(...d){const c=Math.floor(this._runtime.Random()*d.length);return d[c]},pi(){return Math.PI},infinity(){return Infinity},
sqrt(d){return Math.sqrt(d)},abs(d){return Math.abs(d)},round(d){return Math.round(d)},floor(d){return Math.floor(d)},ceil(d){return Math.ceil(d)},sign(d){return Math.sign(d)},sin(d){return Math.sin(e.toRadians(d))},cos(d){return Math.cos(e.toRadians(d))},tan(d){return Math.tan(e.toRadians(d))},asin(d){return e.toDegrees(Math.asin(d))},acos(d){return e.toDegrees(Math.acos(d))},atan(d){return e.toDegrees(Math.atan(d))},exp(d){return Math.exp(d)},ln(d){return Math.log(d)},log10(d){return Math.log(d)/
Math.LN10},max(...d){let c=d[0];"number"!==typeof c&&(c=0);for(let f=1,g=d.length;f<g;++f){let h=d[f];"number"===typeof h&&c<h&&(c=h)}return c},min(...d){let c=d[0];"number"!==typeof c&&(c=0);for(let f=1,g=d.length;f<g;++f){let h=d[f];"number"===typeof h&&c>h&&(c=h)}return c},clamp(d,c,f){return e.clamp(d,c,f)},distance(d,c,f,g){return e.distanceTo(d,c,f,g)},angle(d,c,f,g){return e.toDegrees(e.angleTo(d,c,f,g))},lerp(d,c,f){return e.lerp(d,c,f)},unlerp(d,c,f){return e.unlerp(d,c,f)},qarp(d,c,f,g){return e.qarp(d,
c,f,g)},cubic(d,c,f,g,h){return e.cubic(d,c,f,g,h)},cosp(d,c,f){return e.cosp(d,c,f)},anglediff(d,c){return e.toDegrees(e.angleDiff(e.toRadians(d),e.toRadians(c)))},anglelerp(d,c,f){return e.toDegrees(e.angleLerp(e.toRadians(d),e.toRadians(c),f))},anglerotate(d,c,f){return e.toDegrees(e.angleRotate(e.toRadians(d),e.toRadians(c),e.toRadians(f)))},setbit(d,c,f){c|=0;return(d|0)&~(1<<c)|(0!==f?1:0)<<c},togglebit(d,c){return(d|0)^1<<(c|0)},getbit(d,c){return(d|0)&1<<(c|0)?1:0},newline(){return"\n"},uppercase(d){return"string"===
typeof d?d.toUpperCase():""},lowercase(d){return"string"===typeof d?d.toLowerCase():""},left(d,c){return"string"===typeof d?d.substr(0,c):""},mid(d,c,f){return"string"!==typeof d?"":0>f?d.substr(c):d.substr(c,f)},right(d,c){return"string"===typeof d?d.substr(d.length-c):""},trim(d){return"string"===typeof d?d.trim():""},tokenat(d,c,f){if("string"!==typeof d||"string"!==typeof f)return"";d=d.split(f);c=Math.floor(c);return 0>c||c>=d.length?"":d[c]},tokencount(d,c){return"string"===typeof d&&"string"===
typeof c&&d.length?d.split(c).length:0},find(d,c){return"string"===typeof d&&"string"===typeof c?d.search(new RegExp(e.EscapeRegex(c),"i")):-1},findcase(d,c){return"string"===typeof d&&"string"===typeof c?d.search(new RegExp(e.EscapeRegex(c),"")):-1},replace(d,c,f){return"string"===typeof d&&"string"===typeof c&&"string"===typeof f?d.replace(new RegExp(e.EscapeRegex(c),"gi"),f):"string"===typeof d?d:""},regexsearch(d,c,f){c=this.GetRegex(c,f);return d?d.search(c):-1},regexreplace(d,c,f,g){c=this.GetRegex(c,
f);return d?d.replace(c,g):""},regexmatchcount(d,c,f){return(d=this.GetRegexMatches(d.toString(),c,f))?d.length:0},regexmatchat(d,c,f,g){g=Math.floor(g);d=this.GetRegexMatches(d.toString(),c,f);return!d||0>g||g>=d.length?"":d[g]},zeropad(d,c){let f=0>d?"-":"";0>d&&(d=-d);f+="0".repeat(Math.max(c-d.toString().length,0));return f+d.toString()},urlencode(d){return encodeURIComponent(d)},urldecode(d){return decodeURIComponent(d)},dt(){return this._runtime._GetDtFast()},timescale(){return this._runtime.GetTimeScale()},
wallclocktime(){return(Date.now()-this._runtime.GetStartTime())/1E3},unixtime(){return Date.now()},time(){return this._runtime.GetGameTime()},tickcount(){return this._runtime.GetTickCount()},objectcount(){return this._runtime.GetObjectCount()},fps(){return this._runtime.GetFPS()},cpuutilisation(){return this._runtime.GetMainThreadTime()},gpuutilisation(){return this._runtime.GetGPUUtilisation()},windowwidth(){return this._runtime.GetCanvasManager().GetDeviceWidth()},windowheight(){return this._runtime.GetCanvasManager().GetDeviceHeight()},
originalwindowwidth(){return this._runtime.GetOriginalViewportWidth()},originalwindowheight(){return this._runtime.GetOriginalViewportHeight()},originalviewportwidth(){return this._runtime.GetOriginalViewportWidth()},originalviewportheight(){return this._runtime.GetOriginalViewportHeight()},scrollx(){return this._runtime.GetCurrentLayout().GetScrollX()},scrolly(){return this._runtime.GetCurrentLayout().GetScrollY()},layoutname(){return this._runtime.GetCurrentLayout().GetName()},layoutscale(){return this._runtime.GetCurrentLayout().GetScale()},
layoutangle(){return e.toDegrees(this._runtime.GetCurrentLayout().GetAngle())},layoutwidth(){return this._runtime.GetCurrentLayout().GetWidth()},layoutheight(){return this._runtime.GetCurrentLayout().GetHeight()},viewportleft(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetViewport().getLeft():0},viewporttop(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetViewport().getTop():0},viewportright(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetViewport().getRight():
0},viewportbottom(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetViewport().getBottom():0},viewportwidth(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetViewport().width():0},viewportheight(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetViewport().height():0},canvastolayerx(d,c,f){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.CanvasCssToLayer(c,f)[0]:0},canvastolayery(d,c,f){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.CanvasCssToLayer(c,
f)[1]:0},layertocanvasx(d,c,f){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.LayerToCanvasCss(c,f)[0]:0},layertocanvasy(d,c,f){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.LayerToCanvasCss(c,f)[1]:0},layerscale(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetOwnScale():0},layerangle(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?e.toDegrees(d.GetOwnAngle()):0},layeropacity(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?100*d.GetOpacity():
0},layerscalerate(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetScaleRate():0},layerparallaxx(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?100*d.GetParallaxX():0},layerparallaxy(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?100*d.GetParallaxY():0},layerzelevation(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetZElevation():0},layerindex(d){return(d=this._runtime.GetCurrentLayout().GetLayer(d))?d.GetIndex():-1},canvassnapshot(){const d=this._runtime.GetCanvasManager();
return d?d.GetCanvasSnapshotUrl():""},loopindex(d){const c=this._loopStack;return c.IsInLoop()?d?(d=c.FindByName(d))?d.GetIndex():0:c.GetCurrent().GetIndex():0},savestatejson(){return this._runtime.GetLastSaveJsonString()},callmapped(d,c,...f){var g=this._GetFunctionMap(d.toLowerCase(),!1);if(!g)return console.warn(`[Construct 3] Call mapped function: map name '${d}' not found; returning 0`),0;var h=g.strMap.get(c.toLowerCase());if(!h)if(g.defaultFunc)h=g.defaultFunc;else return console.warn(`[Construct 3] Call mapped function: no function associated with map '${d}' string '${c}'; returning 0 (consider setting a default)`),
0;g=h.GetReturnType();const m=h.GetDefaultReturnValue();if(0===g)return console.warn(`[Construct 3] Call mapped function: map '${d}' string '${c}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.IsEnabled())return m;d=this._runtime.GetEventSheetManager();c=d.GetCurrentEvent().GetSolModifiersIncludingParents();const k=0<c.length;k&&d.PushCleanSol(c);const a=h.GetFunctionParameters();for(let b=f.length,l=a.length;b<l;++b)f.push(a[b].GetInitialValue());h=h.GetEventBlock();
f=h.RunAsExpressionFunctionCall(h.GetSolModifiersIncludingParents(),g,m,...f);k&&d.PopSol(c);return f},loadingprogress(){return this._runtime.GetAssetManager().GetLoadProgress()},imageloadingprogress(){return 0===this._imagesLoadingTotal?1:this._imagesLoadingComplete/this._imagesLoadingTotal},renderer(){return"webgl"},rendererdetail(){return this._runtime.GetWebGLRenderer().GetUnmaskedRenderer()},imagememoryusage(){let d=this._runtime.GetWebGLRenderer().GetEstimatedTextureMemoryUsage();return Math.round(100*
d/1048576)/100},rgb(d,c,f){return e.PackRGB(d,c,f)},rgbex(d,c,f){return e.PackRGBEx(d/100,c/100,f/100)},rgba(d,c,f,g){return e.PackRGBAEx(d/100,c/100,f/100,g/100)},rgbex255(d,c,f){return e.PackRGBEx(d/255,c/255,f/255)},rgba255(d,c,f,g){return e.PackRGBAEx(d/255,c/255,f/255,g/255)},projectname(){return this._runtime.GetProjectName()},projectversion(){return this._runtime.GetProjectVersion()},currenteventsheetname(){return this._runtime.GetCurrentEvent().GetEventSheet().GetName()},currenteventnumber(){return this._runtime.GetCurrentEvent().GetDisplayNumber()}}}"use strict";
{const e=self.C3;e.Plugins.Arr=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.Arr.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=self.IInstance;function c(g,h,m){if(h<g.length)e.truncateArray(g,h);else if(h>g.length)if("function"===typeof m)for(var k=g.length;k<h;++k)g.push(m());else for(k=g.length;k<h;++k)g.push(m)}e.Plugins.Arr.Instance=class extends e.SDKInstanceBase{constructor(g,h){super(g);this._cx=10;this._cz=this._cy=1;this._arr=null;this._forX=[];this._forY=[];this._forZ=[];this._forDepth=-1;h&&(this._cx=h[0],this._cy=h[1],this._cz=h[2]);this._arr=e.MakeFilledArray(this._cx,()=>e.MakeFilledArray(this._cy,
()=>e.MakeFilledArray(this._cz,0)))}Release(){this._arr=null;super.Release()}At(g,h,m){g=Math.floor(g);h=Math.floor(h);m=Math.floor(m);return 0<=g&&g<this._cx&&0<=h&&h<this._cy&&0<=m&&m<this._cz?this._arr[g][h][m]:0}Set(g,h,m,k){g=Math.floor(g);h=Math.floor(h);m=Math.floor(m);0<=g&&g<this._cx&&0<=h&&h<this._cy&&0<=m&&m<this._cz&&(this._arr[g][h][m]=k)}SetSize(g,h,m){g=Math.floor(g);h=Math.floor(h);m=Math.floor(m);0>g&&(g=0);0>h&&(h=0);0>m&&(m=0);if(this._cx!==g||this._cy!==h||this._cz!==m){this._cx=
g;this._cy=h;this._cz=m;var k=this._arr;c(k,g,()=>e.MakeFilledArray(h,()=>e.MakeFilledArray(m,0)));for(let a=0;a<g;++a){c(k[a],h,()=>e.MakeFilledArray(m,0));for(let b=0;b<h;++b)c(k[a][b],m,0)}}}GetWidth(){return this._cx}GetHeight(){return this._cy}GetDepth(){return this._cz}GetDebuggerProperties(){const g=[{title:"plugins.arr.debugger.array-properties.title",properties:[{name:"plugins.arr.properties.width.name",value:this._cx,onedit:m=>this.SetSize(m,this._cy,this._cz)},{name:"plugins.arr.properties.height.name",
value:this._cy,onedit:m=>this.SetSize(this._cx,m,this._cz)},{name:"plugins.arr.properties.depth.name",value:this._cz,onedit:m=>this.SetSize(this._cx,this._cy,m)},{name:"plugins.arr.properties.elements.name",value:this._cx*this._cy*this._cz}]}],h=[];if(1===this._cy&&1===this._cz)for(let m=0;m<this._cx;++m)h.push({name:"$"+m,value:this._arr[m][0][0],onedit:k=>this._arr[m][0][0]=k});else for(let m=0;m<this._cx;++m)h.push({name:"$"+m,value:this._arr[m].toString()});h.length&&g.push({title:"plugins.arr.debugger.array-data.title",
properties:h});return g}GetAsJsonString(){return JSON.stringify({c2array:!0,size:[this._cx,this._cy,this._cz],data:this._arr})}SaveToJson(){return{size:[this._cx,this._cy,this._cz],data:this._arr}}LoadFromJson(g){const h=g.size;this._cx=h[0];this._cy=h[1];this._cz=h[2];this._arr=g.data}_GetForX(){return 0<=this._forDepth&&this._forDepth<this._forX.length?this._forX[this._forDepth]:0}_GetForY(){return 0<=this._forDepth&&this._forDepth<this._forY.length?this._forY[this._forDepth]:0}_GetForZ(){return 0<=
this._forDepth&&this._forDepth<this._forZ.length?this._forZ[this._forDepth]:0}GetScriptInterfaceClass(){return self.IArrayInstance}};const f=new WeakMap;self.IArrayInstance=class extends d{constructor(){super();f.set(this,d._GetInitInst().GetSdkInstance())}get width(){return f.get(this).GetWidth()}get height(){return f.get(this).GetHeight()}get depth(){return f.get(this).GetDepth()}setSize(g,h=1,m=1){f.get(this).SetSize(g,h,m)}getAt(g,h=0,m=0){return f.get(this).At(g,h,m)}setAt(g,h,m=0,k=0){if("number"!==
typeof g&&"string"!==typeof g)throw new TypeError("invalid type");f.get(this).Set(h,m,k,g)}}}"use strict";
{const e=self.C3;function d(c,f,g,h,m){c.PushCopySol(g);f.Retrigger(h,m);c.PopSol(g)}e.Plugins.Arr.Cnds={CompareX(c,f,g){return e.compare(this.At(c,0,0),f,g)},CompareXY(c,f,g,h){return e.compare(this.At(c,f,0),g,h)},CompareXYZ(c,f,g,h,m){return e.compare(this.At(c,f,g),h,m)},ArrForEach(c){const f=this._runtime,g=f.GetEventSheetManager(),h=f.GetCurrentEvent(),m=h.GetSolModifiers(),k=f.GetEventStack(),a=k.GetCurrentStackFrame(),b=k.Push(h),l=++this._forDepth,p=this._forX;var r=this._forY,t=this._forZ;
const u=this._cx,w=this._cy;var x=this._cz;l===this._forX.length?(p.push(0),r.push(0),t.push(0)):(p[l]=0,r[l]=0,t[l]=0);f.SetDebuggingEnabled(!1);if(0===c)for(c=0;c<u;++c)for(let A=0;A<w;++A)for(let E=0;E<x;++E)p[l]=c,r[l]=A,t[l]=E,d(g,h,m,a,b);else if(1===c)for(t=0;t<u;++t)for(x=0;x<w;++x)p[l]=t,r[l]=x,d(g,h,m,a,b);else for(r=0;r<u;++r)p[l]=r,d(g,h,m,a,b);f.SetDebuggingEnabled(!0);this._forDepth--;k.Pop();return!1},CompareCurrent(c,f){return e.compare(this.At(this._GetForX(),this._GetForY(),this._GetForZ()),
c,f)},Contains(c){const f=this._cx,g=this._cy,h=this._cz,m=this._arr;for(let k=0;k<f;++k)for(let a=0;a<g;++a)for(let b=0;b<h;++b)if(m[k][a][b]===c)return!0;return!1},IsEmpty(){return 0===this._cx||0===this._cy||0===this._cz},CompareSize(c,f,g){let h=0;switch(c){case 0:h=this._cx;break;case 1:h=this._cy;break;case 2:h=this._cz}return e.compare(h,f,g)}}}"use strict";
{const e=self.C3;function d(c,f){if("number"===typeof c&&"number"===typeof f)return c-f;c=c.toString();f=f.toString();return c<f?-1:c>f?1:0}e.Plugins.Arr.Acts={Clear(c){const f=this._cx,g=this._cy,h=this._cz,m=this._arr;for(let k=0;k<f;++k)for(let a=0;a<g;++a)for(let b=0;b<h;++b)m[k][a][b]=c},SetSize(c,f,g){this.SetSize(c,f,g)},SetX(c,f){this.Set(c,0,0,f)},SetXY(c,f,g){this.Set(c,f,0,g)},SetXYZ(c,f,g,h){this.Set(c,f,g,h)},Push(c,f,g){var h=this._cx,m=this._cy;const k=this._cz,a=this._arr;if(0===g)h=
e.MakeFilledArray(m,()=>e.MakeFilledArray(k,f)),0===c?a.push(h):a.unshift(h),this._cx++;else if(1===g){for(m=0;m<h;++m)g=e.MakeFilledArray(k,f),0===c?a[m].push(g):a[m].unshift(g);this._cy++}else{for(g=0;g<h;++g)for(let b=0;b<m;++b)0===c?a[g][b].push(f):a[g][b].unshift(f);this._cz++}},Pop(c,f){const g=this._cx;var h=this._cy,m=this._cz;const k=this._arr;if(0===f)0!==g&&(0===c?k.pop():k.shift(),this._cx--);else if(1===f){if(0!==h){for(h=0;h<g;++h)0===c?k[h].pop():k[h].shift();this._cy--}}else if(0!==
m){for(f=0;f<g;++f)for(m=0;m<h;++m)0===c?k[f][m].pop():k[f][m].shift();this._cz--}},Reverse(c){const f=this._cx;var g=this._cy,h=this._cz;const m=this._arr;if(0!==f&&0!==g&&0!==h)if(0===c)m.reverse();else if(1===c)for(g=0;g<f;++g)m[g].reverse();else for(c=0;c<f;++c)for(h=0;h<g;++h)m[c][h].reverse()},Sort(c){const f=this._cx;var g=this._cy,h=this._cz;const m=this._arr;if(0!==f&&0!==g&&0!==h)if(0===c)m.sort((k,a)=>d(k[0][0],a[0][0]));else if(1===c)for(g=0;g<f;++g)m[g].sort((k,a)=>d(k[0],a[0]));else for(c=
0;c<f;++c)for(h=0;h<g;++h)m[c][h].sort(d)},Delete(c,f){c=Math.floor(c);if(!(0>c)){var g=this._cx,h=this._cy,m=this._cz,k=this._arr;if(0===f)c>=g||(k.splice(c,1),this._cx--);else if(1===f){if(!(c>=h)){for(h=0;h<g;++h)k[h].splice(c,1);this._cy--}}else if(!(c>=m)){for(f=0;f<g;++f)for(m=0;m<h;++m)k[f][m].splice(c,1);this._cz--}}},Insert(c,f,g){f=Math.floor(f);if(!(0>f)){var h=this._cx,m=this._cy,k=this._cz,a=this._arr;if(0===g)f>h||(a.splice(f,0,e.MakeFilledArray(m,()=>e.MakeFilledArray(k,c))),this._cx++);
else if(1===g){if(!(f>m)){for(m=0;m<h;++m)a[m].splice(f,0,e.MakeFilledArray(k,c));this._cy++}}else if(!(f>k)){for(g=0;g<h;++g)for(let b=0;b<m;++b)a[g][b].splice(f,0,c);this._cz++}}},JSONLoad(c){let f=null;try{f=JSON.parse(c)}catch(g){console.error("[Construct 3] Failed to parse JSON: ",g);return}f.c2array&&(c=f.size,this._cx=c[0],this._cy=c[1],this._cz=c[2],this._arr=f.data)},JSONDownload(c){const f=URL.createObjectURL(new Blob([this.GetAsJsonString()],{type:"application/json"}));this._runtime.InvokeDownload(f,
c)}}}"use strict";
self.C3.Plugins.Arr.Exps={At(e,d,c){return this.At(e,d||0,c||0)},Width(){return this._cx},Height(){return this._cy},Depth(){return this._cz},CurX(){return this._GetForX()},CurY(){return this._GetForY()},CurZ(){return this._GetForZ()},CurValue(){return this.At(this._GetForX(),this._GetForY(),this._GetForZ())},Front(){return this.At(0,0,0)},Back(){return this.At(this._cx-1,0,0)},IndexOf(e){const d=this._arr;for(let c=0,f=this._cx;c<f;++c)if(d[c][0][0]===e)return c;return-1},LastIndexOf(e){const d=this._arr;
for(let c=this._cx-1;0<=c;--c)if(d[c][0][0]===e)return c;return-1},AsJSON(){return this.GetAsJsonString()}};"use strict";{const e=self.C3;e.Plugins.Mouse=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.Mouse.Type=class extends e.SDKTypeBase{constructor(f){super(f)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IMouseObjectType}};let d=null;function c(){return d.GetSingleGlobalInstance().GetSdkInstance()}self.IMouseObjectType=class extends self.IObjectClass{constructor(f){super(f);d=f;f.GetRuntime()._GetCommonScriptInterfaces().mouse=this}getMouseX(f){return c().GetMousePositionForLayer(f)[0]}getMouseY(f){return c().GetMousePositionForLayer(f)[1]}getMousePosition(f){return c().GetMousePositionForLayer(f)}isMouseButtonDown(f){return c().IsMouseButtonDown(f)}}}"use strict";
{const e=self.C3;e.Plugins.Mouse.Instance=class extends e.SDKInstanceBase{constructor(d,c){super(d,"mouse");this._buttonMap=[!1,!1,!1];this._triggerDir=this._triggerType=this._triggerButton=this._mouseYcanvas=this._mouseXcanvas=0;d=this.GetRuntime().Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(d,"pointermove",f=>this._OnPointerMove(f.data)),e.Disposable.From(d,"pointerdown",f=>this._OnPointerDown(f.data)),e.Disposable.From(d,"pointerup",f=>this._OnPointerUp(f.data)),
e.Disposable.From(d,"dblclick",f=>this._OnDoubleClick(f.data)),e.Disposable.From(d,"wheel",f=>this._OnMouseWheel(f.data)),e.Disposable.From(d,"window-blur",()=>this._OnWindowBlur()))}Release(){super.Release()}_OnPointerDown(d){"mouse"===d.pointerType&&(this._mouseXcanvas=d.pageX-this._runtime.GetCanvasClientX(),this._mouseYcanvas=d.pageY-this._runtime.GetCanvasClientY(),this._CheckButtonChanges(d.lastButtons,d.buttons))}_OnPointerMove(d){"mouse"===d.pointerType&&(this._mouseXcanvas=d.pageX-this._runtime.GetCanvasClientX(),
this._mouseYcanvas=d.pageY-this._runtime.GetCanvasClientY(),this._CheckButtonChanges(d.lastButtons,d.buttons))}_OnPointerUp(d){"mouse"===d.pointerType&&this._CheckButtonChanges(d.lastButtons,d.buttons)}_CheckButtonChanges(d,c){this._CheckButtonChange(d,c,1,0);this._CheckButtonChange(d,c,4,1);this._CheckButtonChange(d,c,2,2)}_CheckButtonChange(d,c,f,g){!(d&f)&&c&f?this._OnMouseDown(g):d&f&&!(c&f)&&this._OnMouseUp(g)}_OnMouseDown(d){this._buttonMap[d]=!0;this.Trigger(e.Plugins.Mouse.Cnds.OnAnyClick);
this._triggerButton=d;this._triggerType=0;this.Trigger(e.Plugins.Mouse.Cnds.OnClick);this.Trigger(e.Plugins.Mouse.Cnds.OnObjectClicked)}_OnMouseUp(d){this._buttonMap[d]&&(this._buttonMap[d]=!1,this._triggerButton=d,this.Trigger(e.Plugins.Mouse.Cnds.OnRelease))}_OnDoubleClick(d){this._triggerButton=d.button;this._triggerType=1;this.Trigger(e.Plugins.Mouse.Cnds.OnClick);this.Trigger(e.Plugins.Mouse.Cnds.OnObjectClicked)}_OnMouseWheel(d){this._triggerDir=0>d.deltaY?1:0;this.Trigger(e.Plugins.Mouse.Cnds.OnWheel)}_OnWindowBlur(){for(let d=
0,c=this._buttonMap.length;d<c&&this._buttonMap[d];++d)this._buttonMap[d]=!1,this._triggerButton=d,this.Trigger(e.Plugins.Mouse.Cnds.OnRelease)}GetMousePositionForLayer(d){const c=this._runtime.GetMainRunningLayout(),f=this._mouseXcanvas,g=this._mouseYcanvas;return"undefined"===typeof d?c.GetLayerByIndex(0).CanvasCssToLayer_DefaultTransform(f,g):(d=c.GetLayer(d))?d.CanvasCssToLayer(f,g):[0,0]}IsMouseButtonDown(d){d=Math.floor(d);return!!this._buttonMap[d]}_IsMouseOverCanvas(){return 0<=this._mouseXcanvas&&
0<=this._mouseYcanvas&&this._mouseXcanvas<this._runtime.GetCanvasCssWidth()&&this._mouseYcanvas<this._runtime.GetCanvasCssHeight()}GetDebuggerProperties(){return[{title:"plugins.mouse.name",properties:[{name:"plugins.mouse.debugger.absolute-position",value:this._mouseXcanvas+","+this._mouseYcanvas},{name:"plugins.mouse.debugger.left-button",value:this._buttonMap[0]},{name:"plugins.mouse.debugger.middle-button",value:this._buttonMap[1]},{name:"plugins.mouse.debugger.right-button",value:this._buttonMap[2]}]},
{title:"plugins.mouse.debugger.position-on-each-layer",properties:this._runtime.GetMainRunningLayout().GetLayers().map(d=>({name:"$"+d.GetName(),value:d.CanvasCssToLayer(this._mouseXcanvas,this._mouseYcanvas).join(", ")}))}]}}}"use strict";
{const e=self.C3;e.Plugins.Mouse.Cnds={OnClick(d,c){return this._triggerButton===d&&this._triggerType===c},OnAnyClick(){return!0},IsButtonDown(d){return this._buttonMap[d]},OnRelease(d){return this._triggerButton===d},IsOverObject(d){if(!this._IsMouseOverCanvas())return!1;const c=this._runtime.GetCurrentCondition().IsInverted(),f=this._mouseXcanvas,g=this._mouseYcanvas;return e.xor(this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(d,f,g,c),c)},OnObjectClicked(d,c,f){if(d!==this._triggerButton||
c!==this._triggerType||!this._IsMouseOverCanvas())return!1;d=this._mouseXcanvas;c=this._mouseYcanvas;return this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(f,d,c,!1)},OnWheel(d){return this._triggerDir===d}}}"use strict";
{const e=self.C3;let d=null;const c="auto pointer text crosshair move help wait none".split(" ");e.Plugins.Mouse.Acts={SetCursor(f){f=c[f];d!==f&&(d=f,this.PostToDOM("cursor",f))},SetCursorSprite(f){if(!e.Platform.IsMobile&&f&&(f=f.GetFirstPicked())){var g=f.GetWorldInfo(),h=f.GetCurrentImageInfo();g&&h&&d!==h&&(d=h,h.ExtractImageToCanvas().then(m=>e.CanvasToBlob(m)).then(m=>{m=`url(${URL.createObjectURL(m)}) ${Math.round(g.GetOriginX()*h.GetWidth())} ${Math.round(g.GetOriginY()*h.GetHeight())}, auto`;
this.PostToDOM("cursor","");this.PostToDOM("cursor",m)}))}}}}"use strict";self.C3.Plugins.Mouse.Exps={X(e){return this.GetMousePositionForLayer(e)[0]},Y(e){return this.GetMousePositionForLayer(e)[1]},AbsoluteX(){return this._mouseXcanvas},AbsoluteY(){return this._mouseYcanvas}};"use strict";{const e=self.C3;e.Plugins.Keyboard=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.Keyboard.Type=class extends e.SDKTypeBase{constructor(f){super(f)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IKeyboardObjectType}};let d=null;function c(){return d.GetSingleGlobalInstance().GetSdkInstance()}self.IKeyboardObjectType=class extends self.IObjectClass{constructor(f){super(f);d=f;f.GetRuntime()._GetCommonScriptInterfaces().keyboard=this}isKeyDown(f){const g=c();if("string"===typeof f)return g.IsKeyDown(f);if("number"===typeof f)return g.IsKeyCodeDown(f);
throw new TypeError("expected string or number");}}}"use strict";
{const e=self.C3;e.Plugins.Keyboard.Instance=class extends e.SDKInstanceBase{constructor(d,c){super(d);this._keysDownByString=new Set;this._keysDownByWhich=new Set;this._triggerWhich=0;this._triggerTypedKey=this._triggerString="";d=this.GetRuntime().Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(d,"keydown",f=>this._OnKeyDown(f.data)),e.Disposable.From(d,"keyup",f=>this._OnKeyUp(f.data)),e.Disposable.From(d,"window-blur",()=>this._OnWindowBlur()))}Release(){super.Release()}_OnKeyDown(d){const c=
d.which,f=d.code||c.toString();d=d.key;this._keysDownByString.has(f)||(this._keysDownByString.add(f),this._keysDownByWhich.add(c),this._triggerString=f,this._triggerWhich=c,this._triggerTypedKey=d,this.Trigger(e.Plugins.Keyboard.Cnds.OnAnyKey),this.Trigger(e.Plugins.Keyboard.Cnds.OnKey),this.Trigger(e.Plugins.Keyboard.Cnds.OnLeftRightKeyPressed),this.Trigger(e.Plugins.Keyboard.Cnds.OnKeyCode))}_OnKeyUp(d){const c=d.which,f=d.code||c.toString();d=d.key;this._keysDownByString.delete(f);this._keysDownByWhich.delete(c);
this._triggerString=f;this._triggerWhich=c;this._triggerTypedKey=d;this.Trigger(e.Plugins.Keyboard.Cnds.OnAnyKeyReleased);this.Trigger(e.Plugins.Keyboard.Cnds.OnKeyReleased);this.Trigger(e.Plugins.Keyboard.Cnds.OnLeftRightKeyReleased);this.Trigger(e.Plugins.Keyboard.Cnds.OnKeyCodeReleased)}_OnWindowBlur(){for(const d of this._keysDownByWhich)this._keysDownByWhich.delete(d),this._triggerWhich=d,this.Trigger(e.Plugins.Keyboard.Cnds.OnAnyKeyReleased),this.Trigger(e.Plugins.Keyboard.Cnds.OnKeyReleased),
this.Trigger(e.Plugins.Keyboard.Cnds.OnKeyCodeReleased);this._keysDownByString.clear()}IsKeyDown(d){return this._keysDownByString.has(d)}IsKeyCodeDown(d){return this._keysDownByWhich.has(d)}SaveToJson(){return{tk:this._triggerWhich,tkk:this._triggerTypedKey}}LoadFromJson(d){this._triggerWhich=d.tk;d.hasOwnProperty("tkk")&&(this._triggerTypedKey=d.tkk)}GetDebuggerProperties(){return[{title:"plugins.keyboard.name",properties:[{name:"plugins.keyboard.debugger.last-key-code",value:this._triggerWhich},
{name:"plugins.keyboard.debugger.last-key-string",value:e.Plugins.Keyboard.Exps.StringFromKeyCode(this._triggerWhich)},{name:"plugins.keyboard.debugger.last-typed-key",value:this._triggerTypedKey}]}]}}}"use strict";
{const e="ShiftLeft ShiftRight ControlLeft ControlRight AltLeft AltRight MetaLeft MetaRight".split(" ");self.C3.Plugins.Keyboard.Cnds={IsKeyDown(d){return this._keysDownByWhich.has(d)},OnKey(d){return this._triggerWhich===d},OnAnyKey(){return!0},OnAnyKeyReleased(){return!0},OnKeyReleased(d){return this._triggerWhich===d},IsKeyCodeDown(d){d=Math.floor(d);return this._keysDownByWhich.has(d)},OnKeyCode(d){return this._triggerWhich===d},OnKeyCodeReleased(d){return this._triggerWhich===d},OnLeftRightKeyPressed(d){return this._triggerString===
e[d]},OnLeftRightKeyReleased(d){return this._triggerString===e[d]},IsLeftRightKeyDown(d){return this._keysDownByString.has(e[d])}}}"use strict";self.C3.Plugins.Keyboard.Acts={};"use strict";
{function e(d){d=Math.floor(d);switch(d){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"\u2190";case 38:return"\u2191";case 39:return"\u2192";case 40:return"\u2193";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";
case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";
case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(d)}}self.C3.Plugins.Keyboard.Exps={LastKeyCode(){return this._triggerWhich},
StringFromKeyCode(d){return e(d)},TypedKey(){return this._triggerTypedKey}}}"use strict";{const e=self.C3;e.Plugins.LocalStorage=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.LocalStorage.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Plugins.LocalStorage.Instance=class extends e.SDKInstanceBase{constructor(d,c){super(d);this._lastValue=this._currentKey="";this._keyNamesList=[];this._errorMessage="";this._pendingSets=this._pendingGets=0;this._storage=this._runtime._GetProjectStorage();this._debugCache=new Map;this._isLoadingDebugCache=!1}Release(){super.Release()}async _TriggerStorageError(d){this._errorMessage=this._GetErrorString(d);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnError)}_GetErrorString(d){return d?
"string"===typeof d?d:"string"===typeof d.message?d.message:"string"===typeof d.name?d.name:"string"===typeof d.data?d.data:"unknown error":"unknown error"}GetDebuggerProperties(){this._isLoadingDebugCache||this._DebugCacheStorage();return[{title:"plugins.localstorage.name",properties:[...this._debugCache.entries()].map(d=>({name:"$"+d[0],value:d[1],onedit:c=>this._storage.setItem(d[0],c)}))}]}async _DebugCacheStorage(){this._isLoadingDebugCache=!0;try{const d=await this._storage.keys();d.sort((f,
g)=>{f=f.toLowerCase();g=g.toLowerCase();return f<g?-1:g<f?1:0});const c=await Promise.all(d.map(f=>this._storage.getItem(f)));this._debugCache.clear();for(let f=0,g=d.length;f<g;++f)this._debugCache.set(d[f],c[f])}catch(d){console.warn("[C3 debugger] Error displaying local storage: ",d)}finally{this._isLoadingDebugCache=!1}}}}"use strict";
{const e=self.C3;e.Plugins.LocalStorage.Cnds={OnItemSet(d){return this._currentKey===d},OnAnyItemSet(){return!0},OnItemGet(d){return this._currentKey===d},OnAnyItemGet(){return!0},OnItemRemoved(d){return this._currentKey===d},OnAnyItemRemoved(){return!0},OnCleared(){return!0},OnAllKeyNamesLoaded(){return!0},OnError(){return!0},OnItemExists(d){return this._currentKey===d},OnItemMissing(d){return this._currentKey===d},CompareKey(d,c){return e.compare(this._currentKey,d,c)},CompareValue(d,c){return e.compare(this._lastValue,
d,c)},IsProcessingSets(){return 0<this._pendingSets},IsProcessingGets(){return 0<this._pendingGets},OnAllSetsComplete(){return!0},OnAllGetsComplete(){return!0}}}"use strict";
{const e=self.C3;function d(c){return"string"===typeof c||"number"===typeof c}e.Plugins.LocalStorage.Acts={async SetItem(c,f){this._pendingSets++;try{const g=await this._storage.setItem(c,f);await this.ScheduleTriggers(async()=>{this._currentKey=c;this._lastValue=g;await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAnyItemSet);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnItemSet)})}catch(g){await this._TriggerStorageError(g)}finally{this._pendingSets--,0===this._pendingSets&&await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAllSetsComplete)}},
async SetBinaryItem(c,f){if(f&&(f=f.GetFirstPicked(this._inst))&&(f=f.GetSdkInstance())){f=f.GetArrayBufferReadOnly();this._pendingSets++;try{await this._storage.setItem(c,f),await this.ScheduleTriggers(async()=>{this._currentKey=c;this._lastValue="";await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAnyItemSet);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnItemSet)})}catch(g){await this._TriggerStorageError(g)}finally{this._pendingSets--,0===this._pendingSets&&await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAllSetsComplete)}}},
async GetItem(c){this._pendingGets++;try{const f=await this._storage.getItem(c);await this.ScheduleTriggers(async()=>{this._currentKey=c;this._lastValue=d(f)?f:"";await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAnyItemGet);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnItemGet)})}catch(f){await this._TriggerStorageError(f)}finally{this._pendingGets--,0===this._pendingGets&&await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAllGetsComplete)}},async GetBinaryItem(c,f){if(f&&(f=f.GetFirstPicked(this._inst))){var g=
f.GetSdkInstance();this._pendingGets++;try{let h=await this._storage.getItem(c);h=h instanceof ArrayBuffer?h:new ArrayBuffer(0);await this.ScheduleTriggers(async()=>{this._lastValue="";this._currentKey=c;g.SetArrayBufferTransfer(h);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAnyItemGet);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnItemGet)})}catch(h){await this._TriggerStorageError(h)}finally{this._pendingGets--,0===this._pendingGets&&await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAllGetsComplete)}}},
async CheckItemExists(c){try{const f=await this._storage.getItem(c);await this.ScheduleTriggers(async()=>{this._currentKey=c;"undefined"===typeof f||null===f?(this._lastValue="",await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnItemMissing)):(this._lastValue=d(f)?f:"",await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnItemExists))})}catch(f){await this._TriggerStorageError(f)}},async RemoveItem(c){try{await this._storage.removeItem(c),await this.ScheduleTriggers(async()=>{this._currentKey=
c;this._lastValue="";await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAnyItemRemoved);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnItemRemoved)})}catch(f){await this._TriggerStorageError(f)}},async ClearStorage(){try{await this._storage.clear(),await this.ScheduleTriggers(async()=>{this._lastValue=this._currentKey="";e.clearArray(this._keyNamesList);await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnCleared)})}catch(c){await this._TriggerStorageError(c)}},async GetAllKeyNames(){try{const c=
await this._storage.keys();await this.ScheduleTriggers(async()=>{this._keyNamesList=c;await this.TriggerAsync(e.Plugins.LocalStorage.Cnds.OnAllKeyNamesLoaded)})}catch(c){await this._TriggerStorageError(c)}}}}"use strict";self.C3.Plugins.LocalStorage.Exps={ItemValue(){return this._lastValue},Key(){return this._currentKey},KeyCount(){return this._keyNamesList.length},KeyAt(e){e=Math.floor(e);return 0>e||e>=this._keyNamesList.length?"":this._keyNamesList[e]},ErrorMessage(){return this._errorMessage}};
"use strict";{const e=self.C3;e.Plugins.Function=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.Function.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;class d{constructor(){this.name="";this.retVal=0;this.params=[]}}e.Plugins.Function.Instance=class extends e.SDKInstanceBase{constructor(c,f){super(c);this._isPreview=this._runtime.IsPreview();this._funcStackPtr=-1;this._funcStack=[];c=(g,h)=>this._InvokeFromJS(g,h);self.c2_callFunction=c;self.c3_callFunction=c}Release(){super.Release()}Push(){const c=this._funcStack,f=++this._funcStackPtr;f===c.length&&c.push(new d);return c[f]}Pop(){--this._funcStackPtr}GetCurrent(){const c=this._funcStackPtr;
return 0>c?null:this._funcStack[c]}GetOneAbove(){const c=this._funcStack;return c.length?c[Math.min(this._funcStackPtr+1,c.length-1)]:null}_CallFunction(c,f){const g=this.Push();g.name=c.toLowerCase();g.retVal=0;e.shallowAssignArray(g.params,f);f=this.FastTrigger(e.Plugins.Function.Cnds.OnFunction,g.name);this._isPreview&&!f&&console.warn(`[Construct 3] Function object: called function '${c}' but no event was triggered. Is the function call spelt incorrectly or no longer used?`);this.Pop()}*_DebugCallFunction(c,
f){const g=this.Push();g.name=c.toLowerCase();g.retVal=0;e.shallowAssignArray(g.params,f);f=yield*this.DebugFastTrigger(e.Plugins.Function.Cnds.OnFunction,g.name);this._isPreview&&!f&&console.warn(`[Construct 3] Function object: called function '${c}' but no event was triggered. Is the function call spelt incorrectly or no longer used?`);this.Pop()}_InvokeFromJS(c,f){const g=this.Push();g.name=c.toLowerCase();g.retVal=0;g.params=(f||[]).map(h=>"number"===typeof h||"string"===typeof h?h:"boolean"===
typeof h?h?1:0:0);this.FastTrigger(e.Plugins.Function.Cnds.OnFunction,g.name);this.Pop();return g.retVal}}}"use strict";
{const e=self.C3;e.Plugins.Function.Cnds={OnFunction(d){return!0},CompareParam(d,c,f){const g=this.GetCurrent();if(!g)return this._isPreview&&console.warn("[Construct 3] Function object: used 'Compare parameter' condition when not in a function call"),!1;const h=g.params;d=Math.floor(d);let m=0;0>d||d>=h.length?this._isPreview&&console.warn(`[Construct 3] Function object: in function '${g.name}', compared parameter out of bounds (accessed index ${d} of ${h.length})`):m=h[d];return e.compare(m,c,f)}}}"use strict";
self.C3.Plugins.Function.Acts={CallFunction(e,d){if(this._runtime.IsDebugging())return this._DebugCallFunction(e,d);this._CallFunction(e,d)},SetReturnValue(e){const d=this.GetCurrent();d?d.retVal=e:this._isPreview&&console.warn("[Construct 3] Function object: used 'Set return value' when not in a function call")},CallExpression(e){}};"use strict";
{const e=self.C3;e.Plugins.Function.Exps={ReturnValue(){const d=this.GetOneAbove();return d?d.retVal:0},ParamCount(){const d=this.GetCurrent();if(d)return d.params.length;this._isPreview&&console.warn("[Construct 3] Function object: used 'ParamCount' expression when not in a function call");return 0},Param(d){d=Math.floor(d);const c=this.GetCurrent();if(c){const f=c.params;if(0<=d&&d<f.length)return f[d];this._isPreview&&console.warn(`[Construct 3] Function object: in function '${c.name}', accessed parameter out of bounds (accessed index ${d} of ${f.length})`);
return 0}this._isPreview&&console.warn("[Construct 3] Function object: used 'Param' expression when not in a function call");return 0},Call(d,...c){const f=this.Push();f.name=d.toLowerCase();f.retVal=0;f.params=c;c=this.FastTrigger(e.Plugins.Function.Cnds.OnFunction,f.name);this._isPreview&&!c&&console.warn(`[Construct 3] Function object: expression Function.Call("${d}" ...) was used, but no event was triggered. Is the function call spelt incorrectly or no longer used?`);this.Pop();return f.retVal}}}"use strict";
{const e=self.C3;e.Plugins.Browser=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.Browser.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Plugins.Browser.Instance=class extends e.SDKInstanceBase{constructor(d,c){super(d,"browser");this._initLocationStr="";this._isOnline=!1;this._docTitle=this._referrer="";this._isCookieEnabled=!1;this._windowOuterHeight=this._windowOuterWidth=this._screenHeight=this._screenWidth=0;this._isScirraArcade=!1;this.AddDOMMessageHandlers([["online-state",f=>this._OnOnlineStateChanged(f)],["backbutton",()=>this._OnBackButton()],["sw-message",f=>this._OnSWMessage(f)],["hashchange",f=>this._OnHashChange(f)]]);
d=this.GetRuntime().Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(d,"afterfirstlayoutstart",()=>this._OnAfterFirstLayoutStart()),e.Disposable.From(d,"window-resize",()=>this._OnWindowResize()),e.Disposable.From(d,"suspend",()=>this._OnSuspend()),e.Disposable.From(d,"resume",()=>this._OnResume()));this._runtime.AddLoadPromise(this.PostToDOMAsync("get-initial-state",{exportType:this._runtime.GetExportType()}).then(f=>{this._initLocationStr=f.location;this._isOnline=f.isOnline;
this._referrer=f.referrer;this._docTitle=f.title;this._isCookieEnabled=f.isCookieEnabled;this._screenWidth=f.screenWidth;this._screenHeight=f.screenHeight;this._windowOuterWidth=f.windowOuterWidth;this._windowOuterHeight=f.windowOuterHeight;this._isScirraArcade=f.isScirraArcade}))}Release(){super.Release()}_OnAfterFirstLayoutStart(){this.PostToDOM("ready-for-sw-messages")}async _OnOnlineStateChanged(d){d=!!d.isOnline;this._isOnline!==d&&((this._isOnline=d)?await this.TriggerAsync(e.Plugins.Browser.Cnds.OnOnline):
await this.TriggerAsync(e.Plugins.Browser.Cnds.OnOffline))}async _OnWindowResize(){await this.TriggerAsync(e.Plugins.Browser.Cnds.OnResize)}_OnSuspend(){this.Trigger(e.Plugins.Browser.Cnds.OnPageHidden)}_OnResume(){this.Trigger(e.Plugins.Browser.Cnds.OnPageVisible)}async _OnBackButton(){await this.TriggerAsync(e.Plugins.Browser.Cnds.OnBackButton)}_OnSWMessage(d){d=d.type;"downloading-update"===d?this.Trigger(e.Plugins.Browser.Cnds.OnUpdateFound):"update-ready"===d||"update-pending"===d?this.Trigger(e.Plugins.Browser.Cnds.OnUpdateReady):
"offline-ready"===d&&this.Trigger(e.Plugins.Browser.Cnds.OnOfflineReady)}_OnHashChange(d){this._initLocationStr=d.location;this.Trigger(e.Plugins.Browser.Cnds.OnHashChange)}GetDebuggerProperties(){return[{title:"plugins.browser.name",properties:[{name:"plugins.browser.debugger.user-agent",value:navigator.userAgent},{name:"plugins.browser.debugger.is-online",value:this._isOnline},{name:"plugins.browser.debugger.is-fullscreen",value:this._runtime.GetCanvasManager().IsDocumentFullscreen()}]}]}}}"use strict";
self.C3.Plugins.Browser.Cnds={IsOnline(){return this._isOnline},OnOnline(){return!0},OnOffline(){return!0},OnResize(){return!0},CookiesEnabled(){return this._isCookieEnabled},IsFullscreen(){return this._runtime.GetCanvasManager().IsDocumentFullscreen()},OnBackButton(){return!0},IsPortraitLandscape(e){const d=this._runtime.GetCanvasManager().GetLastWidth(),c=this._runtime.GetCanvasManager().GetLastHeight();return(d<=c?0:1)===e},OnUpdateFound(){return!0},OnUpdateReady(){return!0},OnOfflineReady(){return!0},
OnHashChange(){return!0},PageVisible(){return!this._runtime.IsSuspended()},OnPageHidden(){return!0},OnPageVisible(){return!0},HasJava(){return!1},IsDownloadingUpdate(){return!1},OnMenuButton(){return!1},OnSearchButton(){return!1},IsMetered(){return!1},IsCharging(){return!0},SupportsFullscreen(){return!0}};"use strict";
{const e=self.C3,d="portrait landscape portrait-primary portrait-secondary landscape-primary landscape-secondary".split(" ");e.Plugins.Browser.Acts={Alert(c){this.PostToDOM("alert",{message:c.toString()})},Close(){this._isScirraArcade||(this._runtime.IsDebug()?self.C3Debugger.CloseWindow():this.PostToDOM("close"))},Focus(){this.PostToDOM("set-focus",{isFocus:!0})},Blur(){this.PostToDOM("set-focus",{isFocus:!1})},GoBack(){this._isScirraArcade||this.PostToDOM("navigate",{type:"back"})},GoForward(){this._isScirraArcade||
this.PostToDOM("navigate",{type:"forward"})},GoHome(){this._isScirraArcade||this.PostToDOM("navigate",{type:"home"})},Reload(){this._isScirraArcade||(this._runtime.IsDebug()?this._runtime.PostToDebugger({type:"reload"}):this.PostToDOM("navigate",{type:"reload"}))},GoToURL(c,f){this._PostToDOMMaybeSync("navigate",{type:"url",url:c,target:f,exportType:this._runtime.GetExportType()})},GoToURLWindow(c,f){this._PostToDOMMaybeSync("navigate",{type:"new-window",url:c,tag:f,exportType:this._runtime.GetExportType()})},
RequestFullScreen(c,f){2<=c&&(c+=1);6===c&&(c=2);1===c&&(c=0);c=e.CanvasManager._FullscreenModeNumberToString(c);this._runtime.GetCanvasManager().SetDocumentFullscreenMode(c);this._PostToDOMMaybeSync("request-fullscreen",{navUI:f})},CancelFullScreen(){this._PostToDOMMaybeSync("exit-fullscreen")},Vibrate(c){c=c.split(",");for(let f=0,g=c.length;f<g;++f)c[f]=parseInt(c[f],10);this._PostToDOMMaybeSync("vibrate",{pattern:c})},async InvokeDownload(c,f){f&&(c=await this._runtime.GetAssetManager().GetProjectFileUrl(c),
this._runtime.InvokeDownload(c,f))},InvokeDownloadString(c,f,g){g&&(c=`data:${f},${encodeURIComponent(c)}`,this._runtime.InvokeDownload(c,g))},ConsoleLog(c,f){f=f.toString();0===c?console.log(f):1===c?console.warn(f):2===c&&console.error(f)},ConsoleGroup(c){console.group(c)},ConsoleGroupEnd(){console.groupEnd()},ExecJs(c){try{eval(c)}catch(f){console.error("Error executing JavaScript: ",f)}},LockOrientation(c){c=Math.floor(c);0>c||c>=d.length||this._PostToDOMMaybeSync("lock-orientation",{orientation:d[c]})},
UnlockOrientation(){this._PostToDOMMaybeSync("unlock-orientation")},LoadStyleSheet(c){this._runtime.GetAssetManager().LoadStyleSheet(c)},SetHash(c){this.PostToDOM("set-hash",{hash:c})}}}"use strict";
self.C3.Plugins.Browser.Exps={URL(){return this._runtime.IsInWorker()?this._initLocationStr:location.toString()},Protocol(){return this._runtime.IsInWorker()?(new URL(this._initLocationStr)).protocol:location.protocol},Domain(){return this._runtime.IsInWorker()?(new URL(this._initLocationStr)).hostname:location.hostname},Port(){return this._runtime.IsInWorker()?(new URL(this._initLocationStr)).port:location.port},PathName(){return this._runtime.IsInWorker()?(new URL(this._initLocationStr)).pathname:
location.pathname},Hash(){return this._runtime.IsInWorker()?(new URL(this._initLocationStr)).hash:location.hash},QueryString(){return this._runtime.IsInWorker()?(new URL(this._initLocationStr)).search:location.search},QueryParam(e){const d=this._runtime.IsInWorker()?(new URL(this._initLocationStr)).search:location.search;return(e=RegExp("[?&]"+e+"=([^&]*)").exec(d))?decodeURIComponent(e[1].replace(/\+/g," ")):""},Referrer(){return this._referrer},Title(){return this._docTitle},Language(){return navigator.language},
Platform(){return navigator.platform},UserAgent(){return navigator.userAgent},ExecJS(e){let d=0;try{d=eval(e)}catch(c){console.error("Error executing JavaScript: ",c)}return"number"===typeof d||"string"===typeof d?d:"boolean"===typeof d?d?1:0:0},Name(){return navigator.appName},Version(){return navigator.appVersion},Product(){return navigator.product},Vendor(){return navigator.vendor},BatteryLevel(){return 1},BatteryTimeLeft(){return Infinity},Bandwidth(){const e=navigator.connection;return e?e.downlink||
e.downlinkMax||e.bandwidth||Infinity:Infinity},ConnectionType(){const e=navigator.connection;return e?e.type||"unknown":"unknown"},DevicePixelRatio(){return self.devicePixelRatio},ScreenWidth(){return this._screenWidth},ScreenHeight(){return this._screenHeight},WindowInnerWidth(){return this._runtime.GetCanvasManager().GetLastWidth()},WindowInnerHeight(){return this._runtime.GetCanvasManager().GetLastHeight()},WindowOuterWidth(){return this._windowOuterWidth},WindowOuterHeight(){return this._windowOuterWidth}};
"use strict";{const e=self.C3;e.Plugins.Audio=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.Audio.Type=class extends e.SDKTypeBase{constructor(c){super(c)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.IAudioObjectType}};function d(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode");}self.IAudioObjectType=class extends self.IObjectClass{constructor(c){super(c)}get audioContext(){return d().GetAudioContext()}get destinationNode(){return d().GetDestinationNode()}}}"use strict";
{const e=self.C3,d=["interactive","balanced","playback"];e.Plugins.Audio.Instance=class extends e.SDKInstanceBase{constructor(c,f){super(c,"audio");this._nextPlayTime=0;this._triggerTag="";this._saveLoadMode=this._timeScaleMode=0;this._playInBackground=!1;this._distanceModel=this._panningModel=1;this._listenerX=this._runtime.GetViewportWidth()/2;this._listenerY=this._runtime.GetViewportHeight()/2;this._listenerZ=-600;this._referenceDistance=600;this._maxDistance=1E4;this._rolloffFactor=1;this._listenerInst=
null;this._loadListenerUid=-1;this._masterVolume=1;this._isSilent=!1;this._sampleRate=0;this._effectCount=new Map;this._preloadCount=this._preloadTotal=0;this._remoteUrls=new Map;c="interactive";f&&(this._timeScaleMode=f[0],this._saveLoadMode=f[1],this._playInBackground=f[2],c=d[f[3]],this._panningModel=f[4],this._distanceModel=f[5],this._listenerZ=-f[6],this._referenceDistance=f[7],this._maxDistance=f[8],this._rolloffFactor=f[9]);this._lastAIState=[];this._lastFxState=[];this._lastAnalysersData=
[];this.AddDOMMessageHandlers([["state",g=>this._OnUpdateState(g)],["fxstate",g=>this._OnUpdateFxState(g)],["trigger",g=>this._OnTrigger(g)]]);f=this.GetRuntime().Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(f,"instancedestroy",g=>this._OnInstanceDestroyed(g.instance)),e.Disposable.From(f,"afterload",()=>this._OnAfterLoad()),e.Disposable.From(f,"suspend",()=>this._OnSuspend()),e.Disposable.From(f,"resume",()=>this._OnResume()));this._runtime.AddLoadPromise(this.PostToDOMAsync("create-audio-context",
{preloadList:this._runtime.GetAssetManager().GetAudioToPreload().map(g=>({originalUrl:g.originalUrl,url:g.url,type:g.type,fileSize:g.fileSize})),isiOSCordova:this._runtime.IsiOSCordova(),timeScaleMode:this._timeScaleMode,latencyHint:c,panningModel:this._panningModel,distanceModel:this._distanceModel,refDistance:this._referenceDistance,maxDistance:this._maxDistance,rolloffFactor:this._rolloffFactor,listenerPos:[this._listenerX,this._listenerY,this._listenerZ]}).then(g=>{this._sampleRate=g.sampleRate}));
this._StartTicking()}Release(){this._listenerInst=null;super.Release()}_OnInstanceDestroyed(c){this._listenerInst===c&&(this._listenerInst=null)}DbToLinearNoCap(c){return Math.pow(10,c/20)}DbToLinear(c){c=this.DbToLinearNoCap(c);return isFinite(c)?Math.max(Math.min(c,1),0):0}LinearToDbNoCap(c){return Math.log(c)/Math.log(10)*20}LinearToDb(c){return this.LinearToDbNoCap(Math.max(Math.min(c,1),0))}_OnSuspend(){this._playInBackground||this.PostToDOM("set-suspended",{isSuspended:!0})}_OnResume(){this._playInBackground||
this.PostToDOM("set-suspended",{isSuspended:!1})}_OnUpdateState(c){const f=c.tickCount,g=this._lastAIState.filter(h=>h.hasOwnProperty("placeholder")&&(h.placeholder>f||-1===h.placeholder));this._lastAIState=c.audioInstances;this._lastAnalysersData=c.analysers;0<g.length&&e.appendArray(this._lastAIState,g)}_OnUpdateFxState(c){this._lastFxState=c.fxstate}_GetFirstAudioStateByTag(c){for(const f of this._lastAIState)if(e.equalsNoCase(f.tag,c))return f;return null}_IsTagPlaying(c){return this._lastAIState.some(f=>
e.equalsNoCase(c,f.tag)&&f.isPlaying)}_MaybeMarkAsPlaying(c,f,g,h){if(this._IsTagPlaying(c))return null;c={tag:c,duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:"",bufferUrl:"",bufferType:"",isMusic:f,isLooping:g,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};this._lastAIState.push(c);return c}async _OnTrigger(c){const f=c.type;this._triggerTag=c.tag;c=c.aiid;if("ended"===f){for(const g of this._lastAIState)if(g.aiid===c){g.isPlaying=!1;break}await this.TriggerAsync(e.Plugins.Audio.Cnds.OnEnded)}else"fade-ended"===
f&&await this.TriggerAsync(e.Plugins.Audio.Cnds.OnFadeEnded)}Tick(){const c={timeScale:this._runtime.GetTimeScale(),gameTime:this._runtime.GetGameTime(),instPans:this.GetInstancePans(),tickCount:this._runtime.GetTickCountNoSave()};if(this._listenerInst){const f=this._listenerInst.GetWorldInfo();this._listenerX=f.GetX();this._listenerY=f.GetY();c.listenerPos=[this._listenerX,this._listenerY,this._listenerZ]}this.PostToDOM("tick",c)}rotatePtAround(c,f,g,h,m){if(0===g)return[c,f];const k=Math.sin(g);
g=Math.cos(g);c-=h;f-=m;const a=c*k;c=c*g-f*k;return[c+h,f*g+a+m]}GetInstancePans(){return this._lastAIState.filter(c=>-1!==c.uid).map(c=>this._runtime.GetInstanceByUID(c.uid)).filter(c=>c).map(c=>{const f=c.GetWorldInfo(),g=f.GetLayer().GetAngle(),[h,m]=this.rotatePtAround(f.GetX(),f.GetY(),-g,this._listenerX,this._listenerY);return{uid:c.GetUID(),x:h,y:m,angle:f.GetAngle()-g}})}GetAnalyserData(c,f){for(const g of this._lastAnalysersData)if(g.index===f&&e.equalsNoCase(g.tag,c))return g;return null}_IncrementEffectCount(c){this._effectCount.set(c,
(this._effectCount.get(c)||0)+1)}_ShouldSave(c){return c.hasOwnProperty("placeholder")||3===this._saveLoadMode?!1:c.isMusic&&1===this._saveLoadMode?!1:c.isMusic||2!==this._saveLoadMode?!0:!1}SaveToJson(){return{isSilent:this._isSilent,masterVolume:this._masterVolume,listenerZ:this._listenerZ,listenerUid:this._listenerInst?this._listenerInst.GetUID():-1,remoteUrls:[...this._remoteUrls.entries()],playing:this._lastAIState.filter(c=>this._ShouldSave(c)),effects:this._lastFxState,analysers:this._lastAnalysersData}}LoadFromJson(c){this._isSilent=
c.isSilent;this._masterVolume=c.masterVolume;this._listenerZ=c.listenerZ;this._listenerInst=null;this._loadListenerUid=c.listenerUid;this._remoteUrls.clear();if(c.remoteUrls)for(const [f,g]of c.remoteUrls)this._remoteUrls.set(f,g);this._lastAIState=c.playing;this._lastFxState=c.effects;this._lastAnalysersData=c.analysers}_OnAfterLoad(){if(-1!==this._loadListenerUid&&(this._listenerInst=this._runtime.GetInstanceByUID(this._loadListenerUid),this._loadListenerUid=-1,this._listenerInst)){var c=this._listenerInst.GetWorldInfo();
this._listenerX=c.GetX();this._listenerY=c.GetY()}for(var f of this._lastAIState)(c=this._runtime.GetAssetManager().GetProjectAudioFileUrl(f.bufferOriginalUrl))?(f.bufferUrl=c.url,f.bufferType=c.type):f.bufferUrl=null;for(const g of Object.values(this._lastFxState))for(const h of g)h.hasOwnProperty("bufferOriginalUrl")&&(f=this._runtime.GetAssetManager().GetProjectAudioFileUrl(h.bufferOriginalUrl))&&(h.bufferUrl=f.url,h.bufferType=f.type);this.PostToDOM("load-state",{saveLoadMode:this._saveLoadMode,
timeScale:this._runtime.GetTimeScale(),gameTime:this._runtime.GetGameTime(),listenerPos:[this._listenerX,this._listenerY,this._listenerZ],isSilent:this._isSilent,masterVolume:this._masterVolume,playing:this._lastAIState.filter(g=>null!==g.bufferUrl),effects:this._lastFxState})}GetDebuggerProperties(){const c=[];for(const [f,g]of Object.entries(this._lastFxState))c.push({name:"$"+f,value:g.map(h=>h.type).join(", ")});return[{title:"plugins.audio.debugger.tag-effects",properties:c},{title:"plugins.audio.debugger.currently-playing",
properties:[{name:"plugins.audio.debugger.currently-playing-count",value:this._lastAIState.length},...this._lastAIState.map((f,g)=>({name:"$#"+g,value:`${f.bufferOriginalUrl} ("${f.tag}") ${Math.round(10*f.playbackTime)/10} / ${Math.round(10*f.duration)/10}`}))]}]}}}"use strict";
{const e=self.C3;e.Plugins.Audio.Cnds={OnEnded(d){return e.equalsNoCase(this._triggerTag,d)},OnFadeEnded(d){return e.equalsNoCase(this._triggerTag,d)},PreloadsComplete(){return this._preloadCount===this._preloadTotal},AdvancedAudioSupported(){return!0},IsSilent(){return this._isSilent},IsAnyPlaying(){for(const d of this._lastAIState)if(d.isPlaying)return!0;return!1},IsTagPlaying(d){return this._IsTagPlaying(d)}}}"use strict";
{const e=self.C3,d="lowpass highpass bandpass lowshelf highshelf peaking notch allpass".split(" ");e.Plugins.Audio.Acts={async Play(c,f,g,h){if(!this._isSilent){var m=c[1],k=this._runtime.GetAssetManager().GetProjectAudioFileUrl(c[0]);if(k){var a=this._nextPlayTime;this._nextPlayTime=0;var b=this._MaybeMarkAsPlaying(h.toLowerCase(),m,0!==f,this.DbToLinear(g));try{await this.PostToDOMAsync("play",{originalUrl:c[0],url:k.url,type:k.type,isMusic:m,tag:h.toLowerCase(),isLooping:0!==f,vol:this.DbToLinear(g),
pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{b&&(b.placeholder=this._runtime.GetTickCountNoSave())}}}},async PlayAtPosition(c,f,g,h,m,k,a,b,l,p){if(!this._isSilent){var r=c[1],t=this._runtime.GetAssetManager().GetProjectAudioFileUrl(c[0]);if(t){var u=this._nextPlayTime;this._nextPlayTime=0;var w=this._MaybeMarkAsPlaying(p.toLowerCase(),r,0!==f,this.DbToLinear(g));try{await this.PostToDOMAsync("play",{originalUrl:c[0],url:t.url,type:t.type,isMusic:r,tag:p.toLowerCase(),isLooping:0!==
f,vol:this.DbToLinear(g),pos:0,off:u,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:m,angle:e.toRadians(k),innerAngle:e.toRadians(a),outerAngle:e.toRadians(b),outerGain:this.DbToLinear(l)}})}finally{w&&(w.placeholder=this._runtime.GetTickCountNoSave())}}}},async PlayAtObject(c,f,g,h,m,k,a,b){if(!this._isSilent&&h&&(h=h.GetFirstPicked())&&h.GetWorldInfo()){var l=h.GetWorldInfo(),p=l.GetLayer().GetAngle(),[r,t]=this.rotatePtAround(l.GetX(),l.GetY(),-p,this._listenerX,this._listenerY),
u=c[1],w=this._runtime.GetAssetManager().GetProjectAudioFileUrl(c[0]);if(w){var x=this._nextPlayTime;this._nextPlayTime=0;var A=this._MaybeMarkAsPlaying(b.toLowerCase(),u,0!==f,this.DbToLinear(g));try{await this.PostToDOMAsync("play",{originalUrl:c[0],url:w.url,type:w.type,isMusic:u,tag:b.toLowerCase(),isLooping:0!==f,vol:this.DbToLinear(g),pos:0,off:x,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:r,y:t,angle:l.GetAngle()-p,innerAngle:e.toRadians(m),outerAngle:e.toRadians(k),outerGain:this.DbToLinear(a),
uid:h.GetUID()}})}finally{A&&(A.placeholder=this._runtime.GetTickCountNoSave())}}}},async PlayByName(c,f,g,h,m){if(!this._isSilent){c=1===c;var k=this._runtime.GetAssetManager().GetProjectAudioFileUrl(f)||this._remoteUrls.get(f.toLowerCase());if(k){var a=this._nextPlayTime;this._nextPlayTime=0;var b=this._MaybeMarkAsPlaying(m.toLowerCase(),c,0!==g,this.DbToLinear(h));try{await this.PostToDOMAsync("play",{originalUrl:f,url:k.url,type:k.type,isMusic:c,tag:m.toLowerCase(),isLooping:0!==g,vol:this.DbToLinear(h),
pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{b&&(b.placeholder=this._runtime.GetTickCountNoSave())}}}},async PlayAtPositionByName(c,f,g,h,m,k,a,b,l,p,r){if(!this._isSilent){c=1===c;var t=this._runtime.GetAssetManager().GetProjectAudioFileUrl(f)||this._remoteUrls.get(f.toLowerCase());if(t){var u=this._nextPlayTime;this._nextPlayTime=0;var w=this._MaybeMarkAsPlaying(r.toLowerCase(),c,0!==g,this.DbToLinear(h));try{await this.PostToDOMAsync("play",{originalUrl:f,url:t.url,type:t.type,
isMusic:c,tag:r.toLowerCase(),isLooping:0!==g,vol:this.DbToLinear(h),pos:0,off:u,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:m,y:k,angle:e.toRadians(a),innerAngle:e.toRadians(b),outerAngle:e.toRadians(l),outerGain:this.DbToLinear(p)}})}finally{w&&(w.placeholder=this._runtime.GetTickCountNoSave())}}}},async PlayAtObjectByName(c,f,g,h,m,k,a,b,l){if(!this._isSilent&&!this._isSilent&&m&&(m=m.GetFirstPicked())&&m.GetWorldInfo()){var p=m.GetWorldInfo(),r=p.GetLayer().GetAngle(),[t,u]=this.rotatePtAround(p.GetX(),
p.GetY(),-r,this._listenerX,this._listenerY);c=1===c;var w=this._runtime.GetAssetManager().GetProjectAudioFileUrl(f)||this._remoteUrls.get(f.toLowerCase());if(w){var x=this._nextPlayTime;this._nextPlayTime=0;var A=this._MaybeMarkAsPlaying(l.toLowerCase(),c,0!==g,this.DbToLinear(h));try{await this.PostToDOMAsync("play",{originalUrl:f,url:w.url,type:w.type,isMusic:c,tag:l.toLowerCase(),isLooping:0!==g,vol:this.DbToLinear(h),pos:0,off:x,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:t,y:u,
angle:p.GetAngle()-r,innerAngle:e.toRadians(k),outerAngle:e.toRadians(a),outerGain:this.DbToLinear(b),uid:m.GetUID()}})}finally{A&&(A.placeholder=this._runtime.GetTickCountNoSave())}}}},SetLooping(c,f){this.PostToDOM("set-looping",{tag:c.toLowerCase(),isLooping:0===f})},SetMuted(c,f){this.PostToDOM("set-muted",{tag:c.toLowerCase(),isMuted:0===f})},SetVolume(c,f){this.PostToDOM("set-volume",{tag:c.toLowerCase(),vol:this.DbToLinear(f)})},FadeVolume(c,f,g,h){this.PostToDOM("fade-volume",{tag:c.toLowerCase(),
vol:this.DbToLinear(f),duration:g,stopOnEnd:0===h})},async Preload(c){const f=c[1],g=this._runtime.GetAssetManager().GetProjectAudioFileUrl(c[0]);g&&(this._preloadTotal++,await this.PostToDOMAsync("preload",{originalUrl:c[0],url:g.url,type:g.type,isMusic:f}),this._preloadCount++)},async PreloadByName(c,f){c=1===c;const g=this._runtime.GetAssetManager().GetProjectAudioFileUrl(f)||this._remoteUrls.get(f.toLowerCase());g&&(this._preloadTotal++,await this.PostToDOMAsync("preload",{originalUrl:f,url:g.url,
type:g.type,isMusic:c}),this._preloadCount++)},SetPlaybackRate(c,f){this.PostToDOM("set-playback-rate",{tag:c.toLowerCase(),rate:Math.max(f,0)})},Stop(c){this.PostToDOM("stop",{tag:c.toLowerCase()})},StopAll(){this.PostToDOM("stop-all")},SetPaused(c,f){this.PostToDOM("set-paused",{tag:c.toLowerCase(),paused:0===f})},Seek(c,f){this.PostToDOM("seek",{tag:c.toLowerCase(),pos:f})},SetSilent(c){2===c&&(c=this._isSilent?1:0);c=0===c;this._isSilent!==c&&(this._isSilent=c,this.PostToDOM("set-silent",{isSilent:c}))},
SetMasterVolume(c){c=this.DbToLinear(c);this._masterVolume!==c&&(this._masterVolume=c,this.PostToDOM("set-master-volume",{vol:c}))},AddFilterEffect(c,f,g,h,m,k,a){c=c.toLowerCase();f=d[f];this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"filter",tag:c,params:[f,g,h,m,k,e.clamp(a/100,0,1)]})},AddDelayEffect(c,f,g,h){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"delay",tag:c,params:[f,this.DbToLinear(g),e.clamp(h/100,0,1)]})},AddFlangerEffect(c,f,
g,h,m,k){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"flanger",tag:c,params:[f/1E3,g/1E3,h,m/100,e.clamp(k/100,0,1)]})},AddPhaserEffect(c,f,g,h,m,k,a){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"phaser",tag:c,params:[f,g,h,m,k,e.clamp(a/100,0,1)]})},AddConvolutionEffect(c,f,g,h){c=c.toLowerCase();const m=this._runtime.GetAssetManager().GetProjectAudioFileUrl(f[0]);m&&(this._IncrementEffectCount(c),this.PostToDOM("add-effect",
{type:"convolution",tag:c,bufferOriginalUrl:f[0],bufferUrl:m.url,bufferType:m.type,params:[0===g,e.clamp(h/100,0,1)]}))},AddGainEffect(c,f){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"gain",tag:c,params:[this.DbToLinear(f)]})},AddMuteEffect(c){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"gain",tag:c,params:[0]})},AddTremoloEffect(c,f,g){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"tremolo",
tag:c,params:[f,e.clamp(g/100,0,1)]})},AddRingModEffect(c,f,g){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"ringmod",tag:c,params:[f,e.clamp(g/100,0,1)]})},AddDistortionEffect(c,f,g,h,m,k){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"distortion",tag:c,params:[this.DbToLinearNoCap(f),this.DbToLinearNoCap(g),h,this.DbToLinearNoCap(m),e.clamp(k/100,0,1)]})},AddCompressorEffect(c,f,g,h,m,k){c=c.toLowerCase();this._IncrementEffectCount(c);
this.PostToDOM("add-effect",{type:"compressor",tag:c,params:[f,g,h,m/1E3,k/1E3]})},AddAnalyserEffect(c,f,g){c=c.toLowerCase();this._IncrementEffectCount(c);this.PostToDOM("add-effect",{type:"analyser",tag:c,params:[f,g]})},RemoveEffects(c){c=c.toLowerCase();this._effectCount.set(c,0);this.PostToDOM("remove-effects",{tag:c});this._lastFxState={}},SetEffectParameter(c,f,g,h,m,k){this.PostToDOM("set-effect-param",{tag:c.toLowerCase(),index:Math.floor(f),param:g,value:h,ramp:m,time:k})},SetListenerObject(c){c&&
(c=c.GetFirstPicked())&&c.GetWorldInfo()&&(this._listenerInst=c)},SetListenerZ(c){this._listenerZ=c},ScheduleNextPlay(c){this._nextPlayTime=Math.max(c,0)},UnloadAudio(c){const f=c[1];(c=this._runtime.GetAssetManager().GetProjectAudioFileUrl(c[0]))&&this.PostToDOM("unload",{url:c.url,type:c.type,isMusic:f})},UnloadAudioByName(c,f){c=1===c;(f=this._runtime.GetAssetManager().GetProjectAudioFileUrl(f)||this._remoteUrls.get(f.toLowerCase()))&&this.PostToDOM("unload",{url:f.url,type:f.type,isMusic:c})},
UnloadAll(){this.PostToDOM("unload-all")},AddRemoteURL(c,f,g){this._remoteUrls.set(g.toLowerCase(),{url:c,type:f})}}}"use strict";
self.C3.Plugins.Audio.Exps={Duration(e){return(e=this._GetFirstAudioStateByTag(e))?e.duration:0},PlaybackTime(e){return(e=this._GetFirstAudioStateByTag(e))?e.playbackTime:0},PlaybackRate(e){return(e=this._GetFirstAudioStateByTag(e))?e.playbackRate:0},Volume(e){return(e=this._GetFirstAudioStateByTag(e))?this.LinearToDb(e.volume):0},MasterVolume(){return this.LinearToDb(this._masterVolume)},EffectCount(e){return this._effectCount.get(e.toLowerCase())||0},AnalyserFreqBinCount(e,d){return(e=this.GetAnalyserData(e,
Math.floor(d)))?e.binCount:0},AnalyserFreqBinAt(e,d,c){e=this.GetAnalyserData(e,Math.floor(d));if(!e)return 0;c=Math.floor(c);return 0>c||c>=e.binCount?0:e.freqBins[c]},AnalyserPeakLevel(e,d){return(e=this.GetAnalyserData(e,Math.floor(d)))?e.peak:0},AnalyserRMSLevel(e,d){return(e=this.GetAnalyserData(e,Math.floor(d)))?e.rms:0},SampleRate(){return this._sampleRate},CurrentTime(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1E3}};"use strict";
{const e=self.C3;e.Plugins.video=class extends e.SDKDOMPluginBase{constructor(d){super(d,"video");this._supportedFormats={};this._lastStateSequenceNumber=-1;this._videoState=new Map;this._runtime.AddLoadPromise(this._runtime.PostComponentMessageToDOMAsync("video","init",{isInWorker:this._runtime.IsInWorker()}).then(c=>this._supportedFormats=c));this.AddElementMessageHandler("playback-event",(c,f)=>c._OnPlaybackEvent(f));this._runtime.AddDOMComponentMessageHandler("video","state",c=>this._OnUpdateState(c))}Release(){super.Release()}IsFormatSupported(d){return!!this._supportedFormats[d]}_OnUpdateState(d){const c=
d.sequenceNumber;if(!(c<=this._lastStateSequenceNumber)){this._lastStateSequenceNumber=c;this._videoState.clear();for(const [f,g]of Object.entries(d.videoData))this._videoState.set(parseInt(f,10),g)}}_DeleteVideoState(d){this._videoState.delete(d)}GetVideoState(d){return this._videoState.get(d)||null}}}"use strict";{const e=self.C3;e.Plugins.video.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=e.New(e.Rect),c=e.New(e.Quad);e.Plugins.video.Instance=class extends e.SDKDOMInstanceBase{constructor(f,g){super(f,"video");this._mp4_src=this._ogv_src=this._webm_src="";this._autoplay=2;this._videoWasPlayingOnSuspend=this._playInBackground=!1;this._lastImageBitmap=this._webGLTexture=null;this._currentTrigger=-1;this._isSettingSource=0;this._isMuted=this._isLooping=this._hasEnded=this._isPaused=this._isPlaying=!1;this._volume=0;g&&(this._webm_src=g[0],this._ogv_src=g[1],this._mp4_src=
g[2],this._autoplay=g[3],this._playInBackground=g[4],this.GetWorldInfo().SetVisible(g[5]));f=this._runtime.Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(f,"webglcontextlost",()=>this._OnWebGLContextLost()),e.Disposable.From(f,"suspend",()=>this._OnSuspend()),e.Disposable.From(f,"resume",()=>this._OnResume()));this.CreateElement({src:this.GetVideoSource(),autoplay:this._autoplay})}Release(){this.GetPlugin()._DeleteVideoState(this.GetElementId());this._ReleaseTexture();
this._lastImageBitmap=null;super.Release()}_MaybeCreateTexture(f,g,h){if(this._webGLTexture){if(this._webGLTexture.GetWidth()===g||this._webGLTexture.GetHeight()===h)return;this._ReleaseTexture()}this._webGLTexture=f.CreateDynamicTexture(g,h,{sampling:this._runtime.GetSampling(),mipMap:!1})}_ReleaseTexture(){this._webGLTexture&&(this._runtime.GetWebGLRenderer().DeleteTexture(this._webGLTexture),this._webGLTexture=null)}GetElementState(){return{}}DbToLinearNoCap(f){return Math.pow(10,f/20)}DbToLinear(f){f=
this.DbToLinearNoCap(f);return isFinite(f)?Math.max(Math.min(f,1),0):0}LinearToDbNoCap(f){return Math.log(f)/Math.log(10)*20}LinearToDb(f){return this.LinearToDbNoCap(Math.max(Math.min(f,1),0))}GetVideoSource(){let f="";const g=this.GetPlugin();g.IsFormatSupported("video/webm")&&this._webm_src?f=this._webm_src:g.IsFormatSupported("video/ogg")&&this._ogv_src?f=this._ogv_src:g.IsFormatSupported("video/mp4")&&this._mp4_src&&(f=this._mp4_src);return f&&e.IsRelativeURL(f)?(f=f.toLowerCase(),this._runtime.GetAssetManager().GetMediaFileUrl(f)):
f}_OnWebGLContextLost(){this._webGLTexture=null}async _OnPlaybackEvent(f){f=f.type;5===f?this._SetIsPlaying(!0):2===f?(this._SetIsPlaying(!1),this._hasEnded=!0,this._isPaused=!1):6===f&&(this._SetIsPlaying(!1),this._isPaused=!0,this._hasEnded=!1);this._currentTrigger=f;await this.TriggerAsync(e.Plugins.video.Cnds.OnPlaybackEvent)}_SetIsPlaying(f){(this._isPlaying=!!f)?(this._StartTicking(),this._hasEnded=this._isPaused=!1):this._StopTicking()}_OnSuspend(){!this._playInBackground&&this._isPlaying&&
(this._videoWasPlayingOnSuspend=!0,this.PostToDOMElement("pause"))}_OnResume(){!this._playInBackground&&this._videoWasPlayingOnSuspend&&(this.PostToDOMElement("play"),this._videoWasPlayingOnSuspend=!1)}Draw(f){const g=this.GetWorldInfo();var h,m=!0;if(this._runtime.IsInWorker()){var k=this.GetMyState();if(!k)return;if(h=k.imageBitmap)this._lastImageBitmap=h;else if(this._lastImageBitmap)h=this._lastImageBitmap,m=!1;else return;k=h.width;var a=h.height}else{h=self.C3Video_GetElement(this.GetElementId());
if(!h)return;k=h.videoWidth;a=h.videoHeight;if(0>=k||0>=a)return}this._MaybeCreateTexture(f,k,a);m&&f.UpdateTexture(h,this._webGLTexture);var b=k/a;m=g.GetWidth();k=g.GetHeight();h=a=0;let l;m/k>b?(l=k*b,b=k,a=Math.max(Math.floor((m-l)/2),0)):(l=m,b=m/b,h=Math.max(Math.floor((k-b)/2),0));f.SetTexture(this._webGLTexture);d.setWH(g.GetX()+a,g.GetY()+h,l,b);c.setFromRect(d);f.Quad(c)}Tick(){this._runtime.UpdateRender()}GetMyState(){return this.GetPlugin().GetVideoState(this.GetElementId())}}}"use strict";
self.C3.Plugins.video.Cnds={IsPlaying(){return this._isPlaying},IsPaused(){return this._isPaused},HasEnded(){return this._hasEnded},IsMuted(){return this._isMuted},OnPlaybackEvent(e){return this._currentTrigger===e}};"use strict";
self.C3.Plugins.video.Acts={SetSource(e,d,c){this._webm_src=e;this._ogv_src=d;this._mp4_src=c;this.PostToDOMElement("set-source",{src:this.GetVideoSource()});this._ReleaseTexture()},SetPlaybackTime(e){this.PostToDOMElement("set-playback-time",{time:e})},SetLooping(e){e=0!==e;this._isLooping!==e&&(this._isLooping=e,this.PostToDOMElement("set-looping",{isLooping:e}))},SetMuted(e){e=0!==e;this._isMuted!==e&&(this._isMuted=e,this.PostToDOMElement("set-muted",{isMuted:e}))},SetVolume(e){this._volume!==
e&&(this._volume=e,this.PostToDOMElement("set-volume",{volume:this.DbToLinear(e)}))},Pause(){this.PostToDOMElement("pause")},Play(){this._PostToDOMElementMaybeSync("play")}};"use strict";self.C3.Plugins.video.Exps={PlaybackTime(){const e=this.GetMyState();return e?e.currentTime:0},Duration(){const e=this.GetMyState();return e?e.duration:0},Volume(){return this._volume},VideoWidth(){const e=this.GetMyState();return e?e.videoWidth:0},VideoHeight(){const e=this.GetMyState();return e?e.videoHeight:0}};
"use strict";
{const e=self.C3;e.Plugins.UserMedia=class extends e.SDKDOMPluginBase{constructor(d){super(d,"user-media");this._lastStateSequenceNumber=-1;this._videoState=new Map;this.AddElementMessageHandler("video-ready",(c,f)=>c._OnVideoReady(f));this._runtime.AddDOMComponentMessageHandler("user-media","state",c=>this._OnUpdateState(c))}Release(){super.Release()}_OnUpdateState(d){const c=d.sequenceNumber;if(!(c<=this._lastStateSequenceNumber)){this._lastStateSequenceNumber=c;this._videoState.clear();for(const [f,
g]of Object.entries(d.videoData))this._videoState.set(parseInt(f,10),g)}}_DeleteVideoState(d){this._videoState.delete(d)}GetVideoState(d){return this._videoState.get(d)||null}}}"use strict";{const e=self.C3;e.Plugins.UserMedia.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=e.New(e.Rect),c=e.New(e.Quad);e.Plugins.UserMedia.Instance=class extends e.SDKDOMInstanceBase{constructor(f,g){super(f,"user-media");this._videoSources=[];this._audioSources=[];this._isVideoActive=this._isVideoReady=this._isRequesting=!1;this._videoHeight=this._videoWidth=0;this._snapshotUrl="";f=this._runtime.Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(f,"webglcontextlost",()=>this._OnWebGLContextLost()));this.CreateElement();this._StartTicking()}Release(){this.GetPlugin()._DeleteVideoState(this.GetElementId());
this._ReleaseTexture();super.Release()}_MaybeCreateTexture(f,g,h){if(this._webGLTexture){if(this._webGLTexture.GetWidth()===g||this._webGLTexture.GetHeight()===h)return;this._ReleaseTexture()}this._webGLTexture=f.CreateDynamicTexture(g,h,{sampling:this._runtime.GetSampling(),mipMap:!1})}_ReleaseTexture(){this._webGLTexture&&(this._runtime.GetWebGLRenderer().DeleteTexture(this._webGLTexture),this._webGLTexture=null)}GetElementState(){return{}}_OnWebGLContextLost(){this._webGLTexture=null}_OnVideoReady(f){this._isVideoActive&&
(this._isVideoReady=!0,this._videoWidth=f.width,this._videoHeight=f.height)}Draw(f){const g=this.GetWorldInfo();f.SetColorFillMode();f.SetColorRgba(0,0,0,1);f.Quad(g.GetBoundingQuad());f.SetTextureFillMode();f.ResetColor();if(this._isVideoActive&&this._isVideoReady){if(this._runtime.IsInWorker()){var h=this.GetMyState();if(!h)return;var m=h.imageBitmap;if(!m)return;h=m.width;var k=m.height}else{m=self.C3UserMedia_GetVideoElement(this.GetElementId());if(!m)return;h=m.videoWidth;k=m.videoHeight;if(0>=
h||0>=k)return}this._MaybeCreateTexture(f,h,k);f.UpdateTexture(m,this._webGLTexture);var a=h/k;h=g.GetWidth();k=g.GetHeight();var b=m=0;if(h/k>a){var l=k*a;a=k;m=Math.max(Math.floor((h-l)/2),0)}else l=h,a=h/a,b=Math.max(Math.floor((k-a)/2),0);f.SetTexture(this._webGLTexture);d.setWH(g.GetX()+m,g.GetY()+b,l,a);c.setFromRect(d);f.Quad(c)}}Tick(){this._isVideoActive&&this._isVideoReady&&this._runtime.UpdateRender()}GetMyState(){return this.GetPlugin().GetVideoState(this.GetElementId())}}}"use strict";
self.C3.Plugins.UserMedia.Cnds={OnApproved(){return!0},OnDeclined(){return!0},OnMediaSources(){return!0},OnSnapshot(){return!0},SupportsUserMedia(){return!0},SupportsSpeechRecognition(){return!1},OnSpeechRecognitionStart(){return!0},OnSpeechRecognitionEnd(){return!0},OnSpeechRecognitionError(){return!0},OnSpeechRecognitionResult(){return!0},IsRecognisingSpeech(){return!1},OnDeviceLight(){return!0},SupportsSpeechSynthesis(){return!1},IsSpeaking(){return!1},OnCanvasRecordingReady(){return!0},SupportsCanvasRecording(){return!1},
IsCanvasRecordFormatSupported(){return!1}};"use strict";
{const e=self.C3;e.Plugins.UserMedia.Acts={async RequestCamera(d,c,f,g,h,m){if(!this._isRequesting){this._isRequesting=!0;d=Math.floor(d);f=Math.floor(f);g=Math.floor(g);var k={video:{}};0<=d&&d<this._videoSources.length&&(d=this._videoSources[d].deviceId)&&(k.video.deviceId={exact:d});0<c&&(k.video.facingMode={ideal:1===c?"user":"environment"});0<f&&0<g&&(k.video.width=f,k.video.height=g);h&&(k.audio={},0<=m&&m<this._audioSources.length&&(c=this._audioSources[m].deviceId)&&(k.audio.deviceId={exact:c}));
k=await this.PostToDOMElementAsync("request-camera",{constraints:k});this._isRequesting=!1;k.ok?(this._isVideoActive=!0,this._isVideoReady=!1,await this.TriggerAsync(e.Plugins.UserMedia.Cnds.OnApproved)):await this.TriggerAsync(e.Plugins.UserMedia.Cnds.OnDeclined)}},async RequestMic(d,c){if(!this._isRequesting){this._isRequesting=!0;c=Math.floor(c);var f={audio:{}};0<=c&&c<this._audioSources.length&&(c=this._audioSources[c].deviceId)&&(f.audio.deviceId={exact:c});d=await this.PostToDOMElementAsync("request-microphone",
{constraints:f,tag:d});this._isRequesting=!1;d.ok?await this.TriggerAsync(e.Plugins.UserMedia.Cnds.OnApproved):await this.TriggerAsync(e.Plugins.UserMedia.Cnds.OnDeclined)}},Stop(){this._isVideoReady=this._isVideoActive=!1;this._videoHeight=this._videoWidth=0;this.PostToDOMElement("stop");this._runtime.UpdateRender()},async Snapshot(d,c){this._snapshotUrl=(await this.PostToDOMElementAsync("snapshot",{format:0===d?"image/png":"image.jpeg",quality:c/100})).snapshotUrl;await this.TriggerAsync(e.Plugins.UserMedia.Cnds.OnSnapshot)},
async GetMediaSources(){const d=await this.PostToDOMAsync("get-media-sources");this._videoSources=d.videoSources;this._audioSources=d.audioSources;await this.TriggerAsync(e.Plugins.UserMedia.Cnds.OnMediaSources)},RequestSpeechRecognition(d,c,f){},StepSpeechRecognition(){},SpeakText(d,c,f,g,h,m){},StopSpeaking(){},PauseSpeaking(){},ResumeSpeaking(){},StartRecordingCanvas(){},StopRecordingCanvas(){}}}"use strict";
self.C3.Plugins.UserMedia.Exps={VideoWidth(){return this._videoWidth},VideoHeight(){return this._videoHeight},SnapshotURL(){return this._snapshotUrl},AudioSourceCount(){return this._audioSources.length},AudioSourceLabelAt(e){e=Math.floor(e);return 0>e||e>=this._audioSources.length?"":this._audioSources[e].label},CameraSourceCount(){return this._videoSources.length},CameraSourceLabelAt(e){e=Math.floor(e);return 0>e||e>=this._videoSources.length?"":this._videoSources[e].label},CameraSourceFacingAt(e){e=
Math.floor(e);return 0>e||e>=this._videoSources.length?"":this._videoSources[e].facing},FinalTranscript(){return""},InterimTranscript(){return""},SpeechError(){return""},AmbientLux(){return 0},VoiceCount(){return 0},VoiceNameAt(){return""},VoiceLangAt(){return""},VoiceURIAt(){return""},CanvasRecordingURL(){return""}};"use strict";{const e=self.C3;e.Plugins.GameRecorder=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.GameRecorder.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Plugins.GameRecorder.Instance=class extends e.SDKInstanceBase{constructor(d,c){super(d,"game-recorder");this._isScreenRecordingSupported=this._isMediaRecorderSupported=this._isSupported=!1;this._supportedVideoFormats=[];this._supportedAudioFormats=[];this._isRecording=!1;this._recordingType=this._recordingUrl="";this.AddDOMMessageHandlers([["recording-ready",f=>this._OnRecordingReady(f)],["error",f=>this._OnError(f)],["screen-recording-stopped",()=>this._OnRecordingStopped()]]);
this._runtime.AddLoadPromise(this.PostToDOMAsync("get-supported-formats").then(f=>{this._isSupported=f.isSupported;this._isMediaRecorderSupported=f.isMediaRecorderSupported;this._isScreenRecordingSupported=f.isScreenRecordingSupported;this._supportedVideoFormats=f.supportedVideoFormats;this._supportedAudioFormats=f.supportedAudioFormats}))}Release(){super.Release()}_GetVideoType(d){return 1===d?this._supportedVideoFormats[this._supportedVideoFormats.length-1]:2===d?"video/webm;codecs=vp8":3===d?"video/webm;codecs=vp9":
4===d?"video/mp4":""}_GetAudioType(d){return 1===d?this._supportedAudioFormats[this._supportedAudioFormats.length-1]:2===d?"audio/ogg;codecs=opus":3===d?"audio/webm;codecs=opus":4===d?"audio/mp4":""}async _OnRecordingReady(d){this._recordingUrl=d.url;await this.TriggerAsync(e.Plugins.GameRecorder.Cnds.OnRecordingReady)}async _OnError(d){await this.TriggerAsync(e.Plugins.GameRecorder.Cnds.OnRecordingError)}_OnRecordingStopped(){this._isRecording=!1;this._StopTicking()}Tick(){this._runtime.UpdateRender()}GetDebuggerProperties(){return[{title:"plugins.gamerecorder.name",
properties:[{name:"plugins.gamerecorder.debugger.supported-video-formats",value:this._supportedVideoFormats.join(", ")},{name:"plugins.gamerecorder.debugger.supported-audio-formats",value:this._supportedAudioFormats.join(", ")},{name:"plugins.gamerecorder.debugger.is-recording",value:this._isRecording}]}]}}}"use strict";
self.C3.Plugins.GameRecorder.Cnds={OnRecordingReady(){return!0},OnRecordingError(){return!0},SupportsRecording(){return this._isSupported},SupportsScreenRecording(){return this._isScreenRecordingSupported},IsVideoFormatSupported(e){return 0===e?this._supportedVideoFormats.includes("video/webm;codecs=vp8"):1===e?this._supportedVideoFormats.includes("video/webm;codecs=vp9"):2===e?this._supportedVideoFormats.includes("video/mp4"):!1},IsAudioFormatSupported(e){return 0===e?this._supportedAudioFormats.includes("audio/ogg;codecs=opus"):
1===e?this._supportedAudioFormats.includes("audio/webm;codecs=opus"):2===e?this._supportedAudioFormats.includes("audio/mp4"):!1},IsRecording(){return this._isRecording}};"use strict";
self.C3.Plugins.GameRecorder.Acts={StartRecording(e,d,c,f){this._isSupported&&!this._isRecording&&(e=this._GetVideoType(e),c=this._GetAudioType(c),e||c)&&(this._recordingType=e||c,this._isRecording=!0,this._StartTicking(),this.PostToDOM("start-recording",{videoType:e,audioType:c,bitsPerSecond:1E3*f,framerate:d}))},StartScreenRecording(e,d,c){this._isScreenRecordingSupported&&!this._isRecording&&(e=this._GetVideoType(e),d=this._GetAudioType(d),e||d)&&(this._recordingType=e||d,this._isRecording=!0,
this._PostToDOMMaybeSync("start-screen-recording",{videoType:e,audioType:d,bitsPerSecond:1E3*c}))},StartUserMediaRecording(e,d,c){this._isMediaRecorderSupported&&!this._isRecording&&(e=this._GetVideoType(e),d=this._GetAudioType(d),e||d)&&(this._recordingType=e||d,this._isRecording=!0,this.PostToDOM("start-user-media-recording",{videoType:e,audioType:d,bitsPerSecond:1E3*c}))},StopRecording(){this._isRecording&&(this._OnRecordingStopped(),this.PostToDOM("stop-recording"))}};"use strict";
self.C3.Plugins.GameRecorder.Exps={RecordingURL(){return this._recordingUrl},RecordingType(){return this._recordingType},RecordingFileExtension(){const e=this._recordingType;return e.startsWith("audio/ogg")?".ogg":e.startsWith("audio/mp4")?".m4a":e.startsWith("video/mp4")?".mp4":".webm"}};"use strict";{const e=self.C3;e.Plugins.Touch=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.Touch.Type=class extends e.SDKTypeBase{constructor(f){super(f)}Release(){super.Release()}OnCreate(){}GetScriptInterfaceClass(){return self.ITouchObjectType}};let d=null;function c(){return d.GetSingleGlobalInstance().GetSdkInstance()}self.ITouchObjectType=class extends self.IObjectClass{constructor(f){super(f);d=f;f.GetRuntime()._GetCommonScriptInterfaces().touch=this}requestPermission(f){const g=c();if("orientation"===f)return g._RequestPermission(0);if("motion"===f)return g._RequestPermission(1);
throw Error("invalid type");}}}"use strict";
{const e=self.C3;e.Plugins.Touch.Instance=class extends e.SDKInstanceBase{constructor(d,c){super(d,"touch");this._touches=new Map;this._isMouseDown=this._useMouseInput=!1;this._getTouchIndex=this._curTouchY=this._curTouchX=this._triggerPermission=this._triggerId=this._triggerIndex=this._accWithGZ=this._accWithGY=this._accWithGX=this._accZ=this._accY=this._accX=this._orientGamma=this._orientBeta=this._orientAlpha=this._orientCompassHeading=0;this._permissionPromises=[];c&&(this._useMouseInput=c[0]);
this.AddDOMMessageHandler("permission-result",f=>this._OnPermissionResult(f));d=this.GetRuntime().Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(d,"pointerdown",f=>this._OnPointerDown(f.data)),e.Disposable.From(d,"pointermove",f=>this._OnPointerMove(f.data)),e.Disposable.From(d,"pointerup",f=>this._OnPointerUp(f.data,!1)),e.Disposable.From(d,"pointercancel",f=>this._OnPointerUp(f.data,!0)),e.Disposable.From(d,"deviceorientation",f=>this._OnDeviceOrientation(f.data)),e.Disposable.From(d,
"deviceorientationabsolute",f=>this._OnDeviceOrientationAbsolute(f.data)),e.Disposable.From(d,"devicemotion",f=>this._OnDeviceMotion(f.data)),e.Disposable.From(d,"tick2",f=>this._OnTick2()))}Release(){this._touches.clear();super.Release()}_OnPointerDown(d){if("mouse"===d.pointerType)if(this._useMouseInput)this._isMouseDown=!0;else return;const c=d.pointerId;if(!this._touches.has(c)){var f=d.pageX-this._runtime.GetCanvasClientX(),g=d.pageY-this._runtime.GetCanvasClientY();d=d.timeStamp;var h=this._touches.size;
this._triggerIndex=h;this._triggerId=c;var m=e.New(e.Plugins.Touch.TouchInfo);m.Init(d,f,g,c,h);this._touches.set(c,m);this.Trigger(e.Plugins.Touch.Cnds.OnNthTouchStart);this.Trigger(e.Plugins.Touch.Cnds.OnTouchStart);this._curTouchX=f;this._curTouchY=g;this.Trigger(e.Plugins.Touch.Cnds.OnTouchObject)}}_OnPointerMove(d){if("mouse"!==d.pointerType||this._isMouseDown){var c=this._touches.get(d.pointerId);if(c){var f=d.timeStamp;if(!(2>f-c.GetTime())){var g=d.pageX-this._runtime.GetCanvasClientX(),h=
d.pageY-this._runtime.GetCanvasClientY();c.Update(f,g,h,d.width,d.height,d.pressure)}}}}_OnPointerUp(d,c){if("mouse"===d.pointerType)if(this._isMouseDown)this._isMouseDown=!1;else return;const f=d.timeStamp;d=d.pointerId;const g=this._touches.get(d);g&&(this._triggerIndex=g.GetStartIndex(),this._triggerId=g.GetId(),this.Trigger(e.Plugins.Touch.Cnds.OnNthTouchEnd),this.Trigger(e.Plugins.Touch.Cnds.OnTouchEnd),c||(c=g.ShouldTriggerTap(f),"single-tap"===c?(this.Trigger(e.Plugins.Touch.Cnds.OnTapGesture),
this._curTouchX=g.GetX(),this._curTouchY=g.GetY(),this.Trigger(e.Plugins.Touch.Cnds.OnTapGestureObject)):"double-tap"===c&&(this.Trigger(e.Plugins.Touch.Cnds.OnDoubleTapGesture),this._curTouchX=g.GetX(),this._curTouchY=g.GetY(),this.Trigger(e.Plugins.Touch.Cnds.OnDoubleTapGestureObject))),g.Release(),this._touches.delete(d))}_RequestPermission(d){this._PostToDOMMaybeSync("request-permission",{type:d});return new Promise((c,f)=>{this._permissionPromises.push({type:d,resolve:c,reject:f})})}_OnPermissionResult(d){const c=
d.result,f=d.type;this._triggerPermission=f;d=this._permissionPromises.filter(g=>g.type===f);for(const g of d)g.resolve(c?"granted":"denied");this._permissionPromises=this._permissionPromises.filter(g=>g.type!==f);c?(this.Trigger(e.Plugins.Touch.Cnds.OnPermissionGranted),0===f?this._runtime.RequestDeviceOrientationEvent():this._runtime.RequestDeviceMotionEvent()):this.Trigger(e.Plugins.Touch.Cnds.OnPermissionDenied)}_OnDeviceOrientation(d){"number"===typeof d.webkitCompassHeading?this._orientCompassHeading=
d.webkitCompassHeading:d.absolute&&(this._orientCompassHeading=d.alpha);this._orientAlpha=d.alpha;this._orientBeta=d.beta;this._orientGamma=d.gamma}_OnDeviceOrientationAbsolute(d){this._orientCompassHeading=d.alpha}_OnDeviceMotion(d){const c=d.acceleration;c&&(this._accX=c.x,this._accY=c.y,this._accZ=c.z);if(d=d.accelerationIncludingGravity)this._accWithGX=d.x,this._accWithGY=d.y,this._accWithGZ=d.z}_OnTick2(){const d=performance.now();let c=0;for(const f of this._touches.values())f.GetTime()<=d-
50&&f._SetLastTime(d),f.ShouldTriggerHold(d)&&(this._triggerIndex=f.GetStartIndex(),this._triggerId=f.GetId(),this._getTouchIndex=c,this.Trigger(e.Plugins.Touch.Cnds.OnHoldGesture),this._curTouchX=f.GetX(),this._curTouchY=f.GetY(),this.Trigger(e.Plugins.Touch.Cnds.OnHoldGestureObject),this._getTouchIndex=0),++c}_GetTouchByIndex(d){d=Math.floor(d);for(const c of this._touches.values()){if(0===d)return c;--d}return null}_IsClientPosOnCanvas(d,c){return 0<=d&&0<=c&&d<this._runtime.GetCanvasCssWidth()&&
c<this._runtime.GetCanvasCssHeight()}GetDebuggerProperties(){return[{title:"plugins.touch.debugger.touches",properties:[...this._touches.values()].map(d=>({name:"$"+d.GetId(),value:d.GetX()+", "+d.GetY()}))}]}}}"use strict";
{const e=self.C3,d=[];e.Plugins.Touch.Cnds={OnTouchStart(){return!0},OnTouchEnd(){return!0},IsInTouch(){return 0<this._touches.size},OnTouchObject(c){return c&&this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY)?this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(c,this._curTouchX,this._curTouchY,!1):!1},IsTouchingObject(c){if(!c)return!1;const f=c.GetCurrentSol();var g=f.GetInstances();for(const h of g){g=h.GetWorldInfo();const m=g.GetLayer();for(const k of this._touches.values()){if(!this._IsClientPosOnCanvas(k.GetX(),
k.GetY()))continue;const [a,b]=m.CanvasCssToLayer(k.GetX(),k.GetY(),g.GetTotalZElevation());if(g.ContainsPoint(a,b)){d.push(h);break}}}return d.length?(f.SetArrayPicked(d),c.ApplySolToContainer(),e.clearArray(d),!0):!1},CompareTouchSpeed(c,f,g){return(c=this._GetTouchByIndex(c))?e.compare(c.GetSpeed(),f,g):!1},OrientationSupported(){return!0},MotionSupported(){return!0},CompareOrientation(c,f,g){this._runtime.RequestDeviceOrientationEvent();return e.compare(0===c?this._orientAlpha:1===c?this._orientBeta:
this._orientGamma,f,g)},CompareAcceleration(c,f,g){this._runtime.RequestDeviceMotionEvent();return e.compare(0===c?this._accWithGX:1===c?this._accWithGY:2===c?this._accWithGZ:3===c?this._accX:4===c?this._accY:this._accZ,f,g)},OnNthTouchStart(c){c=Math.floor(c);return c===this._triggerIndex},OnNthTouchEnd(c){c=Math.floor(c);return c===this._triggerIndex},HasNthTouch(c){c=Math.floor(c);return this._touches.size>=c+1},OnHoldGesture(){return!0},OnTapGesture(){return!0},OnDoubleTapGesture(){return!0},
OnHoldGestureObject(c){return c&&this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY)?this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(c,this._curTouchX,this._curTouchY,!1):!1},OnTapGestureObject(c){return c&&this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY)?this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(c,this._curTouchX,this._curTouchY,!1):!1},OnDoubleTapGestureObject(c){return c&&this._IsClientPosOnCanvas(this._curTouchX,this._curTouchY)?this._runtime.GetCollisionEngine().TestAndSelectCanvasPointOverlap(c,
this._curTouchX,this._curTouchY,!1):!1},OnPermissionGranted(c){return this._triggerPermission===c},OnPermissionDenied(c){return this._triggerPermission===c}}}"use strict";self.C3.Plugins.Touch.Acts={RequestPermission(e){this._RequestPermission(e)}};"use strict";
{const e=self.C3;e.Plugins.Touch.Exps={TouchCount(){return this._touches.size},X(d){const c=this._GetTouchByIndex(this._getTouchIndex);return c?c.GetPositionForLayer(this._runtime.GetCurrentLayout(),d,!0):0},Y(d){const c=this._GetTouchByIndex(this._getTouchIndex);return c?c.GetPositionForLayer(this._runtime.GetCurrentLayout(),d,!1):0},XAt(d,c){return(d=this._GetTouchByIndex(d))?d.GetPositionForLayer(this._runtime.GetCurrentLayout(),c,!0):0},YAt(d,c){return(d=this._GetTouchByIndex(d))?d.GetPositionForLayer(this._runtime.GetCurrentLayout(),
c,!1):0},XForID(d,c){return(d=this._touches.get(d))?d.GetPositionForLayer(this._runtime.GetCurrentLayout(),c,!0):0},YForID(d,c){return(d=this._touches.get(d))?d.GetPositionForLayer(this._runtime.GetCurrentLayout(),c,!1):0},AbsoluteX(){const d=this._GetTouchByIndex(0);return d?d.GetX():0},AbsoluteY(){const d=this._GetTouchByIndex(0);return d?d.GetY():0},AbsoluteXAt(d){return(d=this._GetTouchByIndex(d))?d.GetX():0},AbsoluteYAt(d){return(d=this._GetTouchByIndex(d))?d.GetY():0},AbsoluteXForID(d){return(d=
this._touches.get(d))?d.GetX():0},AbsoluteYForID(d){return(d=this._touches.get(d))?d.GetY():0},SpeedAt(d){return(d=this._GetTouchByIndex(d))?d.GetSpeed():0},SpeedForID(d){return(d=this._touches.get(d))?d.GetSpeed():0},AngleAt(d){return(d=this._GetTouchByIndex(d))?e.toDegrees(d.GetAngle()):0},AngleForID(d){return(d=this._touches.get(d))?e.toDegrees(d.GetAngle()):0},CompassHeading(){this._runtime.RequestDeviceOrientationEvent();return this._orientCompassHeading},Alpha(){this._runtime.RequestDeviceOrientationEvent();
return this._orientAlpha},Beta(){this._runtime.RequestDeviceOrientationEvent();return this._orientBeta},Gamma(){this._runtime.RequestDeviceOrientationEvent();return this._orientGamma},AccelerationXWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGX},AccelerationYWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGY},AccelerationZWithG(){this._runtime.RequestDeviceMotionEvent();return this._accWithGZ},AccelerationX(){this._runtime.RequestDeviceMotionEvent();return this._accX},
AccelerationY(){this._runtime.RequestDeviceMotionEvent();return this._accY},AccelerationZ(){this._runtime.RequestDeviceMotionEvent();return this._accZ},TouchIndex(){return this._triggerIndex},TouchID(){return this._triggerId},WidthForID(d){return(d=this._touches.get(d))?d.GetWidth():0},HeightForID(d){return(d=this._touches.get(d))?d.GetHeight():0},PressureForID(d){return(d=this._touches.get(d))?d.GetPressure():0}}}"use strict";
{const e=self.C3;let d=-1E3,c=-1E3,f=-1E4;e.Plugins.Touch.TouchInfo=class extends e.DefendedBase{constructor(){super();this._pressure=this._height=this._width=this._lastY=this._lastX=this._y=this._x=this._startY=this._startX=this._lastTime=this._time=this._startTime=this._startIndex=this._pointerId=0;this._isTooFarForHold=this._hasTriggeredHold=!1}Release(){}Init(g,h,m,k,a){this._pointerId=k;this._startIndex=a;this._startTime=this._lastTime=this._time=g;this._startX=h;this._startY=m;this._x=h;this._y=
m;this._lastX=h;this._lastY=m}Update(g,h,m,k,a,b){this._lastTime=this._time;this._time=g;this._lastX=this._x;this._lastY=this._y;this._x=h;this._y=m;this._width=k;this._height=a;this._pressure=b;!this._isTooFarForHold&&15<=e.distanceTo(this._startX,this._startY,this._x,this._y)&&(this._isTooFarForHold=!0)}GetId(){return this._pointerId}GetStartIndex(){return this._startIndex}GetTime(){return this._time}_SetLastTime(g){this._lastTime=g}GetX(){return this._x}GetY(){return this._y}GetSpeed(){const g=
e.distanceTo(this._x,this._y,this._lastX,this._lastY),h=(this._time-this._lastTime)/1E3;return 0<h?g/h:0}GetAngle(){return e.angleTo(this._lastX,this._lastY,this._x,this._y)}GetWidth(){return this._width}GetHeight(){return this._height}GetPressure(){return this._pressure}ShouldTriggerHold(g){return this._hasTriggeredHold?!1:500<=g-this._startTime&&!this._isTooFarForHold&&15>e.distanceTo(this._startX,this._startY,this._x,this._y)?this._hasTriggeredHold=!0:!1}ShouldTriggerTap(g){if(this._hasTriggeredHold)return"";
if(333>=g-this._startTime&&!this._isTooFarForHold&&15>e.distanceTo(this._startX,this._startY,this._x,this._y)){if(666>=g-f&&25>e.distanceTo(d,c,this._x,this._y))return c=d=-1E3,f=-1E4,"double-tap";d=this._x;c=this._y;f=g;return"single-tap"}return""}GetPositionForLayer(g,h,m){return"undefined"===typeof h?g.GetLayerByIndex(0).CanvasCssToLayer_DefaultTransform(this._x,this._y)[m?0:1]:(g=g.GetLayer(h))?g.CanvasCssToLayer(this._x,this._y)[m?0:1]:0}}}"use strict";{const e=self.C3;e.Plugins.AJAX=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.AJAX.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Plugins.AJAX.Instance=class extends e.SDKInstanceBase{constructor(d,c){super(d);this._curTag=this._lastData="";this._progress=0;this._timeout=-1;this._nextRequestHeaders=new Map;this._nextReponseBinaryData=null;this._nextRequestOverrideMimeType="";this._nwjsAppFolder=this._nwjsPath=this._nwjsFs=null;if(this._isNWjs="nwjs"===this._runtime.GetExportType())this._nwjsFs=require("fs"),this._nwjsPath=require("path"),this._nwjsAppFolder=this._nwjsPath.dirname((self.process||nw.process).execPath)+
"\\"}Release(){super.Release()}async _TriggerError(d,c,f){console.error(`[Construct 3] AJAX request to '${c}' (tag '${d}') failed: `,f);this._curTag=d;await this.TriggerAsync(e.Plugins.AJAX.Cnds.OnAnyError);await this.TriggerAsync(e.Plugins.AJAX.Cnds.OnError)}async _TriggerComplete(d){this._curTag=d;await this.TriggerAsync(e.Plugins.AJAX.Cnds.OnAnyComplete);await this.TriggerAsync(e.Plugins.AJAX.Cnds.OnComplete)}async _OnProgress(d,c){c.lengthComputable&&(this._progress=c.loaded/c.total,this._curTag=
d,await this.TriggerAsync(e.Plugins.AJAX.Cnds.OnProgress))}_OnError(d,c,f){if(this._isNWjs){var g=this._nwjsFs,h=this._nwjsAppFolder+c;g.existsSync(h)?g.readFile(h,{encoding:"utf8"},(m,k)=>{m?this._TriggerError(d,c,m):(this._lastData=k.replace(/\r\n/g,"\n"),this._TriggerComplete(d))}):this._TriggerError(d,c,f)}else this._TriggerError(d,c,f)}async _DoCordovaRequest(d,c){const f=this._runtime.GetAssetManager(),g=this._nextReponseBinaryData;this._nextReponseBinaryData=null;try{if(g){const h=await f.CordovaFetchLocalFileAsArrayBuffer(c);
g.SetArrayBufferTransfer(h);this._lastData=""}else this._lastData=(await f.CordovaFetchLocalFileAsText(c)).replace(/\r\n/g,"\n");this._TriggerComplete(d)}catch(h){this._TriggerError(d,c,h)}}_DoRequest(d,c,f,g){return new Promise(h=>{const m=a=>{this._OnError(d,c,a);h()},k=this._nextReponseBinaryData;this._nextReponseBinaryData=null;try{const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(4===a.readyState){this._lastData=k?"":(a.responseText||"").replace(/\r\n/g,"\n");if(400<=a.status)this._TriggerError(d,
c,a.status+a.statusText);else{const b=this._lastData.length||k&&a.response instanceof ArrayBuffer;this._isNWjs&&!b||!this._isNWjs&&0===a.status&&!b||(k&&k.SetArrayBufferTransfer(a.response),this._TriggerComplete(d))}h()}};a.onerror=m;a.ontimeout=m;a.onabort=m;a.onprogress=b=>this._OnProgress(d,b);a.open(f,c);0<=this._timeout&&"undefined"!==typeof a.timeout&&(a.timeout=this._timeout);a.responseType=k?"arraybuffer":"text";g&&!this._nextRequestHeaders.has("Content-Type")&&("string"!==typeof g?a.setRequestHeader("Content-Type",
"application/octet-stream"):a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const [b,l]of this._nextRequestHeaders)try{a.setRequestHeader(b,l)}catch(p){console.error(`[Construct 3] AJAX: Failed to set header '${b}: ${l}': `,p)}this._nextRequestHeaders.clear();if(this._nextRequestOverrideMimeType){try{a.overrideMimeType(this._nextRequestOverrideMimeType)}catch(b){console.error("[Construct 3] AJAX: failed to override MIME type: ",b)}this._nextRequestOverrideMimeType=""}g?
a.send(g):a.send()}catch(a){m(a)}})}GetDebuggerProperties(){return[{title:"plugins.ajax.debugger.title",properties:[{name:"plugins.ajax.debugger.last-data",value:this._lastData}]}]}SaveToJson(){return{lastData:this._lastData}}LoadFromJson(d){this._lastData=d.lastData;this._curTag="";this._progress=0}}}"use strict";
{const e=self.C3;e.Plugins.AJAX.Cnds={OnComplete(d){return e.equalsNoCase(this._curTag,d)},OnAnyComplete(){return!0},OnError(d){return e.equalsNoCase(this._curTag,d)},OnAnyError(){return!0},OnProgress(d){return e.equalsNoCase(this._curTag,d)}}}"use strict";
{const e=self.C3;e.Plugins.AJAX.Acts={async Request(d,c){this._runtime.IsCordova()&&e.IsRelativeURL(c)&&"file:"===location.protocol?await this._DoCordovaRequest(d,c):this._runtime.IsPreview()&&e.IsRelativeURL(c)?(c=this._runtime.GetAssetManager().GetLocalUrlAsBlobUrl(c.toLowerCase()),await this._DoRequest(d,c,"GET",null)):await this._DoRequest(d,c,"GET",null)},async RequestFile(d,c){this._runtime.IsCordova()&&"file:"===location.protocol?await this._DoCordovaRequest(d,c):await this._DoRequest(d,this._runtime.GetAssetManager().GetLocalUrlAsBlobUrl(c),
"GET",null)},async Post(d,c,f,g){await this._DoRequest(d,c,g,f)},async PostBinary(d,c,f,g){f&&(f=f.GetFirstPicked(this._inst))&&(f=f.GetSdkInstance().GetArrayBufferReadOnly(),await this._DoRequest(d,c,g,f))},SetTimeout(d){this._timeout=1E3*d},SetHeader(d,c){this._nextRequestHeaders.set(d,c)},SetResponseBinary(d){d&&(d=d.GetFirstPicked(this._inst))&&(this._nextReponseBinaryData=d.GetSdkInstance())},OverrideMIMEType(d){this._nextRequestOverrideMimeType=d}}}"use strict";
self.C3.Plugins.AJAX.Exps={LastData(){return this._lastData},Progress(){return this._progress},Tag(){return this._curTag}};"use strict";{const e=self.C3;e.Plugins.Json=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.Json.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=self.IInstance;e.Plugins.Json.Instance=class extends e.SDKInstanceBase{constructor(f,g){super(f);this._valueCache=[null,null];this._locationCache=[null,null];this._data={};this._path=[];this._currentKey="";this._currentValue=0}Release(){super.Release()}_InvalidateValueCache(){this._valueCache[0]=null;this._valueCache[1]=null}_HasValueCache(f){return null===f||null===this._valueCache[0]?!1:this._valueCache[0]===f||e.arraysEqual(this._valueCache[0],f)}_GetValueCache(){return this._valueCache[1]}_UpdateValueCache(f,
g){this._valueCache[0]=f;this._valueCache[1]=g}_InvalidateLocationCache(){this._locationCache[0]=null;this._locationCache[1]=null}_HasLocationCache(f){return this._locationCache[0]===f}_GetLocationCache(){return this._locationCache[1]}_UpdateLocationCache(f,g){this._locationCache[0]=f;this._locationCache[1]=g}_SetData(f){this._data=f;this._InvalidateValueCache()}_GetData(){return this._data}_SetPath(f){this._path=this._ParsePathUnsafe(f);this._InvalidateLocationCache()}_ParsePath(f){return e.cloneArray(this._ParsePathUnsafe(f))}_ParsePathUnsafe(f){const g=
[];let h=!1,m;if(this._HasLocationCache(f))return this._GetLocationCache();"."===f[0]?(m=e.cloneArray(this._path),f=f.slice(1)):m=[];for(const k of f)h?(g.push(k),h=!1):"\\"===k?h=!0:"."===k?(m.push(g.join("")),e.clearArray(g)):g.push(k);0!==g.length&&m.push(g.join(""));this._UpdateLocationCache(f,m);return m}_GetValueAtFullPath(f,g){if(this._HasValueCache(f))return this._GetValueCache();let h=this._data;for(const k of f)if(Array.isArray(h)){var m=parseInt(k,10);if(0>m||m>=h.length||!isFinite(m)){h=
null;break}h=h[m]}else if("object"===typeof h&&null!==h)if(h.hasOwnProperty(k))h=h[k];else if(g)m={},h=h[k]=m;else{h=null;break}else{h=null;break}this._UpdateValueCache(f,h);return h}_GetValue(f){var g=this._ParsePath(f);if(!g.length)return this._data;f=g.pop();g=this._GetValueAtFullPath(g,!1);return Array.isArray(g)?(f=parseInt(f,10),0<=f&&f<g.length?g[f]:null):"object"===typeof g&&null!==g?g.hasOwnProperty(f)?g[f]:null:null}_JSONTypeOf(f){return null===f?"null":Array.isArray(f)?"array":typeof f}_GetTypeOf(f){f=
this._GetValue(f);return this._JSONTypeOf(f)}_ToSafeValue(f){const g=typeof f;return"number"===g||"string"===g?f:"boolean"===g?f?1:0:0}_GetSafeValue(f){return this._ToSafeValue(this._GetValue(f))}_HasKey(f){var g=this._ParsePath(f);if(!g.length)return!1;f=g.pop();g=this._GetValueAtFullPath(g,!1);return Array.isArray(g)?(f=parseInt(f,10),0<=f&&f<g.length):"object"===typeof g&&null!==g?g.hasOwnProperty(f):!1}_SetValue(f,g){var h=this._ParsePath(f);if(!h.length)return!1;this._HasValueCache(h)&&this._InvalidateValueCache();
f=h.pop();h=this._GetValueAtFullPath(h,!0);if(Array.isArray(h)){f=parseInt(f,10);if(!isFinite(f)||0>f||f>=h.length)return!1;h[f]=g;return!0}return"object"===typeof h&&null!==h?(h[f]=g,!0):!1}_DeleteKey(f){var g=this._ParsePath(f);if(!g.length)return!1;this._HasValueCache(g)&&this._InvalidateValueCache();f=g.pop();g=this._GetValueAtFullPath(g,!1);return Array.isArray(g)?!1:"object"===typeof g&&null!==g?(delete g[f],!0):!1}SaveToJson(){return{path:this._path,data:this._data}}LoadFromJson(f){this._InvalidateValueCache();
this._InvalidateLocationCache();this._path=f.path;this._data=f.data}_SanitizeValue(f){return"number"===typeof f?isFinite(f)?f:0:"object"==typeof f?JSON.stringify(f):f+""}GetDebuggerProperties(){let f;try{f=this._SanitizeValue(this._data)}catch(g){f='"invalid"'}return[{title:"plugins.json.debugger.title",properties:[{name:"plugins.json.debugger.data",value:f,onedit:g=>{try{const h=JSON.parse(g);this._SetData(h)}catch(h){}}},{name:"plugins.json.debugger.path",value:this._path.map(g=>g.replace(/\./g,
"\\.")).join(".")}]}]}GetScriptInterfaceClass(){return self.IJSONInstance}};const c=new WeakMap;self.IJSONInstance=class extends d{constructor(){super();c.set(this,d._GetInitInst().GetSdkInstance())}getJsonDataCopy(){const f=c.get(this)._GetData();return JSON.parse(JSON.stringify(f))}setJsonDataCopy(f){try{const g=JSON.parse(JSON.stringify(f));c.get(this)._SetData(g)}catch(g){throw console.error("[JSON plugin] setJsonData: object is not valid JSON: ",g),g;}}setJsonString(f){try{const g=JSON.parse(f);
c.get(this)._SetData(g)}catch(g){throw console.error("[JSON plugin] setJsonString: string is not valid JSON: ",g),g;}}toCompactString(){return JSON.stringify(c.get(this)._GetData())}toBeautifiedString(){return JSON.stringify(c.get(this)._GetData(),null,4)}}}"use strict";
{const e=self.C3,d="null boolean number string object array".split(" ");e.Plugins.Json.Cnds={HasKey(c){return this._HasKey(c)},CompareType(c,f){return this._GetTypeOf(c)===d[f]},CompareValue(c,f,g){return e.compare(this._GetSafeValue(c),f,g)},IsBooleanSet(c){return!0===this._GetValue(c)},ForEach(c){const f=this._GetValue(c);if("object"!==typeof f||null===f)return!1;const g=this._runtime,h=g.GetEventSheetManager(),m=g.GetCurrentEvent(),k=m.GetSolModifiers(),a=g.GetEventStack(),b=a.GetCurrentStackFrame(),
l=a.Push(m),p=this._path,r=this._currentKey,t=this._currentValue;c=this._ParsePathUnsafe(c);g.SetDebuggingEnabled(!1);for(const [u,w]of Object.entries(f))this._path=e.cloneArray(c),this._path.push(u),this._currentKey=u,this._currentValue=w,h.PushCopySol(k),m.Retrigger(b,l),h.PopSol(k);g.SetDebuggingEnabled(!0);this._path=p;this._currentKey=r;this._currentValue=t;a.Pop();return!1},OnParseError(){return!0}}}"use strict";
{const e=self.C3;e.Plugins.Json.Acts={Parse(d){try{this._SetData(JSON.parse(d))}catch(c){console.warn("[JSON plugin] Failed to parse JSON data: ",c),this._SetData({}),this.Trigger(e.Plugins.Json.Cnds.OnParseError)}},SetPath(d){this._SetPath(d)},SetValue(d,c){this._SetValue(d,c)},SetArray(d,c){let f=this._GetValue(d);Array.isArray(f)?e.resizeArray(f,c,0):(f=[],e.extendArray(f,c,0),this._SetValue(d,f))},SetObject(d){this._SetValue(d,{})},SetJSON(d,c){let f=null;try{f=JSON.parse(c)}catch(g){console.warn("[JSON plugin] Failed to parse JSON data: ",
g),this.Trigger(e.Plugins.Json.Cnds.OnParseError)}this._SetValue(d,f)},SetNull(d){this._SetValue(d,null)},SetBoolean(d,c){this._SetValue(d,0!==c)},ToggleBoolean(d){const c=this._GetValue(d);"boolean"===typeof c&&this._SetValue(d,!c)},AddTo(d,c){const f=this._GetValue(d);"number"===typeof f&&this._SetValue(d,f+c)},SubtractFrom(d,c){const f=this._GetValue(d);"number"===typeof f&&this._SetValue(d,f-c)},DeleteKey(d){this._DeleteKey(d)},PushValue(d,c,f){c=this._GetValue(c);Array.isArray(c)&&(0===d?c.push(f):
c.unshift(f))},PopValue(d,c){c=this._GetValue(c);Array.isArray(c)&&(0===d?c.pop():c.shift())},InsertValue(d,c,f){c=this._GetValue(c);Array.isArray(c)&&c.splice(f,0,d)},RemoveValues(d,c,f){c=this._GetValue(c);Array.isArray(c)&&c.splice(f,d)}}}"use strict";
self.C3.Plugins.Json.Exps={ToCompactString(){try{return JSON.stringify(this._data)}catch(e){return""}},ToBeautifiedString(){try{return JSON.stringify(this._data,null,4)}catch(e){return""}},Get(e){return this._GetSafeValue(e)},GetAsCompactString(e){e=this._GetValue(e);return JSON.stringify(e)},GetAsBeautifiedString(e){e=this._GetValue(e);return JSON.stringify(e,null,4)},Front(e){e=this._GetValue(e);return Array.isArray(e)?this._ToSafeValue(e[0]):-1},Back(e){e=this._GetValue(e);return Array.isArray(e)?
this._ToSafeValue(e[e.length-1]):-1},Type(e){return this._GetTypeOf(e)},ArraySize(e){e=this._GetValue(e);return Array.isArray(e)?e.length:-1},Path(){return this._path.map(e=>e.replace(/\./g,"\\.")).join(".")},CurrentKey(){return this._currentKey},CurrentValue(){return this._ToSafeValue(this._currentValue)},CurrentType(){return this._JSONTypeOf(this._currentValue)}};"use strict";
{const e=self.C3;e.Plugins.gamepad=class extends e.SDKPluginBase{constructor(d){super(d);this._isSupported=!1;this._runtime.AddLoadPromise(this._runtime.PostComponentMessageToDOMAsync("gamepad","is-supported").then(c=>this._isSupported=!!c))}Release(){super.Release()}IsSupported(){return this._isSupported}}}"use strict";{const e=self.C3;e.Plugins.gamepad.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;class d{constructor(f,g){this._index=f;this._id=g;this._state=new c;this._oldState=new c}GetID(){return this._id}Update(f,g){const h=this._oldState;this._oldState=this._state;this._state=h;this._state.Update(f,g)}GetButtonCount(){return this._state.GetButtonCount()}GetAxisCount(){return this._state.GetAxisCount()}HasButtonBecomePressed(f){return.5<=this._state.GetButtonAt(f)&&.5>this._oldState.GetButtonAt(f)}HasButtonBecomeReleased(f){return.5>this._state.GetButtonAt(f)&&.5<=this._oldState.GetButtonAt(f)}GetButtonAt(f){return this._state.GetButtonAt(f)}IsButtonDown(f){return.5<=
this._state.GetButtonAt(f)}GetAxisAt(f){return this._state.GetAxisAt(f)}}class c{constructor(){this._buttons=[];this._axes=[]}Update(f,g){const h=this._buttons;let m=0;for(let k=f.length;m<k;++m){const a=f[m];m===h.length?h.push(a.value):h[m]=a.value}m<h.length&&e.truncateArray(h,m);e.shallowAssignArray(this._axes,g)}GetButtonCount(){return this._buttons.length}GetAxisCount(){return this._axes.length}GetButtonAt(f){f=Math.floor(f);return 0>f||f>=this._buttons.length?0:this._buttons[f]}GetAxisAt(f){f=
Math.floor(f);return 0>f||f>=this._axes.length?0:this._axes[f]}}e.Plugins.gamepad.Instance=class extends e.SDKInstanceBase{constructor(f,g){super(f,"gamepad");this._deadZone=25;this._lastButton=0;this._lastIndex=-1;this._gamepads=new Map;g&&(this._deadZone=g[0]);this.AddDOMMessageHandler("gamepad-connected",h=>this._OnGamepadConnected(h));this.AddDOMMessageHandler("gamepad-disconnected",h=>this._OnGamepadDisconnected(h));this.AddDOMMessageHandler("input-update",h=>this._OnInputUpdate(h));this.PostToDOM("ready")}Release(){super.Release()}_OnGamepadConnected(f){const g=
f.index;this._lastIndex=g;f=f.id;this._gamepads.has(g)||(this._gamepads.set(g,new d(g,f)),this.Trigger(e.Plugins.gamepad.Cnds.OnGamepadConnected),this._lastIndex=-1)}_OnGamepadDisconnected(f){this._lastIndex=f=f.index;this.Trigger(e.Plugins.gamepad.Cnds.OnGamepadDisconnected);this._gamepads.delete(f);this._lastIndex=-1}_OnInputUpdate(f){for(const g of f)this._OnGamepadInputUpdate(g)}_OnGamepadInputUpdate(f){var g=f.index;this._gamepads.has(g)||this._OnGamepadConnected(f);g=this._gamepads.get(g);g.Update(f.buttons,
f.axes);for(let h=0,m=g.GetButtonCount();h<m;++h)g.HasButtonBecomePressed(h)&&(this._lastButton=h)}_GetGamepadByIndex(f){return this._gamepads.get(Math.floor(f))||null}GetDebuggerProperties(){return[{title:"plugins.gamepad.name",properties:[{name:"plugins.gamepad.debugger.last-button",value:this._lastButton}]}]}}}"use strict";
{const e=self.C3;e.Plugins.gamepad.Cnds={SupportsGamepad(){return this.GetPlugin().IsSupported()},OnGamepadConnected(){return!0},OnGamepadDisconnected(){return!0},IsButtonDown(d,c){d=this._GetGamepadByIndex(d);if(!d)return!1;if(d=d.IsButtonDown(c))this._lastButton=c;return d},OnButtonDown(d,c){d=this._GetGamepadByIndex(d);if(!d)return!1;if(d=d.HasButtonBecomePressed(c))this._lastButton=c;return d},OnButtonUp(d,c){d=this._GetGamepadByIndex(d);if(!d)return!1;if(d=d.HasButtonBecomeReleased(c))this._lastButton=
c;return d},HasGamepads(){return 0<this._gamepads.size},CompareAxis(d,c,f,g){c=Math.floor(c);const h=this._GetGamepadByIndex(d);if(!h)return!1;d=h.GetAxisAt(c);c=0===c%2?h.GetAxisAt(c+1):h.GetAxisAt(c-1);d*=100;Math.hypot(d,100*c)<=this._deadZone&&(d=0);return e.compare(d,f,g)},OnAnyButtonDown(d){d=this._GetGamepadByIndex(d);if(!d)return!1;for(let c=0,f=d.GetButtonCount();c<f;++c)if(d.HasButtonBecomePressed(c))return this._lastButton=c,!0;return!1},OnAnyButtonUp(d){d=this._GetGamepadByIndex(d);if(!d)return!1;
for(let c=0,f=d.GetButtonCount();c<f;++c)if(d.HasButtonBecomeReleased(c))return this._lastButton=c,!0;return!1},IsButtonIndexDown(d,c){c=Math.floor(c);d=this._GetGamepadByIndex(d);if(!d)return!1;if(d=d.IsButtonDown(c))this._lastButton=c;return d},OnButtonIndexDown(d,c){c=Math.floor(c);d=this._GetGamepadByIndex(d);if(!d)return!1;if(d=d.HasButtonBecomePressed(c))this._lastButton=c;return d},OnButtonIndexUp(d,c){c=Math.floor(c);d=this._GetGamepadByIndex(d);if(!d)return!1;if(d=d.HasButtonBecomeReleased(c))this._lastButton=
c;return d}}}"use strict";{const e=self.C3;e.Plugins.gamepad.Acts={Vibrate(d,c,f,g){this.PostToDOM("vibrate",{index:d,duration:c,weakMag:e.clamp(f/100,0,1),strongMag:e.clamp(g/100,0,1)})},ResetVibrate(d){this.PostToDOM("reset-vibrate",{index:d})}}}"use strict";
self.C3.Plugins.gamepad.Exps={GamepadCount(){return this._gamepads.size},GamepadID(e){return(e=this._GetGamepadByIndex(e))?e.GetID():""},GamepadIndex(){return this._lastIndex},GamepadAxes(e){e=this._GetGamepadByIndex(e);if(!e)return"";let d="";for(let c=0,f=e.GetAxisCount();c<f;++c)d+=`Axis ${c}: ${Math.round(100*e.GetAxisAt(c))}\n`;return d},GamepadButtons(e){e=this._GetGamepadByIndex(e);if(!e)return"";let d="";for(let c=0,f=e.GetButtonCount();c<f;++c)d+=`Button ${c}: ${Math.round(100*e.GetButtonAt(c))}\n`;
return d},RawButton(e,d){return(e=this._GetGamepadByIndex(e))?e.GetButtonAt(Math.floor(d)):0},RawAxis(e,d){return(e=this._GetGamepadByIndex(e))?e.GetAxisAt(Math.floor(d)):0},RawButtonCount(e){return(e=this._GetGamepadByIndex(e))?e.GetButtonCount():0},RawAxisCount(e){return(e=this._GetGamepadByIndex(e))?e.GetAxisCount():0},Button(e,d){return(e=this._GetGamepadByIndex(e))?100*e.GetButtonAt(Math.floor(d)):0},Axis(e,d){d=Math.floor(d);const c=this._GetGamepadByIndex(e);if(!c)return 0;e=c.GetAxisAt(d);
d=0===d%2?c.GetAxisAt(d+1):c.GetAxisAt(d-1);e*=100;Math.hypot(e,100*d)<=this._deadZone&&(e=0);return e},LastButton(){return this._lastButton}};"use strict";{const e=self.C3;e.Plugins.Dictionary=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.Dictionary.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=self.IInstance;e.Plugins.Dictionary.Instance=class extends e.SDKInstanceBase{constructor(f,g){super(f);this._data=new Map;this._curKey=""}Release(){this._data.clear();super.Release()}GetAsJsonString(){return JSON.stringify({c2dictionary:!0,data:e.MapToObject(this._data)})}GetDataMap(){return this._data}SaveToJson(){return e.MapToObject(this._data)}LoadFromJson(f){e.ObjectToMap(f,this._data)}GetDebuggerProperties(){return[{title:"plugins.dictionary.name",properties:[{name:"plugins.dictionary.debugger.key-count",
value:this._data.size},...[...this._data].map(f=>({name:"$"+f[0],value:f[1],onedit:g=>this._data.set(f[0],g)}))]}]}GetScriptInterfaceClass(){return self.IDictionaryInstance}};const c=new WeakMap;self.IDictionaryInstance=class extends d{constructor(){super();c.set(this,d._GetInitInst().GetSdkInstance())}getDataMap(){return c.get(this).GetDataMap()}}}"use strict";
{const e=self.C3;e.Plugins.Dictionary.Cnds={CompareValue(d,c,f){d=this._data.get(d);return"undefined"===typeof d?!1:e.compare(d,c,f)},ForEachKey(){const d=this._runtime,c=d.GetEventSheetManager(),f=d.GetCurrentEvent(),g=f.GetSolModifiers(),h=d.GetEventStack(),m=h.GetCurrentStackFrame(),k=h.Push(f);d.SetDebuggingEnabled(!1);for(const a of this._data.keys())this._curKey=a,c.PushCopySol(g),f.Retrigger(m,k),c.PopSol(g);d.SetDebuggingEnabled(!0);this._curKey="";h.Pop();return!1},CompareCurrentValue(d,
c){const f=this._data.get(this._curKey);return"undefined"===typeof f?!1:e.compare(f,d,c)},HasKey(d){return this._data.has(d)},IsEmpty(){return 0===this._data.size}}}"use strict";
{const e=self.C3;e.Plugins.Dictionary.Acts={AddKey(d,c){this._data.set(d,c)},SetKey(d,c){this._data.has(d)&&this._data.set(d,c)},DeleteKey(d){this._data.delete(d)},Clear(){this._data.clear()},JSONLoad(d){let c=null;try{c=JSON.parse(d)}catch(f){console.error("[Construct 3] Error parsing JSON: ",f);return}c.c2dictionary&&e.ObjectToMap(c.data,this._data)},JSONDownload(d){const c=URL.createObjectURL(new Blob([this.GetAsJsonString()],{type:"application/json"}));this._runtime.InvokeDownload(c,d)}}}"use strict";
self.C3.Plugins.Dictionary.Exps={Get(e){e=this._data.get(e);return"undefined"===typeof e?0:e},GetDefault(e,d){e=this._data.get(e);return"undefined"===typeof e?d:e},KeyCount(){return this._data.size},CurrentKey(){return this._curKey},CurrentValue(){return this._data.get(this._curKey)||0},AsJSON(){return this.GetAsJsonString()}};"use strict";{const e=self.C3;e.Plugins.Sprite=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.Sprite.Type=class extends e.SDKTypeBase{constructor(d){super(d);this._animations=d.GetAnimations()}Release(){e.clearArray(this._animations);super.Release()}OnCreate(){for(const d of this._animations)d.LoadAllAssets(this._runtime)}LoadTextures(d){const c={sampling:this._runtime.GetSampling()};return Promise.all(this._animations.map(f=>f.LoadAllTextures(d,c)))}ReleaseTextures(){for(const d of this._animations)d.ReleaseAllTextures()}OnDynamicTextureLoadComplete(){this._UpdateAllCurrentTexture()}_UpdateAllCurrentTexture(){for(const d of this._objectClass.instancesIncludingPendingCreate())d.GetSdkInstance()._UpdateCurrentTexture()}FinishCondition(d){e.Plugins.Sprite._FinishCondition(this,
d)}}}"use strict";
{const e=self.C3,d=e.New(e.Rect),c=e.New(e.Quad),f=e.New(e.Vector2);e.Plugins.Sprite.Instance=class extends e.SDKWorldInstanceBase{constructor(m,k){super(m);let a=!0,b="",l=0,p=!0;k&&(a=!!k[0],b=k[1],l=k[2],p=k[3]);this._currentAnimation=this._objectClass.GetAnimationByName(b)||this._objectClass.GetAnimations()[0];this._currentFrameIndex=e.clamp(l,0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationFrame=this._currentAnimation.GetFrameAt(this._currentFrameIndex);k=this._currentAnimationFrame.GetImageInfo();
this._currentTexture=k.GetTexture();this._currentRcTex=k.GetTexRect();this.HandleWebGLContextLoss();m.SetFlag(2,!0);m.SetFlag(1,0<=this._currentAnimation.GetSpeed());this._currentAnimationSpeed=Math.abs(this._currentAnimation.GetSpeed());this._currentAnimationRepeatTo=this._currentAnimation.GetRepeatTo();this._animationTimer=e.New(e.KahanSum);this._animationRepeats=this._frameStartTime=0;this._animTriggerName="";this._changeAnimFrameIndex=-1;this._changeAnimationName="";this._changeAnimationFrom=
0;m=this.GetWorldInfo();this._bquadRef=m.GetBoundingQuad();m.SetVisible(a);m.SetCollisionEnabled(p);m.SetOriginX(this._currentAnimationFrame.GetOriginX());m.SetOriginY(this._currentAnimationFrame.GetOriginY());m.SetSourceCollisionPoly(this._currentAnimationFrame.GetCollisionPoly());m.SetBboxChanged();1===this._objectClass.GetAnimationCount()&&1===this._objectClass.GetAnimations()[0].GetFrameCount()||0===this._currentAnimationSpeed||this._StartTicking()}Release(){this._animationTimer=this._currentTexture=
this._currentAnimationFrame=this._currentAnimation=null;super.Release()}GetCurrentImageInfo(){return this._currentAnimationFrame.GetImageInfo()}OnWebGLContextLost(){this._currentTexture=null}OnWebGLContextRestored(){this._UpdateCurrentTexture()}Draw(m){var k=this._currentTexture;null!==k&&(m.SetTexture(k),k=this.GetWorldInfo(),k.HasMesh()?this._DrawMesh(k,m):this._DrawStandard(k,m))}_DrawStandard(m,k){let a=this._bquadRef;this._runtime.IsPixelRoundingEnabled()&&(a=m.PixelRoundQuad(a));k.Quad3(a,this._currentRcTex)}_DrawMesh(m,
k){const a=m.GetTransformedMesh();if(m.IsMeshChanged()){m.CalculateBbox(d,c,!1);let b=c;this._runtime.IsPixelRoundingEnabled()&&(b=m.PixelRoundQuad(b));a.CalculateTransformedMesh(m.GetSourceMesh(),b,this._currentRcTex);m.SetMeshChanged(!1)}a.Draw(k)}GetAnimationTime(){return this._animationTimer.Get()}IsAnimationPlaying(){return this._inst.GetFlag(2)}SetAnimationPlaying(m){this._inst.SetFlag(2,m)}IsPlayingForwards(){return this._inst.GetFlag(1)}SetPlayingForwards(m){this._inst.SetFlag(1,m)}IsInAnimationTrigger(){return this._inst.GetFlag(4)}SetInAnimationTrigger(m){this._inst.SetFlag(4,
m)}Tick(){this._changeAnimationName&&this._DoChangeAnimation();0<=this._changeAnimFrameIndex&&this._DoChangeAnimFrame();const m=this._currentAnimationSpeed;if(this.IsAnimationPlaying()&&0!==m){var k=this._runtime.GetDt(this._inst);this._animationTimer.Add(k);k=this.GetAnimationTime();var a=this._currentAnimationFrame,b=a.GetDuration()/m;if(!(k<this._frameStartTime+b)){var l=this._currentAnimation,p=this._currentAnimationRepeatTo,r=l.GetFrameCount(),t=l.GetRepeatCount(),u=l.IsLooping(),w=l.IsPingPong();
this.IsPlayingForwards()?this._currentFrameIndex++:this._currentFrameIndex--;this._frameStartTime+=b;this._currentFrameIndex>=r&&(w?(this.SetPlayingForwards(!1),this._currentFrameIndex=r-2):u?this._currentFrameIndex=p:(this._animationRepeats++,this._animationRepeats>=t?this._FinishAnimation(!1):this._currentFrameIndex=p));0>this._currentFrameIndex&&(w?(this._currentFrameIndex=1,this.SetPlayingForwards(!0),u||(this._animationRepeats++,this._animationRepeats>=t&&this._FinishAnimation(!0))):u?this._currentFrameIndex=
p:(this._animationRepeats++,this._animationRepeats>=t?this._FinishAnimation(!0):this._currentFrameIndex=p));this._currentFrameIndex=e.clamp(this._currentFrameIndex,0,r-1);b=l.GetFrameAt(this._currentFrameIndex);k>this._frameStartTime+b.GetDuration()/m&&(this._frameStartTime=k);this._OnFrameChanged(a,b)}}else this._StopTicking()}_FinishAnimation(m){this._currentFrameIndex=m?0:this._currentAnimation.GetFrameCount()-1;this.SetAnimationPlaying(!1);this._animTriggerName=this._currentAnimation.GetName();
this.SetInAnimationTrigger(!0);this.Trigger(e.Plugins.Sprite.Cnds.OnAnyAnimFinished);this.Trigger(e.Plugins.Sprite.Cnds.OnAnimFinished);this.SetInAnimationTrigger(!1);this._animationRepeats=0}_OnFrameChanged(m,k){if(m!==k){var a=this.GetWorldInfo(),b=m.GetImageInfo(),l=k.GetImageInfo(),p=b.GetWidth();b=b.GetHeight();var r=l.GetWidth(),t=l.GetHeight();p!==r&&a.SetWidth(a.GetWidth()*(r/p));b!==t&&a.SetHeight(a.GetHeight()*(t/b));a.SetOriginX(k.GetOriginX());a.SetOriginY(k.GetOriginY());a.SetSourceCollisionPoly(k.GetCollisionPoly());
a.SetBboxChanged();this._currentAnimationFrame=k;this._currentTexture=l.GetTexture();this._currentRcTex=l.GetTexRect();a=this.GetInstance().GetBehaviorInstances();for(let u=0,w=a.length;u<w;++u)a[u].OnSpriteFrameChanged(m,k);this.Trigger(e.Plugins.Sprite.Cnds.OnFrameChanged);this._runtime.UpdateRender()}}_StartAnim(m){this.SetAnimationPlaying(!0);this._frameStartTime=this.GetAnimationTime();1===m&&0!==this._currentFrameIndex&&(this._changeAnimFrameIndex=0,this.IsInAnimationTrigger()||this._DoChangeAnimFrame());
this._StartTicking()}_SetAnim(m,k){this._changeAnimationName=m;this._changeAnimationFrom=k;this._StartTicking();this.IsInAnimationTrigger()||this._DoChangeAnimation()}_GetCurrentAnimationName(){return this._changeAnimationName?this._changeAnimationName:this._currentAnimation.GetName()}_SetAnimFrame(m){isFinite(m)&&(this._changeAnimFrameIndex=m,this.IsInAnimationTrigger()||this._DoChangeAnimFrame())}_GetAnimFrame(){return this._currentFrameIndex}_SetAnimSpeed(m){this._currentAnimationSpeed=Math.abs(m);
this.SetPlayingForwards(0<=m);0<this._currentAnimationSpeed&&this._StartTicking()}_GetAnimSpeed(){return this.IsPlayingForwards()?this._currentAnimationSpeed:-this._currentAnimationSpeed}_SetAnimRepeatToFrame(m){this._currentAnimationRepeatTo=m=e.clamp(Math.floor(m),0,this._currentAnimation.GetFrameCount()-1)}_GetAnimRepeatToFrame(){return this._currentAnimationRepeatTo}_DoChangeAnimation(){const m=this._currentAnimationFrame;var k=this._objectClass.GetAnimationByName(this._changeAnimationName);this._changeAnimationName=
"";!k||k===this._currentAnimation&&this.IsAnimationPlaying()||(this._currentAnimation=k,this.SetPlayingForwards(0<=k.GetSpeed()),this._currentAnimationSpeed=Math.abs(k.GetSpeed()),this._currentAnimationRepeatTo=k.GetRepeatTo(),this._currentFrameIndex=e.clamp(this._currentFrameIndex,0,this._currentAnimation.GetFrameCount()-1),1===this._changeAnimationFrom&&(this._currentFrameIndex=0),this.SetAnimationPlaying(!0),this._frameStartTime=this.GetAnimationTime(),k=this._currentAnimation.GetFrameAt(this._currentFrameIndex),
this._OnFrameChanged(m,k))}_DoChangeAnimFrame(){const m=this._currentAnimationFrame;var k=this._currentFrameIndex;this._currentFrameIndex=e.clamp(Math.floor(this._changeAnimFrameIndex),0,this._currentAnimation.GetFrameCount()-1);this._changeAnimFrameIndex=-1;k!==this._currentFrameIndex&&(k=this._currentAnimation.GetFrameAt(this._currentFrameIndex),this._OnFrameChanged(m,k),this._frameStartTime=this.GetAnimationTime())}_UpdateCurrentTexture(){const m=this._currentAnimationFrame.GetImageInfo();this._currentTexture=
m.GetTexture();this._currentRcTex=m.GetTexRect();this.GetWorldInfo().SetMeshChanged(!0)}GetImagePointCount(){return this._currentAnimationFrame.GetImagePointCount()}GetImagePoint(m){const k=this._currentAnimationFrame,a=this.GetWorldInfo();if("string"===typeof m)m=k.GetImagePointByName(m);else if("number"===typeof m)m=k.GetImagePointByIndex(m-1);else throw new TypeError("expected string or number");if(!m)return[a.GetX(),a.GetY()];f.copy(m.GetVec2());if(a.HasMesh()){const [b,l]=a.GetSourceMesh().TransformPoint(f.getX(),
f.getY());f.set(b,l)}f.offset(-k.GetOriginX(),-k.GetOriginY());f.scale(a.GetWidth(),a.GetHeight());f.rotate(a.GetAngle());f.offset(a.GetX(),a.GetY());return[f.getX(),f.getY()]}GetCollisionPolyPointCount(){return this.GetWorldInfo().GetTransformedCollisionPoly().pointCount()}GetCollisionPolyPoint(m){m=Math.floor(m);const k=this.GetWorldInfo();var a=k.GetTransformedCollisionPoly();const b=a.pointCount();m===b&&(m=0);if(0>m||m>=b)return[0,0];a=a.pointsArr();return[a[2*m]+k.GetX(),a[2*m+1]+k.GetY()]}GetDebuggerProperties(){const m=
e.Plugins.Sprite.Acts;return[{title:"plugins.sprite.debugger.animation-properties.title",properties:[{name:"plugins.sprite.debugger.animation-properties.current-animation",value:this._currentAnimation.GetName(),onedit:k=>this.CallAction(m.SetAnim,k,0)},{name:"plugins.sprite.debugger.animation-properties.current-frame",value:this._currentFrameIndex,onedit:k=>this.CallAction(m.SetAnimFrame,k)},{name:"plugins.sprite.debugger.animation-properties.is-playing",value:this.IsAnimationPlaying(),onedit:k=>
k?this.CallAction(m.StartAnim,0):this.CallAction(m.StopAnim)},{name:"plugins.sprite.debugger.animation-properties.speed",value:this._currentAnimationSpeed,onedit:k=>this.CallAction(m.SetAnimSpeed,k)},{name:"plugins.sprite.debugger.animation-properties.repeats",value:this._animationRepeats,onedit:k=>this._animationRepeats=k}]}]}SaveToJson(){const m={a:this._currentAnimation.GetSID()};0!==this._frameStartTime&&(m.fs=this._frameStartTime);var k=this.GetAnimationTime();0!==k&&(m.at=k);0!==this._currentFrameIndex&&
(m.f=this._currentFrameIndex);0!==this._currentAnimationSpeed&&(m.cas=this._currentAnimationSpeed);1!==this._animationRepeats&&(m.ar=this._animationRepeats);0!==this._currentAnimationRepeatTo&&(m.rt=this._currentAnimationRepeatTo);this.IsAnimationPlaying()||(m.ap=this.IsAnimationPlaying());this.IsPlayingForwards()||(m.af=this.IsPlayingForwards());k=this.GetWorldInfo();k.IsCollisionEnabled()&&(m.ce=k.IsCollisionEnabled());return m}LoadFromJson(m){var k=this.GetObjectClass().GetAnimationBySID(m.a);
k&&(this._currentAnimation=k);this._frameStartTime=m.hasOwnProperty("fs")?m.fs:0;this._animationTimer.Set(m.hasOwnProperty("at")?m.at:0);k=m.hasOwnProperty("f")?m.f:0;this._currentFrameIndex=e.clamp(k,0,this._currentAnimation.GetFrameCount()-1);this._currentAnimationSpeed=m.hasOwnProperty("cas")?m.cas:0;this._animationRepeats=m.hasOwnProperty("ar")?m.ar:1;k=m.hasOwnProperty("rt")?m.rt:0;this._currentAnimationRepeatTo=e.clamp(k,0,this._currentAnimation.GetFrameCount()-1);this.SetAnimationPlaying(m.hasOwnProperty("ap")?
!!m.ap:!0);this.SetPlayingForwards(m.hasOwnProperty("af")?!!m.af:!0);this._currentAnimationFrame=k=this._currentAnimation.GetFrameAt(this._currentFrameIndex);this._UpdateCurrentTexture();const a=this.GetWorldInfo();a.SetOriginX(k.GetOriginX());a.SetOriginY(k.GetOriginY());a.SetSourceCollisionPoly(k.GetCollisionPoly());a.SetCollisionEnabled(!!m.ce)}GetPropertyValueByIndex(m){const k=this.GetWorldInfo();switch(m){case 3:return k.IsCollisionEnabled();case 2:return e.clamp(this._currentFrameIndex,0,this._currentAnimation.GetFrameCount()-
1)}}SetPropertyValueByIndex(m,k){var a=this.GetWorldInfo();switch(m){case 3:a.SetCollisionEnabled(!!k);break;case 2:this.SetAnimationPlaying(!1);m=this._currentAnimation.GetFrameCount()-1;a=k=e.clamp(k,0,m);k=this._currentAnimation.GetFrameAt(this._currentFrameIndex);const b=this._currentAnimation.GetFrameAt(a);this._OnFrameChanged(k,b);this._currentFrameIndex=e.clamp(a,0,m)}}GetScriptInterfaceClass(){return self.ISpriteInstance}};const g=new WeakMap,h=new Map([["current-frame",0],["beginning",1]]);
self.ISpriteInstance=class extends self.IWorldInstance{constructor(){super();g.set(this,self.IInstance._GetInitInst().GetSdkInstance())}getImagePointCount(){return g.get(this).GetImagePointCount()}getImagePointX(m){if("string"!==typeof m&&"number"!==typeof m)throw new TypeError("expected string or number");return g.get(this).GetImagePoint(m)[0]}getImagePointY(m){if("string"!==typeof m&&"number"!==typeof m)throw new TypeError("expected string or number");return g.get(this).GetImagePoint(m)[1]}getImagePoint(m){if("string"!==
typeof m&&"number"!==typeof m)throw new TypeError("expected string or number");return g.get(this).GetImagePoint(m)}getPolyPointCount(){return g.get(this).GetCollisionPolyPointCount()}getPolyPointX(m){return g.get(this).GetCollisionPolyPoint(m)[0]}getPolyPointY(m){return g.get(this).GetCollisionPolyPoint(m)[1]}getPolyPoint(m){return g.get(this).GetCollisionPolyPoint(m)}stopAnimation(){g.get(this).SetAnimationPlaying(!1)}startAnimation(m="current-frame"){m=h.get(m);if("undefined"===typeof m)throw Error("invalid mode");
g.get(this)._StartAnim(m)}setAnimation(m,k="beginning"){k=h.get(k);if("undefined"===typeof k)throw Error("invalid mode");g.get(this)._SetAnim(m,k)}get animationName(){return g.get(this)._GetCurrentAnimationName()}set animationFrame(m){g.get(this)._SetAnimFrame(m)}get animationFrame(){return g.get(this)._GetAnimFrame()}set animationSpeed(m){g.get(this)._SetAnimSpeed(m)}get animationSpeed(){return g.get(this)._GetAnimSpeed()}set animationRepeatToFrame(m){g.get(this)._SetAnimRepeatToFrame(m)}get animationRepeatToFrame(){return g.get(this)._GetAnimRepeatToFrame()}get imageWidth(){return g.get(this).GetCurrentImageInfo().GetWidth()}get imageHeight(){return g.get(this).GetCurrentImageInfo().GetHeight()}}}"use strict";
{const e=self.C3,d=e.New(e.Rect),c=[],f=[];let g=!1,h=null,m=!1;const k=new Set;function a(u,w,x,A){const E=w.GetUID(),y=x.GetUID();E<y?u.Set(w,x,A):u.Set(x,w,A)}function b(u,w,x){const A=w.GetUID(),E=x.GetUID();A<E?u.Delete(w,x):u.Delete(x,w)}function l(u,w){u.DeleteEither(w)}function p(u,w,x){const A=w.GetUID(),E=x.GetUID();return A<E?u.Get(w,x):u.Get(x,w)}function r(u,w,x,A){if(!w)return!1;u=u.GetInstance();const E=0!==x||0!==A,y=u.GetWorldInfo(),B=u.GetRuntime(),H=B.GetCollisionEngine();var P=
B.GetCurrentCondition();const F=P.GetEventBlock().IsOrBlock();var I=P.GetObjectClass();P=P.IsInverted();const N=w.GetCurrentSol();I=I!==w;h=w;g=I&&!P;m=!1;let R=0,S=0,Y=!1;N.IsSelectAll()?(d.copy(y.GetBoundingBox()),d.offset(x,A),H.GetCollisionCandidates(y.GetLayer(),w,d,f),w=f):F?B.IsCurrentConditionFirst()&&!N._GetOwnElseInstances().length&&N._GetOwnInstances().length?w=N._GetOwnInstances():(w=N._GetOwnElseInstances(),m=!0):w=N._GetOwnInstances();E&&(R=y.GetX(),S=y.GetY(),y.OffsetXY(x,A),y.SetBboxChanged());
for(const W of w)if(H.TestOverlap(u,W)){Y=!0;if(P)break;I&&k.add(W)}E&&(y.SetXY(R,S),y.SetBboxChanged());e.clearArray(f);return Y}function t(u){u=u.GetRuntime().GetCurrentEvent().IsOrBlock();const w=h.GetCurrentSol(),x=w._GetOwnInstances(),A=w._GetOwnElseInstances();w.IsSelectAll()?(w.SetSetPicked(k),u&&(e.clearArray(A),w.AddElseInstances(k,h.GetInstances()))):u?m?w.TransferElseInstancesToOwn(k):(w.AddElseInstances(k,x),w.SetSetPicked(k)):w.SetSetPicked(k);h.ApplySolToContainer()}e.Plugins.Sprite._FinishCondition=
function(u,w){g&&(w&&t(u),k.clear(),h=null,g=!1)};e.Plugins.Sprite.Cnds={OnCollision(u){if(this._runtime.IsDebugging())return e.Plugins.Sprite.Cnds.DebugOnCollision.call(this,u);if(!u)return!1;var w=this._runtime;const x=w.GetCollisionEngine(),A=w.GetEventSheetManager(),E=A.GetEventStack();var y=A.GetCurrentCondition();const B=y.GetObjectClass();var H=y.GetSavedDataMap(),P=y.GetUnsavedDataMap();y=E.GetCurrentStackFrame();const F=w.GetTickCount(),I=F-1,N=y.GetCurrentEvent(),R=E.Push(N);let S=H.get("collmemory");
S||(S=e.New(e.PairMap),H.set("collmemory",S));P.get("spriteCreatedDestroyCallback")||(P.set("spriteCreatedDestroyCallback",!0),w.Dispatcher().addEventListener("instancedestroy",na=>l(S,na.instance)));H=B.GetCurrentSol();w=u.GetCurrentSol();H=H.GetInstances();P=null;for(let na=0;na<H.length;++na){const ja=H[na];w.IsSelectAll()?(x.GetCollisionCandidates(ja.GetWorldInfo().GetLayer(),u,ja.GetWorldInfo().GetBoundingBox(),c),P=c,x.AddRegisteredCollisionCandidates(ja,u,P)):P=w.GetInstances();for(let wa=
0;wa<P.length;++wa){const sa=P[wa];if(x.TestOverlap(ja,sa)||x.CheckRegisteredCollision(ja,sa)){var Y=p(S,ja,sa),W=!1,ea=-2;"number"===typeof Y&&(W=!0,ea=Y);Y=!W||ea<I;a(S,ja,sa,F);Y&&(Y=N.GetSolModifiers(),A.PushCopySol(Y),ea=B.GetCurrentSol(),W=u.GetCurrentSol(),ea._SetSelectAll(!1),W._SetSelectAll(!1),B===u?(W=ea._GetOwnInstances(),e.clearArray(W),W.push(ja),W.push(sa),B.ApplySolToContainer()):(ea=ea._GetOwnInstances(),W=W._GetOwnInstances(),e.clearArray(ea),e.clearArray(W),ea.push(ja),W.push(sa),
B.ApplySolToContainer(),u.ApplySolToContainer()),N.Retrigger(y,R),A.PopSol(Y))}else b(S,ja,sa)}e.clearArray(c)}E.Pop();return!1},*DebugOnCollision(u){if(!u)return!1;var w=this._runtime;const x=w.GetCollisionEngine(),A=w.GetEventSheetManager(),E=A.GetEventStack(),y=E.GetCurrentStackFrame(),B=w.GetTickCount(),H=B-1,P=y.GetCurrentEvent(),F=E.Push(P);var I=A.GetCurrentCondition();const N=I.GetObjectClass();var R=I.GetSavedDataMap();I=I.GetUnsavedDataMap();let S=R.get("collmemory");S||(S=e.New(e.PairMap),
R.set("collmemory",S));I.get("spriteCreatedDestroyCallback")||(I.set("spriteCreatedDestroyCallback",!0),w.Dispatcher().addEventListener("instancedestroy",na=>l(S,na.instance)));R=N.GetCurrentSol();w=u.GetCurrentSol();R=R.GetInstances();I=null;for(let na=0;na<R.length;++na){const ja=R[na];w.IsSelectAll()?(x.GetCollisionCandidates(ja.GetWorldInfo().GetLayer(),u,ja.GetWorldInfo().GetBoundingBox(),c),I=c,x.AddRegisteredCollisionCandidates(ja,u,I)):I=w.GetInstances();for(let wa=0;wa<I.length;++wa){const sa=
I[wa];if(x.TestOverlap(ja,sa)||x.CheckRegisteredCollision(ja,sa)){var Y=p(S,ja,sa),W=!1,ea=-2;"number"===typeof Y&&(W=!0,ea=Y);Y=!W||ea<H;a(S,ja,sa,B);Y&&(Y=P.GetSolModifiers(),A.PushCopySol(Y),ea=N.GetCurrentSol(),W=u.GetCurrentSol(),ea._SetSelectAll(!1),W._SetSelectAll(!1),N===u?(W=ea._GetOwnInstances(),e.clearArray(W),W.push(ja),W.push(sa),N.ApplySolToContainer()):(ea=ea._GetOwnInstances(),W=W._GetOwnInstances(),e.clearArray(ea),e.clearArray(W),ea.push(ja),W.push(sa),N.ApplySolToContainer(),u.ApplySolToContainer()),
yield*P.DebugRetrigger(y,F),A.PopSol(Y))}else b(S,ja,sa)}e.clearArray(c)}E.Pop();return!1},IsOverlapping(u){return r(this,u,0,0)},IsOverlappingOffset(u,w,x){return r(this,u,w,x)},IsAnimPlaying(u){return e.equalsNoCase(this._GetCurrentAnimationName(),u)},CompareFrame(u,w){return e.compare(this._currentFrameIndex,u,w)},CompareAnimSpeed(u,w){return e.compare(this._GetAnimSpeed(),u,w)},OnAnimFinished(u){return e.equalsNoCase(this._animTriggerName,u)},OnAnyAnimFinished(){return!0},OnFrameChanged(){return!0},
IsMirrored(){return 0>this.GetWorldInfo().GetWidth()},IsFlipped(){return 0>this.GetWorldInfo().GetHeight()},OnURLLoaded(){return!0},OnURLFailed(){return!0},IsCollisionEnabled(){return this.GetWorldInfo().IsCollisionEnabled()}}}"use strict";
{const e=self.C3;e.Plugins.Sprite.Acts={Spawn(d,c,f){if(d&&c){var [g,h]=this.GetImagePoint(f);if(c=this._runtime.CreateInstance(d,c,g,h)){d.GetPlugin().IsRotatable()&&(f=c.GetWorldInfo(),f.SetAngle(this.GetWorldInfo().GetAngle()),f.SetBboxChanged());f=this._runtime.GetEventSheetManager();f.BlockFlushingInstances(!0);c._TriggerOnCreated();if(c.IsInContainer())for(var m of c.siblings())m._TriggerOnCreated();f.BlockFlushingInstances(!1);f=this._runtime.GetCurrentAction().GetSavedDataMap();m=!1;if(!f.has("Spawn_LastExec")||
f.get("Spawn_LastExec")<this._runtime.GetExecCount())m=!0,f.set("Spawn_LastExec",this._runtime.GetExecCount());if(d!==this.GetObjectClass()&&(d=d.GetCurrentSol(),d._SetSelectAll(!1),d=d._GetOwnInstances(),m&&e.clearArray(d),d.push(c),c.IsInContainer()))for(const k of c.siblings())d=k.GetObjectClass().GetCurrentSol(),m?d.SetSinglePicked(k):(d._SetSelectAll(!1),d._PushInstance(k))}}},StopAnim(){this.SetAnimationPlaying(!1)},StartAnim(d){this._StartAnim(d)},SetAnim(d,c){this._SetAnim(d,c)},SetAnimFrame(d){this._SetAnimFrame(d)},
SetAnimSpeed(d){this._SetAnimSpeed(d)},SetAnimRepeatToFrame(d){this._SetAnimRepeatToFrame(d)},SetMirrored(d){const c=this.GetWorldInfo(),f=c.GetWidth();d=Math.abs(f)*(0===d?-1:1);f!==d&&(c.SetWidth(d),c.SetBboxChanged())},SetFlipped(d){const c=this.GetWorldInfo(),f=c.GetHeight();d=Math.abs(f)*(0===d?-1:1);f!==d&&(c.SetHeight(d),c.SetBboxChanged())},SetScale(d){const c=this._currentAnimationFrame.GetImageInfo(),f=this.GetWorldInfo();var g=0>f.GetWidth()?-1:1;const h=0>f.GetHeight()?-1:1;g*=c.GetWidth()*
d;d=c.GetHeight()*d*h;if(f.GetWidth()!==g||f.GetHeight()!==d)f.SetSize(g,d),f.SetBboxChanged()},async LoadURL(d,c,f){f=this._currentAnimationFrame.GetImageInfo();const g=this.GetWorldInfo(),h=this._runtime;if(f.GetURL()===d)0===c&&(g.SetSize(f.GetWidth(),f.GetHeight()),g.SetBboxChanged()),this.Trigger(e.Plugins.Sprite.Cnds.OnURLLoaded);else{var m=e.New(e.ImageInfo);await m.LoadDynamicAsset(h,d);m.IsLoaded()?(await m.LoadStaticTexture(h.GetWebGLRenderer(),{sampling:this._runtime.GetSampling()}),f.ReplaceWith(m),
this._sdkType._UpdateAllCurrentTexture(),this.WasReleased()||0!==c||(g.SetSize(f.GetWidth(),f.GetHeight()),g.SetBboxChanged()),h.UpdateRender(),this.WasReleased()||await this.TriggerAsync(e.Plugins.Sprite.Cnds.OnURLLoaded)):this.Trigger(e.Plugins.Sprite.Cnds.OnURLFailed)}},SetCollisions(d){this.GetWorldInfo().SetCollisionEnabled(d)},SetSolidCollisionFilter(d,c){this.GetWorldInfo().SetSolidCollisionFilter(0===d,c)},SetEffect(d){this.GetWorldInfo().SetBlendMode(d);this._runtime.UpdateRender()}}}"use strict";
self.C3.Plugins.Sprite.Exps={AnimationFrame(){return this._currentFrameIndex},AnimationFrameCount(){return this._currentAnimation.GetFrameCount()},AnimationName(){return this._currentAnimation.GetName()},AnimationSpeed(){return this._GetAnimSpeed()},OriginalAnimationSpeed(){return this._currentAnimation.GetSpeed()},ImagePointX(e){return this.GetImagePoint(e)[0]},ImagePointY(e){return this.GetImagePoint(e)[1]},ImagePointCount(){return this.GetImagePointCount()},ImageWidth(){return this.GetCurrentImageInfo().GetWidth()},
ImageHeight(){return this.GetCurrentImageInfo().GetHeight()},PolyPointXAt(e){return this.GetCollisionPolyPoint(e)[0]},PolyPointYAt(e){return this.GetCollisionPolyPoint(e)[1]},PolyPointCount(){return this.GetCollisionPolyPointCount()}};"use strict";
{const e=self.C3;e.Plugins.Tilemap=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}};e.Plugins.Tilemap.TILE_FLIPPED_HORIZONTAL=-2147483648;e.Plugins.Tilemap.TILE_FLIPPED_VERTICAL=1073741824;e.Plugins.Tilemap.TILE_FLIPPED_DIAGONAL=536870912;e.Plugins.Tilemap.TILE_FLAGS_MASK=3758096384;e.Plugins.Tilemap.TILE_ID_MASK=536870911}"use strict";
{const e=self.C3,d=e.Plugins.Tilemap.TILE_FLIPPED_HORIZONTAL,c=e.Plugins.Tilemap.TILE_FLIPPED_VERTICAL,f=e.Plugins.Tilemap.TILE_FLIPPED_DIAGONAL,g=e.Plugins.Tilemap.TILE_ID_MASK;e.Plugins.Tilemap.Type=class extends e.SDKTypeBase{constructor(h){super(h);this._tilePolys=[];this._areTilePolysCached=!1;this._maxTileIndex=0}Release(){super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}LoadTextures(h){return this.GetImageInfo().LoadStaticTexture(h,{sampling:this._runtime.GetSampling()})}ReleaseTextures(){this.GetImageInfo().ReleaseTexture()}OnDynamicTextureLoadComplete(){for(const h of this.GetObjectClass().instancesIncludingPendingCreate())h.GetSdkInstance()._OnDynamicTextureLoadComplete()}LoadTilemapData(h,
m){this._maxTileIndex=m;for(const k of h)k?this._tilePolys.push({poly:k[0],use:!!k[1],flipmap:[[[null,null],[null,null]],[[null,null],[null,null]]]}):this._tilePolys.push(null)}_ForceCacheOfTileCollisionPolys(h,m){this._areTilePolysCached=!1;this._MaybeCacheTileCollisionPolys(h,m)}_MaybeCacheTileCollisionPolys(h,m){if(!this._areTilePolysCached){this._areTilePolysCached=!0;for(let k=0,a=this._tilePolys.length;k<a;++k)this._tilePolys[k]&&(this._CacheTilePoly(k,h,m,!1,!1,!1),this._CacheTilePoly(k,h,
m,!1,!1,!0),this._CacheTilePoly(k,h,m,!1,!0,!1),this._CacheTilePoly(k,h,m,!1,!0,!0),this._CacheTilePoly(k,h,m,!0,!1,!1),this._CacheTilePoly(k,h,m,!0,!1,!0),this._CacheTilePoly(k,h,m,!0,!0,!1),this._CacheTilePoly(k,h,m,!0,!0,!0))}}_CacheTilePoly(h,m,k,a,b,l){if(!(0>h||h>=this._tilePolys.length)&&(h=this._tilePolys[h])){var p=e.New(e.CollisionPoly,h.poly,h.use);p.transform(m,k,0);l&&p.diag();a&&p.mirror(m/2);b&&p.flip(k/2);h.flipmap[a?1:0][b?1:0][l?1:0]=null;h.flipmap[a?1:0][b?1:0][l?1:0]=p}}GetTilePoly(h){if(-1===
h)return null;var m=h&g;return 0>m||m>=this._tilePolys.length?null:(m=this._tilePolys[m])?m.flipmap[h&d?1:0][h&c?1:0][h&f?1:0]:null}IsTilePolyEnabled(h){return h?h.IsEnabled():!0}GetMaxTileIndex(){return this._maxTileIndex}}}"use strict";
{const e=self.C3,d=e.Plugins.Tilemap.TILE_FLIPPED_HORIZONTAL,c=e.Plugins.Tilemap.TILE_FLIPPED_VERTICAL,f=e.Plugins.Tilemap.TILE_FLIPPED_DIAGONAL,g=e.Plugins.Tilemap.TILE_FLAGS_MASK,h=e.Plugins.Tilemap.TILE_ID_MASK,m=e.New(e.Rect),k=e.New(e.Rect);function a(p){const r=[];p=p.split(",");for(let x=0,A=p.length;x<A;++x){var t=p[x],u=t.indexOf("x");if(-1<u){var w=parseInt(t.substring(0,u),10);t=t.substring(u+1);u=parseInt(t,10);t.includes("h")&&(u|=d);t.includes("v")&&(u|=c);for(t.includes("d")&&(u|=f);0<
w;--w)r.push(u)}else w=parseInt(t,10),t.includes("h")&&(w|=d),t.includes("v")&&(w|=c),t.includes("d")&&(w|=f),r.push(w)}return r}e.Plugins.Tilemap.Instance=class extends e.SDKWorldInstanceBase{constructor(p,r){super(p);p=this.GetWorldInfo();this._tileHeight=this._tileWidth=32;this._mapHeight=this._mapWidth=this._tileYspacing=this._tileXspacing=this._tileYoffset=this._tileXoffset=0;this._lastWidth=p.GetWidth();this._lastHeight=p.GetHeight();this._cellHeight=this._cellWidth=0;this._tileCells=[];this._tileTexQuads=
new Map;this._isAnyQuadMapChanged=!0;this._ownImageInfo=null;r&&(p.SetVisible(r[0]),this._tileWidth=Math.max(r[1],1),this._tileHeight=Math.max(r[2],1),this._tileXoffset=r[3],this._tileYoffset=r[4],this._tileXspacing=r[5],this._tileYspacing=r[6]);this._cellWidth=Math.ceil(this._runtime.GetOriginalViewportWidth()/this._tileWidth);this._cellHeight=Math.ceil(this._runtime.GetOriginalViewportHeight()/this._tileHeight);this._sdkType._MaybeCacheTileCollisionPolys(this._tileWidth,this._tileHeight)}Release(){this._ReleaseOwnImage();
e.clearArray(this._tileCells);this._tileCells=null;this._tileTexQuads.clear();this._tileTexQuads=null;super.Release()}_ReleaseOwnImage(){this._ownImageInfo&&(this._ownImageInfo.Release(),this._ownImageInfo=null)}LoadTilemapData(p,r,t){this._mapWidth=r;this._mapHeight=t;this._MaybeResizeTilemap(!0);this.SetTilesFromRLECSV(p);this._MaybeBuildAllQuadMap()}_MaybeResizeTilemap(p){var r=this.GetWorldInfo(),t=Math.floor(r.GetWidth()/this._tileWidth),u=Math.floor(r.GetHeight()/this._tileHeight);if(!(t<=this._mapWidth&&
u<=this._mapHeight)||p){p?(p=Math.ceil(this._mapHeight/this._cellHeight),r=Math.ceil(this._mapWidth/this._cellWidth)):(p=this._tileCells.length,r=Math.ceil(this._mapWidth/this._cellWidth),u>this._mapHeight&&(this._mapHeight=u,p=Math.ceil(this._mapHeight/this._cellHeight)),t>this._mapWidth&&(this._mapWidth=t,r=Math.ceil(this._mapWidth/this._cellWidth)),this._SetAllQuadMapChanged(),this._SetPhysicsChanged(),this._runtime.UpdateRender());t=this._tileCells;if(t.length<p)for(u=t.length;u<p;++u)t.push([]);
for(u=0;u<p;++u){const w=t[u];for(let x=w.length;x<r;++x)w.push(e.New(e.Plugins.Tilemap.TileCell,this,x,u))}}}SetTilesFromRLECSV(p){p=a(p);let r=0;const t=this._mapWidth,u=this._cellWidth,w=this._cellHeight;for(let x=0,A=this._mapHeight;x<A;++x)for(let E=0;E<t;++E){const y=p[r++],B=this.GetCellAt(E,x);B&&B.SetTileAt(E%u,x%w,y)}}GetTilesAsRLECSV(){let p="";if(0>=this._mapWidth||0>=this._mapHeight)return p;let r=1;var t=this.GetTileAt(0,0),u=this.GetWorldInfo();const w=Math.floor(u.GetWidth()/this._tileWidth);
u=Math.floor(u.GetHeight()/this._tileHeight);let x,A,E;for(let y=0;y<u;++y)for(let B=0===y?1:0;B<w;++B){const H=this.GetTileAt(B,y);H===t?++r:(-1===t?(x=-1,t=E=A=!1):(x=t&h,A=0!==(t&d),E=0!==(t&c),t=0!==(t&f)),p=1===r?p+(""+x):p+(""+r+"x"+x),A&&(p+="h"),E&&(p+="v"),t&&(p+="d"),p+=",",r=1,t=H)}-1===t?(x=-1,t=E=A=!1):(x=t&h,A=0!==(t&d),E=0!==(t&c),t=0!==(t&f));p=1===r?p+(""+x):p+(""+r+"x"+x);A&&(p+="h");E&&(p+="v");t&&(p+="d");return p}_SetAllQuadMapChanged(){const p=this._tileCells;for(let r=0,t=p.length;r<
t;++r){const u=p[r];for(let w=0,x=u.length;w<x;++w)u[w]._SetQuadMapChanged()}this._isAnyQuadMapChanged=!0}_MaybeBuildAllQuadMap(){if(this._isAnyQuadMapChanged){this._isAnyQuadMapChanged=!1;var p=this._tileCells;for(let r=0,t=p.length;r<t;++r){const u=p[r];for(let w=0,x=u.length;w<x;++w)u[w].MaybeBuildQuadMap()}}}SetTileChanged(){this._isAnyQuadMapChanged=!0;this._SetPhysicsChanged();this._runtime.UpdateRender()}_SetPhysicsChanged(){this.GetWorldInfo().SetPhysicsBodyChanged(!0)}GetCellAt(p,r){if(0>
p||0>r)return null;r=Math.floor(r/this._cellHeight);if(r>=this._tileCells.length)return null;r=this._tileCells[r];p=Math.floor(p/this._cellWidth);return p>=r.length?null:r[p]}GetCellAtIndex(p,r){if(0>p||0>r||r>=this._tileCells.length)return null;r=this._tileCells[r];return p>=r.length?null:r[p]}GetTileAt(p,r){p=Math.floor(p);r=Math.floor(r);if(0>p||0>r||p>=this._mapWidth||r>=this._mapHeight)return-1;const t=this.GetCellAt(p,r);return t?t.GetTilesArr()[r%this._cellHeight][p%this._cellWidth]:-1}SetTileAt(p,
r,t){p=Math.floor(p);r=Math.floor(r);if(!(0>p||0>r||p>=this._mapWidth||r>=this._mapHeight||-1!==t&&(t&h)>this.GetMaxTileIndex())){var u=this.GetCellAt(p,r);u&&u.SetTileAt(p%this._cellWidth,r%this._cellHeight,t)}}GetMaxTileIndex(){return this._sdkType.GetMaxTileIndex()}WorldToCellX(p){return Math.floor((p-this.GetWorldInfo().GetX())/(this._cellWidth*this._tileWidth))}WorldToCellY(p){return Math.floor((p-this.GetWorldInfo().GetY())/(this._cellHeight*this._tileHeight))}WorldToTileX(p){return Math.floor((p-
this.GetWorldInfo().GetX())/this._tileWidth)}WorldToTileY(p){return Math.floor((p-this.GetWorldInfo().GetY())/this._tileHeight)}GetMapWidth(){return this._mapWidth}GetMapHeight(){return this._mapHeight}GetTileWidth(){return this._tileWidth}GetTileHeight(){return this._tileHeight}GetCellWidth(){return this._cellWidth}GetCellHeight(){return this._cellHeight}GetCollisionRectCandidates(p,r){var t=this.WorldToCellX(p.getLeft());const u=this.WorldToCellY(p.getTop()),w=this.WorldToCellX(p.getRight());for(p=
this.WorldToCellY(p.getBottom());t<=w;++t)for(let x=u;x<=p;++x){const A=this.GetCellAtIndex(t,x);A&&(A.MaybeBuildQuadMap(),e.appendArray(r,A.GetCollisionRects()))}}TestPointOverlapTile(p,r){var t=this.WorldToTileX(p),u=this.WorldToTileY(r);t=this.GetTileAt(t,u);if(-1===t)return!1;t=this._sdkType.GetTilePoly(t);if(!t)return!0;if(!this._sdkType.IsTilePolyEnabled(t))return!1;var w=this.GetWorldInfo();u=Math.floor((p-w.GetX())/this._tileWidth)*this._tileWidth+w.GetX();w=Math.floor((r-w.GetY())/this._tileHeight)*
this._tileHeight+w.GetY();return t.containsPoint(p-u,r-w)}GetAllCollisionRects(p){const r=this._tileCells;for(let t=0,u=r.length;t<u;++t){const w=r[t];for(let x=0,A=w.length;x<A;++x){const E=w[x];E.MaybeBuildQuadMap();e.appendArray(p,E.GetCollisionRects())}}}GetCurrentImageInfo(){return this._ownImageInfo||this._objectClass.GetImageInfo()}GetTileUvQuad(p){const r=this._tileTexQuads;var t=r.get(p);if(t)return t;var u=p&h;t=0!==(p&d);const w=0!==(p&c),x=0!==(p&f);var A=this.GetCurrentImageInfo(),E=
A.GetWidth(),y=this._tileWidth,B=this._tileXspacing;y=Math.floor((Math.floor((E-this._tileXoffset)/(y+B)*y)+B)/y);E=u%y;u=Math.floor(u/y);y=A.GetOffsetX()+this._tileXoffset+(this._tileWidth+this._tileXspacing)*E;B=A.GetOffsetY()+this._tileYoffset+(this._tileHeight+this._tileYspacing)*u;m.setWH(y,B,this._tileWidth,this._tileHeight);m.divide(A.GetSheetWidth(),A.GetSheetHeight());A=e.New(e.Quad);A.setFromRect(m);x&&A.diag();t&&A.mirror();w&&A.flip();A.offset(E,u);r.set(p,A);return A}_OnDynamicTextureLoadComplete(){this._tileTexQuads.clear();
this._SetAllQuadMapChanged()}Draw(p){var r=this.GetCurrentImageInfo(),t=r.GetTexture();if(t){m.copy(r.GetTexRect());m.offsetLeft(this._tileXoffset/t.GetWidth());m.offsetTop(this._tileYoffset/t.GetHeight());p.SetTilemapFillMode();p.SetTilemapInfo(m,t.GetWidth(),t.GetHeight(),this._tileWidth,this._tileHeight,this._tileXspacing,this._tileYspacing);p.SetTexture(t);t=this.GetWorldInfo();if(t.GetWidth()!==this._lastWidth||t.GetHeight()!==this._lastHeight)this._SetPhysicsChanged(),this._SetAllQuadMapChanged(),
this._lastWidth=t.GetWidth(),this._lastHeight=t.GetHeight();t.GetLayer().GetViewportForZ(t.GetTotalZElevation(),k);r=t.GetX();t=t.GetY();this._runtime.IsPixelRoundingEnabled()&&(r=Math.round(r),t=Math.round(t));var u=this._cellWidth*this._tileWidth,w=this._cellHeight*this._tileHeight,x=Math.floor((k.getLeft()-r)/u);u=Math.floor((k.getRight()-r)/u);var A=Math.floor((k.getTop()-t)/w);for(w=Math.floor((k.getBottom()-t)/w);x<=u;++x)for(let E=A;E<=w;++E){const y=this.GetCellAtIndex(x,E);y&&(y.MaybeBuildQuadMap(),
y.Draw(p,k,r,t))}}}SaveToJson(){this._MaybeResizeTilemap();var p=this.GetWorldInfo();const r=Math.floor(p.GetWidth()/this._tileWidth);p=Math.floor(p.GetHeight()/this._tileHeight);return{tw:this._tileWidth,th:this._tileHeight,tox:this._tileXoffset,toy:this._tileYoffset,tsx:this._tileXspacing,tsy:this._tileYspacing,w:r,h:p,d:this.GetTilesAsRLECSV()}}LoadFromJson(p){this._tileWidth=p.tw;this._tileHeight=p.th;this._tileXoffset=p.tox;this._tileYoffset=p.toy;this._tileXspacing=p.tsx;this._tileYspacing=
p.tsy;this._mapWidth=p.w;this._mapHeight=p.h;this._MaybeResizeTilemap(!0);this.SetTilesFromRLECSV(p.d);this._SetPhysicsChanged();this._SetAllQuadMapChanged()}GetAsJsonString(){this._MaybeResizeTilemap();var p=this.GetWorldInfo();const r=Math.floor(p.GetWidth()/this._tileWidth);p=Math.floor(p.GetHeight()/this._tileHeight);return JSON.stringify({c2tilemap:!0,width:r,height:p,data:this.GetTilesAsRLECSV()})}StateComboToFlags(p){switch(p){case 0:return 0;case 1:return d;case 2:return c;case 3:return d|
f;case 4:return d|c;case 5:return c|f;case 6:return d|c|f;case 7:return f;default:return 0}}GetPropertyValueByIndex(p){switch(p){case 1:return this._tileWidth;case 2:return this._tileHeight;case 3:return this._tileXoffset;case 4:return this._tileYoffset;case 5:return this._tileXspacing;case 6:return this._tileYspacing}}SetPropertyValueByIndex(p,r){switch(p){case 1:if(this._tileWidth===r)break;this._tileWidth=Math.max(r,1);this._cellWidth=Math.ceil(this._runtime.GetOriginalViewportWidth()/this._tileWidth);
this._sdkType._ForceCacheOfTileCollisionPolys();this._UpdateQuadMaps();break;case 2:if(this._tileHeight===r)break;this._tileHeight=Math.max(r,1);this._cellHeight=Math.ceil(this._runtime.GetOriginalViewportHeight()/this._tileHeight);this._sdkType._ForceCacheOfTileCollisionPolys();this._UpdateQuadMaps();break;case 3:if(this._tileXoffset===r)break;this._tileXoffset=r;this._UpdateQuadMaps();break;case 4:if(this._tileYoffset===r)break;this._tileYoffset=r;this._UpdateQuadMaps();break;case 5:if(this._tileXspacing===
r)break;this._tileXspacing=r;this._UpdateQuadMaps();break;case 6:this._tileYspacing!==r&&(this._tileYspacing=r,this._UpdateQuadMaps())}}_UpdateQuadMaps(){this._tileTexQuads.clear();this._SetAllQuadMapChanged();this._MaybeBuildAllQuadMap()}GetScriptInterfaceClass(){return l}};const b=new WeakMap,l=self.ITilemapInstance=class extends self.IWorldInstance{constructor(){super();b.set(this,self.IInstance._GetInitInst().GetSdkInstance())}get mapWidth(){return b.get(this).GetMapWidth()}get mapHeight(){return b.get(this).GetMapHeight()}get tileWidth(){return b.get(this).GetTileWidth()}get tileHeight(){return b.get(this).GetTileHeight()}getTileAt(p,
r){return b.get(this).GetTileAt(p,r)}setTileAt(p,r,t){return b.get(this).SetTileAt(p,r,t)}};l.TILE_FLIPPED_HORIZONTAL=d;l.TILE_FLIPPED_VERTICAL=c;l.TILE_FLIPPED_DIAGONAL=f;l.TILE_FLAGS_MASK=g;l.TILE_ID_MASK=h}"use strict";
{const e=self.C3,d=e.Plugins.Tilemap.TILE_FLAGS_MASK,c=e.Plugins.Tilemap.TILE_ID_MASK;e.Plugins.Tilemap.Cnds={CompareTileAt(f,g,h,m){f=this.GetTileAt(f,g);-1!==f&&(f&=c);return e.compare(f,h,m)},CompareTileStateAt(f,g,h){f=this.GetTileAt(f,g);g=0;-1!==f&&(g=f&d);return g===this.StateComboToFlags(h)},OnURLLoaded(){return!0},OnURLFailed(){return!0}}}"use strict";
{const e=self.C3,d=e.Plugins.Tilemap.TILE_ID_MASK;e.Plugins.Tilemap.Acts={EraseTile(c,f){this._MaybeResizeTilemap();this.SetTileAt(c,f,-1)},SetTile(c,f,g,h){this._MaybeResizeTilemap();this.SetTileAt(c,f,g&d|this.StateComboToFlags(h))},SetTileState(c,f,g){const h=this.GetTileAt(c,f);-1!==h&&(this._MaybeResizeTilemap(),this.SetTileAt(c,f,h&d|this.StateComboToFlags(g)))},EraseTileRange(c,f,g,h){const m=Math.floor(Math.max(c,0));var k=Math.floor(Math.max(f,0));c=Math.floor(Math.min(c+g,this._mapWidth));
for(f=Math.floor(Math.min(f+h,this._mapHeight));k<f;++k)for(h=m;h<c;++h)this.SetTileAt(h,k,-1)},SetTileRange(c,f,g,h,m,k){this._MaybeResizeTilemap();const a=Math.floor(Math.max(c,0));var b=Math.floor(Math.max(f,0));c=Math.floor(Math.min(c+g,this._mapWidth));f=Math.floor(Math.min(f+h,this._mapHeight));for(m=m&d|this.StateComboToFlags(k);b<f;++b)for(k=a;k<c;++k)this.SetTileAt(k,b,m)},SetTileStateRange(c,f,g,h,m){this._MaybeResizeTilemap();const k=Math.floor(Math.max(c,0));var a=Math.floor(Math.max(f,
0));c=Math.floor(Math.min(c+g,this._mapWidth));f=Math.floor(Math.min(f+h,this._mapHeight));for(m=this.StateComboToFlags(m);a<f;++a)for(h=k;h<c;++h)g=this.GetTileAt(h,a),-1!==g&&this.SetTileAt(h,a,g&d|m)},LoadFromJSON(c){let f=null;try{f=JSON.parse(c)}catch(g){console.error("[Construct 3] Failed to parse tilemap JSON: ",g);return}f.c2tilemap?(this._mapWidth=f.width,this._mapHeight=f.height,this._MaybeResizeTilemap(!0),this.SetTilesFromRLECSV(f.data),this._SetAllQuadMapChanged(),this._SetPhysicsChanged()):
console.error("[Construct 3] Unrecognized JSON data format")},JSONDownload(c){const f=URL.createObjectURL(new Blob([this.GetAsJsonString()],{type:"application/json"}));this._runtime.InvokeDownload(f,c)},async LoadURL(c,f){if(!this._ownImageInfo||this._ownImageInfo.GetURL()!==c){f=this._runtime;var g=e.New(e.ImageInfo);await g.LoadDynamicAsset(f,c);if(g.IsLoaded()){if(this.WasReleased())return g.Release(),null;await g.LoadStaticTexture(f.GetWebGLRenderer(),{sampling:this._runtime.GetSampling()})&&
(this.WasReleased()?g.Release():(this._ReleaseOwnImage(),this._ownImageInfo=g,f.UpdateRender(),this._tileTexQuads.clear(),this._SetAllQuadMapChanged(),await this.TriggerAsync(e.Plugins.Tilemap.Cnds.OnURLLoaded)))}else this.Trigger(e.Plugins.Tilemap.Cnds.OnURLFailed)}}}}"use strict";
{const e=self.C3,d=e.Plugins.Tilemap.TILE_ID_MASK;e.Plugins.Tilemap.Exps={TileAt(c,f){c=this.GetTileAt(c,f);return-1===c?-1:c&d},PositionToTileX(c){return this.WorldToTileX(c)},PositionToTileY(c){return this.WorldToTileY(c)},TileToPositionX(c){return c*this._tileWidth+this.GetWorldInfo().GetX()+this._tileWidth/2},TileToPositionY(c){return c*this._tileHeight+this.GetWorldInfo().GetY()+this._tileHeight/2},SnapX(c){const f=this.GetWorldInfo().GetX();return Math.floor((c-f)/this._tileWidth)*this._tileWidth+
f+this._tileWidth/2},SnapY(c){const f=this.GetWorldInfo().GetY();return Math.floor((c-f)/this._tileHeight)*this._tileHeight+f+this._tileHeight/2},TilesJSON(){return this.GetAsJsonString()}}}"use strict";
{const e=self.C3,d=e.Plugins.Tilemap.TILE_FLIPPED_HORIZONTAL,c=e.Plugins.Tilemap.TILE_FLIPPED_VERTICAL,f=e.Plugins.Tilemap.TILE_FLIPPED_DIAGONAL,g=e.Plugins.Tilemap.TILE_ID_MASK,h=e.New(e.Rect),m=e.New(e.Quad);e.Plugins.Tilemap.TileQuad=class extends e.DefendedBase{constructor(){super();this._tileId=this._id=-1;this._isDiagFlip=this._isVertFlip=this._isHorizFlip=!1;this._rc=e.New(e.Rect);this._uv=null}Update(k,a,b,l,p,r,t,u){this._id=k;this._tileId=k&g;this._isHorizFlip=0!==(k&d);this._isVertFlip=
0!==(k&c);this._isDiagFlip=0!==(k&f);this._rc.setWH(l*a+r,p*b+t,a,b);this._uv=u.GetTileUvQuad(this._id)}Draw(k,a,b,l,p){h.copy(this._rc);h.offset(b,l);h.intersectsRect(a)&&(m.setFromRect(h),k.Quad4(m,this._uv))}}}"use strict";
{const e=self.C3;e.Plugins.Tilemap.TileCollisionRect=class extends e.DefendedBase{constructor(){super();this._id=-1;this._poly=null;this._rc=e.New(e.Rect)}Update(d,c,f,g,h,m,k,a){this._id=d;this._poly=c;this._rc.setWH(h*f+k,m*g+a,f,g)}ExtendRight(d){this._rc.setRight(this._rc.getRight()+d)}GetTileId(){return this._id}HasPoly(){return!!this._poly}GetPoly(){return this._poly}GetRect(){return this._rc}}}"use strict";
{const e=self.C3;e.Plugins.Tilemap.TileCell=class extends e.DefendedBase{constructor(d,c,f){super();const g=d.GetCellWidth(),h=d.GetCellHeight();this._sdkInst=d;this._x=c;this._y=f;this._left=this._x*g*d.GetTileWidth();this._top=this._y*h*d.GetTileHeight();this._tiles=[];this._quads=[];this._collisionRects=[];this._isQuadMapValid=!1;for(d=0;d<h;++d)c=new Int32Array(g),c.fill(-1),this._tiles.push(c)}Clear(){const d=this._sdkInst.GetCellWidth();var c=this._sdkInst.GetCellHeight();const f=this._tiles;
if(f.length<c)for(let g=f.length;g<c;++g)f.push(new Int32Array(d));else f.length>c&&e.truncateArray(f,c);for(let g=0,h=f.length;g<h;++g)c=f[g],c.length!==d&&(c=new Int32Array(d),f[g]=c),c.fill(-1)}_SetQuadMapChanged(){this._isQuadMapValid=!1}MaybeBuildQuadMap(){if(!this._isQuadMapValid){var d=this._sdkInst,c=d.GetSdkType(),f=d.GetWorldInfo(),g=d.GetTileWidth(),h=d.GetTileHeight(),m=d.GetCellWidth(),k=d.GetCellHeight(),a=this._left,b=this._top;if(!(0>=g||0>=h)){var l=Math.min(d.GetMapWidth(),Math.floor(f.GetWidth()/
g));f=Math.min(d.GetMapHeight(),Math.floor(f.GetHeight()/h));l-=a/g;f-=b/h;l>m&&(l=m);f>k&&(f=k);m=this._tiles;k=this._quads;var p=0;for(var r=0;r<f;++r){var t=m[r];for(var u=0;u<l;++u){var w=t[u];if(-1!==w){var x=void 0;p<k.length?x=k[p]:(x=e.New(e.Plugins.Tilemap.TileQuad),k.push(x));x.Update(w,g,h,u,r,a,b,d);++p}}}p<k.length&&e.truncateArray(k,p);k=null;p=!1;d=this._collisionRects;e.clearArray(d);for(r=0;r<f;++r){t=m[r];for(u=0;u<l;++u){w=t[u];x=c.GetTilePoly(w);const A=c.IsTilePolyEnabled(x);
-1!==w&&A?!k||x||p?(k&&d.push(k),k=e.New(e.Plugins.Tilemap.TileCollisionRect),k.Update(w,x,g,h,u,r,a,b),p=!!x):k.ExtendRight(g):k&&(d.push(k),k=null,p=!1)}k&&(d.push(k),k=null,p=!1)}c=d.length;for(g=0;g<c;++g)if(a=d[g],!a.HasPoly())for(a=a.GetRect(),b=g+1;b<c;++b)l=d[b],f=l.GetRect(),f.getTop()<a.getBottom()||f.getTop()>a.getBottom()||f.getRight()>a.getRight()||f.getLeft()>a.getLeft()||l.HasPoly()||f.getLeft()!==a.getLeft()||f.getRight()!==a.getRight()||(d.splice(b,1),--c,a.setBottom(a.getBottom()+
h),--b);this._isQuadMapValid=!0}}}SetTileAt(d,c,f){this._tiles[c][d]!==f&&(this._tiles[c][d]=f,this._isQuadMapValid=!1,this._sdkInst.SetTileChanged())}GetTilesArr(){return this._tiles}GetCollisionRects(){return this._collisionRects}Draw(d,c,f,g){const h=this._sdkInst,m=this._quads;for(let k=0,a=m.length;k<a;++k)m[k].Draw(d,c,f,g,h)}}}"use strict";{const e=self.C3;e.Plugins.TiledBg=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;function d(c){switch(c){case 0:return"clamp-to-edge";case 2:return"mirror-repeat"}return"repeat"}e.Plugins.TiledBg.Type=class extends e.SDKTypeBase{constructor(c,f){super(c);this._wrapY=this._wrapX="repeat";f&&(this._wrapX=d(f[0]),this._wrapY=d(f[1]))}Release(){super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}LoadTextures(c){return this.GetImageInfo().LoadStaticTexture(c,{sampling:this._runtime.GetSampling(),wrapX:this._wrapX,wrapY:this._wrapY})}ReleaseTextures(){this.GetImageInfo().ReleaseTexture()}}}"use strict";
{const e=self.C3,d=e.New(e.Rect),c=e.New(e.Quad),f=e.New(e.Rect),g=e.New(e.Quad);e.Plugins.TiledBg.Instance=class extends e.SDKWorldInstanceBase{constructor(m,k){super(m);this._imageOffsetY=this._imageOffsetX=0;this._imageScaleY=this._imageScaleX=1;this._imageAngle=0;this._ownImageInfo=null;k&&(this.GetWorldInfo().SetVisible(!!k[0]),this._imageOffsetX=k[4],this._imageOffsetY=k[5],this._imageScaleX=k[6],this._imageScaleY=k[7],this._imageAngle=e.toRadians(k[8]))}Release(){this._ReleaseOwnImage();super.Release()}_ReleaseOwnImage(){this._ownImageInfo&&
(this._ownImageInfo.Release(),this._ownImageInfo=null)}Draw(m){var k=this.GetCurrentImageInfo(),a=k.GetTexture();if(null!==a){m.SetTexture(a);a=k.GetWidth();k=k.GetHeight();var b=this._imageOffsetX/a,l=this._imageOffsetY/k,p=this.GetWorldInfo();f.set(0,0,p.GetWidth()/(a*this._imageScaleX),p.GetHeight()/(k*this._imageScaleY));f.offset(-b,-l);p.HasMesh()?this._DrawMesh(p,m):this._DrawStandard(p,m)}}_DrawStandard(m,k){let a=m.GetBoundingQuad();this._runtime.IsPixelRoundingEnabled()&&(a=m.PixelRoundQuad(a));
0===this._imageAngle?k.Quad3(a,f):(g.setFromRotatedRect(f,-this._imageAngle),k.Quad4(a,g))}_DrawMesh(m,k){const a=m.GetTransformedMesh();if(m.IsMeshChanged()){m.CalculateBbox(d,c,!1);let b=c;this._runtime.IsPixelRoundingEnabled()&&(b=m.PixelRoundQuad(b));let l=f;0!==this._imageAngle&&(g.setFromRotatedRect(f,-this._imageAngle),l=g);a.CalculateTransformedMesh(m.GetSourceMesh(),b,l);m.SetMeshChanged(!1)}a.Draw(k)}GetCurrentImageInfo(){return this._ownImageInfo||this._objectClass.GetImageInfo()}_SetMeshChanged(){this.GetWorldInfo().SetMeshChanged(!0)}_SetImageOffsetX(m){this._imageOffsetX!==
m&&(this._imageOffsetX=m,this._runtime.UpdateRender(),this._SetMeshChanged())}_GetImageOffsetX(){return this._imageOffsetX}_SetImageOffsetY(m){this._imageOffsetY!==m&&(this._imageOffsetY=m,this._runtime.UpdateRender(),this._SetMeshChanged())}_GetImageOffsetY(){return this._imageOffsetY}_SetImageScaleX(m){this._imageScaleX!==m&&(this._imageScaleX=m,this._runtime.UpdateRender(),this._SetMeshChanged())}_GetImageScaleX(){return this._imageScaleX}_SetImageScaleY(m){this._imageScaleY!==m&&(this._imageScaleY=
m,this._runtime.UpdateRender(),this._SetMeshChanged())}_GetImageScaleY(){return this._imageScaleY}_SetImageAngle(m){this._imageAngle!==m&&(this._imageAngle=m,this._runtime.UpdateRender(),this._SetMeshChanged())}_GetImageAngle(){return this._imageAngle}GetPropertyValueByIndex(m){switch(m){case 4:return this._GetImageOffsetX();case 5:return this._GetImageOffsetY();case 6:return this._GetImageScaleX();case 7:return this._GetImageScaleY();case 8:return this._GetImageAngle()}}SetPropertyValueByIndex(m,
k){switch(m){case 4:this._SetImageOffsetX(k);break;case 5:this._SetImageOffsetY(k);break;case 6:this._SetImageScaleX(k);break;case 7:this._SetImageScaleY(k);break;case 8:this._SetImageAngle(k)}}GetScriptInterfaceClass(){return self.ITiledBackgroundInstance}};const h=new WeakMap;self.ITiledBackgroundInstance=class extends self.IWorldInstance{constructor(){super();h.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set imageOffsetX(m){h.get(this)._SetImageOffsetX(m)}get imageOffsetX(){return h.get(this)._GetImageOffsetX()}set imageOffsetY(m){h.get(this)._SetImageOffsetY(m)}get imageOffsetY(){return h.get(this)._GetImageOffsetY()}set imageScaleX(m){h.get(this)._SetImageScaleX(m)}get imageScaleX(){return h.get(this)._GetImageScaleX()}set imageScaleY(m){h.get(this)._SetImageScaleY(m)}get imageScaleY(){return h.get(this)._GetImageScaleY()}set imageAngle(m){h.get(this)._SetImageAngle(m)}get imageAngle(){return h.get(this)._GetImageAngle()}set imageAngleDegrees(m){h.get(this)._SetImageAngle(e.toRadians(m))}get imageAngleDegrees(){return e.toDegrees(h.get(this)._GetImageAngle())}}}"use strict";
self.C3.Plugins.TiledBg.Cnds={OnURLLoaded(){return!0},OnURLFailed(){return!0}};"use strict";
{const e=self.C3;e.Plugins.TiledBg.Acts={SetImageOffsetX(d){this._SetImageOffsetX(d)},SetImageOffsetY(d){this._SetImageOffsetY(d)},SetImageScaleX(d){this._SetImageScaleX(d/100)},SetImageScaleY(d){this._SetImageScaleY(d/100)},SetImageAngle(d){this._SetImageAngle(e.toRadians(d))},SetEffect(d){this.GetWorldInfo().SetBlendMode(d);this._runtime.UpdateRender()},async LoadURL(d,c){if(!this._ownImageInfo||this._ownImageInfo.GetURL()!==d){c=this._runtime;var f=e.New(e.ImageInfo);await f.LoadDynamicAsset(c,
d);if(f.IsLoaded()){if(this.WasReleased())return f.Release(),null;await f.LoadStaticTexture(c.GetWebGLRenderer(),{sampling:this._runtime.GetSampling(),wrapX:"repeat",wrapY:"repeat"})&&(this.WasReleased()?f.Release():(this._ReleaseOwnImage(),this._ownImageInfo=f,c.UpdateRender(),await this.TriggerAsync(e.Plugins.TiledBg.Cnds.OnURLLoaded)))}else this.Trigger(e.Plugins.TiledBg.Cnds.OnURLFailed)}}}}"use strict";
{const e=self.C3;e.Plugins.TiledBg.Exps={ImageWidth(){return this.GetCurrentImageInfo().GetWidth()},ImageHeight(){return this.GetCurrentImageInfo().GetHeight()},ImageOffsetX(){return this._imageOffsetX},ImageOffsetY(){return this._imageOffsetY},ImageScaleX(){return 100*this._imageScaleX},ImageScaleY(){return 100*this._imageScaleY},ImageAngle(){return e.toDegrees(this._imageAngle)}}}"use strict";{const e=self.C3;e.Plugins.Spritefont2=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.Spritefont2.Type=class extends e.SDKTypeBase{constructor(d){super(d);this._spriteFont=e.New(self.SpriteFont)}Release(){super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}LoadTextures(d){return this.GetImageInfo().LoadStaticTexture(d,{sampling:this._runtime.GetSampling()})}ReleaseTextures(){this.GetImageInfo().ReleaseTexture()}GetSpriteFont(){return this._spriteFont}UpdateSettings(d,c,f,g){const h=this.GetImageInfo(),m=this._spriteFont;m.SetWidth(h.GetWidth());
m.SetHeight(h.GetHeight());m.SetCharacterWidth(d);m.SetCharacterHeight(c);m.SetCharacterSet(f);m.SetSpacingData(g);m.UpdateCharacterMap()}}}"use strict";
{const e=self.C3,d=["left","center","right"],c=["top","center","bottom"];e.Plugins.Spritefont2.Instance=class extends e.SDKWorldInstanceBase{constructor(k,a){super(k);this._text="";this._enableBBcode=!0;this._characterHeight=this._characterWidth=16;this._characterSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@\u00b0+=*$\u00a3\u20ac<>";k="";this._characterScale=1;this._verticalAlign=this._horizontalAlign=this._lineHeight=this._characterSpacing=0;this._wrapByWord=
!0;this._spriteFontText=null;this._typewriterEndTime=this._typewriterStartTime=-1;this._typewriterLength=0;a&&(this._text=a[0],this._enableBBcode=a[1],this._characterWidth=a[2],this._characterHeight=a[3],this._characterSet=a[4],k=a[5],this._characterScale=a[6],this._characterSpacing=a[7],this._lineHeight=a[8],this._horizontalAlign=a[9],this._verticalAlign=a[10],this._wrapByWord=0===a[11],this.GetWorldInfo().SetVisible(a[12]));this._sdkType.UpdateSettings(this._characterWidth,this._characterHeight,
this._characterSet,k);this._spriteFontText=e.New(self.SpriteFontText,this._sdkType.GetSpriteFont());a=this.GetWorldInfo();this._spriteFontText.SetSize(a.GetWidth(),a.GetHeight());this._UpdateSettings()}Release(){this._CancelTypewriter();this._spriteFontText.Release();this._spriteFontText=null;super.Release()}_UpdateSettings(){const k=this._spriteFontText;k&&(k.SetBBCodeEnabled(this._enableBBcode),k.SetText(this._text),k.SetWordWrapMode(this._wrapByWord?"word":"character"),k.SetHorizontalAlign(d[this._horizontalAlign]),
k.SetVerticalAlign(c[this._verticalAlign]),k.SetSpacing(this._characterSpacing),k.SetLineHeight(this._lineHeight))}Draw(k){const a=this._objectClass.GetImageInfo();var b=a.GetTexture();if(b){k.SetTexture(b);b=this.GetWorldInfo();var l=b.GetBoundingQuad(),p=this._spriteFontText;p.SetScale(this._characterScale*b.GetSceneGraphScale());this._runtime.IsPixelRoundingEnabled()&&(l=b.PixelRoundQuad(l));p.SetSize(b.GetWidth(),b.GetHeight());p.GetSpriteFont().SetTexRect(a.GetTexRect());p.SetColor(b.GetUnpremultipliedColor());
p.Draw(k,l.getTlx(),l.getTly(),b.GetAngle())}}SaveToJson(){const k={t:this._text,ebbc:this._enableBBcode,csc:this._characterScale,csp:this._characterSpacing,lh:this._lineHeight,ha:this._horizontalAlign,va:this._verticalAlign,w:this._wrapByWord,cw:this._sdkType.GetSpriteFont().GetCharacterWidth(),ch:this._sdkType.GetSpriteFont().GetCharacterHeight(),cs:this._sdkType.GetSpriteFont().GetCharacterSet(),sd:this._sdkType.GetSpriteFont().GetSpacingData()};-1!==this._typewriterEndTime&&(k.tw={st:this._typewriterStartTime,
en:this._typewriterEndTime,l:this._typewriterLength});return k}LoadFromJson(k){this._CancelTypewriter();this._text=k.t;this._enableBBcode=k.ebbc;this._characterScale=k.csc;this._characterSpacing=k.csp;this._lineHeight=k.lh;this._horizontalAlign=k.ha;this._verticalAlign=k.va;this._wrapByWord=k.w;if(k.hasOwnProperty("tw")){var a=k.tw;this._typewriterStartTime=a.st;this._typewriterEndTime=a.en;this._typewriterLength=k.l}a=this._sdkType.GetSpriteFont();a.SetCharacterWidth(k.cw);a.SetCharacterHeight(k.ch);
a.SetCharacterSet(k.cs);a.SetSpacingData(k.sd);this._UpdateSettings();-1!==this._typewriterEndTime&&this._StartTicking()}GetPropertyValueByIndex(k){switch(k){case 0:return this._text;case 1:return this._enableBBcode;case 2:return this._sdkType.GetSpriteFont().GetCharacterWidth();case 3:return this._sdkType.GetSpriteFont().GetCharacterHeight();case 4:return this._sdkType.GetSpriteFont().GetCharacterSet();case 5:return this._sdkType.GetSpriteFont().GetSpacingData();case 6:return this._characterScale;
case 7:return this._characterSpacing;case 8:return this._lineHeight;case 9:return this._horizontalAlign;case 10:return this._verticalAlign;case 11:return this._wrapByWord?1:0}}SetPropertyValueByIndex(k,a){switch(k){case 0:if(this._text===a)break;this._text=a;this._UpdateSettings();break;case 1:if(this._enableBBcode===!!a)break;this._enableBBcode=!!a;this._UpdateSettings();break;case 2:this._sdkType.GetSpriteFont().SetCharacterWidth(a);break;case 3:this._sdkType.GetSpriteFont().SetCharacterHeight(a);
break;case 4:this._sdkType.GetSpriteFont().SetCharacterSet(a);break;case 5:this._sdkType.GetSpriteFont().SetSpacingData(a);break;case 6:if(this._characterScale===a)break;this._characterScale=a;this._UpdateSettings();break;case 7:if(this._characterSpacing===a)break;this._characterSpacing=a;this._UpdateSettings();break;case 8:if(this._lineHeight===a)break;this._lineHeight=a;this._UpdateSettings();break;case 9:if(this._horizontalAlign===a)break;this._horizontalAlign=a;this._UpdateSettings();break;case 10:if(this._verticalAlign===
a)break;this._verticalAlign=a;this._UpdateSettings();break;case 11:this._wrapByWord!==(0===a)&&(this._wrapByWord=0===a,this._UpdateSettings())}}_SetText(k){this._text!==k&&(this._text=k,this._spriteFontText.SetText(k),this._runtime.UpdateRender())}GetText(){return this._text}_StartTypewriter(k,a){this._SetText(k);this._typewriterStartTime=this._runtime.GetWallTime();this._typewriterEndTime=this._typewriterStartTime+a/this.GetInstance().GetActiveTimeScale();this._typewriterLength=e.BBString.StripAnyTags(k).length;
this._spriteFontText.SetDrawMaxCharacterCount(0);this._StartTicking()}_CancelTypewriter(){this._typewriterEndTime=this._typewriterStartTime=-1;this._typewriterLength=0;this._spriteFontText.SetDrawMaxCharacterCount(-1);this._StopTicking()}_FinishTypewriter(){-1!==this._typewriterEndTime&&(this._CancelTypewriter(),this.Trigger(e.Plugins.Spritefont2.Cnds.OnTypewriterTextFinished),this._runtime.UpdateRender())}_SetScale(k){this._characterScale!==k&&(this._characterScale=k,this._spriteFontText.SetScale(this._characterScale),
this._runtime.UpdateRender())}_GetScale(){return this._characterScale}_SetCharacterSpacing(k){this._characterSpacing!==k&&(this._characterSpacing=k,this._spriteFontText.SetSpacing(this._characterSpacing),this._runtime.UpdateRender())}_GetCharacterSpacing(){return this._characterSpacing}_SetLineHeight(k){this._lineHeight!==k&&(this._lineHeight=k,this._spriteFontText.SetLineHeight(this._lineHeight),this._runtime.UpdateRender())}_GetLineHeight(){return this._lineHeight}_SetHAlign(k){this._horizontalAlign!==
k&&(this._horizontalAlign=k,this._UpdateSettings(),this._runtime.UpdateRender())}_GetHAlign(){return this._horizontalAlign}_SetVAlign(k){this._verticalAlign!==k&&(this._verticalAlign=k,this._UpdateSettings(),this._runtime.UpdateRender())}_GetVAlign(){return this._verticalAlign}_SetWrapByWord(k){k=!!k;this._wrapByWord!==k&&(this._wrapByWord=k,this._UpdateSettings(),this._runtime.UpdateRender())}_IsWrapByWord(){return this._wrapByWord}Tick(){var k=this._runtime.GetWallTime();k>=this._typewriterEndTime?
(this._CancelTypewriter(),this.Trigger(e.Plugins.Spritefont2.Cnds.OnTypewriterTextFinished),this._runtime.UpdateRender()):(k=e.relerp(this._typewriterStartTime,this._typewriterEndTime,k,0,this._typewriterLength),k=Math.floor(k),k!==this._spriteFontText.GetDrawMaxCharacterCount()&&(this._spriteFontText.SetDrawMaxCharacterCount(k),this._runtime.UpdateRender()))}GetDebuggerProperties(){return[{title:"plugins.spritefont2.name",properties:[{name:"plugins.spritefont2.properties.text.name",value:this._text,
onedit:k=>this._SetText(k)}]}]}GetScriptInterfaceClass(){return self.ISpriteFontInstance}};const f=new WeakMap,g=new Map([["left",0],["center",1],["right",2]]),h=new Map([["top",0],["center",1],["bottom",2]]),m=new Map([["word",!0],["character",!1]]);self.ISpriteFontInstance=class extends self.IWorldInstance{constructor(){super();f.set(this,self.IInstance._GetInitInst().GetSdkInstance())}get text(){return f.get(this).GetText()}set text(k){const a=f.get(this);a._CancelTypewriter();a._SetText(k)}typewriterText(k,
a){const b=f.get(this);b._CancelTypewriter();b._StartTypewriter(k,a)}typewriterFinish(){f.get(this)._FinishTypewriter()}set characterScale(k){f.get(this)._SetScale(k)}get characterScale(){return f.get(this)._GetScale()}set characterSpacing(k){f.get(this)._SetCharacterSpacing(k)}get characterSpacing(){return f.get(this)._GetCharacterSpacing()}set lineHeight(k){f.get(this)._SetLineHeight(k)}get lineHeight(){return f.get(this)._GetLineHeight()}set horizontalAlign(k){k=g.get(k);if("undefined"===typeof k)throw Error("invalid mode");
f.get(this)._SetHAlign(k)}get horizontalAlign(){return d[f.get(this)._GetHAlign()]}set verticalAlign(k){k=h.get(k);if("undefined"===typeof k)throw Error("invalid mode");f.get(this)._SetVAlign(k)}get verticalAlign(){return c[f.get(this)._GetVAlign()]}set wordWrapMode(k){k=m.get(k);if("undefined"===typeof k)throw Error("invalid mode");f.get(this)._SetWrapByWord(k)}get wordWrapMode(){return f.get(this)._IsWrapByWord()?"word":"character"}}}"use strict";
{const e=self.C3;e.Plugins.Spritefont2.Cnds={CompareText(d,c){return c?this._text===d:e.equalsNoCase(this._text,d)},IsRunningTypewriterText(){return-1!==this._typewriterEndTime},OnTypewriterTextFinished(){return!0}}}"use strict";
self.C3.Plugins.Spritefont2.Acts={SetText(e){this._CancelTypewriter();"number"===typeof e&&1E9>e&&(e=Math.round(1E10*e)/1E10);this._SetText(e.toString())},AppendText(e){this._CancelTypewriter();"number"===typeof e&&1E9>e&&(e=Math.round(1E10*e)/1E10);(e=e.toString())&&this._SetText(this._text+e)},TypewriterText(e,d){this._CancelTypewriter();"number"===typeof e&&1E9>e&&(e=Math.round(1E10*e)/1E10);this._StartTypewriter(e.toString(),d)},TypewriterFinish(){this._FinishTypewriter()},SetScale(e){this._SetScale(e)},
SetCharacterSpacing(e){this._SetCharacterSpacing(e)},SetLineHeight(e){this._SetLineHeight(e)},SetCharacterWidth(e,d){let c=!1;const f=this._sdkType.GetSpriteFont();for(const g of e)if(" "===g)f.SetSpaceWidth(d),c=!0;else if(e=f.GetCharacter(g))e.SetDisplayWidth(d),c=!0;c&&f.SetCharacterWidthsChanged();this._runtime.UpdateRender()},SetEffect(e){this.GetWorldInfo().SetBlendMode(e);this._runtime.UpdateRender()},SetHAlign(e){this._SetHAlign(e)},SetVAlign(e){this._SetVAlign(e)},SetWrapping(e){this._SetWrapByWord(0===
e)}};"use strict";
{const e=self.C3;e.Plugins.Spritefont2.Exps={CharacterWidth(d){return(d=this._sdkType.GetSpriteFont().GetCharacter(d))?d.GetDisplayWidth():this._sdkType.GetSpriteFont().GetCharacterWidth()},CharacterHeight(){return this._characterHeight},CharacterScale(){return this._characterScale},CharacterSpacing(){return this._characterSpacing},LineHeight(){return this._lineHeight},Text(){return this._text},PlainText(){return this._enableBBcode?e.BBString.StripAnyTags(this._text):this._text},TextWidth(){const d=
this.GetWorldInfo();this._spriteFontText.SetSize(d.GetWidth(),d.GetHeight());return this._spriteFontText.GetTextWidth()},TextHeight(){const d=this.GetWorldInfo();this._spriteFontText.SetSize(d.GetWidth(),d.GetHeight());return this._spriteFontText.GetTextHeight()}}}"use strict";
{const e=self.C3;self.SpriteFontCharacter=class{constructor(d,c,f,g){let h=d.GetCharacterWidth(),m=d.GetCharacterHeight();this._spriteFont=d;this._char=c;this._pxRect=new e.Rect(f,g,f+h,g+m);this._texRect=new e.Rect;this._displayWidth=-1;this._UpdateTexRect()}Release(){this._texRect=this._pxRect=this._spriteFont=null}_UpdateTexRect(){let d=this._spriteFont.GetWidth(),c=this._spriteFont.GetHeight();this._texRect.copy(this._pxRect);this._texRect.divide(d,c);this._texRect.lerpInto(this._spriteFont.GetTexRect())}GetSpriteFont(){return this._spriteFont}GetChar(){return this._char}GetTexRect(){return this._texRect}SetDisplayWidth(d){this._displayWidth=
d}GetDisplayWidth(){return 0>this._displayWidth?this._spriteFont.GetCharacterWidth():this._displayWidth}}}"use strict";
{const e=self.C3,d=new e.Rect,c=new e.Quad,f=new e.Color,g=new Set(["left","center","right"]),h=new Set(["top","center","bottom"]),m=new Set(["word","character"]);self.SpriteFontText=class{constructor(k){this._spriteFont=k;this._cssHeight=this._cssWidth=0;this._text="";this._isBBcodeEnabled=!1;this._bbString=null;this._wrappedText=e.New(e.WordWrap);this._wrapMode="word";this._wrapChanged=!1;this._horizontalAlign="left";this._verticalAlign="top";this._scale=1;this._lineHeight=this._spacing=0;this._color=
e.New(e.Color);this._drawMaxCharCount=-1;this._drawCharCount=0;this._measureTextCallback=(a,b)=>this._MeasureText(a,b);this._spriteFont._AddSpriteFontText(this)}Release(){this._spriteFont._RemoveSpriteFontText(this);this._measureTextCallback=this._color=null;this._wrappedText.Clear();this._bbString=this._spriteFont=this._wrappedText=null}_MeasureText(k,a){var b=this._GetStyleTag(a,"scale"),l=b?parseFloat(b.param):this._scale;b=this._GetStyleTag(a,"scalex");b=(b?parseFloat(b.param):1)*l;a=this._GetStyleTag(a,
"scaley");a=(a?parseFloat(a.param):1)*l;a=this._spriteFont.GetCharacterHeight()*a+this._lineHeight;const p=this.GetSpriteFont();l=p.GetCharacterWidth()*b;const r=this.GetSpacing();if(p.HasAnyCustomWidths()){let u=0,w=0;for(var t of k){k=l;const x=p.GetCharacter(t);x?k=x.GetDisplayWidth()*b:" "===t&&(k=p.GetSpaceWidth()*b);w+=k;++u}return{width:w+u*r,height:a}}t=[...k].length;return{width:l*t+Math.max(t,0)*r,height:a}}_SetWrapChanged(){this._wrapChanged=!0;this._wrappedText.Clear()}SetSize(k,a){0>=
k||0>=a||this._cssWidth===k&&this._cssHeight===a||(this._cssWidth!==k&&this._SetWrapChanged(),this._cssWidth=k,this._cssHeight=a)}SetDrawMaxCharacterCount(k){this._drawMaxCharCount=Math.floor(k)}GetDrawMaxCharacterCount(){return this._drawMaxCharCount}_GetStyleTag(k,a){for(let b=k.length-1;0<=b;--b){const l=k[b];if(l.tag===a)return l}return null}_HasStyleTag(k,a){return!!this._GetStyleTag(k,a)}_MaybeWrapText(){if(this._wrapChanged){!this._isBBcodeEnabled||this._bbString&&this._bbString.toString()===
this._text||(this._bbString=new e.BBString(this._text,{noEscape:!0}));var k=-this.GetSpacing();this._wrappedText.WordWrap(this._isBBcodeEnabled?this._bbString.toFragmentList():this._text,this._measureTextCallback,this._cssWidth,this._wrapMode,k);this._wrapChanged=!1}}Draw(k,a,b,l){this._MaybeWrapText();let p=this._drawCharCount=0;const r=this._lineHeight,t=e.cloneArray(this._wrappedText.GetLines()),u=Math.sin(l);l=Math.cos(l);var w=t.reduce((x,A)=>x+A.height,0)-r;"center"===this._verticalAlign?p=
Math.max(Math.floor(this._cssHeight/2-w/2),0):"bottom"===this._verticalAlign&&(p=Math.floor(this._cssHeight-w));for(let x=0,A=t.length;x<A;++x){w=t[x];const E=w.height;if(0<x&&p>this._cssHeight-(E-r))break;0<=p&&this._DrawLine(k,w,a,b,p,u,l);p+=E}}_DrawLine(k,a,b,l,p,r,t){const u=a.height;let w=0;"center"===this._horizontalAlign?w=Math.max(Math.floor((this._cssWidth-a.width)/2),0):"right"===this._horizontalAlign&&(w=Math.max(Math.floor(this._cssWidth-a.width),0));for(const x of a.fragments)this._DrawFragment(k,
x,b,l,w,p,r,t,u),w+=x.width}_DrawFragment(k,a,b,l,p,r,t,u,w){var x=a.text,A=a.width,E=a.styles;if(-1!==this._drawMaxCharCount){if(this._drawCharCount>=this._drawMaxCharCount)return;this._drawCharCount+x.length>this._drawMaxCharCount&&(x=x.substr(0,this._drawMaxCharCount-this._drawCharCount),A=this._MeasureText(x,E).width);this._drawCharCount+=x.length}var y=this._GetStyleTag(E,"background");if(!(e.IsStringAllWhitespace(x)&&!y||this._HasStyleTag(E,"hide"))){var B=(a=this._GetStyleTag(E,"scale"))?parseFloat(a.param):
this._scale;a=this._GetStyleTag(E,"scalex");a=(a?parseFloat(a.param):1)*B;var H=this._GetStyleTag(E,"scaley");B*=H?parseFloat(H.param):1;B*=this._spriteFont.GetCharacterHeight();r+=w-this._lineHeight-B;w=this._GetStyleTag(E,"offsetx");p+=w?parseFloat(w.param):0;w=this._GetStyleTag(E,"offsety");r+=w?parseFloat(w.param):0;y&&(k.SetColorFillMode(),f.parseString(y.param),f.setA(1),k.SetColor(f),d.set(p,r,p+A,r+B),d.getRight()>this._cssWidth&&d.setRight(this._cssWidth),c.setFromRotatedRectPrecalc(d,t,
u),c.offset(b,l),k.Quad(c),k.SetTextureFillMode());(A=this._GetStyleTag(E,"color"))?(f.parseString(A.param),f.setA(this._color.getA())):f.copy(this._color);(A=this._GetStyleTag(E,"opacity"))&&f.setA(f.getA()*parseFloat(A.param)/100);f.premultiply();k.SetColor(f);A=this._spriteFont.GetCharacterWidth()*a;E=Math.abs(this.GetSpacing());for(const P of x)if(x=this._spriteFont.GetCharacter(P)){y=x.GetDisplayWidth()*a;if(p+y>this._cssWidth+E+.00001)break;d.set(p,r,p+A,r+B);c.setFromRotatedRectPrecalc(d,t,
u);c.offset(b,l);k.Quad3(c,x.GetTexRect());p+=y+this._spacing}else p+=this._spriteFont.GetSpaceWidth()*a+this._spacing}}GetSpriteFont(){return this._spriteFont}SetBBCodeEnabled(k){k=!!k;this._isBBcodeEnabled!==k&&(this._isBBcodeEnabled=k,this._SetWrapChanged())}IsBBCodeEnabled(){return this._isBBcodeEnabled}SetText(k){this._text!==k&&(this._text=k,this._SetWrapChanged())}SetWordWrapMode(k){if(!m.has(k))throw Error("invalid word wrap mode");this._wrapMode!==k&&(this._wrapMode=k,this._SetWrapChanged())}SetHorizontalAlign(k){if(!g.has(k))throw Error("invalid alignment");
this._horizontalAlign=k}SetVerticalAlign(k){if(!h.has(k))throw Error("invalid alignment");this._verticalAlign=k}SetScale(k){this._scale!==k&&(this._scale=k,this._SetWrapChanged())}GetScale(){return this._scale}SetSpacing(k){this._spacing!==k&&(this._spacing=k,this._SetWrapChanged())}GetSpacing(){return this._spacing}SetLineHeight(k){this._lineHeight=k;this._SetWrapChanged()}GetLineHeight(){return this._lineHeight}SetOpacity(k){k=e.clamp(k,0,1);this._color.a=k}SetColor(k){this._color.equals(k)||this._color.copy(k)}GetColor(){return this._color}GetTextWidth(){this._MaybeWrapText();
return this._wrappedText.GetMaxLineWidth()}GetTextHeight(){this._MaybeWrapText();var k=this._spriteFont.GetCharacterHeight()*this._scale;const a=this._lineHeight;k+=a;return this._wrappedText.GetLineCount()*k-a}}}"use strict";
{const e=self.C3,d={width:256,height:256,characterWidth:16,characterHeight:16,characterSet:""};self.SpriteFont=class{constructor(c){c=Object.assign({},d,c);if(0>=c.width||0>=c.height||0>=c.characterWidth||0>=c.characterHeight)throw Error("invalid size");this._width=c.width;this._height=c.height;this._characterWidth=c.characterWidth;this._characterHeight=c.characterHeight;this._characterSet=c.characterSet;this._spacingData="";this._spacingParsed=null;this._hasAnyCustomWidths=!1;this._spaceWidth=-1;
this._texRect=new e.Rect(0,0,1,1);this._characterMap=new Map;this._mapChanged=!0;this._allTexts=new Set}Release(){this._texRect=null;this._ReleaseCharacters();this._characterMap=null;this._allTexts&&this._allTexts.clear();this._allTexts=null}_ReleaseCharacters(){for(let c of this._characterMap.values())c.Release();this._characterMap.clear()}_AddSpriteFontText(c){this._allTexts.add(c)}_RemoveSpriteFontText(c){this._allTexts.delete(c)}UpdateCharacterMap(){if(this._mapChanged){this._ReleaseCharacters();
var c=[...this._characterSet],f=Math.floor(this._width/this._characterWidth),g=f*Math.floor(this._height/this._characterHeight);for(let h=0,m=c.length;h<m&&!(h>=g);++h){let k=c[h];this._characterMap.set(k,e.New(self.SpriteFontCharacter,this,k,h%f*this._characterWidth,Math.floor(h/f)*this._characterHeight))}this._hasAnyCustomWidths=!1;this._spaceWidth=-1;if(Array.isArray(this._spacingParsed))for(let h of this._spacingParsed)if(Array.isArray(h)&&2===h.length&&(c=h[0],f=h[1],"number"===typeof c&&isFinite(c)&&
"string"===typeof f&&c!==this._characterWidth))for(let m of f)(f=this._characterMap.get(m))?(f.SetDisplayWidth(c),this._hasAnyCustomWidths=!0):" "===m&&(this._spaceWidth=c,this._hasAnyCustomWidths=!0);this._mapChanged=!1;for(let h of this._allTexts)h._SetWrapChanged()}}SetCharacterWidthsChanged(){this._hasAnyCustomWidths=!0;for(const c of this._allTexts)c._SetWrapChanged()}GetCharacter(c){this.UpdateCharacterMap();return this._characterMap.get(c)||null}HasAnyCustomWidths(){return this._hasAnyCustomWidths}SetWidth(c){c=
Math.floor(c);if(0>=c)throw Error("invalid size");this._width!==c&&(this._width=c,this._mapChanged=!0)}GetWidth(){return this._width}SetHeight(c){c=Math.floor(c);if(0>=c)throw Error("invalid size");this._height!==c&&(this._height=c,this._mapChanged=!0)}GetHeight(){return this._height}SetTexRect(c){if(!this._texRect.equals(c)){this._texRect.copy(c);for(const f of this._characterMap.values())f._UpdateTexRect()}}GetTexRect(){return this._texRect}SetCharacterWidth(c){c=Math.floor(c);if(0>=c)throw Error("invalid size");
this._characterWidth!==c&&(this._characterWidth=c,this._mapChanged=!0)}GetCharacterWidth(){return this._characterWidth}SetCharacterHeight(c){c=Math.floor(c);if(0>=c)throw Error("invalid size");this._characterHeight!==c&&(this._characterHeight=c,this._mapChanged=!0)}GetCharacterHeight(){return this._characterHeight}SetCharacterSet(c){this._characterSet!==c&&(this._characterSet=c,this._mapChanged=!0)}GetCharacterSet(){return this._characterSet}SetSpacingData(c){if(this._spacingData!==c&&(this._spacingData=
c,this._mapChanged=!0,this._spacingParsed=null,this._spacingData.length))try{this._spacingParsed=JSON.parse(this._spacingData)}catch(f){this._spacingParsed=null}}GetSpacingData(){return this._spacingData}SetSpaceWidth(c){0>c&&(c=-1);this._spaceWidth!==c&&(this._spaceWidth=c,0<=this._spaceWidth&&(this._hasAnyCustomWidths=!0))}GetSpaceWidth(){return 0>this._spaceWidth?this._characterWidth:this._spaceWidth}}}"use strict";{const e=self.C3;e.Plugins.NinePatch=class extends e.SDKPluginBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Plugins.NinePatch.Type=class extends e.SDKTypeBase{constructor(d){super(d);this._drawable=this._textureSet=null}Release(){this.ReleaseTextures();super.Release()}OnCreate(){this.GetImageInfo().LoadAsset(this._runtime)}async LoadTextures(d){this._drawable=await this.GetImageInfo().ExtractImageToCanvas()}CreatePatch(d,c,f,g){!this._textureSet&&this._drawable&&(this._textureSet=new self.NinePatchTextureSet(this),this._textureSet.CreateTextures(this._drawable,d,c,f,g))}ReleaseTextures(){this._textureSet&&
(this._textureSet.Release(),this._textureSet=null)}GetTextureSet(){return this._textureSet}}}"use strict";
{const e=self.C3,d=e.New(e.Rect),c=e.New(e.Quad);e.Plugins.NinePatch.Instance=class extends e.SDKWorldInstanceBase{constructor(f,g){super(f);this._bottomMargin=this._topMargin=this._rightMargin=this._leftMargin=16;this._fill=this._edges=1;this._isSeamless=!0;g&&(this._leftMargin=g[0],this._rightMargin=g[1],this._topMargin=g[2],this._bottomMargin=g[3],this._edges=g[4],this._fill=g[5],this._isSeamless=!!g[8],this.GetWorldInfo().SetVisible(!!g[6]));this._sdkType.CreatePatch(this._leftMargin,this._rightMargin,
this._topMargin,this._bottomMargin)}Release(){super.Release()}Draw(f){let g=this._sdkType.GetTextureSet();if(!g&&(this._sdkType.CreatePatch(this._leftMargin,this._rightMargin,this._topMargin,this._bottomMargin),g=this._sdkType.GetTextureSet(),!g))return;var h=this.GetWorldInfo();const m=this._leftMargin,k=this._rightMargin,a=this._topMargin,b=this._bottomMargin;var l=g.GetImageWidth(),p=g.GetImageHeight();l-=k;p-=b;var r=h.GetBoundingQuad();const t=r.getTlx();r=r.getTly();const u=h.GetWidth();h=h.GetHeight();
var w=this._isSeamless?1:0;const x=this._edges,A=this._fill;0<m&&0<a&&this._DrawPatch(f,g.GetTexture(),0,0,m+w,a+w,t,r,m+w,a+w);0<k&&0<a&&this._DrawPatch(f,g.GetTexture(),l-w,0,k+w,a+w,t+u-k-w,r,k+w,a+w);0<k&&0<b&&this._DrawPatch(f,g.GetTexture(),l-w,p-w,k+w,b+w,t+u-k-w,r+h-b-w,k+w,b+w);0<m&&0<b&&this._DrawPatch(f,g.GetTexture(),0,p-w,m+w,b+w,t,r+h-b-w,m+w,b+w);0===x?(w=2===A?0:w,0<m&&p>a&&this._TilePatch(f,g.GetLeftTexture(),t,r+a,m+w,h-a-b,0,0),0<k&&p>a&&this._TilePatch(f,g.GetRightTexture(),t+
u-k-w,r+a,k+w,h-a-b,w,0),0<a&&l>m&&this._TilePatch(f,g.GetTopTexture(),t+m,r,u-m-k,a+w,0,0),0<b&&l>m&&this._TilePatch(f,g.GetBottomTexture(),t+m,r+h-b-w,u-m-k,b+w,0,w)):1===x&&(0<m&&p>a&&this._DrawPatch(f,g.GetTexture(),0,a,m,p-a,t,r+a,m,h-a-b),0<k&&p>a&&this._DrawPatch(f,g.GetTexture(),l,a,k,p-a,t+u-k,r+a,k,h-a-b),0<a&&l>m&&this._DrawPatch(f,g.GetTexture(),m,0,l-m,a,t+m,r,u-m-k,a),0<b&&l>m&&this._DrawPatch(f,g.GetTexture(),m,p,l-m,b,t+m,r+h-b,u-m-k,b));p>a&&l>m&&(0===A?this._TilePatch(f,g.GetFillTexture(),
t+m,r+a,u-m-k,h-a-b,0,0):1===A&&this._DrawPatch(f,g.GetTexture(),m,a,l-m,p-a,t+m,r+a,u-m-k,h-a-b))}_DrawPatch(f,g,h,m,k,a,b,l,p,r){const t=g.GetWidth(),u=g.GetHeight();f.SetTexture(g);g=this.GetWorldInfo();var w=g.GetBoundingQuad();const x=w.getTlx();w=w.getTly();d.set(b,l,b+p,l+r);d.offset(-x,-w);c.setFromRotatedRect(d,g.GetAngle());c.offset(x,w);d.set(h/t,m/u,(h+k)/t,(m+a)/u);f.Quad3(c,d)}_TilePatch(f,g,h,m,k,a,b,l){const p=g.GetWidth(),r=g.GetHeight();f.SetTexture(g);g=this.GetWorldInfo();var t=
g.GetBoundingQuad();const u=t.getTlx();t=t.getTly();d.set(h,m,h+k,m+a);d.offset(-u,-t);c.setFromRotatedRect(d,g.GetAngle());c.offset(u,t);d.set(-b/p,-l/r,(k-b)/p,(a-l)/r);f.Quad3(c,d)}GetCurrentImageInfo(){this._objectClass.GetImageInfo()}GetPropertyValueByIndex(f){}SetPropertyValueByIndex(f,g){}}}"use strict";self.C3.Plugins.NinePatch.Cnds={};"use strict";self.C3.Plugins.NinePatch.Acts={SetEffect(e){this.GetWorldInfo().SetBlendMode(e);this._runtime.UpdateRender()}};"use strict";
self.C3.Plugins.NinePatch.Exps={};"use strict";
{const e=self.C3;function d(c){const f=e.CreateCanvas(c.width,c.height);f.getContext("2d").drawImage(c,0,0);return f}self.NinePatchTextureSet=class{constructor(c){this._sdkType=c;this._runtime=this._sdkType.GetRuntime();this._bottomTexture=this._topTexture=this._rightTexture=this._leftTexture=this._fillTexture=this._texture=null;this._imageHeight=this._imageWidth=0;this._renderer=this._runtime.GetWebGLRenderer();this._wasReleased=this._isLoading=!1}Release(){this._renderer.IsContextLost()||(this._renderer.DeleteTexture(this._texture),
this._renderer.DeleteTexture(this._fillTexture),this._renderer.DeleteTexture(this._leftTexture),this._renderer.DeleteTexture(this._rightTexture),this._renderer.DeleteTexture(this._topTexture),this._renderer.DeleteTexture(this._bottomTexture));this._renderer=this._sdkType=this._bottomTexture=this._topTexture=this._rightTexture=this._leftTexture=this._fillTexture=this._texture=null;this._wasReleased=!0}WasReleased(){return this._wasReleased}CreateTextures(c,f,g,h,m){this._SliceImage(c,f,g,h,m)}HasCreatedTextures(){return!!this._texture}_SliceImage(c,
f,g,h,m){if(!this._wasReleased){var k=c.width,a=c.height;this._imageWidth=k;this._imageHeight=a;var b=k-g,l=a-m,p=this._runtime.GetSampling();this._texture=this._renderer.CreateStaticTexture(d(c),{sampling:p});b>f&&l>h&&(this._fillTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(d(c),f,h,b,l),{wrapX:"repeat",wrapY:"repeat",sampling:p}));0<f&&l>h&&(this._leftTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(d(c),0,h,f,l),{wrapY:"repeat",sampling:p}));0<g&&l>h&&(this._rightTexture=
this._renderer.CreateStaticTexture(this._SliceSubImage(d(c),b,h,k,l),{wrapY:"repeat",sampling:p}));0<h&&b>f&&(this._topTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(d(c),f,0,b,h),{wrapX:"repeat",sampling:p}));0<m&&b>f&&(this._bottomTexture=this._renderer.CreateStaticTexture(this._SliceSubImage(d(c),f,l,b,a),{wrapX:"repeat",sampling:p}))}}_SliceSubImage(c,f,g,h,m){h-=f;m-=g;const k=e.CreateCanvas(h,m);k.getContext("2d").drawImage(c,f,g,h,m,0,0,h,m);return k}GetImageWidth(){return this._imageWidth}GetImageHeight(){return this._imageHeight}GetTexture(){return this._texture}GetFillTexture(){return this._fillTexture}GetLeftTexture(){return this._leftTexture}GetRightTexture(){return this._rightTexture}GetTopTexture(){return this._topTexture}GetBottomTexture(){return this._bottomTexture}}}"use strict";
{const e=self.C3;e.Plugins.TextBox=class extends e.SDKDOMPluginBase{constructor(d){super(d,"text-input");this.AddElementMessageHandler("click",(c,f)=>c._OnClick(f));this.AddElementMessageHandler("dblclick",(c,f)=>c._OnDoubleClick(f));this.AddElementMessageHandler("change",(c,f)=>c._OnChange(f))}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.TextBox.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d="text password email number tel url textarea search".split(" ");e.Plugins.TextBox.Instance=class extends e.SDKDOMInstanceBase{constructor(f,g){super(f,"text-input");this._title=this._placeholder=this._text="";this._isEnabled=!0;this._spellCheck=this._isReadOnly=!1;this._type="text";this._autoFontSize=!0;this._maxLength=-1;this._id="";g&&(this._text=g[0],this._placeholder=g[1],this._title=g[2],this.GetWorldInfo().SetVisible(g[3]),this._isEnabled=g[4],this._isReadOnly=g[5],this._spellCheck=
g[6],this._type=d[g[7]],this._autoFontSize=g[8],this._id=g[9]);this.CreateElement({type:this._type,id:this._id})}Release(){super.Release()}GetElementState(){return{text:this._text,placeholder:this._placeholder,title:this._title,isEnabled:this._isEnabled,isReadOnly:this._isReadOnly,spellCheck:this._spellCheck,maxLength:this._maxLength}}async _OnClick(f){this.GetScriptInterface().dispatchEvent(e.New(e.Event,"click",!0));await this.TriggerAsync(e.Plugins.TextBox.Cnds.OnClicked)}async _OnDoubleClick(f){this.GetScriptInterface().dispatchEvent(e.New(e.Event,
"dblclick",!0));await this.TriggerAsync(e.Plugins.TextBox.Cnds.OnDoubleClicked)}async _OnChange(f){this._text=f.text;this.GetScriptInterface().dispatchEvent(e.New(e.Event,"change",!0));await this.TriggerAsync(e.Plugins.TextBox.Cnds.OnTextChanged)}_SetText(f){this._text!==f&&(this._text=f,this.UpdateElementState())}_GetText(){return this._text}_SetPlaceholder(f){this._placeholder!==f&&(this._placeholder=f,this.UpdateElementState())}_GetPlaceholder(){return this._placeholder}_SetTooltip(f){this._title!==
f&&(this._title=f,this.UpdateElementState())}_GetTooltip(){return this._title}_SetEnabled(f){f=!!f;this._isEnabled!==f&&(this._isEnabled=f,this.UpdateElementState())}_IsEnabled(){return this._isEnabled}_SetReadOnly(f){f=!!f;this._isReadOnly!==f&&(this._isReadOnly=f,this.UpdateElementState())}_IsReadOnly(){return this._isReadOnly}_SetMaxLength(f){f=Math.max(+f,-1);this._maxLength!==f&&(this._maxLength=f,this.UpdateElementState())}_GetMaxLength(){return this._maxLength}_ScrollToBottom(){this.PostToDOMElement("scroll-to-bottom")}Draw(f){}SaveToJson(){return{t:this._text,
p:this._placeholder,ti:this._title,e:this._isEnabled,r:this._isReadOnly,sp:this._spellCheck,ml:this._maxLength,type:this._type,id:this._id}}LoadFromJson(f){this._text=f.t;this._placeholder=f.p;this._title=f.ti;this._isEnabled=f.e;this._isReadOnly=f.r;this._spellCheck=f.sp;this._maxLength=f.hasOwnProperty("ml")?f.ml:-1;this._type=f.type;this._id=f.id;this.UpdateElementState()}GetPropertyValueByIndex(f){switch(f){case 0:return this._text;case 1:return this._placeholder;case 2:return this._title;case 4:return this._isEnabled;
case 5:return this._isReadOnly;case 6:return this._spellCheck;case 8:return this._autoFontSize;case 9:return this._id}}SetPropertyValueByIndex(f,g){switch(f){case 0:if(this._text===g)break;this._text=g;this.UpdateElementState();break;case 1:if(this._placeholder===g)break;this._placeholder=g;this.UpdateElementState();break;case 2:if(this._title===g)break;this._title=g;this.UpdateElementState();break;case 4:if(this._isEnabled===!!g)break;this._isEnabled=!!g;this.UpdateElementState();break;case 5:if(this._isReadOnly===
!!g)break;this._isReadOnly=!!g;this.UpdateElementState();break;case 6:if(this._spellCheck===!!g)break;this._spellCheck=!!g;this.UpdateElementState();break;case 8:this._autoFontSize=!!g;break;case 9:this._id!==g&&(this._id=g,this.UpdateElementState())}}GetDebuggerProperties(){const f=e.Plugins.TextBox.Acts;return[{title:"plugins.textbox.name",properties:[{name:"plugins.textbox.properties.text.name",value:this._text,onedit:g=>this.CallAction(f.SetText,g)},{name:"plugins.textbox.properties.enabled.name",
value:this._isEnabled,onedit:g=>this.CallAction(f.SetEnabled,g)},{name:"plugins.textbox.properties.read-only.name",value:this._isReadOnly,onedit:g=>this.CallAction(f.SetReadOnly,g)}]}]}GetScriptInterfaceClass(){return self.ITextInputInstance}};const c=new WeakMap;self.ITextInputInstance=class extends self.IDOMInstance{constructor(){super();c.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set text(f){c.get(this)._SetText(f)}get text(){return c.get(this)._GetText()}set placeholder(f){c.get(this)._SetPlaceholder(f)}get placeholder(){return c.get(this)._GetPlaceholder()}set tooltip(f){c.get(this)._SetTooltip(f)}get tooltip(){return c.get(this)._GetTooltip()}set isEnabled(f){c.get(this)._SetEnabled(f)}get isEnabled(){return c.get(this)._IsEnabled()}set isReadOnly(f){c.get(this)._SetReadOnly(f)}get isReadOnly(){return c.get(this)._IsReadOnly()}set maxLength(f){c.get(this)._SetMaxLength(f)}get maxLength(){return c.get(this)._GetMaxLength()}scrollToBottom(){c.get(this)._ScrollToBottom()}}}"use strict";
{const e=self.C3;e.Plugins.TextBox.Cnds={CompareText(d,c){return 0===c?e.equalsNoCase(this._text,d):this._text===d},OnTextChanged(){return!0},OnClicked(){return!0},OnDoubleClicked(){return!0}}}"use strict";self.C3.Plugins.TextBox.Acts={SetText(e){this._SetText(e)},AppendText(e){e&&this._SetText(this._GetText()+e)},SetPlaceholder(e){this._SetPlaceholder(e)},SetTooltip(e){this._SetTooltip(e)},SetReadOnly(e){this._SetReadOnly(0===e)},ScrollToBottom(){this._ScrollToBottom()},SetMaxLength(e){this._SetMaxLength(e)}};
"use strict";self.C3.Plugins.TextBox.Exps={Text(){return this._GetText()},MaxLength(){return this._GetMaxLength()}};"use strict";{const e=self.C3;e.Plugins.List=class extends e.SDKDOMPluginBase{constructor(d){super(d,"list");this.AddElementMessageHandler("click",(c,f)=>c._OnClick(f));this.AddElementMessageHandler("dblclick",(c,f)=>c._OnDoubleClick(f));this.AddElementMessageHandler("change",(c,f)=>c._OnChange(f))}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.List.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Plugins.List.Instance=class extends e.SDKDOMInstanceBase{constructor(d,c){super(d,"list");this._items=[];this._title=this._stringItems="";this._isDropdown=this._isEnabled=!0;this._isMultiSelect=!1;this._autoFontSize=!0;this._id="";this._selectedIndex=-1;this._selectedIndices=[];c&&(this._items=(d=c[0])?d.split("\n"):[],this._stringItems=c[0],this._title=c[1],this.GetWorldInfo().SetVisible(!!c[2]),this._isEnabled=!!c[3],this._isDropdown=1===c[4],this._isMultiSelect=!!c[5],this._autoFontSize=
!!c[6],this._id=c[7],this._isDropdown&&(this._selectedIndex=0));this.CreateElement({id:this._id,isDropdown:this._isDropdown,isMultiSelect:this._isMultiSelect,items:this._items})}Release(){e.clearArray(this._items);this._items=null;e.clearArray(this._selectedIndices);this._selectedIndices=null;super.Release()}GetElementState(){return{title:this._title,isEnabled:this._isEnabled,isMultiSelect:this._isMultiSelect}}_UpdateSelectedIndex(){this.PostToDOMElement("set-selected-index",{selectedIndex:this._selectedIndex})}_ReadSelectionState(d){this._selectedIndex=
d.selectedIndex;this._selectedIndices=d.selectedIndices}async _OnClick(d){this._ReadSelectionState(d);await this.TriggerAsync(e.Plugins.List.Cnds.OnClicked)}async _OnDoubleClick(d){this._ReadSelectionState(d);await this.TriggerAsync(e.Plugins.List.Cnds.OnDoubleClicked)}async _OnChange(d){this._ReadSelectionState(d);await this.TriggerAsync(e.Plugins.List.Cnds.OnSelectionChanged)}Draw(d){}SaveToJson(){return{title:this._title,isEnabled:this._isEnabled,id:this._id,items:e.cloneArray(this._items),selectedIndex:this._selectedIndex,
selectedIndices:this._selectedIndices}}LoadFromJson(d){this._title=d.title;this._isEnabled=d.isEnabled;this._id=d.id;this._items=e.cloneArray(d.items);this._stringItems=this._items.join("/n");this._selectedIndex=d.selectedIndex;this._selectedIndices=d.selectedIndices;this.UpdateElementState();this.PostToDOMElement("load-state",{items:this._items,selectedIndex:this._selectedIndex,selectedIndices:this._selectedIndices})}_SetEnabled(d){d=!!d;this._isEnabled!==d&&(this._isEnabled=d,this.UpdateElementState())}_IsEnabled(){return this._isEnabled}GetPropertyValueByIndex(d){switch(d){case 0:return this._stringItems;
case 1:return this._title;case 3:return this._isEnabled;case 5:return this._isMultiSelect;case 6:return this._autoFontSize;case 7:return this._id}}SetPropertyValueByIndex(d,c){switch(d){case 0:if(this._stringItems===c)break;this._items=c.split("\n");this._stringItems=c;this._selectedIndex=e.clamp(this._selectedIndex,0,this._items.length-1);this.UpdateElementState();this.PostToDOMElement("load-state",{items:this._items,selectedIndex:this._selectedIndex,selectedIndices:this._selectedIndices});break;
case 1:if(this._title===c)break;this._title=c;this.UpdateElementState();break;case 3:if(this._isEnabled===!!c)break;this._isEnabled=!!c;this.UpdateElementState();break;case 5:if(this._isMultiSelect===!!c)break;this._isMultiSelect=!!c;this.UpdateElementState();break;case 6:if(this._autoFontSize===!!c)break;this._autoFontSize=!!c;this.UpdateElementState();break;case 7:this._id!==c&&(this._id=c,this.UpdateElementState())}}GetDebuggerProperties(){const d=e.Plugins.List.Acts;return[{title:"plugins.list.name",
properties:[{name:"plugins.list.debugger.item-count",value:this._items.length},{name:"plugins.list.properties.enabled.name",value:this._isEnabled,onedit:c=>this.CallAction(d.SetEnabled,c)},{name:"plugins.list.debugger.selected-index",value:this._selectedIndex}]},{title:"plugins.list.properties.items.name",properties:this._items.map((c,f)=>({name:"$"+f,value:c,onedit:g=>this.CallAction(d.SetItemText,f,g)}))}]}}}"use strict";
{const e=self.C3;e.Plugins.List.Cnds={CompareSelection(d,c){return e.compare(this._selectedIndex,d,c)},OnSelectionChanged(){return!0},OnClicked(){return!0},OnDoubleClicked(){return!0},CompareSelectedText(d,c){var f=this._selectedIndex;if(0>f||f>=this._items.length)return!1;f=this._items[f];return c?f===d:e.equalsNoCase(f,d)},CompareTextAt(d,c,f){d=Math.floor(d);if(0>d||d>=this._items.length)return!1;d=this._items[d];return f?d===c:e.equalsNoCase(d,c)}}}"use strict";
{const e=self.C3;e.Plugins.List.Acts={Select(d){d=Math.floor(d);0>d&&(d=-1);d>=this._items.length||this._selectedIndex===d||(this._selectedIndex=d,this._selectedIndices=[d],this._UpdateSelectedIndex())},SetTooltip(d){this._title!==d&&(this._title=d,this.UpdateElementState())},SetVisible(d){const c=this.GetWorldInfo();d=0!==d;c.IsVisible()!==d&&c.SetVisible(d)},AddItem(d){this._items.push(d);this.PostToDOMElement("add-item",{text:d,index:-1})},AddItemAt(d,c){d=Math.max(Math.floor(d),0);if(d>=this._items.length)this._items.push(c),
d=-1;else{this._items.splice(d,0,c);this._selectedIndex>=d&&this._selectedIndex++;for(let f=0,g=this._selectedIndices.length;f<g;++f)this._selectedIndices[f]>=d&&this._selectedIndices[f]++}this.PostToDOMElement("add-item",{index:d,text:c})},Remove(d){d=Math.floor(d);if(!(0>d||d>=this._items.length)){this._items.splice(d,1);this._selectedIndex>=d&&this._selectedIndex--;var c=this._selectedIndices.indexOf(d);-1!==c&&this._selectedIndices.splice(c,1);c=0;for(let f=this._selectedIndices.length;c<f;++c)this._selectedIndices[c]>=
d&&this._selectedIndices[c]--;this.PostToDOMElement("remove-item",{index:d})}},SetItemText(d,c){d=Math.floor(d);0>d||d>=this._items.length||(this._items[d]=c,this.PostToDOMElement("set-item",{index:d,text:c}))},Clear(){e.clearArray(this._items);this._selectedIndex=-1;e.clearArray(this._selectedIndices);this.PostToDOMElement("clear")}}}"use strict";
self.C3.Plugins.List.Exps={ItemCount(){return this._items.length},ItemTextAt(e){e=Math.floor(e);return 0>e||e>=this._items.length?"":this._items[e]},SelectedIndex(){return this._selectedIndex},SelectedText(){const e=this._selectedIndex;return 0>e||e>=this._items.length?"":this._items[e]},SelectedCount(){return this._selectedIndices.length},SelectedIndexAt(e){e=Math.floor(e);return 0>e||e>=this._selectedIndices.length?0:this._selectedIndices[e]},SelectedTextAt(e){e=Math.floor(e);if(0>e||e>=this._selectedIndices.length)return"";
e=this._selectedIndices[e];return 0>e||e>=this._items.length?"":this._items[e]}};"use strict";{const e=self.C3;e.Plugins.Button=class extends e.SDKDOMPluginBase{constructor(d){super(d,"button");this.AddElementMessageHandler("click",(c,f)=>c._OnClick(f))}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.Button.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Plugins.Button.Instance=class extends e.SDKDOMInstanceBase{constructor(c,f){super(c,"button");this._text="OK";this._isChecked=this._isCheckbox=!1;this._id=this._title="";this._autoFontSize=this._isEnabled=!0;f&&(this._isCheckbox=1===f[0],this._text=f[1],this._title=f[2],this.GetWorldInfo().SetVisible(f[3]),this._isEnabled=f[4],this._autoFontSize=f[5],this._isChecked=f[6],this._id=f[7]);this.CreateElement({id:this._id})}Release(){super.Release()}GetElementState(){return{text:this._text,
isCheckbox:this._isCheckbox,isChecked:this._isChecked,title:this._title,isVisible:this.GetWorldInfo().IsVisible(),isEnabled:this._isEnabled}}async _OnClick(c){this._isChecked=c.isChecked;this.GetScriptInterface().dispatchEvent(e.New(e.Event,"click",!0));await this.TriggerAsync(e.Plugins.Button.Cnds.OnClicked)}_SetText(c){this._text!==c&&(this._text=c,this.UpdateElementState())}_GetText(){return this._text}_SetTooltip(c){this._title!==c&&(this._title=c,this.UpdateElementState())}_GetTooltip(){return this._title}_SetEnabled(c){c=
!!c;this._isEnabled!==c&&(this._isEnabled=c,this.UpdateElementState())}_IsEnabled(){return this._isEnabled}_SetChecked(c){this._isCheckbox&&(c=!!c,this._isChecked!==c&&(this._isChecked=c,this.UpdateElementState()))}_IsChecked(){return this._isChecked}Draw(c){}SaveToJson(){return{text:this._text,checked:this._isChecked,title:this._title,enabled:this._isEnabled}}LoadFromJson(c){this._text=c.text;this._isChecked=c.checked;this._title=c.title;this._isEnabled=c.enabled;this.UpdateElementState()}GetPropertyValueByIndex(c){switch(c){case 1:return this._text;
case 2:return this._title;case 4:return this._isEnabled;case 5:return this._autoFontSize;case 6:return this._isChecked;case 7:return this._id}}SetPropertyValueByIndex(c,f){switch(c){case 1:if(this._text===f)break;this._text=f;this.UpdateElementState();break;case 2:if(this._title===f)break;this._title=f;this.UpdateElementState();break;case 4:if(this._isEnabled===!!f)break;this._isEnabled=!!f;this.UpdateElementState();break;case 5:this._autoFontSize=!!f;break;case 6:if(this._isChecked===!!f)break;this._isChecked=
!!f;this.UpdateElementState();break;case 7:this._id!==!!f&&(this._id=f,this.UpdateElementState())}}GetDebuggerProperties(){const c=e.Plugins.Button.Acts;return[{title:"plugins.button.name",properties:[{name:"plugins.button.properties.text.name",value:this._text,onedit:f=>this.CallAction(c.SetText,f)},{name:"plugins.button.properties.enabled.name",value:this._isEnabled,onedit:f=>this.CallAction(c.SetEnabled,f)},{name:"plugins.button.properties.checked.name",value:this._isChecked,onedit:f=>this.CallAction(c.SetChecked,
f)}]}]}GetScriptInterfaceClass(){return self.IButtonInstance}};const d=new WeakMap;self.IButtonInstance=class extends self.IDOMInstance{constructor(){super();d.set(this,self.IInstance._GetInitInst().GetSdkInstance())}set text(c){d.get(this)._SetText(c)}get text(){return d.get(this)._GetText()}set tooltip(c){d.get(this)._SetTooltip(c)}get tooltip(){return d.get(this)._GetTooltip()}set isEnabled(c){d.get(this)._SetEnabled(c)}get isEnabled(){return d.get(this)._IsEnabled()}set isChecked(c){d.get(this)._SetChecked(c)}get isChecked(){return d.get(this)._IsChecked()}}}"use strict";
{const e=self.C3;e.Plugins.Button.Cnds={OnClicked(){return!0},IsChecked(){return this._isChecked},CompareText(d,c){return c?this._text===d:e.equalsNoCase(this._text,d)}}}"use strict";self.C3.Plugins.Button.Acts={SetText(e){this._SetText(e)},SetTooltip(e){this._SetTooltip(e)},SetChecked(e){this._SetChecked(0!==e)},ToggleChecked(){this._isCheckbox&&(this._isChecked=!this._isChecked,this.UpdateElementState())}};"use strict";self.C3.Plugins.Button.Exps={Text(){return this._text}};"use strict";
{const e=self.C3;e.Plugins.iframe=class extends e.SDKDOMPluginBase{constructor(d){super(d,"iframe")}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Plugins.iframe.Type=class extends e.SDKTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Plugins.iframe.Instance=class extends e.SDKDOMInstanceBase{constructor(c,f){super(c,"iframe");this._allowAttrib=this._id=c=this._url="";this._enableSandbox=!1;this._sandboxAttrib="";f&&(this._url=f[0],c=f[1],this.GetWorldInfo().SetVisible(f[2]),this._id=f[3],this._allowAttrib=f[4],this._enableSandbox=f[5],this._sandboxAttrib=f[6]);this.CreateElement({url:"",html:c,id:this._id,allow:this._allowAttrib,enableSandbox:this._enableSandbox,sandbox:this._sandboxAttrib});this._url&&this._runtime.AddCreatePromise((async()=>
{const g=await this.GetUrl();await this.PostToDOMElementAsync("navigate-url",{url:g})})())}Release(){super.Release()}GetElementState(){return{}}async GetUrl(c){return await this._runtime.GetAssetManager().GetProjectFileUrl(c||this._url)}Draw(c){}SaveToJson(){return{url:this._url,id:this._id}}LoadFromJson(c){this._url=c.url;this._id=c.id;this.UpdateElementState()}GetDebuggerProperties(){const c=e.Plugins.iframe.Acts;return[{title:"plugins.iframe.name",properties:[{name:"plugins.iframe.properties.url.name",
value:this._url,onedit:f=>this.CallAction(c.NavigateURL,f)}]}]}GetScriptInterfaceClass(){return self.IIframeInstance}};const d=new WeakMap;self.IIframeInstance=class extends self.IDOMInstance{constructor(){super();d.set(this,self.IInstance._GetInitInst().GetSdkInstance())}}}"use strict";self.C3.Plugins.iframe.Cnds={};"use strict";
self.C3.Plugins.iframe.Acts={async NavigateURL(e){e=await this.GetUrl(e);this.PostToDOMElement("navigate-url",{url:e})},DisplayHTMLString(e){this.PostToDOMElement("display-html",{html:e})}};"use strict";self.C3.Plugins.iframe.Exps={};"use strict";{const e=self.C3;e.Behaviors.Pin=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.Pin.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.Pin.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._pinInst=null;this._pinUid=-1;this._mode="";this._propSet=new Set;this._lastKnownAngle=this._dz=this._dAngle=this._dHeight=this._dWidth=this._dy=this._dx=this._pinImagePoint=this._pinAngle=this._pinDist=0;this._destroy=!1;c&&(this._destroy=c[0]);d=this._runtime.Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(d,"instancedestroy",f=>this._OnInstanceDestroyed(f.instance)),
e.Disposable.From(d,"afterload",f=>this._OnAfterLoad()))}Release(){this._pinInst=null;super.Release()}_SetPinInst(d){d?(this._pinInst=d,this._StartTicking2()):(this._pinInst=null,this._StopTicking2())}_Pin(d,c,f){if(d&&(d=d.GetFirstPicked(this._inst)))if(this._mode=c,this._SetPinInst(d),c=this._inst.GetWorldInfo(),d=d.GetWorldInfo(),"properties"===this._mode){const g=this._propSet;g.clear();for(const h of f)g.add(h);this._dx=c.GetX()-d.GetX();this._dy=c.GetY()-d.GetY();this._dAngle=c.GetAngle()-d.GetAngle();
this._lastKnownAngle=c.GetAngle();this._dz=c.GetZElevation()-d.GetZElevation();g.has("x")&&g.has("y")&&(this._pinAngle=e.angleTo(d.GetX(),d.GetY(),c.GetX(),c.GetY())-d.GetAngle(),this._pinDist=e.distanceTo(d.GetX(),d.GetY(),c.GetX(),c.GetY()));g.has("width-abs")?this._dWidth=c.GetWidth()-d.GetWidth():g.has("width-scale")&&(this._dWidth=c.GetWidth()/d.GetWidth());g.has("height-abs")?this._dHeight=c.GetHeight()-d.GetHeight():g.has("height-scale")&&(this._dHeight=c.GetHeight()/d.GetHeight())}else this._pinDist=
e.distanceTo(d.GetX(),d.GetY(),c.GetX(),c.GetY())}SaveToJson(){const d=this._propSet,c=this._mode,f={uid:this._pinInst?this._pinInst.GetUID():-1,m:c};if("rope"===c||"bar"===c)f.pd=this._pinDist;else if("properties"===c){f.ps=[...this._propSet];d.has("imagepoint")?f.ip=this._pinImagePoint:d.has("x")&&d.has("y")?(f.pa=this._pinAngle,f.pd=this._pinDist):(d.has("x")&&(f.dx=this._dx),d.has("y")&&(f.dy=this._dy));d.has("angle")&&(f.da=this._dAngle,f.lka=this._lastKnownAngle);if(d.has("width-abs")||d.has("width-scale"))f.dw=
this._dWidth;if(d.has("height-abs")||d.has("height-scale"))f.dh=this._dHeight;d.has("z")&&(f.dz=this._dz)}return f}LoadFromJson(d){const c=d.m,f=this._propSet;f.clear();this._pinUid=d.uid;if("number"===typeof c)this._LoadFromJson_Legacy(d);else if(this._mode=c,"rope"===c||"bar"===c)this._pinDist=d.pd;else if("properties"===c){for(const g of d.ps)f.add(g);f.has("imagepoint")?this._pinImagePoint=d.ip:f.has("x")&&f.has("y")?(this._pinAngle=d.pa,this._pinDist=d.pd):(f.has("x")&&(this._dx=d.dx),f.has("y")&&
(this._dy=d.dy));f.has("angle")&&(this._dAngle=d.da,this._lastKnownAngle=d.lka||0);if(f.has("width-abs")||f.has("width-scale"))this._dWidth=d.dw;if(f.has("height-abs")||f.has("height-scale"))this._dHeight=d.dh;f.has("z")&&(this._dz=d.dz)}}_LoadFromJson_Legacy(d){const c=this._propSet,f=d.msa,g=d.tsa,h=d.pa,m=d.pd;switch(d.m){case 0:this._mode="properties";c.add("x").add("y").add("angle");this._pinAngle=h;this._pinDist=m;this._dAngle=f-g;this._lastKnownAngle=d.lka;break;case 1:this._mode="properties";
c.add("x").add("y");this._pinAngle=h;this._pinDist=m;break;case 2:this._mode="properties";c.add("angle");this._dAngle=f-g;this._lastKnownAngle=d.lka;break;case 3:this._mode="rope";this._pinDist=d.pd;break;case 4:this._mode="bar",this._pinDist=d.pd}}_OnAfterLoad(){-1===this._pinUid?this._SetPinInst(null):(this._SetPinInst(this._runtime.GetInstanceByUID(this._pinUid)),this._pinUid=-1)}_OnInstanceDestroyed(d){this._pinInst===d&&(this._SetPinInst(null),this._destroy&&this._runtime.DestroyInstance(this._inst))}Tick2(){var d=
this._pinInst;if(d){var c=d.GetWorldInfo(),f=this._inst.GetWorldInfo(),g=this._mode,h=!1;if("rope"===g||"bar"===g){if(d=e.distanceTo(f.GetX(),f.GetY(),c.GetX(),c.GetY()),d>this._pinDist||"bar"===g&&d<this._pinDist)h=e.angleTo(c.GetX(),c.GetY(),f.GetX(),f.GetY()),f.SetXY(c.GetX()+Math.cos(h)*this._pinDist,c.GetY()+Math.sin(h)*this._pinDist),h=!0}else{g=this._propSet;if(g.has("imagepoint")){const [m,k]=d.GetImagePoint(this._pinImagePoint);f.EqualsXY(m,k)||(f.SetXY(m,k),h=!0)}else if(g.has("x")&&g.has("y")){d=
c.GetX()+Math.cos(c.GetAngle()+this._pinAngle)*this._pinDist;const m=c.GetY()+Math.sin(c.GetAngle()+this._pinAngle)*this._pinDist;f.EqualsXY(d,m)||(f.SetXY(d,m),h=!0)}else d=c.GetX()+this._dx,g.has("x")&&d!==f.GetX()&&(f.SetX(d),h=!0),d=c.GetY()+this._dy,g.has("y")&&d!==f.GetY()&&(f.SetY(d),h=!0);g.has("angle")&&(this._lastKnownAngle!==f.GetAngle()&&(this._dAngle=e.clampAngle(this._dAngle+(f.GetAngle()-this._lastKnownAngle))),d=e.clampAngle(c.GetAngle()+this._dAngle),d!==f.GetAngle()&&(f.SetAngle(d),
h=!0),this._lastKnownAngle=f.GetAngle());g.has("width-abs")&&(d=c.GetWidth()+this._dWidth,d!==f.GetWidth()&&(f.SetWidth(d),h=!0));g.has("width-scale")&&(d=c.GetWidth()*this._dWidth,d!==f.GetWidth()&&(f.SetWidth(d),h=!0));g.has("height-abs")&&(d=c.GetHeight()+this._dHeight,d!==f.GetHeight()&&(f.SetHeight(d),h=!0));g.has("height-scale")&&(d=c.GetHeight()*this._dHeight,d!==f.GetHeight()&&(f.SetHeight(d),h=!0));g.has("z")&&(d=c.GetZElevation()+this._dz,d!==f.GetZElevation()&&(f.SetZElevation(d),this._runtime.UpdateRender()))}h&&
f.SetBboxChanged()}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.pin.debugger.is-pinned",value:!!this._pinInst},{name:"behaviors.pin.debugger.pinned-uid",value:this._pinInst?this._pinInst.GetUID():0}]}]}}}"use strict";self.C3.Behaviors.Pin.Cnds={IsPinned(){return!!this._pinInst},WillDestroy(){return this._destroy}};"use strict";
self.C3.Behaviors.Pin.Acts={PinByDistance(e,d){this._Pin(e,0===d?"rope":"bar")},PinByProperties(e,d,c,f,g,h,m){const k=[];d&&k.push("x");c&&k.push("y");f&&k.push("angle");m&&k.push("z");1===g?k.push("width-abs"):2===g&&k.push("width-scale");1===h?k.push("height-abs"):2===h&&k.push("height-scale");0!==k.length&&this._Pin(e,"properties",k)},PinByImagePoint(e,d,c,f,g,h){const m=["imagepoint"];c&&m.push("angle");h&&m.push("z");1===f?m.push("width-abs"):2===f&&m.push("width-scale");1===g?m.push("height-abs"):
2===g&&m.push("height-scale");this._pinImagePoint=d;this._Pin(e,"properties",m)},SetPinDistance(e){if("rope"===this._mode||"bar"===this._mode)this._pinDist=Math.max(e,0)},SetDestroy(e){this._destroy=e},Unpin(){this._SetPinInst(null);this._mode="";this._propSet.clear();this._pinImagePoint=""},Pin(e,d){switch(d){case 0:this._Pin(e,"properties",["x","y","angle"]);break;case 1:this._Pin(e,"properties",["x","y"]);break;case 2:this._Pin(e,"properties",["angle"]);break;case 3:this._Pin(e,"rope");break;case 4:this._Pin(e,
"bar")}}};"use strict";self.C3.Behaviors.Pin.Exps={PinnedUID(){return this._pinInst?this._pinInst.GetUID():-1}};"use strict";{const e=self.C3;e.Behaviors.Sin=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.Sin.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=2*Math.PI,c=Math.PI/2,f=3*Math.PI/2,g=[0,1,8,3,4,2,5,6,9,7];e.Behaviors.Sin.Instance=class extends e.SDKBehaviorInstanceBase{constructor(h,m){super(h);this._mag=this._period=this._wave=this._movement=this._i=0;this._isEnabled=!0;this._ratio=this._lastKnownValue2=this._lastKnownValue=this._initialValue2=this._initialValue=this._magnitudeRandom=this._periodOffsetRandom=this._periodRandom=this._baseMag=this._basePeriodOffset=this._basePeriod=0;m&&(this._movement=g[m[0]],this._wave=
m[1],this._periodRandom=this._runtime.Random()*m[3],this._basePeriod=m[2],this._period=m[2],this._period+=this._periodRandom,this._basePeriodOffset=m[4],0!==this._period&&(this._periodOffsetRandom=this._runtime.Random()*m[5],this._i=m[4]/this._period*d,this._i+=this._periodOffsetRandom/this._period*d),this._magnitudeRandom=this._runtime.Random()*m[7],this._baseMag=m[6],this._mag=m[6],this._mag+=this._magnitudeRandom,this._isEnabled=!!m[8]);5===this._movement&&(this._mag=e.toRadians(this._mag));this.Init();
this._isEnabled&&this._StartTicking()}Release(){super.Release()}SaveToJson(){return{i:this._i,e:this._isEnabled,mv:this._movement,w:this._wave,p:this._period,mag:this._mag,iv:this._initialValue,iv2:this._initialValue2,r:this._ratio,lkv:this._lastKnownValue,lkv2:this._lastKnownValue2}}LoadFromJson(h){this._i=h.i;this._SetEnabled(h.e);this._movement=h.mv;this._wave=h.w;this._period=h.p;this._mag=h.mag;this._initialValue=h.iv;this._initialValue2=h.iv2;this._ratio=h.r;this._lastKnownValue=h.lkv;this._lastKnownValue2=
h.lkv2}Init(){const h=this._inst.GetWorldInfo();switch(this._movement){case 0:this._initialValue=h.GetX();break;case 1:this._initialValue=h.GetY();break;case 2:this._initialValue=h.GetWidth();this._ratio=h.GetHeight()/h.GetWidth();break;case 3:this._initialValue=h.GetWidth();break;case 4:this._initialValue=h.GetHeight();break;case 5:this._initialValue=h.GetAngle();break;case 6:this._initialValue=h.GetOpacity();break;case 7:this._initialValue=0;break;case 8:this._initialValue=h.GetX();this._initialValue2=
h.GetY();break;case 9:this._initialValue=h.GetZElevation()}this._lastKnownValue=this._initialValue;this._lastKnownValue2=this._initialValue2}WaveFunc(h){h%=d;switch(this._wave){case 0:return Math.sin(h);case 1:return h<=c?h/c:h<=f?1-2*(h-c)/Math.PI:(h-f)/c-1;case 2:return 2*h/d-1;case 3:return-2*h/d+1;case 4:return h<Math.PI?-1:1}return 0}Tick(){const h=this._runtime.GetDt(this._inst);this._isEnabled&&0!==h&&(this._i=0===this._period?0:(this._i+h/this._period*d)%d,this._UpdateFromPhase())}_UpdateFromPhase(){const h=
this._inst.GetWorldInfo();switch(this._movement){case 0:h.GetX()!==this._lastKnownValue&&(this._initialValue+=h.GetX()-this._lastKnownValue);h.SetX(this._initialValue+this.WaveFunc(this._i)*this._mag);this._lastKnownValue=h.GetX();break;case 1:h.GetY()!==this._lastKnownValue&&(this._initialValue+=h.GetY()-this._lastKnownValue);h.SetY(this._initialValue+this.WaveFunc(this._i)*this._mag);this._lastKnownValue=h.GetY();break;case 2:h.SetWidth(this._initialValue+this.WaveFunc(this._i)*this._mag);h.SetHeight(h.GetWidth()*
this._ratio);break;case 3:h.SetWidth(this._initialValue+this.WaveFunc(this._i)*this._mag);break;case 4:h.SetHeight(this._initialValue+this.WaveFunc(this._i)*this._mag);break;case 5:h.GetAngle()!==this._lastKnownValue&&(this._initialValue=e.clampAngle(this._initialValue+(h.GetAngle()-this._lastKnownValue)));h.SetAngle(this._initialValue+this.WaveFunc(this._i)*this._mag);this._lastKnownValue=h.GetAngle();break;case 6:h.SetOpacity(this._initialValue+this.WaveFunc(this._i)*this._mag/100);break;case 8:h.GetX()!==
this._lastKnownValue&&(this._initialValue+=h.GetX()-this._lastKnownValue);h.GetY()!==this._lastKnownValue2&&(this._initialValue2+=h.GetY()-this._lastKnownValue2);h.SetX(this._initialValue+Math.cos(h.GetAngle())*this.WaveFunc(this._i)*this._mag);h.SetY(this._initialValue2+Math.sin(h.GetAngle())*this.WaveFunc(this._i)*this._mag);this._lastKnownValue=h.GetX();this._lastKnownValue2=h.GetY();break;case 9:h.SetZElevation(this._initialValue+this.WaveFunc(this._i)*this._mag)}h.SetBboxChanged()}_OnSpriteFrameChanged(h,
m){}_SetEnabled(h){(this._isEnabled=!!h)?this._StartTicking():this._StopTicking()}GetPropertyValueByIndex(h){switch(h){case 0:return this._movement;case 1:return this._wave;case 2:return this._basePeriod;case 6:return this._baseMag;case 8:return this._isEnabled}}SetPropertyValueByIndex(h,m){switch(h){case 0:this._movement=g[m];this.Init();break;case 1:this._wave=m;break;case 2:this._basePeriod=m;this._period=this._basePeriod+this._periodRandom;this._isEnabled||(0!==this._period?(this._i=this._basePeriodOffset/
this._period*d,this._i+=this._periodOffsetRandom/this._period*d):this._i=0);break;case 6:this._baseMag=m;this._mag=this._baseMag+this._magnitudeRandom;5===this._movement&&(this._mag=e.toRadians(this._mag));break;case 8:this._isEnabled=!!m}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.sin.properties.enabled.name",value:this._isEnabled,onedit:h=>this._SetEnabled(h)},{name:"behaviors.sin.properties.period.name",value:this._period,onedit:h=>this._period=
h},{name:"behaviors.sin.properties.magnitude.name",value:this._mag,onedit:h=>this._mag=h},{name:"behaviors.sin.debugger.value",value:this.WaveFunc(this._i)*this._mag}]}]}}}"use strict";
{const e=self.C3;e.Behaviors.Sin.Cnds={IsEnabled(){return this._isEnabled},CompareMovement(d){return this._movement===d},ComparePeriod(d,c){return e.compare(this._period,d,c)},CompareMagnitude(d,c){return 5===this._movement?e.compare(this._mag,d,e.toRadians(c)):e.compare(this._mag,d,c)},CompareWave(d){return this._wave===d}}}"use strict";
{const e=self.C3;e.Behaviors.Sin.Acts={SetEnabled(d){this._SetEnabled(0!==d)},SetPeriod(d){this._period=d},SetMagnitude(d){this._mag=d;5===this._movement&&(this._mag=e.toRadians(this._mag))},SetMovement(d){5===this._movement&&5!==d&&(this._mag=e.toDegrees(this._mag));this._movement=d;this.Init()},SetWave(d){this._wave=d},SetPhase(d){const c=2*Math.PI;this._i=d*c%c;this._UpdateFromPhase()},UpdateInitialState(){this.Init()}}}"use strict";
{const e=self.C3;e.Behaviors.Sin.Exps={CyclePosition(){return this._i/(2*Math.PI)},Period(){return this._period},Magnitude(){return 5===this._movement?e.toDegrees(this._mag):this._mag},Value(){return this.WaveFunc(this._i)*this._mag}}}"use strict";{const e=self.C3;e.Behaviors.Rotate=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.Rotate.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.Rotate.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._acceleration=this._speed=0;this._isEnabled=!0;c&&(this._speed=e.toRadians(c[0]),this._acceleration=e.toRadians(c[1]),this._isEnabled=c[2]);this._isEnabled&&this._StartTicking()}Release(){super.Release()}SaveToJson(){return{s:this._speed,a:this._acceleration,e:this._isEnabled}}LoadFromJson(d){this._speed=d.s;this._acceleration=d.a;this._SetEnabled(d.e)}Tick(){if(this._isEnabled){var d=
this._runtime.GetDt(this._inst);if(0!==d&&(0!==this._acceleration&&(this._speed+=this._acceleration*d),0!==this._speed)){const c=this._inst.GetWorldInfo();c.SetAngle(c.GetAngle()+this._speed*d);c.SetBboxChanged()}}}GetPropertyValueByIndex(d){switch(d){case 0:return e.toDegrees(this._speed);case 1:return e.toDegrees(this._acceleration);case 2:return this._isEnabled}}SetPropertyValueByIndex(d,c){switch(d){case 0:this._speed=e.toRadians(c);break;case 1:this._acceleration=e.toRadians(c);break;case 2:this._SetEnabled(c)}}_SetEnabled(d){(this._isEnabled=
!!d)?this._StartTicking():this._StopTicking()}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.rotate.properties.speed.name",value:e.toDegrees(this._speed),onedit:d=>this._speed=e.toRadians(d)},{name:"behaviors.rotate.properties.acceleration.name",value:e.toDegrees(this._acceleration),onedit:d=>this._acceleration=e.toRadians(d)},{name:"behaviors.rotate.properties.enabled.name",value:this._isEnabled,onedit:d=>this._SetEnabled(d)}]}]}}}"use strict";
self.C3.Behaviors.Rotate.Cnds={IsEnabled(){return this._isEnabled}};"use strict";{const e=self.C3;e.Behaviors.Rotate.Acts={SetSpeed(d){this._speed=e.toRadians(d)},SetAcceleration(d){this._acceleration=e.toRadians(d)},SetEnabled(d){this._SetEnabled(d)}}}"use strict";{const e=self.C3;e.Behaviors.Rotate.Exps={Speed(){return e.toDegrees(this._speed)},Acceleration(){return e.toDegrees(this._acceleration)}}}"use strict";{const e=self.C3;e.Behaviors.Tween=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Behaviors.Tween.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=e.Behaviors.Tween;d.Instance=class extends e.SDKBehaviorInstanceBase{constructor(c,f){super(c);this._allowMultiple=!1;this._enabled=!0;f&&(this._allowMultiple=!1,this._enabled=!!f[0]);this._activeTweens=new Map;this._disabledTweens=[];this._waitingForReleaseTweens=new Map;this._waitingForReleaseTweensJson=this._disabledTweensJson=this._activeTweensJson=this._finishingTween=null;this._finishingTweenName="";this._enabled&&this._StartTicking2();this._afterLoad=g=>this._OnAfterLoad(g);
this.GetRuntime().Dispatcher().addEventListener("afterload",this._afterLoad)}Release(){this.GetRuntime().Dispatcher().removeEventListener("afterload",this._afterLoad);this._afterLoad=null;this._finishingTween&&(this.ReleaseAndCompleteTween(this._finishingTween),this._finishingTween=null);this.ReleaseAndCompleteTweens();this._tweens=null;this.ClearDisabledList();this._disabledTweens=null;this._ReleaseWaitingTweens();this._waitingForReleaseTweens=null;super.Release()}SetEnabled(c){(this._enabled=c)?
this._StartTicking2():this._StopTicking2()}GetEnabled(){return this._enabled}AddToDisabledList(c){this._disabledTweens.push(c)}IsInDisabledList(c){return this._disabledTweens.includes(c)}ClearDisabledList(){e.clearArray(this._disabledTweens)}GetFinishingTween(){return this._finishingTween}IsInstanceValid(){const c=this.GetObjectInstance();return c?!c.IsDestroyed():!1}GetTween(c,f,g=!1){if((f=f?this.PropertyTweens(f,g):this.AllTweens(g))&&f.length)for(const h of f)if(h.HasTags(c))return h}GetTweenIncludingWaitingForRelease(c,
f){return this.GetTween(c,f,!0)}*GetTweens(c,f,g=!1){if((f=f?this.PropertyTweens(f,g):this.AllTweens(g))&&f.length)for(const h of f)h.HasTags(c)&&(yield h)}*GetTweensIncludingWaitingForRelease(c,f){yield*this.GetTweens(c,f,!0)}PropertyTweens(c,f){if(f)return f=this._activeTweens.get(c),c=this._waitingForReleaseTweens.get(c),f||(f=[]),c||(c=[]),f.concat(c).filter(g=>g);(c=this._activeTweens.get(c))||(c=[]);return c.filter(g=>g)}AllTweens(c){if(c){c=[...this._activeTweens.values()].flat();const f=[...this._waitingForReleaseTweens.values()].flat();
return c.concat(f).filter(g=>g)}return[...this._activeTweens.values()].flat().filter(f=>f)}AllTweensIncludingWaitingForRelease(){return this.AllTweens(!0)}SaveToJson(){return{s:!1,e:!!this._enabled,at:this._SaveActiveTweensToJson(),dt:this._SaveDisabledTweensToJson(),wt:this._SaveWaitingForReleaseTweensToJson(),ft:this._SaveFinishingTweenToJson()}}LoadFromJson(c){c&&(this._activeTweensJson=c.at,this._disabledTweensJson=c.dt,this._waitingForReleaseTweensJson=c.wt,this._finishingTweenName=c.ft,this._allowMultiple=
!1,this._enabled=!!c.e)}_OnAfterLoad(c){c=this.GetRuntime().GetTimelineManager();this._PopulateTweenMap(this._activeTweensJson,this._activeTweens,c);if(this._disabledTweensJson){e.clearArray(this._disabledTweens);for(const f of this._disabledTweensJson)this._PopulateTweenArray(this._disabledTweens,f,c)}this._PopulateTweenMap(this._waitingForReleaseTweensJson,this._waitingForReleaseTweens,c);this._finishingTween=this._GetTween(this._finishingTweenName,c);this._enabled?this._StartTicking2():this._StopTicking2()}_PopulateTweenMap(c,
f,g){if(c)for(const m in c){let k=f.get(m);k?e.clearArray(k):k=[];var h=c[m];for(const a of h)this._PopulateTweenArray(k,a.name,g)?this._LoadTweenFromJson(a.name,a,g):(h=e.Tween.Build({runtime:this.GetRuntime(),json:a}),h.AddCompletedCallback(b=>this._FinishTriggers(b)),g.AddScheduledTimeline(h),this._PopulateTweenArray(k,h,g));f.set(m,k)}}_GetTween(c,f){return f.GetScheduledOrPlayingTimelineByName(c)}_PopulateTweenArray(c,f,g){if("string"===typeof f){if(f=this._GetTween(f,g))return!!c.push(f)}else return!!c.push(f);
return!1}_LoadTweenFromJson(c,f,g){"string"===typeof c?(c=this._GetTween(c,g))&&c._LoadFromJson(f):c._LoadFromJson(f)}_SaveActiveTweensToJson(){const c={};for(const [f,g]of this._activeTweens)c[f]=g.map(h=>h._SaveToJson());return c}_SaveDisabledTweensToJson(){return this._disabledTweens.map(c=>c.GetName())}_SaveWaitingForReleaseTweensToJson(){const c={};for(const [f,g]of this._waitingForReleaseTweens)c[f]=g.map(h=>h._SaveToJson());return c}_SaveFinishingTweenToJson(){return this._finishingTween?this._finishingTween.GetName():
""}Tick2(){this._ReleaseWaitingTweens()}CreateTween(c){var f=d.Config.GetPropertyTracksConfig(c.property,c.startValue,c.endValue,c.ease,c.resultMode,this.GetObjectInstance());const g=d.Maps.GetPropertyFromIndex(c.property);d.Maps.IsValueId(g)||this.ReleaseTweens(c.property);f=e.Tween.Build({runtime:this.GetRuntime(),id:g,tags:c.tags,time:c.time,instance:this.GetObjectInstance(),releaseOnComplete:!!c.releaseOnComplete,loop:!!c.loop,pingPong:!!c.pingPong,initialValueMode:c.initialValueMode,propertyTracksConfig:f});
f.AddCompletedCallback(h=>this._FinishTriggers(h));this._AddTween(f,c.property);return f}ReleaseTween(c,f=!1){var g=c.GetId();if(this._activeTweens.has(g)&&(g=this._activeTweens.get(g))){const h=g.indexOf(c);-1!==h&&g.splice(h,1)}c.IsReleased()||this._IsInWaitingList(c)||(c.Stop(f),this._AddToWaitingList(c))}ReleaseTweens(c,f=!1){if(e.IsFiniteNumber(c)){var g=d.Maps.GetPropertyFromIndex(c);if(this._activeTweens.has(g)){g=this._activeTweens.get(g);var h=this.GetFinishingTween();for(var m of g)m===
h||m.IsReleased()||this._IsInWaitingList(m)||(m.Stop(f),m.Release());e.clearArray(g)}}else{m=this.GetFinishingTween();for(g of this.AllTweens())g===m||g.IsReleased()||this._IsInWaitingList(g)||(g.Stop(f),g.Release());for(h of this._activeTweens.keys())e.clearArray(this._activeTweens.get(h)),this._activeTweens.delete(h);this._activeTweens.clear()}}ReleaseAndCompleteTween(c){this.ReleaseTween(c,!0)}ReleaseAndCompleteTweens(){this.ReleaseTweens(NaN,!0)}GetPropertyValueByIndex(c){switch(c){case 0:return this._enabled}}SetPropertyValueByIndex(c,
f){switch(c){case 0:this._enabled=!!f}}_GetBehaviorType(c){c=c.GetInstance().GetBehaviorInstances();for(const f of c)if(c=f.GetBehaviorType(),c.GetInstanceSdkCtor()===this.constructor)return c}Trigger(c,f,g,h){return this._runtime?super.Trigger(c):f.Trigger(c,g,h)}_FinishTriggers(c){this._finishingTween=c;d.Cnds.SetFinishingTween(c);let f,g;if(this.GetRuntime())f=this._inst,g=this._runtime,this.Trigger(d.Cnds.OnTweensFinished),this.Trigger(d.Cnds.OnAnyTweensFinished),this.ReleaseTween(c);else{f=c.GetInstance();
if(!f||f&&f.IsDestroyed())return;g=f.GetRuntime();const h=this._GetBehaviorType(c);this.Trigger(d.Cnds.OnTweensFinished,g,f,h);this.Trigger(d.Cnds.OnAnyTweensFinished,g,f,h);c.Stop()}this._finishingTween=null;d.Cnds.SetFinishingTween(null);c.GetDestroyInstanceOnComplete()&&g.DestroyInstance(f)}_AddTween(c,f){f=d.Maps.GetPropertyFromIndex(f);this._activeTweens.has(f)||this._activeTweens.set(f,[]);this._activeTweens.get(f).push(c)}_AddToWaitingList(c){const f=c.GetId();this._waitingForReleaseTweens.has(f)||
this._waitingForReleaseTweens.set(f,[]);this._waitingForReleaseTweens.get(f).push(c)}_IsInWaitingList(c){const f=c.GetId();return this._waitingForReleaseTweens.has(f)?this._waitingForReleaseTweens.get(f).includes(c):!1}_ReleaseWaitingTweens(){if(this._waitingForReleaseTweens.size){for(const c of this._waitingForReleaseTweens.values()){for(const f of c)f.IsReleased()||f.Release();e.clearArray(c)}this._waitingForReleaseTweens.clear()}}}}"use strict";
{const e=self.C3;let d=null;e.Behaviors.Tween.Cnds={SetFinishingTween(c){d=c},OnTweensFinished(c){return d.HasTags(c)},OnAnyTweensFinished(){return!0},IsPlaying(c){return(c=[...this.GetTweensIncludingWaitingForRelease(c)],c.length)?c.some(e.Tween.IsPlaying):!1},IsAnyPlaying(){const c=[...this.AllTweensIncludingWaitingForRelease()];return c&&c.length?c.some(e.Tween.IsPlaying):!1},IsPaused(c){return(c=[...this.GetTweensIncludingWaitingForRelease(c)],c.length)?c.some(e.Tween.IsPaused):!1},IsAnyPaused(){const c=
[...this.AllTweensIncludingWaitingForRelease()];return c&&c.length?c.some(e.Tween.IsPaused):!1}}}"use strict";
{const e=self.C3,d=self.Ease,c=e.Behaviors.Tween;c.Acts={SetEnabled(f){this.SetEnabled(!!f);for(const g of this.AllTweens())f?this.IsInDisabledList(g)&&g.Resume():((g.IsPlaying()||g.IsScheduled())&&this.AddToDisabledList(g),g.Stop());f&&this.ClearDisabledList()},async TweenOneProperty(...f){this.GetEnabled()&&this.IsInstanceValid()&&(f=this.CreateTween(c.TweenArguments.OneProperty(this,...f)),f.Play()&&await f.GetPlayPromise())},async TweenTwoProperties(...f){this.GetEnabled()&&this.IsInstanceValid()&&
(f=this.CreateTween(c.TweenArguments.TwoProperties(this,...f)),f.Play()&&await f.GetPlayPromise())},async TweenValue(...f){this.GetEnabled()&&this.IsInstanceValid()&&(f=this.CreateTween(c.TweenArguments.ValueProperty(this,...f)),f.Play()&&await f.GetPlayPromise())},PauseTweens(f){if(this.GetEnabled()&&this.IsInstanceValid())for(const g of this.GetTweens(f))g.Stop()},PauseAllTweens(){if(this.GetEnabled()&&this.IsInstanceValid())for(const f of this.AllTweens())f.Stop()},ResumeTweens(f){if(this.GetEnabled()&&
this.IsInstanceValid())for(const g of this.GetTweens(f))g.Resume()},ResumeAllTweens(){if(this.GetEnabled()&&this.IsInstanceValid())for(const f of this.AllTweens())f.Resume()},StopTweens(f){if(this.GetEnabled()&&this.IsInstanceValid())for(const g of this.GetTweens(f))this.ReleaseTween(g)},StopAllTweens(){if(this.GetEnabled()&&this.IsInstanceValid())for(const f of this.AllTweens())this.ReleaseTween(f)},SetOnePropertyTweensEndValue(f,g,h){if(this.GetEnabled()&&this.IsInstanceValid())for(const m of this.GetTweens(f))m.BeforeSetEndValues([h]),
m.SetEndValue(g,h)},SetTwoPropertiesTweensEndValue(f,g,h,m){if(this.GetEnabled()&&this.IsInstanceValid()){g=e.Behaviors.Tween.Maps.GetRealProperties(g);for(const k of this.GetTweens(f))k.BeforeSetEndValues(g),k.SetEndValue(h,g[0]),k.SetEndValue(m,g[1])}},SetValuePropertyTweensStartValue(f,g){if(this.GetEnabled()&&this.IsInstanceValid())for(const h of this.GetTweens(f,"value"))h.SetStartValue(g,"value")},SetValuePropertyTweensEndValue(f,g){if(this.GetEnabled()&&this.IsInstanceValid())for(const h of this.GetTweens(f,
"value"))h.BeforeSetEndValues(["value"]),h.SetEndValue(g,"value")},SetTweensEase(f,g){if(this.GetEnabled()&&this.IsInstanceValid()){g=d.GetEaseFromIndex(g);for(const h of this.GetTweens(f))h.SetEase(g)}},SetAllTweensEase(f){if(this.GetEnabled()&&this.IsInstanceValid()){f=d.GetEaseFromIndex(f);for(const g of this.AllTweens())g.SetEase(f)}},SetTweensTime(f,g){if(this.GetEnabled()&&this.IsInstanceValid())for(const h of this.GetTweens(f))h.SetTime(g)},SetAllTweensTime(f){if(this.GetEnabled()&&this.IsInstanceValid())for(const g of this.AllTweens())g.SetTime(f)},
SetTweensPlaybackRate(f,g){if(this.GetEnabled()&&this.IsInstanceValid())for(const h of this.GetTweens(f))h.SetPlaybackRate(g)},SetAllTweensPlaybackRate(f){if(this.GetEnabled()&&this.IsInstanceValid())for(const g of this.AllTweens())g.SetPlaybackRate(f)},SetTweensDestroyOnComplete(f,g){if(this.GetEnabled()&&this.IsInstanceValid())for(const h of this.GetTweens(f))h.SetDestroyInstanceOnComplete(!!g)},SetAllTweensDestroyOnComplete(f){if(this.GetEnabled()&&this.IsInstanceValid())for(const g of this.AllTweens())g.SetDestroyInstanceOnComplete(!!f)}}}"use strict";
self.C3.Behaviors.Tween.Exps={Time(e){return(e=this.GetTweenIncludingWaitingForRelease(e))?e.GetTime():0},Progress(e){return(e=this.GetTweenIncludingWaitingForRelease(e))?e.GetTime()/e.GetTotalTime():0},Value(e){return(e=this.GetTweenIncludingWaitingForRelease(e,"value"))?e.GetPropertyTrack("value").GetSourceAdapterValue():0},Tags(){return this.GetFinishingTween()?this.GetFinishingTween().GetStringTags():""}};"use strict";
{const e=self.C3,d=self.Ease,c=["position","size","scale"],f="offsetX offsetY offsetWidth offsetHeight offsetAngle offsetOpacity offsetColor offsetZElevation offsetScaleX offsetScaleY".split(" "),g=["value"],h=[].concat(c).concat(f).concat(g),m={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},k=Object.assign({},h.reduce((a,b)=>Object.assign({},a,{[b]:[b]}),{}),m);e.Behaviors.Tween.Maps=class{constructor(){}static GetEases(){return[...d.GetRuntimeEaseNames()]}static GetEaseFromIndex(a){return[...d.GetRuntimeEaseNames()][a]}static GetPropertyFromIndex(a){return h[a]}static GetPropertyIndexFromName(a){return h.indexOf(a)}static GetPairPropertyFromIndex(a){return c[a]}static GetSinglePropertyFromIndex(a){return f[a]}static GetValuePropertyFromIndex(a){return g[a]}static GetPairProperties(a){return m[a]}static GetRealProperties(a){return e.IsString(a)?
k[a]:k[h[a]]}static IsPairId(a){return!!m[a]}static IsColorId(a){return"offsetColor"===a}static IsAngleId(a){return"offsetAngle"===a}static IsOpacityId(a){return"offsetOpacity"===a}static IsValueId(a){return"value"===a}}}"use strict";
{const e=self.C3,d=e.Behaviors.Tween,c=new Map;d.Config=class{constructor(){}static GetPropertyTracksConfig(f,g,h,m,k,a){0===c.size&&this._CreateConfigObjects();var b=d.PropertyTypes.Pick(f);b=c.get(b);e.IsFiniteNumber(f)&&(f=d.Maps.GetPropertyFromIndex(f));return this._GetConfig(b,f,g,h,m,k,a)}static TransformValue(f,g){return e.Behaviors.Tween.GetPropertyTracksConfig(f).valueGetter(g)}static _CreateConfigObjects(){const f=d.PropertyTypes,g=d.ValueGetters;this._AddConfigObject(f.PAIR,this._GetPairConfig,
g._GetPropertyValue);this._AddConfigObject(f.COLOR,this._GetColorConfig,g._GetColorPropertyValue);this._AddConfigObject(f.ANGLE,this._GetAngleConfig,g._GetPropertyAngleValue);this._AddConfigObject(f.VALUE,this._GetValueConfig,g._GetPropertyValue);this._AddConfigObject(f.OTHER,this._GetCommonConfig,g._GetPropertyValue)}static _AddConfigObject(f,g,h){c.set(f,this._CreateConfigObject(f,g,h))}static _CreateConfigObject(f,g,h){return{name:f,configFunc:g,valueGetter:h}}static _GetConfig(f,g,h,m,k,a,b){return f.configFunc(g,
f.valueGetter(h),f.valueGetter(m),k,a,b)}static _GetPairConfig(f,g,h,m,k,a){return d.Maps.GetPairProperties(f).map((b,l)=>({sourceId:"world-instance",property:b,type:"float",valueType:"numeric",startValue:g[l],endValue:h[l],ease:d.Maps.GetEaseFromIndex(m),resultMode:k}))}static _GetColorConfig(f,g,h,m,k,a){return e.Plugins.Text&&a.GetPlugin()instanceof e.Plugins.Text?{sourceId:"plugin",sourceArgs:[7],property:"color",type:"color",valueType:"color",startValue:g,endValue:h,ease:d.Maps.GetEaseFromIndex(m),
resultMode:k}:{sourceId:"world-instance",property:f,type:"color",valueType:"color",startValue:g,endValue:h,ease:d.Maps.GetEaseFromIndex(m),resultMode:k}}static _GetAngleConfig(f,g,h,m,k,a){return{sourceId:"world-instance",property:f,type:"angle",valueType:"angle",startValue:g,endValue:h,ease:d.Maps.GetEaseFromIndex(m),resultMode:k}}static _GetCommonConfig(f,g,h,m,k,a){return{sourceId:"world-instance",property:f,type:"float",valueType:"numeric",startValue:g,endValue:h,ease:d.Maps.GetEaseFromIndex(m),
resultMode:k}}static _GetValueConfig(f,g,h,m,k,a){return{sourceId:"value",property:f,type:"float",valueType:"numeric",startValue:g,endValue:h,ease:d.Maps.GetEaseFromIndex(m),resultMode:k}}}}"use strict";
{const e=self.C3,d=e.Behaviors.Tween,c=Object.assign({},{resultMode:"absolute"},{tags:"",property:"",time:0,ease:0,releaseOnComplete:0,loop:!1,pingPong:!1}),f=Object.assign({},c,{initialValueMode:"current-state",startValue:0,endValue:0}),g=Object.assign({},c,{initialValueMode:"current-state",startValue:[0,0],endValue:[0,0]}),h=Object.assign({},c,{initialValueMode:"current-state",startValue:[0,0,0],endValue:[0,0,0]}),m=Object.assign({},f,{initialValueMode:"start-value"});d.TweenArguments=class{constructor(){}static _SetCommonProperties(k,
a,b,l,p,r,t){k.tags=a;k.time=b;k.ease=l;k.releaseOnComplete=p;k.loop=r;k.pingPong=t}static OneProperty(k,a,b,l,p,r,t,u,w){k=d.Maps.GetSinglePropertyFromIndex(b);b=d.Maps.IsColorId(k)?h:f;this._SetCommonProperties(b,a,p,r,t,u,w);d.Maps.IsColorId(k)?(h.endValue[0]=e.GetRValue(l),h.endValue[1]=e.GetGValue(l),h.endValue[2]=e.GetBValue(l),h.property=d.Maps.GetPropertyIndexFromName(k)):d.Maps.IsOpacityId(k)?f.endValue=l/100:f.endValue=l;b.property=d.Maps.GetPropertyIndexFromName(k);return b}static TwoProperties(k,
a,b,l,p,r,t,u,w,x){this._SetCommonProperties(g,a,r,t,u,w,x);k=d.Maps.GetPairPropertyFromIndex(b);g.endValue[0]=l;g.endValue[1]=p;g.property=d.Maps.GetPropertyIndexFromName(k);return g}static ValueProperty(k,a,b,l,p,r,t,u,w){this._SetCommonProperties(m,a,p,r,t,u,w);m.startValue=b;m.endValue=l;m.property=d.Maps.GetPropertyIndexFromName("value");return m}}}"use strict";
{const e=self.C3,d=e.Behaviors.Tween,c=[];d.PropertyTypes=class{constructor(){}static Pick(f){0===c.length&&(c.push({checkFunc:d.Maps.IsPairId,result:this.PAIR}),c.push({checkFunc:d.Maps.IsColorId,result:this.COLOR}),c.push({checkFunc:d.Maps.IsAngleId,result:this.ANGLE}),c.push({checkFunc:d.Maps.IsValueId,result:this.VALUE}),c.push({checkFunc:()=>!0,result:this.OTHER}));e.IsFiniteNumber(f)&&(f=e.Behaviors.Tween.Maps.GetPropertyFromIndex(f));for(const g of c)if(g.checkFunc(f))return g.result}static get PAIR(){return"pair"}static get COLOR(){return"color"}static get ANGLE(){return"angle"}static get VALUE(){return"value"}static get OTHER(){return"other"}}}"use strict";
{const e=self.C3;e.Behaviors.Tween.ValueGetters=class{constructor(){}static _GetPropertyAngleValue(d){d=e.toRadians(parseFloat(d));return e.clampAngle(d)}static _GetColorPropertyValue(d){return d.slice(0)}static _GetPropertyValue(d){return d}}}"use strict";{const e=self.C3;e.Behaviors.Timer=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.Timer.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.Timer.SingleTimer=class{constructor(d,c,f,g){this._current=e.New(e.KahanSum);this._current.Set(d||0);this._total=e.New(e.KahanSum);this._total.Set(c||0);this._duration=f||0;this._isRegular=!!g;this._isPaused=!1}GetCurrentTime(){return this._current.Get()}GetTotalTime(){return this._total.Get()}GetDuration(){return this._duration}SetPaused(d){this._isPaused=!!d}IsPaused(){return this._isPaused}Add(d){this._current.Add(d);this._total.Add(d)}HasFinished(){return this._current.Get()>=
this._duration}Update(){if(this.HasFinished())if(this._isRegular)this._current.Subtract(this._duration);else return!0;return!1}SaveToJson(){return{c:this._current.Get(),t:this._total.Get(),d:this._duration,r:this._isRegular,p:this._isPaused}}LoadFromJson(d){this._current.Set(d.c);this._total.Set(d.t);this._duration=d.d;this._isRegular=!!d.r;this._isPaused=!!d.p}};e.Behaviors.Timer.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._timers=new Map}Release(){this._timers.clear();
super.Release()}_UpdateTickState(){0<this._timers.size?(this._StartTicking(),this._StartTicking2()):(this._StopTicking(),this._StopTicking2())}SaveToJson(){const d={};for(const [c,f]of this._timers.entries())d[c]=f.SaveToJson();return d}LoadFromJson(d){this._timers.clear();for(const [c,f]of Object.entries(d))d=new e.Behaviors.Timer.SingleTimer,d.LoadFromJson(f),this._timers.set(c,d);this._UpdateTickState()}Tick(){const d=this._runtime.GetDt(this._inst);for(const c of this._timers.values())c.IsPaused()||
c.Add(d)}Tick2(){for(const [d,c]of this._timers.entries())c.Update()&&this._timers.delete(d)}GetDebuggerProperties(){return[{title:"behaviors.timer.debugger.timers",properties:[...this._timers.entries()].map(d=>({name:"$"+d[0],value:`${Math.round(10*d[1].GetCurrentTime())/10} / ${Math.round(10*d[1].GetDuration())/10}`}))}]}}}"use strict";
self.C3.Behaviors.Timer.Cnds={OnTimer(e){return(e=this._timers.get(e.toLowerCase()))?e.HasFinished():!1},IsTimerRunning(e){return this._timers.has(e.toLowerCase())},IsTimerPaused(e){return(e=this._timers.get(e.toLowerCase()))&&e.IsPaused()}};"use strict";
{const e=self.C3;e.Behaviors.Timer.Acts={StartTimer(d,c,f){d=new e.Behaviors.Timer.SingleTimer(0,0,d,1===c);this._timers.set(f.toLowerCase(),d);this._UpdateTickState()},StopTimer(d){this._timers.delete(d.toLowerCase());this._UpdateTickState()},PauseResumeTimer(d,c){(d=this._timers.get(d.toLowerCase()))&&d.SetPaused(0===c)}}}"use strict";
self.C3.Behaviors.Timer.Exps={CurrentTime(e){return(e=this._timers.get(e.toLowerCase()))?e.GetCurrentTime():0},TotalTime(e){return(e=this._timers.get(e.toLowerCase()))?e.GetTotalTime():0},Duration(e){return(e=this._timers.get(e.toLowerCase()))?e.GetDuration():0}};"use strict";{const e=self.C3;e.Behaviors.Flash=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.Flash.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.Flash.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._timeLeft=this._stageTimeLeft=this._stage=this._offTime=this._onTime=0;this._StartTicking()}Release(){super.Release()}SaveToJson(){return{on:this._onTime,off:this._offTime,s:this._stage,stl:this._stageTimeLeft,tl:this._timeLeft}}LoadFromJson(d){this._onTime=d.on;this._offTime=d.off;this._stage=d.s;this._stageTimeLeft=d.stl;this._timeLeft=null===d.tl?Infinity:d.tl}Tick(){if(!(0>=this._timeLeft)){var d=
this._runtime.GetDt(this._inst);this._timeLeft-=d;if(0>=this._timeLeft)return this._timeLeft=0,this._inst.GetWorldInfo().SetVisible(!0),this._runtime.UpdateRender(),this.DebugTrigger(e.Behaviors.Flash.Cnds.OnFlashEnded);this._stageTimeLeft-=d;0>=this._stageTimeLeft&&(0===this._stage?(this._inst.GetWorldInfo().SetVisible(!1),this._stage=1,this._stageTimeLeft+=this._offTime):(this._inst.GetWorldInfo().SetVisible(!0),this._stage=0,this._stageTimeLeft+=this._onTime),this._runtime.UpdateRender())}}GetDebuggerProperties(){return[{title:"$"+
this.GetBehaviorType().GetName(),properties:[{name:"behaviors.flash.debugger.on-time",value:this._onTime,onedit:d=>this._onTime=d},{name:"behaviors.flash.debugger.off-time",value:this._offTime,onedit:d=>this._offTime=d},{name:"behaviors.flash.debugger.is-flashing",value:0<this._timeLeft},{name:"behaviors.flash.debugger.time-left",value:this._timeLeft}]}]}}}"use strict";self.C3.Behaviors.Flash.Cnds={IsFlashing(){return 0<this._timeLeft},OnFlashEnded(){return!0}};"use strict";
self.C3.Behaviors.Flash.Acts={Flash(e,d,c){this._onTime=e;this._offTime=d;this._stage=1;this._stageTimeLeft=d;this._timeLeft=c;this._inst.GetWorldInfo().SetVisible(!1);this._runtime.UpdateRender()},StopFlashing(){this._timeLeft=0;this._inst.GetWorldInfo().SetVisible(!0);this._runtime.UpdateRender()}};"use strict";self.C3.Behaviors.Flash.Exps={};"use strict";{const e=self.C3;e.Behaviors.Fade=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Behaviors.Fade.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.Fade.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._fadeOutTime=this._waitTime=this._fadeInTime=0;this._activeAtStart=this._destroy=!0;this._setMaxOpacity=!1;this._stage=0;this._stageTime=e.New(e.KahanSum);this._maxOpacity=this._inst.GetWorldInfo().GetOpacity()||1;c&&(this._fadeInTime=c[0],this._waitTime=c[1],this._fadeOutTime=c[2],this._destroy=!!c[3],this._stage=(this._activeAtStart=!!c[4])?0:3);this._activeAtStart&&(0===this._fadeInTime?
(this._stage=1,0===this._waitTime&&(this._stage=2)):(this._inst.GetWorldInfo().SetOpacity(0),this._runtime.UpdateRender()));this._StartTicking()}Release(){super.Release()}SaveToJson(){return{fit:this._fadeInTime,wt:this._waitTime,fot:this._fadeOutTime,d:this._destroy,s:this._stage,st:this._stageTime.Get(),mo:this._maxOpacity}}LoadFromJson(d){this._fadeInTime=d.fit;this._waitTime=d.wt;this._fadeOutTime=d.fot;this._destroy=d.d;this._stage=d.s;this._stageTime.Set(d.st);this._maxOpacity=d.mo}Tick(){var d=
this._runtime.GetDt(this._inst);this._stageTime.Add(d);d=this._inst.GetWorldInfo();0===this._stage&&(d.SetOpacity(this._stageTime.Get()/this._fadeInTime*this._maxOpacity),this._runtime.UpdateRender(),d.GetOpacity()>=this._maxOpacity&&(d.SetOpacity(this._maxOpacity),this._stage=1,this._stageTime.Reset(),this.Trigger(e.Behaviors.Fade.Cnds.OnFadeInEnd)));1===this._stage&&this._stageTime.Get()>=this._waitTime&&(this._stage=2,this._stageTime.Reset(),this.Trigger(e.Behaviors.Fade.Cnds.OnWaitEnd));2===this._stage&&
0!==this._fadeOutTime&&(d.SetOpacity(this._maxOpacity-this._stageTime.Get()/this._fadeOutTime*this._maxOpacity),this._runtime.UpdateRender(),0>=d.GetOpacity()&&(this._stage=3,this._stageTime.Reset(),this.Trigger(e.Behaviors.Fade.Cnds.OnFadeOutEnd),this._destroy&&this._runtime.DestroyInstance(this._inst)))}Start(){this._stage=0;this._stageTime.Reset();0===this._fadeInTime?(this._stage=1,0===this._waitTime&&(this._stage=2)):(this._inst.GetWorldInfo().SetOpacity(0),this._runtime.UpdateRender())}GetPropertyValueByIndex(d){switch(d){case 0:return this._fadeInTime;
case 1:return this._waitTime;case 2:return this._fadeOutTime;case 3:return this._destroy}}SetPropertyValueByIndex(d,c){switch(d){case 0:this._fadeInTime=c;break;case 1:this._waitTime=c;break;case 2:this._fadeOutTime=c;break;case 3:this._destroy=!!c}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.fade.properties.fade-in-time.name",value:this._fadeInTime,onedit:d=>this._fadeInTime=d},{name:"behaviors.fade.properties.wait-time.name",value:this._waitTime,
onedit:d=>this._waitTime=d},{name:"behaviors.fade.properties.fade-out-time.name",value:this._fadeOutTime,onedit:d=>this._fadeOutTime=d},{name:"behaviors.fade.debugger.stage",value:["behaviors.fade.debugger."+["fade-in","wait","fade-out","done"][this._stage]]}]}]}}}"use strict";self.C3.Behaviors.Fade.Cnds={OnFadeOutEnd(){return!0},OnFadeInEnd(){return!0},OnWaitEnd(){return!0}};"use strict";
self.C3.Behaviors.Fade.Acts={StartFade(){this._activeAtStart||this._setMaxOpacity||(this._maxOpacity=this._inst.GetWorldInfo().GetOpacity()||1,this._setMaxOpacity=!0);3===this._stage&&this.Start()},RestartFade(){this.Start()},SetFadeInTime(e){0>e&&(e=0);this._fadeInTime=e},SetWaitTime(e){0>e&&(e=0);this._waitTime=e},SetFadeOutTime(e){0>e&&(e=0);this._fadeOutTime=e}};"use strict";self.C3.Behaviors.Fade.Exps={FadeInTime(){return this._fadeInTime},WaitTime(){return this._waitTime},FadeOutTime(){return this._fadeOutTime}};
"use strict";{const e=self.C3;e.Behaviors.jumpthru=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.jumpthru.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.jumpthru.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this.SetEnabled(!0);c&&this.SetEnabled(c[0])}Release(){super.Release()}SetEnabled(d){this._inst._SetJumpthruEnabled(!!d)}IsEnabled(){return this._inst._IsJumpthruEnabled()}SaveToJson(){return{e:this.IsEnabled()}}LoadFromJson(d){this.SetEnabled(d.e)}GetPropertyValueByIndex(d){switch(d){case 0:return this.IsEnabled()}}SetPropertyValueByIndex(d,c){switch(d){case 0:this.SetEnabled(c)}}GetDebuggerProperties(){return[{title:"$"+
this.GetBehaviorType().GetName(),properties:[{name:"behaviors.jumpthru.properties.enabled.name",value:this.IsEnabled(),onedit:d=>this.SetEnabled(d)}]}]}}}"use strict";self.C3.Behaviors.jumpthru.Cnds={IsEnabled(){return this.IsEnabled()}};"use strict";self.C3.Behaviors.jumpthru.Acts={SetEnabled(e){this.SetEnabled(e)}};"use strict";self.C3.Behaviors.jumpthru.Exps={};"use strict";
{const e=self.C3;e.Behaviors.DragnDrop=class extends e.SDKBehaviorBase{constructor(d){super(d);d=this._runtime.Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(d,"pointerdown",c=>this._OnPointerDown(c.data)),e.Disposable.From(d,"pointermove",c=>this._OnPointerMove(c.data)),e.Disposable.From(d,"pointerup",c=>this._OnPointerUp(c.data,!1)),e.Disposable.From(d,"pointercancel",c=>this._OnPointerUp(c.data,!0)))}Release(){this._disposables.Release();this._disposables=null;super.Release()}_OnPointerDown(d){this._OnInputDown(d.pointerId.toString(),
d.pageX-this._runtime.GetCanvasClientX(),d.pageY-this._runtime.GetCanvasClientY())}_OnPointerMove(d){this._OnInputMove(d.pointerId.toString(),d.pageX-this._runtime.GetCanvasClientX(),d.pageY-this._runtime.GetCanvasClientY())}_OnPointerUp(d,c){this._OnInputUp(d.pointerId.toString())}async _OnInputDown(d,c,f){var g=this.GetInstances();let h=null,m=null,k=0,a=0;for(const b of g){g=b.GetBehaviorSdkInstanceFromCtor(e.Behaviors.DragnDrop);if(!g.IsEnabled()||g.IsDragging())continue;const l=b.GetWorldInfo(),
p=l.GetLayer(),[r,t]=p.CanvasCssToLayer(c,f,l.GetTotalZElevation());if(!l.ContainsPoint(r,t))continue;if(!h){h=b;m=g;k=r;a=t;continue}const u=h.GetWorldInfo();if(p.GetIndex()>u.GetLayer().GetIndex()||p.GetIndex()===u.GetLayer().GetIndex()&&l.GetZIndex()>u.GetZIndex())h=b,m=g,k=r,a=t}h&&await m._OnDown(d,k,a)}_OnInputMove(d,c,f){var g=this.GetInstances();for(const h of g){g=h.GetBehaviorSdkInstanceFromCtor(e.Behaviors.DragnDrop);if(!g.IsEnabled()||!g.IsDragging()||g.IsDragging()&&g.GetDragSource()!==
d)continue;const m=h.GetWorldInfo(),k=m.GetLayer(),[a,b]=k.CanvasCssToLayer(c,f,m.GetTotalZElevation());g._OnMove(a,b)}}async _OnInputUp(d){var c=this.GetInstances();for(const f of c)c=f.GetBehaviorSdkInstanceFromCtor(e.Behaviors.DragnDrop),c.IsDragging()&&c.GetDragSource()===d&&await c._OnUp()}}}"use strict";{const e=self.C3;e.Behaviors.DragnDrop.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.DragnDrop.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._isDragging=!1;this._dy=this._dx=0;this._dragSource="<none>";this._axes=0;this._isEnabled=!0;c&&(this._axes=c[0],this._isEnabled=c[1])}Release(){super.Release()}SaveToJson(){return{a:this._axes,e:this._isEnabled}}LoadFromJson(d){this._axes=d.a;this._isEnabled=d.e;this._isDragging=!1}IsEnabled(){return this._isEnabled}IsDragging(){return this._isDragging}GetDragSource(){return this._dragSource}async _OnDown(d,
c,f){const g=this.GetWorldInfo();this._dx=c-g.GetX();this._dy=f-g.GetY();this._isDragging=!0;this._dragSource=d;await this.TriggerAsync(e.Behaviors.DragnDrop.Cnds.OnDragStart)}_OnMove(d,c){const f=this.GetWorldInfo();d-=this._dx;c-=this._dy;if(0===this._axes){if(f.GetX()!==d||f.GetY()!==c)f.SetXY(d,c),f.SetBboxChanged()}else 1===this._axes?f.GetX()!==d&&(f.SetX(d),f.SetBboxChanged()):2===this._axes&&f.GetY()!==c&&(f.SetY(c),f.SetBboxChanged())}async _OnUp(){this._isDragging=!1;await this.TriggerAsync(e.Behaviors.DragnDrop.Cnds.OnDrop)}GetPropertyValueByIndex(d){switch(d){case 0:return this._axes;
case 1:return this._isEnabled}}SetPropertyValueByIndex(d,c){switch(d){case 0:this._axes=c;break;case 1:this._isEnabled=!!c}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.dragndrop.debugger.is-dragging",value:this._isDragging},{name:"behaviors.dragndrop.properties.enabled.name",value:this._isEnabled,onedit:d=>this._isEnabled=d}]}]}}}"use strict";
self.C3.Behaviors.DragnDrop.Cnds={IsDragging(){return this._isDragging},OnDragStart(){return!0},OnDrop(){return!0},IsEnabled(){return this._isEnabled}};"use strict";self.C3.Behaviors.DragnDrop.Acts={SetEnabled(e){this._isEnabled=!!e;this._isEnabled||(this._isDragging=!1)},SetAxes(e){this._axes=e},Drop(){this._isDragging&&this._OnUp()}};"use strict";self.C3.Behaviors.DragnDrop.Exps={};"use strict";{const e=self.C3;e.Behaviors.bound=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Behaviors.bound.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.bound.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._mode=0;c&&(this._mode=c[0]);this._StartTicking2()}Release(){super.Release()}SaveToJson(){return{m:this._mode}}LoadFromJson(d){this._mode=d.m}Tick2(){const d=this._inst.GetWorldInfo(),c=d.GetBoundingBox(),f=d.GetLayout();let g=!1;0===this._mode?(0>d.GetX()&&(d.SetX(0),g=!0),0>d.GetY()&&(d.SetY(0),g=!0),d.GetX()>f.GetWidth()&&(d.SetX(f.GetWidth()),g=!0),d.GetY()>f.GetHeight()&&(d.SetY(f.GetHeight()),
g=!0)):(0>c.getLeft()&&(d.OffsetX(-c.getLeft()),g=!0),0>c.getTop()&&(d.OffsetY(-c.getTop()),g=!0),c.getRight()>f.GetWidth()&&(d.OffsetX(-(c.getRight()-f.GetWidth())),g=!0),c.getBottom()>f.GetHeight()&&(d.OffsetY(-(c.getBottom()-f.GetHeight())),g=!0));g&&d.SetBboxChanged()}GetPropertyValueByIndex(d){switch(d){case 0:return this._mode}}SetPropertyValueByIndex(d,c){switch(d){case 0:this._mode=c}}}}"use strict";self.C3.Behaviors.bound.Cnds={};"use strict";self.C3.Behaviors.bound.Acts={};"use strict";
self.C3.Behaviors.bound.Exps={};"use strict";{const e=self.C3;e.Behaviors.Orbit=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.Orbit.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.Orbit.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._acceleration=this._speed=0;this._isEnabled=!0;this._offsetAngle=this._majorAxis=this._minorAxis=0;this._matchRotation=!1;this._targetY=this._targetX=0;this._targetObject=null;this._targetUid=-1;this._totalAbsoluteRotation=this._totalRotation=this._rotation=0;c&&(this._speed=e.toRadians(c[0]),this._acceleration=e.toRadians(c[1]),this._isEnabled=c[6],this._minorAxis=c[2],this._majorAxis=
c[3],this._offsetAngle=e.toRadians(c[4]),this._matchRotation=c[5]);d=this._runtime.Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(d,"instancedestroy",f=>this._OnInstanceDestroyed(f.instance)),e.Disposable.From(d,"afterload",f=>this._OnAfterLoad()));this._SetEnabled(this._isEnabled);d=this._inst.GetWorldInfo();this._targetX=d.GetX();this._targetY=d.GetY();this._rotation=d.GetAngle()}Release(){this._targetObject=null;super.Release()}SaveToJson(){return{s:this._speed,a:this._acceleration,
r:this._rotation,e:this._isEnabled,a1:this._majorAxis,a2:this._minorAxis,oa:this._offsetAngle,mr:this._matchRotation,tx:this._targetX,ty:this._targetY,tuid:this._targetObject?this._targetObject.GetUID():-1}}LoadFromJson(d){this._speed=d.s;this._acceleration=d.a;this._rotation=d.r;this._majorAxis=d.a1;this._minorAxis=d.a2;this._offsetAngle=d.oa;this._matchRotation=d.mr;this._targetX=d.tx;this._targetY=d.ty;this._targetUid=d.tuid;this._SetEnabled(d.e)}_OnAfterLoad(){-1===this._targetUid?this._targetObject=
null:(this._targetObject=this._runtime.GetInstanceByUID(this._targetUid),this._targetUid=-1)}_OnInstanceDestroyed(d){this._targetObject===d&&(this._targetObject=null)}_Initialise(){if(this._shouldInitialise){var d=this._inst.GetWorldInfo();this._targetX=d.GetX();this._targetY=d.GetY();this._rotation=d.GetAngle();this._shouldInitialise=!1}}_UpdateTarget(){if(this._targetObject){var d=this._targetObject.GetWorldInfo();this._targetX=d.GetX();this._targetY=d.GetY()}}_ShouldTickLate(){return!!this._targetObject}Tick(){this._TickInternal()}Tick2(){this._TickInternal()}_TickInternal(){if(this._isEnabled){var d=
this._runtime.GetDt(this._inst);if(0!==d){0!==this._acceleration&&(this._speed+=this._acceleration*d);var c=this._inst.GetWorldInfo();d*=this._speed;this._rotation=e.clampAngle(this._rotation+d);this._totalRotation+=d;this._totalAbsoluteRotation+=Math.abs(d);d=this._minorAxis*Math.cos(this._rotation);var f=this._majorAxis*Math.sin(this._rotation),g=Math.cos(this._offsetAngle),h=Math.sin(this._offsetAngle);this._UpdateTarget();c.SetXY(this._targetX+(d*g-f*h),this._targetY+(d*h+f*g));this._matchRotation&&
c.SetAngle(this._rotation+this._offsetAngle+.5*Math.PI);c.SetBboxChanged()}}}GetPropertyValueByIndex(d){switch(d){case 0:return e.toDegrees(this._speed);case 1:return e.toDegrees(this._acceleration);case 6:return this._isEnabled;case 2:return this._minorAxis;case 3:return this._majorAxis;case 4:return this._offsetAngle;case 5:return this._matchRotation}}SetPropertyValueByIndex(d,c){switch(d){case 0:this._speed=e.toRadians(c);break;case 1:this._acceleration=e.toRadians(c);break;case 6:this._SetEnabled(c);
break;case 2:this._minorAxis=c;break;case 3:this._majorAxis=c;break;case 4:this._offsetAngle=c;break;case 5:this._matchRotation=c}}_SetEnabled(d){this._isEnabled=!!d;this._ShouldTickLate()?this._isEnabled?this._StartTicking2():this._StopTicking2():this._isEnabled?this._StartTicking():this._StopTicking()}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.orbit.debugger.rotation",value:e.toDegrees(this._rotation)},{name:"behaviors.orbit.debugger.total-rotation",
value:e.toDegrees(this._totalRotation)},{name:"behaviors.orbit.debugger.total-absolute-rotation",value:e.toDegrees(this._totalAbsoluteRotation)},{name:"behaviors.orbit.properties.speed.name",value:e.toDegrees(this._speed),onedit:d=>this._speed=e.toRadians(d)},{name:"behaviors.orbit.properties.acceleration.name",value:e.toDegrees(this._acceleration),onedit:d=>this._acceleration=e.toRadians(d)},{name:"behaviors.orbit.properties.primary-axis.name",value:this._majorAxis,onedit:d=>this._majorAxis=d},{name:"behaviors.orbit.properties.secondary-axis.name",
value:this._minorAxis,onedit:d=>this._minorAxis=d},{name:"behaviors.orbit.properties.offset-angle.name",value:e.toDegrees(this._offsetAngle),onedit:d=>this._offsetAngle=e.toRadians(d)},{name:"behaviors.orbit.properties.match-rotation.name",value:this._matchRotation,onedit:d=>this._matchRotation=!!d},{name:"behaviors.orbit.properties.enabled.name",value:this._isEnabled,onedit:d=>this._SetEnabled(d)}]}]}}}"use strict";self.C3.Behaviors.Orbit.Cnds={IsEnabled(){return this._isEnabled}};"use strict";
{const e=self.C3;e.Behaviors.Orbit.Acts={SetSpeed(d){this._speed=e.toRadians(d)},SetTarget(d,c){this._targetObject=null;this._targetX=d;this._targetY=c},SetRotation(d){this._rotation=e.toRadians(d)},SetOffsetAngle(d){this._offsetAngle=e.toRadians(d)},SetRadius(d,c){this._minorAxis=d;this._majorAxis=c},SetMatchRotation(d){this._matchRotation=!!d},Pin(d){if(d&&(d=d.GetFirstPicked(this._inst))&&d.GetWorldInfo()){var c=this._isEnabled;c&&this._SetEnabled(!1);this._targetObject=d;c&&this._SetEnabled(!0)}},
Unpin(){const d=this._isEnabled;d&&this._SetEnabled(!1);this._targetObject=null;d&&this._SetEnabled(!0)},SetAcceleration(d){this._acceleration=e.toRadians(d)},SetEnabled(d){this._SetEnabled(d)},ResetTotalRotation(){this._totalAbsoluteRotation=this._totalRotation=0}}}"use strict";
{const e=self.C3;e.Behaviors.Orbit.Exps={Speed(){return e.toDegrees(this._speed)},Acceleration(){return e.toDegrees(this._acceleration)},PrimaryRadius(){return this._majorAxis},SecondaryRadius(){return this._minorAxis},OffsetAngle(){return e.toDegrees(this._offsetAngle)},Rotation(){return e.toDegrees(this._rotation)},TotalRotation(){return e.toDegrees(this._totalRotation)},TotalAbsoluteRotation(){return e.toDegrees(this._totalAbsoluteRotation)},TargetX(){return this._targetX},TargetY(){return this._targetY},
DistanceToTarget(){return Math.sqrt((this._minorAxis*Math.cos(this._rotation))**2+(this._majorAxis*Math.sin(this._rotation))**2)}}}"use strict";
{const e=self.C3;e.Behaviors.scrollto=class extends e.SDKBehaviorBase{constructor(d){super(d);this._shakeMode=this._shakeEnd=this._shakeStart=this._shakeMag=0}Release(){super.Release()}SetShakeMagnitude(d){this._shakeMag=d}GetShakeMagnitude(){return this._shakeMag}SetShakeStart(d){this._shakeStart=d}GetShakeStart(){return this._shakeStart}SetShakeEnd(d){this._shakeEnd=d}GetShakeEnd(){return this._shakeEnd}SetShakeMode(d){this._shakeMode=d}GetShakeMode(){return this._shakeMode}}}"use strict";
{const e=self.C3;e.Behaviors.scrollto.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3;e.Behaviors.scrollto.Instance=class extends e.SDKBehaviorInstanceBase{constructor(d,c){super(d);this._isEnabled=!0;c&&(this._isEnabled=c[0]);this._isEnabled&&this._StartTicking2()}Release(){super.Release()}SaveToJson(){const d=this.GetBehavior();return{e:this._isEnabled,smg:d.GetShakeMagnitude(),ss:d.GetShakeStart(),se:d.GetShakeEnd(),smd:d.GetShakeMode()}}LoadFromJson(d){const c=this.GetBehavior();c.SetShakeMagnitude(d.smg);c.SetShakeStart(d.ss);c.SetShakeEnd(d.se);c.SetShakeMode(d.smd);
(this._isEnabled=d.e)?this._StartTicking2():this._StopTicking2()}IsEnabled(){return this._isEnabled}Tick2(){if(this.IsEnabled()){this._runtime.GetDt(this._inst);var d=this.GetBehavior(),c=d.GetInstances(),f=0,g=0,h=0;for(var m of c)(c=m.GetBehaviorInstanceFromCtor(e.Behaviors.scrollto))&&c.GetSdkInstance().IsEnabled()&&(c=m.GetWorldInfo(),f+=c.GetX(),g+=c.GetY(),++h);m=this._inst.GetWorldInfo().GetLayout();var k=this._runtime.GetGameTime(),a=c=0;k>=d.GetShakeStart()&&k<d.GetShakeEnd()&&(c=d.GetShakeMagnitude()*
Math.min(this._runtime.GetTimeScale(),1),0===d.GetShakeMode()&&(c*=1-(k-d.GetShakeStart())/(d.GetShakeEnd()-d.GetShakeStart())),d=this._runtime.Random()*Math.PI*2,k=this._runtime.Random()*c,c=Math.cos(d)*k,a=Math.sin(d)*k);m.SetScrollX(f/h+c);m.SetScrollY(g/h+a)}}GetPropertyValueByIndex(d){switch(d){case 0:return this._isEnabled}}SetPropertyValueByIndex(d,c){switch(d){case 0:(this._isEnabled=!!c)?this._StartTicking2():this._StopTicking2()}}}}"use strict";self.C3.Behaviors.scrollto.Cnds={IsEnabled(){return this._isEnabled}};
"use strict";self.C3.Behaviors.scrollto.Acts={Shake(e,d,c){const f=this.GetBehavior();f.SetShakeMagnitude(e);f.SetShakeStart(this._runtime.GetGameTime());f.SetShakeEnd(this._runtime.GetGameTime()+d);f.SetShakeMode(c)},SetEnabled(e){(this._isEnabled=0!==e)?this._StartTicking2():this._StopTicking2()}};"use strict";self.C3.Behaviors.scrollto.Exps={};"use strict";{const e=self.C3;e.Behaviors.solid=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Behaviors.solid.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=new Set;e.Behaviors.solid.Instance=class extends e.SDKBehaviorInstanceBase{constructor(c,f){super(c);this.SetEnabled(!0);f&&(this.SetEnabled(f[0]),this.SetTags(f[1]))}Release(){super.Release()}SetEnabled(c){this._inst._SetSolidEnabled(!!c)}IsEnabled(){return this._inst._IsSolidEnabled()}SetTags(c){const f=this._inst.GetSavedDataMap();if(c.trim()){var g=f.get("solidTags");g||(g=new Set,f.set("solidTags",g));g.clear();for(const h of c.split(" "))h&&g.add(h.toLowerCase())}else f.delete("solidTags")}GetTags(){return this._inst.GetSavedDataMap().get("solidTags")||
d}SaveToJson(){return{e:this.IsEnabled()}}LoadFromJson(c){this.SetEnabled(c.e)}GetPropertyValueByIndex(c){switch(c){case 0:return this.IsEnabled()}}SetPropertyValueByIndex(c,f){switch(c){case 0:this.SetEnabled(f)}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.IsEnabled(),onedit:c=>this.SetEnabled(c)}]}]}}}"use strict";self.C3.Behaviors.solid.Cnds={IsEnabled(){return this.IsEnabled()}};"use strict";
self.C3.Behaviors.solid.Acts={SetEnabled(e){this.SetEnabled(e)},SetTags(e){this.SetTags(e)}};"use strict";self.C3.Behaviors.solid.Exps={};"use strict";{const e=self.C3;e.Behaviors.EightDir=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.EightDir.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=self.IBehaviorInstance;e.Behaviors.EightDir.Instance=class extends e.SDKBehaviorInstanceBase{constructor(g,h){super(g);this._simRight=this._simLeft=this._simDown=this._simUp=this._ignoreInput=this._rightKey=this._leftKey=this._downKey=this._upKey=!1;this._dy=this._dx=0;this._maxSpeed=200;this._acc=600;this._dec=500;this._angleMode=this._directions=3;this._isEnabled=this._defaultControls=!0;h&&(this._maxSpeed=h[0],this._acc=h[1],this._dec=h[2],this._directions=h[3],this._angleMode=
h[4],this._defaultControls=!!h[5],this._isEnabled=!!h[6]);this._isEnabled&&this._StartTicking();this._defaultControls&&this._BindEvents()}_BindEvents(){if(!this._disposables){var g=this._runtime.Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(g,"keydown",h=>this._OnKeyDown(h.data)),e.Disposable.From(g,"keyup",h=>this._OnKeyUp(h.data)),e.Disposable.From(g,"window-blur",()=>this._OnWindowBlur()))}}_UnBindEvents(){this._disposables&&(this._disposables.Release(),this._disposables=
null)}Release(){super.Release()}SaveToJson(){return{dx:this._dx,dy:this._dy,e:this._isEnabled,ms:this._maxSpeed,acc:this._acc,dec:this._dec,d:this._directions,am:this._angleMode,dc:this._defaultControls,ii:this._ignoreInput}}LoadFromJson(g){this._dx=g.dx;this._dy=g.dy;this._SetEnabled(g.e);this._maxSpeed=g.ms;this._acc=g.acc;this._dec=g.dec;this._directions=g.d;this._angleMode=g.am;this._defaultControls=g.dc;this._ignoreInput=g.ii;this._simRight=this._simLeft=this._simDown=this._simUp=this._rightKey=
this._leftKey=this._downKey=this._upKey=!1;this._defaultControls?this._BindEvents():this._UnBindEvents()}_OnKeyDown(g){switch(g.key){case "ArrowLeft":this._leftKey=!0;break;case "ArrowUp":this._upKey=!0;break;case "ArrowRight":this._rightKey=!0;break;case "ArrowDown":this._downKey=!0}}_OnKeyUp(g){switch(g.key){case "ArrowLeft":this._leftKey=!1;break;case "ArrowUp":this._upKey=!1;break;case "ArrowRight":this._rightKey=!1;break;case "ArrowDown":this._downKey=!1}}_OnWindowBlur(){this._rightKey=this._leftKey=
this._downKey=this._upKey=!1}Tick(){var g=this._runtime.GetDt(this._inst);const h=this._runtime.GetCollisionEngine();var m=this._leftKey||this._simLeft,k=this._rightKey||this._simRight,a=this._upKey||this._simUp,b=this._downKey||this._simDown;this._simDown=this._simUp=this._simRight=this._simLeft=!1;if(this._isEnabled){var l=h.TestOverlapSolid(this._inst);if(l&&(h.RegisterCollision(this._inst,l),!h.PushOutSolidNearest(this._inst)))return;this._ignoreInput&&(m=k=a=b=!1);0===this._directions?m=k=!1:
1===this._directions&&(a=b=!1);2===this._directions&&(a||b)&&(m=k=!1);m===k&&(0>this._dx?this._dx=Math.min(this._dx+this._dec*g,0):0<this._dx&&(this._dx=Math.max(this._dx-this._dec*g,0)));a===b&&(0>this._dy?this._dy=Math.min(this._dy+this._dec*g,0):0<this._dy&&(this._dy=Math.max(this._dy-this._dec*g,0)));var p=l=0;m&&!k&&(l=0<this._dx?-(this._acc+this._dec):-this._acc);k&&!m&&(l=0>this._dx?this._acc+this._dec:this._acc);a&&!b&&(p=0<this._dy?-(this._acc+this._dec):-this._acc);b&&!a&&(p=0>this._dy?
this._acc+this._dec:this._acc);this._dx+=l*g;this._dy+=p*g;if(0!==this._dx||0!==this._dy){k=Math.atan2(this._dy,this._dx);m=this._maxSpeed*Math.cos(k);k=this._maxSpeed*Math.sin(k);Math.sqrt(this._dx*this._dx+this._dy*this._dy)>this._maxSpeed&&(this._dx=m,this._dy=k);var r=Math.abs(m)*g;b=Math.abs(k)*g;m=this._inst.GetWorldInfo();const t=m.GetX();a=m.GetY();k=m.GetAngle();r=e.clamp(this._dx*g+.5*l*g*g,-r,r);m.OffsetX(r);m.SetBboxChanged();if(l=h.TestOverlapSolid(this._inst))h.PushOutSolid(this._inst,
0>this._dx?1:-1,0,Math.max(Math.abs(Math.floor(r)),1))||(m.SetX(t),m.SetBboxChanged()),this._dx=0,h.RegisterCollision(this._inst,l);g=e.clamp(this._dy*g+.5*p*g*g,-b,b);m.OffsetY(g);m.SetBboxChanged();if(l=h.TestOverlapSolid(this._inst))h.PushOutSolid(this._inst,0,0>this._dy?1:-1,Math.max(Math.abs(Math.floor(g)),1))||(m.SetY(a),m.SetBboxChanged()),this._dy=0,h.RegisterCollision(this._inst,l);g=e.round6dp(this._dx);p=e.round6dp(this._dy);0===g&&0===p||!this._inst.GetPlugin().IsRotatable()||(1===this._angleMode?
m.SetAngle(e.toRadians(90*Math.round(e.toDegrees(Math.atan2(p,g))/90))):2===this._angleMode?m.SetAngle(e.toRadians(45*Math.round(e.toDegrees(Math.atan2(p,g))/45))):3===this._angleMode&&m.SetAngle(Math.atan2(p,g)));m.SetBboxChanged();m.GetAngle()!=k&&(l=h.TestOverlapSolid(this._inst))&&(m.SetAngle(k),m.SetBboxChanged(),h.RegisterCollision(this._inst,l))}}}GetPropertyValueByIndex(g){switch(g){case 0:return this._GetMaxSpeed();case 1:return this._GetAcceleration();case 2:return this._GetDeceleration();
case 3:return this._directions;case 4:return this._angleMode;case 5:return this._IsDefaultControls();case 6:return this._IsEnabled()}}SetPropertyValueByIndex(g,h){switch(g){case 0:this._SetMaxSpeed(h);break;case 1:this._SetAcceleration(h);break;case 2:this._SetDeceleration(h);break;case 3:this._directions=h;break;case 4:this._angleMode=h;break;case 5:this._SetDefaultControls(!!h);break;case 6:this._SetEnabled(!!h)}}_Stop(){this._dy=this._dx=0}_Reverse(){this._dx*=-1;this._dy*=-1}_MaybeClampSpeed(){const g=
Math.hypot(this._dx,this._dy);g>this._maxSpeed&&this._SetSpeed(g)}_SetSpeed(g){g=e.clamp(g,0,this._maxSpeed);const h=Math.atan2(this._dy,this._dx);this._dx=g*Math.cos(h);this._dy=g*Math.sin(h)}_GetSpeed(){return Math.hypot(this._dx,this._dy)}_SetMaxSpeed(g){this._maxSpeed=Math.max(g,0)}_GetMaxSpeed(){return this._maxSpeed}_SetAcceleration(g){this._acc=Math.max(g,0)}_GetAcceleration(){return this._acc}_SetDeceleration(g){this._dec=Math.max(g,0)}_GetDeceleration(){return this._dec}_GetMovingAngle(){return Math.atan2(this._dy,
this._dx)}_SetVectorX(g){this._dx=g;this._MaybeClampSpeed()}_GetVectorX(){return this._dx}_SetVectorY(g){this._dy=g;this._MaybeClampSpeed()}_GetVectorY(){return this._dy}_SimulateControl(g){if(this._isEnabled)switch(g){case 0:this._simLeft=!0;break;case 1:this._simRight=!0;break;case 2:this._simUp=!0;break;case 3:this._simDown=!0}}_SetDefaultControls(g){g=!!g;this._defaultControls!==g&&((this._defaultControls=g)?this._BindEvents():(this._UnBindEvents(),this._OnWindowBlur()))}_IsDefaultControls(){return this._defaultControls}_SetIgnoreInput(g){this._ignoreInput=
!!g}_IsIgnoreInput(){return this._ignoreInput}_SetEnabled(g){(this._isEnabled=!!g)?this._StartTicking():(this._simDown=this._simUp=this._simRight=this._simLeft=!1,this._StopTicking())}_IsEnabled(){return this._isEnabled}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.eightdir.debugger.vector-x",value:this._GetVectorX(),onedit:g=>this._SetVectorX(g)},{name:"behaviors.eightdir.debugger.vector-y",value:this._GetVectorY(),onedit:g=>this._SetVectorY(g)},
{name:"behaviors.eightdir.debugger.speed",value:this._GetSpeed(),onedit:g=>this._SetSpeed(g)},{name:"behaviors.eightdir.debugger.angle-of-motion",value:e.toDegrees(this._GetMovingAngle())},{name:"behaviors.eightdir.properties.max-speed.name",value:this._GetMaxSpeed(),onedit:g=>this._SetMaxSpeed(g)},{name:"behaviors.eightdir.properties.acceleration.name",value:this._GetAcceleration(),onedit:g=>this._SetAcceleration(g)},{name:"behaviors.eightdir.properties.deceleration.name",value:this._GetDeceleration(),
onedit:g=>this._SetDeceleration(g)},{name:"behaviors.eightdir.properties.enabled.name",value:this._IsEnabled(),onedit:g=>this._SetEnabled(g)}]}]}GetScriptInterfaceClass(){return self.I8DirectionBehaviorInstance}};const c=new WeakMap,f=new Map([["left",0],["right",1],["up",2],["down",3]]);self.I8DirectionBehaviorInstance=class extends d{constructor(){super();c.set(this,d._GetInitInst().GetSdkInstance())}stop(){c.get(this)._Stop()}reverse(){c.get(this)._Reverse()}simulateControl(g){g=f.get(g);if("number"!==
typeof g)throw Error("invalid control");c.get(this)._SimulateControl(g)}get speed(){return c.get(this)._GetSpeed()}set speed(g){c.get(this)._SetSpeed(g)}get maxSpeed(){return c.get(this)._GetMaxSpeed()}set maxSpeed(g){c.get(this)._SetMaxSpeed(g)}get acceleration(){return c.get(this)._GetAcceleration()}set acceleration(g){c.get(this)._SetAcceleration(g)}get deceleration(){return c.get(this)._GetDeceleration()}set deceleration(g){c.get(this)._SetDeceleration(g)}get vectorX(){return c.get(this)._GetVectorX()}set vectorX(g){c.get(this)._SetVectorX(g)}get vectorY(){return c.get(this)._GetVectorY()}set vectorY(g){c.get(this)._SetVectorX(g)}get isDefaultControls(){return c.get(this)._IsDefaultControls()}set isDefaultControls(g){c.get(this)._SetDefaultControls(!!g)}get isIgnoringInput(){return c.get(this)._IsIgnoreInput()}set isIgnoringInput(g){c.get(this)._SetIgnoreInput(!!g)}get isEnabled(){return c.get(this)._IsEnabled()}set isEnabled(g){c.get(this)._SetEnabled(!!g)}}}"use strict";
{const e=self.C3;e.Behaviors.EightDir.Cnds={IsMoving(){return 1e-10<this._GetSpeed()},CompareSpeed(d,c){return e.compare(this._GetSpeed(),d,c)},IsEnabled(){return this._IsEnabled()}}}"use strict";
self.C3.Behaviors.EightDir.Acts={Stop(){this._Stop()},Reverse(){this._Reverse()},SetIgnoreInput(e){this._SetIgnoreInput(e)},SetSpeed(e){this._SetSpeed(e)},SetMaxSpeed(e){this._SetMaxSpeed(e)},SetAcceleration(e){this._SetAcceleration(e)},SetDeceleration(e){this._SetDeceleration(e)},SimulateControl(e){this._SimulateControl(e)},SetEnabled(e){this._SetEnabled(e)},SetVectorX(e){this._SetVectorX(e)},SetVectorY(e){this._SetVectorY(e)},SetDefaultControls(e){this._SetDefaultControls(!!e)}};"use strict";
{const e=self.C3;e.Behaviors.EightDir.Exps={Speed(){return this._GetSpeed()},MaxSpeed(){return this._GetMaxSpeed()},Acceleration(){return this._GetAcceleration()},Deceleration(){return this._GetDeceleration()},MovingAngle(){return e.toDegrees(this._GetMovingAngle())},VectorX(){return this._GetVectorX()},VectorY(){return this._GetVectorY()}}}"use strict";{const e=self.C3;e.Behaviors.Platform=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Behaviors.Platform.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=self.IBehaviorInstance;function c(h,m,k,a,b){return e.clamp(h*b+.5*a*b*b,m*b,k*b)}e.Behaviors.Platform.Instance=class extends e.SDKBehaviorInstanceBase{constructor(h,m){super(h);this._keyboardDisposables=null;this._simJump=this._simRight=this._simLeft=this._ignoreInput=this._canDoubleJump=this._doubleJumped=this._jumped=this._jumpKey=this._rightKey=this._leftKey=!1;this._lastFloorObject=null;this._loadFloorUid=-1;this._lastFloorY=this._lastFloorX=0;this._wasOnFloor=this._floorIsJumpthru=
!1;this._wasOverJumpthru=!!this._runtime.GetCollisionEngine().TestOverlapJumpthru(this._inst);this._loadJumpthruUid=-1;this._animMode="stopped";this._fallThrough=0;this._isFirstTick=!0;this._rightY=this._rightX=this._downY=this._downX=this._dy=this._dx=0;this._g1=this._g=1500;this._ga=e.toRadians(90);this._maxSpeed=330;this._dec=this._acc=1500;this._jumpStrength=650;this._maxFall=1E3;this._enableDoubleJump=!1;this._sustainTime=this._jumpSustain=0;this._defaultControls=!0;this._ceilingCollisionMode=
0;this._isEnabled=!0;m&&(this._maxSpeed=m[0],this._acc=m[1],this._dec=m[2],this._jumpStrength=m[3],this._g=m[4],this._maxFall=m[5],this._enableDoubleJump=!!m[6],this._jumpSustain=m[7]/1E3,this._defaultControls=!!m[8],this._isEnabled=!!m[9]);h=this._runtime.Dispatcher();this._disposables=new e.CompositeDisposable(e.Disposable.From(h,"instancedestroy",k=>this._OnInstanceDestroyed(k.instance)),e.Disposable.From(h,"afterload",k=>this._OnAfterLoad()));this._defaultControls&&this._BindEvents();this._isEnabled&&
this._StartPostTicking();this._UpdateGravity();this._inst.GetUnsavedDataMap().set("isPlatformBehavior",!0)}Release(){this._keyboardDisposables&&(this._keyboardDisposables.Release(),this._keyboardDisposables=null);this._wasOverJumpthru=this._lastFloorObject=null;super.Release()}_BindEvents(){if(!this._keyboardDisposables){var h=this._runtime.Dispatcher();this._keyboardDisposables=new e.CompositeDisposable(e.Disposable.From(h,"keydown",m=>this._OnKeyDown(m.data)),e.Disposable.From(h,"keyup",m=>this._OnKeyUp(m.data)),
e.Disposable.From(h,"window-blur",()=>this._OnWindowBlur()))}}_UnBindEvents(){this._keyboardDisposables&&(this._keyboardDisposables.Release(),this._keyboardDisposables=null)}_OnInstanceDestroyed(h){this._lastFloorObject===h&&(this._lastFloorObject=null);this._wasOverJumpthru===h&&(this._wasOverJumpthru=null)}_OnKeyDown(h){switch(h.key){case "ArrowLeft":this._leftKey=!0;break;case "ArrowRight":this._rightKey=!0;break;case "ArrowUp":this._jumpKey=!0}}_OnKeyUp(h){switch(h.key){case "ArrowLeft":this._leftKey=
!1;break;case "ArrowRight":this._rightKey=!1;break;case "ArrowUp":this._jumped=this._jumpKey=!1}}_OnWindowBlur(){this._jumped=this._jumpKey=this._rightKey=this._leftKey=!1}SaveToJson(){return{ii:this._ignoreInput,lfx:this._lastFloorX,lfy:this._lastFloorY,lfo:this._lastFloorObject?this._lastFloorObject.GetUID():-1,am:this._animMode,en:this._isEnabled,fall:this._fallThrough,ft:this._isFirstTick,dx:this._dx,dy:this._dy,ms:this._maxSpeed,acc:this._acc,dec:this._dec,js:this._jumpStrength,g:this._g,g1:this._g1,
mf:this._maxFall,wof:this._wasOnFloor,woj:this._wasOverJumpthru?this._wasOverJumpthru.GetUID():-1,ga:this._ga,edj:this._enableDoubleJump,cdj:this._canDoubleJump,dj:this._doubleJumped,sus:this._jumpSustain,dc:this._defaultControls,cc:this._ceilingCollisionMode}}LoadFromJson(h){this._ignoreInput=h.ii;this._lastFloorX=h.lfx;this._lastFloorY=h.lfy;this._loadFloorUid=h.lfo;this._animMode=h.am;const m=h.en;this._fallThrough=h.fall;this._isFirstTick=h.ft;this._dx=h.dx;this._dy=h.dy;this._maxSpeed=h.ms;this._acc=
h.acc;this._dec=h.dec;this._jumpStrength=h.js;this._g=h.g;this._g1=h.g1;this._maxFall=h.mf;this._wasOnFloor=h.wof;this._loadJumpthruUid=h.woj;this._ga=h.ga;this._enableDoubleJump=h.edj;this._canDoubleJump=h.cdj;this._doubleJumped=h.dj;this._jumpSustain=h.sus;this._defaultControls=h.dc;this._ceilingCollisionMode=h.cc||0;this._simJump=this._simRight=this._simLeft=this._jumped=this._jumpKey=this._rightKey=this._leftKey=!1;this._sustainTime=0;this._defaultControls?this._BindEvents():this._UnBindEvents();
this._SetEnabled(m);this._UpdateGravity()}_OnAfterLoad(){this._lastFloorObject=-1===this._loadFloorUid?null:this._runtime.GetInstanceByUID(this._loadFloorUid);this._wasOverJumpthru=-1===this._loadJumpthruUid?null:this._runtime.GetInstanceByUID(this._loadJumpthruUid)}_UpdateGravity(){this._downX=Math.cos(this._ga);this._downY=Math.sin(this._ga);this._rightX=Math.cos(this._ga-Math.PI/2);this._rightY=Math.sin(this._ga-Math.PI/2);this._downX=e.round6dp(this._downX);this._downY=e.round6dp(this._downY);
this._rightX=e.round6dp(this._rightX);this._rightY=e.round6dp(this._rightY);this._g1=this._g;0>this._g&&(this._downX*=-1,this._downY*=-1,this._g=Math.abs(this._g))}_GetGDir(){return 0>this._g?-1:1}_IsOnFloor(){var h=this._inst.GetWorldInfo();const m=this._runtime.GetCollisionEngine(),k=this._inst;var a=this._lastFloorObject;const b=h.GetX(),l=h.GetY();h.OffsetXY(this._downX,this._downY);h.SetBboxChanged();if(a&&m.TestOverlap(k,a)&&(!a.GetObjectClass().HasSolidBehavior()||m.IsSolidCollisionAllowed(a,
k)))return h.SetXY(b,l),h.SetBboxChanged(),a;{let p=m.TestOverlapSolid(k);a=null;p||0!==this._fallThrough||(a=m.TestOverlapJumpthru(k,!0));h.SetXY(b,l);h.SetBboxChanged();if(p){if(m.TestOverlap(k,p))return null;this._floorIsJumpthru=!1;return p}if(a&&a.length){h=0;for(let r=0,t=a.length;r<t;++r)a[h]=a[r],m.TestOverlap(k,a[r])||++h;if(1<=h)return this._floorIsJumpthru=!0,a[0]}return null}}PostTick(){if(this._isEnabled){var h=this._runtime.GetDt(this._inst);this._jumpKey||this._simJump||(this._jumped=
!1);var m=this._leftKey||this._simLeft,k=this._rightKey||this._simRight,a=this._jumpKey||this._simJump,b=a&&!this._jumped;this._simJump=this._simRight=this._simLeft=!1;this._ignoreInput&&(b=a=k=m=!1);a||(this._sustainTime=0);this._HandleFirstTick();var [l,,p]=this._TrackMovingPlatform(),r=this._IsOnFloor(),t=r&&!this._wasOnFloor;if(!this._MaybePushOutSolid()){this._TrackFloor(r,p,l,a);b=this._HandleJump(r,b,a);r||this._ApplyJumpGravity(b,a,h);this._wasOnFloor=!!r;m=this._ApplyHorizontalAcceleration(m,
k,h);k=!1;a=0;0!==this._dx&&(k=this._HandleHorizontalMovement(h,m,r,b));if(0!==this._dy){const [u,w]=this._HandleVerticalMovement(h,r);k=k||u;a=w}!k&&t&&0>this._dy&&0<a&&(this._dy=0,k=!0);this._HandleAnimationTriggers(r,k,b);0<this._fallThrough&&this._fallThrough--;this._wasOverJumpthru=this._runtime.GetCollisionEngine().TestOverlapJumpthru(this._inst)}}}_HandleFirstTick(){if(this._isFirstTick){var h=this._inst,m=this._runtime.GetCollisionEngine();(m.TestOverlapSolid(h)||m.TestOverlapJumpthru(h))&&
m.PushOutSolid(h,-this._downX,-this._downY,4,!0);this._isFirstTick=!1}}_TrackMovingPlatform(){var h=this._lastFloorObject,m=h?h.GetWorldInfo():null;let k=0,a=0;var b=!1;if(h&&0===this._dy&&(m.GetY()!==this._lastFloorY||m.GetX()!==this._lastFloorX)){h=this._inst;b=h.GetWorldInfo();const l=this._runtime.GetCollisionEngine(),p=m.GetX();m=m.GetY();k=p-this._lastFloorX;a=m-this._lastFloorY;b.OffsetXY(k,a);b.SetBboxChanged();this._lastFloorX=p;this._lastFloorY=m;b=!0;l.TestOverlapSolid(h)&&l.PushOutSolid(h,
-k,-a,2.5*Math.hypot(k,a))}return[k,a,b]}_MaybePushOutSolid(){const h=this._inst;var m=h.GetWorldInfo();const k=this._runtime.GetCollisionEngine(),a=k.TestOverlapSolid(h);if(!a)return!1;const b=Math.abs(m.GetWidth());m=Math.abs(m.GetHeight());return h.GetSavedDataMap().get("inputPredicted")?(k.PushOutSolid(h,-this._downX,-this._downY,10,!1),!1):k.PushOutSolidAxis(h,-this._downX,-this._downY,m/8)||k.PushOutSolidAxis(h,this._rightX,this._rightY,b/2)||k.PushOutSolidAxis(h,this._downX,this._downY,m/2)||
k.PushOutSolidNearest(h,Math.max(b,m)/2)?(k.RegisterCollision(h,a),!1):!0}_TrackFloor(h,m,k,a){const b=this._inst,l=this._runtime.GetCollisionEngine();if(h){a=this._downX;const p=this._downY,r=this._rightX,t=this._rightY;this._canDoubleJump=this._doubleJumped=!1;0<this._dy&&(this._wasOnFloor||(l.PushInFractional(b,-a,-p,h,16),this._wasOnFloor=!0),this._dy=0);this._lastFloorObject!==h?(this._lastFloorObject=h,k=h.GetWorldInfo(),this._lastFloorX=k.GetX(),this._lastFloorY=k.GetY(),l.RegisterCollision(b,
h)):m&&(h=l.TestOverlapSolid(b))&&(l.RegisterCollision(b,h),0!==k&&(0<k?l.PushOutSolid(b,-r,-t):l.PushOutSolid(b,r,t)),l.PushOutSolid(b,-a,-p))}else a||(this._canDoubleJump=!0)}_HandleJump(h,m,k){if(h&&m||!h&&this._enableDoubleJump&&k&&this._canDoubleJump&&!this._doubleJumped){m=this._inst;k=m.GetWorldInfo();const a=this._runtime.GetCollisionEngine(),b=k.GetX(),l=k.GetY();k.OffsetXY(-this._downX,-this._downY);k.SetBboxChanged();a.TestOverlapSolid(m)?m=!1:(this._sustainTime=this._jumpSustain,this.Trigger(e.Behaviors.Platform.Cnds.OnJump),
this._animMode="jumping",this._dy=-this._jumpStrength,m=!0,h?this._jumped=!0:this._doubleJumped=!0);k.SetXY(b,l);k.SetBboxChanged()}return m}_ApplyJumpGravity(h,m,k){m&&0<this._sustainTime?(this._dy=-this._jumpStrength,this._sustainTime-=k):(this._lastFloorObject=null,this._dy+=this._g*k,this._dy>this._maxFall&&(this._dy=this._maxFall));h&&(this._jumped=!0)}_ApplyHorizontalAcceleration(h,m,k){const a=this._acc,b=this._dec;h===m&&(0>this._dx?(this._dx+=b*k,0<this._dx&&(this._dx=0)):0<this._dx&&(this._dx-=
b*k,0>this._dx&&(this._dx=0)));let l=0;h&&!m&&(l=0<this._dx?-(a+b):-a);m&&!h&&(l=0>this._dx?a+b:a);this._dx+=l*k;this._dx=e.clamp(this._dx,-this._maxSpeed,this._maxSpeed);return l}_HandleHorizontalMovement(h,m,k,a){const b=this._inst;var l=b.GetWorldInfo();const p=this._runtime.GetCollisionEngine(),r=this._downX,t=this._downY,u=this._rightX,w=this._rightY;var x=this._maxSpeed;let A=!1;var E=l.GetX();let y=l.GetY();var B=c(this._dx,-x,x,m,h)*u;const H=c(this._dx,-x,x,m,h)*w;l.OffsetXY(u*(1<this._dx?
1:-1)-r,w*(1<this._dx?1:-1)-t);l.SetBboxChanged();m=!1;x=p.TestOverlapSolid(b);l.SetXY(E+B,y+H);l.SetBboxChanged();let P=p.TestOverlapSolid(b);!P&&k&&(P=p.TestOverlapJumpthru(b))&&(l.SetXY(E,y),l.SetBboxChanged(),p.TestOverlap(b,P)?(P=null,m=!1):m=!0,l.SetXY(E+B,y+H),l.SetBboxChanged());P?(B=Math.abs(this._dx*h)+2,x||!p.PushOutSolid(b,-r,-t,B,m,P))?(p.RegisterCollision(b,P),B=Math.max(Math.abs(this._dx*h*2.5),30),p.PushOutSolid(b,u*(0>this._dx?1:-1),w*(0>this._dx?1:-1),B,!1)?!k||m||this._floorIsJumpthru||
(E=l.GetX(),y=l.GetY(),l.OffsetXY(r,t),p.TestOverlapSolid(b)?p.PushOutSolid(b,-r,-t,3,!1)||(l.SetXY(E,y),l.SetBboxChanged()):(l.SetXY(E,y),l.SetBboxChanged())):(l.SetXY(E,y),l.SetBboxChanged()),m||(this._dx=0)):!x&&!a&&Math.abs(this._dy)<Math.abs(this._jumpStrength/4)&&(this._dy=0,k||(A=!0)):(E=this._IsOnFloor(),k&&!E?(h=Math.ceil(Math.abs(this._dx*h))+2,E=l.GetX(),y=l.GetY(),l.OffsetXY(r*h,t*h),l.SetBboxChanged(),p.TestOverlapSolid(b)||p.TestOverlapJumpthru(b)?p.PushOutSolid(b,-r,-t,h+2,!0):(l.SetXY(E,
y),l.SetBboxChanged())):E&&(!k&&this._floorIsJumpthru&&(this._lastFloorObject=E,l=E.GetWorldInfo(),this._lastFloorX=l.GetX(),this._lastFloorY=l.GetY(),this._dy=0,A=!0),0===this._dy&&p.PushInFractional(b,-r,-t,E,16)));return A}_HandleVerticalMovement(h,m){const k=this._inst,a=k.GetWorldInfo(),b=this._runtime.GetCollisionEngine(),l=this._downX,p=this._downY;let r=!1,t=a.GetX(),u=a.GetY();const w=c(this._dy,-Infinity,this._maxFall,this._g,h);a.OffsetXY(w*l,w*p);const x=a.GetX(),A=a.GetY();a.SetBboxChanged();
let E=b.TestOverlapSolid(k);var y=!1;if(!E&&0<this._dy&&!m){if((y=0<this._fallThrough?null:b.TestOverlapJumpthru(k,!0))&&y.length){if(this._wasOverJumpthru){a.SetXY(t,u);a.SetBboxChanged();m=0;for(let B=0,H=y.length;B<H;++B)y[m]=y[B],b.TestOverlap(k,y[B])||++m;e.truncateArray(y,m);a.SetXY(x,A);a.SetBboxChanged()}1<=y.length&&(E=y[0])}y=!!E}if(E)if(b.RegisterCollision(k,E),this._sustainTime=0,b.PushOutSolid(k,l*(0>this._dy?1:-1),p*(0>this._dy?1:-1),Math.max(Math.abs(this._dy*h*1.1),2),y,E)){this._lastFloorObject=
E;h=E.GetWorldInfo();this._lastFloorX=h.GetX();this._lastFloorY=h.GetY();(this._floorIsJumpthru=y)&&(r=!0);if(0<this._dy||0===this._ceilingCollisionMode)this._dy=0;0>this._dy&&1===this._ceilingCollisionMode&&b.PushInFractional(k,l,p,E,32)}else a.SetXY(t,u),a.SetBboxChanged(),this._wasOnFloor=!0,y||(this._dy=0);return[r,w]}_HandleAnimationTriggers(h,m,k){"falling"!==this._animMode&&0<this._dy&&!h&&(this.Trigger(e.Behaviors.Platform.Cnds.OnFall),this._animMode="falling");(h||m)&&0<=this._dy&&("falling"===
this._animMode||m||k&&0===this._dy?(this.Trigger(e.Behaviors.Platform.Cnds.OnLand),this._animMode=0===this._dx&&0===this._dy?"stopped":"moving"):("stopped"!==this._animMode&&0===this._dx&&0===this._dy&&(this.Trigger(e.Behaviors.Platform.Cnds.OnStop),this._animMode="stopped"),"moving"===this._animMode||0===this._dx&&0===this._dy||k||(this.Trigger(e.Behaviors.Platform.Cnds.OnMove),this._animMode="moving")))}_CheckIfStandingOnFloor(){if(0!==this._dy)return!1;const h=this._inst;var m=this.GetWorldInfo();
const k=this._runtime.GetCollisionEngine(),a=m.GetX(),b=m.GetY();m.OffsetXY(this._downX,this._downY);m.SetBboxChanged();const l=k.TestOverlapSolid(h);let p=null;l||0!==this._fallThrough||(p=k.TestOverlapJumpthru(h,!0));m.SetXY(a,b);m.SetBboxChanged();if(l)return!k.TestOverlap(h,l);if(p&&p.length){m=0;for(let r=0,t=p.length;r<t;++r)p[m]=p[r],k.TestOverlap(h,p[r])||m++;if(1<=m)return!0}return!1}_IsByWall(h){const m=this._inst,k=this.GetWorldInfo(),a=this._runtime.GetCollisionEngine(),b=k.GetX(),l=k.GetY();
0===h?k.OffsetXY(2*-this._rightX,2*-this._rightY):k.OffsetXY(2*this._rightX,2*this._rightY);k.SetBboxChanged();if(!a.TestOverlapSolid(m))return k.SetXY(b,l),k.SetBboxChanged(),!1;k.OffsetXY(3*-this._downX,3*-this._downY);k.SetBboxChanged();h=!!a.TestOverlapSolid(m);k.SetXY(b,l);k.SetBboxChanged();return h}_FallThroughJumpThru(){const h=this.GetWorldInfo(),m=h.GetX(),k=h.GetY();h.OffsetXY(this._downX,this._downY);h.SetBboxChanged();const a=this._runtime.GetCollisionEngine().TestOverlapJumpthru(this._inst,
!1);h.SetXY(m,k);h.SetBboxChanged();a&&(this._fallThrough=3,this._lastFloorObject=null)}_ResetDoubleJump(h){this._doubleJumped=!h}_GetSpeed(){return Math.hypot(this._dx,this._dy)}_GetMovingAngle(){return Math.atan2(this._dy,this._dx)}_IsJumping(){return 0>this._dy}_IsFalling(){return 0<this._dy}_SetMaxSpeed(h){this._maxSpeed=Math.max(h,0)}_GetMaxSpeed(){return this._maxSpeed}_SetAcceleration(h){this._acc=Math.max(h,0)}_GetAcceleration(){return this._acc}_SetDeceleration(h){this._dec=Math.max(h,0)}_GetDeceleration(){return this._dec}_SetJumpStrength(h){this._jumpStrength=
Math.max(h,0)}_GetJumpStrength(){return this._jumpStrength}_SetMaxFallSpeed(h){this._maxFall=Math.max(h,0)}_GetMaxFallSpeed(){return this._maxFall}_SetGravity(h){if(this._g1!==h){this._g=h;this._UpdateGravity();h=this._runtime.GetCollisionEngine();var m=this.GetWorldInfo();h.TestOverlapSolid(this._inst)&&(h.PushOutSolid(this._inst,this._downX,this._downY,10),m.OffsetXY(2*this._downX,2*this._downY),m.SetBboxChanged());this._lastFloorObject=null}}_GetGravity(){return this._g}_SetGravityAngle(h){h=e.clampAngle(h);
this._ga!==h&&(this._ga=h,this._UpdateGravity(),this._lastFloorObject=null)}_GetGravityAngle(){return this._ga}_SetDoubleJumpEnabled(h){this._enableDoubleJump=!!h}_IsDoubleJumpEnabled(){return this._enableDoubleJump}_SetJumpSustain(h){this._jumpSustain=h}_GetJumpSustain(){return this._jumpSustain}_SetCeilingCollisionMode(h){this._ceilingCollisionMode=h}_GetCeilingCollisionMode(){return this._ceilingCollisionMode}_SetVectorX(h){this._dx=h}_GetVectorX(){return this._dx}_SetVectorY(h){this._dy=h}_GetVectorY(){return this._dy}_SimulateControl(h){if(this._isEnabled)switch(h){case 0:this._simLeft=
!0;break;case 1:this._simRight=!0;break;case 2:this._simJump=!0}}_SetDefaultControls(h){h=!!h;this._defaultControls!==h&&((this._defaultControls=h)?this._BindEvents():(this._UnBindEvents(),this._OnWindowBlur()))}_IsDefaultControls(){return this._defaultControls}_SetIgnoreInput(h){this._ignoreInput=!!h}_IsIgnoreInput(){return this._ignoreInput}_SetEnabled(h){h=!!h;this._isEnabled!==h&&((this._isEnabled=h)?this._StartPostTicking():(this._StopPostTicking(),this._lastFloorObject=null,this._simJump=this._simRight=
this._simLeft=!1))}_IsEnabled(){return this._isEnabled}GetPropertyValueByIndex(h){switch(h){case 0:return this._GetMaxSpeed();case 1:return this._GetAcceleration();case 2:return this._GetDeceleration();case 3:return this._GetJumpStrength();case 4:return this._GetGravity();case 5:return this._GetMaxFallSpeed();case 6:return this._IsDoubleJumpEnabled();case 7:return 1E3*this._GetJumpSustain();case 8:return this._IsDefaultControls();case 9:return this._IsEnabled()}}SetPropertyValueByIndex(h,m){switch(h){case 0:this._SetMaxSpeed(m);
break;case 1:this._SetAcceleration(m);break;case 2:this._SetDeceleration(m);break;case 3:this._SetJumpStrength(m);break;case 4:this._SetGravity(m);break;case 5:this._SetMaxFallSpeed(m);break;case 6:this._SetDoubleJumpEnabled(!!m);break;case 7:this._SetJumpSustain(m/1E3);break;case 8:this._SetDefaultControls(!!m);break;case 9:this._SetEnabled(!!m)}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.platform.debugger.vector-x",value:this._GetVectorX(),
onedit:h=>this._SetVectorX(h)},{name:"behaviors.platform.debugger.vector-y",value:this._GetVectorY(),onedit:h=>this._SetVectorY(h)},{name:"behaviors.platform.properties.max-speed.name",value:this._GetMaxSpeed(),onedit:h=>this._SetMaxSpeed(h)},{name:"behaviors.platform.properties.acceleration.name",value:this._GetAcceleration(),onedit:h=>this._SetAcceleration(h)},{name:"behaviors.platform.properties.deceleration.name",value:this._GetDeceleration(),onedit:h=>this._SetDeceleration(h)},{name:"behaviors.platform.properties.jump-strength.name",
value:this._GetJumpStrength(),onedit:h=>this._SetJumpStrength(h)},{name:"behaviors.platform.properties.gravity.name",value:this._GetGravity(),onedit:h=>this._SetGravity(h)},{name:"behaviors.platform.debugger.gravity-angle",value:e.toDegrees(this._GetGravityAngle()),onedit:h=>this._SetGravityAngle(e.toRadians(h))},{name:"behaviors.platform.properties.max-fall-speed.name",value:this._GetMaxFallSpeed(),onedit:h=>this._SetMaxFallSpeed(h)},{name:"behaviors.platform.debugger.animation-mode",value:["behaviors.platform.debugger.anim-"+
this._animMode]},{name:"behaviors.platform.properties.enabled.name",value:this._IsEnabled(),onedit:h=>this._SetEnabled(h)}]}]}GetScriptInterfaceClass(){return self.IPlatformBehaviorInstance}};const f=new WeakMap,g=new Map([["left",0],["right",1],["jump",2]]);self.IPlatformBehaviorInstance=class extends d{constructor(){super();f.set(this,d._GetInitInst().GetSdkInstance())}fallThrough(){f.get(this)._FallThroughJumpThru()}resetDoubleJump(h){f.get(this)._ResetDoubleJump(!!h)}simulateControl(h){h=g.get(h);
if("number"!==typeof h)throw Error("invalid control");f.get(this)._SimulateControl(h)}get speed(){return f.get(this)._GetSpeed()}get maxSpeed(){return f.get(this)._GetMaxSpeed()}set maxSpeed(h){f.get(this)._SetMaxSpeed(h)}get acceleration(){return f.get(this)._GetAcceleration()}set acceleration(h){f.get(this)._SetAcceleration(h)}get deceleration(){return f.get(this)._GetDeceleration()}set deceleration(h){f.get(this)._SetDeceleration(h)}get jumpStrength(){return f.get(this)._GetJumpStrength()}set jumpStrength(h){f.get(this)._SetJumpStrength(h)}get maxFallSpeed(){return f.get(this)._GetMaxFallSpeed()}set maxFallSpeed(h){f.get(this)._SetMaxFallSpeed(h)}get gravity(){return f.get(this)._GetGravity()}set gravity(h){f.get(this)._SetGravity(h)}get gravityAngle(){return f.get(this)._GetGravityAngle()}set gravityAngle(h){f.get(this)._SetGravityAngle(h)}get isDoubleJumpEnabled(){return f.get(this)._IsDoubleJumpEnabled()}set isDoubleJumpEnabled(h){f.get(this)._SetDoubleJumpEnabled(!!h)}get jumpSustain(){return f.get(this)._GetJumpSustain()}set jumpSustain(h){f.get(this)._SetJumpSustain(h)}get ceilingCollisionMode(){return 0===
f.get(this)._GetCeilingCollisionMode()?"stop":"preserve-momentum"}set ceilingCollisionMode(h){const m=f.get(this);if("stop"===h)m._SetCeilingCollisionMode(0);else if("preserve-momentum"===h)m._SetCeilingCollisionMode(1);else throw Error("invalid mode");}get isOnFloor(){return f.get(this)._CheckIfStandingOnFloor()}isByWall(h){const m=f.get(this);if("left"===h)return m._IsByWall(0);if("right"===h)return m._IsByWall(1);throw Error("invalid side");}get isJumping(){return f.get(this)._IsJumping()}get isFalling(){return f.get(this)._IsFalling()}get vectorX(){return f.get(this)._GetVectorX()}set vectorX(h){f.get(this)._SetVectorX(h)}get vectorY(){return f.get(this)._GetVectorY()}set vectorY(h){f.get(this)._SetVectorY(h)}get isDefaultControls(){return f.get(this)._IsDefaultControls()}set isDefaultControls(h){f.get(this)._SetDefaultControls(!!h)}get isIgnoringInput(){return f.get(this)._IsIgnoreInput()}set isIgnoringInput(h){f.get(this)._SetIgnoreInput(!!h)}get isEnabled(){return f.get(this)._IsEnabled()}set isEnabled(h){f.get(this)._SetEnabled(!!h)}}}"use strict";
{const e=self.C3;e.Behaviors.Platform.Cnds={IsMoving(){return 0!==this._GetVectorX()||0!==this._GetVectorY()},CompareSpeed(d,c){return e.compare(this._GetSpeed(),d,c)},IsOnFloor(){return this._CheckIfStandingOnFloor()},IsByWall(d){return this._IsByWall(d)},IsJumping(){return this._IsJumping()},IsFalling(){return this._IsFalling()},IsDoubleJumpEnabled(){return this._IsDoubleJumpEnabled()},OnJump(){return!0},OnFall(){return!0},OnStop(){return!0},OnMove(){return!0},OnLand(){return!0},IsEnabled(){return this._IsEnabled()}}}"use strict";
{const e=self.C3;e.Behaviors.Platform.Acts={SetMaxSpeed(d){this._SetMaxSpeed(d)},SetAcceleration(d){this._SetAcceleration(d)},SetDeceleration(d){this._SetDeceleration(d)},SetJumpStrength(d){this._SetJumpStrength(d)},SetMaxFallSpeed(d){this._SetMaxFallSpeed(d)},SetGravity(d){this._SetGravity(d)},SimulateControl(d){this._SimulateControl(d)},SetIgnoreInput(d){this._SetIgnoreInput(!!d)},SetVectorX(d){this._SetVectorX(d)},SetVectorY(d){this._SetVectorY(d)},SetGravityAngle(d){this._SetGravityAngle(e.toRadians(d))},
SetEnabled(d){this._SetEnabled(0!==d)},FallThrough(){this._FallThroughJumpThru()},SetDoubleJumpEnabled(d){this._SetDoubleJumpEnabled(0!==d)},SetJumpSustain(d){this._SetJumpSustain(d/1E3)},SetCeilingCollision(d){this._SetCeilingCollisionMode(d)},SetDefaultControls(d){this._SetDefaultControls(d)},ResetDoubleJump(d){this._ResetDoubleJump(d)}}}"use strict";
{const e=self.C3;e.Behaviors.Platform.Exps={Speed(){return this._GetSpeed()},MaxSpeed(){return this._GetMaxSpeed()},Acceleration(){return this._GetAcceleration()},Deceleration(){return this._GetDeceleration()},JumpStrength(){return this._GetJumpStrength()},Gravity(){return this._GetGravity()},GravityAngle(){return e.toDegrees(this._GetGravityAngle())},MaxFallSpeed(){return this._GetMaxFallSpeed()},MovingAngle(){return e.toDegrees(this._GetMovingAngle())},VectorX(){return this._GetVectorX()},VectorY(){return this._GetVectorY()},
JumpSustain(){return 1E3*this._GetJumpSustain()}}}"use strict";{const e=self.C3;e.Behaviors.Bullet=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";{const e=self.C3;e.Behaviors.Bullet.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d)}Release(){super.Release()}OnCreate(){}}}"use strict";
{const e=self.C3,d=self.IBehaviorInstance;e.Behaviors.Bullet.Instance=class extends e.SDKBehaviorInstanceBase{constructor(f,g){super(f);f=this.GetWorldInfo();this._g=this._acc=this._speed=0;this._isStepping=this._setAngle=this._bounceOffSolid=!1;this._isEnabled=!0;this._dy=this._dx=0;this._lastX=f.GetX();this._lastY=f.GetY();this._lastKnownAngle=f.GetAngle();this._travelled=0;this._stepSize=Math.min(Math.abs(f.GetWidth()),Math.abs(f.GetHeight())/2);this._stopStepping=!1;g&&(this._speed=g[0],this._acc=
g[1],this._g=g[2],this._bounceOffSolid=!!g[3],this._setAngle=!!g[4],this._isStepping=!!g[5],this._isEnabled=!!g[6]);g=f.GetAngle();this._dx=Math.cos(g)*this._speed;this._dy=Math.sin(g)*this._speed;this._isEnabled&&(this._StartTicking(),this._bounceOffSolid&&this._StartPostTicking())}Release(){super.Release()}SaveToJson(){const f={dx:this._dx,dy:this._dy,lx:this._lastX,ly:this._lastY,lka:this._lastKnownAngle,t:this._travelled};0!==this._acc&&(f.acc=this._acc);0!==this._g&&(f.g=this._g);this._isStepping&&
(f.st=this._isStepping);this._isEnabled||(f.e=this._isEnabled);this._bounceOffSolid&&(f.bos=this._bounceOffSolid);this._setAngle&&(f.sa=this._setAngle);return f}LoadFromJson(f){this._dx=f.dx;this._dy=f.dy;this._lastX=f.lx;this._lastY=f.ly;this._lastKnownAngle=f.lka;this._travelled=f.t;this._acc=f.hasOwnProperty("acc")?f.acc:0;this._g=f.hasOwnProperty("g")?f.g:0;this._isStepping=f.hasOwnProperty("st")?f.st:!1;this._bounceOffSolid=f.hasOwnProperty("bos")?f.bos:!1;this._setAngle=f.hasOwnProperty("sa")?
f.sa:!1;this._SetEnabled(f.hasOwnProperty("e")?f.e:!0)}Tick(){if(this._isEnabled){var f=this._runtime.GetDt(this._inst),g=this._inst.GetWorldInfo();if(g.GetAngle()!==this._lastKnownAngle){var h=g.GetAngle();if(this._setAngle){var m=e.distanceTo(0,0,this._dx,this._dy);this._dx=Math.cos(h)*m;this._dy=Math.sin(h)*m}this._lastKnownAngle=h}h=m=0;if(0!==this._acc){let k=e.distanceTo(0,0,this._dx,this._dy),a;a=0===this._dx&&0===this._dy?g.GetAngle():e.angleTo(0,0,this._dx,this._dy);k+=this._acc*f;m=Math.cos(a)*
this._acc;h=Math.sin(a)*this._acc;0>k&&(h=m=k=0);this._dx=Math.cos(a)*k;this._dy=Math.sin(a)*k}0!==this._g&&(this._dy+=this._g*f,h+=this._g);this._lastX=g.GetX();this._lastY=g.GetY();if(0!==this._dx||0!==this._dy)m=this._dx*f+.5*m*f*f,f=this._dy*f+.5*h*f*f,h=e.distanceTo(0,0,m,f),this._MoveBy(m,f,h),this._travelled+=h,!this._setAngle||0===m&&0===f||(f=e.angleTo(0,0,m,f),g.SetAngle(f),this._lastKnownAngle=g.GetAngle()),g.SetBboxChanged()}}_MoveBy(f,g,h){const m=this.GetWorldInfo();if(!this._isStepping||
h<=this._stepSize)m.OffsetXY(f,g),m.SetBboxChanged(),this._isStepping&&this.Trigger(e.Behaviors.Bullet.Cnds.OnStep);else{this._stopStepping=!1;var k=m.GetX(),a=m.GetY(),b=k+f,l=a+g;g=e.angleTo(0,0,f,g);f=Math.cos(g)*this._stepSize;g=Math.sin(g)*this._stepSize;h=Math.floor(h/this._stepSize);for(let p=1;p<=h;++p)if(m.SetXY(k+f*p,a+g*p),m.SetBboxChanged(),this.Trigger(e.Behaviors.Bullet.Cnds.OnStep),this._inst.IsDestroyed()||this._stopStepping)return;m.SetXY(b,l);m.SetBboxChanged();this.Trigger(e.Behaviors.Bullet.Cnds.OnStep)}}PostTick(){if(this._isEnabled&&
this._bounceOffSolid&&(0!==this._dx||0!==this._dy)){var f=this._runtime.GetDt(this._inst),g=this._inst.GetWorldInfo(),h=this._runtime.GetCollisionEngine(),m=h.TestOverlapSolid(this._inst);if(m){h.RegisterCollision(this._inst,m);m=e.distanceTo(0,0,this._dx,this._dy);const k=h.CalculateBounceAngle(this._inst,this._lastX,this._lastY);this._dx=Math.cos(k)*m;this._dy=Math.sin(k)*m;g.OffsetXY(this._dx*f,this._dy*f);g.SetBboxChanged();this._setAngle&&(g.SetAngle(k),this._lastKnownAngle=g.GetAngle(),g.SetBboxChanged());
h.PushOutSolid(this._inst,this._dx/m,this._dy/m,Math.max(2.5*m*f,30))||h.PushOutSolidNearest(this._inst,100)}}}GetPropertyValueByIndex(f){switch(f){case 0:return this._GetSpeed();case 1:return this._GetAcceleration();case 2:return this._GetGravity();case 4:return this._setAngle;case 5:return this._isStepping;case 6:return this._IsEnabled()}}SetPropertyValueByIndex(f,g){switch(f){case 0:this._SetSpeed(g);break;case 1:this._acc=g;break;case 2:this._g=g;break;case 4:this._setAngle=!!g;break;case 5:this._isStepping=
!!g;break;case 6:this._SetEnabled(!!g)}}_SetSpeed(f){const g=e.angleTo(0,0,this._dx,this._dy);this._dx=Math.cos(g)*f;this._dy=Math.sin(g)*f}_GetSpeed(){return e.round6dp(e.distanceTo(0,0,this._dx,this._dy))}_SetAcceleration(f){this._acc=f}_GetAcceleration(){return this._acc}_SetGravity(f){this._g=f}_GetGravity(){return this._g}_SetAngleOfMotion(f){const g=e.distanceTo(0,0,this._dx,this._dy);this._dx=Math.cos(f)*g;this._dy=Math.sin(f)*g}_GetAngleOfMotion(){return e.angleTo(0,0,this._dx,this._dy)}_SetBounceOffSolids(f){f=
!!f;this._bounceOffSolid!==f&&(this._bounceOffSolid=f,this._isEnabled&&(this._bounceOffSolid?this._StartPostTicking():this._StopPostTicking()))}_IsBounceOffSolids(){return this._bounceOffSolid}_SetDistanceTravelled(f){this._travelled=f}_GetDistanceTravelled(){return this._travelled}_SetEnabled(f){(this._isEnabled=!!f)?(this._StartTicking(),this._bounceOffSolid&&this._StartPostTicking()):(this._StopTicking(),this._StopPostTicking())}_IsEnabled(){return this._isEnabled}GetDebuggerProperties(){return[{title:"$"+
this.GetBehaviorType().GetName(),properties:[{name:"behaviors.bullet.debugger.vector-x",value:this._dx,onedit:f=>this._dx=f},{name:"behaviors.bullet.debugger.vector-y",value:this._dy,onedit:f=>this._dy=f},{name:"behaviors.bullet.properties.speed.name",value:this._GetSpeed(),onedit:f=>this._SetSpeed(f)},{name:"behaviors.bullet.debugger.angle-of-motion",value:e.toDegrees(this._GetAngleOfMotion())},{name:"behaviors.bullet.properties.gravity.name",value:this._GetGravity(),onedit:f=>this._SetGravity(f)},
{name:"behaviors.bullet.properties.acceleration.name",value:this._GetAcceleration(),onedit:f=>this._SetAcceleration(f)},{name:"behaviors.bullet.debugger.distance-travelled",value:this._GetDistanceTravelled()},{name:"behaviors.bullet.properties.enabled.name",value:this._IsEnabled(),onedit:f=>this._SetEnabled(f)}]}]}GetScriptInterfaceClass(){return self.IBulletBehaviorInstance}};const c=new WeakMap;self.IBulletBehaviorInstance=class extends d{constructor(){super();c.set(this,d._GetInitInst().GetSdkInstance())}get speed(){return c.get(this)._GetSpeed()}set speed(f){c.get(this)._SetSpeed(f)}get acceleration(){return c.get(this)._GetAcceleration()}set acceleration(f){c.get(this)._SetAcceleration(f)}get gravity(){return c.get(this)._GetGravity()}set gravity(f){c.get(this)._SetGravity(f)}get angleOfMotion(){return c.get(this)._GetAngleOfMotion()}set angleOfMotion(f){c.get(this)._SetAngleOfMotion(f)}get bounceOffSolids(){return c.get(this)._IsBounceOffSolids()}set bounceOffSolids(f){c.get(this)._SetBounceOffSolids(!!f)}get distanceTravelled(){return c.get(this)._GetDistanceTravelled()}set distanceTravelled(f){c.get(this)._SetDistanceTravelled(f)}get isEnabled(){return c.get(this)._IsEnabled()}set isEnabled(f){c.get(this)._SetEnabled(f)}}}"use strict";
{const e=self.C3;e.Behaviors.Bullet.Cnds={CompareSpeed(d,c){return e.compare(Math.sqrt(this._dx*this._dx+this._dy*this._dy),d,c)},CompareTravelled(d,c){return e.compare(this._GetDistanceTravelled(),d,c)},OnStep(){return!0},IsEnabled(){return this._IsEnabled()}}}"use strict";
{const e=self.C3;e.Behaviors.Bullet.Acts={SetSpeed(d){this._SetSpeed(d)},SetAcceleration(d){this._SetAcceleration(d)},SetGravity(d){this._SetGravity(d)},SetAngleOfMotion(d){this._SetAngleOfMotion(e.toRadians(d))},Bounce(d){if(d&&(d=d.GetFirstPicked(this._inst))){var c=this._inst.GetWorldInfo(),f=this._runtime.GetCollisionEngine(),g=this._runtime.GetDt(this._inst),h=e.distanceTo(0,0,this._dx,this._dy),m=f.CalculateBounceAngle(this._inst,this._lastX,this._lastY,d);this._dx=Math.cos(m)*h;this._dy=Math.sin(m)*
h;c.OffsetXY(this._dx*g,this._dy*g);c.SetBboxChanged();this._setAngle&&(c.SetAngle(m),this._lastKnownAngle=c.GetAngle(),c.SetBboxChanged());0!==h&&(this._bounceOffSolid?f.PushOutSolid(this._inst,this._dx/h,this._dy/h,Math.max(2.5*h*g,30))||f.PushOutSolidNearest(this._inst,100):f.PushOut(this._inst,this._dx/h,this._dy/h,Math.max(2.5*h*g,30),d))}},SetBounceOffSolids(d){this._SetBounceOffSolids(d)},SetDistanceTravelled(d){this._SetDistanceTravelled(d)},SetEnabled(d){this._SetEnabled(d)},StopStepping(){this._stopStepping=
!0}}}"use strict";{const e=self.C3;e.Behaviors.Bullet.Exps={Speed(){return this._GetSpeed()},Acceleration(){return this._GetAcceleration()},AngleOfMotion(){return e.toDegrees(this._GetAngleOfMotion())},DistanceTravelled(){return this._GetDistanceTravelled()},Gravity(){return this._GetGravity()}}}"use strict";{const e=self.C3;e.Behaviors.LOS=class extends e.SDKBehaviorBase{constructor(d){super(d)}Release(){super.Release()}}}"use strict";
{const e=self.C3;e.Behaviors.LOS.Type=class extends e.SDKBehaviorTypeBase{constructor(d){super(d);this._obstacleTypes=[]}Release(){e.clearArray(this._obstacleTypes);super.Release()}OnCreate(){}GetObstacleTypes(){return this._obstacleTypes}FindLOSBehavior(d){const c=this.GetBehaviorType();for(const f of d.GetBehaviorInstances())if(f.GetBehaviorType()===c)return f.GetSdkInstance();return null}}}"use strict";
{const e=self.C3,d=[];e.Behaviors.LOS.Instance=class extends e.SDKBehaviorInstanceBase{constructor(c,f){super(c);this._obstacleMode=0;this._range=1E4;this._cone=e.toRadians(360);this._useCollisionCells=!0;this._ray=new e.Ray;f&&(this._obstacleMode=f[0],this._range=f[1],this._cone=e.toRadians(f[2]),this._useCollisionCells=f[3])}Release(){super.Release()}SaveToJson(){return{r:this._range,c:this._cone,om:this._obstacleMode,ucc:this._useCollisionCells,t:this.GetSdkType().GetObstacleTypes().map(c=>c.GetSID())}}LoadFromJson(c){this._range=
c.r;this._cone=c.c;this._obstacleMode=c.om||0;this._useCollisionCells=!!c.ucc;const f=this.GetSdkType().GetObstacleTypes();e.clearArray(f);for(const g of c.t)(c=this._runtime.GetObjectClassBySID(g))&&f.push(c)}HasLOSToInstance(c,f){const g=c.GetUID(),[h,m]=c.GetImagePoint(f);return this.HasLOSTo(h,m)||this._ray.hitUid===g}HasLOSTo(c,f){const g=this.GetWorldInfo();let h=g.GetAngle();0>g.GetWidth()&&(h+=Math.PI);return this.HasLOSBetweenPositions(g.GetX(),g.GetY(),h,c,f)}HasLOSBetweenPositions(c,f,
g,h,m){var k=this._range;if(e.distanceSquared(c,f,h,m)>k*k)return!1;k=e.angleTo(c,f,h,m);return e.angleDiff(g,k)>this._cone/2?!1:!this.CastRay(c,f,h,m,this._useCollisionCells).DidCollide()}_GetCollisionCandidates(c,f){if(f){f=this.GetWorldInfo().GetLayer();var g=this._runtime.GetCollisionEngine();0===this._obstacleMode?g.GetSolidCollisionCandidates(f,c.rect,d):g.GetObjectClassesCollisionCandidates(f,this._GetObstacleTypes(),c.rect,d);return d}if(0===this._obstacleMode)return(c=this._runtime.GetSolidBehavior())?
c.GetInstances():d;for(g of this._GetObstacleTypes())e.appendArray(d,g.GetInstances());return d}_GetObstacleTypes(){return this.GetSdkType().GetObstacleTypes()}CastRay(c,f,g,h,m){c=this._ray.Set(c,f,g,h);m=this._GetCollisionCandidates(c,m);f=this._runtime.GetCollisionEngine();g=0===this._obstacleMode;h=this._inst;for(let k=0,a=m.length;k<a;++k){const b=m[k];b!==h&&(g&&!f.IsSolidCollisionAllowed(b,h)||f.TestRayIntersectsInstance(b,c))}c.Complete();e.clearArray(d);return c}GetPropertyValueByIndex(c){switch(c){case 0:return this._obstacleMode;
case 1:return this._range;case 2:return e.toDegrees(this._cone);case 3:return this._useCollisionCells}}SetPropertyValueByIndex(c,f){switch(c){case 0:this._obstacleMode=f;break;case 1:this._range=f;break;case 2:this._cone=e.toRadians(f);break;case 3:this._useCollisionCells=!!f}}GetDebuggerProperties(){return[{title:"$"+this.GetBehaviorType().GetName(),properties:[{name:"behaviors.los.properties.range.name",value:this._range,onedit:c=>this._range=c},{name:"behaviors.los.properties.cone-of-view.name",
value:e.toDegrees(this._cone),onedit:c=>this._cone=e.toRadians(c)}]}]}}}"use strict";
{const e=self.C3,d=new Set,c=new Set;e.Behaviors.LOS.Cnds={HasLOSToPosition(f,g){return this.HasLOSTo(f,g)},RayIntersected(){return this._ray.DidCollide()},HasLOSBetweenPositions(f,g,h,m,k){return this.HasLOSBetweenPositions(f,g,e.toRadians(h),m,k)},HasLOSToObject(f,g){if(!f)return!1;var h=this._runtime.GetCurrentCondition();const m=h.GetEventBlock().IsOrBlock();var k=h.GetRuntime();const a=h.GetObjectClass().GetCurrentSol();f=f.GetCurrentSol();let b=a.GetInstances(),l=f.GetInstances();a.IsSelectAll()?
e.clearArray(a._GetOwnElseInstances()):m&&(b=k.IsCurrentConditionFirst()&&!a._GetOwnElseInstances().length&&a._GetOwnInstances().length?a._GetOwnInstances():a._GetOwnElseInstances());f.IsSelectAll()?e.clearArray(f._GetOwnElseInstances()):m&&(l=k.IsCurrentConditionFirst()&&!f._GetOwnElseInstances().length&&f._GetOwnInstances().length?f._GetOwnInstances():f._GetOwnElseInstances());h=h.IsInverted();k=this.GetSdkType();for(const p of b){let r=!1;const t=k.FindLOSBehavior(p);if(0===l.length)h&&(r=!0);
else for(const u of l)p!==u&&e.xor(t.HasLOSToInstance(u,g),h)&&(r=!0,c.add(u));r&&d.add(p)}m?(b===a._GetOwnElseInstances()?a.TransferElseInstancesToOwn(d):(a.AddElseInstances(d,b),a.SetSetPicked(d)),l===f._GetOwnElseInstances()?f.TransferElseInstancesToOwn(c):(f.AddElseInstances(c,l),f.SetSetPicked(c))):(a.SetSetPicked(d),f.SetSetPicked(c));d.clear();c.clear();return a.HasAnyInstances()}}}"use strict";
{const e=self.C3;e.Behaviors.LOS.Acts={SetRange(d){this._range=d},SetCone(d){this._cone=e.toRadians(d)},CastRay(d,c,f,g,h){this.CastRay(d,c,f,g,h)},AddObstacle(d){const c=this.GetSdkType().GetObstacleTypes();if(!c.includes(d)){for(const f of c)if(f.IsFamily()&&f.FamilyHasMember(d))return;c.push(d)}},ClearObstacles(){e.clearArray(this.GetSdkType().GetObstacleTypes())}}}"use strict";
{const e=self.C3;e.Behaviors.LOS.Exps={Range(){return this._range},ConeOfView(){return e.toDegrees(this._cone)},HitX(){const d=this._ray;return d.DidCollide()?d.hitX:0},HitY(){const d=this._ray;return d.DidCollide()?d.hitY:0},HitDistance(){const d=this._ray;return d.DidCollide()?d.distance:0},HitUID(){const d=this._ray;return d.DidCollide()?d.hitUid:-1},NormalX(d){const c=this._ray;return c.DidCollide()?c.hitX+d*c.normalX:0},NormalY(d){const c=this._ray;return c.DidCollide()?c.hitY+d*c.normalY:0},
NormalAngle(){const d=this._ray;return d.DidCollide()?e.toDegrees(d.hitNormal):0},ReflectionX(d){const c=this._ray;return c.DidCollide()?c.hitX+d*c.reflectionX:0},ReflectionY(d){const c=this._ray;return c.DidCollide()?c.hitY+d*c.reflectionY:0},ReflectionAngle(){const d=this._ray;return d.DidCollide()?e.toDegrees(Math.atan2(d.reflectionY,d.reflectionX)):0}}}"use strict";
{const e=self.C3;self.C3_GetObjectRefTable=function(){return[e.Plugins.Arr,e.Plugins.Mouse,e.Plugins.Keyboard,e.Plugins.LocalStorage,e.Plugins.Function,e.Plugins.Browser,e.Plugins.Audio,e.Plugins.video,e.Plugins.UserMedia,e.Plugins.GameRecorder,e.Plugins.Touch,e.Plugins.AJAX,e.Plugins.Json,e.Plugins.gamepad,e.Plugins.Dictionary,e.Plugins.Sprite,e.Behaviors.Pin,e.Behaviors.Sin,e.Behaviors.Rotate,e.Behaviors.Tween,e.Behaviors.Timer,e.Plugins.Tilemap,e.Plugins.TiledBg,e.Plugins.Spritefont2,e.Behaviors.Flash,
e.Plugins.NinePatch,e.Plugins.TextBox,e.Behaviors.Fade,e.Plugins.List,e.Behaviors.jumpthru,e.Behaviors.DragnDrop,e.Behaviors.bound,e.Plugins.Button,e.Plugins.iframe,e.Behaviors.Orbit,e.Behaviors.scrollto,e.Behaviors.solid,e.Behaviors.EightDir,e.Behaviors.Platform,e.Behaviors.Bullet,e.Behaviors.LOS,e.Plugins.System.Cnds.EveryTick,e.Plugins.TiledBg.Acts.SetPos,e.Plugins.TiledBg.Exps.X,e.Plugins.System.Exps.dt,e.Plugins.TiledBg.Exps.Y,e.Plugins.TiledBg.Cnds.CompareY,e.Plugins.TiledBg.Acts.SetY,e.Plugins.TiledBg.Cnds.CompareX,
e.Plugins.TiledBg.Acts.SetX,e.Plugins.System.Cnds.OnLayoutStart,e.Plugins.System.Acts.SetVar,e.Plugins.Audio.Acts.StopAll,e.Plugins.Audio.Acts.Play,e.Plugins.System.Cnds.ForEach,e.Plugins.Spritefont2.Cnds.CompareInstanceVar,e.Plugins.Arr.Cnds.CompareX,e.Plugins.Spritefont2.Acts.SetText,e.Plugins.Arr.Exps.At,e.Plugins.Touch.Cnds.OnTouchObject,e.Behaviors.Tween.Acts.TweenValue,e.Plugins.AJAX.Acts.Request,e.Plugins.Sprite.Acts.SetAnimFrame,e.Plugins.System.Cnds.PickAll,e.Plugins.Browser.Cnds.IsOnline,
e.Plugins.System.Cnds.Else,e.Plugins.System.Cnds.CompareVar,e.Plugins.System.Acts.GoToLayoutByName,e.Behaviors.Tween.Cnds.IsPlaying,e.Plugins.System.Acts.ScrollX,e.Behaviors.Tween.Exps.Value,e.Plugins.TiledBg.Acts.SetInstanceVar,e.Plugins.Sprite.Cnds.CompareInstanceVar,e.Plugins.System.Acts.GoToLayout,e.Plugins.Mouse.Cnds.IsOverObject,e.Plugins.Spritefont2.Acts.SetVisible,e.Plugins.AJAX.Cnds.OnComplete,e.Plugins.System.Cnds.Repeat,e.Plugins.System.Exps.tokencount,e.Plugins.AJAX.Exps.LastData,e.Plugins.System.Cnds.Compare,
e.Plugins.Spritefont2.Acts.AppendText,e.Plugins.System.Exps.tokenat,e.Plugins.System.Acts.AddVar,e.Plugins.System.Cnds.OnLayoutEnd,e.Plugins.Sprite.Cnds.PickByUID,e.Plugins.Sprite.Exps.UID,e.Plugins.NinePatch.Acts.SetInstanceVar,e.Plugins.Sprite.Acts.SetBoolInstanceVar,e.Plugins.System.Acts.CreateObject,e.Plugins.TiledBg.Acts.SetSize,e.Plugins.TiledBg.Acts.SetOpacity,e.Behaviors.Tween.Acts.TweenOneProperty,e.Plugins.NinePatch.Acts.SetSize,e.Plugins.Arr.Acts.SetX,e.Plugins.Arr.Acts.SetXY,e.Plugins.LocalStorage.Acts.SetItem,
e.Plugins.Arr.Exps.AsJSON,e.Plugins.System.Acts.SetBoolVar,e.Plugins.Arr.Cnds.CompareXY,e.Plugins.AJAX.Acts.Post,e.Behaviors.Pin.Acts.PinByProperties,e.Plugins.Sprite.Acts.SetAnim,e.Plugins.Sprite.Acts.SetInstanceVar,e.Plugins.System.Cnds.CompareBoolVar,e.Plugins.System.Acts.Wait,e.Behaviors.Tween.Cnds.OnTweensFinished,e.Plugins.TextBox.Acts.SetReadOnly,e.Plugins.TextBox.Acts.SetText,e.Plugins.TextBox.Acts.AppendText,e.Plugins.System.Acts.RestartLayout,e.Plugins.System.Cnds.IsGroupActive,e.Plugins.Function.Acts.CallFunction,
e.Plugins.Sprite.Acts.SetVisible,e.Plugins.Sprite.Acts.Destroy,e.Plugins.Audio.Cnds.IsTagPlaying,e.Plugins.Audio.Acts.SetPaused,e.Plugins.System.Cnds.TriggerOnce,e.Plugins.Sprite.Exps.Count,e.Behaviors.Flash.Cnds.IsFlashing,e.Behaviors.Flash.Acts.Flash,e.Plugins.Audio.Cnds.OnEnded,e.Plugins.Audio.Acts.SetPlaybackRate,e.Plugins.Sprite.Cnds.OnDestroyed,e.Plugins.Sprite.Acts.AddInstanceVar,e.Plugins.Function.Cnds.OnFunction,e.Behaviors.Tween.Acts.SetTweensPlaybackRate,e.Plugins.Spritefont2.Acts.SetDefaultColor,
e.Behaviors.Flash.Acts.StopFlashing,e.Plugins.Sprite.Acts.Spawn,e.Plugins.Sprite.Exps.LayerNumber,e.Plugins.Sprite.Acts.MoveToBottom,e.Plugins.Sprite.Acts.SetScale,e.Plugins.Sprite.Acts.ZMoveToObject,e.Behaviors.Platform.Acts.SetVectorY,e.Plugins.System.Exps.random,e.Behaviors.Platform.Acts.SetVectorX,e.Behaviors.Platform.Acts.SetEnabled,e.Plugins.Sprite.Exps.X,e.Plugins.Arr.Acts.Clear,e.Plugins.Arr.Acts.SetSize,e.Plugins.Arr.Cnds.ArrForEach,e.Plugins.Arr.Exps.CurX,e.Plugins.Arr.Exps.CurY,e.Plugins.Sprite.Cnds.IsOverlapping,
e.Behaviors.Tween.Acts.TweenTwoProperties,e.Plugins.Sprite.Exps.Y,e.Plugins.Sprite.Acts.SetAnimSpeed,e.Plugins.Sprite.Acts.MoveToTop,e.Plugins.Spritefont2.Acts.SetInstanceVar,e.Plugins.Sprite.Cnds.OnCollision,e.Plugins.System.Cnds.Every,e.Behaviors.Platform.Cnds.OnJump,e.Plugins.Keyboard.Cnds.IsKeyCodeDown,e.Plugins.Sprite.Cnds.IsAnimPlaying,e.Behaviors.Timer.Acts.StartTimer,e.Plugins.Sprite.Cnds.IsVisible,e.Plugins.Sprite.Exps.LayerName,e.Plugins.Spritefont2.Acts.Destroy,e.Plugins.System.Acts.SubVar,
e.Plugins.System.Exps.choose,e.Plugins.System.Exps.zeropad,e.Behaviors.Timer.Cnds.OnTimer,e.Behaviors.Timer.Acts.StopTimer,e.Plugins.System.Cnds.While,e.Plugins.Sprite.Cnds.CompareX,e.Plugins.System.Exps.scrollx,e.Plugins.Sprite.Acts.SetMirrored,e.Plugins.Sprite.Acts.SetAngle,e.Behaviors.Sin.Acts.SetEnabled,e.Plugins.Sprite.Acts.SetPos,e.Behaviors.Platform.Acts.SetMaxSpeed,e.Plugins.Sprite.Cnds.IsMirrored,e.Plugins.Sprite.Cnds.OnFrameChanged,e.Plugins.Sprite.Acts.SetCollisions,e.Plugins.Sprite.Cnds.IsBoolInstanceVarSet,
e.Plugins.Sprite.Cnds.CompareY,e.Plugins.Mouse.Acts.SetCursorSprite,e.Plugins.System.Acts.SetLayerParallax,e.Plugins.Sprite.Acts.SetSize,e.Behaviors.Pin.Acts.Pin,e.Plugins.Sprite.Acts.SetOpacity,e.Plugins.Sprite.Exps.Width,e.Plugins.Sprite.Exps.Height,e.Plugins.Sprite.Acts.AddChild,e.Plugins.Audio.Acts.PlayAtObject,e.Plugins.Audio.Acts.SetListenerObject,e.Plugins.Sprite.Cnds.OnCreated,e.Plugins.Sprite.Cnds.IsCollisionEnabled,e.Plugins.Sprite.Acts.MoveAtAngle,e.Behaviors.Platform.Exps.MaxSpeed,e.Plugins.Sprite.Acts.SetX,
e.Plugins.Sprite.Acts.SetY,e.Plugins.Sprite.Acts.SubInstanceVar,e.Plugins.Spritefont2.Exps.Y,e.Plugins.Spritefont2.Acts.SetY,e.Plugins.Spritefont2.Acts.SetScale,e.Plugins.Sprite.Exps.AnimationSpeed,e.Plugins.Mouse.Exps.X,e.Plugins.Mouse.Exps.Y,e.Behaviors.Tween.Acts.StopTweens,e.Plugins.Sprite.Acts.SetWidth,e.Plugins.System.Acts.SetGroupActive,e.Behaviors.solid.Acts.SetEnabled,e.Plugins.Browser.Exps.ExecJS,e.Plugins.System.Exps.mid,e.Plugins.System.Acts.SetLayerBackground,e.Plugins.video.Acts.SetSource,
e.Plugins.video.Acts.SetVolume,e.Plugins.AJAX.Cnds.OnAnyError,e.Plugins.AJAX.Acts.RequestFile,e.Plugins.Json.Acts.Parse,e.Plugins.Arr.Cnds.CompareSize,e.Plugins.Json.Cnds.HasKey,e.Plugins.Json.Exps.Get,e.Plugins.Browser.Acts.ConsoleLog,e.Plugins.video.Cnds.IsOnLayer,e.Plugins.video.Acts.Play,e.Plugins.video.Cnds.OnPlaybackEvent,e.Plugins.Keyboard.Cnds.OnKey,e.Plugins.Browser.Acts.GoToURLWindow,e.Plugins.TiledBg.Cnds.IsVisible,e.Plugins.TiledBg.Acts.Destroy,e.Plugins.Sprite.Cnds.IsOnScreen,e.Plugins.NinePatch.Exps.Count,
e.Plugins.Sprite.Exps.ImageWidth,e.Plugins.System.Acts.CreateObjectByName,e.Plugins.Sprite.Exps.AnimationFrame,e.Plugins.Audio.Acts.PlayByName,e.Plugins.Sprite.Exps.ImageHeight,e.Behaviors.Sin.Acts.SetMagnitude,e.Behaviors.Sin.Acts.SetPeriod,e.Plugins.NinePatch.Exps.LayerNumber,e.Plugins.NinePatch.Exps.X,e.Plugins.NinePatch.Exps.Y,e.Plugins.NinePatch.Exps.Width,e.Plugins.NinePatch.Exps.Height,e.Behaviors.DragnDrop.Cnds.OnDragStart,e.Behaviors.DragnDrop.Cnds.OnDrop,e.Behaviors.Pin.Acts.Unpin,e.Plugins.TextBox.Acts.Destroy,
e.Plugins.iframe.Acts.Destroy,e.Plugins.NinePatch.Acts.Destroy,e.Plugins.NinePatch.Cnds.CompareInstanceVar,e.Plugins.Function.Cnds.CompareParam,e.Plugins.System.Exps.replace,e.Plugins.System.Exps.projectversion,e.Plugins.Spritefont2.Acts.SetSize,e.Plugins.Spritefont2.Acts.SetBoolInstanceVar,e.Plugins.Spritefont2.Acts.SetEffectParam,e.Plugins.TextBox.Acts.SetSize,e.Plugins.TextBox.Acts.SetInstanceVar,e.Plugins.TextBox.Acts.SetPlaceholder,e.Plugins.Audio.Cnds.IsSilent,e.Plugins.Browser.Cnds.IsFullscreen,
e.Plugins.Audio.Acts.SetSilent,e.Plugins.Browser.Acts.RequestFullScreen,e.Plugins.Browser.Acts.CancelFullScreen,e.Plugins.System.Acts.SetMinimumFramerate,e.Plugins.TextBox.Cnds.OnTextChanged,e.Plugins.TextBox.Cnds.CompareText,e.Plugins.System.Exps.left,e.Plugins.TextBox.Exps.Text,e.Plugins.Spritefont2.Cnds.OnCreated,e.Plugins.Spritefont2.Acts.SetHAlign,e.Plugins.NinePatch.Acts.SetWidth,e.Plugins.iframe.Acts.SetSize,e.Plugins.iframe.Acts.NavigateURL,e.Plugins.Browser.Cnds.OnUpdateFound,e.Plugins.Tilemap.Cnds.CompareInstanceVar,
e.Plugins.Tilemap.Acts.SetPos,e.Plugins.Touch.Cnds.IsInTouch,e.Plugins.Keyboard.Cnds.IsKeyDown,e.Plugins.Mouse.Cnds.IsButtonDown,e.Plugins.Touch.Cnds.IsTouchingObject,e.Plugins.Touch.Exps.X,e.Plugins.Touch.Exps.Y,e.Plugins.NinePatch.Acts.SetBoolInstanceVar,e.Plugins.NinePatch.Cnds.IsBoolInstanceVarSet,e.Plugins.Tilemap.Acts.EraseTile,e.Plugins.Tilemap.Acts.SetTile,e.Plugins.System.Exps.int,e.Plugins.Touch.Cnds.OnHoldGesture,e.Plugins.Touch.Cnds.OnTouchEnd,e.Plugins.Function.Exps.Param,e.Plugins.Sprite.Exps.AnimationName,
e.Plugins.Sprite.Cnds.CompareAnimSpeed,e.Plugins.Sprite.Exps.Angle,e.Plugins.Sprite.Acts.MoveToLayer,e.Behaviors.Fade.Acts.StartFade,e.Plugins.Spritefont2.Cnds.IsBoolInstanceVarSet,e.Plugins.Tilemap.Cnds.CompareTileAt,e.Plugins.NinePatch.Acts.ToggleBoolInstanceVar,e.Plugins.Mouse.Cnds.OnRelease,e.Plugins.NinePatch.Cnds.IsOnLayer,e.Plugins.NinePatch.Acts.SetOpacity,e.Plugins.Keyboard.Cnds.OnKeyReleased,e.Plugins.System.Cnds.PickLastCreated,e.Plugins.Sprite.Acts.SetFlipped,e.Plugins.Sprite.Exps.AnimationFrameCount,
e.Plugins.Sprite.Cnds.CompareFrame,e.Behaviors.Pin.Cnds.IsPinned,e.Plugins.Spritefont2.Exps.Text,e.Plugins.System.Exps.len,e.Plugins.Spritefont2.Acts.SetOpacity,e.Plugins.System.Exps.scrolly,e.Behaviors.Platform.Cnds.IsOnFloor,e.Behaviors.Platform.Exps.VectorY,e.Plugins.System.Acts.ScrollY,e.Plugins.LocalStorage.Cnds.OnItemSet,e.Plugins.TiledBg.Cnds.CompareInstanceVar,e.Plugins.Browser.Acts.Reload,e.Plugins.Keyboard.Cnds.OnKeyCode,e.Plugins.System.Acts.SnapshotCanvas,e.Plugins.System.Cnds.OnCanvasSnapshot,
e.Plugins.Browser.Acts.InvokeDownload,e.Plugins.System.Exps.canvassnapshot,e.Plugins.LocalStorage.Cnds.OnError,e.Plugins.Browser.Acts.Alert,e.Plugins.Audio.Acts.Seek,e.Plugins.NinePatch.Acts.SetPos,e.Plugins.List.Acts.Destroy,e.Plugins.Button.Acts.Destroy,e.Plugins.Sprite.Acts.SetEffectParam,e.Plugins.System.Exps.rgb,e.Plugins.Function.Exps.ReturnValue,e.Plugins.List.Acts.Clear,e.Plugins.List.Acts.SetInstanceVar,e.Plugins.List.Acts.AddItem,e.Plugins.List.Cnds.CompareInstanceVar,e.Plugins.List.Acts.Select,
e.Plugins.TextBox.Cnds.CompareInstanceVar,e.Plugins.List.Acts.SetSize,e.Plugins.System.Exps.loopindex,e.Plugins.NinePatch.Cnds.OnCreated,e.Plugins.System.Exps.lowercase,e.Plugins.NinePatch.Acts.SetEffectEnabled,e.Plugins.NinePatch.Acts.AddInstanceVar,e.Plugins.NinePatch.Acts.SetEffectParam,e.Plugins.List.Cnds.OnSelectionChanged,e.Plugins.List.Exps.SelectedIndex,e.Plugins.Arr.Exps.Width,e.Plugins.List.Cnds.CompareSelection,e.Plugins.System.Exps.right,e.Plugins.video.Acts.Destroy,e.Plugins.Audio.Acts.SetVolume,
e.Plugins.Audio.Acts.RemoveEffects,e.Plugins.Sprite.Acts.ToggleBoolInstanceVar,e.Plugins.Sprite.Cnds.OnURLLoaded,e.Plugins.Sprite.Acts.LoadURL,e.Plugins.TextBox.Acts.SetBoolInstanceVar,e.Plugins.TextBox.Cnds.IsBoolInstanceVarSet,e.Plugins.video.Acts.SetPlaybackTime,e.Plugins.video.Exps.Duration,e.Plugins.video.Cnds.IsPlaying,e.Plugins.TextBox.Exps.Count,e.Plugins.Function.Acts.SetReturnValue,e.Plugins.Mouse.Cnds.OnObjectClicked,e.Plugins.Arr.Acts.JSONLoad,e.Plugins.Arr.Cnds.CompareCurrent,e.Plugins.Arr.Acts.Delete,
e.Plugins.Spritefont2.Acts.SetWidth,e.Plugins.Spritefont2.Acts.SetX,e.Plugins.Spritefont2.Exps.X,e.Plugins.Tilemap.Acts.MoveToLayer,e.Plugins.Tilemap.Acts.MoveToTop,e.Plugins.Spritefont2.Cnds.IsOnLayer,e.Plugins.Spritefont2.Acts.MoveToTop,e.Plugins.Sprite.Cnds.CompareOpacity,e.Plugins.Tilemap.Cnds.CompareOpacity,e.Plugins.Tilemap.Acts.SetOpacity,e.Plugins.Sprite.Exps.Opacity,e.Plugins.NinePatch.Cnds.IsOnScreen,e.Behaviors.Sin.Acts.SetPhase,e.Plugins.TiledBg.Acts.MoveToBottom,e.Plugins.System.Cnds.LayerVisible,
e.Plugins.System.Acts.SetLayerVisible,e.Plugins.NinePatch.Acts.SetVisible,e.Plugins.NinePatch.Acts.SetY,e.Plugins.System.Acts.Scroll,e.Plugins.System.Acts.SetCanvasSize,e.Plugins.System.Acts.SetTimescale,e.Plugins.LocalStorage.Acts.CheckItemExists,e.Plugins.TextBox.Acts.SetVisible,e.Plugins.LocalStorage.Cnds.OnItemExists,e.Plugins.LocalStorage.Exps.ItemValue,e.Plugins.Touch.Cnds.OnTapGestureObject,e.Plugins.TextBox.Cnds.OnDoubleClicked,e.Plugins.LocalStorage.Acts.RemoveItem,e.Plugins.Browser.Acts.InvokeDownloadString,
e.Behaviors.Fade.Acts.SetFadeInTime,e.Behaviors.Fade.Acts.SetFadeOutTime,e.Plugins.Audio.Acts.SetMuted,e.Plugins.Mouse.Acts.SetCursor,e.Plugins.GameRecorder.Acts.StopRecording,e.Plugins.GameRecorder.Cnds.OnRecordingReady,e.Plugins.GameRecorder.Exps.RecordingURL,e.Plugins.Spritefont2.Acts.SetVAlign,e.Plugins.NinePatch.Acts.MoveToBottom,e.Plugins.Spritefont2.Exps.TextHeight,e.Plugins.Spritefont2.Cnds.OnDestroyed,e.Plugins.Spritefont2.Acts.SetCharacterSpacing,e.Plugins.NinePatch.Acts.MoveToTop,e.Behaviors.Sin.Cnds.IsEnabled,
e.Plugins.Sprite.Acts.SetEffectEnabled,e.Plugins.Sprite.Cnds.OnAnyAnimFinished,e.Behaviors.Rotate.Acts.SetSpeed,e.Plugins.TextBox.Cnds.OnCreated,e.Plugins.TextBox.Acts.SetCSSStyle,e.Plugins.List.Cnds.OnCreated,e.Plugins.List.Acts.SetCSSStyle,e.Plugins.Button.Cnds.OnCreated,e.Plugins.Button.Acts.SetCSSStyle,e.Plugins.Sprite.Cnds.OnAnimFinished,e.Plugins.Browser.Cnds.OnUpdateReady,e.Plugins.Keyboard.Cnds.OnAnyKey,e.Plugins.Keyboard.Exps.LastKeyCode,e.Plugins.Keyboard.Exps.StringFromKeyCode,e.Plugins.Spritefont2.Cnds.CompareText,
e.Plugins.Browser.Exps.Product,e.Plugins.Browser.Exps.Platform,e.Plugins.System.Exps.renderer,e.Plugins.System.Exps.fps,e.Plugins.System.Exps.cpuutilisation,e.Plugins.System.Exps.gpuutilisation,e.Plugins.System.Exps.objectcount,e.Plugins.System.Exps.wallclocktime,e.Plugins.System.Exps.imagememoryusage,e.Plugins.System.Acts.ScrollToObject,e.Behaviors.jumpthru.Acts.SetEnabled,e.Behaviors.solid.Acts.SetTags,e.Plugins.Dictionary.Exps.Get,e.Behaviors.Rotate.Acts.SetEnabled,e.Behaviors.Sin.Exps.Magnitude,
e.Behaviors.Platform.Acts.SetGravityAngle,e.Behaviors.Platform.Acts.SetAcceleration,e.Behaviors.Platform.Acts.SetDeceleration,e.Plugins.System.Exps.float,e.Plugins.System.Acts.SetLayerForceOwnTexture,e.Behaviors.Platform.Acts.SetMaxFallSpeed,e.Behaviors.Platform.Acts.SetGravity,e.Behaviors.Platform.Acts.SetJumpStrength,e.Plugins.Sprite.Acts.StopAnim,e.Plugins.Sprite.Acts.SetHeight,e.Plugins.Sprite.Exps.ImagePointX,e.Plugins.Sprite.Exps.ImagePointY,e.Behaviors.Sin.Acts.SetMovement,e.Plugins.Sprite.Cnds.IsFlipped,
e.Behaviors.EightDir.Acts.SetEnabled,e.Behaviors.Tween.Acts.SetEnabled,e.Behaviors.Bullet.Acts.SetSpeed,e.Behaviors.Bullet.Acts.SetAngleOfMotion,e.Behaviors.Bullet.Acts.SetGravity,e.Plugins.Sprite.Cnds.IsBetweenAngles,e.Plugins.Sprite.Acts.SetEffect,e.Plugins.System.Exps.loadingprogress,e.Plugins.Dictionary.Acts.JSONLoad,e.Plugins.System.Cnds.OnLoadFinished,e.Plugins.Spritefont2.Acts.SetHeight,e.Plugins.Sprite.Cnds.IsOnLayer,e.Plugins.Sprite.Cnds.IsOverlappingOffset,e.Behaviors.Platform.Acts.SimulateControl,
e.Behaviors.Platform.Exps.VectorX,e.Behaviors.Platform.Cnds.CompareSpeed,e.Behaviors.Platform.Exps.MaxFallSpeed,e.Plugins.Sprite.Acts.SetSolidCollisionFilter,e.Plugins.Sprite.Acts.SetDefaultColor,e.Plugins.System.Exps.rgbex,e.Plugins.Sprite.Acts.StartAnim,e.Behaviors.Pin.Acts.PinByImagePoint,e.Behaviors.Platform.Cnds.IsMoving,e.Behaviors.Platform.Exps.Gravity,e.Plugins.gamepad.Cnds.IsButtonDown,e.Behaviors.Platform.Exps.Deceleration,e.Behaviors.Platform.Exps.Acceleration,e.Behaviors.Platform.Cnds.OnLand,
e.Behaviors.Platform.Cnds.IsByWall,e.Plugins.Sprite.Cnds.IsOutsideLayout,e.Plugins.gamepad.Cnds.OnButtonDown,e.Behaviors.Platform.Cnds.IsFalling,e.Behaviors.scrollto.Acts.Shake,e.Behaviors.Platform.Cnds.OnFall,e.Behaviors.Platform.Acts.SetJumpSustain,e.Behaviors.solid.Cnds.IsEnabled,e.ScriptsInEvents.Spritesevents_Event638_Act2,e.ScriptsInEvents.Spritesevents_Event640_Act1,e.ScriptsInEvents.Spritesevents_Event641_Act1,e.ScriptsInEvents.Spritesevents_Event649_Act2,e.Plugins.System.Cnds.PickNth,e.Plugins.Sprite.Cnds.PickDistance,
e.Plugins.video.Acts.Pause,e.Plugins.Audio.Acts.Stop,e.Plugins.Audio.Exps.PlaybackTime,e.Behaviors.Platform.Cnds.OnStop,e.Plugins.Spritefont2.Cnds.IsVisible,e.Plugins.Spritefont2.Cnds.CompareY,e.Behaviors.jumpthru.Cnds.IsEnabled,e.Plugins.System.Acts.SetObjectTimescale,e.Plugins.System.Exps.timescale,e.Plugins.System.Exps.find,e.Behaviors.Platform.Acts.SetCeilingCollision,e.Behaviors.Platform.Cnds.IsEnabled,e.Behaviors.Tween.Acts.StopAllTweens,e.Behaviors.Platform.Cnds.IsJumping,e.Behaviors.Platform.Exps.JumpStrength,
e.Behaviors.Platform.Exps.GravityAngle,e.Behaviors.EightDir.Exps.Speed,e.Behaviors.EightDir.Acts.SimulateControl,e.Behaviors.EightDir.Exps.VectorX,e.Behaviors.EightDir.Acts.SetVectorY,e.Behaviors.EightDir.Exps.VectorY,e.Behaviors.EightDir.Acts.SetVectorX,e.Behaviors.Sin.Exps.Value,e.Behaviors.Timer.Cnds.IsTimerRunning,e.Plugins.Sprite.Exps.IID,e.Behaviors.Sin.Exps.CyclePosition,e.Behaviors.Rotate.Exps.Speed,e.Behaviors.Rotate.Cnds.IsEnabled,e.Behaviors.Sin.Acts.UpdateInitialState,e.Plugins.Sprite.Exps.ImagePointCount,
e.Plugins.Audio.Acts.AddGainEffect,e.Plugins.Sprite.Acts.SetTowardPosition,e.Behaviors.Platform.Exps.Speed,e.Plugins.System.Exps.anglelerp,e.Behaviors.LOS.Cnds.HasLOSToObject,e.Behaviors.Timer.Exps.Duration,e.Behaviors.Pin.Acts.PinByDistance,e.Behaviors.Pin.Acts.SetPinDistance,e.Behaviors.Pin.Exps.PinnedUID,e.Behaviors.Orbit.Acts.SetRotation,e.Behaviors.Orbit.Acts.SetSpeed,e.Behaviors.Tween.Cnds.IsAnyPaused,e.Behaviors.Tween.Cnds.IsAnyPlaying,e.Plugins.Sprite.Cnds.CompareHeight,e.Behaviors.Platform.Exps.MovingAngle,
e.Behaviors.Bullet.Acts.SetEnabled,e.Behaviors.Bullet.Exps.AngleOfMotion,e.Behaviors.Bullet.Cnds.CompareTravelled,e.Behaviors.Bullet.Acts.SetDistanceTravelled,e.Plugins.Arr.Exps.CurValue,e.Plugins.Spritefont2.Acts.SetEffect,e.Plugins.TiledBg.Exps.UID,e.Plugins.Spritefont2.Acts.SetPos,e.Plugins.TiledBg.Cnds.OnDestroyed,e.Plugins.Keyboard.Cnds.OnKeyCodeReleased,e.Plugins.gamepad.Cnds.OnButtonUp,e.Plugins.Sprite.Cnds.CompareWidth,e.Behaviors.Bullet.Exps.Speed,e.Behaviors.Platform.Acts.FallThrough,e.Behaviors.Timer.Acts.PauseResumeTimer,
e.Behaviors.Orbit.Acts.SetEnabled,e.Plugins.Audio.Acts.PlayAtPosition,e.Plugins.System.Exps.tickcount,e.Plugins.video.Exps.PlaybackTime,e.Plugins.System.Acts.SetLayoutEffectEnabled,e.Plugins.TiledBg.Acts.MoveToLayer,e.Plugins.List.Acts.SetBoolInstanceVar,e.Plugins.TextBox.Acts.SetTooltip,e.Plugins.gamepad.Cnds.OnGamepadConnected,e.Plugins.gamepad.Exps.GamepadID,e.Plugins.gamepad.Cnds.OnGamepadDisconnected,e.Plugins.Sprite.Acts.RemoveChild,e.Behaviors.Rotate.Acts.SetAcceleration,e.Plugins.Function.Exps.ParamCount,
e.Plugins.Arr.Acts.Push,e.Plugins.Arr.Acts.Pop,e.Plugins.Button.Acts.SetChecked,e.Plugins.NinePatch.Exps.UID,e.Plugins.TiledBg.Acts.SetWidth,e.Plugins.List.Acts.SetEnabled,e.Plugins.List.Exps.SelectedText,e.Plugins.Button.Cnds.IsChecked,e.Plugins.Spritefont2.Acts.ZMoveToObject,e.Plugins.TiledBg.Exps.Height,e.Plugins.List.Cnds.OnClicked,e.Plugins.List.Cnds.IsBoolInstanceVarSet,e.Plugins.TextBox.Cnds.OnClicked,e.Plugins.List.Cnds.CompareTextAt,e.Plugins.NinePatch.Cnds.PickByUID,e.Plugins.Tilemap.Exps.TileAt,
e.Plugins.Mouse.Cnds.OnClick,e.Plugins.Tilemap.Acts.Destroy,e.Plugins.Tilemap.Acts.SetInstanceVar,e.Plugins.Tilemap.Acts.SetSize,e.Plugins.Touch.Cnds.OnTapGesture,e.Plugins.System.Acts.RestoreObjectTimescale,e.Behaviors.Bullet.Cnds.OnStep,e.Behaviors.Tween.Cnds.OnAnyTweensFinished,e.Behaviors.Platform.Cnds.OnMove,e.Behaviors.EightDir.Acts.SetMaxSpeed,e.Behaviors.EightDir.Cnds.IsMoving,e.Plugins.NinePatch.Acts.ZMoveToObject,e.Behaviors.EightDir.Exps.MaxSpeed,e.Behaviors.Platform.Acts.SetDoubleJumpEnabled,
e.Behaviors.Platform.Acts.SetIgnoreInput,e.Behaviors.Fade.Acts.SetWaitTime,e.Behaviors.Fade.Acts.RestartFade,e.Plugins.Sprite.Exps.AsJSON,e.Plugins.System.Acts.SetLayoutEffectParam,e.Behaviors.DragnDrop.Acts.SetEnabled,e.Plugins.NinePatch.Exps.Opacity,e.Plugins.Spritefont2.Exps.Opacity,e.Plugins.NinePatch.Cnds.CompareOpacity,e.Plugins.NinePatch.Acts.SetHeight,e.ScriptsInEvents.Toolbarevents_Event45_Act19,e.Plugins.Tilemap.Exps.UID,e.Plugins.Sprite.Acts.SetZElevation,e.Plugins.Tilemap.Cnds.PickByUID,
e.Plugins.Tilemap.Acts.SetZElevation,e.Plugins.Spritefont2.Exps.TextWidth,e.Plugins.NinePatch.Acts.SetX,e.Plugins.NinePatch.Acts.AddChild,e.Plugins.NinePatch.Cnds.CompareX,e.Plugins.GameRecorder.Cnds.IsRecording,e.Plugins.Arr.Exps.Height,e.Plugins.GameRecorder.Acts.StartRecording,e.Plugins.Audio.Acts.AddDelayEffect,e.ScriptsInEvents.Loadinglevel_Event116_Act6,e.Plugins.NinePatch.Acts.SubInstanceVar]};self.C3_JsPropNameTable=[{TileArrayL1:0},{Mouse:0},{Keyboard:0},{LocalStorage:0},{LevelDataArray:0},
{Function:0},{LevelMetaData:0},{LevelEditorTileLayout:0},{TileArrayL2:0},{LevelProperties:0},{GameSettings:0},{Browser:0},{Audio:0},{MapProperties:0},{TempLevelData:0},{NextMapData:0},{Video:0},{ChunkLoader:0},{UserMedia:0},{CustomKeybinds:0},{GameRecorder:0},{OverlayEffectArray:0},{QuickCustomizationTileOptions:0},{PalaceSwitchData:0},{Touch:0},{LevelTestingToolStates:0},{LevelThemesArray:0},{AJAX:0},{JSON:0},{Gamepad:0},{YoshiCoinsCollected:0},{SearchArray:0},{TooltipArrayObj:0},{UseWheneverArray:0},
{TooltipArrayItems:0},{MinigameScores:0},{IDtoObjDictionary:0},{YoshiWarpingData:0},{KuriboShoeWarpingData:0},{inToolbar:0},{special:0},{optionalSpecial:0},{collisionTag:0},{hoverTooltip:0},{hovered:0},{tileMode:0},{onLayer:0},{beingEdited:0},{defaultFrame:0},{tilesetName:0},{modeTemp:0},{miscValue1:0},{miscValue2:0},{miscValue3:0},{miscValue4:0},{miscValue5:0},{miscValue6:0},{miscValue7:0},{miscValue8:0},{customizable:0},{Tiles:0},{attachedTo:0},{Pin:0},{InvisibleTile:0},{attachedToObjectUID:0},
{object:0},{MiscTileObjects:0},{isLightSource:0},{lightSourceSize:0},{pinToLightSourceImgPoints:0},{attachedToTileUID:0},{SineSize:0},{Draai:0},{SineAngle:0},{Tween:0},{Timer:0},{InEditorAssistantTiles:0},{Climbables:0},{Castle:0},{Jungle:0},{Desert:0},{Snow:0},{NighttimeGrass:0},{Beach:0},{Bonus:0},{Volcano:0},{Autumn:0},{mode:0},{tilemapID:0},{tilemapName:0},{TilemapGrass:0},{TilemapCave:0},{TilemapCastle:0},{TilemapJungle:0},{TilemapSnow:0},{TilemapIce:0},{TilemapDesert:0},{TilemapMountain:0},
{TilemapVolcano:0},{TilemapStarWorld:0},{TilemapNightGrass:0},{TilemapGhostHouse:0},{TilemapAutumn:0},{TilemapSky:0},{TilemapVolcanicCave:0},{TilemapBeach:0},{Sewer:0},{TilemapSewer:0},{spawnX:0},{spawnY:0},{constantSpawnX:0},{constantSpawnY:0},{Background:0},{Foreground:0},{CustomBackground:0},{CustomForeground:0},{NoBGGrid:0},{moveSpeed:0},{MinigameMenuBG:0},{MenuFrame:0},{optionalID:0},{highlightOnHover:0},{disabled:0},{cursorSupported:0},{fullText:0},{tempDisabled:0},{Flash:0},{Font:0},{Seperator:0},
{Sine:0},{OverlayBlock:0},{ReturnBlock:0},{helpid:0},{active:0},{content:0},{menuX:0},{menuY:0},{menuWidth:0},{menuHeight:0},{useTempLogSystem:0},{HelpBlock:0},{containsValidInfo:0},{hasTooltip:0},{tooltipMsg:0},{TextBoxText:0},{textY:0},{id:0},{CloseBlock:0},{BGIcon:0},{Thumbnail:0},{dissappearOnClick:0},{HelpDisplay:0},{ErrorOverlay:0},{setHeight:0},{lastMenu:0},{effectValue:0},{wentAutomaticlyInvisible:0},{deleteTileModeIsOn:0},{Toolbar:0},{tooltipContent:0},{ToolbarIcons:0},{defaultX:0},{YellowSelector:0},
{lerpToX:0},{lerpToY:0},{Selector:0},{SeperatorAlternate:0},{Grid:0},{isChecked:0},{Checkbox:0},{TextBoxTextarea:0},{TextBoxNumbers:0},{clickedCount:0},{isClicked:0},{Logo:0},{BrickBlockGrid:0},{Fade:0},{BlackOverlay:0},{createSparkles:0},{addCoins:0},{HUDIcons:0},{destinationX:0},{direction:0},{ScrollingText:0},{themeID:0},{BGIconFrame:0},{EditorObjectIcons:0},{CustomCursor:0},{speed:0},{defaultAngle:0},{angleChange:0},{SineVertical:0},{SineHorizontal:0},{HUDArrow:0},{MenuPlank:0},{Dropdown:0},{SpeedIndicator:0},
{"8bitMario":0},{FGIcon:0},{BGColorDisplayer:0},{ScoreFont:0},{EditorPlacementAssist:0},{AreaSelector:0},{gravity:0},{ToolbarNotificationIcons:0},{objectType:0},{objectGroup:0},{defaultDestroyersAffected:0},{interactValue:0},{lavaResistant:0},{mirrorMethod:0},{healthState:0},{canDespawn:0},{canRespawn:0},{resetToDefaultSpeedsTimer:0},{defaultAcceleration:0},{defaultDeceleration:0},{defaultMaxSpeed:0},{defaultMaxFallSpeed:0},{defaultGravity:0},{spawnedState:0},{canBeActive:0},{isOnLayer:0},{isOverlappingSolidTiles:0},
{activated:0},{hasActivatedEvents:0},{canDestroy:0},{destroyerType:0},{destroyerProperty:0},{respawnMiscValues:0},{scoreChain:0},{canBeHold:0},{beingHeld:0},{compareX:0},{alteredPhysics:0},{fireballAffectedStatus:0},{isUnderwater:0},{hasOwnCollisionEvents:0},{collisionTagBase:0},{turnOnEdge:0},{spawnerUID:0},{collisionOriginOffset:0},{edible:0},{hasTileProperties:0},{horizontalMovement:0},{verticalMovement:0},{lastXPos:0},{lastYPos:0},{Jumpthru:0},{DragNDrop:0},{GebondenAanOntwerp:0},{SMCLetters:0},
{CheckmarkButton:0},{GridStriped:0},{GridThin:0},{RedCoinFont:0},{linkedObject:0},{OpenVarietyMenuButton:0},{InfoBlock:0},{AnticlickObject:0},{destroyedOnMenuSwitch:0},{action:0},{ToolbarButtons:0},{OverlaySettings:0},{attachedToCursor:0},{FadeCircle:0},{scrollLevel:0},{OverlayBox:0},{iframe:0},{NewsThumbnails:0},{TestObjIndicator:0},{GamepadIcon:0},{BrickOverlay:0},{scrollPos:0},{destroyOnToolbarCollapse:0},{checkboxOption:0},{FontSMW:0},{isActivePage:0},{editedTileUID:0},{editedObjectStr:0},{MenuTabLeft:0},
{MenuTabMiddle:0},{MenuTabRight:0},{MenuTabSeperator:0},{MinigamePreviews:0},{PreviewGrass:0},{Doorsprong:0},{UpdateLogo:0},{Tooltip:0},{LevelSizeChanger:0},{goToPage:0},{ScrollUpOrDownBtn:0},{attachedToObjUID:0},{ConveyorFont:0},{loaded:0},{loading:0},{tilesRendered:0},{Chunk:0},{ChunkHandler:0},{BooBusterWall:0},{timer:0},{gameOver:0},{MinigameTimer:0},{BooSpawner:0},{correctBooObj:0},{AreaObjectLoader:0},{PersistentAreaCreator:0},{triggered:0},{oneTimeUse:0},{readyToActivate:0},{tag:0},{paused:0},
{referrer:0},{duration:0},{startMethodID:0},{musicID:0},{fadeOutTime:0},{fadeInTime:0},{isDynamic:0},{MusicChanger:0},{colorRGB:0},{transitionDuration:0},{reverse:0},{startBGColor:0},{BGColorOnActivation:0},{BGColorChanger:0},{updateBG:0},{updateFG:0},{BGData:0},{editBG:0},{newBG:0},{newFG:0},{BGChanger:0},{ThemeChanger:0},{modeID:0},{LevelModeChanger:0},{overlayID:0},{overlaySpeed:0},{overlayMovementAngle:0},{OverlayChanger:0},{bulletID:0},{spawnAreaID:0},{fireRate:0},{targetLocID:0},{bulletsPerFire:0},
{durationTemp:0},{startMethodIDTemp:0},{GeneratorBulletBill:0},{actionID:0},{range:0},{TagBlock:0},{windAngle:0},{intensity:0},{finalIntensity:0},{buildUpTime:0},{windSFX:0},{repeatCount:0},{GeneratorWind:0},{meteorColor:0},{eruptionDelay:0},{meteorCount:0},{minVectorX:0},{maxVectorX:0},{meteorSizeID:0},{GeneratorMeteor:0},{fishType:0},{genMode:0},{delay:0},{jumpStrength:0},{randomJumpStrength:0},{GeneratorFish:0},{newAngle:0},{turnTypeID:0},{turnTime:0},{ArrowBlock:0},{newSpeed:0},{changeSpeedTime:0},
{SpeedBlock:0},{actionDelay:0},{PlatformActionBlock:0},{oldTags:0},{newTag:0},{TagChangerBlock:0},{parentObjectUID:0},{Platform11:0},{activeOnStart:0},{styleID:0},{movementSpeed:0},{angleChangePerSecond:0},{countDownTimer:0},{moving:0},{extraMovement:0},{extraMovementAngle:0},{screenWrapHZ:0},{screenWrapVT:0},{onTimerActionID:0},{canBeActivated:0},{moveOnlyWithPlayer:0},{canStartCountdown:0},{interactedArrowBlockUID:0},{Baan:0},{InvisiblePlatform:0},{InvisiblePlatformCollision:0},{Platform12:0},{Platform13:0},
{Platform1:0},{Platform4:0},{Platform5:0},{Platform2:0},{Platform0:0},{Platform3:0},{Platform6:0},{Platform7:0},{Platform14:0},{Platform15:0},{Platform16:0},{Platform17:0},{Platform8:0},{Platform9:0},{Platform10:0},{PlatformRotator:0},{currentY:0},{differenceY:0},{pixelation:0},{ScrollTo:0},{Camera:0},{canDestroyOld:0},{destroyerTypeOld:0},{destroyerPropertyOld:0},{destroyerObjectEnabled:0},{isHit:0},{Fireball:0},{attachedObjectUID:0},{InvisibleDestroyer:0},{shadowObject:0},{shadowID:0},{ShadowCaster:0},
{thrownBy:0},{Rotate:0},{MarioHammer:0},{TextboxArrow:0},{readyToRespawn:0},{hasGoneOffScreen:0},{objectUID:0},{ObjectRespawner:0},{type:0},{destinationEntrance:0},{destinationMap:0},{warpType:0},{specialRequirement:0},{isLocked:0},{PDoorStatus:0},{FaceDirectionAfterWarp:0},{resetExit:0},{circularDoor:0},{WarpObject:0},{attachedObjectID:0},{destroyedOnUnpin:0},{LeftCollision:0},{RightCollision:0},{Solid:0},{DownCollision:0},{DamageCollision:0},{lavaproperties:0},{poison:0},{LavaCollisions:0},{attachedToObject:0},
{InvisibleMarioHurtbox:0},{SlopeTileUID:0},{slopeAngle:0},{specialTrait:0},{SlopeAssist:0},{CloudMarioCloud:0},{destinationY:0},{nextDestinationX:0},{nextDestinationY:0},{extraDistanceX:0},{extraDistanceY:0},{"8Direction":0},{FollowingCloud:0},{relatedObject:0},{relatedObjectUID:0},{PinAssistentObject:0},{SkullRaftAssist:0},{slopeDirection:0},{SteepSlopeAssist:0},{physicsType:0},{IcePhysicsChanger:0},{hasLandedOnce:0},{movementAngle:0},{moveAtAngle:0},{Iceball:0},{hasItem:0},{hit:0},{createInvisDestroyer:0},
{hitFromAbove:0},{itemReleaseDirection:0},{isHidden:0},{progessive:0},{continuousStarman:0},{blockName:0},{canBePickedUp:0},{timeLeftUntilFalling:0},{timeLeftUntilBreaking:0},{permaFrozen:0},{willHurtMario:0},{waterFallSpeed:0},{frozenObjectUID:0},{IceCube:0},{forObject:0},{Activator:0},{slipperynessLevel:0},{IceSlopeAssist:0},{SidewaysSpringboardAssist:0},{OutlinedCoins:0},{facing:0},{InvisibleJumpthruAssistant:0},{DownwardsSlopeAssist:0},{Platform:0},{BaddieBoxPlate:0},{CloudScenery:0},{DestroyingDust:0},
{allowOtherAngles:0},{Bullet:0},{Superball:0},{SuperballSprite:0},{SoccerballSprite:0},{PlayerBorder:0},{yoshiUID:0},{yoshiUIDTemp:0},{YoshiTongueR:0},{YoshiTongueHitbox:0},{YoshiFlame:0},{Wings:0},{YoshiTongueL:0},{LightBlockAssist:0},{Darkness:0},{ClimbAssist:0},{AntiYoshiSign:0},{PoleFlag:0},{FlagpoleCollision:0},{collected:0},{platformEnabled:0},{coinType:0},{bounceOnLanding:0},{Coin:0},{ItemBlock:0},{BrickBlock:0},{flipAmount:0},{FlipBlock:0},{enemyHit:0},{beingUsed:0},{Noteblock:0},{landed:0},
{GoalOrb:0},{movingUp:0},{Goalpoint:0},{canBeHold2:0},{beingHeld2:0},{defaultColTag:0},{Springboard:0},{SpringboardSideways:0},{switchState:0},{switchType:0},{directionID:0},{switchID:0},{PSwitch:0},{talking:0},{clearLevelOnceRead:0},{message:0},{bubbleTimer:0},{alive:0},{Textbox:0},{Key:0},{Keyhole:0},{parachutingObjUID:0},{Parachute:0},{isOn:0},{OnOffSwitch:0},{colorID:0},{deadly:0},{spike:0},{OnOffBlock:0},{text:0},{ColorID:0},{Toad:0},{mapNr:0},{exitNr:0},{Checkpoint:0},{GreenPlatform:0},{fireCounter:0},
{defaultFireCounter:0},{bulletType:0},{cannonType:0},{bulletColor:0},{BulletBillLauncher:0},{SkullBlock:0},{PinkTriangleBlock:0},{raftState:0},{sinkPreventionEnabled:0},{SkullRaft:0},{timeToAdd:0},{Clock:0},{OneWayGate:0},{destroyedOnGoalpoint:0},{goingUp:0},{clockwise:0},{GrayPlatform:0},{GlassBlock:0},{thrown:0},{powRadiusX:0},{powRadiusY:0},{POWBlock:0},{canHurtMario:0},{GrabBlock:0},{BlueBlock:0},{specialItem:0},{GiftBox:0},{canChangeAnimation:0},{Gezichtsveld:0},{Snowman:0},{status:0},{fallAnimationCounter:0},
{DonutBlock:0},{itemID:0},{RedCoinRing:0},{PalaceSwitch:0},{SwitchPalaceBlock:0},{Water:0},{FullSpike:0},{objectInside:0},{movementAI:0},{Bubble:0},{cycleCount:0},{cycleSpeed:0},{AmnoID:0},{cycles:0},{CannonBallLauncher:0},{UnderwaterMarioController:0},{SpikeTile:0},{GrayBlock:0},{destroyBridge:0},{Axe:0},{BowserBridge:0},{BridgeChain:0},{BossGate:0},{objSpawnValues:0},{spawnVectorX:0},{spawnVectorY:0},{randomVectorX:0},{randomVectorY:0},{spawnedSprites:0},{maxObjectCount:0},{BaddieBox:0},{mapID:0},
{spawnLocX:0},{spawnLocY:0},{spawnLayer:0},{hasLanded:0},{DragonCoin:0},{torchID:0},{on:0},{Torch:0},{WoodenPost:0},{StoneBlock:0},{NumberedPlatform:0},{angleChangeDelay:0},{destroyedOnHit:0},{ArrowCloud:0},{isByWall:0},{momentum:0},{bounceMomentum:0},{Soccerball:0},{SkullBlockMinigame:0},{spawnY2:0},{beingSpawned:0},{spawnDirection:0},{YoshiEgg:0},{fallY:0},{InfoSign:0},{powerupID:0},{opened:0},{warpToMapID:0},{warpToEntranceID:0},{canBeOpened:0},{containedItem:0},{warpPlayerWhenOpened:0},{openOtherChestsWhenOpened:0},
{PowerupChest:0},{jumping:0},{springboardJump:0},{spinjump:0},{spinProperties:0},{hasMainInteractions:0},{heldObjUID:0},{canGetHurt:0},{invinciblePower:0},{jumpState:0},{canHitBlocks:0},{hasSuperStomp:0},{warping:0},{ridingCloud:0},{playerControlled:0},{ridingObjUID:0},{isControllable:0},{isHolding:0},{slideState:0},{baseJumpSpeed:0},{hopping:0},{canDoAirJump:0},{released:0},{windUpAnimSpeed:0},{state:0},{leapingToPlayer:0},{KuriboShoe:0},{doLandAnim:0},{LightBlock:0},{GrayBrickBlock:0},{ExclamationBlock:0},
{isMounted:0},{mountedObjUID:0},{RideableCloud:0},{conveyorType:0},{slopedUpwards:0},{slopedDownstairs:0},{anim:0},{conveyorID:0},{ConveyorBelt:0},{FireFlower:0},{Mushroom:0},{OneUp:0},{ThreeUp:0},{HammerFlower:0},{SuperLeaf:0},{Starman:0},{CloudFlower:0},{IceFlower:0},{PenguinSuit:0},{BlueShell:0},{Carrot:0},{SteelPinecone:0},{TanookiSuit:0},{SuperballFlower:0},{FrogSuit:0},{fireballAffected:0},{Bone:0},{SpinnerChain:0},{Rotator:0},{segments:0},{segmentsToSpawn:0},{spawnSegmentAt:0},{createSnowballs:0},
{destroySegmentsOnDefeat:0},{createPoofOnDestroyed:0},{PokeyInitializer:0},{EnemyHammers:0},{MuncherAssistentObject:0},{Vastpinnen:0},{PodobooAssistantObject:0},{BossFlame:0},{waitingToBecomeSolid:0},{Snowball:0},{SpikeballSprite:0},{starsToSpawn:0},{explosionType:0},{ExplosionObject:0},{PiranhaFire:0},{PiranhaFireCollisionObject:0},{animationCounter:0},{MoleAI:0},{isBig:0},{holeType:0},{MoleHole:0},{Baseball:0},{Football:0},{Wrench:0},{DinoTorchFlame:0},{BowserMagic:0},{BowserMagicAssist:0},{PakkunFire:0},
{chainID:0},{ChainChompChain:0},{GrrrolSpriteUID:0},{GrrrolCollision:0},{GrrrolEye:0},{landingY:0},{Boulder:0},{flameID:0},{CandleFlame:0},{BowlingGoonieSprite:0},{MeteorFire:0},{AngrySunRay:0},{GoombaTailCollision:0},{BooBlock:0},{lakituItem:0},{LakituRespawner:0},{fishedItemUID:0},{isCarryingItem:0},{FishingRod:0},{lives:0},{maxHealth:0},{dropitem:0},{walkUntilAttack:0},{phase:0},{nextMove:0},{defaultVectorY:0},{wingedVectorY:0},{presetPhase:0},{changeMusicTo:0},{spikingUp:0},{lastHitByInvisibleMario:0},
{fireballHits:0},{alternateModes:0},{winged:0},{homingIn:0},{BoomBoom:0},{walkRange:0},{walkTimer:0},{attacksLeft:0},{attackAnims:0},{onDefeatEventID:0},{attacksUntilJump:0},{minimumAttacksBeforeJump:0},{Bowser:0},{dropItem:0},{maxSpeedNormal:0},{maxSpeedDarkness:0},{maxSpeedBlindness:0},{movementMode:0},{attackDelay:0},{canAttack:0},{canDoFlameAttack:0},{canDoHomingAttack:0},{canDoCirclingFireAttack:0},{forceToLayer:0},{Sinus:0},{KingBoo:0},{ridingShoe:0},{shoeUID:0},{wingStatus:0},{fallingAtY:0},
{Galoomba:0},{explosionTimer:0},{KoopaAI:0},{flyAngle:0},{flySpeed:0},{hasCoin:0},{turnTimer:0},{chaseAngle:0},{turning:0},{bounceOnLand:0},{hasBeachKoopa:0},{KoopaTroopa:0},{sliding:0},{BeachKoopa:0},{Rex:0},{hasCollisionsSetUp:0},{Muncher:0},{Goomba:0},{queuedMovement:0},{targetCoords:0},{isVenusFlyTrap:0},{VFTAnimIDs:0},{platformAngleForPakkunFires:0},{PiranhaPlant:0},{isOnCeiling:0},{canStartWalkTimer:0},{BuzzyBeetleAndSpiny:0},{jumpVectorY:0},{Ninji:0},{fallingStatus:0},{spawnXorY:0},{fallGravity:0},
{returnGravity:0},{thwompAngle:0},{isGiant:0},{screenWrapped:0},{Thwomp:0},{throwsBones:0},{DryBones:0},{SpinnerSpikeball:0},{stationary:0},{Spike:0},{beingThrown:0},{Spikeball:0},{Saw:0},{segmentID:0},{startFallY:0},{Pokey:0},{fallSpeed:0},{fallTimer:0},{fallRange:0},{isInWater:0},{FallingSpike:0},{bulletSpeed:0},{bulletAI:0},{color:0},{homing:0},{isBanzai:0},{isKing:0},{BulletBill:0},{countdownTimerJump:0},{countdownTimerHammer:0},{isOnGroundLevel:0},{jumpUpOrDown:0},{HammerBros:0},{PoisonMushroom:0},
{delayConstant:0},{reverseMovement:0},{activationDelay:0},{Podoboo:0},{Firebar:0},{readyToStartAI:0},{readyToJump:0},{Thwimp:0},{BusterBeetle:0},{cannonAmno:0},{walkWhileExploding:0},{BobOmb:0},{VolcanoLotus:0},{Blurp:0},{AINumber:0},{tileMovement:0},{extraValue:0},{originPoint:0},{isJumping:0},{fishGenMovementAngle:0},{SineMovement:0},{CheepCheep:0},{FloatingMine:0},{Jelectro:0},{isSleeping:0},{onLandAnimationCounter:0},{RipVanFish:0},{SpinyCheepCheep:0},{Porcupuffer:0},{canSwimAgain:0},{canFly:0},
{isSkyBlooper:0},{Blooper:0},{MontyMole:0},{chuckAI:0},{animationCyclesUntilIdle:0},{reverseCharge:0},{projectileTimer:0},{canPrepareNextAttack:0},{SineShake:0},{Chuck:0},{exploding:0},{rotating:0},{offsetY:0},{torpedoAI:0},{TorpedoTed:0},{launcherAI:0},{torpedoSpeed:0},{torpedoType:0},{TorpedoTedLauncher:0},{extraTurnDistance:0},{movementX:0},{movementY:0},{eatenMario:0},{attackCooldown:0},{chasing:0},{jumpY:0},{targetY:0},{spawnedByFishGen:0},{LineOfSight:0},{BossBass:0},{hiding:0},{RockyWrench:0},
{canRotate:0},{blinkTimer:0},{SpikeTop:0},{walkCycles:0},{attackTimer:0},{BonyBeetle:0},{DinoTorch:0},{DinoRhino:0},{spitOut:0},{KamikazeShell:0},{MechaKoopa:0},{FallingFlame:0},{isInLava:0},{overlappingMario:0},{BigSteely:0},{createParticles:0},{Blargg:0},{targetX:0},{fiery:0},{NipperPlant:0},{shootFire:0},{JumpingPiranhaPlant:0},{charging:0},{boiling:0},{boilVectorY:0},{Bully:0},{defusedSmokes:0},{KabOmb:0},{chainCount:0},{isChained:0},{chainedStatus:0},{readyToAttack:0},{ChainChomp:0},{respawnOnDefeat:0},
{goOffScreen:0},{destroyOnWentOffScreen:0},{readyToGoOnScreen:0},{AngrySun:0},{Grrrol:0},{canMove:0},{FireSnake:0},{flameCount:0},{FireSnakeChasing:0},{FlameChomp:0},{movementMaxSpeed:0},{attackCycleFinished:0},{Crowber:0},{isSkeletal:0},{flightCounter:0},{Goonie:0},{GoonieFlightless:0},{canPerformLandAnimation:0},{GoonieHefty:0},{visualSpriteUID:0},{beingSpitOut:0},{GoonieBowlingCollision:0},{Meteor:0},{MechaCheep:0},{underwaterAngle:0},{Urchin:0},{attackCycle:0},{spawnRaccoonLeafOnDefeat:0},{TailGoomba:0},
{FakeBlock:0},{turnSpeed:0},{verticalRange:0},{DeepCheep:0},{movementSpeedX:0},{movementSpeedY:0},{fleeing:0},{minigameMovementAngle:0},{secretBoo:0},{playingFoundAnim:0},{isPartOfBooBuddy:0},{booSnakeParentUID:0},{booID:0},{canBecomeBlock:0},{booCirclePart:0},{Boo:0},{EerieSine:0},{Eerie:0},{Splunkin:0},{BubbleSine:0},{GreenBubble:0},{maxBoos:0},{spawnedBoos:0},{BooBuddySnake:0},{Shake:0},{FishboneSMW:0},{basePos:0},{FishboneNSMB:0},{stompHP:0},{homeX:0},{hasPlayedDeathAnim:0},{Broozer:0},{lockedY:0},
{flyingSpeed:0},{Swoop:0},{extraMovementSpeed:0},{isFishing:0},{SineValue:0},{Lakitu:0},{kingBooUID:0},{KingBooCrown:0},{spinJumpTemp:0},{fireballsThrown:0},{hammersThrown:0},{cloudsActive:0},{cloudsReady:0},{canGetHurtTemp:0},{activePowerupSpecificAbility:0},{flyingState:0},{springboardJumpTemp:0},{pinkTriangleBlockAffected:0},{gravityAngle:0},{spinning:0},{extraUnderwaterSpeed:0},{diving:0},{smoothSwimming:0},{jumpingTemp:0},{ridingMount:0},{mountUID:0},{levelCleared:0},{isClimbing:0},{levelClearedAction:0},
{"8DirectionSwimming":0},{"8DirectionClimbing":0},{Mario:0},{yoshiState:0},{spinjumpTemp:0},{heldObject:0},{hasWings:0},{hasHeavyStomp:0},{hasExplosiveStomp:0},{YoshiTimer:0},{Yoshi:0},{DefaultParticleObjects:0},{DestructionParticle:0},{goToX:0},{goToY:0},{StarParticle:0},{KeyholeEffect:0},{CloudMarioHatCloudParticle:0},{particleID:0},{ParticleAssistObject:0},{FireSpark:0},{defaultMovementSpeed:0},{independent:0},{OverlayEffectObject:0},{ExtraLifeEffect:0},{ExplosionStars:0},{Bubbles:0},{SleepingObjectUID:0},
{SleepParticle:0},{MarioXY:0},{KamikazeShellFade:0},{BigSteelyReflection:0},{BigSteelyShine:0},{IcicleDrop:0},{FireworksObject:0},{KingBooCrownParticle:0},{ToolbarObjects:0},{Textboxes:0},{Grids:0},{GameObjTimer:0},{GameObjects:0},{HittableBlocks:0},{PinSolidTiles:0},{AllTiling:0},{Enemies:0},{Destroyers:0},{FireballAffectedEnemies:0},{ContainerItems:0},{HoldableObjects:0},{BackAndForegrounds:0},{ObjectsWithEffects:0},{InvisCollisions:0},{Backgrounds:0},{Foregrounds:0},{InvisHitboxes:0},{ParticlePin:0},
{Particles:0},{CustomObjects:0},{ObjectAssistantObjects:0},{BusterBeetleObjects:0},{LightSources:0},{SineForEffect:0},{ExplodingObjects:0},{Powerups:0},{ThrowableCollisions:0},{NPCs:0},{Bosses:0},{TestObj:0},{LevelChangers:0},{ColoredMenuElements:0},{Platforms:0},{MenuTabs:0},{SlopeAssists:0},{Solid2:0},{MiscSolids:0},{PlayableCharacters:0},{YoshiTongues:0},{Fonts:0},{Goombas:0},{FireyObjects:0},{EditorTiles:0},{Tilemaps:0},{minigameSelected:0},{minigameScore:0},{loopCount:0},{tilesUID:0},{newHighScore:0},
{minigameID:0},{score:0},{dustLocation:0},{goombaExtraY:0},{spawnLeftOrRight:0},{randomPos:0},{coinExtraY:0},{goombaX:0},{goombaY:0},{coinLayer:0},{coinX:0},{coinY:0},{booAnims:0},{randomBooAnim:0},{generalBooAnim:0},{singleBooAnim:0},{boosToSpawn:0},{booUID:0},{presetSelected:0},{keycodeleft:0},{keycoderight:0},{keycodejump:0},{keycodeduck:0},{keycodespinjump:0},{keycodeholditem:0},{keycoderun:0},{keycodeuseitem:0},{keycodelookup:0},{keycodereleaseitem:0},{keycodepause:0},{keycodesnapshot:0},{keycodestartrecord:0},
{keycodestoprecord:0},{titleScreenState:0},{minigameActive:0},{itemList:0},{whileIndex:0},{deltaTimingEnabled:0},{toolbarColorSchemeID:0},{isWidescreen:0},{BGAMOUNT:0},{FGAMOUNT:0},{MUSICAMOUNT:0},{MUSICSTRINGS:0},{BACKGROUNDSTRINGS:0},{FOREGROUNDSTRINGS:0},{OVERLAYSTRINGS:0},{defaultOverlayAngles:0},{defaultOverlaySpeeds:0},{timerIsActive:0},{isPaused:0},{levelTime:0},{inventoryItem:0},{coins:0},{points:0},{inventoryEnabled:0},{screenWrap:0},{videoFileName:0},{levelCodeOptimizer1:0},{levelCodeOptimizer2:0},
{levelCodeOptimizer3:0},{levelCodeOptimizer4:0},{LEVELCODEOPTIMIZER5:0},{levelStarted:0},{exitToEntrance:0},{exitToMap:0},{entranceAmount:0},{nextLayoutAction:0},{loadFromStorage:0},{setArrayAtX1:0},{setArrayAtX2:0},{setArrayAtX3:0},{mapCount:0},{mapSelected:0},{quickplay:0},{predictedLevelCompletionPhase:0},{music:0},{backgrounddata:0},{selectedTheme:0},{selectedThemeID:0},{background:0},{foreground:0},{previousbackground:0},{previousforeground:0},{backgroundColor:0},{bgscroll:0},{fgscroll:0},{bgmovement:0},
{fgmovement:0},{bgspeed:0},{fgspeed:0},{canUseMouse:0},{layerSelected:0},{gridActive:0},{toolbarHidden:0},{backgroundHidden:0},{autosaveDefaultTimer:0},{autosaveTimer:0},{timeSpent:0},{editMode:0},{toolbarActiveMenu:0},{toolbarActivePage:0},{camSpeedY:0},{camSpeedX:0},{quickStartEntrance:0},{quickStartMap:0},{levelSelected:0},{levelWidth:0},{levelHeight:0},{activeTile:0},{activeTilemap:0},{activeTilesetName:0},{snapY:0},{snapX:0},{levelMode:0},{levelCode:0},{appearance:0},{appearanceParam:0},{calcEntrancesDrop:0},
{themeIndex:0},{musicIndex:0},{bgIndex:0},{customMusicURL:0},{customMusicLoop:0},{customMusicVolume:0},{textDisplay:0},{amountOfTiles:0},{totalLevelSize:0},{mapEntrances:0},{compareDefaultLives:0},{compareDefaultMap:0},{compareDefaultEntrance:0},{levelNameLength:0},{levelDescLength:0},{newLevelWidth:0},{newLevelHeight:0},{dropdownPickedSelection:0},{entranceCountDropdown:0},{mapCountDropdown:0},{editFontX:0},{editFontY:0},{mapFontX:0},{mapFontY:0},{seperatorX:0},{backgroundX:0},{overlayBlockX:0},
{overlayBlockY:0},{listMapsCount:0},{mapPage:0},{selectedEntrance:0},{level4status:0},{level3status:0},{level2status:0},{level1status:0},{levelCodeLocal:0},{levelCodeOptimization1:0},{levelCodeOptimization2:0},{levelCodeOptimization3:0},{levelCodeOptimization4:0},{levelCodeOptimization5:0},{extraThemeX:0},{extraThemeY:0},{extraThemeCounter:0},{movement:0},{lastObjectCount:0},{giftBoxItemList:0},{tooltipText:0},{fontScale:0},{particleX:0},{particleY:0},{particleLayer:0},{particleAnim:0},{particleFrame:0},
{vectorX:0},{vectorY:0},{rotationSpeed:0},{effectName:0},{ObjectUID:0},{animation:0},{sparkCountValue1:0},{sparkCountValue2:0},{vectorYMin:0},{vectorYMax:0},{onscreenTiles:0},{tilesPrepped:0},{lastObjCreated:0},{lastObjDestroyed:0},{marioSpawned:0},{chainCountForSpinningPlatform:0},{animationNames:0},{fireBarCount:0},{distanceBetweenFireAndRotationObject:0},{loadingStatus:0},{buildVersionString:0},{currentDate:0},{unusedVar:0},{isWarpingThroughMaps:0},{mosaicEffectStatus:0},{PSwitchTimer:0},{brownPSwitchTimer:0},
{grayPSwitchTimer:0},{grayCoinsCollected:0},{exclamationSwitchTimer:0},{redCoinTimer:0},{redCoinCollected:0},{redCoinItem:0},{StarmanTimer:0},{MetalTimer:0},{startpointMap:0},{startpointEntrance:0},{warpingState:0},{faceDirectionAfterWarp:0},{objectTroughWarp:0},{objectTroughWarpJSON:0},{runCounter:0},{previousPowerUp:0},{powerUp:0},{collisionType:0},{test:0},{objX:0},{objY:0},{objJ:0},{effectObjUID:0},{tileUID:0},{setWaterMode:0},{previousInventoryItem:0},{newPowerUp:0},{additionalAI:0},{loopPoints:0},
{setTimeMethod:0},{pointsToAdd:0},{finalDigits:0},{enemyUID:0},{stomperUID:0},{freezeType:0},{GameObjectUID1:0},{GameObjectUID2:0},{GameObject1CanDestroy:0},{GameObject2CanDestroy:0},{GameObject1direction:0},{GameObject2direction:0},{GameObject1vectorX:0},{GameObject2vectorX:0},{objUID:0},{KoopaUID:0},{koopaUID:0},{newState:0},{playerUID:0},{deceleration:0},{maximumSpeed:0},{distanceFromShell:0},{beetleUID:0},{animSpeed:0},{lakituUID:0},{destroyerUID:0},{fallOffCloud:0},{rodUID:0},{MuncherUID:0},
{ThwimpUID1:0},{ThwimpUID2:0},{ThwimpDirection1:0},{ThwimpDirection2:0},{attachedPokeyInitUID:0},{PokeySegmentID:0},{icicleUID:0},{imagePointIndex:0},{bulletUID:0},{blockUID:0},{KabOmbUID:0},{LotusUID:0},{gravitySpeed:0},{UID:0},{damagedObj:0},{fishboneUID:0},{chuckUID:0},{Steely1Momentum:0},{Steely2Momentum:0},{wallWalkerUID:0},{bullyUID:0},{knockbackTimer:0},{maxSpeed:0},{sunUID:0},{damagerUID:0},{assignedChainID:0},{rngDirection:0},{chompUID:0},{flameX:0},{meteorUID:0},{roundedAngle:0},{swooperUID:0},
{giftAndChestItemStrings:0},{BlockUID:0},{vectorYFromBlock:0},{redCoinCount:0},{grayCoinPoints:0},{clockUID:0},{TriggeringPOWBlockX:0},{TriggeringPOWBlockY:0},{switchUID:0},{NPCUID:0},{springboardUID1:0},{springboardUID2:0},{springboard1Y:0},{springboard2Y:0},{parachuteUID:0},{objUIDToAttach:0},{ObjUIDToUnattach:0},{destroyParachute:0},{parachuteCyclePos:0},{GameObjectsUID:0},{cloudUID:0},{destroyCloud:0},{jumpedOut:0},{bubbleImagePoints:0},{bubbleIUID:0},{Soccer1VectorX:0},{Soccer2VectorX:0},{Soccer1VectorY:0},
{Soccer2VectorY:0},{comparedChestTag:0},{chestUID:0},{chestItemAI:0},{forcePreventWarping:0},{tokenIndex:0},{platformUID:0},{newPlatformX:0},{newPlatformY:0},{randomizer:0},{generatorUID:0},{bulletX:0},{bulletY:0},{spawnsHorizontal:0},{meteorsToSpawn:0},{newCheepCheepAnim:0},{musicEndPoint:0},{tileAnimationName:0},{parentID:0},{size:0},{platformID:0},{textX:0},{textWidth:0},{textHeight:0},{effectEnabled:0},{textScale:0},{isCheckboxInfo:0},{objUIDToAttachTo:0},{textboxX:0},{textboxY:0},{placeholder:0},
{textboxWidth:0},{textboxHeight:0},{index:0},{dropdownX:0},{dropdownY:0},{options:0},{dropdownWidth:0},{dropdownHeight:0},{selectedIndex:0},{frameX:0},{frameY:0},{frameWidth:0},{frameHeight:0},{bgcolor:0},{bgAnim:0},{fgAnim:0},{layer:0},{x:0},{y:0},{hasTween:0},{endTweenValue:0},{checked:0},{value1:0},{value2:0},{value3:0},{value4:0},{value5:0},{value6:0},{value7:0},{value8:0},{bossGatesStatus:0},{turnOn:0},{BowserUID:0},{attackerObjName:0},{livesToSubtract:0},{eventID:0},{bowserAttacks:0},{bowserMagicUID:0},
{BoomBoomUID:0},{attackerUID:0},{flameAngle:0},{damage:0},{particleAngle:0},{funcParamCount:0},{loopIndexForArray:0},{tileMiscValue:0},{tileAnim:0},{chestItems:0},{mapDropdownSelectedIndex:0},{lakituItems:0},{errorsEncountered:0},{platformSinePeriod:0},{BBItem:0},{amplitudeSpeedMinimum:0},{BowserItem:0},{checkboxValues:0},{magnitude:0},{tabSwitch:0},{particleSpawnX:0},{hostUID:0},{objLayer:0},{posX:0},{posY:0},{objAngle:0},{animName:0},{sizeSine:0},{checkBoxUID:0},{fgIndex:0},{refillID:0},{activeBG:0},
{tabUID:0},{loopValue:0},{style:0},{length:0},{AngleChange:0},{HSMagnitude:0},{HSPeriod:0},{HSPeriodOffset:0},{VSMagnitude:0},{VSPeriod:0},{VSPeriodOffset:0},{tileID:0},{tileFrame:0},{tileAnimationFrame:0},{tileAngle:0},{cutsceneActive:0},{powerUpObjNames:0},{randomNumber:0},{jumpType:0},{forcedBounce:0},{marioUID:0},{playSFX:0},{flee:0},{pokeyAnim:0},{damaged:0},{instaKill:0},{warpObjUID:0},{warperUID:0},{tweenTag:0},{animTimer:0},{grabberUID:0},{ItemUID:0},{selectedConveyorSpeed:0},{selectedConveyorDirection:0},
{selectedTile:0},{betweenTilesSpace:0},{extraX:0},{extraY:0},{tmapUID:0},{tmapTile:0},{tilemapUID:0},{layerName:0},{tooltipSpawnX:0},{tooltipSpawnY:0},{pageID:0},{fileName:0},{tileData:0},{layerID:0},{tileX:0},{tileY:0},{special1:0},{special2:0},{collisionData:0},{slopeWidth:0},{slopeHeight:0},{slopeAssistAnim:0},{colX:0},{colY:0},{extraSpace:0}]}"use strict";
{const e=self.C3;function d(a,b){return"number"===typeof a&&"number"===typeof b}function c(a,b){return d(a,b)?a+b:a}function f(a,b){return d(a,b)?a-b:a}function g(a,b){return d(a,b)?a*b:a}function h(a,b){return d(a,b)?a/b:a}function m(a,b){return d(a,b)?a%b:a}function k(a,b){return"string"===typeof a||"string"===typeof b?("number"===typeof a?(Math.round(1E10*a)/1E10).toString():a)+("number"===typeof b?(Math.round(1E10*b)/1E10).toString():b):a&&b?1:0}self.C3_ExpressionFuncs=[a=>{const b=a._GetNode(0),
l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject()+l.ExpInstVar()*p()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-64*l()},()=>-256,()=>256,()=>0,()=>-512,()=>"Music",()=>"highScore",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar())},()=>"minigame",()=>"cam",()=>320,()=>960,()=>.6,()=>"moveSpeed",()=>-64,()=>64,()=>"scores",a=>{const b=a._GetNode(0);return()=>
k("https://luigibonus.com/api/getscores",b.ExpInstVar())+".php"},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()-1},()=>"Loading...",()=>"CONNECT TO THE INTERNET TO VIEW THE LEADERBOARD",()=>"personalBest",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>k("PERSONAL BEST: ",b.ExpObject(l.GetValue()-1))},()=>1,()=>"Become Metal Mario and destroy all the Brick Blocks on-screen by jumping or running into them! Each wave is 14 seconds. If the time is up and not all bricks are destroyed, it's game over.",
()=>2,()=>"How many Goombas can you stomp before reaching the ground? Get the largest combo you possibly can in Combo Stomper! Collect coins to spawn golden Goombas that are worth more points!",()=>3,()=>"One Boo is not like the others! Can you spot the one with the different expression before time runs out? Get to the highest round as you can!",()=>"minigameInfo",()=>"playGame",a=>{const b=a._GetNode(0).GetVar();return()=>k("MG",b.GetValue())},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("cam")},
a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("moveSpeed")},()=>"backToTitle",()=>"backToMinigames",()=>"returnInfo",()=>"",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod();return()=>b(l(),"|")-1},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()%2},a=>{const b=a._GetNode(0).GetVar();return()=>k("[color=F8D820]#",b.GetValue()/2+1)},a=>{const b=a._GetNode(0).GetVar();return()=>k("[color=C0C0C0]#",b.GetValue()/2+1)},()=>4,a=>{const b=a._GetNode(0).GetVar();return()=>
k("[color=885818]#",b.GetValue()/2+1)},()=>6,a=>{const b=a._GetNode(0).GetVar();return()=>k("[color=C0E0E0]#",b.GetValue()/2+1)},()=>18,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetVar();return()=>" "+b(l(),p.GetValue()-1,"|")+"[/color]\n   "+r(t(),u.GetValue(),"|")+"\n\n"},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),
r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetVar();return()=>" "+b(l(),p.GetValue()-1,"|")+"[/color]\n    "+r(t(),u.GetValue(),"|")+"\n\n"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()},()=>"settingTileAngle",()=>"HUD",()=>240,()=>640,()=>480,()=>"opacity",()=>50,()=>-240,()=>544,()=>384,()=>"posY",a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()},()=>"smcminigamescores",()=>"uploadScore",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1),p=a._GetNode(2);
return()=>k(k(k("https://luigibonus.com/api/savescores.php?table=scoresMG",b.GetValue())+"&name=",l.ExpObject(1))+"&score=",p.ExpInstVar())},()=>"POST",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>k(k(k("https://luigibonus.com/api/savescores.php?table=scoresMG2",b.GetValue())+"&name=",l.ExpObject(1))+"&score=",p.GetValue())},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>k(k("https://luigibonus.com/api/savescores.php?table=scoresMG3&name=",b.ExpObject(1))+
"&score=",l.GetValue()-1)},()=>80,()=>-384,()=>"showScore",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>k(k("YOUR SCORE\n",b.GetValue())+" POINTS\n\nPERSONAL BEST\n",l.ExpObject(p.GetValue()))+" POINTS"},()=>160,()=>96,()=>-144,()=>"restart",()=>"restartMinigame",()=>-96,()=>128,()=>-152,()=>"restartBtnTooltip",()=>"RETRY",()=>-104,()=>"backBtnTooltip",()=>"QUIT",()=>"\n\nNEW HIGHSCORE!",()=>"SFX",()=>352,()=>120,()=>"RETRIEVING SCORES ...",()=>208,()=>280,
()=>460,()=>88,()=>364,()=>"leaderboard",()=>"LEADERBOARD",()=>176,()=>16,a=>{const b=a._GetNode(0).GetVar();return()=>k("https://luigibonus.com/api/getscores",b.GetValue())+".php"},()=>"refresh",a=>{const b=a._GetNode(0).GetVar();return()=>k("#",b.GetValue()/2+1)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetVar();return()=>" "+b(l(),p.GetValue()-1,"|")+"\n   "+
r(t(),u.GetValue(),"|")+"\n----------\n"},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetVar();return()=>" "+b(l(),p.GetValue()-1,"|")+"\n    "+r(t(),u.GetValue(),"|")+"\n----------\n"},()=>"Updating leaderboards...",()=>20,()=>"Metalhead Block Bust ",()=>"Objects",()=>400,()=>"changeHUD",()=>448,()=>"minigameinfo",()=>"DESTROY ALL BRICKS WITHIN 14 SECONDS!",()=>
32,()=>432,()=>"minigameTimer",()=>"createBlocks",()=>"MetalMusic",()=>"TitleMusic",a=>{const b=a._GetNode(0);return()=>k("",Math.round(1E3*b.ExpBehavior("minigameTimer"))/1E3)},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("minigameTimer")},()=>.1,a=>{const b=a._GetNode(0);return()=>1+b.ExpInstVar()/400},a=>{const b=a._GetNode(0);return()=>k("BRICKS DESTROYED: ",b.ExpInstVar())},()=>"checkForCompletion",()=>10,()=>-21978153983,()=>"BigDust",()=>"Debris",()=>.5,()=>"0Spark",a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>b(-256,-512)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-512,512)},()=>"7Spark",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(32,618)},()=>-80,()=>14,()=>-717750023016447,()=>600,a=>{const b=a._GetNode(0);return()=>8+Math.round(b.ExpInstVar()/12)},()=>5,a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,19))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,1))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,
2))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,3))},()=>58,()=>19,()=>200,()=>1200,a=>{const b=a._GetNode(0);return()=>Math.round(b.ExpInstVar()/200)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0,19)},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>b.ExpObject(l.ExpObject(),p.ExpObject())},a=>{const b=a._GetNode(0);return()=>16+32*b.ExpObject()},a=>{const b=a._GetNode(0);return()=>400-32*b.ExpObject()},()=>.2,()=>"PoisonDust",()=>"pos",a=>
{const b=a._GetNode(0);return()=>b.ExpObject()-64},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+64},()=>1.4,a=>{const b=a._GetNode(0);return()=>k("BRICKS DESTROYED: ",b.ExpInstVar())+" / GOOD WORK!"},a=>{const b=a._GetNode(0);return()=>k("FINAL SCORE: ",b.ExpInstVar())},()=>"endresults",()=>-360090058097663,()=>"Metalhead Block Bust Visual Effects",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(.2,2))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(7,14))},
a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-256,256)},()=>"Meteor",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-480},()=>1.2,()=>"Combo Stomper Main Events",()=>560,()=>180,()=>"musicChange",()=>"play",()=>11,()=>"m20",()=>15,()=>"reloadGoombas",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(3,5)},()=>"spawnGoombaL",()=>"spawnGoombaR",()=>"spawnRex",()=>30,()=>"spawnGoonie",()=>36,()=>"startWind",()=>"jumpToStartMessage",()=>"Coin",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l(-256,-96),p(96,256))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-64,-384)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(360,720,1440)},()=>"none",()=>"displaycoins",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"X "+b(l.GetValue(),2)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(2,4)},()=>"rightWind",()=>"downWind",()=>-16,()=>"leftWind",()=>656,()=>12,a=>
{const b=a._GetNode(0).GetVar();return()=>400-b.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(1,3)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-16,656)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-48,656)},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+32},()=>"windWarning",()=>.9,a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("leftWind","rightWind","downWind")},()=>90,()=>270,a=>{const b=
a._GetNode(0).GetBoundMethod();return()=>32*Math.round(b(0,18))+16},a=>{const b=a._GetNode(0).GetVar();return()=>192+b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()+32},()=>60,()=>100,()=>140,a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,4))},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Walk")},()=>"mario",()=>"goonie",()=>624,a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Hit")},()=>"hasGivenCoin",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-
16},()=>"minigameScore",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"SCORE: "+b(l.GetValue(),3)},()=>"Hit",()=>"hasGivenScore",()=>360,()=>"Boo Busters Event",()=>"Overlay",()=>"Blindness",()=>704,()=>"createLightSources",()=>"MinigameMusic",()=>"X",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+960},()=>2.8,()=>"LightSourceSize",()=>"Layered",()=>"moveY",()=>.3,()=>"timer",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,6))},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>b(l.GetValue(),p.GetValue(),",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>b(l.GetValue(),p.GetValue()+1,",")},()=>"roundAndTimer",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k("ROUND ",b.GetValue())+"\nTIME LEFT: ",l.ExpInstVar())},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(640,640,640,80)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(480,
480,480,80)},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()%8},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()/10+1},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>b(l.ExpObject()-p.ExpObject()/2,r.ExpObject()+t.ExpObject()/2)},()=>"1Chase",()=>"BBArmsDown",a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()+3},()=>17,a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()%5},()=>-20,a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>Math.round(b(0,359))},a=>{const b=a._GetNode(0).GetVar();return()=>16+4*b.GetValue()},()=>216,a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior()*l()},a=>{const b=a._GetNode(0);return()=>1602+Math.abs(b.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>960-Math.abs(b.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>958-Math.abs(b.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>1600+Math.abs(b.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>482+
Math.abs(b.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>-2-Math.abs(b.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>480+Math.abs(b.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-32},()=>"-3 sec",()=>"Y",()=>"scale",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-8},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-40},()=>"!",()=>1.5,a=>{const b=a._GetNode(0);return()=>2*b.ExpObject()},()=>.7,()=>"+3 sec",()=>"addToTimer1",()=>"addToTimer2",()=>.8,()=>"addToTimer3",
()=>"MinigameGameOver",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+4},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-4},()=>"Tongue",()=>"1Idle",()=>"Smug",()=>"moveX1",()=>.75,()=>"moveX2",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+128},()=>"Flee",()=>"shake",()=>"posXY",()=>928,()=>"Evil",()=>"Sunshine",()=>"width",()=>"height",()=>"Sleep",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("Sleep","Sleep","Evil")},()=>"flipOver",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+
544},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()+384*l()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>384*b()},()=>"0Idle",()=>"Biting",()=>.33,a=>{const b=a._GetNode(0);return()=>-1*b.ExpObject()},()=>"default",()=>"mainmenu",()=>"playTitleMusic",()=>"smcnews",()=>"https://luigibonus.com/api/smcnews.json",()=>"Enemies",()=>"BG1",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("Date()")},()=>13,()=>225,()=>"g2",()=>"solid",()=>"g5",a=>{const b=
a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),4,6)},()=>"Dec 24",()=>"Dec 25",()=>"Dec 26",()=>"Background",()=>-335871,()=>-320,()=>"https://www.dl.dropboxusercontent.com/s/puz4mcivdcnparg/Super%20Merry-o%20Bros.Super%20Mario%20Christmas%20Mashup.mp3",()=>-5,()=>368,()=>"eventinfo",()=>"IT'S A GIFT!",()=>"smcnewslocal",()=>"news",a=>{const b=a._GetNode(0);return()=>b.ExpObject("news.timestamp")},()=>"notifAlert",()=>"[SMC] Could not access SMC API, will read from local JSON file.",
()=>-10,()=>"settings",()=>"youtube",()=>"https://www.youtube.com/channel/UCKdF_3tTZElLGeF9qkEqFqA",()=>"LSSYouTube",()=>"discord",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-72},()=>"discordsmc",()=>"SMC DISCORD",()=>144,()=>"discordlss",()=>"LSS DISCORD",()=>"eventmenu",()=>"Title Screen Effects",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject()-256,p.ExpObject()+256)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);
return()=>b(l.ExpObject()-64,p.ExpObject()+80)},()=>"Twinkle",a=>{const b=a._GetNode(0);return()=>b.ExpObject()/2},()=>7,a=>{const b=a._GetNode(0);return()=>b.ExpObject()-1},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>Math.round(b(l.ExpObject()-p.ExpObject()/2,r.ExpObject()+t.ExpObject()/2))},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+48},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(-128,128))},a=>
{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(-64,-256))},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()%2},a=>{const b=a._GetNode(0);return()=>2*(b.ExpInstVar()/5+1)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(1,2))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(-64,-512))},()=>"Tiles",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>Math.round(b(l.ExpObject()-p.ExpObject()/
4,r.ExpObject()+t.ExpObject()/4))},()=>"GiftBox",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,10))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2);return()=>b(l.GetValue(),p.ExpObject()+1,",")},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("Bounce","BrickBlock","EnemyDefeat","Door","Explosion","HeavyStomp","Springboard","PowerUp","PowerDown","Stomp")},()=>.4,()=>8,a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(-64,
64))},()=>-128,()=>"pos1",()=>108,()=>"size",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-192},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-80},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+96},()=>"pos2",()=>"Options",()=>"Options Main",()=>"displayerror",()=>"overlaymenuseperator",()=>224,()=>416,()=>"smcversion",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l(),"s","v")+"\n"+p("ANNIVERSARY UPDATE PART 3 | 28-12-2020",
0," | ")},()=>608,()=>112,()=>"welcomemessage",a=>{const b=a._GetNode(0);return()=>k("WELCOME BACK, ",b.ExpObject(1))+"!"},()=>"buttonTooltip",()=>"1pgame",()=>"1 PLAYER MISSIONS",()=>"Brightness",()=>40,()=>288,()=>"leveleditor",()=>"LEVEL EDITOR",()=>192,()=>"playlevel",()=>"PLAY LEVEL",()=>"miniGames",()=>"MINIGAMES",()=>"SETTINGS",()=>312,()=>248,()=>"options",()=>336,()=>436,()=>"profilename",()=>"NAME:",()=>186,()=>22,a=>{const b=a._GetNode(0);return()=>b.ExpObject(1)},()=>"Enter a name",()=>
"settingssound",()=>"GAME AUDIO: ON",()=>"GAME AUDIO: OFF",()=>"settingsfullscreen",()=>"ENABLE FULLSCREEN",()=>"DISABLE FULLSCREEN",()=>"changeTargetFPS",()=>"TARGET FPS: 60",()=>"TARGET FPS: 30",()=>"settingscontrols",()=>"CONFIGURE CONTROLS",()=>"quitsettings",()=>"RETURN TO MENU",()=>"customcontrols",()=>"configurecontrols",()=>"CUSTOMIZE YOUR CONTROLS",()=>440,()=>"backtosettings",()=>"\u2190 BACK",()=>222,()=>"controlspreset",a=>{const b=a._GetNode(0).GetVar();return()=>k("PRESET: ",b.GetValue())+
"/3"},()=>276,()=>"HAPPY HOLIDAYS! THE ANNIVERSARY UPDATE IS HERE WITH A WHOLE BUNCH OF NEW STUFF! CHECK OUT THE WHAT'S NEW SECTION!\n\nTHAT'S ALL I HAVE TO SAY FOR NOW. OH, AND THAT YOU ARE A BEAUTIFUL PERSON CAPABLE OF CREATING MANY COOL LEVELS - SO GO AHEAD AND MAKE SOME!",()=>576,()=>"temptext",()=>"musiclink",()=>"MUSIC BY NOTEBLOCK",()=>"glossary",()=>"toggleDeltaTiming",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),12)},()=>"NotificationMenu",()=>"Menu Navigation",
()=>"notifications",()=>48,()=>"notificationsmenu",()=>"ABOUT",()=>"about",()=>"WHAT'S NEW",()=>"whatsnew",()=>"BACKUPS",()=>"backups",()=>504,()=>"CREDITS",()=>"credits",()=>"changeOverlayMenu",()=>"WELCOME TO SUPER MARIO CONSTRUCT!\n\nTHIS IS A GAME THAT ALLOWS YOU TO CREATE YOUR OWN MARIO LEVELS. IT IS NOT INTENDED TO COMPETE WITH SUPER MARIO MAKER OR ANY OF ITS SEQUELS/OTHER NINTENDO GAMES.\n\nTO SHARE, BROWSE AND REVIEW LEVELS, CHECK OUT OUR LEVEL SHARING SITE:",()=>232,()=>"HTTPS://LEVELPALACE.COM",
()=>"lplink",()=>264,()=>"CHECK OUT THE COMMUNITY-MADE GUIDE FOR SMC, MADE BY THEFLYINGDUTCHMAN:",()=>"HTTPS://DUTCHBAGSTUFF.WEEBLY.COM/",()=>"guidelink",()=>344,()=>"THIS IS A FAN-GAME NOT AFFILIATED WITH NINTENDO MADE SIMPLY  FOR FUN. CHECK OUT CREDITS FOR MORE INFO.",()=>92,()=>"WHAT'S NEW? ",()=>"BUILD VER: ANNIVERSARY UPDATE PART 3 | 28-12-2020",()=>324,()=>172,()=>548,()=>"changeloghistory",()=>"CHANGELOG HISTORY",()=>212,()=>"ANNIVERSARY UPDATE - PART 3 is here!\n\nThis part focuses on King Boo!\nCheck him out in the boss section, he's got a varied amount of attacks and gimmicks!",
()=>"BACKUPS ",()=>"KEEP YOUR LEVELS SAFE!",()=>156,()=>"TO PREVENT LOSING YOUR LEVELS, YOU SHOULD SAVE YOUR LEVEL CODES ON LEVEL PALACE OR ANOTHER SITE AS A BACKUP.\n\nSOME PROGRAMS LIKE ANTI-VIRUS OR DISK CLEANUP APPS MAY DELETE LEVELS THAT ARE SAVED IN-GAME SOMETIMES.\n\nTO ENSURE YOUR LEVELS ARE EVEN MORE SAFE, YOU CAN HOST THE LEVEL CODE OF YOUR LEVEL ON ANOTHER SITE, SUCH AS LEVEL PALACE, OR A STORAGE PROVIDER, SUCH AS GOOGLE DRIVE.\n\nTHE GAME INCLUDES AN AUTOSAVE FEATURE THAT AUTOMATICLY SAVES YOUR LEVEL EVERY 5 MINUTES. IT ALSO SAVES YOUR LEVEL EVERY TIME YOU TEST, SWITCH MAPS IN-EDITOR, OR CREATE A NEW MAP.",
()=>.85,()=>"CREDITS ",()=>"MAIN GAME DESIGN / PROGRAMMING: LUIGIBONUS\n\nSPRITE ARTISTS: AMAZINGALIEN, TRISTAPH, RAI, SHIBAM, LINKGAMER715, NITROGAMER, VEN & SMUGLUTENA, LYRICTHELEGEND, EVAN.F (CREATOR OF CUSTOM ENEMIES/TILESETS, NEW THEMES, AND MORE!)\n\nORIGINAL MUSIC BY MAKER AND BANANARAMEN!\n\nSPECIAL THANKS TO VALTTERI FOR SEVERAL TILESET EXTENSIONS!\n\nTHIS IS A FAN-GAME NOT AFFILIATED WITH NINTENDO. THE MARIO IP AND ALL OF ITS PROPERTIES BELONG TO NINTENDO. THIS GAME IS SIMPLY MADE FOR FUN, AND THERE IS NO PROFIT INTEND. THIS GAME IS ALSO NOT INTENDED TO COMPETE WITH MARIO MAKER.",
()=>"Menu Links",()=>"http://levelpalace.com",()=>"Level Palace Website",()=>"https://dutchbagstuff.weebly.com/",()=>"SMC Guide Website",()=>"https://discord.gg/rmC5gnA",()=>"DiscordSMC",()=>"https://discord.gg/m8U8FQw",()=>"DiscordLSS",()=>"https://dutchbagstuff.weebly.com/changelogs.html",()=>"https://www.youtube.com/watch?v=XD3D8uXozeA",()=>"Music Link",()=>"News Feed",()=>"News Menu",()=>"NotifSFX",()=>"checkVersion",()=>"changeNewsMenu",()=>"home",()=>"versionchecker",()=>"updateInfo",()=>"https://docs.google.com/document/d/e/2PACX-1vQHu0FJt6b7S2W5L0_UcfqG9bFAVpG9qw1iHJ7kb5jryZOS2YHJqpR_PVk9CIDP9Vn2Oc2ghrbyx7AB/pub",
()=>556,()=>304,()=>"https://www.luigibonus.com/api/smcfeed/news.html",()=>"Version Checker",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod();return()=>b(l(),1)},()=>"s",a=>{const b=a._GetNode(0);return()=>b.ExpObject("newestver")},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>"VER. "+b()+" (STABLE) - USING LATEST VERSION!"},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>k("VER. "+b()+" (STABLE) - UPDATING TO ",l.ExpObject("newestver"))+"!"},
()=>"b",a=>{const b=a._GetNode(0);return()=>b.ExpObject("newestverbeta")},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>"VER. "+b()+" (BETA) - USING LATEST VERSION!"},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>k("VER. "+b()+" (BETA) - UPDATING TO ",l.ExpObject("newestverbeta"))+"!"},()=>"Notification",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-56},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-48},()=>"mail",()=>"NEW MAIL!",()=>"Playing",()=>"Editor",()=>
"Editing",()=>"mapsign",()=>"editing",()=>"edit",()=>"cursor",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b()+16-l()%p.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b()-l()%p.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>Math.round(b()+16-l()%p.GetValue())},()=>"placeTileFromCursor",
a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b())/32},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar_Family()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3);return()=>b(l(p.GetValue(),r.ExpInstVar_Family(),""))-1},()=>"Eraser",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/32},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>Math.round(f(c(b(0),
16),m(l(0),p.GetValue())))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>Math.round(f(c(b(1),16),m(l(1),p.GetValue())))},()=>"en",()=>"ex",()=>"ec",()=>"m",()=>"f",()=>"t",()=>"c58",()=>"w64",()=>"o55",()=>"updateAnimation",()=>"mirror",()=>"flip",()=>"facetop",()=>"facebottom",()=>"setangle",()=>"updateAnimTemp",()=>"o78",()=>"o79",()=>"o80",()=>"o3",()=>"o4",()=>"o5",()=>"o6",()=>"o30",()=>"e107",()=>"o38",()=>"e16",()=>"o18",()=>
"o53",()=>"tag",()=>"gen1",()=>"gen2",()=>"gen3",()=>"gen4",()=>"ct",()=>"cbg",()=>"cbc",()=>"cm",()=>"co",()=>"clm",()=>"m44",()=>"o11",()=>"o67",()=>"o17",()=>"o20",()=>"o31",()=>"o28",()=>"o33",()=>"o39",()=>"o41",()=>"o42",()=>"o48",()=>"o56",()=>"o57",()=>"o58",()=>"o59",()=>"o60",()=>"o68",()=>"o71",()=>"e17",()=>"e18",()=>"e32",()=>"e40",()=>"e75",()=>"e91",()=>"e115",()=>"e117",()=>"e118",()=>"e119",()=>"e121",()=>"e127",()=>"o51",()=>99,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);
return()=>b(l.ExpObject(12))+1},()=>"warpsexits",()=>"toolbarFunction",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(k(b.ExpObject()+",",l.ExpObject())+",",p.ExpInstVar())},()=>"createEntranceFont",()=>"createExitFont",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k(k(b.ExpObject()+",",l.ExpObject())+",",p.ExpInstVar())+",",r.ExpInstVar())},()=>"layer1",()=>25,()=>"layer2",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>h(b(0),32)},
a=>{const b=a._GetNode(0).GetBoundMethod();return()=>h(b(1),32)},()=>-1,()=>"Default",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),0,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b(l(p.GetValue(),1,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),1,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),
p=a._GetNode(2).GetVar();return()=>b(l(p.GetValue(),2,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b(l(p.GetValue(),3,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b(l(p.GetValue(),4,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),5,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();
return()=>b(l.GetValue(),6,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),7,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),8,",")},()=>"pac",()=>"aol",()=>"tileUpdate",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar();return()=>b(l(p.GetValue(),r.GetValue(),","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();
return()=>b(l.GetValue())},()=>"-",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),1)},()=>"r",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),2)},()=>"br",()=>"sw",()=>"cr",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),3)},()=>"ghw",()=>"gen",()=>"p1",()=>"p2",()=>"p3",()=>"p4",()=>"p5",()=>"p6",()=>
"p7",()=>"p8",()=>"p9",()=>"p10",()=>"p11",()=>"p12",()=>"p13",()=>"p14",()=>"p15",()=>"p16",()=>"p17",()=>"p18",()=>"p19",()=>"p20",()=>"p21",()=>"p22",()=>"p23",()=>"p24",()=>"p25",()=>"p26",()=>"o1",()=>"o8",()=>"o9",()=>"o14",()=>"o15",()=>"o16",()=>"o19",()=>"o23",()=>"o24",()=>"o25",()=>"o26",()=>"o32",()=>"o35",()=>"o37",()=>"o40",()=>"o45",()=>"o47",()=>"o52",()=>"o54",()=>"o63",()=>"o73",()=>"e3",()=>"e5",()=>"e8",()=>"e10",()=>"e84",()=>"e13",()=>"e15",()=>"e20",()=>"e21",()=>"e24",()=>
"e33",()=>"e34",()=>"e35",()=>"e39",()=>"e42",()=>"e43",()=>"e46",()=>"e48",()=>"e50",()=>"e51",()=>"e52",()=>"e53",()=>"e55",()=>"e58",()=>"e59",()=>"e69",()=>"e71",()=>"e78",()=>"e81",()=>"e82",()=>"e85",()=>"e88",()=>"e93",()=>"e99",()=>"e100",()=>"e104",()=>"e110",()=>"m7",()=>"m8",()=>"m9",()=>"m10",()=>"m22",()=>"m23",()=>"gh82",()=>"m27",()=>"m28",()=>"m29",()=>"m31",()=>"m34",()=>"m35",()=>"m36",()=>"m37",()=>"m45",()=>"m46",()=>"m47",()=>"m48",()=>"m77",()=>"m78",()=>"m79",()=>"m80",()=>
"m81",()=>"m82",()=>"m83",()=>"g69",()=>"g71",()=>"g73",()=>"c59",()=>"j56",()=>"j57",()=>"j69",()=>"d48",()=>"d73",()=>"w57",()=>"w62",()=>"w63",()=>"w85",()=>"b57",()=>"b58",()=>"b59",()=>"b60",()=>"bn13",()=>"gh90",()=>"bz",()=>"m33",()=>"e25",()=>"e41",()=>"e54",()=>"e102",()=>"e122",()=>"e7",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar())+1},()=>"m26",()=>"m43",()=>"e62",()=>"e63",()=>"e64",()=>"e65",()=>"e101",()=>"e105",()=>"i1",()=>"i2",()=>"i7",()=>
"i10",()=>"i16",()=>"e29",()=>"e60",()=>"e61",()=>"o22",()=>"o50",()=>"e1",()=>"e2",()=>"e11",()=>"e112",()=>"e28",()=>"e70",()=>"e83",()=>"e90",()=>"e96",()=>"e97",()=>"e106",()=>"e9",()=>"e14",()=>"e37",()=>"e86",()=>"e87",()=>"e92",()=>"e22",()=>"e23",()=>"e36",()=>359,()=>512,()=>"0",()=>-192,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>90*b(l.ExpInstVar())},()=>-1024,()=>1024,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(12))-1},()=>
"entrancenumber",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject())},a=>{const b=a._GetNode(0);return()=>b.ExpObject()/32},()=>"exitnumber",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>16*b(l.ExpObject())},()=>75,()=>"R",()=>"L",()=>"createWarpArrow",()=>"vertical",()=>-8,()=>"horizontal",()=>9,a=>{const b=a._GetNode(0);return()=>k("M",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>
b.ExpObject()+16},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>16*b(l.ExpObject())+16},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(1)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(2)},()=>"Camera",a=>{const b=a._GetNode(0).GetVar();return()=>320+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar();return()=>32*b.GetValue()-320-96*l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+64},a=>{const b=a._GetNode(0).GetVar();
return()=>30*b.GetValue()},()=>"onFloor",()=>"ridden",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-64},()=>"flying",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject()+l.ExpBehavior()*p()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-96},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()-240},()=>.01,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();
return()=>b()-l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b()+l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-32},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+32},()=>"Saving",()=>"SaveLevel",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k(k(k(k(k(b.ExpObject(0),"-"),l.ExpObject(1)),"-"),p.ExpObject(2)),"-"),r.ExpObject(3))},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar(),
p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar();return()=>k(k(k(k(k(k(b.GetValue(),"-"),l.GetValue())+"-",p.GetValue())+"-",r.GetValue())+"-",t.GetValue())+"-",u.GetValue())},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar();return()=>b.GetValue()*l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),"c2array","newdata")},()=>"smclvlmetadata",a=>{const b=a._GetNode(0).GetVar();return()=>
k("smclevel",b.GetValue())},()=>"smcgamesettings",()=>"compileBGData",()=>"createmap",a=>{const b=a._GetNode(0);return()=>b.ExpObject(0)},()=>"quit",()=>"playfromentrance",()=>"savelevel",()=>"restartLayout",()=>"switchmaps",()=>"createlevel",()=>"levelcreated",()=>"quickJumpToEntrance",()=>"scrollToEntrance",()=>"autosave",()=>300,()=>"[SMC Log] Autosave complete.",()=>"saveandrefresh",()=>"[SMC Log] Save complete, attempting refresh.",()=>297,()=>"createMenu",()=>"savingLevelIndicator",()=>"saveLevel",
a=>{const b=a._GetNode(0);return()=>k("Screenshot of ",b.ExpObject(0))},()=>"ScreenshotSFX",()=>"SMC has detected an error while saving. This is likely a problem related to ad-blockers or cleanup-software.",()=>"Music & Misc Editor Improvements",()=>"checkCompletionPhase",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>b.ExpObject()/(l.GetValue()*p.GetValue())*100},a=>{const b=a._GetNode(0).GetVar();return()=>"EditingMusic1Phase"+b.GetValue()},()=>"EditMusic",
()=>5.45,()=>"tileSelected",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-256},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+336},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+256},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-336},()=>"Level Settings",()=>"Updating Settings HUD",()=>"updateSettingsHUD",()=>"levelsettings",()=>"editlevelmode",()=>"WATER MODE: OFF",()=>"WATER MODE: ON",()=>"editaudioeffect",()=>"AUDIO EFFECTS: NONE",()=>"AUDIO EFFECTS: CAVE",()=>"editpowerup",()=>"DEFAULT POWER-UP: NONE",
()=>"DEFAULT POWER-UP: MUSHROOM",()=>"DEFAULT POWER-UP: FIRE FLOWER",()=>"DEFAULT POWER-UP: RACCOON",()=>"DEFAULT POWER-UP: HAMMER MARIO",()=>"DEFAULT POWER-UP: CLOUD MARIO",()=>"DEFAULT POWER-UP: ICE MARIO",()=>"DEFAULT POWER-UP: PENGUIN MARIO",()=>"DEFAULT POWER-UP: SHELL MARIO",()=>"DEFAULT POWER-UP: BUNNY MARIO",()=>"editinventoryitem",()=>"INVENTORY ITEM: DISABLED",()=>"INVENTORY ITEM: NONE",()=>"INVENTORY ITEM: MUSHROOM",()=>"INVENTORY ITEM: FIRE FLOWER",()=>"INVENTORY ITEM: RACCOON",()=>"INVENTORY ITEM: HAMMER MARIO",
()=>"INVENTORY ITEM: CLOUD MARIO",()=>"INVENTORY ITEM: ICE MARIO",()=>"INVENTORY ITEM: PENGUIN MARIO",()=>"INVENTORY ITEM: SHELL MARIO",()=>"INVENTORY ITEM: BUNNY MARIO",()=>"editscreenwrap",()=>"SCREEN WRAP: OFF",()=>"SCREEN WRAP: ON",()=>"SCREEN WRAP: ON (MARIO ONLY)",()=>"SCREEN WRAP: ON (OBJECTS ONLY)",()=>"editoverlayeffect",()=>"OVERLAY EFFECT: NONE",()=>"OVERLAY EFFECT: RAIN",()=>"OVERLAY EFFECT: SNOW",()=>"OVERLAY EFFECT: SANDSTORM",()=>"OVERLAY EFFECT: FOG",()=>"OVERLAY EFFECT: DARK FOG",
()=>"OVERLAY EFFECT: FISH",()=>"OVERLAY EFFECT: WATER",()=>"OVERLAY EFFECT: DARKNESS",()=>"OVERLAY EFFECT: BLINDNESS",()=>"OVERLAY EFFECT: WIND",()=>"OVERLAY EFFECT: LAVA BUBBLES",()=>"OVERLAY EFFECT: CURRENT",()=>"toggleautotiling",()=>"AUTO-TILING: ON",()=>"AUTO-TILING: OFF",()=>"toggleObjectSync",()=>"ROTATING OBJECT SYNC: ON",()=>"ROTATING OBJECT SYNC: OFF",()=>"toggleAspectRatio",()=>"ASPECT RATIO: CLASSIC (SNES)",()=>"ASPECT RATIO: MODERN (NSMB)",()=>"editbackgroundsettings",()=>"enablebg",
a=>{const b=a._GetNode(0);return()=>k("Check",b.ExpInstVar())},()=>"enablefg",()=>"editbgscroll",()=>"SCROLL: DISABLED",()=>"SCROLL: LOOP HORIZONTAL",()=>"SCROLL: LOOP VERTICAL",()=>"SCROLL: LOOP ALL",()=>"SCROLL: LOOP NONE",()=>"SCROLL: ONLY HORIZONTAL",()=>"SCROLL: ONLY VERTICAL",()=>"editfgscroll",()=>"editbgmovement",()=>"MOVEMENT: -",()=>"MOVEMENT: \u2190",()=>"MOVEMENT: \u2191",()=>"MOVEMENT: \u2192",()=>"MOVEMENT: \u2193",()=>"editfgmovement",()=>"Toolbar Settings Menu Function",()=>"toolbarSettingsChange",
()=>"mapnumber",()=>"editmap",()=>"confirmMapDeletion",()=>"addmap",()=>"quickeditorinfo",()=>"showupdatenotify",()=>"mapmenu",()=>"menuseperator",()=>"settingslevel",()=>"settingstoolbar",()=>"settingsmaps",()=>"levelinfo",()=>"Level",()=>170,()=>418,()=>"advancedlevelsettings",()=>"MORE OPTIONS",()=>284,()=>202,()=>"editsize",()=>"EDIT LEVEL SIZE",()=>188,()=>116,()=>"levelx",a=>{const b=a._GetNode(0).GetVar();return()=>k("",b.GetValue())},()=>346,()=>"levely",()=>532,()=>136,()=>494,()=>"edittime",
()=>"TIMER",()=>488,()=>"leveltime",a=>{const b=a._GetNode(0);return()=>k("",b.ExpObject(6))},()=>"Disabled",()=>"ReplaceColor",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9).GetVar();return()=>b(l(p(r.GetValue(),0,".")),t(u(w.GetValue(),1,".")),
x(A(E.GetValue(),2,".")))},()=>84,a=>{const b=a._GetNode(0).GetVar();return()=>"BG"+b.GetValue()},()=>290,()=>"editbackground",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod();return()=>"THEME: "+b(l(),"-"," ")},()=>386,()=>"edittheme",()=>"Customized",()=>"editmusic",()=>"MUSIC: ",()=>"Custom",()=>"None (Silent)",()=>"WATER MODE:",()=>272,()=>"editlevelname",()=>"LEVEL NAME",()=>152,()=>296,()=>174,()=>"levelname",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);
return()=>b(l.ExpObject(),"c2array","newdata")},()=>410,()=>"editlevelauthor",()=>"LEVEL AUTHOR",()=>182,()=>"levelauthor",a=>{const b=a._GetNode(0);return()=>b.ExpObject(2)},()=>"editleveldescription",()=>"DESCRIPTION",()=>168,()=>44,()=>"leveldescription",()=>"Enter a short description of your level or its story here. (Optional)",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),"[","")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),
"]","")},()=>"detectTheme",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject(p.ExpObject(),0).toString(),"-"," ")},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()+1},()=>31,a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>k(b.GetValue()+1,". ")+l("Overworld,Athletic,Cave,Castle,Underwater,Ghost House,Boss Battle,Bonus Zone,SMB1 Star Road,Airship,SMB1 Overworld,SMB1 Cave,SMB1 Underwater,Bowser Battle,Final Bowser Battle,Clown Car Battle,Desert,Desert Temple,Beach,SMB1 Castle,SMB1 Bonus,SMAS Choose A Game,Sky And Sea,Volcano (NSMB DS),Volcano (NSMB Wii),Birabuto Kingdom,Muda Kingdom,Easton Kingdom,Chai Kingdom,SML Starman (Can Can),SMB1 Ghost House",
p.GetValue(),",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue())+1},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),7)},()=>"http://",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),8)},()=>"https://",()=>434,()=>"SAVE & QUIT",()=>162,()=>"SAVE & PLAY",()=>"LevelAdvanced",()=>190,()=>"generallevelsettings",()=>"advancedlevelsettings2",()=>"  NEXT \u2192",()=>196,
()=>"editstartpoint",()=>"LEVEL STARTPOINT",()=>"defaultmap",a=>{const b=a._GetNode(0);return()=>k("",b.ExpObject(4))},a=>{const b=a._GetNode(0).GetVar();return()=>k("1 - ",b.GetValue())},()=>"defaultentrance",a=>{const b=a._GetNode(0);return()=>k("",b.ExpObject(5))},()=>"editlives",()=>"LIVES",()=>"defaultlives",a=>{const b=a._GetNode(0);return()=>k("",b.ExpObject(8))},()=>"1 - 99",()=>"INVENTORY ITEM:",()=>414,()=>"editInventoryItem",()=>"Disabled,None,Mushroom,Fire Flower,Raccoon Leaf,Hammer Suit,Cloud Flower,Ice Flower,Penguin Suit,Blue Shell,Carrot,Tanooki Suit,Superball Flower,Frog Suit",
()=>124,()=>446,()=>"editDefaultPowerup",()=>"None,Mushroom,Fire Flower,Raccoon Leaf,Hammer Suit,Cloud Flower,Ice Flower,Penguin Suit,Blue Shell,Carrot,Tanooki Suit,Superball Flower,Frog Suit",()=>"advancedbgsettings",()=>"ADVANCED BACKGROUND SETTINGS",()=>"custommusicsettings",()=>"CUSTOM MUSIC SETTINGS",()=>"editOverlayEffect",()=>"OVERLAY EFFECT:",()=>"editDefaultOverlay",()=>"No overlay,Rain,Snow,Sandstorm,Fog,Dark Fog,Fish,Water,Darkness,Blindness,Wind,Lava Bubbles,Current,Confetti,Autumn Leaves",
a=>{const b=a._GetNode(0);return()=>b.ExpObject(9)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(10)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(11)},()=>"LevelAdvanced2",()=>"\u2190 PREV",()=>244,()=>"THUMBNAIL",()=>"thumbnail",a=>{const b=a._GetNode(0);return()=>k("",b.ExpObject(13))},()=>238,()=>"editdragoncoins",()=>"DRAGON\nCOINS",()=>24,()=>"dragoncoins",a=>{const b=a._GetNode(0);return()=>k("",b.ExpObject(12))},()=>"ASPECT RATIO: ",()=>"AdvancedBGSettings",()=>"advancedbgmessage",()=>
228,()=>292,()=>114,()=>"editcustombgurl",()=>"BACKGROUND  ID OR URL",()=>138,()=>"editBG",()=>"Custom (By URL)",()=>452,()=>"Insert ID or URL",()=>"FOREGROUND  ID OR URL",()=>"editFG",()=>"customCBGWebsite",()=>"FIND CUSTOM BACKGROUNDS",()=>252,()=>"bginfo",()=>"512X432 IMAGES UPSCALED TO 1024X864 WORK BEST!",()=>"bgColorInfo",()=>"BG COLOR",()=>"bgcolor",a=>{const b=a._GetNode(0).GetVar();return()=>""+b.GetValue()},()=>"BG Color (RGB)",()=>326,()=>"editBGScroll",()=>"SCROLLING\nMETHOD",()=>328,
()=>"BGScroll",()=>"Disabled,Loop Horizontal,Loop Vertical,Loop All,Loop None,Only Horizontal,Only Vertical",()=>348,()=>"editBGMovement",()=>"MOVEMENT",()=>"BGMovement",()=>"Disabled,Move Left,Move Up,Move Right,Move Down",()=>468,()=>"editBGSpeed",()=>"SCROLLING\nSPEED",()=>"BGSpeed",()=>"Slow,Normal,Fast,VERY Fast",a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()/16-1},()=>382,()=>356,()=>"FGScroll",()=>"FGMovement",()=>"FGSpeed",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetBoundMethod(),
p=a._GetNode(2).GetVar();return()=>k(b.GetValue(),". ")+l("Disabled,Overworld,Clouds 1,Cave,Clouds 2,Clouds 3,Night,Fortress,Bonus Zone,Underwater,Clouds 4,Icy Cave,Night (Green),Clouds 5,Dark Cave,Dark Castle,Stars (Transparent),Boss Arena,Dark Clouds,Volcanic Cave",p.GetValue(),",")},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>k(b.GetValue(),". ")+l("Disabled,Overworld,Hills,Desert,Forest,Mountains,Castle,Fortress,Fortress (Dark),Ghost House,Hills (Dark),Forest (Blue),Snow Overworld,Snow Mountains,Sunken Ship,Frozen Castle,Beach,Hills (Ice),Volcano,Volcanic Cave,Waterfall Hills,Bright Ghost House,Bright Ghost House 2,Forest (Autumn),Forest (Winter)",
p.GetValue(),",")},()=>"0.204.255",()=>"CustomMusicSettings",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),2,",")},()=>"editcustommusicurl",()=>"LEVEL CUSTOM MUSIC URL",()=>424,()=>420,()=>"custommusicurl",()=>"Custom Music URL",()=>536,()=>"setcm",()=>"SAVE",()=>"editcmloop",()=>"LOOP POINT:",()=>"cmloop",()=>"0.00",()=>"editcmvolume",()=>"VOLUME:",()=>520,()=>"cmvolume",()=>"(Default)",()=>"-5 db",()=>"-10 db",()=>226,()=>"THIS CUSTOM MUSIC APPLIES TO THIS MAP ONLY. YOU CAN USE DIFFERENT MUSIC ON EACH MAP! THE AUDIO FILE MUST BE AN .MP3 OR .OGG, & TRY TO USE SONGS UNDER 5 MINUTES TO PREVENT LONG LOAD TIMES!",
()=>"Toolbar",()=>"toolbartheme",a=>{const b=a._GetNode(0).GetVar();return()=>"SELECT THEME: "+b.GetValue()},()=>"togglegrid",a=>{const b=a._GetNode(0).GetVar();return()=>k("GRID: ",b.GetValue())},()=>"gridtheme",a=>{const b=a._GetNode(0).GetVar();return()=>"GRID THEME: "+b.GetValue()},()=>"togglecursor",()=>"CUSTOM CURSOR: OFF",()=>"editormusic",()=>"EDITOR MUSIC: DEFAULT",()=>"colorscheme",()=>"MENU COLOR: ",()=>"menucolor",()=>"Mystery Blocks,Sunrise,World 2-2,Gray Day,Lime,Totally Luigi,Beautiful Waluigi",
()=>"SELECT THEME: DEFAULT",()=>"SELECT THEME: GRAYSCALE",()=>"SELECT THEME: SEPIA",()=>"SELECT THEME: VIRTUAL BOY",()=>"SELECT THEME: GAMEBOY",()=>"OFF",a=>{const b=a._GetNode(0).GetVar();return()=>"GRID: "+b.GetValue()},()=>"ON",()=>"GRID THEME: DEFAULT",()=>"GRID THEME: BRICK BLOCK",()=>"GRID THEME: THIN",()=>"GRID THEME: STRIPED",a=>{const b=a._GetNode(0).GetVar();return()=>"CUSTOM CURSOR: "+b.GetValue()},()=>"EDITOR MUSIC: LEVEL MUSIC",()=>"EDITOR MUSIC: OFF",()=>"Maps",()=>"mapsmessage",()=>
"LIST OF MAPS IN THIS LEVEL",()=>"countMaps",()=>"addMapMenu",()=>"CREATE A NEW MAP",()=>442,()=>"CREATE",()=>430,()=>"SET MAP SIZE",()=>148,()=>"newmapx",()=>412,()=>"newmapy",()=>"levelInfo",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject(l(),6)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject(l(),7)},()=>"levelinformationheader",()=>"LEVEL INFORMATION",()=>184,()=>"levelinformation",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetVar(),
r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar();return()=>k(k(k(k(k("- GENERAL INFO -\n\nLEVEL NAME: ",b.ExpObject(0))+"\n\nLEVEL AUTHOR: ",l.ExpObject(2))+"\n\nSURFACE AREA: ",p.GetValue())+" TILES\n\n\n- TIME -\n\nCREATION DATE: "+r(t.ExpObject(u.GetValue()-1,2),4,11)+"\n\nTIME SPENT IN-EDITOR: ",Math.round(w.GetValue()/60))+" MINUTES (",Math.round(x.GetValue()/3600*10)/10)+" HOURS)"},()=>"Dec 22",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b(l.ExpObject(1))},()=>"tfd",()=>"theflyingdutchman",()=>"the flying dutchman",()=>"AdjustHSL",()=>"Sepia",()=>"Grayscale",()=>"Tint",()=>"TintGreen",()=>"Level Options",()=>"On Text & Dropdown Changes",()=>"displayError",()=>578,a=>{const b=a._GetNode(0).GetVar();return()=>k("HOLD ON! THIS WILL REMOVE PARTS OF YOUR LEVEL (ORIGINAL WIDTH WAS ",b.GetValue())+")."},a=>{const b=a._GetNode(0).GetVar();return()=>k("HOLD ON! THIS WILL REMOVE PARTS OF YOUR LEVEL (ORIGINAL HEIGHT WAS ",
b.GetValue())+")."},()=>"THE TIMER CANNOT BE A NEGATIVE VALUE. USE 0 OR LEAVE EMPTY TO DISABLE THE TIMER.",()=>9999,()=>"WOAH, THAT'S A LONG TIME! PLEASE MAKE SURE THE TIMER IS 9999 SECONDS OR LESS.",()=>"9999",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b.ExpObject(l(p.ExpObject())-1,0)},()=>"INVALID MAP.",a=>{const b=a._GetNode(0).GetVar();return()=>k("OOPS! THIS MAP DOESN'T EXIST, SO MARIO CAN'T ACTUALLY ENTER THE LEVEL. YOU CURRENTLY HAVE ",b.GetValue())+
" MAPS."},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue().toString()},()=>"THERE ARE NO ENTRANCES YET IN THIS MAP. YOU NEED TO PLACE AT LEAST ONE!",a=>{const b=a._GetNode(0).GetVar();return()=>k("OOPS! THIS ENTRANCE DOESN'T EXIST IN THE CONNECTED MAP. YOU CURRENTLY HAVE ",b.GetValue())+" ENTRANCES THERE."},()=>"INVALID ENTRANCE.",()=>"MARIO NEEDS AT LEAST 1 LIVE!",()=>"1",()=>"MARIO CAN ONLY HAVE 99 LIVES MAX.",()=>"99",()=>"MAX IS 99 DRAGON COINS.",()=>"SORRY, THIS LINK IS TOO LONG!",a=>
{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),200)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),8)},()=>"INVALID LINK: MUST START WITH HTTPS://",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(11))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);return()=>b(l("180,180,270,270,270,270,0,0,0,270,0,270,225,180",p(f(r.ExpObject(11),
1)),","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);return()=>b(l("256,128,256,64,64,64,0,0,0,512,64,256,256,64",p(f(r.ExpObject(11),1)),","))},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject()-1,1)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject()-1,2)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject()-1,3)},a=>{const b=a._GetNode(0),
l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject()-1,4)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject()-1,5)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject()-1,6)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject()-1,7)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,24))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>
k(k(k(Math.round(b(0,255)),"."),Math.round(l(0,255)))+".",Math.round(p(0,255)))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(16,32,48,256)},a=>{const b=a._GetNode(0);return()=>(b.ExpObject()-1).toString()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>"update"+b(l.ExpInstVar(),2)+"ThroughTextarea"},()=>"Main",()=>"https://smcbgs.wordpress.com/",()=>"CBGSite",()=>"warpsmain",()=>"warpsSettingsChange",()=>"Warps",()=>"Warpsexits",()=>"warpsguide",()=>"Warpsguide",a=>
{const b=a._GetNode(0).GetVar();return()=>20+6*b.GetValue()},()=>2E3,()=>5E4,()=>1E3,()=>"OOPS! THE LEVEL SIZE IS INVALID. PLEASE MAKE SURE THE MAP IS BELOW 2000X 2000Y.",()=>"OOPS! THE LEVEL SIZE IS INVALID. PLEASE MAKE SURE THE MAP IS 20X 15Y OR BIGGER (AT LEAST ONE SCREEN).",()=>"THIS LEVEL SIZE EXCEEDS THE LIMIT OF 50000 TILES!",()=>"GIVE YOUR LEVEL A NAME!",()=>"THE LEVEL NAME IS TOO BIG (MAX 200 CHARACTERS).",()=>"THE LEVEL DESCRIPTION IS TOO BIG (MAX 1000 CHARACTERS).",()=>"confirmdelcbg",
()=>"confirmdelcm",a=>{const b=a._GetNode(0).GetVar();return()=>"MUSIC: "+b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>"Music"+b.GetValue()},()=>"EditorMusic",a=>{const b=a._GetNode(0);return()=>16*(b.ExpObject()+1)},()=>"Advanced",()=>"Advanced BG Settings",()=>"resetwarp",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject()," ","")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),",",".")},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5);return()=>b(l.ExpObject(),0,",")+p(r.ExpObject(),1,",")+t(u.ExpObject(),2,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),1,".")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),2,".")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject())+1},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b(l.ExpObject(),7)},()=>"updateBGThroughTextarea",()=>"THE IMAGE COULD NOT BE LOADED. PLEASE CHECK THE URL, OR TRY AGAIN LATER.",()=>"THE BACKGROUND ID IS INVALID. PLEASE MAKE SURE YOU ENTER A VALID BACKGROUND ID (19 OR BELOW).",()=>"updateFGThroughTextarea",()=>"THE FOREGROUND ID IS INVALID. PLEASE MAKE SURE YOU ENTER A VALID BACKGROUND ID (24 OR BELOW).",()=>"Custom Music Settings",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-5},a=>{const b=a._GetNode(0).GetVar(),
l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>k(k(b.GetValue()+",",l.GetValue())+",",p.GetValue())},()=>"UNABLE TO LOAD THE MUSIC - ARE YOU SURE THE LINK IS VALID? ALSO TRY TO USE SONGS THAT ARE LESS THAN 5 MINUTES TO PREVENT LONG LOAD TIMES!",()=>"INSERT A LINK TO A .OGG MUSIC FILE.",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),4)},()=>"THIS MUST BE A POSITIVE VALUE.",a=>{const b=a._GetNode(0);return()=>k("THE MUSIC IS ",Math.round(b.ExpObject()))+
" SECONDS LONG. I THINK YOU SHOULD TRY A SMALLER NUMBER!"},()=>"Theme Detector",()=>"CUSTOM",()=>"OVERWORLD-1",()=>"2",()=>"OVERWORLD-2",()=>"3",()=>"CAVE",()=>"5",()=>"4",()=>"FOREST",()=>"DESERT",()=>"GRASSLAND-HILLS",()=>"6",()=>"CASTLE",()=>"NIGHT",()=>"7",()=>"FORTRESS",()=>"8",()=>"BONUS-ZONE",()=>"9",()=>"UNDERWATER",()=>"10",()=>"12",()=>"SNOW",()=>"11",()=>"ICE-CAVE",()=>"NIGHT-FOREST",()=>"GHOST-HOUSE",()=>"SKY",()=>"NIGHT-HILLS",()=>"13",()=>"SNOW-HILLS",()=>"15",()=>"ICE-CASTLE",()=>"14",
()=>"WATER-CAVE",()=>"SUNKEN-SHIP",()=>21,()=>"DARK-CASTLE",()=>"16",()=>"BEACH",()=>23,()=>"17",()=>"DEEP-CASTLE",()=>"18",()=>"VOLCANO",()=>"19",()=>"VOLCANO-CAVE",()=>26,()=>"20",()=>"STARRY-MOUNTAINS",()=>27,()=>"21",()=>"BRIGHT-GHOST-HOUSE-1",()=>28,()=>"22",()=>"BRIGHT-GHOST-HOUSE-2",()=>29,()=>"23",()=>"AUTUMN-FOREST",()=>"DARK-HILLS",()=>"ICE-HILLS",()=>"Toolbar Settings",()=>"updateToolbarTheme",()=>"toggleGrid",()=>"toggleCustomCursor",()=>"updateGridTheme",()=>"FAILED TO LOAD CUSTOM MUSIC. THE SOURCE SITE MAY BE DOWN, OR THERE AN ISSUE WITH YOUR CONNECTION!",
()=>"LevelMusic",()=>"246,207,19",()=>"255,121,158",()=>"119,237,251",()=>"192,192,192",()=>"4,163,164",()=>"0,255,0",()=>"118,76,162",()=>"Warp Settings",()=>"toggleCircularDoors",()=>"tilepage",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+10},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+2},()=>"toggleNormalDoors",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-10},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-2},()=>"warpsmenu",()=>220,()=>"pipedirection",()=>380,()=>496,()=>"entranceinfo",
()=>"PROTIP: YOU CAN QUICKLY TEST A LEVEL FROM ANY ENTRANCE BY HOLDING SHIFT AND CLICKING ON IT IN THE EDITOR.",()=>"entrancesinfo",()=>"IT APPEARS THAT THERE ARE NO ENTRANCES IN THIS MAP YET! PLACE ONE TO CREATE A START POINT, OR TO CONNECT AN EXIT FROM ANOTHER MAP.",()=>"createWarpDropdowns",()=>472,()=>"RESET",()=>"USE CIRCULAR DOORS",()=>508,()=>568,()=>262,a=>{const b=a._GetNode(0).GetVar();return()=>k("TO CREATE A SUCCESSFUL WARP, PLACE AN EXIT WITH THE SAME ENTRANCE NUMBER. THE NEWEST ENTRANCE IN THIS MAP IS #",
b.GetValue())+"."},()=>72,()=>"warpsguidetext",()=>"ENTRANCES ARE ENTRY POINTS THAT EXITS CAN BE LINKED TO. EACH LEVEL & MAP NEEDS AT LEAST ONE ENTRANCE.",()=>"c8",()=>528,()=>592,()=>464,()=>"EXITS LEAD TO ENTRANCES THAT SHARE THE SAME NUMBER. YOU CAN ALSO LINK UP ENTRANCES IN ANOTHER MAP. THIS WILL RESTORE THE CURRENT MAP.",()=>"d2",()=>340,()=>"MARIO WILL RESPAWN AT THE LAST ACTIVATED CHECKPOINT. CHECKPOINTS ARE IN THE EXITS MENU, SO THEY CAN BE LINKED TO ANY ENTRANCE.",()=>"warpToMapID",a=>{const b=
a._GetNode(0);return()=>b.ExpObject()+1},()=>"warpToEntranceID",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject(l.GetValue(),0)},a=>{const b=a._GetNode(0).GetVar();return()=>k("Entrance ",b.GetValue()+1)},()=>"goToWarpAndEntrance",()=>"GO TO:",()=>260,()=>"Map 1",()=>"Entrance 1",a=>{const b=a._GetNode(0).GetVar();return()=>k("Map ",b.GetValue()+1)},()=>"Maps Settings",()=>"nextmaplist",()=>"prevmaplist",()=>"listMaps",()=>246,()=>164,a=>{const b=a._GetNode(0);return()=>b.ExpObject(0,
1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(0,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(0,3)},()=>470,()=>524,a=>{const b=a._GetNode(0);return()=>b.ExpObject(1,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(1,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(1,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(2,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(2,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(2,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(3,
1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(3,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(3,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(4,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(4,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(4,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(5,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(5,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(5,3)},()=>"addMapButton",a=>{const b=a._GetNode(0);return()=>b.ExpObject(6,
1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(6,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(6,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(7,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(7,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(7,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(8,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(8,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(8,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(9,1)},a=>{const b=
a._GetNode(0);return()=>b.ExpObject(9,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(9,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(10,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(10,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(10,3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(11,1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(11,2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(11,3)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),
p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9).GetBoundMethod();return()=>b(l(p(r(13),0,".")),t(u(w(13),1,".")),x(A(E(13),2,".")))},()=>56,a=>{const b=a._GetNode(0).GetBoundMethod();return()=>k("BG",b(11))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>k("BG",b(12))},a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>b(3)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(4)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(5)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(10)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>k("MAP #",b(10))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(6)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(7)},()=>"EDIT",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(8)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>
b(9)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(4)},()=>"toolbarPageChange",()=>"maps",()=>"+ ADD",()=>"addMap",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(3*l.ExpInstVar()-1)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(3*l.ExpInstVar()-2)},()=>33,()=>35,()=>34,a=>{const b=a._GetNode(0);return()=>f(b.ExpObject(4),1)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);return()=>b(l.ExpObject(0))*
p(r.ExpObject(1))},()=>"SORRY, THIS LEVEL SIZE EXCEEDS THE LIMIT OF 50000 BLOCKS! PLEASE CHOOSE A SMALLER SIZE.",a=>{const b=a._GetNode(0).GetVar();return()=>k("INVALID LEVEL LENGTH. THE LENGTH MUST AT LEAST BE ",20+6*b.GetValue())+"X, AND CAN BE UP TO 2000X."},()=>"INVALID LEVEL HEIGHT. THE HEIGHT MUST AT LEAST BE 15Y, AND CAN BE UP TO 2000Y.",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+3},()=>"DELETE?",()=>"CONFIRM",()=>"DuringEditing",()=>"Layer Switching & Hiding",()=>"layerSwitched",()=>
"displayx",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>k("X: ",(b()-320)/32)},a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),100,.5)},a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),76,.2)},a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),156,.2)},a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),0,.3)},a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),92,.2)},a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),140,.2)},()=>"displayy",a=>{const b=
a._GetNode(0).GetBoundMethod();return()=>k("Y: ",(b()-240)/32)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>e.lerp(b.ExpObject(),l.ExpInstVar(),.3)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>k("X: ",(b()-320)/32-3*l.GetValue())},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()-320},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+8E3},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-8E3},a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>b()+6400},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-6400},()=>"GRID: ON",()=>832,()=>"GRID: OFF",()=>"SELECT THEME: BRICK BLOCK",()=>"SELECT THEME: THIN",()=>"SELECT THEME: STRIPED",()=>"Misc Keyboard And Other Shortcuts",()=>"switchMaps",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar();return()=>k(k(k(k(b.GetValue()+"-"+l.GetValue()+"-"+
p.GetValue()+"-",r.GetValue())+"-",t.GetValue())+"-",u.GetValue())+"-",w.GetValue())},()=>"toggleHUDVisibility",()=>"toggleToolbarVisibility",()=>"hidden",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-96},()=>"maintiles",()=>"objects",()=>"enemies",()=>"warps",()=>"inactive",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Idle")},()=>"Level Select Overlays",()=>"UpdateHUD",()=>"empty",()=>"createlvl",()=>"allThemes",()=>"quickplay",()=>"loadcode",()=>"qpplay",()=>"custombgurl",()=>
"active",()=>"lvlname",()=>"updateHUD",()=>"FrontMenu",()=>584,()=>"upload",()=>"loadLevel",()=>"newlvl",()=>"NEW",()=>104,()=>"playlvl",()=>"PLAY",()=>"editlvl",()=>"gotocode",()=>"CODE",()=>"lvl1",()=>"download",()=>"downloadLevel",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),
E=a._GetNode(9);return()=>b(l(p(r.ExpObject(0,6),0,".")),t(u(w.ExpObject(0,6),1,".")),x(A(E.ExpObject(0,6),2,".")))},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(0,4))},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(0,5))},a=>{const b=a._GetNode(0);return()=>b.ExpObject(0,4)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(0,5)},()=>236,()=>"lvl2",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),
u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9);return()=>b(l(p(r.ExpObject(1,6),0,".")),t(u(w.ExpObject(1,6),1,".")),x(A(E.ExpObject(1,6),2,".")))},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(1,4))},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(1,5))},a=>{const b=a._GetNode(0);return()=>b.ExpObject(1,4)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(1,5)},()=>332,()=>"lvl3",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9);return()=>b(l(p(r.ExpObject(2,6),0,".")),t(u(w.ExpObject(2,6),1,".")),x(A(E.ExpObject(2,6),2,".")))},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(2,4))},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(2,5))},a=>{const b=a._GetNode(0);return()=>
b.ExpObject(2,4)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(2,5)},()=>"Level Creation",a=>{const b=a._GetNode(0).GetVar();return()=>k("Unnamed Level ",b.GetValue())},()=>720,()=>"returnToLevelCreation",()=>1256,()=>936,()=>"Up32",()=>856,()=>"Down32",()=>896,()=>"THE LEVEL NEEDS TO BE AT LEAST 20 BLOCKS IN LENGTH (ONE SCREEN).",()=>"THAT'S TOO LARGE! MAXIMUM LEVEL LENGTH IS 2000 BLOCKS.",()=>"THE LEVEL NEEDS TO BE AT LEAST 15 BLOCKS IN HEIGHT (ONE SCREEN).",()=>"THAT'S TOO LARGE! MAXIMUM LEVEL HEIGHT IS 2000 BLOCKS.",
()=>"SORRY, THIS LEVEL SIZE EXCEEDS THE LIMIT OF 50000 TILES! PLEASE CHOOSE A SMALLER SIZE.",()=>"Level Editing and Playing",()=>"Level Deletion",()=>"canceldel",()=>"NO",()=>"confirmdel",()=>"YES",()=>"DELETE THIS LEVEL?",a=>{const b=a._GetNode(0).GetVar();return()=>k("lvl",b.GetValue())},()=>"Code",()=>1600,()=>1808,()=>"levelcode",()=>"UNDEFINED",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),"newdata","c2array")},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b(l.ExpObject(13),8)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(13)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(7)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(16)},()=>"quickplaypreview",a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(2))},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject(3))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(4),0,"."))},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(4),1,"."))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(4),2,"."))},()=>"qplevelname",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(k(k(b.ExpObject(0),"\n"),"\n"),"BY "),l.ExpObject(2))},()=>"qplevelauthor",a=>{const b=a._GetNode(0);return()=>k("BY ",b.ExpObject(2))},()=>"qpleveldesc",()=>"NO DESCRIPTION AVAILABLE.",()=>"qplevellives",a=>{const b=
a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>"X"+b(l.ExpObject(8),2)},()=>"qpleveltime",()=>"INFINITE",a=>{const b=a._GetNode(0);return()=>b.ExpObject(6)},()=>2240,()=>"QuickPlay",()=>"openQuickPlayMenu",()=>"smclevel0",()=>"Restart",()=>"loadfromcache",()=>"CACHE",()=>"DOWNLOAD",()=>"Theme Selector",a=>{const b=a._GetNode(0).GetVar();return()=>720+b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>640+b.GetValue()},()=>"selecttheme",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7),A=a._GetNode(8),E=a._GetNode(9).GetBoundMethod(),y=a._GetNode(10).GetBoundMethod(),B=a._GetNode(11),H=a._GetNode(12);return()=>b(l(p(r.ExpObject(t.ExpObject(),3),0,".")),u(w(x.ExpObject(A.ExpObject(),3),1,".")),E(y(B.ExpObject(H.ExpObject(),3),2,".")))},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k("BG",b.ExpObject(l.ExpObject(),
1))},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k("BG",b.ExpObject(l.ExpObject(),2))},()=>"changeThemePreview",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),1)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),2)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),3)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),4)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>
b.ExpObject(l.ExpInstVar(),5)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),8)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),9)},()=>"ThemePreviewMusic",()=>"Browsing Through Themes",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()+l.GetValue()},()=>"downloading",a=>{const b=a._GetNode(0);return()=>k("smclevel",b.ExpInstVar())},()=>"text/plain",()=>"level.txt",()=>16763904,a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b(l.ExpObject(),23)+"..."},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()+" playthrough"},()=>"Back Button",()=>"returntotitle",()=>"returntolvls",()=>"returntocode",()=>"editlevel",()=>"exitlevel",()=>"togglePause",()=>"HelpBlocks",()=>"objectInfo",()=>628,()=>616,()=>"ZElevation",()=>"Main Effects",a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),100,.2)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>e.lerp(b.ExpObject(),l.ExpInstVar()+16,.4)},
a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>e.lerp(b.ExpObject(),l.ExpInstVar()+8,.4)},a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),0,.2)},()=>"Hover",()=>-1.5,()=>"Warning Display",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>f(b(1),272)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>c(b(2),16)},()=>.25,()=>"Particle Effects",()=>"starParticle",()=>"Position",()=>"createDestructionParticle",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();
return()=>Math.round(b(l.GetValue(),p.GetValue()))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar();return()=>Math.round(b(l.GetValue(),-1*p.GetValue()))+r.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>Math.round(b(l.GetValue(),-1*p.GetValue()))},()=>"Size",()=>"ReplaceColor1",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),
r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9).GetVar();return()=>b(l(p(r.GetValue(),0,",")),t(u(w.GetValue(),1,",")),x(A(E.GetValue(),2,",")))},()=>"border",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetVar();return()=>
"2px solid rgb("+b(l.GetValue(),0,",")+","+p(r.GetValue(),1,",")+","+t(u.GetValue(),2,",")+")"},()=>"transform",()=>"scale(2)",()=>"twinkle",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-16,p.ExpObject()+16))},()=>"waterfallcloud",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-8,p.ExpObject()-16))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-
16*l()},()=>"Wake",()=>"Updater",()=>"UpdateSFX",()=>"Enable & Disable Font Buttons",()=>"disableButtons",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+",disabled"},()=>"enableButtons",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),0,",")},()=>"MiscMenus",()=>"CustomizableControls",()=>"changeControlPreset",()=>65,()=>68,()=>87,()=>83,()=>37,()=>39,()=>38,()=>81,()=>82,()=>67,()=>101,()=>"NOW JUST PRESS A KEY!",a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>b(11)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(12)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(13)},()=>"saveCustomKeybinds",()=>"smccustomkeybinds",()=>"keyleft",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"WALK LEFT: "+b(l.GetValue())},()=>"keyright",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"WALK RIGHT: "+b(l.GetValue())},()=>"keyjump",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();
return()=>"JUMP: "+b(l.GetValue())},()=>"keyduck",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"DUCK: "+b(l.GetValue())},()=>"keyspinjump",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"SPINJUMP: "+b(l.GetValue())},()=>"keyhold",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"HOLD ITEM: "+b(l.GetValue())},()=>"keyrun",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"RUN: "+
b(l.GetValue())},()=>"keyuseability",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"USE POWER-UP: "+b(l.GetValue())},()=>"keylookup",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"LOOK UP: "+b(l.GetValue())},()=>"keyreleaseitem",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"RELEASE ITEM: "+b(l.GetValue())},()=>"keypause",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"PAUSE: "+
b(l.GetValue())},()=>"keysnapshot",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"SNAPSHOT: "+b(l.GetValue())},()=>"keystartrec",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"START REC: "+b(l.GetValue())},()=>"keystoprec",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"STOP REC: "+b(l.GetValue())},()=>"CONTROL SET!",a=>{const b=a._GetNode(0).GetVar();return()=>640+192*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();
return()=>458+96*b.GetValue()},()=>"SAVING...",a=>{const b=a._GetNode(0).GetVar();return()=>608+96*b.GetValue()},()=>"Walk",()=>"quickEditorInfo",()=>-364,()=>"WELCOME TO THE LEVEL EDITOR!\n\n\u2190\u2191\u2192\u2193 / WASD : MOVE AROUND \n\nSPACE : OPEN/CLOSE TOOLBAR\n\nLEFT MOUSE : PLACE TILES\n\nRIGHT MOUSE : DELETE TILES\n\nCTRL / SHIFT : CHANGE SPRITE\n          PROPERTY\n\nOPEN THE TOOLBAR TO START!",()=>-142,()=>-132,()=>"showeditorshortcuts",()=>"SHORTCUTS",()=>"closeeditorinfo",()=>"CLOSE",
()=>"quickEditorInfoClose",()=>376,()=>"showUpdateNotify",()=>"A NEW UPDATE HAS BEEN DOWNLOADED!",()=>"SAVE AND UPDATE",()=>"BACK",()=>"showeditorcontrols",()=>"EDITOR SHORTCUTS\n\nL : SWITCH LAYERS\n\nG : TOGGLE GRID\n\nT : HIDE/SHOW TOOLBAR\n\nSHIFT + SCROLL : SLOW SCROLL\n\nB: HIDE/SHOW BACKGROUNDS\n\nE: ERASE TILES (ALTERNATIVE)",()=>"Global Settings",()=>"settingscursor",()=>"CUSTOM CURSOR: ON",()=>"settingsdeltatiming",()=>"DELTA TIMING: ON",()=>-120,()=>"WHEN THE FRAMERATE IS LOW, DELTA TIMING TRIES TO SIMULATE A SMOOTH FPS INSTEAD OF SLOWING THE GAME DOWN. THIS MAY LEAD TO UNINTENDED BEHAVIOUR AND BUGS THAT NORMALLY WON'T HAPPEN. IT IS RECOMMENDED TO KEEP THIS OFF IN LEVELS WITH COMPLEX MECHANICS.",
()=>"DELTA TIMING: OFF",()=>"debugmenu",()=>588,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8),E=a._GetNode(9).GetVar(),y=a._GetNode(10),B=a._GetNode(11).GetVar(),H=a._GetNode(12).GetVar(),P=a._GetNode(13),F=a._GetNode(14).GetBoundMethod(),I=a._GetNode(15).GetBoundMethod(),
N=a._GetNode(16),R=a._GetNode(17),S=a._GetNode(18).GetBoundMethod(),Y=a._GetNode(19).GetVar();return()=>k(k(k(k(k(k(k(k(k(k(k(k(k("Running on "+b()+", "+l()+", RENDERER: "+p()+"\nFPS (V-SYNCED): ",r())+" | DT VALUE: ",Math.round(1E3*t())/1E3)+"\nCPU Utilization: ",Math.round(100*u()))+"% | GPU Utilization: ",Math.round(100*w()))+"%\nOBJ loaded: ",x()-A.ExpObject())+" | Tiles: ",E.GetValue())+" / ",y.ExpObject())+" / ",B.GetValue()*H.GetValue()*2)+" (MAX)\nPARTICLES: ",P.ExpObject())+" | RUNNING FOR : ",
Math.round(F()))+" SEC\nMEMORY: ",Math.round(I()))+"MB | BLOCKS IN MEMORY: ",N.ExpObject()-R.ExpObject())+"\nOBJ LOADED/UNLOADED LAST SEC: ",S()-Y.GetValue())},()=>"Tile Collisions & Properties Setup",()=>"WarpObject",()=>"entrance",()=>"warp",()=>"left",()=>"warpup",()=>"right",()=>"smallform",()=>"warpdown",()=>"warpleft",()=>"warpright",()=>"warpOut",()=>"m24",()=>"m2",()=>"m90",()=>"c52",()=>"c53",()=>"f10",()=>"f11",()=>"f12",()=>"f13",()=>"f14",()=>"f15",()=>"f54",()=>"f55",()=>"f56",()=>"f57",
()=>"f58",()=>"f59",()=>"f60",()=>"f61",()=>"f62",()=>"f63",()=>"f64",()=>"f65",()=>"f66",()=>"f67",()=>"f68",()=>"f69",()=>"f70",()=>"f71",()=>"f72",()=>"f73",()=>"f74",()=>"f75",()=>"f76",()=>"f77",()=>"f79",()=>"f80",()=>"f81",()=>"f82",()=>"j46",()=>"j47",()=>"j48",()=>"j49",()=>"j50",()=>"j51",()=>"d50",()=>"d51",()=>"d52",()=>"d53",()=>"d54",()=>"d61",()=>"d62",()=>"d63",()=>"d64",()=>"d65",()=>"d66",()=>"d67",()=>"d74",()=>"w46",()=>"w47",()=>"w48",()=>"w49",()=>"w50",()=>"w51",()=>"w52",()=>
"w58",()=>"w59",()=>"w60",()=>"w61",()=>"b46",()=>"b47",()=>"b48",()=>"b49",()=>"b50",()=>"b51",()=>"b52",()=>"h46",()=>"h47",()=>"h48",()=>"h49",()=>"h50",()=>"h51",()=>"h52",()=>"h55",()=>"h56",()=>"vc86",()=>"vc87",()=>"v58",()=>"v59",()=>"v60",()=>"v61",()=>"v62",()=>"v63",()=>"v64",()=>"vc46",()=>"vc47",()=>"vc48",()=>"vc49",()=>"vc50",()=>"vc51",()=>"vc52",()=>"gh14",()=>"gh15",()=>"gh16",()=>"gh17",()=>"gh18",()=>"gh19",()=>"gh20",()=>"gh80",()=>"gh81",()=>"ng46",()=>"ng47",()=>"ng48",()=>
"ng49",()=>"ng50",()=>"ng51",()=>"ng52",()=>"cr1",()=>"a10",()=>"a11",()=>"a12",()=>"a13",()=>"a14",()=>"a15",()=>"ro9",()=>"ro10",()=>"ro11",()=>"ro12",()=>"ro13",()=>"ro14",()=>"ro15",()=>"ro18",()=>"ro19",()=>"r30",()=>"r31",()=>"r32",()=>"r33",()=>"r34",()=>"r35",()=>"r36",()=>"r41",()=>"r50",()=>"r52",()=>"r53",()=>"r54",()=>"r55",()=>"r56",()=>"r57",()=>"r58",()=>"r59",()=>"r76",()=>"ar",()=>"ar35",()=>"bs",()=>"m3",()=>"m4",()=>"m5",()=>"m6",()=>"m11",()=>"m12",()=>"m13",()=>"m14",()=>"m15",
()=>"m16",()=>"m17",()=>"m18",()=>"m19",()=>"m21",()=>"m42",()=>"br1",()=>"br2",()=>"br3",()=>"br4",()=>"g1",()=>"g3",()=>"g10",()=>"g11",()=>"g30",()=>"g31",()=>"g34",()=>"g35",()=>"g42",()=>"g43",()=>"g62",()=>"g63",()=>"g74",()=>"g75",()=>"c1",()=>"c2",()=>"c3",()=>"c10",()=>"c11",()=>"c30",()=>"c31",()=>"f1",()=>"f2",()=>"f3",()=>"f16",()=>"f17",()=>"f36",()=>"f37",()=>"j1",()=>"j2",()=>"j3",()=>"j10",()=>"j11",()=>"d1",()=>"d3",()=>"d10",()=>"d11",()=>"w1",()=>"w2",()=>"w3",()=>"w10",()=>"w11",
()=>"ic1",()=>"ic2",()=>"ic3",()=>"ic30",()=>"ic31",()=>"b1",()=>"b2",()=>"b3",()=>"b10",()=>"b11",()=>"h1",()=>"h2",()=>"h3",()=>"h10",()=>"h11",()=>"v1",()=>"v2",()=>"v3",()=>"v10",()=>"v11",()=>"vc1",()=>"vc2",()=>"vc3",()=>"vc10",()=>"vc11",()=>"vc57",()=>"vc58",()=>"vc61",()=>"vc62",()=>"vc63",()=>"gh1",()=>"gh2",()=>"gh3",()=>"gh37",()=>"gh38",()=>"gh39",()=>"gh64",()=>"gh65",()=>"gh66",()=>"gh67",()=>"gh70",()=>"gh71",()=>"gh72",()=>"gh73",()=>"gh74",()=>"gh75",()=>"gh76",()=>"gh77",()=>"ng1",
()=>"ng2",()=>"ng3",()=>"ng10",()=>"ng11",()=>"s1",()=>"s2",()=>"s3",()=>"s10",()=>"s11",()=>"s62",()=>"s63",()=>"s64",()=>"s65",()=>"sw1",()=>"sw2",()=>"sw3",()=>"sw10",()=>"sw11",()=>"a1",()=>"a2",()=>"a3",()=>"sr1",()=>"sr2",()=>"sr3",()=>"c34",()=>"c35",()=>"c38",()=>"c39",()=>"c40",()=>"c41",()=>"c42",()=>"c43",()=>"c50",()=>"c51",()=>"j30",()=>"j31",()=>"j38",()=>"j39",()=>"d30",()=>"d31",()=>"d38",()=>"d39",()=>"w30",()=>"w31",()=>"w38",()=>"w39",()=>"b30",()=>"b31",()=>"b38",()=>"b39",()=>
"h30",()=>"h31",()=>"h38",()=>"h39",()=>"ro1",()=>"ro2",()=>"ro3",()=>"r1",()=>"r2",()=>"r3",()=>"r18",()=>"r19",()=>"r40",()=>"r60",()=>"r62",()=>"r64",()=>"topsolid",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(b.ExpInstVar()+" T",Math.round(l.ExpObject()-32-p.ExpObject()%16))+" T "+r.ExpInstVar()+" 32T",Math.round(t.ExpObject()+16-u.ExpObject()%32))},()=>"g4",()=>"g7",()=>"g16",()=>"g17",()=>"c4",()=>"c7",()=>"f4",()=>"f7",
()=>"f22",()=>"f23",()=>"j4",()=>"j7",()=>"j16",()=>"j17",()=>"d4",()=>"d7",()=>"d16",()=>"d17",()=>"w4",()=>"w7",()=>"w16",()=>"w17",()=>"ic4",()=>"ic7",()=>"ic36",()=>"ic37",()=>"b4",()=>"b7",()=>"b16",()=>"b17",()=>"h4",()=>"h7",()=>"h16",()=>"h17",()=>"v4",()=>"v7",()=>"v16",()=>"v17",()=>"vc4",()=>"vc7",()=>"vc16",()=>"vc17",()=>"s4",()=>"s7",()=>"s16",()=>"s17",()=>"sw4",()=>"sw7",()=>"sw16",()=>"sw17",()=>"gh4",()=>"gh7",()=>"gh40",()=>"gh43",()=>"ng4",()=>"ng7",()=>"ng16",()=>"ng17",()=>"a4",
()=>"a7",()=>"ro4",()=>"ro6",()=>"r4",()=>"r7",()=>"r24",()=>"r25",()=>"leftsolid",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar()+" L",Math.round(l.ExpObject()+16-p.ExpObject()%32))},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(" L",Math.round(b.ExpObject()+16-l.ExpObject()%32))},()=>"g6",()=>"g9",()=>"g20",()=>"g21",()=>"c6",()=>"c9",()=>"f6",()=>"f9",()=>"f26",()=>"f27",()=>"j6",()=>"j9",()=>"j20",()=>"j21",()=>"d6",()=>"d9",()=>"d20",()=>"d21",()=>
"w6",()=>"w9",()=>"w20",()=>"w21",()=>"ic6",()=>"ic9",()=>"ic40",()=>"ic41",()=>"b6",()=>"b9",()=>"b20",()=>"b21",()=>"ro5",()=>"ro8",()=>"h6",()=>"h9",()=>"h20",()=>"h21",()=>"v6",()=>"v9",()=>"v20",()=>"v21",()=>"vc6",()=>"vc9",()=>"vc20",()=>"vc21",()=>"s6",()=>"s9",()=>"s20",()=>"s21",()=>"sw6",()=>"sw9",()=>"sw20",()=>"sw21",()=>"gh6",()=>"gh9",()=>"gh42",()=>"gh45",()=>"ng6",()=>"ng9",()=>"ng20",()=>"ng21",()=>"a6",()=>"a9",()=>"r6",()=>"r9",()=>"r28",()=>"r29",()=>"rightsolid",a=>{const b=
a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar()+" R",Math.round(l.ExpObject()+16-p.ExpObject()%32))},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(" R",Math.round(b.ExpObject()+16-l.ExpObject()%32))},()=>"g8",()=>"g14",()=>"g15",()=>"c14",()=>"c15",()=>"f8",()=>"f20",()=>"f21",()=>"j8",()=>"j14",()=>"j15",()=>"d8",()=>"d14",()=>"d15",()=>"w8",()=>"w14",()=>"w15",()=>"ic8",()=>"ic34",()=>"ic35",()=>"b8",()=>"b14",()=>"b15",()=>"h8",()=>"h14",()=>"h15",()=>"v8",()=>
"v14",()=>"v15",()=>"vc8",()=>"vc14",()=>"vc15",()=>"s8",()=>"s14",()=>"s15",()=>"sw8",()=>"sw14",()=>"sw15",()=>"gh8",()=>"gh44",()=>"ng8",()=>"ng14",()=>"ng15",()=>"a8",()=>"ro7",()=>"r8",()=>"r22",()=>"r23",()=>"downsolid",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar()+" D",Math.round(l.ExpObject()+16-p.ExpObject()%32))+" D"},()=>"ic14",()=>"v30",()=>"vc30",()=>"s30",()=>"sw30",()=>"gh25",()=>"gh56",()=>"ng30",()=>"a20",()=>"sr8",()=>"ro16",()=>"slopeleft",
()=>45,a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(k("SL",Math.round(b.ExpObject()+16-l.ExpObject()%32))+",",Math.round(p.ExpObject()+16-r.ExpObject()%32))+" ST",Math.round(t.ExpObject()+16-u.ExpObject()%32))},()=>"w65",()=>"SlopeEnd",()=>"bz21",()=>"ar18",()=>"f40",()=>"w73",()=>"ic22",()=>"v38",()=>"vc38",()=>"s38",()=>"sw38",()=>"gh29",()=>"gh60",()=>"a24",()=>"sr12",()=>"ng38",a=>{const b=a._GetNode(0),l=a._GetNode(1),
p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(k("SL",Math.round(b.ExpObject()-16-l.ExpObject()%16))+",",Math.round(p.ExpObject()+16-r.ExpObject()%32))+" ST",Math.round(t.ExpObject()+16-u.ExpObject()%32))},()=>"sw46",()=>"ro24",()=>"a28",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(k("SL",Math.round(b.ExpObject()-48-l.ExpObject()%16))+",",Math.round(p.ExpObject()+16-r.ExpObject()%32))+" ST",Math.round(t.ExpObject()+
16-u.ExpObject()%32))},()=>"v31",()=>"vc31",()=>"s31",()=>"sw31",()=>"gh26",()=>"gh57",()=>"ng31",()=>"a21",()=>"sr9",()=>"ro17",()=>"sloperight",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(k("SR",Math.round(b.ExpObject()+16-l.ExpObject()%32))+",",Math.round(p.ExpObject()+16-r.ExpObject()%32))+" ST",Math.round(t.ExpObject()+16-u.ExpObject()%32))},()=>"ic15",()=>"bz22",()=>"ar19",()=>-48,()=>"w66",()=>"f41",()=>"w74",()=>"ic23",
()=>"v39",()=>"vc39",()=>"s39",()=>"sw39",()=>"gh30",()=>"gh61",()=>"ng39",()=>"a25",()=>"sr13",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(k("SR",Math.round(b.ExpObject()+16-l.ExpObject()%16))+",",Math.round(p.ExpObject()+16-r.ExpObject()%32))+" ST",Math.round(t.ExpObject()+16-u.ExpObject()%32))},()=>-24,()=>"sw47",()=>"ro25",()=>"a29",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),
u=a._GetNode(5);return()=>k(k(k("SR",Math.round(b.ExpObject()+48-l.ExpObject()%16))+",",Math.round(p.ExpObject()+16-r.ExpObject()%32))+" ST",Math.round(t.ExpObject()+16-u.ExpObject()%32))},()=>"h53",()=>"vc84",()=>"steepslopeleft",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar()+" L",Math.round(l.ExpObject()+16-p.ExpObject()%32))+" SSL"},()=>"h54",()=>"vc85",()=>"steepsloperight",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar()+
" L",Math.round(l.ExpObject()+16-p.ExpObject()%32))+" SSR"},()=>"g32",()=>"c32",()=>"f38",()=>"j32",()=>"d32",()=>"w32",()=>"ic16",()=>"b32",()=>"h32",()=>"v32",()=>"vc32",()=>"s32",()=>"sw32",()=>"gh27",()=>"ng32",()=>"a22",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(k("D",Math.round(b.ExpObject()+16-l.ExpObject()%32))+" DL",Math.round(p.ExpObject()+16-r.ExpObject()%32))+",",Math.round(t.ExpObject()+16-u.ExpObject()%32))+
" DL"},()=>"g76",()=>"w67",()=>"g36",()=>"g65",()=>"c36",()=>"f42",()=>"j40",()=>"d40",()=>"w40",()=>"w75",()=>"ic24",()=>"b40",()=>"h40",()=>"v40",()=>"vc40",()=>"s40",()=>"sw40",()=>"gh31",()=>"ng40",()=>"a26",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7),A=a._GetNode(8),E=a._GetNode(9);return()=>k(k(k(k(k("D",Math.round(b.ExpObject()+16-l.ExpObject()%32))+" DL",Math.round(p.ExpObject()+16-r.ExpObject()%
32))+",",Math.round(t.ExpObject()+16-u.ExpObject()%32))+" DL",Math.round(w.ExpObject()-16-x.ExpObject()%32))+",",Math.round(A.ExpObject()+16-E.ExpObject()%32))+" DL"},()=>"g44",()=>"c44",()=>"ro26",()=>"a30",()=>"sw48",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7),A=a._GetNode(8),E=a._GetNode(9),y=a._GetNode(10),B=a._GetNode(11),H=a._GetNode(12),P=a._GetNode(13),F=a._GetNode(14),I=a._GetNode(15),N=a._GetNode(16),
R=a._GetNode(17);return()=>k(k(k(k(k(k(k(k(k("D",Math.round(b.ExpObject()+16-l.ExpObject()%32))+" DL",Math.round(p.ExpObject()-48-r.ExpObject()%32))+",",Math.round(t.ExpObject()+16-u.ExpObject()%32))+" DL",Math.round(w.ExpObject()-16-x.ExpObject()%32))+",",Math.round(A.ExpObject()+16-E.ExpObject()%32))+" DL",Math.round(y.ExpObject()+16-B.ExpObject()%32))+",",Math.round(H.ExpObject()+16-P.ExpObject()%32))+" DL",Math.round(F.ExpObject()+48-I.ExpObject()%32))+",",Math.round(N.ExpObject()+16-R.ExpObject()%
32))+" DL"},()=>"g33",()=>"c33",()=>"f39",()=>"j33",()=>"d33",()=>"w33",()=>"ic17",()=>"ic25",()=>"b33",()=>"h33",()=>"v33",()=>"vc33",()=>"s33",()=>"sw33",()=>"gh28",()=>"ng33",()=>"a23",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(k("D",Math.round(b.ExpObject()+16-l.ExpObject()%32))+" DR",Math.round(p.ExpObject()+16-r.ExpObject()%32))+",",Math.round(t.ExpObject()+16-u.ExpObject()%32))+" DR"},()=>"g77",()=>"w68",()=>"g37",
()=>"g64",()=>"c37",()=>"f43",()=>"j41",()=>"d41",()=>"w41",()=>"w76",()=>"b41",()=>"h41",()=>"v41",()=>"vc41",()=>"s41",()=>"sw41",()=>"gh32",()=>"ng41",()=>"a27",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7),A=a._GetNode(8),E=a._GetNode(9);return()=>k(k(k(k(k("D",Math.round(b.ExpObject()+16-l.ExpObject()%32))+" DR",Math.round(p.ExpObject()+16-r.ExpObject()%32))+",",Math.round(t.ExpObject()+16-u.ExpObject()%
32))+" DR",Math.round(w.ExpObject()-16-x.ExpObject()%32))+",",Math.round(A.ExpObject()+16-E.ExpObject()%32))+" DR"},()=>"g45",()=>"c45",()=>"ro27",()=>"a31",()=>"sw49",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7),A=a._GetNode(8),E=a._GetNode(9),y=a._GetNode(10),B=a._GetNode(11),H=a._GetNode(12),P=a._GetNode(13),F=a._GetNode(14),I=a._GetNode(15),N=a._GetNode(16),R=a._GetNode(17);return()=>k(k(k(k(k(k(k(k(k("D",
Math.round(b.ExpObject()+16-l.ExpObject()%32))+" DR",Math.round(p.ExpObject()-48-r.ExpObject()%32))+",",Math.round(t.ExpObject()+16-u.ExpObject()%32))+" DR",Math.round(w.ExpObject()-16-x.ExpObject()%32))+",",Math.round(A.ExpObject()+16-E.ExpObject()%32))+" DR",Math.round(y.ExpObject()+16-B.ExpObject()%32))+",",Math.round(H.ExpObject()+16-P.ExpObject()%32))+" DR",Math.round(F.ExpObject()+48-I.ExpObject()%32))+",",Math.round(N.ExpObject()+16-R.ExpObject()%32))+" DR"},()=>"p",()=>"ice",()=>"Spikelog",
()=>"GhostHouse",()=>"ic46",()=>"ic47",()=>"ic48",()=>"ic49",()=>"Icicle",()=>"m32",()=>"m25",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k("G",Math.round(b.ExpObject()+16-l.ExpObject()%32))+" SW"},()=>"m30",()=>"l",()=>"l14",()=>"l18",()=>"l39",()=>"l43",()=>"l64",()=>"l68",()=>"l89",()=>"l93",()=>"l114",()=>"l118",()=>"l139",()=>"l143",()=>"l164",()=>"l168",()=>"l189",()=>"l193",()=>"Slope",()=>"l15",()=>"l19",()=>"l40",()=>"l44",()=>"l65",()=>"l69",()=>"l90",()=>"l94",()=>"l115",()=>"l119",
()=>"l140",()=>"l144",()=>"l165",()=>"l169",()=>"l190",()=>"l194",()=>"l16",()=>"l20",()=>"l41",()=>"l45",()=>"l66",()=>"l70",()=>"l71",()=>"l95",()=>"l116",()=>"l120",()=>"l141",()=>"l145",()=>"l166",()=>"l170",()=>"l191",()=>"l195",()=>"l17",()=>"l21",()=>"l42",()=>"l46",()=>"l67",()=>"l92",()=>"l96",()=>"l117",()=>"l121",()=>"l142",()=>"l146",()=>"l167",()=>"l171",()=>"l192",()=>"l196",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),
2))},()=>51,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),3))},()=>125,()=>151,()=>175,()=>"an1",()=>"an6",()=>"an7",()=>"r48",()=>"an8",()=>"an9",()=>"r49",()=>"an10",()=>"wa",a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()-16},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()+16},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()+48},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()+
80},()=>"cl",()=>"exit",()=>"instawarp",()=>"smallwarpdown",()=>"smallwarpup",()=>"smallwarpright",()=>"smallwarpleft",()=>"Doors",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-9},()=>"smallwarp",()=>"MidwayGateL",()=>"checkpoint",()=>"MidwayGateR",()=>"m38",()=>"m39",()=>"m40",()=>"m41",()=>"an5",()=>"gh95",()=>"gh96",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),2))-94},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),
"Off")},()=>"ghl",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),1))%2},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"On")},()=>"m88",()=>"m89",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(k(b.ExpInstVar(),","),l.ExpInstVar())+","+p.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>32*b(l.ExpInstVar())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);
return()=>b(l.ExpInstVar())-90},()=>-90,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>-1*b(l(p.ExpInstVar(),0,"-"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),1,"-")},()=>"up",()=>"down",()=>"disabled",()=>"ic5",()=>"bz5",()=>"bz25",()=>"ar36",()=>"bc",()=>"m1",()=>"h64",()=>"a35",a=>{const b=a._GetNode(0);return()=>Math.round((b.ExpObject()/32-16)%2)},()=>"o7",a=>{const b=a._GetNode(0),l=a._GetNode(1),
p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())+",",r.ExpInstVar())+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7),A=a._GetNode(8);return()=>k(k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())+",",r.ExpInstVar())+
","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()+","+A.ExpInstVar()},()=>"o2",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);return()=>b(l.GetValue(),p(r.ExpInstVar())+1,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);return()=>b(l.GetValue(),p(r.ExpInstVar()),",")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Unactivated")},
a=>{const b=a._GetNode(0);return()=>Math.round(b.ExpObject()/2-.5)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Unactivated"),l.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>b.ExpObject()%2},()=>"pinPSwitchToTile",()=>"o10",()=>"o64",()=>"pcoin",()=>"PCoin",()=>"gray",()=>"Gray",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),"&comma;",",")},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+1},()=>"Large",()=>"o12",()=>"o13",
()=>"homing",()=>"Homing",()=>"ghost",()=>"Ghost",()=>"On",()=>"Off",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Idle")},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()-32*l.GetValue()-20},()=>"rotate",()=>"pendulum",()=>271,()=>181,()=>-89,()=>89,()=>179,()=>91,()=>269,a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()-32*l.GetValue()},()=>"Platform",a=>{const b=a._GetNode(0);return()=>-1*b.ExpBehavior()},()=>"o21",a=>{const b=a._GetNode(0);
return()=>k(b.ExpObject(),"Default")},()=>"moving",()=>"10sec",()=>"100sec",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>90*b(l.ExpObject())},()=>"Small",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar()+" T",Math.round(l.ExpObject()-32-p.ExpObject()%16))},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar()+" D",Math.round(l.ExpObject()+16-p.ExpObject()%32))},()=>"Red",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),
"Default")},()=>"o27",()=>"configureGiftBox",()=>"KuriboShoe",()=>"o29",()=>"o34",()=>"RedCoin",()=>"redcoin",()=>"o36",()=>"BrownCoin",()=>"browncoin",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>90*b(l.ExpInstVar())-180},()=>"stationary",()=>"chase",()=>"evade",()=>"o43",()=>"o44",()=>"o46",a=>{const b=a._GetNode(0);return()=>32*b.ExpInstVar()},()=>"o49",()=>"PS",()=>"playersolid",a=>{const b=
a._GetNode(0);return()=>b.ExpInstVar()-90},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),0,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),1,"_"))-90},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),1,"_"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>
b(l(p.ExpInstVar(),0,"_"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),3,"_"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),2,"_"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5);return()=>b(l(p.ExpInstVar(),2,"_"))/r(t(u.ExpInstVar(),
1,"_"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),4,"_"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5);return()=>b(l(p.ExpInstVar(),5,"_"))/r(t(u.ExpInstVar(),4,"_"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),1,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b(l.ExpInstVar(),2,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),3,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),4,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),5,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),6,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),
0,"  ")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),1,"  ")},()=>"ArrowCloudArrow",()=>"nextAngle",()=>"o62",()=>"o65",()=>"o66",()=>"o69",()=>"o70",()=>"Lighting",()=>"o72",()=>"o74",()=>"o75",()=>"o77",()=>"SkullFlag",()=>"flagpoleBase",()=>"PoleCollision",()=>-32,()=>"upLeft",()=>"downRight",()=>"upRight",()=>"downLeft",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2);return()=>b(l.GetValue(),p.ExpObject(),",")},a=>{const b=
a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar(),l.ExpInstVar())+p.ExpInstVar()},()=>"i3",()=>"i4",()=>"i5",()=>"i6",()=>"i8",()=>"i9",()=>"i11",()=>"i12",()=>"i13",()=>"i14",()=>"i15",()=>"goombud",()=>"onland",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Winged")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Fall")},()=>"spiny",()=>"true",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Shell")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),
"Spin")},()=>"hide",()=>"spin",()=>"jump",()=>"fly",a=>{const b=a._GetNode(0);return()=>45*(b.ExpObject()-3)},a=>{const b=a._GetNode(0);return()=>180-45*(b.ExpObject()-3)},()=>"e4",()=>135,()=>"e6",()=>"Stomped",()=>"10,00,11,01",()=>"VenusFireTrap",()=>"e12",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+8},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()-32*l.GetValue()-42},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+90},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),
"podoboo")},()=>"dolphin",()=>"npc",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"dolphin")},a=>{const b=a._GetNode(0);return()=>-1*b.ExpInstVar()+16},()=>-224,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>-1*b(l.ExpInstVar())},()=>"initPodoboo",a=>{const b=a._GetNode(0);return()=>k("Attack",b.ExpInstVar())},()=>"e19",()=>"goombrat",()=>"Saw",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-28},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+14},a=>{const b=a._GetNode(0);
return()=>32+32*b.ExpInstVar()},()=>"cannononly",()=>"CannonPart",a=>{const b=a._GetNode(0);return()=>b.ExpObject("Launcher")},()=>"missile",()=>"MissileBullets",()=>"Blue",()=>"e26",()=>"e30",()=>"e31",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2),r=a._GetNode(3).GetVar();return()=>b.ExpObject()-l.GetValue()-(p.ExpObject()-4)*r.GetValue()},a=>{const b=a._GetNode(0);return()=>2*b.ExpInstVar()+720},()=>"Ice",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-18},()=>"setexploding",
a=>{const b=a._GetNode(0);return()=>-1*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+90},a=>{const b=a._GetNode(0);return()=>(32*b.ExpInstVar()+32)/2},()=>-45,a=>{const b=a._GetNode(0);return()=>-32*b.ExpInstVar()},()=>"e44",()=>"e45",()=>"1SwimUp",()=>"e47",()=>"initializeMole",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Appear"),l.ExpInstVar())},()=>"clapping",()=>"bouncing",()=>"baseball",()=>"football",()=>"digging",()=>"soccer",()=>"splitting",
()=>"Default0",()=>"Default1",()=>"Default2",()=>"Red0",()=>"Red1",()=>"Red2",()=>"Blue0",()=>"Blue1",()=>"Blue2",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-180},a=>{const b=a._GetNode(0);return()=>k("Cannon",b.ExpObject())},()=>"e56",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Chase")},()=>"cheepchomp",()=>"false",()=>"e57",()=>"spikebass",()=>-540,()=>540,()=>"fuzzy",a=>{const b=a._GetNode(0);return()=>90*(b.ExpInstVar()+1)},()=>"sparkie",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>90*(b(l.ExpInstVar())+1)},()=>"hothead",a=>{const b=a._GetNode(0);return()=>b.ExpObject("Middle")},()=>"bigFuzzy",()=>"wallUrchin",()=>"e66",()=>"e67",()=>"e68",()=>"limited",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Slide")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Target")},()=>"animationSpeed",()=>"target",()=>"e72",()=>"e73",()=>"e74",a=>{const b=a._GetNode(0);return()=>5*b.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),
p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),0,"-"))},()=>"CreateFlame-",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),2,"-")},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+"HoldHammer-"},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),3,"-")},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+"CreateMagic-"},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);
return()=>b(l.ExpInstVar(),p(r.ExpInstVar())-1)},()=>"e77",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+30},()=>"e79",()=>"icicle",()=>"Stationary",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Watch")},()=>"prepareexploding",()=>"e89",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-2+32*l.ExpObject()},()=>"Giant",()=>"candleflame",()=>"e94",()=>"Skele0",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Flightless")},()=>"e98",()=>"e103",a=>{const b=a._GetNode(0);
return()=>45*b.ExpObject()-180},()=>"Fly",()=>"e108",()=>"e109",()=>"eepCheep",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Swim")},a=>{const b=a._GetNode(0);return()=>45*(b.ExpObject()-4)},a=>{const b=a._GetNode(0);return()=>180-45*(b.ExpObject()-4)},()=>"e111",()=>"e113",()=>"e114",()=>"e116",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b.ExpObject()-16*l(p.ExpInstVar())-32},()=>"booCirclePart",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>
b.ExpObject()+l.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("Biting","Tongue","Smug","Flee","Evil","Sunshine","Sleep")},()=>"e120",()=>"e123",()=>"e124",()=>"e125",()=>"e126",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-12},()=>"o76",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),1,"-"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),
2,"-"))},()=>"Bootup Process",()=>"loadingStatus",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>k("Loading...",Math.round(100*b()))+"%"},()=>"PlayButton",()=>"lvlthemes",()=>"tooltipArrayObj",()=>"tooltipArrayItems",()=>"objIDToNames",()=>"preLoadTilePages",()=>"warning",()=>"DO NOT USE THE BETA TO CREATE LEVELS!",a=>{const b=a._GetNode(0);return()=>b.ExpObject(3)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(5)},a=>{const b=a._GetNode(0);return()=>b.ExpObject(8)},a=>{const b=a._GetNode(0);
return()=>b.ExpObject(12)},()=>"continueMsg",()=>"PRESS ENTER TO CONTINUE!",()=>"done",()=>"PLEASE ENTER A NAME.",()=>"WELCOME TO SUPER MARIO CONSTRUCT!\n\nWE HOPE YOU HAVE A FUN TIME WITH THE EDITOR! CHECK OUT LEVEL PALACE TO SHARE, FIND AND RECEIVE FEEDBACK ON YOUR LEVELS.",()=>"message",()=>"Bootup Effect",()=>"In-Level Events",()=>"Z Hierarchy",()=>"loadComplete",()=>"chasingfiresnake",()=>"player",()=>"Inbetween",()=>"piranhaPlant",()=>"jumpingPiranha",()=>"podoboo",()=>"saw",()=>"rockywrench",
()=>"Tile Collisions & Out of Bounds Preventions",()=>"Slope Collisions",()=>"8Duck0",()=>"NumberedPlatform",()=>"bigsteely",()=>"walled",()=>"mirrorlimited",()=>"variable",a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior())},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpBehavior()-l.ExpInstVar()},()=>"Side Collisions",a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpObject())-4},()=>"bounceOnCollision",()=>"overlappingrightsolid",
()=>"koopatroopa",a=>{const b=a._GetNode(0);return()=>-1*b.ExpBehavior()+64},a=>{const b=a._GetNode(0);return()=>-1*b.ExpBehavior()-64},()=>"overlappingleftsolid",()=>"On-entity Tile Interaction Clipping preventions",()=>"Clipping",()=>"(Cryo) Lava Collisions",()=>"skullraft",()=>"FloatingMine",()=>"firesnake",()=>"banzaibill",()=>"tailFlame",()=>"meteor",()=>"grrrolCollision",()=>"porcupuffer",()=>"bossbass",()=>"icecube",()=>"pokeyinit",()=>"cryolava",()=>"misc",()=>"Collision Filtering",a=>{const b=
a._GetNode(0),l=a._GetNode(1);return()=>Math.round(b.ExpObject()+16-l.ExpObject()%32)},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b.ExpObject()+l.ExpInstVar_Family()-p.ExpObject()%32)},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b.ExpObject()-(16-l.ExpInstVar_Family()))-p.ExpObject()%16},()=>"mountedYoshi",()=>"mountedShoe",()=>"mountedRideableCloud",()=>"PS FB",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar_Family()+
" "+l.ExpObject().toString()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>k(b.ExpInstVar()+" T",l.GetValue())},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+" SB"},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>k(k(b.ExpInstVar()+" T",l.GetValue())+" 32T",p.GetValue()+32)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>k(b.ExpInstVar_Family()+" 32T",l.GetValue()+32)},a=>{const b=a._GetNode(0).GetVar();return()=>k("G G",b.GetValue()+
32)},()=>"chainchomp",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar_Family()+" PO"},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>k(b.ExpInstVar_Family()+" "+l.ExpObject().toString()+" T",p.GetValue())},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar(),A=a._GetNode(8).GetVar();return()=>k(k(k(k(k(k(k(k(b.ExpInstVar_Family()+
" DL",l.GetValue()+32)+",",p.GetValue())+" DL",r.GetValue()+32)+",",t.GetValue()-32)+" DR",u.GetValue()-32)+",",w.GetValue())+" DR",x.GetValue()-32)+",",A.GetValue()-32)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar(),A=a._GetNode(8).GetVar();return()=>k(k(k(k(k(k(k(k(b.ExpInstVar_Family()+" DL",l.GetValue())+",",p.GetValue()-32)+" DL",r.GetValue())+
",",t.GetValue())+" DR",u.GetValue())+",",w.GetValue()-32)+" DR",x.GetValue())+",",A.GetValue())},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar(),A=a._GetNode(8).GetVar();return()=>k(k(k(k(k(k(k(k(b.ExpInstVar_Family()+" SL",l.GetValue())+",",p.GetValue())+" SR",r.GetValue())+",",t.GetValue())+" SL",u.GetValue())+",",w.GetValue()+32)+" SR",x.GetValue())+
",",A.GetValue()+32)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-Math.abs(l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+Math.abs(l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k(k(b.ExpInstVar_Family()+" T",Math.round(l.ExpObject())-10)+" T",Math.round(p.ExpObject())-9)+" T",Math.round(r.ExpObject())-8)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2),r=a._GetNode(3),
t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar(),A=a._GetNode(8).GetVar(),E=a._GetNode(9).GetVar(),y=a._GetNode(10).GetVar(),B=a._GetNode(11).GetVar(),H=a._GetNode(12).GetVar(),P=a._GetNode(13).GetVar(),F=a._GetNode(14).GetVar(),I=a._GetNode(15).GetVar(),N=a._GetNode(16).GetVar(),R=a._GetNode(17).GetVar();return()=>k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(b.ExpInstVar_Family()+" Default D",l.GetValue()-Math.round(Math.abs(p.ExpObject()-r.ExpObject()%32)))+" ST",
t.GetValue()+32)+" T",u.GetValue()+16)+" R",w.GetValue()-32)+" R",x.GetValue()-64)+" L",A.GetValue()+32)+" L",E.GetValue()+64)+" SL",y.GetValue()+32)+",",B.GetValue())+" SL",H.GetValue()+32)+",",P.GetValue()+32)+" SR",F.GetValue()-32)+",",I.GetValue())+" SR",N.GetValue()-32)+",",R.GetValue()+32)},()=>"Background Events",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/4-832},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+2048},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/4+
1216},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-2048},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/4-608},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+1728},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/4+996},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-1728},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/4-672},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/4+1056},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/10*3.5-832},a=>
{const b=a._GetNode(0).GetBoundMethod();return()=>b()/10*3.5+1216},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/10*3.5-672},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()/10*3.5+1056},()=>1536,()=>1296,()=>-368,()=>-432,()=>1056,a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject()-l.GetValue()*p()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject()+l.GetValue()*p()},
()=>"Overlay Effects",a=>{const b=a._GetNode(0);return()=>16+64*b.ExpObject()},()=>150,()=>"tileBased",()=>"Rain",()=>"Snow",()=>"Sand",a=>{const b=a._GetNode(0);return()=>512+1024*b.ExpObject()},a=>{const b=a._GetNode(0);return()=>432+864*b.ExpObject()},()=>"backgroundBased",()=>"Fog",()=>"HeavyFog",()=>"Fish",a=>{const b=a._GetNode(0);return()=>256+1024*b.ExpObject()},a=>{const b=a._GetNode(0);return()=>216+864*b.ExpObject()},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()/2},()=>"staticBased",
()=>"Water",()=>"Darkness",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-240,1344)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-200,616)},()=>"Leaf",()=>"Sparks",()=>"Bubbles",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>k("Confetti",Math.round(b(0,2)))},()=>"AutumnLeaf",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()*l()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>1.5*b()-592-l.ExpObject()-
96*p.GetValue()},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+1088},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>1.5*b()+466+l.ExpObject()-96*p.GetValue()},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-1088},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>1.5*b()-472-l.ExpObject()},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+832},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>1.5*b()+344+l.ExpObject()},
a=>{const b=a._GetNode(0);return()=>b.ExpObject()-832},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-896},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+1024},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-608},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+996},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject()-64,p.ExpObject()+64)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0,1)},a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>Math.round(b(4,8))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpInstVar()-64,p.ExpInstVar()+64))},()=>"Confetti",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetBoundMethod();return()=>b(l(255,0,0),p(0,248,0),r(0,204,255),t(112,40,240),u(248,248,0),w(247,
134,85))},()=>"Firebar",()=>"an2",()=>"an3",()=>"an4",()=>"s71",()=>"Middle",a=>{const b=a._GetNode(0);return()=>96+Math.abs(b.ExpObject())},()=>49,()=>76,()=>"LightSource",()=>"Global Sprite Events",()=>"Water Related Events",()=>"statue",a=>{const b=a._GetNode(0);return()=>-1.5*b.ExpBehavior()},()=>"removeIcePhysics",()=>"frogSuit",()=>"fireball",()=>"iceball",()=>"blooper",()=>"jelectro",()=>"cheepcheep",()=>"ripvanfish",()=>"spinycheepcheep",()=>"urchin",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar_Family()/
2},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar_Family()/6},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar_Family()/4},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Duck"),l.ExpInstVar())},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Swim"),l.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>96+b.ExpInstVar()},()=>"thwomp",a=>{const b=a._GetNode(0);return()=>6*b.ExpInstVar_Family()},a=>{const b=a._GetNode(0);return()=>4*b.ExpInstVar_Family()},
a=>{const b=a._GetNode(0);return()=>2*b.ExpInstVar_Family()},()=>"outOfWater",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-120*l()},()=>"underwater",()=>"Ice Physics",a=>{const b=a._GetNode(0);return()=>b.ExpObject(1)-12},()=>"thwimp",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Walk"),l.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()+64},()=>"Screen Wrap",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>
Math.abs(b.ExpObject())/2-Math.abs(l.ExpObject()/2)},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1),p=a._GetNode(2);return()=>32*b.GetValue()+l.ExpObject()/2-Math.abs(p.ExpObject()/2)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()/2*-1+Math.abs(l.ExpObject()/2)},()=>"General Sprite Events",()=>"spinnerspikeball",()=>"spinnerchain",()=>"firebarfire",()=>"bowser",()=>"kingBoo",()=>"circlingKingBooFire",a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()+128},()=>"boomboom",
()=>"Inventory Box",()=>"inInventory",()=>"InventoryBox",()=>"updateInventoryBox",()=>"releasedFromInventory",()=>"inventoryitem",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-200},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()+120*l()},()=>"Scrolling Text",()=>"Update HUD",()=>"coins",()=>"lives",()=>"add",()=>"DragonCoinCounter",()=>"dragoncoincounter",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>c(b.ExpObject(0),l(1))},a=>{const b=
a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4);return()=>k(b(l.ExpObject(0),p(r.ExpObject(12).toString()))+"/",t.ExpObject(12))},a=>{const b=a._GetNode(0);return()=>k("99+/",b.ExpObject(12))},()=>-607782533920767,()=>"Coin10",()=>"CharacterName",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>k(b(2),"Up")},()=>"subtract",()=>"displaylives",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>"X"+b(l.GetValue(),
2)},()=>"HurryUpSFX",()=>"displaytimeleft",()=>"redColor",()=>-281492157629439,()=>-281474976711679,()=>"points",()=>9999999,()=>"displaypoints",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),5)},()=>"speedIndicator",a=>{const b=a._GetNode(0).GetVar();return()=>480+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>496+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>512+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>
528+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>544+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>560+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>592+96*b.GetValue()},()=>"PJump",()=>"cloudIndicator",a=>{const b=a._GetNode(0).GetVar();return()=>540+96*b.GetValue()},()=>"Cloud",a=>{const b=a._GetNode(0).GetVar();return()=>564+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>588+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>
612+96*b.GetValue()},()=>"CloudFlower",()=>"endLevelAnimation",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-24,p.ExpObject()+24))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-8,p.ExpObject()+24))},()=>.03,()=>"Level Timer",()=>"playing",()=>"Time",()=>"Up",()=>"PowerUp Events",()=>"PowerUp Movement",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-32},a=>{const b=
a._GetNode(0);return()=>b.ExpInstVar()+32},()=>"AngleLeft",()=>"AngleRight",()=>"AngleReturn",()=>-100,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-8,p.ExpObject()+8))},()=>"Mirrored",()=>-2,a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-48},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+48},()=>"Dust",()=>"leftX",()=>"rightX",()=>"PowerUp Transformations",()=>"updateScoreChainScore",()=>"3Up",()=>"startStarman",()=>127,()=>
"startMetalPinecone",()=>"hover",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"RunJump")},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Run")},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Walk0")},()=>"Create Object Function",()=>"coin",()=>"thrownByLakitu",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar_Family())},()=>"releaseFromInventory",()=>"setToInventory",a=>{const b=a._GetNode(0);return()=>2*b.ExpBehavior()},
()=>"fromChest",()=>"fromLockedChest",()=>-448,()=>"powerUp",()=>"goalOrb",()=>"oneUp",()=>"threeUp",()=>"starman",()=>"steelPinecone",()=>"poisonMushroom",()=>"teleportToMario",()=>"destroy",()=>"fromBlock",()=>"Music Management",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod();return()=>b(l(1),8)},()=>"YoshiDrums",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod();return()=>b(l(1))},()=>"musicPoint",a=>{const b=a._GetNode(0).GetBoundMethod(),l=
a._GetNode(1).GetBoundMethod();return()=>b(l(1),"|",",")},()=>"eventMusic",()=>"switchTheme",()=>"SwitchMusic",()=>"starmanTheme",()=>"StarmanMusic",()=>"metalTheme",()=>"bowserDefeat",()=>"BowserDefeat",()=>"endMusic",()=>"endMusicSFX",()=>"EndMusicSFX",()=>"eventMusicEnded",()=>10.5,()=>"metalMusic",()=>4.1,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetVar();return()=>b(l(p.GetValue(),r(t.GetValue())-
1,"|"))},()=>"loopPoint",a=>{const b=a._GetNode(0).GetVar();return()=>"Music"+b.GetValue()+"Drums"},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("LevelMusic")},()=>"Score System",()=>800,()=>4E3,()=>8E3,a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-128*l()},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-64},()=>"TempFreezes",()=>"Level Clear Events",()=>"Main Events",()=>"levelClear",()=>"BossClear",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),
"Win")},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"RideWin")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Stand"),l.ExpInstVar())},()=>"destroyEnemiesOnscreen",()=>"Talk",()=>"Goal Orb",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>b(l.ExpObject()-16,p.ExpObject()-8,r.ExpObject()+8,t.ExpObject()+16)},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+12},()=>"Goal Tape",()=>"walk",a=>
{const b=a._GetNode(0);return()=>48-24*b.ExpInstVar()},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"BlownUp")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Walk"),l.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>Math.round((b.ExpInstVar()+160-l.ExpObject())/32)},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-88},()=>"CourseClear",()=>"LevelFadeout",()=>"FadeCircleWidth",()=>"FadeCircleHeight",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+
760},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-760},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-96},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+96},()=>"Flagpole",()=>"slideDownPole",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue().toString(),2)},()=>"PlayerFlag",()=>"grow",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),1)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-
l.ExpObject()+16},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>Math.round((b.ExpObject()-l.ExpObject())/32)-1},()=>"slideUpPole",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpObject()+32},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Ride")},()=>"turningAroundPole",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"RideTurn")},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-6},()=>.075,a=>{const b=a._GetNode(0);return()=>b.ExpObject()+6},
a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Spinjump"),l.ExpInstVar())},()=>"shrinkAndDestroy",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-32,p.ExpObject()+32))},()=>"Walk to NPC Mode",()=>"walkToNPC",()=>"walkToNPCComplete",()=>"movetonpc",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Duck"),l.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>64-32*b.ExpInstVar()},a=>
{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Jump"),l.ExpInstVar())},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Fall")},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Idle"),l.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Jump"),l.ExpInstVar())},()=>"Checkpoints",()=>"checkForDownSolidOverlap",()=>-30,()=>"MidwayGateMirrorL",()=>"MidwayGateAirL",()=>"MidwayGateMirrorR",()=>"MidwayGateAirR",
()=>"MidwayGateExtendedL",()=>"MidwayGateExtendedR",()=>-4,()=>"bc1",()=>"bc2",()=>"bc3",()=>"bc4",()=>"bc5",()=>"bc6",()=>"itemContainer",a=>{const b=a._GetNode(0);return()=>b.ExpObject().toString()},()=>"Main Health, Respawn & Despawn Events",()=>"Stomp",()=>"defStomped",()=>"Fireball Events",()=>"hitByFireball",()=>"toBeDestroyed",a=>{const b=a._GetNode(0);return()=>b.ExpObject("middle")},()=>"Iceball Events (& Freezing)",()=>"iceOnly",()=>"pokey",()=>"bulletbill",()=>"buzzybeetle",()=>"drybones",
()=>"spiketop",()=>"bobomb",()=>"chuck",()=>"bigmole",()=>"mechakoopa",()=>"MechaCheep",()=>.06,()=>"Frost",a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpObject())},()=>3.5,()=>"Shake",()=>"Break",()=>"goomba",()=>"snowPokey",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b(l.ExpObject(),5),p.ExpInstVar())},()=>"Superball Events",()=>"hitBySuperball",()=>"Reset to Defaults (Function)",()=>"resetToDefaultProperties",()=>"giftbox",()=>"Held Object Collision",
()=>"heldObjectCollision",()=>"defDefeated",()=>"angrySun",()=>"hit",()=>"removePokeySegment",()=>"onParachute",()=>"parachute",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-1024},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+1024},()=>"InvisiblePlatform",()=>"muncher",()=>"defeated",()=>"destroyed",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),1,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>
b(l(p.ExpInstVar(),2,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),3,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),4,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),5,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),6,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b(l.ExpInstVar(),7,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),8,",")},()=>"snowball",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),"Hit")},()=>"enemyInit",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),"JumpInShell")},()=>"fallenOutOfShell",()=>"montymole",()=>"wallWalker",()=>"turnThwimp",()=>1920,a=>{const b=a._GetNode(0);return()=>-1*b.ExpInstVar_Family()},
()=>"stomped",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()+720*l()},()=>"Turn Around On Edge",()=>"1Fall",()=>"1Hit",()=>"Goomba",()=>"spinJump",()=>"Goomba Stacking",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),"hit")},()=>"stacked",()=>"unstackGoomba",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Stacked")},()=>"updateGoombaStack",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0).toString()},()=>"Tail Goomba",
()=>"falling",()=>"landed",()=>"Idle",()=>"prepareTakeoff",()=>"spinning",()=>"Spin",()=>.14,()=>"prepareTurning",()=>"turning",()=>"Turn",()=>"takeoff",()=>"fakeBlock",()=>"Fake Block",()=>"Fake Block General Events",()=>"FB",()=>"maxSpeed",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("maxSpeed")},()=>"Landed",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/3},()=>"shell",()=>"Fake Block Health",()=>"BrickBlock",()=>"Fake Block & Mario Collisions",()=>"Galoomba",a=>{const b=a._GetNode(0);
return()=>k(b.ExpInstVar(),"Recover")},a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior())-96},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())+96},()=>"prepareflight",()=>"preparejump",()=>"jumping",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Jump")},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Statue")},()=>"HitCollision",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/2+192},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/2-192},()=>"nowings",
a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()-64},()=>"KoopaTroopa",()=>"Beach Koopas",()=>"3Walk",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"JumpInShell")},()=>"Koopa Main",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Turn")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"WingedTurn")},()=>"3Winged",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"PrepareWalk")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"HideAndLook")},()=>"slideSpeed",()=>"explode",
()=>"Fall",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("slideSpeed")},()=>"tailattackmario",()=>-768,()=>"hideAndLook",()=>"slidingmario",()=>"Misc Shell Events & Turning Animation",()=>"Beach Koopa Transition",()=>"hopOutOfShell",()=>"blink",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(.05,.3)},()=>"unBlink",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l(.3,1),p(2,4))},()=>"JumpInShell",a=>{const b=a._GetNode(0);
return()=>k(b.ExpInstVar(),"Kick")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),5)},()=>"Shell",a=>{const b=a._GetNode(0);return()=>64-32*b.ExpInstVar()},()=>"Wings",()=>"1Winged",()=>"turn",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+28},()=>"decreaseFallSpeed",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("decreaseFallSpeed")},()=>"increaseFallSpeed",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("increaseFallSpeed")},a=>{const b=a._GetNode(0);
return()=>k(b.ExpInstVar(),"Activated")},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-24},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/32},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("animationSpeed")},()=>"chaseTarget",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>b.ExpObject()+(l.ExpObject()-p.ExpObject())/2},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.distanceTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject())/
128},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()+180},()=>"Kamikaze",()=>"Fade",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject()-24,p.ExpObject()+24)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject()-16,p.ExpObject()+16)},()=>"Blue Beach Koopa",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"PrepareKick")},a=>{const b=a._GetNode(0);return()=>b.ExpObject("Object")},()=>"galoomba",a=>
{const b=a._GetNode(0);return()=>-8*b.ExpObject()},a=>{const b=a._GetNode(0);return()=>k("Exploding",b.ExpInstVar())},()=>"grabblock",()=>"thrownByEnemy",()=>"soccerBall",()=>"spikeball",a=>{const b=a._GetNode(0);return()=>384-192*b.ExpInstVar()},()=>"Koopa Functions",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>k(b.ExpInstVar(),l.GetValue())},()=>"spawningEnemies",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()-l.GetValue()},a=>{const b=a._GetNode(0).GetVar();
return()=>-1*Math.abs(b.GetValue())},a=>{const b=a._GetNode(0).GetVar();return()=>Math.abs(b.GetValue())},()=>"Bombshell Koopa",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()+200},()=>"Buzzy Beetle & Spiny",()=>"Buzzy Beetle Main",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Egg")},()=>"slopedownsolid",()=>"hideAndMove",()=>"Buzzy Beetle Update Function",()=>"returnWalking",()=>"angle",()=>"Buster Beetle",()=>"BusterBeetleGrabBlock",()=>"Hold",()=>"Jump",()=>"Grab",()=>"BusterBeetleCancelPickup",
()=>"BusterBeetleHoldBlock",()=>"Throw",()=>"powblock",()=>"Piranha Plant & Venus Fire Trap",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+66},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-66},()=>"ready",a=>{const b=a._GetNode(0);return()=>6+6*b.ExpInstVar()},()=>"moveDown",()=>"moveUp",()=>"moveRight",()=>"moveLeft",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-128},()=>"downwardsY",a=>{const b=a._GetNode(0);return()=>2+b.ExpInstVar()},()=>"upwardsY",()=>"leftwardsX",()=>"rightwardsX",
()=>"prepareVenusFireTrapFire",()=>"fire",()=>"fireBall",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject()))},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+45},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+135},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+225},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+270},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+315},
a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>"VenusFireTrap"+b(l.ExpInstVar(),0,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>"VenusFireTrap"+b(l.ExpInstVar(),1,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>"VenusFireTrap"+b(l.ExpInstVar(),2,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>"VenusFireTrap"+b(l.ExpInstVar(),3,",")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-
l.ExpObject()},()=>"penguinmario",()=>"Jumping Piranha",()=>"wait",()=>"upwardsSpeed",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-90},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior("upwardsSpeed")*l()},()=>"returnToHome",()=>315,()=>"Fire",()=>134,()=>-160,a=>{const b=a._GetNode(0);return()=>-2.5*b.ExpBehavior("upwardsSpeed")},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+40},a=>{const b=a._GetNode(0);return()=>2*b.ExpBehavior()-720},a=>{const b=a._GetNode(0);
return()=>2*b.ExpBehavior()+720},()=>"Rex",()=>"Lakitu",a=>{const b=a._GetNode(0);return()=>256+64*b.ExpObject()},()=>"Lakitu Main AI",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+720},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-720},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>e.lerp(b.ExpInstVar(),1.5*l.ExpBehavior(),1-Math.pow(.5,p()))},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),
u=a._GetNode(5),w=a._GetNode(6).GetBoundMethod();return()=>e.lerp(b.ExpObject(),l.ExpObject(),1-Math.pow(.25,p()))-r.ExpBehavior()*t()+u.ExpInstVar()*w()},()=>"throwSpinyEgg",()=>"2Egg",()=>"Chase",()=>"Lakitu Health",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(1,2)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l()-640,p()+640)},()=>"Fishing Rod",()=>"booSnakeFront",()=>"mountedCloud",()=>"invisibledestroyer",a=>
{const b=a._GetNode(0);return()=>b.ExpObject("RodEnd")},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>b.ExpObject("RodEnd")+(l.ExpObject()-p.ExpObject("Middle"))},()=>"Munchers",()=>"muncherfall",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-14},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-Math.abs(l.ExpObject())+24},()=>"Ninji",()=>"Stand",()=>-640,()=>"Thwomp",()=>"Thwomp Initialization",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-16},()=>"Thwomp Detecting Mario & Falling",
a=>{const b=a._GetNode(0);return()=>b.ExpObject()+160},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-160},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Look")},()=>"idle",()=>"Object Interactions",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()-512},a=>{const b=a._GetNode(0);return()=>-1*b.ExpBehavior()-512},()=>-12,()=>"Thwomp Landing",()=>"landing",()=>"climbable",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>Math.round(b.ExpObject()-l.ExpObject()%16)},()=>"returning",()=>
"returned",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>Math.round(b.ExpObject()+16-l.ExpObject()%16)},()=>"solidfromoutside",()=>"Thwomp Health",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"SpinJump"),l.ExpInstVar())},()=>"destroyerdust",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()/2*l()},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+24},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+8},a=>{const b=a._GetNode(0);
return()=>b.ExpInstVar()+4},()=>"Thwimp",()=>"Jumping",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-Math.round(l(-16,0))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-Math.round(l(0,16))},()=>"Podoboo & Dolphin",()=>"createJumpthruAssist",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpInstVar(),l.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Podoboo")},a=>{const b=a._GetNode(0);return()=>
k(b.ExpInstVar(),"Spark")},a=>{const b=a._GetNode(0);return()=>2*b.ExpBehavior()-192},()=>"2Dolphin",()=>"3Dolphin",()=>"1Podoboo",()=>"IceBlock",a=>{const b=a._GetNode(0);return()=>1*b.ExpBehavior()-192},()=>"freezeMario",()=>"Spinner & Platform",a=>{const b=a._GetNode(0);return()=>-2*b.ExpBehavior()},()=>"Boss Flame",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>256*b()},()=>"KingBoo",()=>"SpinKBFire",a=>{const b=a._GetNode(0);return()=>b.ExpObject("Smoke")},()=>"Dry Bones And Bones",()=>
"Dry Bones",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"GetUp")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Throw")},()=>"recovering",()=>"Bones",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>128*b()},()=>"Bony Beetle",()=>"doAttack",()=>"Attack",()=>"PrepareWalk",()=>"Spike and Spikeball",()=>"Spike",()=>"PrepareHold",()=>"Spikeball",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+20},a=>{const b=a._GetNode(0);return()=>4*b.ExpBehavior()},()=>"EngineSFX",()=>"Pokey / Snow Pokey",
()=>"Initializing",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpInstVar()-16},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Body")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"BodyTie")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Head")},()=>"Main Pokey Events",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(Math.round(l(-256,-64)),Math.round(p(128,256)))},()=>"spawnedfrompokey",
a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>b.ExpObject()+48-l.ExpObject()%p.GetValue()},()=>"Falling Spikes & Icicles",()=>"Spike Falling & Damage",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpInstVar()},()=>"preparefall",()=>"fallanimation",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpInstVar(),512,1-Math.pow(.1,l()))},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-Math.abs(l.ExpObject()/
2)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+Math.abs(l.ExpObject()/2)},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+24},()=>"Icicle Events",()=>"drip",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-12,p.ExpObject()+12))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(1,4)},()=>768,a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpInstVar(),0,1-Math.pow(.1,l()))},()=>
"Bullet Bill & Launchers",()=>"Bullet Bill",a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpObject())/2},()=>"KingBillDust",()=>"BulletSpawnSFX",()=>"DefaultBanzai",()=>"RedBanzai",()=>"BlueBanzai",()=>"kingbill",()=>"KingBill",()=>"Cannon0",()=>"Cannon1",()=>"Cannon2",()=>"Launchers",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-512},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+512},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-384},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+
384},()=>"BulletBillSpawn",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+"0"},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+"1"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+180},()=>"Cannonball & Cannons",()=>"Cannons",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()/2},()=>"fireAmno",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-640},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+640},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+480},()=>"nextCycle",a=>{const b=a._GetNode(0);
return()=>k("Cannon",b.ExpInstVar())},()=>"Torpedo Ted & Launcher",()=>"Torpedo Ted",()=>"InitTorpedoTed",a=>{const b=a._GetNode(0);return()=>384/b.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject()))-180},()=>"initTorpedoTed",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>1920*b()},()=>"Target",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);
return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject()))+180},()=>"TT Launcher",a=>{const b=a._GetNode(0);return()=>.3+b.ExpInstVar()},()=>"SpawnTorpedo",()=>"ReleaseTorpedo",a=>{const b=a._GetNode(0);return()=>k("Blue",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>k("Default",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>k("Red",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>(Math.abs(b.ExpInstVar())+32)/128},()=>"fromBox",()=>"HammerBro",()=>
"Hammer Bro Events",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod();return()=>b(0,0,1,1,Math.round(l(4,7)))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(3,14))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-480*l()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()+480*l()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod();return()=>b(2,2,4,4,Math.round(l(12,
16)))},()=>.16,()=>"hammerbro",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(224,256,288,320,352)},()=>-720,a=>{const b=a._GetNode(0);return()=>b.ExpObject()-36},()=>"Hammer Bro Hammer",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+320},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-320},()=>"hammer",()=>"4Duck0",()=>"Flame",()=>"Bob-omb",()=>"Exploding1",()=>"Exploding0",()=>"SmallDust",a=>{const b=a._GetNode(0);return()=>-384+b.ExpBehavior()},a=>{const b=a._GetNode(0);return()=>
1.2*(b.ExpBehavior()+128)},a=>{const b=a._GetNode(0);return()=>1.2*(-1*b.ExpBehavior()-128)},()=>"Parachuting",()=>"exploding",()=>"explosion",()=>"toad",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/2},()=>"instantexplode",a=>{const b=a._GetNode(0);return()=>1.5*b.ExpBehavior()},()=>"explodeBobomb",a=>{const b=a._GetNode(0);return()=>-64-b.ExpBehavior()},()=>1440,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-20,p.ExpObject()+
20))},()=>"Explosion",()=>"yoshiStomp",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(0,7))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9).GetVar();return()=>b(l(p(r.GetValue(),0,"."))-32,t(u(w.GetValue(),1,"."))-32,x(A(E.GetValue(),
2,"."))-32)},()=>.05,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9).GetVar();return()=>b(l(p(r.GetValue(),0,"."))+32,t(u(w.GetValue(),1,"."))+32,x(A(E.GetValue(),2,"."))+32)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>e.lerp(b.ExpObject(),
l.ExpInstVar(),.1)},()=>"Stone",()=>"Log",()=>"Kab-omb",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(3,6))},()=>"Exploding",()=>"BlowingUp",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject()-16,p.ExpObject()-48)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-32-12*l.ExpInstVar()},()=>"Volcano Lotus",()=>"Sticking to Walls",()=>"lotusfall",()=>"Shooting Lotus Fire & Health",()=>"Charge",()=>"SpitFire",()=>-112,
()=>-168,()=>"Cheep Cheep",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>64*b()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()-32*l.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+32*l.ExpInstVar()},()=>"updateCheepCheep",()=>2.5,()=>"Rotate",()=>"Swim",()=>"jumpToTargetY",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()-l.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()/256},a=>{const b=a._GetNode(0),l=
a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()+2048*l()},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-180},()=>"Blurp",()=>"BossBass",()=>"CheepChomp",()=>"SpikeBass",()=>"OutOfWater",()=>"updateScore",()=>"bossBassEatenMario",()=>"generatedMechaCheep",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+16-l.ExpObject()%32},()=>"toWaterPos",()=>"Deep / Eep Cheep",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),
u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7),A=a._GetNode(8).GetBoundMethod();return()=>b(l.ExpObject(),e.toDegrees(e.angleTo(p.ExpObject(),r.ExpObject(),t.ExpObject(),u.ExpObject()))-180-180*w.ExpInstVar(),1-Math.pow(x.ExpInstVar(),A()))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b(l.ExpObject(),0,1-Math.pow(.1,p()))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b(l.ExpObject(),
180,1-Math.pow(.1,p()))},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"OutOfWater")},()=>"Blurp Fish",()=>"Rip Van Fish",()=>"Awake",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+l.ExpObject()-4},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpObject()+4},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+l.ExpObject()/2-4},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpObject()/2+4},()=>"Spiny Cheep Cheep",
()=>"Porcupuffer",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>512*b()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior()-256*l()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior()+256*l()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>1024*b()},()=>"Boss Bass / Cheep Chomp / Spike Bass",()=>"Main Boss Bass & Variants Events",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()/32+1},a=>{const b=a._GetNode(0);return()=>
b.ExpInstVar()+192},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-192},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Bite")},()=>"setAngle",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()+1024*l()},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()},()=>"performUnderwaterAI",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject()))-45},
a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject()))+45},()=>"BossBassChaseMario",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject()))-135},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),
r.ExpObject()))+225},()=>"BossBassJump",()=>"prepareJump",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>96*b()},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+192},()=>"jumpAngle",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()-576*l()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()+576*l()},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("Sine")},()=>"Sine",()=>"BossBassEatenMario",()=>"loseLifeMinimumEvents",a=>
{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Hurt")},()=>"Big Fish Health",()=>"Jelectro",()=>"setJelectroUnderwaterMode",()=>"Electrocute",()=>"jelectroSFX",()=>"Blooper",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"SwimUp")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+l.ExpObject()},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("Swim")+1},()=>"Swim2",()=>"Fish Bone",()=>"Fish Bone (SMW)",()=>"accel",()=>.66,a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("accel")/
8},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior("accel")*l()},()=>"decel",()=>"Blink",()=>"destroyFishbone",()=>"Fishbone",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l(-256,-128),p(128,256))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-128,-384)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-480,480)},()=>"Fish Bone (NSMB)",()=>"Fish Bone Movement",a=>{const b=
a._GetNode(0);return()=>b.ExpInstVar()-128},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+128},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()-180},()=>"Fish Bone Chase",()=>"preparingChase",()=>"angleToMario",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>192*b()},()=>"cancelChaseAngle",()=>"Fish Bone Out Of Water",()=>"toWaterY",()=>"Fish Bone Health",()=>"Urchin",()=>"startMoving",()=>"Mecha Cheep",()=>"Floating Mine",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>
b.ExpObject()+64*l()},()=>"Chuck",()=>"Main Chuck AI",a=>{const b=a._GetNode(0);return()=>12+b.ExpObject()},()=>"charge",()=>"PrepareJump",()=>"BaseballGround",()=>"Football",()=>"DigLook",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/4},()=>"Shovel",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-512,-768)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-720,720)},()=>"removeChuckHealth",()=>"IdleTurn",()=>"Chase AI",()=>"splitted",a=>{const b=a._GetNode(0),l=a._GetNode(1);
return()=>b.ExpObject()-96-32*l.ExpObject()},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-224},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+96+32*l.ExpObject()},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+224},a=>{const b=a._GetNode(0);return()=>6+b.ExpObject()},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"GrabBlock")},()=>-6,()=>"Clapping Chuck",()=>"JumpToMario",()=>"Clap",()=>"Bouncing Chuck",()=>"Landing",()=>"Confused Chuck",a=>{const b=a._GetNode(0);
return()=>b.ExpObject()+80},()=>-576,()=>"BaseballJump",()=>"BaseballFall",()=>"Baseball",()=>"Football Chuck",()=>"SpawnFootball",()=>"Kick",()=>"Wait",()=>1.8,()=>"createChuckFootball",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-384,-578,-640)},()=>"baddiebox",()=>"Digging Chuck",()=>"DigUp",()=>"createChuckBoulder",()=>"Dig",()=>"Boulder",()=>"ground",()=>"Despawn",()=>"w",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>-384-1.5*(b.ExpObject()-l.ExpInstVar())},()=>"Soccer Chuck",
a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-384,-512)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(384,512)},()=>"createChuckSoccerball",()=>"flash",()=>"flashFinal",()=>"despawn",()=>"Splitting Chuck",()=>"PrepareSplit",()=>"Splitting",()=>"Monty Mole",()=>"Mole AI",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/12},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()+128},a=>{const b=a._GetNode(0);return()=>-1*b.ExpBehavior()-128},a=>{const b=a._GetNode(0),l=a._GetNode(1);
return()=>b.ExpObject()-(l.ExpObject()/2-12)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-(l.ExpObject()-12)},a=>{const b=a._GetNode(0);return()=>Math.round(b.ExpBehavior()/1.5)},a=>{const b=a._GetNode(0);return()=>Math.round(b.ExpInstVar()/1.5)},()=>2048,()=>"Mole Hole",()=>"DefaultBig",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(-512,-384))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>
b(Math.round(l(-256,-128)),Math.round(p(128,256)))},()=>"Rocky Wrench",()=>"Rocky Wrench AI",()=>"Peek",()=>"PrepareAttack",()=>"StartPeek",()=>"StartAttack",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"PrepareThrow")},()=>"WrenchSize",()=>"Hide",()=>"recover",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+30},()=>"Wrench",()=>"Mecha Koopa",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(1,3))},()=>"Stun",()=>"Recover",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/
8},()=>"Left",()=>"Right",()=>"MechaK1",()=>"MechaK2",()=>"MechaK3",()=>"MechaK4",()=>"FallingFlame",()=>"burnedOut",()=>"BigSteelies",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()/4},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpBehavior()+l.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpBehavior()-
3*l.ExpInstVar()*p()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpBehavior()+3*l.ExpInstVar()*p()},()=>"Rolling",()=>"Frozen",()=>"endPosition",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpBehavior(),0,1-Math.pow(.1,l()))},()=>"steelyBounceSFX",()=>"Dino Torch",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(2,6))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("SpitH","SpitV")},()=>"startWalking",
()=>"SpitH",()=>"Start",()=>"End",()=>"Dino Rhino",()=>"Spike Top / Fuzzy / Lil Sparkies / Hothead",()=>"Wall-Walking AI",a=>{const b=a._GetNode(0);return()=>6*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>4*b.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(24,48))},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()/6},()=>"levelborder",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"TurnOuter")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"TurnInner")},
a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()-90},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()+90},()=>"Wall-Walking Mario Collision",a=>{const b=a._GetNode(0);return()=>b.ExpObject("top")-12},()=>"Wall-Walking Collision Filtering",a=>{const b=a._GetNode(0).GetVar();return()=>k("SW G G",b.GetValue()+32)+" T DL DR SSL SSR P PO"},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+" D"},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),
u=a._GetNode(5),w=a._GetNode(6).GetVar(),x=a._GetNode(7),A=a._GetNode(8).GetVar(),E=a._GetNode(9),y=a._GetNode(10).GetVar(),B=a._GetNode(11).GetVar(),H=a._GetNode(12),P=a._GetNode(13).GetVar(),F=a._GetNode(14);return()=>k(k(k(k(k(k(k(k(b.ExpInstVar()+" DL",l.GetValue()+p.ExpObject())+",",r.GetValue())+" DL",t.GetValue()+u.ExpObject())+",",w.GetValue()-x.ExpObject())+" DR",A.GetValue()-E.ExpObject())+",",y.GetValue())+" DR",B.GetValue()-H.ExpObject())+",",P.GetValue()-F.ExpObject())},a=>{const b=a._GetNode(0),
l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar(),A=a._GetNode(8),E=a._GetNode(9).GetVar(),y=a._GetNode(10).GetVar();return()=>k(k(k(k(k(k(k(k(b.ExpInstVar()+" DL",l.GetValue())+",",p.GetValue()-r.ExpObject())+" DL",t.GetValue())+",",u.GetValue())+" DR",w.GetValue())+",",x.GetValue()-A.ExpObject())+" DR",E.GetValue())+",",y.GetValue())},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),
p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7),A=a._GetNode(8).GetVar(),E=a._GetNode(9).GetVar(),y=a._GetNode(10);return()=>k(k(k(k(k(k(k(k(b.ExpInstVar()+" SL",l.GetValue())+",",p.GetValue())+" SR",r.GetValue())+",",t.GetValue())+" SL",u.GetValue())+",",w.GetValue()+x.ExpObject())+" SR",A.GetValue())+",",E.GetValue()+y.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);
return()=>k(k(k(b.ExpInstVar()+" T",Math.round(l.ExpObject())-10)+" T",Math.round(p.ExpObject())-9)+" T",Math.round(r.ExpObject())-8)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4).GetVar(),u=a._GetNode(5),w=a._GetNode(6).GetVar(),x=a._GetNode(7),A=a._GetNode(8).GetVar(),E=a._GetNode(9),y=a._GetNode(10).GetVar(),B=a._GetNode(11),H=a._GetNode(12).GetVar(),P=a._GetNode(13),F=a._GetNode(14).GetVar(),I=a._GetNode(15),N=a._GetNode(16).GetVar(),R=a._GetNode(17),
S=a._GetNode(18).GetVar(),Y=a._GetNode(19).GetVar(),W=a._GetNode(20),ea=a._GetNode(21).GetVar(),na=a._GetNode(22),ja=a._GetNode(23).GetVar(),wa=a._GetNode(24),sa=a._GetNode(25).GetVar(),Da=a._GetNode(26).GetVar(),Ea=a._GetNode(27),Aa=a._GetNode(28).GetVar(),za=a._GetNode(29);return()=>k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(b.ExpInstVar()+" Default D",l.GetValue()-Math.round(Math.abs(p.ExpObject()-r.ExpObject()%32)))+" ST",t.GetValue()+u.ExpObject())+" T",w.GetValue()+x.ExpObject()-16)+" R",A.GetValue()-E.ExpObject())+
" R",y.GetValue()-B.ExpObject()+32)+" L",H.GetValue()+P.ExpObject())+" L",F.GetValue()+I.ExpObject()+32)+" SL",N.GetValue()+R.ExpObject())+",",S.GetValue())+" SL",Y.GetValue()+W.ExpObject())+",",ea.GetValue()+na.ExpObject())+" SR",ja.GetValue()-wa.ExpObject())+",",sa.GetValue())+" SR",Da.GetValue()-Ea.ExpObject())+",",Aa.GetValue()+za.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4).GetVar(),u=a._GetNode(5),w=a._GetNode(6).GetVar(),x=
a._GetNode(7),A=a._GetNode(8).GetVar(),E=a._GetNode(9),y=a._GetNode(10).GetVar(),B=a._GetNode(11),H=a._GetNode(12).GetVar(),P=a._GetNode(13),F=a._GetNode(14).GetVar(),I=a._GetNode(15),N=a._GetNode(16).GetVar(),R=a._GetNode(17),S=a._GetNode(18).GetVar(),Y=a._GetNode(19),W=a._GetNode(20).GetVar(),ea=a._GetNode(21),na=a._GetNode(22).GetVar(),ja=a._GetNode(23).GetVar(),wa=a._GetNode(24),sa=a._GetNode(25).GetVar(),Da=a._GetNode(26),Ea=a._GetNode(27).GetVar(),Aa=a._GetNode(28),za=a._GetNode(29).GetVar(),
ia=a._GetNode(30).GetVar(),Fa=a._GetNode(31),xa=a._GetNode(32).GetVar(),Ca=a._GetNode(33);return()=>k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(k(b.ExpInstVar()+" Default D",l.GetValue()-16-Math.round(Math.abs(p.ExpObject()-r.ExpObject()%32)))+" ST",t.GetValue()+u.ExpObject())+" T",w.GetValue()+x.ExpObject()-32)+" R",A.GetValue()-E.ExpObject()-32)+" R",y.GetValue()-B.ExpObject())+" R",H.GetValue()-P.ExpObject()+32)+" L",F.GetValue()+I.ExpObject()-32)+" L",N.GetValue()+R.ExpObject())+" L",S.GetValue()+Y.ExpObject()+
32)+" SL",W.GetValue()+ea.ExpObject())+",",na.GetValue())+" SL",ja.GetValue()+wa.ExpObject())+",",sa.GetValue()+Da.ExpObject())+" SR",Ea.GetValue()-Aa.ExpObject())+",",za.GetValue())+" SR",ia.GetValue()-Fa.ExpObject())+",",xa.GetValue()+Ca.ExpObject())},()=>"Wall-Walking Springboard Collisions + Turnarounds",a=>{const b=a._GetNode(0);return()=>2*b.ExpInstVar()+64},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()-4},()=>"Snapping To Wall",()=>"Wall Urchin Water Events",()=>"Bully",()=>
"Bully Movement",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/16},()=>"knockbackEnd",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("charge")},a=>{const b=a._GetNode(0);return()=>256-64*b.ExpInstVar()},()=>"Bully Collisions",a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()/2.5},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+Math.abs(l.ExpObject())/2},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>-2.5*Math.abs(b.ExpBehavior())-96-192*l.ExpInstVar()},a=>{const b=
a._GetNode(0),l=a._GetNode(1);return()=>-1.5*Math.abs(b.ExpBehavior())-128-256*l.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())/2+48},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())/2+128},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-Math.abs(l.ExpObject())/2},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>1.5*Math.abs(b.ExpBehavior())+128+256*l.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior()/2)-48},
a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior()/2)-128},a=>{const b=a._GetNode(0);return()=>.1+b.ExpInstVar()/5},a=>{const b=a._GetNode(0);return()=>-.5*Math.abs(b.ExpBehavior())-64},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())/2+64},a=>{const b=a._GetNode(0);return()=>.5*Math.abs(b.ExpBehavior())+64},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())/2*-2-64},()=>"turnShellMarioAround",a=>{const b=a._GetNode(0);return()=>-2*b.ExpBehavior()},a=>{const b=
a._GetNode(0);return()=>-192+92*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>192-92*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior())-128},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())+64},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior())+128},a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior())-64},()=>"marioHammer",()=>"Bully Boiling",()=>"boiling",()=>"sinking",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),
p=a._GetNode(2);return()=>b(l.ExpObject()-32,p.ExpObject()+32)},()=>-176,a=>{const b=a._GetNode(0);return()=>-1*b.ExpInstVar()-192},()=>"NipperPlant",()=>"fireDelay",a=>{const b=a._GetNode(0);return()=>-512-32*b.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>e.distanceTo(b.ExpObject(),0,l.ExpObject(),0)+16*p.ExpInstVar()},()=>"Blargg",()=>"Blargg Attack Cycle",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+60},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-
60},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-288},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+288},()=>"watching",()=>"lookDelay",()=>"LookUp",()=>"GrowToDefaultSize",()=>"backToLava",()=>"readyToAttack",()=>"BackToLava",()=>"attack",()=>"attacking",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Attack")},()=>"attackY",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-176},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-144},()=>"attackX",a=>{const b=a._GetNode(0);return()=>
b.ExpObject()+176},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+144},()=>"Shrink",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+60},()=>"doneAttacking",()=>"Blargg Health",()=>"blarggHit",()=>"Defeat",()=>"AngrySun",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l()-368,p()+368)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-248},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+320},a=>{const b=
a._GetNode(0).GetBoundMethod();return()=>b()-320},()=>"waitingForActivation",()=>"goOnScreen",()=>"spawnDistance",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()+240+l.ExpBehavior("spawnDistance")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-120-l.ExpBehavior("spawnDistance")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-240-l.ExpBehavior("spawnDistance")},()=>"goOffScreen",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b()+368-l.ExpBehavior("goingOffScreenDistance")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-248+l.ExpBehavior("goingOffScreenDistance")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-368+l.ExpBehavior("goingOffScreenDistance")},()=>"goingOffScreenDistance",a=>{const b=a._GetNode(0);return()=>1+b.ExpObject()},()=>"startRotating",()=>"chasing",()=>"preparingAttack",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();
return()=>e.lerp(b.ExpBehavior(),-360,1-Math.pow(.25,l()))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpBehavior(),360,1-Math.pow(.25,l()))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpBehavior(),-1440,1-Math.pow(.5,l()))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpBehavior(),1440,1-Math.pow(.5,l()))},()=>"rotating",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()+
240+-1*l.ExpBehavior()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-120+l.ExpBehavior()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-240+l.ExpBehavior()},()=>"preparingRotation",()=>"goToRotationPos",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-120+l.ExpBehavior("goToRotationPos")},()=>2.2,()=>"homeIn",()=>"pause",()=>"homingDown",()=>"movementX",()=>-304,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);
return()=>b()+l.ExpBehavior("movementX")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()-120+l.ExpBehavior("homingDown")},()=>"returnToCorner",()=>"homingUp",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-120},()=>-717706215031807,()=>"Chain Chomp",()=>"Chain Chomp Post",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>b.ExpObject()+(l.ExpInstVar()-p.ExpObject())/r.ExpInstVar()*t.ExpInstVar()},()=>"unchained",()=>
"chained",a=>{const b=a._GetNode(0);return()=>32*b.ExpInstVar()-8},()=>"Chain Chomp Attacks",()=>"checking",a=>{const b=a._GetNode(0);return()=>-96+32*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>96-32*b.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-16*l.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+16*l.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+16*l.ExpInstVar()-16},()=>1.6,()=>"endAttack",
a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("idle","walk")},()=>"swing",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("swing")},()=>"Unchaining Chain Chomp & AI",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()-32*(l.ExpInstVar()+1)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+32*(l.ExpInstVar()+1)},()=>"Chain Chomp Health",()=>"Grrrol",()=>"Grrrol Misc",()=>"LeftEye",()=>"RightEye",()=>"Grrrol Movement",()=>"Grrrol Collisions",a=>{const b=a._GetNode(0);
return()=>b.ExpBehavior()-256},()=>"FireSnake",()=>"SMB3 Fire Snake",()=>"SpawnFlame",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()+16*l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-64,64)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-96*l()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.distanceTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject())},a=>{const b=a._GetNode(0);
return()=>16*b.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(6,12))},()=>"hop",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-256,-320)},()=>"SMW Fire Snake",()=>"burnOut",()=>"Small Flame Events",()=>"Crowber",()=>"Crowber Movement",()=>"HomeIn",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod();return()=>b.ExpObject()+(l.ExpInstVar()*p()+r.ExpBehavior()*t())},a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>b()-256},()=>"moveUpY",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+256},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpInstVar(),0,1-Math.pow(.15,l()))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>768*b()},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+128},()=>"FlyDown",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-128},()=>"targetY",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>1536*b()},()=>"faceSkyAngle",
()=>"Crowber Health",()=>"Feather",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject()-128,p.ExpObject()+128)},()=>"Goonie",()=>"Flying Goonie",()=>"flyUp",()=>"glideDown",a=>{const b=a._GetNode(0);return()=>k("FlyUp",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>k("Glide",b.ExpInstVar())},()=>"Bone",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-128,-256)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-256,-384)},a=>{const b=
a._GetNode(0).GetBoundMethod();return()=>b(256,512)},()=>"Flightless Goonie",()=>"GoonieFeather",()=>"Hefty Goonie",()=>"size1",()=>52,()=>"size2",()=>"size3",()=>-72,()=>-88,()=>"Bowling Goonie",()=>"bowlingGoonie",()=>"GoonieSprite",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(4,12))},()=>"Smoke",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject(),l.ExpInstVar())},()=>"growToDefault",()=>"checkMeteorCollision",()=>"questionBlock",()=>"brickBlock",()=>"flipBlock",
()=>"switchPalaceBlock",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+"Debris"},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(128,256)},()=>"GiantDust",()=>"5Spark",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar()+2,"Spark")},()=>"Boo",()=>"Regular Boo (+ Block)",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"TurnFlee")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Flee")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"IdleAnim")},()=>"preventHide",a=>{const b=
a._GetNode(0).GetBoundMethod();return()=>b(.1,.4)},()=>"preventChase",()=>"playIdleAnim",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>Math.round(b(6,12)*(l.ExpInstVar()+1))},()=>"1Turn",()=>"sineWave",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+l.ExpBehavior("sineWave")},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>32*b()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpInstVar(),-96,1-Math.pow(.33,l()))},a=>{const b=
a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>e.lerp(b.ExpInstVar(),96,1-Math.pow(.33,l()))},()=>"1TurnFlee",()=>"0Chase",()=>"Boo Snake",()=>"booSnakePart",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b.ExpObject()+l.ExpInstVar()-p.ExpObject()%32)},()=>"D",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar(),
A=a._GetNode(8).GetVar(),E=a._GetNode(9).GetVar(),y=a._GetNode(10).GetVar(),B=a._GetNode(11).GetVar(),H=a._GetNode(12).GetVar();return()=>k(k(k(k(k(k(k(k(k(k(k(k("Default SB PF "+b.ExpObject().toString()+" T",l.GetValue())+" ST",p.GetValue())+" L",r.GetValue()+32)+" L",t.GetValue()+64)+" SL",u.GetValue()+32)+",",w.GetValue())+" SL",x.GetValue()+32)+",",A.GetValue()+32)+" SR",E.GetValue()-32)+",",y.GetValue())+" SR",B.GetValue()-32)+",",H.GetValue()+32)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),
p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar(),t=a._GetNode(4).GetVar(),u=a._GetNode(5).GetVar(),w=a._GetNode(6).GetVar(),x=a._GetNode(7).GetVar(),A=a._GetNode(8).GetVar(),E=a._GetNode(9).GetVar(),y=a._GetNode(10).GetVar(),B=a._GetNode(11).GetVar(),H=a._GetNode(12).GetVar();return()=>k(k(k(k(k(k(k(k(k(k(k(k("Default SB PF "+b.ExpObject().toString()+" T",l.GetValue())+" ST",p.GetValue())+" R",r.GetValue()-32)+" R",t.GetValue()-64)+" SL",u.GetValue()+32)+",",w.GetValue())+" SL",x.GetValue()+32)+
",",A.GetValue()+32)+" SR",E.GetValue()-32)+",",y.GetValue())+" SR",B.GetValue()-32)+",",H.GetValue()+32)},()=>"U",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar();return()=>k(k(k(k("Default SB D",b.GetValue()-32)+" ST",l.GetValue()+32)+" R",p.GetValue()-32)+" R",r.GetValue()-64)+" DR"},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar();return()=>k(k(k(k("Default SB D",b.GetValue()-
32)+" ST",l.GetValue()+32)+" L",p.GetValue()+32)+" L",r.GetValue()+64)+" DL"},()=>"Eerie",()=>"Splunkin",()=>"pumpkinCrunch",()=>"Pumpkin",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-256,0)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-384,-768)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(720,1440)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0,256)},()=>"Green Bubble",()=>"Swooper",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Fly")},a=>{const b=
a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.distanceTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject())/192},()=>"flyingSpeed",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("flyingSpeed")},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);return()=>b.ExpObject()-l.ExpInstVar()*p()/(r.ExpInstVar()+1)},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3);return()=>b.ExpObject()+l.ExpInstVar()*
p()/(r.ExpInstVar()+1)},()=>"Broozer",()=>"Broozer Movement & Hitting Blocks",()=>"Punch",()=>"turnCheck",a=>{const b=a._GetNode(0);return()=>-64+32*b.ExpInstVar()},()=>"Broozer Health",a=>{const b=a._GetNode(0);return()=>2*b.ExpInstVar_Family()+64},()=>"BroozerGlove",()=>"General Block Events",()=>"Main Coin Events",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-384,-512,-640)},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>b.GetValue()-(l.GetValue()-
p.GetValue())},()=>"RedCoinSFX",a=>{const b=a._GetNode(0).GetVar();return()=>1+b.GetValue()/16},()=>"Movement",()=>"Outlined Coins",()=>"Yoshi Coins",()=>"spark",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(6,10))},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k(k(k(b.ExpInstVar(),","),l.ExpInstVar())+",",p.ExpInstVar())+",",r.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>1E3*(b.ExpObject()-1)},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),0,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),1,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),2,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),3,","))},()=>"Clocks",()=>"Item Block",
()=>"onGround",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+l.ExpObject()-28},()=>"Brick Block",()=>"Flip Block",()=>"Flip",()=>"spinJumpedFlipBlock",()=>"Gray Flip Block",()=>"Gray Brick Block",()=>"GrayBrickBlock",()=>"Noteblock",()=>"springJump",()=>"mushroom",()=>"fireFlower",()=>"superLeaf",()=>"hammerFlower",()=>"cloudFlower",()=>"iceFlower",()=>"penguinSuit",()=>"blueShell",()=>"carrot",()=>"tanookiSuit",()=>"superballFlower",()=>"POW-Block",()=>"pow",a=>{const b=a._GetNode(0).GetBoundMethod();
return()=>b(-64,-128,-256,-384)},()=>"GrabBlock",()=>"0GrabBlock",()=>"1GrabBlock",()=>"Gift Box",()=>"redpowexplosion",()=>"pswitchInfinity",()=>"pswitchBrown",()=>"pswitchBrownInfinity",()=>"pswitchGray",()=>"pswitchGrayInfinity",()=>"redSwitch",()=>"redSwitchInfinity",()=>"yoshiEgg",()=>"Cord",()=>"fromGiftBlock",()=>"FireTwinkle",()=>"OnOffSwitch & Block",()=>"Toggled",()=>"OnOffSwitchSwap",a=>{const b=a._GetNode(0);return()=>k("Switch",b.ExpInstVar())},()=>"Palace Switch And Block",()=>"Palace Switch",
()=>"Pressed",a=>{const b=a._GetNode(0);return()=>-1*Math.abs(-1*b.ExpInstVar())},()=>"Palace Block",()=>"Light Block",()=>"lightBlock",()=>"springboard",()=>"Textbox",()=>"textbox",()=>"textboxText",()=>"scrollUp",()=>"scrollDown",()=>"Sign",()=>"General NPC Events",()=>"HUDOverlay",a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()-208},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()-176},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-172},()=>146,a=>{const b=a._GetNode(0);
return()=>b.ExpObject()+156},()=>"\u2191",()=>"scrollPos",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+44},()=>"\u2193",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("scrollPos")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+20-l.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+44-l.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-72-l.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()+18},()=>
.15,a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpObject()+72},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-18},()=>"shrink",()=>"Toad",()=>"Snowman NPC (Snowpeep)",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-1},()=>"spawnedfromsnowman",()=>"Springboards",()=>"climbJumpDelay",()=>"nonspringboard",()=>"onlyLiquids",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpBehavior()+l.ExpBehavior()/2},()=>"mirrorOpposite",a=>{const b=a._GetNode(0);return()=>-1.5*
b.ExpBehavior()},()=>"P-Switch",()=>"Main P-Switch Events",()=>"unactivated",()=>"pressed",()=>"superBall",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-20},()=>"yoshi",()=>"kuriboShoe",()=>"broozer",()=>"activated",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Activated"),l.ExpInstVar())},()=>115,()=>"GrayPSwitchSwap",()=>"Sideways P-Switch Events",()=>"startFall",()=>"P-Switch Swap Events",()=>"Brown P-Switch Swap Events",()=>"Gray P-Switch Swap Events",()=>"lakitu",
()=>"enemyObject",()=>"enemyTiles",()=>"hardObject",()=>"fireEnemies",()=>"ghostEnemies",()=>"Exclamation-Switch Swap Events",()=>"Key & Keyhole",()=>"KeyholeExit",()=>"EndEffect",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+17},()=>"Parachute",()=>"Object Attaching",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject("Parachute")-Math.abs(l.ExpObject())-16},()=>"kabomb",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Parachuting")},()=>"bully",a=>{const b=a._GetNode(0),l=a._GetNode(1);
return()=>b.ExpObject()+48-l.ExpObject()%32},()=>"pDisabled",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpObject()%32},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+l.ExpObject()%32},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+32-l.ExpObject()%32},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+64-l.ExpObject()%32},()=>"muncherassist",()=>"onoffblock",()=>"Munch",()=>"Glass",()=>"muncherOnParachute",()=>"MunchFullCollision",
a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+l.ExpObject()+8},()=>"Parachute Movement & Collision",()=>"key",()=>"Parachute Mario",()=>"instaKill",()=>"Cloud Mount",()=>"ridingMount",()=>"cloudDespawn",()=>"cloudFlash1",()=>"cloudFlash2",()=>"spawnCloudParticle",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"UsePowerUp")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Turn"),l.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),
"PrepareTongue")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Tongue")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"TongueHigh")},()=>"ridableCloud",()=>"Bubble",()=>"pinToBubble",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-(l.ExpObject()/2-16)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-(l.ExpObject()/2+16)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+(l.ExpObject()/2-16)},()=>"Bubble96",()=>"Bubble192",a=>{const b=
a._GetNode(0).GetBoundMethod();return()=>b()+1},()=>"Snowball",a=>{const b=a._GetNode(0);return()=>1.5*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>-256-b.ExpBehavior()},a=>{const b=a._GetNode(0);return()=>8*b.ExpBehavior()},()=>"Soccerball",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpBehavior()-3*l.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpBehavior()+3*l.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior())-256},a=>{const b=
a._GetNode(0);return()=>-1*Math.abs(b.ExpBehavior()/2)-256},a=>{const b=a._GetNode(0);return()=>Math.abs(b.ExpBehavior()/2)+256},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Kick")},()=>"Donut Blocks",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Falling")},()=>"0Falling",()=>"2Falling",()=>"selfControlled",()=>"1Falling",()=>"3Falling",()=>"growToDefaultSize",()=>"Red Coin Ring",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2);return()=>
b(l.GetValue(),p.ExpInstVar()+2,",")},()=>"Conveyor Belt",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject()-4*l.ExpObject()*p()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject()+4*l.ExpObject()*p()},()=>"Bowser Bridge & Axe",()=>"Chain",()=>"Baddie Box",()=>"dragoncoin",()=>"bubble",()=>"release",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"PlateReturned")},()=>"glass",a=>{const b=a._GetNode(0);
return()=>k(b.ExpInstVar(),"PrepareRelease")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"prepareRelease")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Release")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),4,",")},()=>"BaddieBoxDust",a=>{const b=a._GetNode(0);return()=>b.ExpObject(1)-16},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar_Family(),0,",")},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),
p=a._GetNode(2);return()=>b.ExpInstVar()+Math.round(l(0,p.ExpInstVar()))},()=>"swoop",()=>"Torches",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(-96,96)},()=>"Arrow Cloud",()=>"Power-up Chest",a=>{const b=a._GetNode(0);return()=>b.ExpObject("itemSpawn")},()=>"upwards",()=>"chestWarp",()=>"chasingMario",()=>"Tag Block",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar()," ")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetVar();
return()=>b(l.ExpInstVar(),p.GetValue()," ")},()=>"duration",()=>"deccel",()=>"Platforms",()=>"RotatingPlatform",()=>"GreenPlatform",()=>"SpringPlatform",()=>-352,()=>-416,a=>{const b=a._GetNode(0);return()=>b.ExpObject()+36},()=>"SkullPlatform",()=>"prepareMoving",()=>"default skullraftidle",()=>"default skullraftmoving",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject()-l.ExpBehavior()*p()},()=>"Countdown Platform",()=>"startArrowPlatformFade",()=>
"numberPlatform",()=>"Numbers",()=>"RedArrow",()=>"fallSpeed",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("fallSpeed")},()=>"countDown",()=>"shrinkToNormalSize",()=>"transitionToNormalOpacity",()=>"numberColor",()=>255,()=>"sizeLoop",()=>"Custom Platform",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpBehavior()+l.ExpInstVar()*p()},a=>{const b=a._GetNode(0);return()=>b.ExpObject().toString()+" PF"},()=>"sine",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("accel")},
a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("deccel")},()=>"Main Platform Movement",()=>"Platform Screenwrapping",a=>{const b=a._GetNode(0);return()=>-(b.ExpObject()/2)},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>32*b.GetValue()+l.ExpObject()/2},()=>"Platform Actions",()=>"Player Moving Platform",()=>"Platform Blocks Interactions",()=>"turnToNewDirection",()=>"movementAngle",()=>"slowdownFromArrowBlock",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("slowdownFromArrowBlock")},
()=>"Generators",()=>"Bullet Bill Generator",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b()-384-192*l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>Math.round(b(l()-240,p()+240))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b()+384+192*l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),
r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetVar();return()=>Math.round(b(l()-320-96*p.GetValue(),r()+320+96*t.GetValue()))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()-304},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+304},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetVar();return()=>b(l()-384-96*p.GetValue(),r()+384+96*t.GetValue())},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l()-304,p()+304)},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetBoundMethod();return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p(),r()))-180},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-45,p.ExpObject()+45))},()=>"Wind Generator",()=>"intensity",a=>{const b=a._GetNode(0);return()=>"SFX"+b.ExpInstVar()},
()=>"paused",()=>"slowAndStop",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()*l()*2},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("intensity")},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("slowAndStop")},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()*(l()/2)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()%2},()=>"10Statue",()=>"metalPower",()=>"preciseSwimming",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b(l.ExpObject(),"Duck")},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()*(l()/4)*3},()=>"Meteor Generator",()=>"erupt",()=>"spawnMeteors",a=>{const b=a._GetNode(0);return()=>b.ExpObject("Debris")},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(14,28))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4);return()=>b(l()-480-3*p.ExpBehavior(),
r()+480+3*t.ExpBehavior())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b(l()-272,p()-544)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("Small","Large")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),0)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b.ExpBehavior()+l(0,p.ExpInstVar())},()=>"Fish Generator",()=>"spawnFish",a=>{const b=
a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6).GetBoundMethod();return()=>b(l(p()-480,r()-160),t(u()+160,w()+480))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b()+272},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4).GetVar();
return()=>b(l()-368-96*p.GetValue(),r()+368+96*t.GetValue())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4);return()=>b(l()-240- -1*Math.abs(p.ExpBehavior()),r()+240+Math.abs(t.ExpBehavior()))},()=>"setUpGeneratedCheepCheep",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetVar(),t=a._GetNode(4),u=a._GetNode(5).GetBoundMethod(),
w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9).GetVar(),y=a._GetNode(10);return()=>b(l(p()-480-96*r.GetValue()- -1*Math.abs(t.ExpBehavior()),u()-160),w(x()+160,A()+480+96*E.GetValue()+Math.abs(y.ExpBehavior())))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>32*b.ExpInstVar()+32*Math.round(l(0,p.ExpInstVar()))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2);
return()=>b(l.GetValue(),p.ExpInstVar(),",")},()=>"Custom & Advanced Objects",()=>"Area Object Loader",()=>"Persistent Area Creator",()=>"Theme Changer",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),6)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpInstVar(),7)},()=>"setBackgroundProperties",()=>"Back & Foreground Changer",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),8)},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),0,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),0,","))-1},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),1,","))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),1,","))-1},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),2,","))-1},()=>"Background Color Changer",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),".")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5);return()=>b(l.ExpInstVar(),0,".")+"."+p(r.ExpInstVar(),1,".")+"."+t(u.ExpInstVar(),2,".")},a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b(l(p.GetValue(),0,"."))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),0,"."))},()=>"G",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b(l(p.GetValue(),1,"."))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),1,"."))},()=>
"B",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();return()=>b(l(p.GetValue(),2,"."))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),2,"."))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>b(l.ExpBehavior("R"),p.ExpBehavior("G"),r.ExpBehavior("B"))},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>
k(k(k(Math.round(b.ExpBehavior("R")),"."),Math.round(l.ExpBehavior("G")))+".",Math.round(p.ExpBehavior("B")))},()=>"Music Changer",()=>"fadeOut",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("fadeOut")},()=>"fadeIn",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("fadeIn")},()=>"Overlay Changer",()=>"Level Mode Changer",()=>"Auto Tiling",()=>"water",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-16-l.ExpObject()%32},()=>"setAutoTile",a=>{const b=a._GetNode(0);return()=>b.ExpObject("middle")-
256},a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()-24},()=>"Level Testing Buttons",()=>"Test Buttons Functionality",()=>"testLevel",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(f(l.ExpObject(4),1),0)},()=>"THERE'S NO START POINT YET! PRESS THE PIPE IN THE TOOLBAR TO PLACE ONE. THE START POINT SET IN ADVANCED SETTINGS MAY ALSO NO LONGER EXIST.",()=>"openTestFromEntranceMenu",()=>"moreOptions",()=>"extendTestingMenu",()=>"lessOptions",a=>{const b=a._GetNode(0).GetVar();
return()=>56-96*b.GetValue()},()=>"invisibility",()=>"slowdown",()=>"trails",a=>{const b=a._GetNode(0).GetVar();return()=>32-96*b.GetValue()},()=>"Opacity",()=>"editLevel",()=>"toggleInvis",()=>"toggleSlowdown",()=>"selecttestentrance",()=>"toolbartop",()=>"testfromentranceinfo",()=>"SELECT AN ENTRANCE TO TEST FROM.",()=>"testfromentrance",a=>{const b=a._GetNode(0).GetVar();return()=>120-96*b.GetValue()},()=>"Related Test Button Effects",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),
p=a._GetNode(2);return()=>Math.round(b(l.ExpObject()-24,p.ExpObject()+16))},()=>"Pausing + Game Over Screen",()=>"Mario Events",()=>"Bosses",()=>"MId-Pause Events",()=>"pausescreen",()=>"GAME PAUSED",()=>"pausescreenlevelname",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(k(b.ExpObject(0),"\n"),"BY "),l.ExpObject(2)).toString()},()=>"pausescreendescription",()=>"Description",a=>{const b=a._GetNode(0).GetVar();return()=>40+96*b.GetValue()},()=>"optiondesc",a=>{const b=a._GetNode(0).GetVar();
return()=>368+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>488+96*b.GetValue()},()=>"crtmode",()=>500,()=>"fulldesc",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(1),500)},()=>"leftdesc",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(1),500)+" ... (1/2)"},a=>{const b=a._GetNode(0).GetVar();return()=>408+96*b.GetValue()},()=>"60fps",()=>"30fps",a=>{const b=a._GetNode(0).GetVar();return()=>448+96*b.GetValue()},
()=>"animations",()=>"playAnims",()=>"skipAnims",a=>{const b=a._GetNode(0).GetVar();return()=>528+96*b.GetValue()},()=>"volume",()=>"volumeon",()=>"volumeoff",a=>{const b=a._GetNode(0).GetVar();return()=>568+96*b.GetValue()},()=>"fullscreen",()=>"normalscreen",()=>"Pause",()=>"CRT1",()=>"CRT2",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>"... "+b(l.ExpObject(1),500)+" (2/2)"},()=>"rightdesc",()=>"retryLevel",()=>"quitLevel",()=>"gameOverlay",()=>"Mid-Pause Events",()=>"RETRY (CHECKPOINT)",
()=>"SKIP DEATH ANIMATION",()=>"PLAY DEATH ANIMATION",()=>"TOGGLE CRT-MODE",()=>"VOLUME OFF",()=>"VOLUME ON",()=>"FULLSCREEN ON",()=>"FULLSCREEN OFF",()=>"KEYBINDS",()=>"Creating HUD Elements Functions",a=>{const b=a._GetNode(0).GetVar();return()=>k("Platform",b.GetValue())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),",")},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()+4},()=>"createTextboxNumbers",()=>42,()=>94,()=>"textboxtext",()=>"Enter the text you want Toad to say here!",
()=>"createDropdown",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar();return()=>b.GetValue()-96*l.GetValue()},()=>"Jumpthru Collision Checks",()=>"Setting Default Switch Palace States",()=>"switchpalacetoggle",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k("Check",b.ExpObject(l.ExpInstVar()))},()=>"Check1",()=>"Gamepad Support",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>"[SMC] Gamepad "+b(0)+" Connected!"},()=>"Connected",()=>"[SMC] Gamepad Disconnected",()=>"Disconnected",
()=>"Gamepad Setup",()=>"BossGates",()=>"activate",()=>"deactivate",()=>"Bowser",()=>"Bowser Health",()=>"Bowser Getting Hit",()=>"bossDefeated",()=>"disappear",a=>{const b=a._GetNode(0);return()=>-1.5*Math.abs(b.ExpBehavior())},()=>"Magic",a=>{const b=a._GetNode(0).GetVar();return()=>32*b.GetValue()+64},()=>"Bowser Defeated Animations",()=>"Defeated",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>32*b.GetValue()+Math.abs(l.ExpObject())},()=>"goToY",()=>2E4,()=>"Bowser Walks / Initiating Attacks",
a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpInstVar()+Math.round(l(0,4))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(2,4))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetBoundMethod(),t=a._GetNode(4);return()=>b(l.ExpInstVar(),Math.round(p(0,r(t.ExpInstVar(),"-")-1)),"-")},()=>"WalkReverse",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()/1.5},()=>"Bowser Flames",()=>"CreateFlame",
()=>"Mouth",()=>"SpitFlame",()=>"flameScale",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>b(l.ExpObject()-96,p.ExpObject()-64,r.ExpObject()-32,t.ExpObject())},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0,2)},()=>"Bowser Hammer",()=>"HoldHammer",()=>"Hammer",()=>"ThrowHammer",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(-512,-1024))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(1,1,1,
2,2,3)},()=>"Bowser Magic",()=>"CreateMagic",()=>"HoldMagic",()=>"ThrowMagic",()=>"Glow",()=>"Bowser Jumping",()=>"playBowserLandAnim",()=>"Land",()=>"FootLeft",()=>"FootRight",()=>"Boom Boom",()=>"Boom Boom Main Attacks",a=>{const b=a._GetNode(0);return()=>k("Chase",b.ExpInstVar())},()=>"Chase0",a=>{const b=a._GetNode(0);return()=>k("Idle",b.ExpInstVar())},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("attack","jump")},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(6,
9))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(9,12))},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(2,5))},()=>"readyToDive",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(.2,.6)},a=>{const b=a._GetNode(0);return()=>k("Unduck",b.ExpInstVar())},()=>"Boom Boom Dive Attack (Winged)",()=>"Boom Boom Health",a=>{const b=a._GetNode(0);return()=>k("Hit",b.ExpInstVar())},()=>1E4,()=>"boomBoomProjectileHit",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()*
(2/3)+1},a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()*(1/3)+1},()=>"King Boo",()=>"BlueFire",()=>"King Boo Main Attacks",()=>"Crown",()=>"appear",()=>"startAttackCycle",()=>"appearing",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>e.toDegrees(e.angleTo(b.ExpObject(),l.ExpObject(),p.ExpObject(),r.ExpObject()-128))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6).GetBoundMethod(),
x=a._GetNode(7).GetBoundMethod();return()=>b(l.ExpInstVar(),e.toDegrees(e.angleTo(p.ExpObject(),r.ExpObject(),t.ExpObject(),u.ExpObject()-128)),1-Math.pow(w(.33,.5),x()))},()=>"nextAttack",()=>"prepareSpittingFire",()=>"prepareHomingIn",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b("prepareSpittingFire","prepareHomingIn")},()=>"King Boo Spitting Fire",()=>"spittingFire",()=>"King Boo Homing In",()=>"targetingPlayer",()=>"homingIn",()=>"stopHomingIn",()=>"King Boo Circling Fire",()=>"King Boo Health",
()=>"King Boo Overlapping Mario",()=>"King Boo Taking Damage",()=>"hurt",()=>"Hurt",()=>"stopHurtSine",()=>"playDefeatAnimation",()=>"stopMovement",()=>"becomingTransparent",()=>"loseTransparency",()=>"opacity100",()=>"King Boo Defeat",()=>"moveToMario",()=>"King Boo Crown Events",()=>"resetAngle",()=>"lightenUp",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("lightenUp")},()=>"Customization Popup Menu",()=>"openQuickCustomizationMenu",()=>"editTile",()=>"editcustomtilename",a=>{const b=a._GetNode(0);
return()=>56+36*b.ExpObject()},a=>{const b=a._GetNode(0);return()=>112+36*b.ExpObject()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),0,",")},()=>"incustomizationmenu",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-540},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())},()=>"Customizing Tiles",()=>"CHANGE BLOCK ITEM",()=>"PICK AN ITEM FOR THE GIFT BOX!",()=>"o8,1",()=>"o9,1",()=>"o25,1",
()=>"o35,1",()=>"o63,1",()=>"o73,1",()=>"PICK AN ITEM FOR THE RED COIN RING!",()=>"EDIT TAG BLOCK PROPERTIES",()=>"TAGS",()=>126,()=>"Seperate multiple tags with spaces",()=>"tagaction",()=>"ACTION",()=>330,()=>"Stop tag,Stop tag (permanently),Pause tag,Resume Tag",()=>"range",()=>"RANGE",()=>474,()=>"RANGE (IN TILES) THE PLAYER HAS TO BE IN FOR IT TO TRIGGER.",()=>"onetimeuse",()=>"ONE-TIME\nUSAGE",()=>"savetilesettings",()=>"CUSTOMIZE THE GENERATOR!",()=>"bullettype",()=>"TYPE",()=>"Bullet Bill,Bull's-Eye Bill,Fast Bullet Bill,Fast Bull's-Eye Bill,Slow Bullet Bill,Slow Bull's-Eye Bill,Banzai Bill,Fast Banzai Bill,Slow Banzai Bill,King Bill,Cannonball,Fast Cannonball,Slow Cannonball",
()=>"THE TYPE OF BULLET BILL/CANNONBALL/TORPEDO TED IT WILL SPAWN DURING ITS LIFECYCLE.",()=>"boxrange",()=>"SPAWNED",()=>"bulletspawnpoint",()=>"Left,Right,Up,Down,Horizontal,Vertical,All",()=>"CUSTOMIZE FROM WHAT SIDE OF THE SCREEN THE ARTILERY WILL SPAWN.",()=>"firerate",()=>"FIRERATE",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar().toString()},()=>"DELAY (IN SECONDS) BETWEEN EACH SPAWN",()=>"targetloc",()=>"TARGET\nLOCATION",()=>"No target,Player,Center,Random Position",()=>"SELECT AN OPTIONAL LOCATION FOR THE BULLETS TO TARGET! IF SET TO NO TARGET, THEY'LL JUST KEEP ON MOVING IN THE DIRECTION THEY ARE FACING.",
()=>"bulletamount",()=>"AMOUNT",()=>"AMOUNT OF UNITS TO SPAWN PER FIRE, FROM 1 TO 24.",()=>"DURATION",()=>"DURATION OF THE GENERATOR'S LIFETIME. LEAVE 0 FOR AN INFINITE GEN, YOU CAN CANCEL IT LATER USING A TAG BLOCK.\nNOTE THAT THIS IS NOT IN SECONDS, BUT RATHER HOW MANY TIMES BULLETS ARE CREATED.",()=>"startmethod",()=>"START BY",()=>"When loaded (On-screen),Chuck whistle",()=>"generatortag",()=>"TAG",()=>"(Optional)",()=>"AN OPTIONAL TAG (YOU CAN NAME IT ANYTHING) TO REFERENCE THIS GENERATOR WITH TAG BLOCKS.",
()=>"windAngle",()=>"ANGLE",()=>"Up,Right,Down,Left",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar())/90},()=>"THE ANGLE OBJECTS WILL BE PUSHED TOWARDS.",()=>"INTENSITY",()=>"PIXELS PER SECOND OBJECTS WILL GET PUSHED (THIS IS HALVED WHEN ON GROUND).",()=>"buildUpTime",()=>"BUILDUP\nTIME",()=>"DURATION OF THE GENERATOR'S LIFETIME (IN SECONDS). LEAVE 0 FOR AN INFINITE GEN, YOU CAN CANCEL IT LATER USING A TAG BLOCK.",()=>"windRepeats",()=>"REPEATS",()=>"TIMES TO RESTART WHEN THE WIND ENDS, AFTER A PAUSE (DURATION-LENGTH). YOU CAN INTERUPT THIS WITH TAG BLOCKS TOO.",
()=>362,()=>"windEffect",()=>"PLAY\nWIND SFX",()=>342,()=>206,()=>"windSFX",()=>"meteorColor",()=>"COLOR",()=>"Red (Default),Blue,Gray,Purple,Yellow,Green",()=>"eruptionDelay",()=>"ERUPTION\nDELAY",()=>"SECONDS BETWEEN EACH ERUPTION.",()=>"meteorCount",()=>"METEORS /\nERUPTION",()=>"AMOUNT OF METEORS EACH ERUPTION",()=>"totalEruptions",()=>"TOTAL\nERUPTIONS",()=>"TOTAL ERUPTIONS BEFORE THE GENERATOR STOPS, LEAVE 0 FOR INFINITE ERUPTIONS. YOU CAN ALSO CANCEL THEM WITH TAG BLOCKS.",()=>"minVectorX",
()=>"RANDOM -\nVECTOR X",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar().toString(),0,"-")},()=>"maxVectorX",()=>"RANDOM +\nVECTOR X",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar().toString(),1,"-")},()=>"startMethod",()=>"generatorTag",()=>"option1",()=>"smallDebris",()=>"SMALL\nDEBRIS",()=>"option2",()=>"largeDebris",()=>"LARGE\nDEBRIS",()=>"fishType",()=>"FISH TYPE",()=>"Cheep Cheep & Blurp,Spiny Cheep Cheep,Porcupuffer,Boss Bass,Cheep Chomp,Spike Bass,Deep Cheep,Eep Cheep,Mecha Cheep",
()=>"THE FISH TYPE TO SPAWN. THIS CAN BE NORMAL CHEEP CHEEPS OR HUNGRY CHEEP CHOMPS!",()=>"genAI",()=>"GENERATOR\nMODE",()=>"Dynamic,Jumping,Swimming",()=>"JUMPING WILL MAKE FISH JUMP WHEN MARIO IS OUTSIDE OF THE WATER, SWIMMING WILL MAKE FISH SWIM AFTER MARIO WHILE UNDERWATER.",()=>"delay",()=>"DELAY",()=>"DELAY BETWEEN EACH SPAWN",()=>"DURATION OF THE GENERATOR'S LIFETIME. LEAVE 0 FOR AN INFINITE GEN, YOU CAN CANCEL IT LATER USING A TAG BLOCK.\nNOTE THAT THIS IS NOT IN SECONDS, BUT RATHER HOW MANY TIMES FISH ARE SPAWNED.",
()=>"fishJumpStrength",()=>"JUMP\nIN TILES",()=>"rngJumpStrength",()=>"RANDOM +\nTILES",()=>"OPTIONAL, ADDITIONAL JUMP STRENGTH THAT GETS ADDED ON TOP OF THE MINIMUM STRENGTH (FROM 0 TO THIS VALUE)",()=>"THEME CHANGER",()=>"newtheme",()=>"NEW THEME:",()=>"NEW THEME TO REPLACE THE CURRENT ONE WITH!",()=>408,a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>b(l.ExpObject(p.GetValue(),0),"-"," ")},()=>"editbgorfg",()=>"Background,Foreground",()=>132,()=>"CHANGER",
()=>106,()=>166,()=>"editingbgchanger",()=>"newbg",()=>"BACKGROUND",()=>122,()=>"Don't change",()=>"(Custom)",()=>"colortransition",()=>"OR ENTER AN URL:",()=>"newbgscroll",()=>"SCROLL",()=>"Don't change,Loop Horizontal,Loop Vertical,Loop All,Loop None,Only Horizontal,Only Vertical,Disabled",()=>"NOTE: CHANGING THIS MAY CAUSE BACKGROUND CUT-OFFS IF THE BACKGROUND WAS NOT DESIGNED AROUND IT.",()=>"newbgmovement",()=>"Don't change,No movement,Move left,Move up,Move right,Move down",()=>"THE DIRECTION OF THE BACKGROUND TO MOVE (FOR EXAMPLE, USED FOR CLOUD BGS)",
()=>"newbgspeed",()=>"SPEED",()=>506,()=>"IF THE BACKGROUND MOVES, THIS IS THE SPEED IT DOES AT (PIXELS/SEC).",()=>214,()=>204,()=>"BACKGROUND COLOR CHANGER",()=>"newbgcolor",()=>"NEW COLOR",()=>"(Select Preset)",()=>"Default Sky",()=>"Orange Sky",()=>"Purple Sky",()=>"Red Sky",()=>"Night",()=>"Pitch Black",()=>"Sunset/Sunrise",()=>"Underwater",()=>"Cloudy",()=>"Storm",()=>"White",()=>"RGB VALUE",()=>"ENTER AN RBG COLOR CODE (RED, GREEN, BLUE). USE THE DROPDOWN AT THE LEFT TO FIND SOME PRE-SET VALUES!",
()=>"TRANSITION DURATION",()=>"colortransitiontime",()=>"TIME (IN SEC) OF THE TRANSITION TO THE NEW COLOR!",()=>"START COLOR\n(OPTIONAL)",()=>"startbgcolor",()=>"OPTIONAL: IMMIDIATELY APPLY THIS COLOR ON TRIGGER, THEN CYCLE TO NEW COLOR. THIS REQUIRES A TRANSITION TIMER TO BE SET.",()=>"reverse",()=>"REVERSE",()=>"MUSIC CHANGER",()=>"newmusic",()=>"NEW MUSIC",()=>"custommusicidurl",()=>"OR ENTER AN URL FOR CUSTOM MUSIC:",()=>"Enter a Music ID or URL.",()=>"USE THIS FIELD FOR CUSTOM MUSIC.\nFOR LOOPING MUSIC, ADD A | AT THE END OF THE URL, WITH THE LOOP TIME (IN SECONDS) AFTER IT, AND TO DECREASE VOLUME, ADD ANOTHER | WITH THE DECREASE IN DECIBELS, E.G. -10 FOR HALF VOLUME.",
()=>"fadeOutTime",()=>"FADE-OUT",()=>"IN SECONDS - FADE OUT THE MUSIC SMOOTHLY!",()=>"fadeInTime",()=>"FADE-IN",()=>"DURATION OF THE NEW MUSIC'S FADE-IN.",()=>"DYNAMIC\nTRANSITION",()=>"dynamicTransition",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b("Overworld,Athletic,Cave,Castle,Underwater,Ghost House,Boss Battle,Bonus Zone,SMB1 Star Road,Airship,SMB1 Overworld,SMB1 Cave,SMB1 Underwater,Bowser Battle,Final Bowser Battle,Clown Car Battle,Desert,Desert Temple,Beach,SMB1 Castle,SMB1 Bonus,SMAS Choose A Game,Sky And Sea,Volcano (NSMB DS),Volcano (NSMB Wii),Birabuto Kingdom,Muda Kingdom,Easton Kingdom,Chai Kingdom,SML Starman (Can Can),SMB1 Ghost House",
l.GetValue(),",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),7)},()=>"EDIT OVERLAY CHANGER",()=>"newoverlay",()=>"OVERLAY",()=>"Remove Overlay,Rain,Snow,Sandstorm,Fog,Dark Fog,Fish,Water,Darkness,Blindness,Wind,Lava Bubbles,Current,Confetti,Autumn Leaves",()=>"overlayangle",()=>"ANGLE OF MOVEMENT",()=>"MOVEMENT ANGLE (IF SUPPORTED BY THE OVERLAY), STARTING FROM 0 AS UPWARDS.",()=>"overlayspeed",()=>"MOVEMENT SPEED (IF SUPPORTED BY THE OVERLAY)",()=>482,
()=>"LEVEL MODE CHANGER",()=>"NEW MODE:",()=>"newlevelmode",()=>"Default (On land),Water",()=>"EDIT ARROW PROPERTIES",()=>"attachedto",()=>"ATTACH TO",()=>"signattachment",()=>"Nothing",()=>"Bottom",()=>"SET TO NOTHING FOR A FLOATING ARROW, OR ATTACH IT TO A SIGN POST.",()=>"arrowangle",()=>"ANGLE OF THE ARROW.",()=>"arrowstyle",()=>"STYLE",()=>"Classic",()=>"Wooden",()=>"THE APPEARANCE OF THE ARROW/POST.",()=>"charCount",()=>"TEXT",()=>"Write a short story, give the player some info or just write about your day!",
()=>552,()=>"openFormattingTooltip",()=>"FORMATTING HELP",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>k("TEXT (",b(l.ExpObject()))+"/2000)"},()=>476,()=>"toadType",()=>"Type",()=>"Default,Red,Orange,Yellow,Green,Blue,Purple,Magenta,Gray,Black,Toadette,Toadsworth",()=>"toadItem",()=>"ITEM",()=>"toaditem",()=>"None,Goal,Mushroom,Springboard,P-Switch,Key,POW-Block",()=>"AN ITEM TOAD WILL DROP WHEN TALKED TO (OPTIONAL).",()=>"Enter the text you want Snowpeep to say here!",()=>
"snowmanGift",()=>"GIFT",()=>"Nothing,Coin,Mushroom,Fire Flower,Oneup Mushroom,Threeup Moon,Super Leaf,Hammer Suit,Starman,Poison Mushroom,Cloud Flower,Ice Flower,Springboard,Sideways Spring,P-Switch,Key,Goal,Explosion,Blue POW,Red POW (Explosion),P-Switch (Infinite),Brown P-Switch,Brown P-Switch (Infinite),Penguin Suit,Blue Shell,Carrot,Steel Pinecone,Tanooki Suit,Superball Flower,Gray P-Switch,Gray P-Switch (Infinite),Frog Suit,Goomba's Shoe,Yoshi,!-Switch,!-Switch (Infinite)",()=>"OPTIONAL - SELECT A GIFT! SNOWPEEP WILL GIVE THIS TO YOU WHEN TALKED TO.",
()=>"EDIT DOLPHIN PROPERTIES",()=>"podoboomode",()=>"MODE",()=>"Blue,Blue 2,Lava,Lava 2,Green Poison,Green Poison 2,Cryo,Cryo 2,Gray,Gray 2,Purple Poison,Purple Poison 2,Dark Poison,Dark Poison 2,Yellow,Yellow 2",()=>"podobooangle",()=>"0 (Up)",()=>"45",()=>"315",()=>"337",()=>"podoboojumpstrength",()=>"JUMP",()=>"10 blocks",()=>"9 blocks",()=>"8 blocks",()=>"7 blocks",()=>"6 blocks",()=>"5 blocks",()=>"4 blocks",()=>"3 blocks",()=>"2 blocks",()=>"1 block",()=>"podoboodelay",()=>"DELAY BETWEEN JUMP CYCLES",
()=>"podoboomovementspeed",()=>"IF THIS IS GREATER OR LESS THAN 0, DOLPHINS WILL MOVE TO THE LEFT OR RIGHT WHILE MID-AIR. TOGGLE REVERSE TO MAKE THEM REVERSE MOVEMENT AFTER EACH JUMP.",()=>"podobooreverse",()=>194,()=>198,()=>"podoboorinitdelay",()=>"START DELAY",()=>"podobooinitdelay",()=>"START DELAY, WHICH IS ONLY USED BEFORE THE FIRST JUMP.",()=>337,()=>"EDIT CANNON PROPERTIES",()=>"cannontype",()=>"CANNON TYPE",()=>"Default,Cannon only,Sniper Cannon",()=>"CANNON ONLY IS WITHOUT THE BASE, SNIPER CANNONS WILL TARGET MARIO!",
()=>"BULLET TYPE",()=>218,()=>"Default Bullet Bill,Default Missile Bill,Slow Bullet Bill,Slow Missile Bill,Fast Bullet Bill,Fast Missile Bill",()=>"AI FOR THE BULLET BILLS. MISSILE BILLS WILL HOME IN ON MARIO.",()=>392,()=>"spinnerspeed",()=>"FIRING SPEED",()=>396,()=>"firespeed",()=>"Very slow,Slow,Normal,Fast,Very fast,MACHINE CANNON",()=>"FIRING SPEED FOR THE LAUNCHERS THEMSELVES.",()=>"launcherangle",()=>"ATTACHED TO",()=>"Default,Left Wall,Ceiling,Right Wall",()=>"CHANGE THE ANGLE (USEFUL FOR LAUNCHERS WITH BASES)",
()=>864E3,()=>"EDIT CANNONBALL CANNON PROPERTIES",()=>"cannonattachment",()=>"SET TO NOTHING FOR A FLOATING CANNON, OR ATTACH IT TO THE GROUND, WALL OR CEILING.",()=>"cannonangle",()=>"INITIAL ANGLE OF THE CANNON.",()=>"cannonAmmo",()=>"AMMO",()=>"Cannonball",()=>"Cannonball (Fast)",()=>"Cannonball (Slow)",()=>"cannoncycles",()=>"CYCLES",()=>"CYCLES THE CANNONBALL LAUNCHER WILL GO THROUGH BEFORE REVERSING!",()=>"cannonspeed",()=>"FIRE RATE",()=>"TIME (IN SEC) BETWEEN EACH CYCLE.",()=>"cannonballanglechange",
()=>"ANGLE CHANGE",()=>"cannonanglechange",()=>"CHANGE IN ANGLE BETWEEN EACH CYCLE. YOU CAN USE ANY ANGLE HERE. MOST COMMONLY, 45 ARE 90 ARE USED.",()=>"EDIT TORPEDO TED LAUNCHER PROPERTIES",()=>"torpedolaunchertype",()=>"Default,Target (Left),Target (Right),Target (Mario)",()=>"torpedotype",()=>"TORPEDO",()=>"Default,Default (Missile),Default (Explosive),Slow,Slow (Missile),Slow (Explosive),Fast,Fast (Missile),Fast (Explosive)",()=>"torpedodelay",()=>"DELAY BETWEEN CYCLES",()=>"torpedooffset",()=>
"OFFSET Y",()=>"ADDTIONAL VERTICAL MOVEMENT IN PIXELS THAT THE TORPEDO TED WILL GO TO.",()=>"EDIT BADDIE BOX PROPERTIES",()=>"boxSize",()=>"SIZE",()=>"Default,Giant,Default (?-Block),Giant (?-Block)",()=>"RANGE (IN TILES) THAT MARIO HAS TO BE IN FOR IT TO SPAWN SPRITES.\nNOTE: FAR DISTANCES REQUIRE A P-TILE, SO THE SPRITE WONT INSTANTLY DESPAWN.",()=>"boxdelay",()=>"DELAY (IN SEC) BETWEEN EACH SPAWN CYCLE",()=>"maxobjcount",()=>"MAX OBJECT\nCOUNT",()=>"IF THE AMOUNT OF OBJECTS SPAWNED BY THE BADDIE BOX EXCEEDS THIS NUMBER, IT WILL STOP UNTIL THERE ARE LESS OF THEM.",
()=>"vectorx",()=>"VECTOR X",()=>"spawnvectorx",()=>"HORIZONTAL VELOCITY FOR SPAWNED OBJECTS",()=>"vectory",()=>"VECTOR Y",()=>"spawnvectory",()=>"VERTICAL VELOCITY FOR SPAWNED OBJECTS",()=>"randomvectorx",()=>"RANDOM X",()=>"RANDOM VALUE TO ADD TO THE SPAWN VECTOR X.",()=>"randomvectory",()=>"RANDOM Y",()=>"RANDOM VALUE TO ADD TO THE SPAWN VECTOR Y.",()=>"NUMBERED PLATFORM",()=>"platformTimer",()=>"TIMER:",()=>"0,1,2,3,4,5,6,7,8,9",()=>"TIMER IN SECONDS BEFORE IT FALLS!",()=>"MOVEMENT\nANGLE:",()=>
298,()=>"0-359",()=>"MOVEMENT ANGLE OF THE PLATFORM.\n(0 = \u2191, 90 = \u2192, 180 = \u2193, 270 = \u2190)",()=>"platformPalette",()=>"PALETTE:",()=>"Default,Dark Green,Light Green,Blue,Chocolate,Snow,Ice,Yellow",()=>"CreatePreviewPlatform",()=>388,()=>130,()=>"platform",()=>"[color=#000000]General[/color]",()=>158,()=>"tabHeader",()=>"[color=#000000]Sine Movement[/color]",()=>510,()=>428,()=>"[color=#000000]Advanced[/color]",()=>415,()=>"ARROW BLOCK",()=>"arrowAngle",()=>"TURN TYPE",()=>"turnType",
()=>"Instant,Tween,Slowdown",()=>"INSTANT: Change the angle of movement instantly\nTWEEN: Smoothly transition to the new direction\nSLOWDOWN: Slow down the platform, then speed up again in the new direction.",()=>"turnTimer",()=>"TIME",()=>"turnTime",()=>"TIME IN SECONDS FOR A COMPLETED TURN",()=>"arrowBlockTag",()=>"TAG (OPTIONAL) - ONLY PLATFORMS WITH THE SAME TAG WILL INTERACT WITH THESE! LEAVE EMPTY TO AFFECT ALL PLATFORMS.",()=>"SPEED BLOCK",()=>"newSpeed",()=>"NEW SPEED",()=>"speedChangeTime",
()=>"SLOWDOWN /\nSPEEDUP TIME",()=>"speedBlockTag",()=>"PLATFORM ACTION BLOCK",()=>"actionDelay",()=>"actionID",()=>"None,Stop,Stop (No re-activation),Reverse,Fall",()=>"ACTION FOR THE PLATFORM TO PERFORM ONCE THE TIMER HITS 0. SET THIS TO NONE TO CANCEL THE PLATFORM'S IN-BUILD ACTION.",()=>"actionBlockTag",()=>"TAG CHANGER BLOCK",()=>"oldTag",()=>"OLD TAG(S)",()=>"LEAVE BLANK TO AFFECT ANY TAG OR ENTER SPECIFIC TAGS TO BE AFFECTED.",()=>"arrow",()=>"\u2192",()=>"newTag",()=>"NEW TAG",()=>"THE NEW TAG THAT WILL BE APPLIED. YOU CAN ALSO LEAVE THIS BLANK TO REMOVE THE TAG PROPERTY.",
()=>"ARROW CLOUD",()=>"cloudColor",()=>"Green,Red,Blue,Yellow",()=>"rotationTimer",()=>"ROTATION\nSPEED",()=>"rotationSpeed",()=>"Clockwise rotation speed in seconds. Want it to go counter-clockwise? Just enter a negative speed. Or, you can just leave this 0 for stationary arrows!",()=>"angleChange",()=>"ANGLE\nCHANGE",()=>"angleChangeDelay",()=>"DELAY BETWEEN ANGLE CHANGES",()=>"destroyOnCollision",()=>"Destroy on\ncollision",()=>268,()=>"POWER-UP CHEST",()=>98,()=>"tileEditingTooltip",()=>"Warp player\nwhen opened to:",
()=>234,()=>102,()=>"Map to warp to, if warping is enabled.",()=>338,()=>"Entrance to warp to, if warping is enabled.",()=>"chestTag",()=>"TAG:",()=>"(optional)",()=>"Optional tag - when a tag is applied, it will open all chests with the same tag.",()=>"Open other chests\nwhen opened",()=>"editorPreview",()=>"chestItem",()=>"CHEST ITEM:",()=>"toggleValue",()=>"Change\nsize",()=>.65,a=>{const b=a._GetNode(0);return()=>212+36*b.ExpObject()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);
return()=>b(l.ExpObject(),0,"-")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),1,"-"))},()=>"clickableOption",a=>{const b=a._GetNode(0).GetVar();return()=>k("Map ",b.GetValue())},a=>{const b=a._GetNode(0).GetVar();return()=>k("Entrance ",b.GetValue())},()=>"Boo, Swoop & Ninji Block",()=>"lightWidth",()=>"Light Width\n(in tiles):",()=>"lightHeight",()=>"Light height\n(in tiles)",()=>"lightType",()=>"Light\nType",()=>"Light (Boo),Darkness (Swooper),Blindess (Ninji)",
()=>"EDIT CHAINBALL PROPERTIES",()=>"direction",()=>"DIRECTION:",()=>"Rotate Clockwise,Rotate Counterclockwise,Pendulum Clockwise,Pendulum Counterclockwise",()=>"chaincount",()=>"CHAINS",()=>"0,1,2,3,4,5",()=>"0-720",()=>"ROTATION SPEED (PER SECOND). FOR EXAMPLE, 360 = 1 ROTATION / SEC.\nIN THE PENDULUM SETTING, THIS THE TIME IN SECONDS FOR EACH CYCLE (PERIOD).",()=>"spinnerangle",()=>"0-360",()=>"START ANGLE OF THE SPINNER",()=>"amplitude",()=>"AMPLITUDE",()=>"ONLY USED FOR PENDULUM MODE, THE MAXIMUM CHANGE OF ANGLE BEFORE IT WILL SWING BACK.",
a=>{const b=a._GetNode(0);return()=>(-1*b.ExpInstVar()).toString()},()=>"EDIT PLATFORM PROPERTIES",()=>"START ANGLE OF THE PLATFORM",()=>"EDIT PODOBOO PROPERTIES",()=>"Fire,Ice,Fishbone,Dark,Poison,Dark Poison,Yellow,Lime",()=>"ICE PODOBOOS WILL FREEZE MARIO, BONE FISH CAN BE SPINJUMPED OFF.",()=>"90 (Right)",()=>"135",()=>"157",()=>"180 (Down)",()=>"203",()=>"225",()=>"270 (Left)",()=>"THE ANGLE IT WILL JUMP TOWARDS. FOR EXAMPLE, USE 180 FOR UPSIDE-DOWN PODOBOOS.",()=>"IF THIS IS GREATER OR LESS THAN 0, PODOBOOS WILL MOVE TO THE LEFT OR RIGHT WHILE MID-AIR. TOGGLE REVERSE TO MAKE THEM REVERSE MOVEMENT AFTER EACH JUMP.",
()=>157,()=>203,()=>"EDIT BOOM BOOM PROPERTIES",()=>"boomboommode",()=>"boomboomMode",()=>"Normal,Winged,Alternate between hits",()=>"When set to alternate between hits, it will change between normal and wings every time Boom Boom is hurt.",()=>"boomboomlives",()=>"0-100",()=>"TIMES BOOM BOOM HAS TO BE HIT TO BE DEFEATED.\nNOTE: 5 FIRE/SUPERBALLS EQUAL 1 LIFE.",()=>"boomboomspeed",()=>"BOOM BOOM SPEED (PIXELS/SEC)",()=>"jumpStrength",()=>"JUMP STRENGTH (HIGHER NUMBER FOR BIGGER JUMPS)",()=>"itemdrop",
()=>"ITEM DROP",()=>"itemDrop",()=>"Nothing,Goal Orb,Springboard,Blue P-Switch,Brown P-Switch,Gray P-Switch,Key,POW-Block",()=>"THE ITEM BOOM BOOM WILL DROP ONCE DEFEATED.",()=>"boomboomphase",()=>"PHASE",()=>"boomboomPhase",()=>"Auto increase,Phase 1,Phase 2,Phase 3",()=>"ATTACK PHASES, EACH NEW PHASE IS MORE DIFFICULT",()=>"boomboommusic",()=>"MUSIC",()=>"MUSIC ID TO PLAY WHEN THE FIGHT STARTS (BY DEFAULT MUSIC 7), OR INSERT AN URL TO PLAY CUSTOM BOSS MUSIC.\nFOR LOOPING MUSIC, ADD A | AT THE END OF THE URL, WITH THE LOOP TIME (IN SECONDS) AFTER IT, AND TO DECREASE VOLUME, ADD ANOTHER | WITH THE DECREASE IN DECIBELS, E.G. -10 FOR HALF VOLUME.",
()=>"wingedJumpStrength",()=>"JUMP (WINGS)",()=>"NOTE: Only applies to winged Boom Boom. Jump strength when taking off into the air.",()=>"EDIT FIREBAR PROPERTIES",()=>"Rotate Clockwise",()=>"Rotate Counterclockwise",()=>"flamecount",()=>"FLAMES",()=>"No. of flames",()=>"AMOUNT OF FLAMES, FROM 0 - 25.",()=>"ROTATION SPEED (DEGREE/SEC)",()=>"THE ANGLE IT SPAWNS AT",()=>"flamesize",()=>"FIRE SIZE",()=>"Medium",()=>"THE SIZE OF THE FLAMES (NOT FIREBAR)",()=>"EDIT CHEEP CHEEP PROPERTIES",()=>"FISH AI",
()=>"cheepcheepai",()=>"Swim Horizontally",()=>"Swim Vertically",()=>"Circle Around",()=>"Swim & Jump",()=>"Instajump",()=>"THE AI THE CHEEP CHEEP WILL USE!",()=>"cheepcheeptiles",()=>"MOVEMENT\n(IN TILES)",()=>"0-16",()=>"AMOUNT OF TILES TO SWIM BEFORE TURNING/JUMPING. FOR THE CIRCLING AI, THIS IS THE DIAMETER OF THE CIRCLE.",()=>"cheepcheepsecondvalue",()=>"SINE / ANGLE",()=>"GIVES HORIZONTAL/VERTICAL FISH A SINE-WAVE SWIMMING PATTERN, ACTS AS THE ANGLE FOR CIRCLING FISH, AND IS THE JUMP HEIGHT FOR JUMPING FISH.",
()=>"EDIT BOWSER PROPERTIES",()=>"bowsermode",()=>"Super Mario Bros. 3",()=>"bowserlives",()=>"TIMES BOWSER HAS TO BE HIT TO BE DEFEATED.\nNOTE: 5 FIRE/SUPERBALLS EQUAL 1 LIFE.",()=>"bowserspeed",()=>"BOWSER WALK AND ATTACK SPEED",()=>"bowserjumpstrength",()=>"THE ITEM BOWSER WILL DROP ONCE DEFEATED.",()=>"bowsermusic",()=>"MUSIC ID TO PLAY WHEN THE FIGHT STARTS (BY DEFAULT MUSIC 14), OR INSERT AN URL TO PLAY CUSTOM BOSS MUSIC.\nFOR LOOPING MUSIC, ADD A | AT THE END OF THE URL, WITH THE LOOP TIME (IN SECONDS) AFTER IT, AND TO DECREASE VOLUME, ADD ANOTHER | WITH THE DECREASE IN DECIBELS, E.G. -10 FOR HALF VOLUME.",
()=>"onbowserdefeat",()=>"ON DEFEAT",()=>"(No special events)",()=>"Level Clear",()=>"Walk to nearest NPC",()=>"OPTIONAL EVENT FOR WHEN BOWSER IS DEFEATED.",()=>"bowserjumpdelay",()=>"MIN. ATTACKS\nBEFORE JUMP",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),0,"-")},()=>"MINIMUM AMOUNT OF ATTACKS BEFORE BOWSER HAS A CHANCE OF JUMPING.",()=>"bowserattackflames",()=>"attackflames",()=>"FLAME\nATTACK",()=>"bowserattackhammers",()=>"attackhammers",()=>"HAMMER\nATTACK",
()=>"bowserattackmagic",()=>"attackmagic",()=>"MAGIC\nATTACK",()=>"ANGRY SUN SETUP",()=>"angrySunTag",()=>"YOU CAN ENABLE OR PAUSE THE ANGRY SUN USING TAG BLOCKS WITH THE SAME TAG.",()=>"respawnOnDefeat",()=>"RESPAWN\nON DEFEAT",()=>"activeOnStart",()=>"ACTIVE\nON START",()=>"EDIT BOO BUDDY SNAKE",()=>"booSnakeSpeed",()=>"SPEED, IN PIXELS PER SECOND.",()=>"booSnakeAngle",()=>"INITIAL MOVEMENT ANGLE OF THE BOOS.\n(0 = \u2191, 90 = \u2192, 180 = \u2193, 270 = \u2190)",()=>"booCount",()=>"MAX BOOS",
()=>"Maximum amount of Boos behind the moving Boo.",()=>"booSnakeGravity",()=>"GRAVITY",()=>"(OPTIONAL) - WHEN APPLIED, THE BOO BUDDY SNAKE WILL BOUNCE AROUND!",()=>"EDIT BOO BUDDY CIRCLE",()=>"booCircleDiameter",()=>"DIAMETER",()=>"The diameter of the circle (in tiles, from top to bottom).",()=>"AMOUNT\nOF BOOS",()=>"Amount of Boos the clock will consist of!",()=>"booDistance",()=>"Angle\nDifference",()=>"Amount of angles to travel between spawning the next Boo.",()=>"booCircleSpeed",a=>{const b=
a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>Math.abs(b(l.ExpInstVar())).toString()},()=>"Rotation speed, in pixels/sec.",()=>"booCircleStartAngle",()=>"Start\nAngle",()=>"counterClockwise",()=>"Counter-\nClockwise",()=>"EDIT KING BOO PROPERTIES",()=>"kingBooHP",()=>"HP",()=>"Amount of times King Boo needs to be hit in order to be defeated!",()=>"kingBooBlendMode",()=>"Environment\nBlending",()=>"None,Additive,Above Layer Objects,Camouflage",()=>"ADDITIVE - Adds colors on top of eachother\nABOVE LAYER OBJECTS - Appears only above objects on the same layer as King Boo.\nCAMOUFLAGE - Same, but is invisible and covers tiles and sprites!",
()=>"Nothing,Goal Orb,Springboard,P-Switch,Key,POW-Block,Boo",()=>"THE ITEM KING BOO WILL DROP ONCE DEFEATED.",()=>"newMusic",()=>"kingBooMusic",()=>"attackIntensity",()=>"Attack\ndelay",()=>"attackDelay",()=>"THE DELAY, IN SECONDS, BETWEEN EACH ATTACK.",()=>"speedLight",()=>"Speed\n(Light)",()=>"Speed in pixels / sec when it's moving inside a lit up area.",()=>"speedDarkness",()=>"Speed\n(Darkness)",()=>"Speed in pixels / sec when it's moving inside a darkness area.",()=>"speedBlindness",()=>"Speed\n(Blindness)",
()=>"Speed in pixels / sec when it's moving inside a blindness area.",()=>"Flame\nAttack",()=>"Homing\nAttack",()=>"option3",()=>"Circling\nFire",()=>"eerieSpeed",()=>"Speed",()=>"0-512",()=>"Speed in pixels per second (each tile = 32 pixels).",()=>"eerieAngle",()=>"Angle",()=>"The angle to face & move towards",()=>"eerieSineMagnitude",()=>"Sine\nMagnitude",a=>{const b=a._GetNode(0);return()=>(b.ExpInstVar()/32).toString()},()=>"(Optional) Magnitude for wavy movement, in tiles.",()=>"eerieSinePeriod",
()=>"Sine\nPeriod",()=>"If a magnetude is set, this is the time in seconds for a complete cycle",()=>"EDIT EERIE PROPERTIES",()=>"EDIT GREEN BUBBLE PROPERTIES",()=>"bubbleOpacity",()=>"OPACITY",()=>"25% (Nearly invisible),50%,75%,100% (No opacity)",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar())/25-1},()=>"bubbleBlendMode",()=>"ADDITIVE - Adds colors on top of eachother\nABOVE LAYER OBJECTS - Appears only above objects on the same layer as the bubble.\nCAMOUFLAGE - Same, but is invisible and covers tiles and sprites!",
()=>"CONFIGURE LAKITU",()=>"Respawn on defeat",()=>"Has a fishing rod",()=>"LAKITU THROWS:",a=>{const b=a._GetNode(0);return()=>180+36*b.ExpObject()},()=>"selectTile",()=>"You can wrap text into these codes to alter their appearance. Make sure you always close them off, too!\n \n[color=#58A8F0][[][/]color=#cc0000][/color][color=#cc0000]text color[/color][color=#58A8F0][[][/]/color][/color]\n[color=#58A8F0][[][/]background=#ff00ff][/color][background=#ff00ff]background color[/background][color=#58A8F0][[][/]/background][/color]\n\n[color=#58A8F0][[][/]offsetx=8][/color][offsetx=8]move text x pixels horizontally  [/offsetx][color=#58A8F0][[][/]/offsetx][/color]\n[color=#58A8F0][[][/]offsety=8][/color][offsety=8]move text x pixels vertically[/offsety][color=#58A8F0][[][/]/offsety][/color]\n[offsety=8]\n[color=#58A8F0][[][/]scalex=1.5][/color][scalex=1.5]stretch horizontally[/scalex][color=#58A8F0][[][/]/scalex][/color]\n[color=#58A8F0][[][/]scaley=0.5][/color][scaley=0.5]stretch vertically[/scaley][color=#58A8F0][[][/]/scaley][/color]\n[color=#58A8F0][[][/]scale=0.75][/color][scale=0.75]stretch both axes[/scale][color=#58A8F0][[][/]/scale][/color]\n[/offsety]\n",
()=>"TAG: TAGS ARE ALWAYS 20 CHARACTERS OR LESS.",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>Math.abs(b(l.ExpObject())).toString()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("tag,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},()=>"FIRE RATE: MUST BE 0.3 OR ABOVE",()=>"BULLET AMOUNT: MUST BE BETWEEN 1 - 24",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>Math.abs(b(l.ExpObject()))},
()=>"TAG: TAGS SHOULD BE LESS THAN 20 CHARACTERS",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("gen1,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>90*b.ExpObject()},()=>"INTENSITY: MUST BE BETWEEN 1-128",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),
r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("gen2,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},()=>"ERUPTION DELAY: MUST BE AT LEAST 3!",()=>"METEOR COUNT: MUST BE INBETWEEN 1-24!",()=>"MIN VECTOR X: MUST BE BETWEEN 0 - 128",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+"-"+l.ExpObject()},()=>"MAX VECTOR X: MUST BE BETWEEN 0 - 128",
()=>"DON'T FORGOT TO SELECT A METEOR SIZE!",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("gen3,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},()=>"DELAY: MUST BE AT LEAST 0.3!",()=>"JUMP: MUST BE BELOW 15",()=>"EXTRA RANDOM JUMP HEIGHT: MUST BE BELOW 15",a=>{const b=a._GetNode(0),l=a._GetNode(1),
p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("gen4,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k("ct,"+b.ExpInstVar()+",",l.ExpInstVar())},()=>"newfg",()=>"SPEED: EXCEEDS MAX VALUE (256)",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),
u=a._GetNode(5);return()=>k(k("cbg,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),".")},()=>"RGB VALUE: INVALID COLOR CODE. THIS MUST CONTAIN 3 NUMBER VALUES",()=>"START VALUE: INVALID COLOR CODE. YOU CAN LEAVE THIS EMPTY, OR ENTER 3 NUMBER VALUES.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>
k(k("cbc,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()},()=>"MUSIC ID OUT OF BOUNDS: CHOOSE BETWEEN 0 - 31",()=>"INVALID LINK (MAKE SURE IT STARTS WITH HTTPS)",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>k(k("cm,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),"e",
"")},()=>"ANGLE: THIS MUST BE A VALUE BETWEEN 0-359",()=>"SPEED: THIS EXCEEDS THE MAXIMUM SPEED (512).",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("co,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k("clm,"+b.ExpInstVar()+",",l.ExpInstVar())},()=>"ARROW ANGLE: ENTER A VALUE BETWEEN 0-359.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(k("m44,"+b.ExpInstVar()+
",",l.ExpInstVar())+",",p.ExpInstVar())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),",","&comma;")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+","+l.ExpInstVar()},()=>"MAXIMUM 2000 CHARACTERS",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>k(k("o17,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()},()=>"TOAD 2000 CHAR LIMIT REACHED!",a=>
{const b=a._GetNode(0),l=a._GetNode(1);return()=>k("o31,"+b.ExpInstVar()+",",l.ExpInstVar())},()=>"SNOWMAN 2000 CHAR LIMIT REACHED!",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>-1*b(l.ExpObject())},()=>"WOAH, THAT'S WAY TOO FAST! THE MAX SPEED VALUE IS 720.",()=>"THIS SPEED IS INVALID. ENTER 0 FOR A STATIONARY CHAIN BALL.",()=>"THE ANGLE IS NOT VALID (SHOULD BE BETWEEN 0 AND 359 DEGREES).",()=>"AMPLITUDE: INVALID ANGLE (SHOULD BE BETWEEN 0 AND 720).",a=>{const b=a._GetNode(0),
l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>k(k("e16,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("o20,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},()=>"THIS NEEDS A POSITIVE VALUE (OR ENTER 0 FOR NO DELAY).",()=>"ENTER A VALUE BETWEEN -512 AND 512 (NEGATIVE FOR LEFT MOVEMENT, POSITIVE FOR RIGHT).",
()=>"DELAY: CANNOT BE A NEGATIVE VALUE.",()=>-480,()=>"OFFSET Y: VALUE MUST BE INBETWEEN -480 TO 480.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("o41,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},()=>"RANGE: MUST BE 1 OR ABOVE - OR ELSE IT WILL NEVER ACTIVATE!",()=>"DELAY: THIS MUST BE A POSITIVE VALUE, OR 0 FOR ZERO DELAY",()=>"MAX OBJECT COUNT: THIS MUST BE 1 OR ABOVE",()=>"SPAWN VECTOR X: THIS MUST BE A VALUE BETWEEN -512 TO 512",
()=>"SPAWN VECTOR Y: THIS MUST BE A VALUE BETWEEN 0 TO -1024",()=>"RANDOM VECTOR X: THIS MUST BE A VALUE BETWEEN -512 TO 512",()=>"RANDOM VECTOR Y: THIS MUST BE A VALUE BETWEEN 0 TO -1024",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("o48,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},()=>
"CANNON ANGLE: ENTER A VALUE BETWEEN 0-359.",()=>"FIRE RATE: CANNOT BE LESS THAN 0.1 SECONDS.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k("o42,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()},()=>"ANGLE: MUST BE BETWEEN 0-359",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(k("o53,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())},
()=>"platformStyle",()=>"platformSize",()=>"PLATFORM SIZE: SIZE CANNOT BE BIGGER THAN 20",()=>"ANGLE OF MOVEMENT: MUST BE BETWEEN 0-359!",()=>"horizontalMovement",()=>"HORIZONTAL SINE: VALUE MUST BE BETWEEN -512 TO 512",()=>"horizontalPeriod",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+"_"+l.ExpObject()},()=>"PERIOD: CHOOSE A VALUE BETWEEN 4-60",()=>"horizontalPeriodOffset",a=>{const b=a._GetNode(0).GetVar();return()=>k("Period Offset: This must be lower than the period (",
b.GetValue())+")"},()=>"verticalMovement",()=>"verticalPeriod",()=>"verticalPeriodOffset",()=>"extraMovement",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+"_"+l.ExpInstVar().toString()},()=>"option4",()=>"platformActionDelay",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),"-","")},()=>"platformAction",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpInstVar()+"_",l.ExpObject())},()=>"platformTag",a=>{const b=a._GetNode(0),l=a._GetNode(1),
p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("o55,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},()=>"TURN TIME: MAX IS 1 MINUTE (60 SEC)",()=>"TAG: MUST BE 20 CHARACTERS OR LESS.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("o56,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+
","+r.ExpInstVar()},()=>"SPEED: MAX SPEED IS 384",()=>"SPEED TIME: MAX IS 1 MINUTE (60 SEC)",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("o57,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("o58,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>
b(l.ExpObject(),"  ","")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+"  "+l.ExpObject()},()=>2880,()=>-2880,()=>"ROTATION SPEED: MUST BE 2880 OR LESS.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6);return()=>k(k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())+",",r.ExpInstVar())+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()},()=>"LIGHT WIDTH: MUST BE BETWEEN 1 - 20.",()=>"LIGHT HEIGHT: MUST BE BETWEEN 1 - 20.",
a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())+",",r.ExpInstVar())},()=>"resize",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar(),p=a._GetNode(2);return()=>b(l.GetValue(),p.ExpObject(),"|")},()=>"MUSIC: INVALID MUSIC ID. ENTER A VALUE BETWEEN 0-31 OR A LINK TO A MUSIC FILE.",()=>"THIS WOULD TAKE WAY TOO LONG! MAX LIVES IS 100.",()=>"BOOM BOOM NEEDS TO HAVE SOME LIVES. ENTER 1 IF YOU WANT A ONE HIT BOSS.",
()=>"THAT'S TOO FAST! BOOM BOOM'S MAX SPEED IS 512.",()=>"BOOM BOOM'S MAX JUMP STRENGTH IS 1024.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("e18,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+","+w.ExpInstVar()+","+x.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>Math.round(b(l.ExpObject())/
48)},()=>"WOAH, THAT'S WAY TOO FAST! THE MAX SPEED VALUE IS 360.",a=>{const b=a._GetNode(0).GetVar();return()=>k("A MINIMUM SPEED OF ",b.GetValue())+" (AMPLITUDE / 48) IS REQUIRED IN PENDULUM MODE."},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>k(k("o18,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()},()=>"OOF! THIS IS ABOVE THE LIMIT (25).",()=>"THE FIREBAR NEEDS AT LEAST 1 FIREBALL, OR ELSE THERE WOULD BE NO FIREBAR. SO ERM... ENTER A VALUE BETWEEN 1 TO 25.",
()=>"THIS SPEED IS INVALID. ENTER 0 FOR A STATIONARY FIRE BAR.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);return()=>k(k("e32,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},()=>"MOVEMENT IN TILES: ENTER A VALUE BETWEEN -16 TO 16.",()=>"SINE VALUE: ENTER A VALUE BETWEEN 0-4.",()=>"ANGLE VALUE: ENTER A VALUE BETWEEN 0-359.",()=>"SINE VALUE: ENTER A VALUE BETWEEN 0-20.",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3);
return()=>k(k("e40,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()},()=>"LIVES: ENTER A VALUE BETWEEN 1-100",a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(b.GetValue()+"-",l.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6),x=a._GetNode(7);return()=>k(k("e75,"+b.ExpInstVar()+",",l.ExpInstVar())+",",p.ExpInstVar())+","+r.ExpInstVar()+","+t.ExpInstVar()+","+u.ExpInstVar()+
","+w.ExpInstVar()+","+x.ExpInstVar()},()=>"SPEED: MUST BE 512 OR BELOW",()=>"359",()=>"BOO COUNT: MAX IS 50 PER SNAKE",()=>-2048,()=>"GRAVITY: MUST BE BETWEEN -2048 TO 2048",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>k(k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())+",",r.ExpInstVar())+","+t.ExpInstVar()},()=>"Diameter: must be between 0 - 24",()=>"Boo count: must be between 1 - 50",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);
return()=>(-1*Math.abs(b(l.ExpObject()))).toString()},()=>"ROTATION SPEED: MUST BE BETWEEN -720 TO 720",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5);return()=>k(k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())+",",r.ExpInstVar())+","+t.ExpInstVar()+","+u.ExpInstVar()},()=>"SPEED: ENTER VALUE BETWEEN 0-256.",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>k(b.ExpInstVar()+"-",l(p.ExpObject()))},
()=>"SPEED: CANNOT BE FASTER THAN 512 PIXELS / SEC.",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>32*b(l.ExpObject())},()=>"SINE MAGNITUDE: MUST BE BETWEEN -6 TO 6.",a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()/4},a=>{const b=a._GetNode(0).GetVar();return()=>k("SINE PERIOD: CANNOT BE LESS THAN 1/4th OF THE MAGNITUDE (",Math.round(b.GetValue()/4*100)/100)+")"},a=>{const b=a._GetNode(0);return()=>(25*(b.ExpObject()+1)).toString()},()=>"Updating Tile Visuals In-Editor",
()=>"inEditor",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpObject()/2+16},()=>"cbgPreview",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar())-1},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2);return()=>b.ExpObject()-l.GetValue()*(p.ExpObject()-4)},()=>"RespawnIcon",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0,6)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar())+90},
()=>"CannonStand",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>90*(b(l.ExpInstVar())-1)},()=>"number",()=>333,()=>"SignStand",a=>{const b=a._GetNode(0);return()=>b.ExpObject("Reset")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8),E=a._GetNode(9).GetBoundMethod(),y=a._GetNode(10),
B=a._GetNode(11).GetBoundMethod(),H=a._GetNode(12).GetBoundMethod(),P=a._GetNode(13),F=a._GetNode(14).GetBoundMethod(),I=a._GetNode(15);return()=>b(l(p(r.ExpObject(t(u.ExpInstVar()),3),0,".")),w(x(A.ExpObject(E(y.ExpInstVar()),3),1,".")),B(H(P.ExpObject(F(I.ExpInstVar()),3),2,".")))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>k("BG",b.ExpObject(l(p.ExpInstVar()),1))},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>k("BG",
b.ExpObject(l(p.ExpInstVar()),2))},a=>{const b=a._GetNode(0);return()=>"BG"+b.ExpInstVar()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5).GetBoundMethod(),w=a._GetNode(6),x=a._GetNode(7).GetBoundMethod(),A=a._GetNode(8).GetBoundMethod(),E=a._GetNode(9);return()=>b(l(p(r.ExpInstVar(),0,".")),t(u(w.ExpInstVar(),1,".")),x(A(E.ExpInstVar(),2,".")))},()=>"Customization Help",
()=>"tooltip",a=>{const b=a._GetNode(0).GetVar();return()=>16-96*b.GetValue()},()=>632,a=>{const b=a._GetNode(0).GetVar();return()=>608+192*b.GetValue()},a=>{const b=a._GetNode(0);return()=>480-b.ExpObject()/2},()=>"customizationTooltip",()=>"Menu Updates",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),6)},()=>"option",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b("Disabled,Overworld,Clouds 1,Cave,Clouds 2,Clouds 3,Night,Fortress,Bonus Zone,Underwater,Clouds 4,Icy Cave,Night (Green),Clouds 5,Dark Cave,Dark Castle,Stars (Transparent),Boss Arena,Dark Clouds,Volcanic Cave",
l.GetValue(),",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue())+2},()=>"BG0",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b("Disabled,Overworld,Hills,Desert,Forest,Mountains,Castle,Fortress,Fortress (Dark),Ghost House,Hills (Dark),Forest (Blue),Snow Overworld,Snow Mountains,Sunken Ship,Frozen Castle,Beach,Hills (Ice),Volcano,Volcanic Cave,Waterfall Hills,Bright Ghost House,Bright Ghost House 2,Forest (Autumn),Forest (Winter)",
l.GetValue(),",")},a=>{const b=a._GetNode(0);return()=>k("BG",b.ExpObject()-2)},a=>{const b=a._GetNode(0);return()=>(b.ExpObject()-2).toString()},()=>"Enter BG ID (0-19) or an URL",()=>"Background won't be changed",()=>"Enter FG ID (0-19) or an URL",()=>"Foreground won't be changed",()=>"248.224.176",()=>"117.117.194",()=>"255.0.0",()=>"0.0.96",()=>"0.0.0",()=>"248.16.88",()=>"0.0.128",()=>"168.208.208",()=>"90.120.144",()=>"255.255.255",()=>"115.113.115",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1);return()=>b("180,180,270,270,270,270,0,0,0,270,0,270,225,180",l.ExpObject()-1,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b("256,128,256,64,64,64,0,0,0,512,64,256,256,64",l.ExpObject()-1,",")},()=>"Menu Tab",()=>"checkboxAssist",()=>"Donkey Kong,SMB1 Girder,Modern Girder (Yellow),Mario Land,Shroom (Green),Shroom (Red),Shroom (Yellow),Shroom (Blue),SMB3 Cloud,Stone,Grassy,SMW Checkered,SMW Gray,SMW Brown,Yoshi's Island (Green),Yoshi's Island (Yellow),Yoshi's Island (Red),NSMB Wood",
()=>"THE PLATFORM SIZE, IN TILES (FROM 1-20).",()=>"ANGLE OF\nMOVEMENT",()=>"platformSpeed",()=>"THE PLATFORM SPEED, IN PIXELS / SEC (EACH TILE IS 32 PIXELS).",()=>"ON PLAYER\nACTIVATION",()=>"WAIT",()=>456,()=>"PERFORM\nACTION",()=>"Nothing,Stop,Stop (No re-activation),Reverse,Fall",()=>"Active\non start",()=>"HORIZONTAL\nMAGNITUDE",()=>"HORIZONTAL MAGNITUDE (LEFT-RIGHT) SINE WAVE MOVEMENT.",()=>"PERIOD",()=>"TIME (IN SEC.) FOR A COMPLETE CYCLE.",()=>"PERIOD\nOFFSET",()=>"SKIP AHEAD TO ANOTHER POINT IN THE SINE CYCLE.",
()=>"VERTICAL\nMAGNITUDE",()=>"VERTICAL MAGNITUDE (UP-DOWN) SINE WAVE MOVEMENT.",()=>"previewSines",()=>"PREVIEW",()=>"TIME TO REACH\nMAX SPEED",()=>"speedupTime",()=>"TIME TAKEN\nTO STOP",()=>"slowdownTime",()=>"TIME IN SEC. TO COME TO A STOP, TRIGGERED BY ANY STOP ACTIONS.",()=>"platformRotationSpeed",()=>"ANGLE CHANGE\nPER SECOND",()=>"CHANGE ANGLE OF MOVEMENT BY X PER SECOND (NEGATIVE VALUES WORK TOO).",()=>"USE THIS TO REFERENCE THE PLATFORM ELSEWHERE.",()=>"Only move\nw/ player",()=>"Prevent\nunloading",
()=>"Horizontal\nScreenwrap",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),5,"_"))},()=>"Vertical\nScreenwrap",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpInstVar(),6,"_"))},()=>"PLATFORM SIZE: CANNOT BE LESS THAN 1",()=>"PLATFORM SIZE: CANNOT BE BIGGER THAN 20",()=>"384",()=>"PLATFORM SPEED: MAXIMUM SPEED (384) REACHED!",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7);return()=>k(b(l.ExpObject()),"_")+p(r.ExpInstVar(),1,"_")+"_"+t(u.ExpInstVar(),2,"_")+"_"+w(x.ExpInstVar(),3,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7);return()=>k(b(l.ExpInstVar(),
0,"_")+"_",p(r.ExpObject()))+"_"+t(u.ExpInstVar(),2,"_")+"_"+w(x.ExpInstVar(),3,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7);return()=>k(b(l.ExpInstVar(),0,"_")+"_"+p(r.ExpInstVar(),1,"_")+"_",t(u.ExpObject()))+"_"+w(x.ExpInstVar(),3,"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=
a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5),w=a._GetNode(6).GetBoundMethod(),x=a._GetNode(7);return()=>k(b(l.ExpInstVar(),0,"_")+"_"+p(r.ExpInstVar(),1,"_")+"_"+t(u.ExpInstVar(),2,"_")+"_",w(x.ExpObject()))},()=>"horizontalMagnitude",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3),t=a._GetNode(4).GetBoundMethod(),u=a._GetNode(5);return()=>k(b(l.ExpInstVar(),0,"_")+"_"+p(r.ExpInstVar(),1,"_")+"_",t(u.ExpObject()))},()=>
"-512",()=>"MAGNITUDE: MUST BE BETWEEN -512 AND 512",()=>"512",()=>"PERIOD: MUST BE AT LEAST 4 SECONDS",a=>{const b=a._GetNode(0).GetVar();return()=>k("Period Offset: This must not be bigger than the period (",b.GetValue())+")"},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpInstVar(),"_")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>b(l.ExpInstVar(),p.GetValue(),"_")},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),
r=a._GetNode(3),t=a._GetNode(4),u=a._GetNode(5),w=a._GetNode(6);return()=>k(k(k(k(k(k(k(k(k(k(k(k(b.ExpObject(0),"_"),l.ExpObject(1)),"_"),p.ExpObject(2)),"_"),r.ExpObject(3)),"_"),t.ExpObject(4)),"_"),u.ExpObject(5)),"_"),w.ExpObject(6))},()=>"preview",()=>"movementSpeed",()=>"arrowSize",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior("movementSpeed")*l()},()=>"Editing Options with Preview Tiles",()=>"bounce",()=>"Quick-Editing with Ctrl & Shift",()=>"sw71",()=>
"sw74",a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",m"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",m,",l.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",-,",l.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",0,",l.ExpObject())},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",-,1"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",m,1"},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>
b("HI&comma; I'M TOAD!","Thank you Mario! But our princess is in another castle!","Pick a box. Its contents will help you on your way.","WAAAHAAAAAAAAAAAAAAAAAAAA!!!","I'M THE BEST!")},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>k(k(b.ExpObject()+","+l.ExpInstVar()+",",p.ExpInstVar())+",",r.ExpInstVar())+","+t.ExpInstVar()+",-"},()=>"m84",()=>"m85",()=>"sw68",()=>"sw69",()=>"sw70",()=>"sw72",()=>"sw73",a=>{const b=a._GetNode(0),l=a._GetNode(1);
return()=>k(b.ExpObject()+",",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpObject(),","),l.ExpObject())+",m"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",t,"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",m,"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",-,"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",b,"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",t,",l.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1);
return()=>k(b.ExpObject()+",b,",l.ExpInstVar())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",t,",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",m,",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",-,",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",b,",l.ExpObject())},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",1"},a=>{const b=a._GetNode(0);return()=>
b.ExpObject()+",2"},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(k(b.ExpObject()+",",l.ExpObject())+",",p.ExpObject())},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",13"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",3"},()=>"j58",()=>"j59",()=>"wa1",()=>"wa4",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>k("wa",b(l(p.ExpObject(),1))+2)},()=>"wa2",()=>
"wa5",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>k("wa",b(l(p.ExpObject(),1))-1)},()=>"wa3",()=>"wa6",()=>"wa7",()=>"wa8",()=>"wa9",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),1))+1},a=>{const b=a._GetNode(0).GetVar();return()=>k("wa",b.GetValue())},()=>"wa10",()=>"wa11",()=>"wa12",()=>"wa13",()=>"wa14",()=>"wa15",()=>"wa16",()=>"wa17",()=>"wa18",a=>{const b=a._GetNode(0).GetBoundMethod(),
l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),2))+1},()=>"wa19",a=>{const b=a._GetNode(0).GetVar();return()=>k("m",b.GetValue())},()=>"s66",()=>"s67",()=>"s68",()=>"s69",a=>{const b=a._GetNode(0).GetVar();return()=>k("s",b.GetValue())},()=>"s70",()=>"s72",()=>"s73",()=>"s74",()=>"s75",()=>"s76",()=>"s77",()=>"s78",()=>"s79",()=>"s80",()=>"bn1",()=>"bn2",()=>"bn3",()=>"bn4",()=>"bn5",()=>"bn6",()=>"bn7",a=>{const b=a._GetNode(0).GetVar();return()=>k("bn",b.GetValue())},
()=>"bn8",()=>"bn9",()=>"bn10",()=>"bn11",()=>"bn12",()=>"gh83",()=>"gh84",()=>"gh85",()=>"gh86",()=>"gh87",a=>{const b=a._GetNode(0).GetVar();return()=>k("gh",b.GetValue())},()=>"gh88",()=>"j60",()=>"j61",()=>"j62",()=>"j63",()=>"j64",()=>"j65",()=>"j66",()=>"j67",a=>{const b=a._GetNode(0).GetVar();return()=>k("j",b.GetValue())},()=>"j68",()=>"ng53",()=>"ng54",()=>"ng55",a=>{const b=a._GetNode(0).GetVar();return()=>k("ng",b.GetValue())},()=>"ng56",()=>"au81",()=>"au82",()=>"au83",()=>"au84",a=>{const b=
a._GetNode(0);return()=>b.ExpObject(0,0)},()=>97,a=>{const b=a._GetNode(0);return()=>b.ExpObject(0,0)+1},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpInstVar(),l.ExpObject(0,0)+1)},a=>{const b=a._GetNode(0);return()=>k("m47,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("m29,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e24,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("m23,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e35,",b.ExpObject())},a=>
{const b=a._GetNode(0);return()=>k("e15,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e34,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e33,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e82,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e81,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e100,",b.ExpObject())},a=>{const b=a._GetNode(0);return()=>k("e99,",b.ExpObject())},()=>"Right-click Tile Picker",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);
return()=>b.ExpObject(l.ExpObject()/32,p.ExpObject()/32)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),3,",")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),4,",")},a=>{const b=a._GetNode(0);return()=>"Tilemap"+b.ExpInstVar_Family()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject(Math.round(l()/32-.5),Math.round(p()/32-.5))},a=>{const b=
a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod();return()=>b.ExpObject(Math.round(l()/32),Math.round(p()/32))},()=>"betainfo",()=>"NEW CONTENT IN BETAS IS NOT YET POLISHED AND ARE SUBJECT TO CHANGE.\n\nPLEASE DO NOT PUBLISH LEVELS TO LEVEL PALACE THAT HAVE BETA CONTENT, AS THEY ARE LESS FUTURE PROOF!\n\nTHANKS FOR UNDERSTANDING AND HAVE FUN WITH THIS NEW BETA!",()=>"gotit",()=>"CLICK ANYWHERE",()=>"Global Playable Character Events",()=>-464,()=>"climbing",()=>"Mario Powerups",
()=>"FireFlower",()=>"2UsePowerup",()=>"spinjump",()=>"Raccoon & Tanooki",()=>"General Raccoon / Tanooki Events",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"UsePowerup")},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Jump1")},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Duck0")},()=>"PMeterSFX",()=>"3UsePowerup",a=>{const b=a._GetNode(0);return()=>k("3Spinjump",b.ExpInstVar())},()=>"10UsePowerup",a=>{const b=a._GetNode(0);return()=>k("10Spinjump",b.ExpInstVar())},
a=>{const b=a._GetNode(0).GetBoundMethod();return()=>-11520*b()},()=>"Statue Ability",()=>"cancelStatueForm",a=>{const b=a._GetNode(0);return()=>b.ExpInstVar()-256},()=>"transformMarioIntoStatue",()=>"statueFading",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>b(0,100)},a=>{const b=a._GetNode(0).GetBoundMethod();return()=>Math.round(b(4,7))},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Spinjump")},()=>"4UsePowerup",()=>-672,()=>.08,a=>{const b=a._GetNode(0),l=a._GetNode(1),
p=a._GetNode(2).GetVar();return()=>Math.round(b.ExpObject()+16-l.ExpObject()%p.GetValue())},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetVar();return()=>Math.round(b.ExpObject()+48-l.ExpObject()%p.GetValue())},()=>"5UsePowerUp",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1),p=a._GetNode(2);return()=>b(l.ExpObject()-48,p.ExpObject()+48)},()=>5.8,a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-4*l.ExpInstVar()-12},a=>{const b=a._GetNode(0),l=a._GetNode(1),
p=a._GetNode(2);return()=>b.ExpObject()-l.ExpObject()+40+8*p.ExpInstVar()},()=>"IceFlower",()=>-400,()=>"Fainted",()=>"freezing",()=>"frozenDeath",a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpBehavior(),0,.1)},()=>"l75",()=>"l76",()=>"l77",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>e.lerp(b.ExpObject(),l.ExpObject()-16,.03)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2),r=a._GetNode(3).GetBoundMethod();return()=>b.ExpObject()-128*l()+p.ExpInstVar()*r()},()=>
"Frog & Penguin Suit",()=>"Frog/Penguin Swimming",()=>"7Swim",()=>"Penguin Suit Diving",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Skid")},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Slide")},()=>"7Dive",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior()-64*l()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior()+128*l()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpObject()-
256*l()},()=>"BlueShell",()=>"Bunny Ears",()=>"SuperBall",a=>{const b=a._GetNode(0);return()=>Math.round(b.ExpBehavior()/45)},a=>{const b=a._GetNode(0).GetVar();return()=>45*b.GetValue()},()=>"Starman",()=>1280,()=>-75,()=>"checkForSpikeOverlap",()=>"Metal Pinecone",()=>"GrayScale",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-64-Math.abs(l.ExpBehavior())/12},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()+64+Math.abs(l.ExpBehavior())/12},()=>"Controls",()=>"Standing Still",
a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Duck1")},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"LookUp"),l.ExpInstVar())},()=>"Ducking, Sliding & Looking Up",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Dive")},()=>"startMarioSlide",()=>"checkShellMarioUnDuck",a=>{const b=a._GetNode(0);return()=>k("1Duck",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>k("1Idle",b.ExpInstVar())},()=>"Walking & Running",()=>"ridingYoshi",()=>
"12Walk0",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/1.5},()=>"Jumping & Falling",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()-80*l.ExpInstVar()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpInstVar()+64-80*l.ExpInstVar()},()=>2960,()=>"bounceJump",()=>-992,()=>"forceBounce",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>c(b.ExpBehavior(),h(l(1),2))},()=>"springjump",()=>-608,()=>-1248,()=>-832,a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();
return()=>b.ExpBehavior()+l.GetValue()/2},()=>-896,()=>"Swimming",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior()-768*l()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>b.ExpBehavior()-1024*l()},a=>{const b=a._GetNode(0);return()=>512+b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>256+b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>128+b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>64+b.ExpInstVar()},a=>{const b=a._GetNode(0);
return()=>160+b.ExpInstVar()},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Fall"),l.ExpInstVar())},()=>"Smooth Swimming",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"SwimHorizontal")},()=>"7SwimUp",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"SwimUp")},()=>"7SwimDown",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"SwimDown")},()=>"Climbing",a=>{const b=a._GetNode(0);return()=>-1*Math.abs(b.ExpObject())+24},a=>{const b=
a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Climb")},a=>{const b=a._GetNode(0);return()=>192-96*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>128-64*b.ExpInstVar()},()=>"shellmario",()=>"topsolidMario",()=>"PlayerHit",a=>{const b=a._GetNode(0);return()=>k("4Duck",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>k("8Duck",b.ExpInstVar())},a=>{const b=a._GetNode(0);return()=>b.ExpBehavior()/1.4},a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"usePowerup")},a=>{const b=a._GetNode(0).GetVar();
return()=>k(b.GetValue(),"Walk")},()=>"Yoshi Events + Riding",()=>"Yoshi Egg",()=>"Egg",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Spawning")},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Idle"),l.ExpInstVar())},()=>"Idle & Saddling",a=>{const b=a._GetNode(0);return()=>1920/(5*b.ExpInstVar()+1)},a=>{const b=a._GetNode(0);return()=>-160/(b.ExpInstVar()+1)},a=>{const b=a._GetNode(0);return()=>2960/(5*b.ExpInstVar()+1)},a=>{const b=a._GetNode(0);return()=>b.ExpObject("saddle")},
()=>"flee",()=>"Controlling Yoshi",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"RideEat")},()=>"Yoshi Standing Still",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Duck0")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Duck1")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Spit")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"SpitDuck")},()=>"Yoshi Walking & Running",()=>"Yoshi Jumping & Falling",()=>"Yoshi Ducking & Sliding",()=>"slidingYoshi",a=>{const b=
a._GetNode(0).GetVar(),l=a._GetNode(1);return()=>k(k(b.GetValue(),"Stand"),l.ExpInstVar())},()=>"Yoshi Swimming",()=>"Yoshi Tongue & Swallowing",a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"prepareTongue")},()=>"tongue",a=>{const b=a._GetNode(0);return()=>b.ExpObject("saddle")+8},a=>{const b=a._GetNode(0);return()=>b.ExpObject("saddle")+12},a=>{const b=a._GetNode(0);return()=>b.ExpObject("saddle")-8},()=>"clock",()=>"pswitch",()=>"oneup",()=>"threeup",()=>"kamikazeShell",()=>"sign",()=>"springboardSideways",
()=>"axe",()=>"chest",()=>"swallow",()=>"wings",()=>"onTongue",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-42},()=>"heftyGoonie",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>k(b.ExpInstVar(),l(p.ExpObject(),4))},()=>"Yoshi Abilities",a=>{const b=a._GetNode(0);return()=>k("YoshiTongue",b.ExpObject())},()=>"Yoshi Fleeing & Health",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(b.ExpInstVar(),"Flee"),l.ExpInstVar())},()=>"Anti-Yoshi Sign",()=>"Kuribo Shoe",
()=>"Kuribo Shoe With Goombas",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-l.ExpBehavior("show")},()=>"show",a=>{const b=a._GetNode(0);return()=>-192+96*b.ExpInstVar()},a=>{const b=a._GetNode(0);return()=>192-96*b.ExpInstVar()},()=>"Kuribo Shoe Jumping in & out",()=>"ridingShoe",()=>"Controlling the Kuribo Shoe",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject()-(64-l.ExpObject())},()=>"Kuribo Shoe Walking & Running",()=>"Kuribo Shoe Jumping & Falling",a=>{const b=
a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetBoundMethod();return()=>e.lerp(b.ExpInstVar(),l.ExpBehavior()/32,1-Math.pow(.5,p()))},a=>{const b=a._GetNode(0);return()=>4+b.ExpInstVar()},()=>"Animation & Frame Updates",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"runJump")},()=>"Mario Health",()=>"Invisible Mario Hurtbox Events",()=>"dead",()=>"playerDeath",()=>"LifeLost",()=>"checkRemainingHealth",()=>"loseLifeSFX",()=>"screenTransition",()=>"startpixel",()=>"Death",a=>{const b=
a._GetNode(0);return()=>f(b.ExpObject(0,0),1)},()=>"GameOverSFX",()=>"Game",()=>"Over",()=>"RETRY LEVEL",()=>"QUIT LEVEL",()=>"PlayerSuffocation",()=>"Warping",()=>"Warping Events",()=>"warpstart",()=>"warpIn",a=>{const b=a._GetNode(0).GetVar();return()=>.4+b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>.2+b.GetValue()},()=>"endpixel",a=>{const b=a._GetNode(0).GetVar();return()=>k(b.GetValue(),"Front")},a=>{const b=a._GetNode(0);return()=>b.ExpObject()-65},()=>"warpingLeft",()=>"warpingRight",
()=>"warpingDown",()=>"warpingUp",()=>"pixelation",()=>"Pixellate",a=>{const b=a._GetNode(0);return()=>b.ExpBehavior("pixelation")},()=>"startpixelation",()=>"endpixelation",()=>"warping",()=>"Unlocking Doors",()=>"Carrying Items Through Warps",()=>"Holding Items",()=>"pickUpDelay",()=>"beingheld",()=>"BeingHeld",()=>"pushout",a=>{const b=a._GetNode(0);return()=>1.2*b.ExpBehavior()+64},()=>"knockbackY",a=>{const b=a._GetNode(0);return()=>1.2*b.ExpBehavior()+128},a=>{const b=a._GetNode(0);return()=>
b.ExpObject("mouth")},a=>{const b=a._GetNode(0);return()=>k(b.ExpInstVar(),"Thrown")},()=>"logoletter",a=>{const b=a._GetNode(0);return()=>-1*b.ExpBehavior()-256},()=>"createYoshiFlames",a=>{const b=a._GetNode(0);return()=>b.ExpObject()-44},()=>"tiles",a=>{const b=a._GetNode(0);return()=>e.lerp(b.ExpObject(),100,.3)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>e.lerp(b.ExpObject(),l.ExpInstVar(),.4)},()=>"inToolbar",()=>"layoutToolbar",()=>"displaytoolbarmenu",()=>"o",a=>{const b=a._GetNode(0),
l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject(),1)},()=>"posX",()=>"i",()=>"selecttilepage",()=>"semisolids",()=>"decorations",()=>"grass1",()=>"cave1",()=>"castle1",()=>"jungle1",()=>"desert1",()=>"snow1",()=>"snowTrees",()=>"icecave1",()=>"beach1",()=>"airship",()=>"mountain",()=>"volcano",()=>"volcanocave",()=>"sky",()=>"airtiles",()=>"retro",()=>"bonus",()=>"pipes1",()=>"pipes2",()=>"slantedpipes",()=>"lava",()=>"TILES",()=>"starWorld",()=>"ghostHouse",()=>"ghostHouse2",()=>"nightGrass",()=>
"autumn",()=>"autumn2",()=>"sewer",()=>"powerups",()=>"mounts",()=>"movingobjects",()=>"platforms",()=>"switches",()=>"conveyors",()=>"goalPoints",()=>"advancedobj",()=>"changers",()=>"enemyBlocks",()=>"generators",()=>"m87",()=>110,()=>"OBJECTS",()=>"waterenemies",()=>"shellEnemies",()=>"projectileenemies",()=>"moleenemies",()=>"chuckenemies",()=>"castleenemies",()=>"piranhas",()=>"dinosaurs",()=>"fireenemies",()=>"flightEnemies",()=>"poweredUpEnemies",()=>"bosses",()=>"experimentalenemies",()=>
"lakitus",()=>"lakThumb",()=>"ENEMIES",()=>"ENTRANCES",()=>"EXITS",()=>"WARP\nGUIDE",()=>"WARPS",()=>"LEVEL\nSETTINGS",()=>"TOOLBAR\nSETTINGS",()=>"MAPS",()=>"LEVEL\nINFO",()=>"l2",()=>"bz2",()=>"ar22",()=>"ax32",()=>"au2",()=>"us2",()=>"changeeditorpage",()=>"tileinfo",()=>"GENERAL SEMISOLIDS / PLATFORMS",()=>"COMMON DECORATIONS",()=>"PAGE 1/2",()=>"PAGE 2/2",a=>{const b=a._GetNode(0).GetVar();return()=>k("PAGE ",b.GetValue()+1)+"/10"},()=>"Slope\nends",()=>"TREES",()=>"FALLING",a=>{const b=a._GetNode(0).GetVar();
return()=>k("PAGE ",b.GetValue()+1)+"/4"},a=>{const b=a._GetNode(0).GetVar();return()=>k("PAGE ",b.GetValue()+1)+"/3"},()=>"USE SHIFT AND CTRL TO MIRROR, FLIP OR CHANGE AN OBJECT PROPERTY.\nHOLD SHIFT AND CLICK ON CUSTOMIZABLE OBJECTS TO EDIT THEM.",()=>"TO INSERT A GOOMBA INTO A SHOE, JUST PLACE IT ON TOP OF IT!",()=>404,()=>"YOU CAN TOGGLE PALACE SWITCHES TO BE ALREADY ACTIVATED HERE.",()=>"Conveyor Belt Speed:",()=>"conveyorSpeed",()=>"Stationary,Slow,Medium,Fast",()=>"conveyorDirection",()=>"Go left,Go right",
()=>"PLATFORMS ARE COMPLETELY CUSTOMIZABLE: DIRECTION, SINE MOVEMENTS, AND LOTS MORE!",()=>"CHANGE PLATFORM ANGLE, SPEED, ACTION & TAG",()=>"PRE-CONFIGURED PLATFORMS",()=>"FALL ON\nACTIVATION",()=>"WRAPPING\nPLATFORM",()=>"THE PERSISTANT-AREA TILE WILL PREVENT ANY OBJECT FROM DESPAWNING IN ITS RADIUS. WITH CTRL YOU CAN PLACE ONE THAT ACTIVATES WHEN ON-SCREEN.",()=>"THE AREA-OBJECT LOADER, WHEN ON-SCREEN, WILL LOAD ALL OBJECTS THAT IT IS POINTING TOWARDS. USE IT TO SYNC ENEMIES OR LOAD THEM OFF-SCREEN!",
()=>"THIS IS THE TAG BLOCK, USED TO REFERENCE OTHER ACTION BLOCKS, FOR EXAMPLE STOPPING CERTAIN GENERATORS.",()=>"CHANGE TO ANY PRE-CONFIGURED THEME IN AN INSTANT!",()=>"SET THE BACKGROUND & FOREGROUND SEPERATELY, INCLUDING MOVEMENT OPTIONS.",()=>"CHANGE THE BACKGROUND COLOR (FOR TRANSPARENT BACKGROUNDS)",()=>"PLAY A DIFFERENT MUSIC TRACK (INCLUDING CUSTOM MUSIC).",()=>"SET, UPDATE OR CHANGE AN OVERLAY EFFECT.",()=>"CHANGE THE MODE FROM LAND TO WATER, OR THE OTHER WAY AROUND.",()=>"Light up specific areas with the Boo Block!",
()=>"Create a darkness area with the Swooper block.",()=>"The Ninji block will create full blindness areas.",()=>"The Bullet Bill generator spawn Bullet Bills off-screen. You can set how many spawn, where, and much more!",()=>"The wind generator will push objects in the wind's direction. It also works underwater as a current generator!",()=>"Make meteors constantly fall from the sky with the Meteor Generator! You can set how many meteors fall and when, and way more.",()=>"With the Fish Generator, you can spawn a variety of fish, either jumping out of the water or whilst underwater.",
()=>"USE SHIFT AND CTRL TO MIRROR, FLIP OR CHANGE AN ENEMY PROPERTY.\nHOLD SHIFT AND CLICK ON CUSTOMIZABLE ENEMIES TO EDIT THEM.",()=>"UNDERWATER ENEMIES",()=>"WATER ENEMIES WILL HAVE OTHER BEHAVIOUR ON LAND AND WATER, AND NOT ALL SURVIVE ON LAND. WATER ENEMIES CAN SURVIVE INSIDE BUBBLES!",()=>"FISH\nGENERATOR",()=>"WALLED\nURCHIN",()=>"DEFAULT",()=>"JUMPING",()=>"FLYING",a=>{const b=a._GetNode(0).GetVar();return()=>k("PAGE ",b.GetValue()+1)+"/2"},()=>"BULLET BILL\nGENERATOR",()=>"PROJECTILES CAN BE ROTATED BY 90 DEGREES WITH CTRL.\nLAUNCHERS, CANNONS AND TORPEDO BASES CAN BE CUSTOMIZED!",
()=>"MOLES",()=>"HIDING MOLES",()=>"ROCKY WRENCHES",()=>"MOLE HOLES",()=>"CHARGIN'",()=>"CLAPPIN'",()=>316,()=>"BOUNCIN'",()=>"CONFUSED",()=>"PASSIN'",()=>"DIGGIN'",()=>"KICKIN'",()=>"SPLITTIN'",()=>"CASTLE ENEMIES",()=>"USE SHIFT AND CTRL TO MIRROR, FLIP OR CHANGE AN ENEMY PROPERTY.\nROTATED LOTUSSES & MUNCHERS CAN BE ATTACHED TO WALLS OR CEILINGS!",()=>"SKELETON",()=>"WATER",()=>"FIRE SNAKES",()=>370,()=>"PODOBOOS",()=>"LIL' SPARKIE,\nHOTHEAD & ANGRY SUN",()=>"METEORS",()=>"HEFTY\nGOONIE",()=>"BOWLING\nGOONIE",
()=>"PLACE AN ITEM BELOW A FLYING GOONIE TO HAVE THEM CARRY IT! HEFTY GOONIES BOUNCE, BOWLING ONES ROLL UP AND DOWN SLOPES.",()=>"GHOST HOUSE ENEMIES",()=>"SMW AI",()=>"NSMB AI",()=>"Boos will keep on moving towards Mario if a darkness effect is applied!",()=>"BOSS BATTLES",()=>"BOSSES ARE VERY CUSTOMISABLE AND YOU CAN EDIT THEM WITH SHIFT+CLICK! SET THEIR HEALTH, ATTACK TYPES AND WAY MORE.",()=>"POWERED-UP ENEMIES",()=>"THESE ENEMIES HAVE POWER-UP ABILITIES SIMILAR TO THOSE OF MARIO'S. USE SHIFT AND/OR CTRL TO MIRROR OR CHANGE A PROPERTY.",
()=>"NEW ENEMIES AVAILABLE FOR TESTING",()=>"THESE ARE ALL NEW ENEMIES AND, AS A RESULT, MAY STILL SHOW WEIRD BEHAVIOUR SOMETIMES! FEEL FREE TO POST THESE IN #BUG-REPORTS.",()=>"e",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),3)},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),2)},()=>"ro",()=>"sr",()=>"bn",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>184+b.ExpObject()*l.GetValue()},a=>{const b=
a._GetNode(0),l=a._GetNode(1).GetVar();return()=>96+b.ExpObject()*l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(),0,","),0,"+")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(),1,"+")},()=>"ic",()=>"a",()=>"au",()=>"g",()=>"gh",()=>"g46",()=>"g47",()=>"g48",()=>"g49",()=>"g70",()=>"g72",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>168+b.ExpObject()*l.GetValue()},
a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>80+b.ExpObject()*l.GetValue()},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2),r=a._GetNode(3);return()=>b(l(p.ExpObject(),r.ExpInstVar(),""))-1},()=>"c",()=>"34",()=>"35",()=>"36",()=>"37",()=>"42",()=>"43",()=>"44",()=>"46",()=>"47",()=>"48",()=>"49",()=>"50",()=>"51",()=>"52",()=>"53",()=>"j",()=>"w86",()=>"w87",()=>"w88",()=>"w89",()=>"w90",()=>"24",()=>"25",()=>"b61",()=>"d",()=>"d47",()=>
"d68",()=>"h",()=>"h68",()=>"h72",()=>"h93",()=>"s42",()=>"s43",()=>"s44",()=>"s45",()=>"v",()=>"vc",()=>"v88",()=>"v89",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),4)},()=>"vc72",()=>"vc74",()=>"sw50",()=>"sw51",()=>"sw52",()=>"sw53",()=>"gh89",()=>"ng",()=>"ng42",()=>"ng43",()=>"ng44",()=>"ng45",()=>"au30",()=>"au31",()=>"au32",()=>"au33",()=>"au38",()=>"au39",()=>"au40",()=>"au41",()=>"au42",()=>"au43",()=>"au44",()=>"au45",()=>"au65",()=>"au66",
()=>"au67",()=>"au68",()=>"au69",()=>"au70",()=>"au71",()=>"au72",()=>"au73",()=>"au74",()=>"au75",()=>"au76",()=>"au77",()=>"au78",()=>"au79",()=>"au80",()=>"au85",()=>"us",()=>"us30",()=>"us31",()=>"us32",()=>"us33",()=>"us38",()=>"us39",()=>"us40",()=>"us41",()=>"us46",()=>"us47",()=>"us48",()=>"us49",()=>"us58",()=>"us59",()=>"us60",()=>"us61",()=>"us102",()=>"us103",()=>"us104",()=>"us105",a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar();return()=>k(k(k(k(b.ExpObject()+
",",l.ExpObject())+",",p.GetValue())+",",r.GetValue())+",",0)},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar();return()=>k(k(k(k(b.ExpObject()+",",l.ExpObject())+",",p.GetValue())+",",r.GetValue())+",",1)},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2).GetVar(),r=a._GetNode(3).GetVar();return()=>k(k(k(b.ExpObject()+",",l.ExpObject())+",",p.GetValue())+",",r.GetValue())},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",,0,0,10"},a=>{const b=
a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",",l.ExpObject())+",4,2,0,1,0,0,bulletGen"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",270,64,2,0,1,0,windGen,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,8,6,0,0-0,0,0,meteorGen"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,1,8,4,0,0,fishGen"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",1,1"},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar(),p=a._GetNode(2).GetVar();return()=>k(b.ExpObject()+","+l.GetValue()+
",0,0,",p.GetValue())+",1,1"},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()+","+l.GetValue()+",1,1,1,"},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()+","+l.GetValue()+",1,0,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,0,1"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",1,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",I'm a textbox with default text. Go into Edit Mode&comma; hold shift&comma; and then left click on me to change my contents!"},
a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",You are looking beautiful today."},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod();return()=>k(b.ExpObject()+",",l("HI&comma; I'M TOAD!","Thank you Mario! But our princess is in another castle!","Pick a box. Its contents will help you on your way.","WAAAHAAAAAAAAAAAAAAAAAAAA!!!","I'M THE BEST!"))+",0,0,0,-"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,20"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",Enter some text for me to say!,0"},
a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,256,4,0,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,16,2,3,0,-512,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,4,90"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",11,3,90,96_0_0_0,0_4_0_0_4_0,1_1_1_0_0_0_0,0_0,platform",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",11,3,90,0_0_0_0,192_6_0_0_4_0,1_1_1_0_0_0_0,0_0,hor_platform",l.ExpObject())},a=>{const b=
a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",11,3,90,0_0_0_0,0_4_0_192_6_0,1_1_1_0_0_0_0,0_0,ver_platform",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",11,4,90,112_0_0_45,0_4_0_0_4_0,1_1_1_0_0_0_0,0_0,rotate_platform",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",11,5,180,0_0_0_0,0_4_0_0_4_0,1_1_1_0_0_0_0,1_4,fall_platform",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+
",1,3,0,128_0_0_0,0_4_0_0_4_0,1_1_1_0_0_1_1,0_0,wrap_platform",l.ExpObject())},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",,0,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",,256,2"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",changeThis  toThis"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,0,0,0,1"},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>k(b.ExpObject()+",i1,0,",l.GetValue()-1)+
",0,1,1"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",",l.ExpObject())+",5,5"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",",l.ExpObject())+",60,0,0,0"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",",l.ExpObject())+",0,256,4,0,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,3,192,576,o2,0,7,1024"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(k(k(k(b.ExpObject()+",",l.ExpObject())+",",60)+",",0)+",",1)},
a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,6,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,2,32"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,0,0,2,2,-45"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",0,3,96,640,-,14,0,2-1-0-0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",angrySun,0,1"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",128,225,6,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",8,8,40,78,0"},a=>{const b=a._GetNode(0);return()=>
b.ExpObject()+",o2,3,1,7,64-96-128,4,1-1-0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",96,270,0,0"},a=>{const b=a._GetNode(0);return()=>b.ExpObject()+",96,270,0,0,100,0"},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpObject()+",e2,0,",l.ExpObject())},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>k(b.ExpInstVar_Family(),l.ExpObject(0,0)+1)},()=>"Tile Hovering Tooltips",()=>"glow",()=>"appearNormal",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();
return()=>b.ExpObject()-4*l(p.GetValue())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>16*b(l.GetValue())},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b()+320-l.ExpObject()},()=>"Scrolling Through Available Page Icons",()=>"Down",()=>"animDown",()=>"animUp",()=>308,()=>"Conveyor Belt Menu",()=>"96",()=>"Loading",()=>"setArrayAtXValues",()=>"recordedversion",a=>{const b=a._GetNode(0).GetBoundMethod();return()=>"VERSION: "+b()},()=>"Foreground",
a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()-120+8*l.GetValue()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject()-168+11.2*l.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>12/b.GetValue()*100},a=>{const b=a._GetNode(0).GetVar();return()=>400+96*b.GetValue()},()=>"loading",()=>"LOADING LEVEL...",()=>"THE LEVEL COULD NOT BE LOADED PROPERLY BECAUSE OF AN ERROR. THE LEVEL MIGHT BE CORRUPTED.",()=>"smclevel1",()=>"smclevel2",()=>"smclevel3",
()=>"smclevel4",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject(l.GetValue()-1,7)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject(l.GetValue())},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpObject(l.GetValue()-1,3)},a=>{const b=a._GetNode(0);return()=>(b.ExpObject()-1)/3},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),0,"-")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();
return()=>b(l.GetValue(),1,"-")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),2,"-")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),3,"-")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),4,"-")},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetVar();return()=>b(l.GetValue(),5,"-")},()=>"This size is not supported in widescreen mode. Make sure the level is at least 26 tiles in width.",
()=>"OOPS! ONE OR BOTH BACKGROUND IMAGES COULD NOT BE LOADED. MAKE SURE THE URLS ARE VALID AND THAT THE HOST WEBSITE IS WORKING.",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(11),0,"-"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(11),1,"-"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(11),
2,"-"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2);return()=>b(l(p.ExpObject(11),3,"-"))},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1);return()=>b(l.ExpObject(9))},()=>2500,a=>{const b=a._GetNode(0).GetVar();return()=>"clip of "+b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>16*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>64-96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>530+96*b.GetValue()},()=>
"CoinCounter",a=>{const b=a._GetNode(0).GetVar();return()=>42-96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>538+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>490+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>184-96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>196-96*b.GetValue()},()=>"dragoncoinx",()=>"x",a=>{const b=a._GetNode(0).GetVar();return()=>144-96*b.GetValue()},()=>"Edit",()=>"MoreOptions",a=>{const b=a._GetNode(0).GetVar();return()=>
432+96*b.GetValue()},a=>{const b=a._GetNode(0).GetVar();return()=>410+96*b.GetValue()},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>g(b.ExpObject(l.GetValue()-1,4),32)},a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>g(b.ExpObject(l.GetValue()-1,5),32)},()=>"L1",()=>"L2",()=>"tilemenu",a=>{const b=a._GetNode(0).GetVar();return()=>"Tilemap"+b.GetValue()},()=>"Loading Tiles",a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetVar();
return()=>b(l(p.GetValue(),1,","),2E3)},a=>{const b=a._GetNode(0).GetVar();return()=>b.GetValue()/32},a=>{const b=a._GetNode(0).GetBoundMethod(),l=a._GetNode(1).GetBoundMethod(),p=a._GetNode(2).GetBoundMethod(),r=a._GetNode(3).GetVar(),t=a._GetNode(4);return()=>b(l(p(r.GetValue(),0,","),t.ExpInstVar(),""))-1},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2),r=a._GetNode(3),t=a._GetNode(4);return()=>k(k(" T",Math.round(b.ExpObject()-32-l.ExpObject()%16))+" T "+p.ExpInstVar()+" 32T",Math.round(r.ExpObject()+
16-t.ExpObject()%32))},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar();return()=>k(" L",Math.round(b.GetValue()+16-l.GetValue()%32))},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar();return()=>k(" R",Math.round(b.GetValue()+16-l.GetValue()%32))},a=>{const b=a._GetNode(0).GetVar(),l=a._GetNode(1).GetVar();return()=>k(" D",Math.round(b.GetValue()+16-l.GetValue()%32))+" D"},()=>"c46",()=>"c47",()=>"c48",()=>"c49",()=>"c16",()=>"c17",()=>"c20",()=>"c21",()=>54,()=>"f78",()=>"f48",
()=>"f49",()=>46,()=>61,()=>"h73",()=>"h74",()=>"h75",()=>"70",()=>"77",()=>"au1",()=>"au3",()=>"au10",()=>"au11",()=>"au4",()=>"au7",()=>"au16",()=>"au17",()=>"au6",()=>"au9",()=>"au20",()=>"au21",()=>"au8",()=>"au14",()=>"au15",()=>57,()=>66,()=>69,()=>70,()=>"us1",()=>"us3",()=>"us10",()=>"us11",()=>"us4",()=>"us7",()=>"us16",()=>"us17",()=>"us6",()=>"us9",()=>"us20",()=>"us21",()=>"us8",()=>"us14",()=>"us15",a=>{const b=a._GetNode(0),l=a._GetNode(1).GetVar();return()=>b.ExpInstVar_Family()+l.GetValue()},
a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar_Family()+" L",Math.round(l.ExpObject()+16-p.ExpObject()%32))+" SSL"},a=>{const b=a._GetNode(0),l=a._GetNode(1),p=a._GetNode(2);return()=>k(b.ExpInstVar_Family()+" R",Math.round(l.ExpObject()+16-p.ExpObject()%32))+" SSL"},()=>"Loading Stuff into the Glossary",()=>"glossaryEnemies",a=>{const b=a._GetNode(0).GetVar();return()=>64+b.GetValue()},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(0)-l.ExpObject()/
2},()=>"glossaryItem",a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject(),2)},a=>{const b=a._GetNode(0),l=a._GetNode(1);return()=>b.ExpObject(l.ExpObject(),3)},()=>"Reading Info",()=>"objName",()=>"objSpecial",()=>"Glossary Misc",()=>"scrolling",()=>"Right32",()=>"Left32"]}"use strict";
self.C3.ScriptsInEvents={async Spritesevents_Event638_Act2(e,d){updatePowerup(e,d.newPowerUp)},async Spritesevents_Event640_Act1(e,d){updatePowerup(e,d.newPowerUp)},async Spritesevents_Event641_Act1(e,d){updatePowerup(e,d.newPowerUp)},async Spritesevents_Event649_Act2(e,d){setInventory(e,1)},async Toolbarevents_Event45_Act19(e,d){showCustomizationOptions(e,d.selectedTile)},async Loadinglevel_Event116_Act6(e,d){setInventory(e,e.globalVars.inventoryItem)}};
function changeEditorPage(){editorPageObj.grass.forEach(e=>{e.forEach(d=>{console.log(d)})})}
function showCustomizationOptions(e,d){let c="";switch(d){case "o53":case "e16":case "e17":case "e18":case "e32":case "e40":case "e75":case "e76":case "e91":case "e115":case "e117":case "e119":case "e121":c="Shift+Click: Customize";break;case "m26":case "m27":c="Shift: Rotate\n Ctrl: Mirror";break;case "m29":c="Shift: Center Point\n Ctrl: Palette";break;case "m48":c="These are scenery doors. Warp doors are found in the Warp section";break;case "g71":c="\n Ctrl: Cycle bush frame";break;case "sw71":case "sw74":c=
"Shift: Cycle\n Ctrl: Rotate";break;case "gh90":c="\n Ctrl: Rotate";break;case "cr1":case "cr2":case "cr3":case "cr4":case "cr5":case "cr6":case "cr7":case "cr8":c="\n Ctrl: Cycle through crate parts";break;case "e1":case "e28":c="Shift: Wings\n Ctrl: Mirror";break;case "e2":c="\n Ctrl: Mirror";break;case "e3":c="Shift: Walk/Shell/Wings\n Ctrl: Mirror";break;case "e4":c="\n Ctrl: Mirror";break;case "e5":c="Shift: Walk/Shell/Wings\n Ctrl: Mirror";break;case "e6":c="\n Ctrl: Mirror";break;case "e7":c=
"Shift: Squished\n Ctrl: Mirror";break;case "e8":c="\n Ctrl: Rotate";break;case "e9":c="Shift: Type\n Ctrl: Mirror";break;case "e10":c="\n Ctrl: Rotate";break;case "e11":c="Shift: Shell/Flip\n Ctrl: Mirror";break;case "e13":c="\n Ctrl: Rotate";break;case "e14":c="Shift: Throw\n Ctrl: Mirror";break;case "e15":c="Shift: Large\n Ctrl: Rotate";break;case "e19":c="\n Ctrl: Mirror";break;case "e20":c="Shift: Stationary\n Ctrl: Mirror";break;case "e21":c="\n Ctrl: Mirror";break;case "e22":c="Shift: Stationary\n Ctrl: Mirror";
break;case "e23":c="Shift: Segments\n Ctrl: Mirror";break;case "e24":c="\n Ctrl: Rotate";break;case "e25":c="Shift: Type\n Ctrl: Rotate";break;case "e27":c="Shift: Type";break;case "e28":c="\n Ctrl: Mirror";break;case "e29":c="\n Ctrl: Movement";break;case "e30":c="\n Ctrl: Mirror";break;case "e31":c="\n Ctrl: Mirror";break;case "e33":c="Shift: Type\n Ctrl: Rotate";break;case "e34":c="Shift: Type";break;case "e35":c="Shift: Giant\n Ctrl: Rotate";break;case "e36":c="\n Ctrl: Movement";break;case "e37":c=
"Shift: Ignition\n Ctrl: Mirror";break;case "e38":c="\n Ctrl: Mirror";break;case "e39":c="\n Ctrl: Rotate";break;case "e41":c="\n Ctrl: Rotate";break;case "e42":c="\n Ctrl: Mirror";break;case "e46":c="Shift: Type";break;case "e48":c="\n Ctrl: Movement";break;case "e49":c="\n Ctrl: Mirror";break;case "e50":c="Shift: Type\n Ctrl: Mirror";break;case "e51":c="\n Ctrl: Type";break;case "e52":c="\n Ctrl: Type";break;case "e53":c="Shift: Type";break;case "e54":c="Shift: Type\nCtrl: Rotate";break;case "e55":c=
"Shift: Type\nCtrl: Rotate";break;case "e58":c="\n Ctrl: Rotate";break;case "e62":case "e63":case "e64":case "e65":c="Shift: Rotate\n Ctrl: Mirror";break;case "e69":c="Shift: Walk/Shell/Wings\n Ctrl: Mirror";break;case "e70":c="Shift: Walk/Slide\n Ctrl: Mirror";break;case "e71":c="Shift: Walk/Shell/Wings\n Ctrl: Mirror";break;case "e72":case "e74":c="\n Ctrl: Mirror";break;case "e81":case "e82":c="Shift: Type\n Ctrl: Rotate";break;case "e83":c="Shift: Type\n Ctrl: Mirror";break;case "e86":c="Shift: Big/Small\n Ctrl: Mirror";
break;case "e87":c="Shift: Detonated\n Ctrl: Mirror";break;case "e88":c="To attach, place in the opposite layer of a post! SHIFT/CTRL: add/remove chains";break;case "e90":c="Shift: Size\n Ctrl: Mirror";break;case "e92":c="Shift: Fire/Ice\n Ctrl: Mirror";break;case "e93":c="\n Ctrl: Mirror";break;case "e99":case "e100":c="Shift: Size\n Ctrl: Color";break;case "e120":c="Shift: Crack\n Ctrl: Mirror"}e.callFunction("createText",16,432,"customizationTooltip",c,608,32,0,0,1,0)}
function updatePowerup(e,d){e.globalVars.powerUp=d;e.callFunction("updateAnimation");1==e.globalVars.previousPowerUp&&2>e.globalVars.inventoryItem&&setInventory(e,e.globalVars.previousPowerUp);1<e.globalVars.previousPowerUp&&setInventory(e,e.globalVars.previousPowerUp)}
function updateInventory(e){1==e.globalVars.inventoryEnabled&&(e.callFunction("clearInventory"),e.callFunction("spawnObject","none mushroom fireFlower superLeaf hammerFlower cloudFlower iceFlower penguinSuit blueShell carrot tanookiSuit superballFlower frogSuit".split(" ")[e.globalVars.previousPowerUp],320,40,"HUD",0,"setToInventory"))}
function setInventory(e,d){1==e.globalVars.inventoryEnabled&&(e.callFunction("clearInventory"),e.callFunction("spawnObject","none mushroom fireFlower superLeaf hammerFlower cloudFlower iceFlower penguinSuit blueShell carrot tanookiSuit superballFlower frogSuit".split(" ")[d],320,40,"HUD",0,"setToInventory"),e.globalVars.inventoryItem=d)}function marioHitBlock(e){e=e.objects.Mario.getFirstPickedInstance();e.instVars.isUnderwater&&(e.behaviors.Platform.vectorY=256)};