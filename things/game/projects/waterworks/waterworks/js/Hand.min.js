class Hand{constructor(g){_defineProperty(this,"drawSound",card=>{card.soundDraw.play({mute:!1,volume:1,rate:1,detune:400*Math.random()-200,seek:0,loop:!1,delay:0})}),_defineProperty(this,"drawCard",number=>{if(this.game.isUpdatingHand=!0,this.game.isDrawingCards=!0,this.game.updateLocks(),0==this.game.deck.stack.length)return this.game.deck.shuffle(),!1;var delmod=0;this.game.deck.stack.length-1>number&&(delmod=5-number);for(var i=0;i<number;i++){var card=this.game.deck.pullCard();if(null==card){number-=i;break}var delay=this.addCard(card);0!=this.game.deck.stack.length&&i!=number-1||setTimeout(this.game.deck.updateStack,250*i),setTimeout(this.drawSound,250*(i+delmod),this.cards[i])}return this.game.deck.updateDeckNumber(),this.positionCards(),this.updatePriceAvailability(),!0}),_defineProperty(this,"addCard2",(card,x,y)=>{this.cards.push(new Card(this,card)),this.cards[this.cards.length-1].card.x=x,this.cards[this.cards.length-1].card.y=y,this.cards[this.cards.length-1].card.scaleX=.75,this.cards[this.cards.length-1].card.scaleY=.75,this.cards[this.cards.length-1].shrink()}),_defineProperty(this,"addCard",card=>{this.cards.push(new Card(this,card)),this.cards[this.cards.length-1].card.x=0+CARD_WIDTH/2+1,this.cards[this.cards.length-1].card.y=GAME_HEIGHT-20,this.cards[this.cards.length-1].card.scaleX=.75,this.cards[this.cards.length-1].card.scaleY=.75;var num=this.cards.length;return this.game.deck.stack.length<=5-num&&(num=5-this.game.deck.stack.length),this.cards[this.cards.length-1].delay=250*(5-num),250*(5-num)}),_defineProperty(this,"discardHand",toDiscarded=>{for(this.game.isUpdatingHand=!0,this.game.updateLocks();this.cards.length>0;){setTimeout((function(t){t.discardSound.play()}),400,this);var card=this.cards.shift();card.card.setDepth(LAYER_CARD),card.sourceX=GAME_WIDTH-CARD_WIDTH,card.sourceY=GAME_HEIGHT+CARD_SMALL_HEIGHT/2,card.easing="Back.In",card.onComplete=function(){this.game.deck.updateDiscarded(),this.destroy(!1)},1==toDiscarded?(this.game.deck.discarded.push(card.id),card.positionCard(250+100*this.cards.length,1,!1)):card.positionCard(1,1,!1)}}),_defineProperty(this,"setY",y=>{for(var i=0;i<this.cards.length;i++)this.cards[i].sourceY=y,this.cards[i].positionCard(100+100*i,0,!1)}),_defineProperty(this,"positionCards",()=>{this.game.isUpdatingHand=!0,this.game.updateLocks();var compressionFactor=.8-.2*(this.cards.length-5);compressionFactor<.75&&(compressionFactor=.75),compressionFactor>1.25&&(compressionFactor=1.25);for(var w=CARD_WIDTH*compressionFactor,l=this.cards.length,i=0;i<this.cards.length;i++)this.cards[i].sourceX=GAME_WIDTH/2+w*(.5+i-l/2),this.cards[i].positionCard(250+100*i,0,0==i),this.cards[i].updateLanguage();0==this.cards.length&&(this.game.isUpdatingHand=!1,this.game.updateLocks()),this.game.updateDrawerCards()}),_defineProperty(this,"sortCards",()=>{for(var i=0;i<this.cards.length;i++)this.cards[i].card.y<this.cards[i].sourceY?this.cards[i].card.setDepth(LAYER_CARD_DRAG+i):this.cards[i].card.setDepth(LAYER_CARD+i);null!=this.selectedCard&&this.selectedCard.card.setDepth(LAYER_CARD_DRAG)}),_defineProperty(this,"setSelectedCard",()=>{this.selectedCard=null;for(var i=0;i<this.cards.length;i++)1==this.cards[i].selected&&(this.selectedCard=this.cards[i])}),_defineProperty(this,"setCardsEnabled",value=>{for(var i=0;i<this.cards.length;i++)this.cards[i].setEnabled(value);if(this.game.drawer1)for(var i=0;i<this.game.drawer1.slots.length;i++)null!=this.game.drawer1.slots.card&&this.game.drawer1.slots.card.setEnabled(value);if(this.game.drawer2)for(var i=0;i<this.game.drawer2.slots.length;i++)null!=this.game.drawer2.slots.card&&this.game.drawer2.slots.card.setEnabled(value);if(this.game.drawer3)for(var i=0;i<this.game.drawer3.slots.length;i++)null!=this.game.drawer3.slots.card&&this.game.drawer3.slots.card.setEnabled(value)}),_defineProperty(this,"cardIsInHand",card=>{for(var i=0;i<this.cards.length;i++)if(this.cards[i]==card)return!0;return!1}),_defineProperty(this,"removeCardFromHand",card=>{for(var i=0;i<this.cards.length;i++)if(this.cards[i]==card)return this.cards.splice(i,1),void this.positionCards()}),_defineProperty(this,"removeCardsFromHandById",(id,destroy)=>{for(var result=0,i=0;i<this.cards.length;i++)if(this.cards[i].id==id){var removedCard=this.cards.splice(i,1)[0];i--,result++,destroy&&removedCard.destroy(!1)}return this.positionCards(),result}),_defineProperty(this,"updatePriceAvailability",()=>{for(var i=0;i<this.cards.length;i++)null!=this.cards[i]&&this.cards[i].updatePriceAvailability()}),_defineProperty(this,"flyFakeCard",(x1,y1,scale1,x2,y2,scale2,time1,time2,delay1,delay2,ease,initAlpha,alphaTime)=>{var fakeCard=this.phaser.add.sprite(0,0,"card_atlas","back1");fakeCard.x=x1,fakeCard.y=y1,fakeCard.scale=scale1,fakeCard.setDepth(LAYER_CARD-10),fakeCard.alpha=initAlpha,null!=alphaTime&&null!=alphaTime||(alphaTime=0),this.phaser.tweens.add({targets:fakeCard,alpha:1,delay:delay1,duration:alphaTime}),this.phaser.tweens.add({targets:fakeCard,scale:scale2,delay:delay1,ease:ease,duration:time1}),this.phaser.tweens.add({targets:fakeCard,alpha:1,duration:time2,delay:delay2,onComplete:function(){this.game.deck.updateStack()},onCompleteScope:this}),this.phaser.tweens.add({targets:fakeCard,x:x2,y:y2,ease:ease,duration:time2,delay:delay2,onComplete:function(){this.targets[0].destroy()}})}),_defineProperty(this,"flyFakeCard2",(x1,y1,scale1,x2,y2,scale2,time1,time2,delay1,delay2,ease,initAlpha,alphaTime)=>{var fakeCard=this.phaser.add.sprite(0,0,"card_atlas","back1");fakeCard.x=x1,fakeCard.y=y1,fakeCard.scale=scale1,fakeCard.setDepth(LAYER_CARD-10),fakeCard.alpha=initAlpha,null!=alphaTime&&null!=alphaTime||(alphaTime=0),this.phaser.tweens.add({targets:fakeCard,alpha:1,delay:delay1,duration:alphaTime}),this.phaser.tweens.add({targets:fakeCard,scale:scale2,delay:delay1,ease:ease,duration:time1}),this.phaser.tweens.add({targets:fakeCard,alpha:1,duration:time2,delay:delay2,onComplete:function(){},onCompleteScope:this}),this.phaser.tweens.add({targets:fakeCard,x:x2,y:y2,ease:ease,duration:time2,delay:delay2,onComplete:function(){this.targets[0].destroy()}})}),this.game=g,this.phaser=this.game.phaser;var self=this;this.cards=[],this.selectedCard=null,this.a=0,this.discardSound=this.phaser.sound.add("slide"),this.dealSound=[this.phaser.sound.add("deal1"),this.phaser.sound.add("deal2"),this.phaser.sound.add("deal3"),this.phaser.sound.add("deal4"),this.phaser.sound.add("deal5")],this.phaser.input.on("pointerdown",(function(pointer,gameObject,event){}))}}