const config={type:Phaser.WEBGL,width:640,height:360,parent:"game",fps:60,timeScale:1,backgroundColor:"#1b2632",zoom:1,scaleMode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,disableContextMenu:!0,pixelArt:!0,parent:"waterworks",pageAlignHorizontally:!0,pageAlignVertically:!0,scene:{preload:preload,create:create,update:update}};var game;function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}_defineProperty(this,"unpaused",()=>{this.gc&&(this.gc.paused=!1)}),_defineProperty(this,"paused",()=>{this.gc&&(this.gc.paused=!0)}),_defineProperty(this,"runGame",()=>{(game=new Phaser.Game(config)).onBlur=this.paused,game.onFocus=this.unpaused,game.ontouchend=e=>{e.preventDefault()}});var GAME_VERSION="1.1.5",ng=!1,ngio;-1==window.location.hostname.indexOf("newgrounds.com")&&-1==window.location.hostname.indexOf("ungrounded.net")||(ng=!0);try{ngio=new Newgrounds.io.core("50594:6NeZHUWS","CSESZK53IrbZy4bMJKbCwA==")}catch{}var medals=[],CARD_TARGET_BLOCK="block",CARD_TARGET_STREET="street",CARD_TARGET_NODE="node",CARD_TARGET_CONSTRUCTION="construction",CARD_TARGET_GLOBAL="global",CARD_TYPE_WORKER="worker",CARD_TYPE_COMPONENT="component",CARD_TYPE_DOCUMENT="document",CARD_DRAG_DIST_BEFORE_COLLAPSE=25,CARD_SMALL_HEIGHT=65,CARD_BIG_HEIGHT=140,CARD_WIDTH=100,CARD_HAND_ENABLED_Y=360,CARD_HAND_DISABLED_Y=400,STACK_HEIGHT=138,STACK_WIDTH=98,DECK_Y_SHIFT=105,CONSTRUCTION_CARDS_MARGIN_LEFT=268,CONSTRUCTION_CARDS_MARGIN_TOP=12,CONSTRUCTION_CARDS_MARGIN=6,CONSTRUCTION_CARDS_SPACE=320,CONSTRUCTION_CARDS_PER_ROW=3,DRAWER_CARDS_MARGIN_LEFT=16,DRAWER_CARDS_PER_ROW=4,DRAWER_CARDS_PER_LEVEL=4,DRAWER_CARDS_MARGIN=2,DRAWER_CARDS_MARGIN_TOP=20,GAME_WIDTH=config.width,GAME_HEIGHT=config.height,ZOOM_TWEEN_1=150,POPUP_Y=125,POPUP_Y2=170,LAYER_FIRE=800,LAYER_SUPPLY_DEMAND=900,LAYER_GUI_LOW=1e3,LAYER_CONSTRUCTION=1200,LAYER_CURTAIN=1250,LAYER_CONSTRUCTION_ACTIVE=1300,LAYER_MONEY_INF_COUNTER=1400,LAYER_DRAWER_CLOSED=1500,LAYER_CARD=1550,LAYER_DRAWER_OPEN=1600,LAYER_GUI=2e3,LAYER_GUI_ACTIVE=2100,LAYER_PARTICLES=2300,LAYER_CARD_DRAG=2400,LAYER_TUTORIAL=2500,LAYER_GUI_MAIN=2600,LAYER_GUI_OPTIONS=2700,LAYER_POPUP=3e3,LAYER_TOOLTIP=4e3,WATER_SOURCE=16,PP_LEV_AGE_1=1,PP_LEV_AGE_2=2,PP_LEV_AGE_3=3,PP_INC_AGE_1=1,PP_INC_AGE_2=2,PP_INC_AGE_3=3,ACH_COINS_TO_COLLECT=5e3,ACH_TIME_LIMIT=130,ACH_REQUESTS_TO_MAKE=20,ACH_PERFECT_TURNS=3,privacy_popup,privacy_text,privacy_text2,privacy_link,privacy_link2,privacy_accept,privacy_pl_flag,privacy_en_flag,self;function preload(){var progressBar=this.add.graphics(),progressBox=this.add.graphics();progressBox.fillStyle(2236962,.8),progressBox.fillRect(GAME_WIDTH/2-160,GAME_HEIGHT/2+50,320,50);var width=this.cameras.main.width,height=this.cameras.main.height,loadingText=this.make.text({x:width/2,y:height/2-50,text:"Loading...",style:{font:"20px monospace",fill:"#ffffff"}});loadingText.setOrigin(.5,.5);var percentText=this.make.text({x:width/2,y:height/2-5,text:"0%",style:{font:"18px monospace",fill:"#ffffff"}});percentText.setOrigin(.5,.5);var assetText=this.make.text({x:width/2,y:height/2+50,text:"",style:{font:"18px monospace",fill:"#ffffff"}});assetText.setOrigin(.5,.5),this.load.on("progress",(function(value){percentText.setText(parseInt(100*value)+"%"),progressBar.clear(),progressBar.fillStyle(16777215,1),progressBar.fillRect(GAME_WIDTH/2-160+10,GAME_HEIGHT/2+60,300*value,30)})),this.load.on("fileprogress",(function(file){})),this.load.on("complete",(function(){progressBar.destroy(),progressBox.destroy(),loadingText.destroy(),percentText.destroy(),assetText.destroy()})),this.load.setPath("waterworks/"),this.load.image("pixel","assets/pixel.png"),this.load.image("shade","assets/shade.png"),this.load.image("shadeRed","assets/shade_red.png"),this.load.image("shadeYellow","assets/shade_yellow.png"),this.load.image("shadeGreen","assets/shade_green.png"),this.load.image("logo","assets/scriptwelder.png"),this.load.image("global_target","assets/global_target.png"),this.load.image("castle","assets/town/castle.png"),this.load.image("bottom","assets/town/bottom.png"),this.load.image("difficulty","assets/backgrounds/difficulty.png"),this.load.image("background","assets/backgrounds/background.png"),this.load.image("scriptwelder","assets/backgrounds/scriptwelder.png"),this.load.image("black","assets/backgrounds/black.png"),this.load.image("sponsors","assets/backgrounds/sponsors.png"),this.load.image("title","assets/backgrounds/title.png"),this.load.image("credits","assets/backgrounds/credits.png"),this.load.image("gameover","assets/backgrounds/gameover.png"),this.load.image("victory","assets/backgrounds/victory.png"),this.load.image("victory2","assets/backgrounds/victory2.png"),this.load.image("achievements","assets/backgrounds/achievements.png"),this.load.atlas("card_atlas","assets/cards/card.png","assets/cards/card.json"),this.load.atlas("logos","assets/logos.png","assets/logos.json"),this.load.atlas("achievs","assets/achievs.png","assets/achievs.json"),this.load.atlas("lang","assets/lang.png","assets/lang.json"),this.load.atlas("gui","assets/gui.png","assets/gui.json"),this.load.atlas("pictures","assets/cards/pictures.png","assets/cards/pictures.json"),this.load.atlas("fire","assets/town/fire.png","assets/town/fire.json"),this.load.atlas("constructions","assets/cards/constructions.png","assets/cards/constructions.json"),this.load.atlas("stable","assets/town/stable.png","assets/town/stable.json"),this.load.atlas("town_walls","assets/town/walls.png","assets/town/walls.json"),this.load.atlas("town_blocks_atlas","assets/town/town_blocks.png","assets/town/town_blocks.json"),this.load.atlas("town_pipes_atlas","assets/town/town_pipes.png","assets/town/town_pipes.json"),this.load.atlas("town_nodes_atlas","assets/town/town_nodes.png","assets/town/town_nodes.json"),this.load.atlas("town_buildings_atlas","assets/town/town_buildings.png","assets/town/town_buildings.json"),this.load.atlas("town_shadows_atlas","assets/town/town_shadows.png","assets/town/town_shadows.json"),this.load.atlas("town_roads_atlas","assets/town/town_roads.png","assets/town/town_roads.json"),this.load.atlas("mill_atlas","assets/town/mill.png","assets/town/mill.json"),this.load.atlas("water_source","assets/town/water_source.png","assets/town/water_source.json"),this.load.atlas("water_source2","assets/town/water_source2.png","assets/town/water_source2.json"),this.load.atlas("river1_atlas","assets/town/river1.png","assets/town/river1.json"),this.load.atlas("river2_atlas","assets/town/river2.png","assets/town/river2.json"),this.load.atlas("waterunderthebridge","assets/town/waterunderthebridge.png","assets/town/waterunderthebridge.json"),this.load.atlas("boats","assets/units/boats.png","assets/units/boats.json"),this.load.atlas("horse_atlas","assets/units/horse.png","assets/units/horse.json"),this.load.atlas("wagon_atlas","assets/units/wagon.png","assets/units/wagon.json"),this.load.atlas("hanginghorse_atlas","assets/units/hanginghorse.png","assets/units/hanginghorse.json"),this.load.atlas("carrier_atlas","assets/units/carrier.png","assets/units/carrier.json"),this.load.atlas("well_power","assets/town/wellpower.png","assets/town/wellpower.json"),this.load.atlas("waterworks","assets/town/waterworks.png","assets/town/waterworks.json"),this.load.atlas("menu","assets/menu.png","assets/menu.json"),this.load.atlas("water_road","assets/town/water_road.png","assets/town/water_road.json"),this.load.bitmapFont("numbers_font","assets/fonts/numbers_font.png","assets/fonts/numbers_font.xml"),this.load.bitmapFont("numbers_font_green","assets/fonts/numbers_font_green.png","assets/fonts/numbers_font_small.xml"),this.load.bitmapFont("numbers_font_red","assets/fonts/numbers_font_red.png","assets/fonts/numbers_font_small.xml"),this.load.bitmapFont("numbers_font_white","assets/fonts/numbers_font_white.png","assets/fonts/numbers_font_small.xml"),this.load.bitmapFont("text_gray","assets/fonts/tinyunicode_gray.png","assets/fonts/tinyunicode.xml"),this.load.bitmapFont("text_brown","assets/fonts/tinyunicode_brown.png","assets/fonts/tinyunicode.xml"),this.load.bitmapFont("text_black","assets/fonts/tinyunicode_black.png","assets/fonts/tinyunicode.xml"),this.load.bitmapFont("text_white","assets/fonts/tinyunicode_white.png","assets/fonts/tinyunicode.xml"),this.load.bitmapFont("text_white2","assets/fonts/tinyunicode_white2.png","assets/fonts/tinyunicode.xml"),this.load.audio("drawer_open",["assets/sounds/drawer_open.ogg","assets/sounds/drawer_open.mp3"]),this.load.audio("drawer_close",["assets/sounds/drawer_close.ogg","assets/sounds/drawer_close.mp3"]),this.load.audio("achiv",["assets/sounds/achiv.ogg","assets/sounds/achiv.mp3"]),this.load.audio("notify",["assets/sounds/notify.ogg","assets/sounds/notify.mp3"]),this.load.audio("demand",["assets/sounds/demand.ogg","assets/sounds/demand.mp3"]),this.load.audio("infl_gain",["assets/sounds/infl_gain.ogg","assets/sounds/infl_gain.mp3"]),this.load.audio("infl_lose",["assets/sounds/infl_lose.ogg","assets/sounds/infl_lose.mp3"]),this.load.audio("infl_neutral",["assets/sounds/infl_neutral.ogg","assets/sounds/infl_neutral.mp3"]),this.load.audio("infl",["assets/sounds/infl.ogg","assets/sounds/infl.mp3"]),this.load.audio("ui_hover",["assets/sounds/ui_hover.ogg","assets/sounds/ui_hover.mp3"]),this.load.audio("click",["assets/sounds/click.ogg","assets/sounds/click.mp3"]),this.load.audio("click2",["assets/sounds/click2.ogg","assets/sounds/click2.mp3"]),this.load.audio("fireloop",["assets/sounds/fireloop.ogg","assets/sounds/fireloop.mp3"]),this.load.audio("fire",["assets/sounds/fire.ogg","assets/sounds/fire.mp3"]),this.load.audio("bird",["assets/sounds/bird.ogg","assets/sounds/bird.mp3"]),this.load.audio("crow",["assets/sounds/crow.ogg","assets/sounds/crow.mp3"]),this.load.audio("nailed",["assets/sounds/nailed.ogg","assets/sounds/nailed.mp3"]),this.load.audio("cart",["assets/sounds/sweep.ogg","assets/sounds/cart.mp3"]),this.load.audio("sweep",["assets/sounds/sweep.ogg","assets/sounds/sweep.mp3"]),this.load.audio("scribble",["assets/sounds/scribble.ogg","assets/sounds/scribble.mp3"]),this.load.audio("pickaxe",["assets/sounds/pickaxe.ogg","assets/sounds/pickaxe.mp3"]),this.load.audio("wooden",["assets/sounds/wooden.ogg","assets/sounds/wooden.mp3"]),this.load.audio("latch",["assets/sounds/latch.ogg","assets/sounds/latch.mp3"]),this.load.audio("chicken",["assets/sounds/chicken.ogg","assets/sounds/chicken.mp3"]),this.load.audio("market3",["assets/sounds/market3.ogg","assets/sounds/market3.mp3"]),this.load.audio("market2",["assets/sounds/market2.ogg","assets/sounds/market2.mp3"]),this.load.audio("market1",["assets/sounds/market.ogg","assets/sounds/market.mp3"]),this.load.audio("blacksmith",["assets/sounds/blacksmith.ogg","assets/sounds/blacksmith.mp3"]),this.load.audio("kids",["assets/sounds/kids.ogg","assets/sounds/kids.mp3"]),this.load.audio("rooster",["assets/sounds/rooster.ogg","assets/sounds/rooster.mp3"]),this.load.audio("cow",["assets/sounds/cow.ogg","assets/sounds/cow.mp3"]),this.load.audio("wagon1",["assets/sounds/wagon.ogg","assets/sounds/wagon.mp3"]),this.load.audio("wagon2",["assets/sounds/wagon2.ogg","assets/sounds/wagon2.mp3"]),this.load.audio("bells",["assets/sounds/bells.ogg","assets/sounds/bells.mp3"]),this.load.audio("barking",["assets/sounds/barking.ogg","assets/sounds/barking.mp3"]),this.load.audio("fanfare",["assets/sounds/fanfare.ogg","assets/sounds/fanfare.mp3"]),this.load.audio("fail",["assets/sounds/fail.ogg","assets/sounds/fail.mp3"]),this.load.audio("deny",["assets/sounds/deny.ogg","assets/sounds/deny.mp3"]),this.load.audio("river1",["assets/sounds/river1.ogg","assets/sounds/river1.mp3"]),this.load.audio("ambience1",["assets/sounds/ambience1.ogg","assets/sounds/ambience1.mp3"]),this.load.audio("music0",["assets/sounds/music0.ogg","assets/sounds/music0.mp3"]),this.load.audio("music1",["assets/sounds/music1.ogg","assets/sounds/music1.mp3"]),this.load.audio("music2",["assets/sounds/music2.ogg","assets/sounds/music2.mp3"]),this.load.audio("music3",["assets/sounds/music3.ogg","assets/sounds/music3.mp3"]),this.load.audio("splash1",["assets/sounds/splash1.ogg","assets/sounds/splash1.mp3"]),this.load.audio("splash2",["assets/sounds/splash2.ogg","assets/sounds/splash2.mp3"]),this.load.audio("clock",["assets/sounds/clock.ogg","assets/sounds/clock.mp3"]),this.load.audio("construction",["assets/sounds/construction.ogg","assets/sounds/construction.mp3"]),this.load.audio("paper1",["assets/sounds/paper1.ogg","assets/sounds/paper1.mp3"]),this.load.audio("paper2",["assets/sounds/paper2.ogg","assets/sounds/paper2.mp3"]),this.load.audio("buy",["assets/sounds/buy.ogg","assets/sounds/buy.mp3"]),this.load.audio("coin",["assets/sounds/coin.ogg","assets/sounds/coin.mp3"]),this.load.audio("slide",["assets/sounds/slide1.ogg","assets/sounds/slide1.mp3"]),this.load.audio("shuffle",["assets/sounds/shuffle.ogg","assets/sounds/shuffle.mp3"]),this.load.audio("return",["assets/sounds/return.ogg","assets/sounds/return.mp3"]),this.load.audio("complete",["assets/sounds/complete.ogg","assets/sounds/complete.mp3"]),this.load.audio("incomegain",["assets/sounds/incomegain.ogg","assets/sounds/incomegain.mp3"]);for(var i=1;i<=6;i++)this.load.audio("deal"+i,["assets/sounds/deal"+i+".ogg","assets/sounds/deal"+i+".mp3"]);for(var i=1;i<=5;i++)this.load.audio("bigdrip"+i,["assets/sounds/bigdrip"+i+".ogg","assets/sounds/bigdrip"+i+".mp3"]);for(var i=1;i<=3;i++)this.load.audio("drip"+i,["assets/sounds/drip"+i+".ogg","assets/sounds/drip"+i+".mp3"]);this.load.audio("pop",["assets/sounds/pop1.ogg","assets/sounds/pop1.mp3"]),this.load.xml("cards","assets/cards.xml"),this.load.xml("town_map","assets/town_map.xml"),this.load.xml("walkers","assets/walkers.xml"),this.load.xml("constructions","assets/constructions.xml"),this.load.xml("strings_en","assets/strings_en.xml"),this.load.xml("strings_pl","assets/strings_pl.xml")}function launchGame(){gameanalytics.GameAnalytics.setEnabledInfoLog(!0),gameanalytics.GameAnalytics.setEnabledVerboseLog(!0),gameanalytics.GameAnalytics.configureBuild(GAME_VERSION),gameanalytics.GameAnalytics.initialize("1aea875256d81114647ff4fe6cf4603e","f0fb5da738d99154a52adeedd0dae5c957b341a3"),ng&&ngio&&ngio.getValidSession((function(){ngio.user&&(ngio.queueComponent("Medal.getList",{},onMedalsLoaded),ngio.executeQueue())})),self.blackness=self.add.image(320,180,"black"),self.scriptwelder=self.add.image(320,180,"scriptwelder"),self.sponsors=self.add.image(320,180,"sponsors"),self.scriptwelder.alpha=0,self.sponsors.alpha=0,self.tweens.add({targets:self.scriptwelder,ease:"Cubic.InOut",alpha:1,duration:500,delay:500}),self.tweens.add({targets:self.scriptwelder,ease:"Cubic.InOut",alpha:0,duration:500,delay:2e3}),self.tweens.add({targets:self.sponsors,ease:"Cubic.InOut",alpha:1,duration:500,delay:3e3}),self.tweens.add({targets:self.sponsors,ease:"Cubic.InOut",alpha:0,duration:500,delay:4500,onComplete:startGame,onCompleteScope:self})}function create(){var scene=this;self=this,this.anims.create({key:"fire1",frames:this.anims.generateFrameNames("fire",{prefix:"fire",start:0,end:59}),repeat:-1,frameRate:36}),this.anims.create({key:"fire2",frames:this.anims.generateFrameNames("fire",{prefix:"fire",start:60,end:119}),repeat:-1,frameRate:36}),this.anims.create({key:"fire3",frames:this.anims.generateFrameNames("fire",{prefix:"fire",start:120,end:179}),repeat:-1,frameRate:36}),this.anims.create({key:"fire4",frames:this.anims.generateFrameNames("fire",{prefix:"fire",start:180,end:239}),repeat:-1,frameRate:36}),this.anims.create({key:"boat1",frames:this.anims.generateFrameNames("boats",{prefix:"boats",start:0,end:15}),repeat:-1,frameRate:12}),this.anims.create({key:"boat2",frames:this.anims.generateFrameNames("boats",{prefix:"boats",start:17,end:38}),repeat:-1,frameRate:12}),this.anims.create({key:"boat3",frames:this.anims.generateFrameNames("boats",{prefix:"boats",start:63,end:84}),repeat:-1,frameRate:12}),this.anims.create({key:"boat4",frames:this.anims.generateFrameNames("boats",{prefix:"boats",start:40,end:61}),repeat:-1,frameRate:12}),this.anims.create({key:"boat5",frames:this.anims.generateFrameNames("boats",{prefix:"boats",start:86,end:107}),repeat:-1,frameRate:12}),this.anims.create({key:"waterunderthebridge1",frames:this.anims.generateFrameNames("waterunderthebridge",{prefix:"waterunderthebridge",start:0,end:15}),repeat:-1,frameRate:12}),this.anims.create({key:"waterunderthebridge2",frames:this.anims.generateFrameNames("waterunderthebridge",{prefix:"waterunderthebridge",start:16,end:31}),repeat:-1,frameRate:12}),this.anims.create({key:"mill1",frames:this.anims.generateFrameNames("mill_atlas",{prefix:"mill",start:0,end:15}),repeat:-1,frameRate:12}),this.anims.create({key:"mill2",frames:this.anims.generateFrameNames("mill_atlas",{prefix:"mill",start:16,end:31}),repeat:-1,frameRate:12}),this.anims.create({key:"water_source",frames:this.anims.generateFrameNames("water_source",{prefix:"water_source",start:0,end:39}),repeat:-1,frameRate:12}),this.anims.create({key:"water_source2",frames:this.anims.generateFrameNames("water_source2",{prefix:"water_source2",start:0,end:39}),repeat:-1,frameRate:12}),this.anims.create({key:"flow1",frames:this.anims.generateFrameNames("river1_atlas",{prefix:"river",start:0,end:31}),repeat:-1,frameRate:12}),this.anims.create({key:"flow2",frames:this.anims.generateFrameNames("river2_atlas",{prefix:"river",start:0,end:31}),repeat:-1,frameRate:12}),this.anims.create({key:"horse_walk_right",frames:this.anims.generateFrameNames("horse_atlas",{prefix:"horse",start:0,end:23}),repeat:-1,frameRate:12}),this.anims.create({key:"horse_walk_down",frames:this.anims.generateFrameNames("horse_atlas",{prefix:"horse",start:24,end:31}),repeat:-1,frameRate:12}),this.anims.create({key:"horse_walk_up",frames:this.anims.generateFrameNames("horse_atlas",{prefix:"horse",start:32,end:39}),repeat:-1,frameRate:12}),this.anims.create({key:"horse_stand",frames:this.anims.generateFrameNames("horse_atlas",{prefix:"horse",start:40,end:93}),repeat:-1,frameRate:12}),this.anims.create({key:"horse_hanging",frames:this.anims.generateFrameNames("hanginghorse_atlas",{prefix:"hanginghorse",start:0,end:15}),repeat:-1,frameRate:12}),this.anims.create({key:"wagon_walk_right",frames:this.anims.generateFrameNames("wagon_atlas",{prefix:"wagon",start:0,end:23}),repeat:-1,frameRate:12}),this.anims.create({key:"wagon_walk_down",frames:this.anims.generateFrameNames("wagon_atlas",{prefix:"wagon",start:24,end:31}),repeat:-1,frameRate:12}),this.anims.create({key:"wagon_walk_up",frames:this.anims.generateFrameNames("wagon_atlas",{prefix:"wagon",start:32,end:39}),repeat:-1,frameRate:12}),this.anims.create({key:"carrier_walk_right",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:0,end:23}),repeat:-1,frameRate:10}),this.anims.create({key:"carrier_hanging",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:24,end:47}),repeat:-1,frameRate:10}),this.anims.create({key:"carrier_walk_up",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:48,end:71}),repeat:-1,frameRate:10}),this.anims.create({key:"carrier_walk_down",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:72,end:95}),repeat:-1,frameRate:10}),this.anims.create({key:"cart_walk_right",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:96,end:119}),repeat:-1,frameRate:10}),this.anims.create({key:"cart_walk_up",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:120,end:143}),repeat:-1,frameRate:10}),this.anims.create({key:"cart_walk_down",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:144,end:167}),repeat:-1,frameRate:10}),this.anims.create({key:"cart_hanging",frames:this.anims.generateFrameNames("carrier_atlas",{prefix:"carrier",start:168,end:191}),repeat:-1,frameRate:10}),this.anims.create({key:"hourglass_anim",frames:this.anims.generateFrameNames("gui",{prefix:"hourglass_anim",start:1,end:10}),repeat:0,frameRate:10}),this.anims.create({key:"waterworks1",frames:this.anims.generateFrameNames("waterworks",{prefix:"waterworks",start:0,end:15}),repeat:-1,frameRate:12}),this.anims.create({key:"waterworks2",frames:this.anims.generateFrameNames("waterworks",{prefix:"waterworks",start:17,end:32}),repeat:-1,frameRate:12}),this.anims.create({key:"waterworks3",frames:this.anims.generateFrameNames("waterworks",{prefix:"waterworks",start:34,end:49}),repeat:-1,frameRate:12}),this.anims.create({key:"waterworks4",frames:this.anims.generateFrameNames("waterworks",{prefix:"waterworks",start:51,end:66}),repeat:-1,frameRate:12}),this.anims.create({key:"waterworks5",frames:this.anims.generateFrameNames("waterworks",{prefix:"waterworks",start:51,end:66}),repeat:-1,frameRate:12});var failed=!1;if(0==isLocalStorage())failed=!0;else{var privacyObject=localStorage.getItem("scriptwelder_waterworks_privacy");if(privacyObject)failed="true"!=(privacyObject=JSON.parse(privacyObject)).consent;else{failed=!0;try{var sO=localStorage.getItem("privacy");sO&&null!=(sO=JSON.parse(sO))&&"true"==sO.consent&&(failed=!1,localStorage.removeItem("privacy"),localStorage.setItem("scriptwelder_waterworks_privacy",JSON.stringify(sO)))}catch(error){console.warn(error)}}}if(failed){privacy_popup=this.add.image(320,180,"gui","options");var obj=new Object;obj.phaser=this,privacy_accept=new Button(obj,"v","v_glow","gui",acceptFunction),(privacy_link=this.add.image(320,98,"gui","options_bar")).displayWidth=90,(privacy_link2=this.add.image(320,215,"gui","options_bar")).displayWidth=60,privacy_pl_flag=this.add.image(320,42,"lang","pls"),privacy_en_flag=this.add.image(320,159,"lang","ens"),privacy_text=this.add.bitmapText(320,45,"text_brown",getString("en","privacy_policy","splash","string")),(privacy_text2=this.add.bitmapText(325,285,"text_brown",getString("en","privacy_policy","splash","accept"))).setOrigin(0,0),privacy_text.setOrigin(.5,0),privacy_text.align=1,privacy_text.setMaxWidth(160),privacy_accept.setPosition(300,298),privacy_link.setInteractive({cursor:"pointer"}),privacy_link.input.useHandCursor=!0,privacy_link.on("pointerdown",privacyClick),privacy_link2.setInteractive({cursor:"pointer"}),privacy_link2.input.useHandCursor=!0,privacy_link2.on("pointerdown",privacyClick)}else launchGame.call(this)}function privacyClick(){openExternalLink("https://scriptwelder.itch.io/waterworks/devlog/163636/waterworks-privacy-policy")}function acceptFunction(){if(isLocalStorage()){var privacyObject=new Object;privacyObject.consent="true",localStorage.setItem("scriptwelder_waterworks_privacy",JSON.stringify(privacyObject))}privacy_en_flag.destroy(),privacy_pl_flag.destroy(),privacy_link.destroy(),privacy_link2.destroy(),privacy_text.destroy(),privacy_text2.destroy(),privacy_accept.getContent()[0].destroy(),privacy_accept.getContent()[1].destroy(),privacy_accept=null,privacy_popup.destroy(),launchGame()}function onMedalsLoaded(result){result.success&&(medals=result.medals)}function startGame(){this.add.image(320,180,"background"),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.gc=new GameController(this)}function getFirstElementByAttributeValue(xml,attribute,value){for(var i=0;i<xml.length;i++)if(xml[i].getAttribute(attribute)==value)return xml[i];return null}function update(time,delta){this.gc&&this.gc.update(time,delta)}function enableChildren(child){child.input&&(null!=child.previouslyEnabled&&(child.input.enabled=child.previouslyEnabled),child.input.enabled=!0,child.previouslyEnabled=child.input.enabled)}function disableChildren(child){child.input&&(child.previouslyEnabled=child.input.enabled,child.input.enabled=!1)}function getString(language,tag,id,key){var xmlData=game.cache.xml.get("strings_"+language.toLowerCase()).getElementsByTagName(tag);return(xmlData=getFirstElementByAttributeValue(xmlData,"id",id)).getElementsByTagName(key)[0].childNodes[0].nodeValue}function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}function setCharAt(str,index,chr){return index>str.length-1?str:str.substr(0,index)+chr+str.substr(index+1)}function openExternalLink(externalLink){var s=window.open(externalLink,"_blank");s&&s.focus?s.focus():s||(window.location.href=externalLink)}function isLocalStorage(){var result=!1;try{var test=localStorage.getItem("test");result=!0}catch{}return result}