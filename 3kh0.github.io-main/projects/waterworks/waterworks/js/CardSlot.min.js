class CardSlot{constructor(parent,wantType,wantId){_defineProperty(this,"init",(wantType,wantId)=>{this.card=null,this.wantType=wantType,this.wantId=wantId,this.gotCard=!1,this.prepFakeCard(wantId),""!=this.wantType&&(this.wantType==CARD_TYPE_COMPONENT&&(this.slotButton.setTint(425942),this.tooltip="card_resource"),this.wantType==CARD_TYPE_WORKER&&(this.slotButton.setTint(16758297),this.tooltip="card_worker"),this.wantType==CARD_TYPE_DOCUMENT&&(this.slotButton.setTint(13849659),this.tooltip="card_document")),this.slotButton.alpha=.5,this.wantId,this.show()}),_defineProperty(this,"prepFakeCard",wantId=>{null!=this.fakeCard&&this.fakeCard.destroy(),this.wantId=wantId,""!=this.wantId&&(this.fakeCard=new Card(this.game.hand,this.wantId),this.fakeCard.card.input.enabled=!1,this.fakeCard.card.previouslyEnabled=!1,this.fakeCard.card.alpha=.5,this.fakeCard.shrink(),this.parent&&this.parent.container&&(this.parent.container.remove([this.slotButton,this.checkmark,this.glow]),this.parent.container.add([this.fakeCard.card,this.slotButton,this.checkmark,this.glow])))}),_defineProperty(this,"position",(x,y)=>{this.slotButton.x=x,this.slotButton.y=y,null!=this.fakeCard&&(this.fakeCard.card.x=x+CARD_WIDTH/2,this.fakeCard.card.y=y+CARD_BIG_HEIGHT/2),this.checkmark.x=this.slotButton.x+this.slotButton.width-.9*this.checkmark.width+3,this.checkmark.y=this.slotButton.y+this.slotButton.height-.9*this.checkmark.height,this.glow.x=this.slotButton.x-2,this.glow.y=this.slotButton.y-2}),_defineProperty(this,"getContent",()=>null==this.fakeCard?[this.slotButton,this.checkmark,this.glow]:[this.fakeCard.card,this.slotButton,this.checkmark,this.glow]),_defineProperty(this,"grabACard",card=>{1==this.reclaimable?(this.card=card,null==this.card.selectedSpot&&(this.card.selectedSpot=this),this.card.card.x=this.card.selectedSpot.slotButton.x+CARD_WIDTH/2,this.card.card.y=this.card.selectedSpot.slotButton.y+CARD_BIG_HEIGHT/2,this.card.sourceX=this.card.card.x,this.card.sourceY=this.card.card.y,this.card.card&&this.card.card.input&&(this.card.card.input.enabled=!0),this.parent.container.add(this.card.card),this.game.updateDrawersCounters()):(this.gotCard=!0,this.show(),this.game.selectedSpot=null,""==this.wantId&&(this.wantId=card.id,this.prepFakeCard(card.id),this.position(this.slotButton.x,this.slotButton.y),this.fakeCard.card.alpha=1),this.game.updatePriceAvailability(),this.game.construction.autoOpened&&(this.game.construction.autoOpened=!1),this.game.request.autoOpened&&(this.game.request.autoOpened=!1)),null!=this.actionAfterGrab&&this.actionAfterGrab.call()}),_defineProperty(this,"takeMyCardAway",()=>{this.card=null,null!=this.actionAfterPull&&this.actionAfterPull.call(),this.game.updateDrawersCounters()}),_defineProperty(this,"hide",()=>{this.slotButton.input.enabled=!1,this.checkmark.visible=!1,this.glow.visible=!1,null!=this.slotButton&&(this.slotButton.visible=!1),null!=this.fakeCard&&(this.fakeCard.card.visible=!1)}),_defineProperty(this,"show",()=>{this.checkmark.visible=!1,null!=this.slotButton&&(this.slotButton.input.enabled=!0,this.slotButton.visible=!0,this.slotButton.alpha=.5,0==this.reclaimable&&this.gotCard&&(this.slotButton.alpha=.1)),null!=this.fakeCard&&(this.fakeCard.card.visible=!0,this.fakeCard.card.alpha=.5,0==this.reclaimable&&this.gotCard&&null!=this.fakeCard.card&&(this.fakeCard.card.alpha=1,null!=this.fakeCard.card.input&&(this.fakeCard.card.input.enabled=!1))),0==this.reclaimable&&this.gotCard&&(this.checkmark.visible=!0,this.slotButton.input.enabled=!1)}),this.game=parent.game,this.phaser=this.game.phaser;var self=this;this.card=null,this.fakeCard=null,this.gotCard=!1,this.wantType="",this.wantId="",this.slotButton=this.phaser.add.image(0,0,"gui","card_slot"),this.slotButton.setOrigin(0),this.tooltip="",this.parent=parent,this.reclaimable=!1,this.actionAfterGrab=null,this.actionAfterPull=null,this.checkmark=this.phaser.add.image(0,0,"gui","construction_slot_filled"),this.glow=this.phaser.add.image(0,0,"card_atlas","card_selection_small"),this.checkmark.setOrigin(0),this.glow.setOrigin(0),this.glow.visible=!1,this.glow.alpha=.5,this.slotButton.setSize(this.slotButton.width,this.slotButton.height),this.slotButton.setInteractive({cursor:"pointer"}),this.phaser.input.on("dragstart",(function(pointer,gameObject){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&null==self.card&&0==self.gotCard&&null!=self.game.selectedItem&&(""==self.wantId&&self.game.selectedItem.playType==self.wantType||self.wantId==self.game.selectedItem.id)&&self.slotButton.visible&&(self.glow.visible=!0)})),this.phaser.input.on("pointerup",(function(pointer,gameObject){0!=self.game.clickMode&&0!=self.game.justSelected||(self.glow.visible=!1)})),this.slotButton.on("pointerover",(function(){null==self.card&&""!=self.tooltip&&self.game.showTooltip(self.tooltip),null==self.card&&null!=self.game.selectedItem&&self.game.selectedItem instanceof Card&&(self.game.selectedSpot=self,self.slotButton.alpha=1,0==self.reclaimable&&self.gotCard&&(self.slotButton.alpha=.1))})),this.slotButton.on("pointerout",(function(){self.game.hideTooltip(),self.game.selectedSpot=null,self.slotButton.alpha=.5,0==self.reclaimable&&self.gotCard&&(self.slotButton.alpha=.1)})),this.init(wantType,wantId)}}