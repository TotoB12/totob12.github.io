class Options{constructor(g,type){_defineProperty(this,"nothing",()=>{}),_defineProperty(this,"restartGame",()=>{this.hide(),this.game.newGame()}),_defineProperty(this,"loadGame",()=>{this.hide(),this.game.loadGame()}),_defineProperty(this,"updateLanguage",()=>{this.labelSound.text=getString(this.game.language,"gui","options_sound","string"),this.labelMusic.text=getString(this.game.language,"gui","options_music","string"),this.labelTutorials.text=getString(this.game.language,"gui","options_tutorials","string"),this.labelFullScreen.text=getString(this.game.language,"gui","options_fullscreen","string"),this.labelLanguage.text=getString(this.game.language,"gui","options_language","string"),this.btnFullScreenOff.text=getString(this.game.language,"gui","options_off","string"),this.btnFullScreenOn.text=getString(this.game.language,"gui","options_on","string"),this.btnMusicMinus.text=getString(this.game.language,"gui","options_off","string"),this.btnMusicPlus.text=getString(this.game.language,"gui","options_on","string"),this.btnTutorialsOff.text=getString(this.game.language,"gui","options_off","string"),this.btnTutorialsOn.text=getString(this.game.language,"gui","options_on","string"),this.game.menu&&this.game.menu.container.visible?(this.btnContinue.text=getString(this.game.language,"gui","options_close","string"),this.btnContinue.tooltip="btn_close_options"):(this.btnContinue.text=getString(this.game.language,"gui","options_continue","string"),this.btnContinue.tooltip="btn_continue"),this.btnLoad.text=getString(this.game.language,"gui","options_load","string"),this.btnRestart.text=getString(this.game.language,"gui","options_restart","string"),this.btnQuit.text=getString(this.game.language,"gui","options_quit","string"),this.btnLanguageEn.text=getString(this.game.language,"gui","options_language_en","string"),this.btnLanguagePl.text=getString(this.game.language,"gui","options_language_pl","string"),this.center(this.labelSound),this.center(this.labelMusic),this.center(this.labelFullScreen),this.center(this.labelLanguage),this.center(this.labelTutorials),this.center(this.labelBars1),this.center(this.labelSlash2),this.center(this.labelSlash3),this.center(this.labelSlash5),this.center(this.labelSlash6),this.positionButton(this.btnQuit,null,0),this.positionButton(this.btnRestart,null,0),this.positionButton(this.btnLoad,null,0),this.positionButton(this.btnContinue,null,0),this.positionButton(this.btnFullScreenOn,this.labelSlash3,1),this.positionButton(this.btnFullScreenOff,this.labelSlash3,-1),this.positionButton(this.btnLanguageEn,this.labelSlash5,-1),this.positionButton(this.btnLanguagePl,this.labelSlash5,1),this.positionButton(this.btnTutorialsOn,this.labelSlash6,1),this.positionButton(this.btnTutorialsOff,this.labelSlash6,-1),this.positionButton(this.btnMusicMinus,this.labelSlash2,-1),this.positionButton(this.btnMusicPlus,this.labelSlash2,1),this.positionButton(this.btnSoundMinus,this.labelBars1,-.75),this.positionButton(this.btnSoundPlus,this.labelBars1,.75)}),_defineProperty(this,"operate",()=>{this.labelBars1.text="..........";for(var i=0;i<this.soundsVolume;i++)this.labelBars1.text=this.labelBars1.text.substr(0,i)+"|"+this.labelBars1.text.substr(i+1);this.phaser.sound.setVolume(this.soundsVolume/10),this.music?(this.btnMusicPlus.setFont("text_white2"),this.btnMusicMinus.setFont("text_black"),this.game.currentMusic.setMute(!1)):(this.btnMusicPlus.setFont("text_black"),this.btnMusicMinus.setFont("text_white2"),this.game.currentMusic.setMute(!0)),this.tutorials?(this.btnTutorialsOff.setFont("text_black"),this.btnTutorialsOn.setFont("text_white2")):(this.game.tutorial<100&&(this.game.endTurnButton.setVisible(!0),this.game.sellButton.setVisible(!0),this.game.showSupplyButton.setVisible(!0),this.game.showPipesButton.setVisible(!0),this.game.tutorial=100),this.btnTutorialsOff.setFont("text_white2"),this.btnTutorialsOn.setFont("text_black")),"en"==this.language.toLowerCase()?(this.btnLanguagePl.setFont("text_black"),this.btnLanguageEn.setFont("text_white2")):(this.btnLanguagePl.setFont("text_white2"),this.btnLanguageEn.setFont("text_black")),this.game.language=this.language,this.game.round_bmp.text=getString(this.game.language,"gui","turn","string")+" "+this.game.turn,this.game.construction&&""!=this.game.construction.constructionId&&this.game.construction.updateLanguage(),this.game.request&&""!=this.game.request.constructionId&&this.game.request.updateLanguage(),this.phaser.scale.isFullscreen?(this.fullScreen=!0,this.btnFullScreenOff.setFont("text_black"),this.btnFullScreenOn.setFont("text_white2")):(this.btnFullScreenOff.setFont("text_white2"),this.btnFullScreenOn.setFont("text_black")),this.game.menu&&this.game.menu.container.visible?(this.btnLoad.setVisible(!1),this.btnQuit.setVisible(!1),this.btnRestart.setVisible(!1)):(this.btnLoad.setVisible(!0),this.btnQuit.setVisible(!0),this.btnRestart.setVisible(!0)),this.saveOptions(),this.updateLanguage(),this.game.menu.updateLanguage()}),_defineProperty(this,"disableTut",()=>{}),_defineProperty(this,"yesExit",()=>{this.hide(),this.game.showCurtain(1,LAYER_TOOLTIP+1e3),this.phaser.input.enabled=!1,setTimeout(this.game.menu.show,500)}),_defineProperty(this,"yesDisableTut",()=>{this.game.tutorial=100,this.tutorials=!1,this.operate(),this.show(),this.game.endTurnButton.setVisible(!0),this.game.sellButton.setVisible(!0),this.game.showSupplyButton.setVisible(!0),this.game.showPipesButton.setVisible(!0)}),_defineProperty(this,"reenableDisableTut",()=>{this.game.tutorial=200,this.tutorials=!0,this.operate(),this.show()}),_defineProperty(this,"noDisableTut",()=>{this.operate(),this.show()}),_defineProperty(this,"center",obj=>{obj.x=GAME_WIDTH/2-obj.width/2}),_defineProperty(this,"positionButton",(btn,slash,left)=>{btn.setInteractive({cursor:"pointer"}),btn.input.useHandCursor=!0;var TEXT_BUTTON_HITSIZE=1.5;0==left?this.center(btn):(btn.x=slash.x+slash.width/2+(slash.width+5)*left,-1==left&&(btn.x-=btn.width)),btn.input.hitArea.setSize(1.5*btn.width,1.5*btn.height),btn.input.hitArea.setPosition(-(1.5*btn.width-btn.width)/2,-(1.5*btn.height-btn.height)/2),btn.on("pointerover",(function(pointer,target){this.hoverSound.play(),this.game.showTooltip(btn.tooltip),"text_white2"!=btn.font&&this.phaser.tweens.add({targets:[btn],alpha:.5,ease:"Cubic.Out",duration:200})}),this),btn.on("pointerout",(function(pointer,target){this.game.hideTooltip(),this.phaser.tweens.add({targets:[btn],alpha:1,ease:"Cubic.Out",duration:200})}),this),btn.on("pointerdown",(function(pointer,target){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&this.phaser.tweens.add({targets:[btn],alpha:1,ease:"Cubic.Out",duration:200})}),this)}),_defineProperty(this,"show",()=>{this.game.isInOptions=!0,this.game.updateLocks(),this.operate(),this.game.showCurtain(.5,LAYER_GUI_OPTIONS-1),this.container.visible=!0,this.phaser.tweens.add({targets:this.container,alpha:1,y:0,ease:"Cubic.InOut",duration:250})}),_defineProperty(this,"hide",()=>{this.game.isInOptions=!1,this.game.updateLocks(),this.game.hideCurtain(),this.phaser.tweens.add({targets:this.container,alpha:0,y:-200,visible:!1,ease:"Cubic.InOut",duration:250,onComplete:function(){this.container.visible=!1},onCompleteScope:this})}),_defineProperty(this,"saveOptions",()=>{var saveObject=new Object;0!=isLocalStorage()&&(saveObject.soundsVolume=this.soundsVolume,saveObject.music=this.music,saveObject.tutorials=this.tutorials,saveObject.language=this.language,saveObject.fullScreen=this.fullScreen,localStorage.setItem("scriptwelder_waterworks_options",JSON.stringify(saveObject)))}),_defineProperty(this,"loadOptions",()=>{var language;if(0==isLocalStorage())return"pl-PL"==(language=window.navigator.userLanguage||window.navigator.language)&&(this.language="pl"),void this.operate();var saveObject=localStorage.getItem("scriptwelder_waterworks_options");if(saveObject)saveObject=JSON.parse(saveObject),this.soundsVolume=saveObject.soundsVolume,this.music=saveObject.music,this.tutorials=saveObject.tutorials,this.language=saveObject.language.toLowerCase(),this.fullScreen=saveObject.fullScreen;else{try{var sO=localStorage.getItem("options");sO&&null!=(sO=JSON.parse(sO)).soundsVolume&&(this.soundsVolume=sO.soundsVolume,this.music=sO.music,this.tutorials=sO.tutorials,this.language=sO.language.toLowerCase(),this.fullScreen=sO.fullScreen,localStorage.removeItem("options"),localStorage.setItem("scriptwelder_waterworks_options",JSON.stringify(sO)))}catch(error){console.warn(error)}var language;"pl-PL"==(language=window.navigator.userLanguage||window.navigator.language)&&(this.language="pl")}this.operate()}),this.game=g,this.phaser=this.game.phaser;var self=this;this.open=!1,this.soundsVolume=10,this.music=!0,this.tutorials=!0,this.language="en",this.fullScreen=!1,this.clickSound=this.phaser.sound.add("click"),this.hoverSound=this.phaser.sound.add("ui_hover"),this.background=this.phaser.add.image(0,0,"gui","options"),this.background.x=GAME_WIDTH/2,this.background.y=GAME_HEIGHT/2,this.labelSound=this.phaser.add.bitmapText(1,1,"text_brown","SOUND"),this.labelSound.y=40,this.labelBars1=this.phaser.add.bitmapText(1,1,"text_brown","||||||||.."),this.labelBars1.y=this.labelSound.y+10,this.labelMusic=this.phaser.add.bitmapText(1,1,"text_brown","MUSIC"),this.labelMusic.y=73,this.labelSlash2=this.phaser.add.bitmapText(1,1,"text_brown","/"),this.labelSlash2.y=this.labelMusic.y+10,this.labelFullScreen=this.phaser.add.bitmapText(1,1,"text_brown","FULL-SCREEN"),this.labelFullScreen.y=106,this.labelSlash3=this.phaser.add.bitmapText(1,1,"text_brown","/"),this.labelSlash3.y=this.labelFullScreen.y+10,this.labelLanguage=this.phaser.add.bitmapText(1,1,"text_brown","LANGUAGE"),this.labelLanguage.y=142,this.labelSlash5=this.phaser.add.bitmapText(1,1,"text_brown","/"),this.labelSlash5.y=this.labelLanguage.y+10,this.labelTutorials=this.phaser.add.bitmapText(1,1,"text_brown","TUTORIALS"),this.labelTutorials.y=175,this.labelSlash6=this.phaser.add.bitmapText(1,1,"text_brown","/"),this.labelSlash6.y=this.labelTutorials.y+10,this.btnQuit=this.phaser.add.bitmapText(1,1,"text_black","MAIN MENU"),this.btnQuit.y=230,this.btnRestart=this.phaser.add.bitmapText(1,1,"text_black","RESTART GAME"),this.btnRestart.y=250,this.btnLoad=this.phaser.add.bitmapText(1,1,"text_black","RESTART TURN"),this.btnLoad.y=270,this.btnContinue=this.phaser.add.bitmapText(1,1,"text_black","CONTINUE"),this.btnContinue.y=290,this.btnContinue.setInteractive({cursor:"pointer"}),this.btnContinue.input.useHandCursor=!0,this.btnSoundMinus=this.phaser.add.bitmapText(1,1,"text_black","-"),this.btnSoundMinus.y=this.labelSound.y+10,this.btnSoundPlus=this.phaser.add.bitmapText(1,1,"text_black","+"),this.btnSoundPlus.y=this.labelSound.y+10,this.btnMusicMinus=this.phaser.add.bitmapText(1,1,"text_black","OFF"),this.btnMusicMinus.y=this.labelMusic.y+10,this.btnMusicPlus=this.phaser.add.bitmapText(1,1,"text_black","ON"),this.btnMusicPlus.y=this.labelMusic.y+10,this.btnFullScreenOn=this.phaser.add.bitmapText(1,1,"text_white2","ON"),this.btnFullScreenOn.y=this.labelFullScreen.y+10,this.btnFullScreenOff=this.phaser.add.bitmapText(1,1,"text_white2","OFF"),this.btnFullScreenOff.y=this.labelFullScreen.y+10,this.btnLanguageEn=this.phaser.add.bitmapText(1,1,"text_white2","English"),this.btnLanguageEn.y=this.labelLanguage.y+10,this.btnLanguagePl=this.phaser.add.bitmapText(1,1,"text_white2","Polish"),this.btnLanguagePl.y=this.labelLanguage.y+10,this.btnTutorialsOn=this.phaser.add.bitmapText(1,1,"text_white2","On"),this.btnTutorialsOn.y=this.labelTutorials.y+10,this.btnTutorialsOff=this.phaser.add.bitmapText(1,1,"text_white2","Off"),this.btnTutorialsOff.y=this.labelTutorials.y+10,this.container=this.phaser.add.container(0,0,this.background),this.container.add([this.labelSound,this.labelMusic,this.labelFullScreen,this.labelLanguage,this.labelTutorials,this.labelBars1,this.labelSlash2,this.labelSlash3,this.labelSlash5,this.labelSlash6,this.btnFullScreenOn,this.btnFullScreenOff,this.btnLanguageEn,this.btnLanguagePl,this.btnTutorialsOn,this.btnTutorialsOff,this.btnSoundMinus,this.btnSoundPlus,this.btnMusicMinus,this.btnMusicPlus,this.btnRestart,this.btnLoad,this.btnQuit,this.btnContinue]),this.container.setDepth(LAYER_GUI_OPTIONS),this.container.y=-GAME_HEIGHT,this.btnQuit.tooltip="btn_quit",this.btnRestart.tooltip="btn_restart",this.btnLoad.tooltip="btn_load",this.btnContinue.tooltip="btn_continue",this.btnTutorialsOff.tooltip="tutorials_off",this.btnTutorialsOn.tooltip="tutorials_on",this.btnFullScreenOff.tooltip="fullscreen_off",this.btnFullScreenOn.tooltip="fullscreen_on",this.btnLanguageEn.tooltip="language_en",this.btnLanguagePl.tooltip="language_pl",this.btnMusicPlus.tooltip="music_on",this.btnMusicMinus.tooltip="music_off",this.btnSoundPlus.tooltip="volume_up",this.btnSoundMinus.tooltip="volume_down",this.btnTutorialsOff.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.game.tutorial<100?1==self.tutorials&&self.game.popup.show(getString(self.game.language,"popup","tutorial_disable","header"),getString(self.game.language,"popup","tutorial_disable","string"),self.yesDisableTut,self.noDisableTut):self.yesDisableTut(),self.clickSound.play())})),this.btnQuit.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.game.popup.show(getString(self.game.language,"popup","exit_main","header"),getString(self.game.language,"popup","exit_main","string"),self.yesExit,self.nothing),self.clickSound.play())})),this.btnTutorialsOn.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(0==self.tutorials&&self.game.popup.show(getString(self.game.language,"popup","tutorial_enable","header"),getString(self.game.language,"popup","tutorial_enable","string"),self.reenableDisableTut,null),self.clickSound.play())})),this.btnFullScreenOff.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.phaser.scale.stopFullscreen(),self.fullScreen=!1,self.operate(),self.clickSound.play())})),this.btnFullScreenOn.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.phaser.scale.startFullscreen(),self.fullScreen=!0,self.operate(),self.clickSound.play())})),this.btnLanguageEn.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.language="en",self.operate(),self.game.hand.positionCards(),self.clickSound.play())})),this.btnLanguagePl.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.language="pl",self.operate(),self.game.hand.positionCards(),self.clickSound.play())})),this.btnMusicPlus.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.music=!0,self.operate(),self.clickSound.play())})),this.btnMusicMinus.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.music=!1,self.operate(),self.clickSound.play())})),this.btnSoundMinus.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.soundsVolume=Math.floor(self.soundsVolume-1),self.soundsVolume<0&&(self.soundsVolume=0),self.operate(),self.clickSound.play())})),this.btnSoundPlus.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.soundsVolume=Math.floor(self.soundsVolume+1),self.soundsVolume>9&&(self.soundsVolume=10),self.operate(),self.clickSound.play())})),this.btnContinue.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.clickSound.play(),self.hide())})),this.btnRestart.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.game.popup.show(getString(self.game.language,"popup","restart_game","header"),getString(self.game.language,"popup","restart_game","string"),self.restartGame,self.nothing),self.clickSound.play())})),this.btnLoad.on("pointerdown",(function(pointer){1!=pointer.rightButtonDown()&&1!=pointer.middleButtonDown()&&1!=pointer.backButtonDown()&&1!=pointer.forwardButtonDown()&&(self.game.popup.show(getString(self.game.language,"popup","load_game","header"),getString(self.game.language,"popup","load_game","string"),self.loadGame,self.nothing),self.clickSound.play())})),this.loadOptions()}}