class Popup{constructor(g){_defineProperty(this,"hide",()=>{this.buttonNo.hover.input.enabled=!1,this.buttonYes.hover.input.enabled=!1,this.phaser.tweens.add({targets:[this.container],alpha:0,scale:.25,visible:!1,duration:250,ease:"Cubic.In",onComplete:function(){this.container.visible=!1,this.background.setTexture("gui","popup"),this.container.y=POPUP_Y,this.img.visible=!1,this.buttonNo.setPosition(-50,this.background.height/2-45),this.buttonYes.setPosition(50,this.background.height/2-45),this.title.y=.4*-this.background.height,this.description.y=this.title.y+20,this.buttonsY=this.background.height/2-45,this.title.setMaxWidth(CONSTRUCTION_CARDS_MARGIN_LEFT-4*CONSTRUCTION_CARDS_MARGIN),this.description.setMaxWidth(CONSTRUCTION_CARDS_MARGIN_LEFT-4*CONSTRUCTION_CARDS_MARGIN)},onCompleteScope:this}),0==this.game.construction.open&&0==this.game.request.open&&0==this.game.options.container.visible?this.game.hideCurtain():0==this.game.options.container.visible?this.game.showCurtain(.5,LAYER_CONSTRUCTION-1):this.game.showCurtain(.5,LAYER_GUI_OPTIONS-1),this.closeSound.play()}),_defineProperty(this,"showBig",(img,title,message,yesFunction,noFunction)=>{this.title.text=title.toUpperCase(),this.description.text=message,this.title.setMaxWidth(360),this.description.setMaxWidth(360),this.img.setTexture("constructions",img),this.img.visible=!0;var imgY=-130;this.description.height+this.img.displayHeight>120?(this.background.setTexture("gui","popup2"),this.container.y=POPUP_Y2):(this.background.setTexture("gui","popup3"),this.container.y=POPUP_Y,imgY=-85),this.img.y=imgY,this.title.y=this.img.y+this.img.height,this.description.y=this.title.y+12,this.buttonsY=this.description.y+this.description.height+25,this.description.height+this.img.displayHeight>120?this.buttonsY<100&&(this.buttonsY=100):this.buttonsY<50&&(this.buttonsY=50),this.show(title,message,yesFunction,noFunction)}),_defineProperty(this,"show",(title,message,yesFunction,noFunction)=>{this.container.visible=!0,this.openSound.play(),this.phaser.tweens.killTweensOf(this.container),this.container.scale=.5,this.phaser.tweens.add({targets:[this.container],alpha:1,scale:1,visible:!0,duration:250,ease:"Back.Out",onComplete:function(){this.phaser.input.enabled=!0,this.buttonNo.hover.input.enabled=!0,this.buttonYes.hover.input.enabled=!0},onCompleteScope:this}),this.game.showCurtain(.5,LAYER_POPUP-1),this.title.text=title.toUpperCase(),this.description.text=message,this.description.setCenterAlign(),this.title.x=-this.title.width/2,this.description.x=-this.description.width/2,this.yesFunction=yesFunction,this.noFunction=noFunction,null==this.noFunction?(this.buttonNo.setVisible(!1),this.buttonYes.setPosition(0,this.buttonsY)):(this.buttonNo.setVisible(!0),this.buttonNo.setPosition(-50,this.buttonsY),this.buttonYes.setPosition(50,this.buttonsY))}),_defineProperty(this,"yesPressed",pointer=>{this.hide(),this.yesFunction&&this.yesFunction.call()}),_defineProperty(this,"noPressed",pointer=>{this.hide(),this.noFunction&&this.noFunction.call()}),this.game=g,this.phaser=this.game.phaser;var self=this;this.open=!1,this.yesFunction=null,this.noFunction=null,this.img=this.phaser.add.image(0,0,"gui","popup"),this.img.visible=!1,this.img.x=0,this.img.y=-140,this.img.setOrigin(.5,0),this.background=this.phaser.add.image(0,0,"gui","popup"),this.closeSound=this.phaser.sound.add("splash1"),this.openSound=this.phaser.sound.add("splash2"),this.buttonNo=new Button(this.game,"x","x_glow","gui",this.noPressed),this.buttonNo.setPosition(-50,this.background.height/2-45),this.buttonYes=new Button(this.game,"v","v_glow","gui",this.yesPressed),this.buttonYes.setPosition(50,this.background.height/2-45),this.buttonsY=this.background.height/2-45,this.title=this.phaser.add.bitmapText(0,.4*-this.background.height,"text_black","..."),this.description=this.phaser.add.bitmapText(0,this.title.y+20,"text_brown","..."),this.description.align=1,this.title.setMaxWidth(CONSTRUCTION_CARDS_MARGIN_LEFT-4*CONSTRUCTION_CARDS_MARGIN),this.description.setMaxWidth(CONSTRUCTION_CARDS_MARGIN_LEFT-4*CONSTRUCTION_CARDS_MARGIN),this.container=this.phaser.add.container(0,0,[this.background,this.title,this.description]),this.container.add(this.buttonYes.getContent()),this.container.add(this.buttonNo.getContent()),this.container.add(this.img),this.container.setDepth(LAYER_POPUP),this.container.x=GAME_WIDTH/2,this.container.y=POPUP_Y,this.container.visible=!1,this.container.alpha=0}}